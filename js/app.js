(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Application,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Application = (function(superClass) {
  extend(Application, superClass);

  function Application() {
    return Application.__super__.constructor.apply(this, arguments);
  }

  Application.prototype.radioEvents = {
    'db ready': 'onReady',
    'app redirect': 'redirectTo'
  };

  Application.prototype.initialize = function() {
    Backbone.Radio.channel('header').trigger('reset');
    Backbone.Radio.channel('loading').trigger('ready');
    Backbone.Radio.channel('breadcrumb').trigger('ready');
    Backbone.Radio.channel('overlay').trigger('ready');
    return true;
  };

  Application.prototype.onReady = function() {
    return Backbone.Radio.channel('ontology').request('ensure:bundled').then((function(_this) {
      return function() {
        Backbone.Radio.channel('loading').trigger('hide');
        return Backbone.history.start();
      };
    })(this))["catch"]((function(_this) {
      return function(err) {
        console.log('ERROR FETCHING ONTOLOGIES');
        return console.log(err);
      };
    })(this));
  };

  Application.prototype.redirectTo = function(route) {
    window.location = route;
    return true;
  };

  return Application;

})(Marionette.Service);

module.exports = Application;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9hcHAuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9hcHAuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLElBQUEsV0FBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt3QkFFSixXQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQWdCLFNBQWhCO0lBQ0EsY0FBQSxFQUFnQixZQURoQjs7O3dCQUlGLFVBQUEsR0FBWSxTQUFBO0lBR1YsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFFBQXZCLENBQWdDLENBQUMsT0FBakMsQ0FBeUMsT0FBekM7SUFHQSxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxPQUExQztJQUdBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixZQUF2QixDQUFvQyxDQUFDLE9BQXJDLENBQTZDLE9BQTdDO0lBQ0EsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsT0FBMUM7QUFDQSxXQUFPO0VBWEc7O3dCQWdCWixPQUFBLEdBQVMsU0FBQTtXQUVQLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixVQUF2QixDQUFrQyxDQUFDLE9BQW5DLENBQTJDLGdCQUEzQyxDQUNBLENBQUMsSUFERCxDQUNNLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtRQUdKLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE1BQTFDO2VBR0EsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFqQixDQUFBO01BTkk7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE4sQ0FTQSxFQUFDLEtBQUQsRUFUQSxDQVNPLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxHQUFEO1FBR0wsT0FBTyxDQUFDLEdBQVIsQ0FBWSwyQkFBWjtlQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksR0FBWjtNQUpLO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQVRQO0VBRk87O3dCQW9CVCxVQUFBLEdBQVksU0FBQyxLQUFEO0lBQ1YsTUFBTSxDQUFDLFFBQVAsR0FBa0I7QUFDbEIsV0FBTztFQUZHOzs7O0dBM0NZLFVBQVUsQ0FBQzs7QUFpRHJDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],2:[function(require,module,exports){
var ApplicationLayout,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ApplicationLayout = (function(superClass) {
  extend(ApplicationLayout, superClass);

  function ApplicationLayout() {
    return ApplicationLayout.__super__.constructor.apply(this, arguments);
  }

  ApplicationLayout.prototype.el = 'body';

  ApplicationLayout.prototype.template = false;

  ApplicationLayout.prototype.regions = {
    header: '[app-region=header]',
    breadcrumb: '[app-region=breadcrumb]',
    overlay: '[app-region=overlay]',
    loading: '[app-region=loading]',
    flash: '[app-region=flash]',
    modal: {
      selector: '[app-region=modal]',
      regionClass: require('hn_regions/lib/regions/modal')
    },
    main: '[app-region=main]'
  };

  return ApplicationLayout;

})(Marionette.LayoutView);

module.exports = new ApplicationLayout().render();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9hcHBsaWNhdGlvbi92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9hcHBsaWNhdGlvbi92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLElBQUEsaUJBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7OEJBQ0osRUFBQSxHQUFJOzs4QkFFSixRQUFBLEdBQVU7OzhCQUVWLE9BQUEsR0FDRTtJQUFBLE1BQUEsRUFBWSxxQkFBWjtJQUNBLFVBQUEsRUFBWSx5QkFEWjtJQUVBLE9BQUEsRUFBWSxzQkFGWjtJQUdBLE9BQUEsRUFBWSxzQkFIWjtJQUlBLEtBQUEsRUFBWSxvQkFKWjtJQU1BLEtBQUEsRUFDRTtNQUFBLFFBQUEsRUFBYyxvQkFBZDtNQUNBLFdBQUEsRUFBYyxPQUFBLENBQVEsOEJBQVIsQ0FEZDtLQVBGO0lBVUEsSUFBQSxFQUFVLG1CQVZWOzs7OztHQU40QixVQUFVLENBQUM7O0FBcUIzQyxNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLGlCQUFKLENBQUEsQ0FBdUIsQ0FBQyxNQUF4QixDQUFBIn0=

},{"hn_regions/lib/regions/modal":206}],3:[function(require,module,exports){
var CancelButtonBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

CancelButtonBehavior = (function(superClass) {
  extend(CancelButtonBehavior, superClass);

  function CancelButtonBehavior() {
    return CancelButtonBehavior.__super__.constructor.apply(this, arguments);
  }

  CancelButtonBehavior.prototype.ui = {
    cancel: '[data-click=cancel]'
  };

  CancelButtonBehavior.prototype.events = {
    'click @ui.cancel:not(.disabled)': 'onCancelClick'
  };

  CancelButtonBehavior.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.view.disableCancel = (function(_this) {
      return function() {
        return _this.disableCancel();
      };
    })(this);
    return this.view.enableCancel = (function(_this) {
      return function() {
        return _this.enableCancel();
      };
    })(this);
  };

  CancelButtonBehavior.prototype.onCancelClick = function(e) {
    var base;
    return typeof (base = this.view).onCancel === "function" ? base.onCancel(e) : void 0;
  };

  CancelButtonBehavior.prototype.disableCancel = function() {
    return this.ui.cancel.addClass('disabled');
  };

  CancelButtonBehavior.prototype.enableCancel = function() {
    return this.ui.cancel.removeClass('disabled');
  };

  return CancelButtonBehavior;

})(Mn.Behavior);

module.exports = CancelButtonBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvY2FuY2VsQnV0dG9uLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL2NhbmNlbEJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsSUFBQSxvQkFBQTtFQUFBOzs7QUFBTTs7Ozs7OztpQ0FFSixFQUFBLEdBQ0U7SUFBQSxNQUFBLEVBQVEscUJBQVI7OztpQ0FFRixNQUFBLEdBQ0U7SUFBQSxpQ0FBQSxFQUFtQyxlQUFuQzs7O2lDQUVGLFVBQUEsR0FBWSxTQUFDLE9BQUQ7O01BQUMsVUFBUTs7SUFDbkIsSUFBQyxDQUFBLElBQUksQ0FBQyxhQUFOLEdBQXNCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxhQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7V0FDdEIsSUFBQyxDQUFBLElBQUksQ0FBQyxZQUFOLEdBQXNCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxZQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7RUFGWjs7aUNBSVosYUFBQSxHQUFlLFNBQUMsQ0FBRDtBQUFPLFFBQUE7bUVBQUssQ0FBQyxTQUFVO0VBQXZCOztpQ0FDZixhQUFBLEdBQWUsU0FBQTtXQUFHLElBQUMsQ0FBQSxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEI7RUFBSDs7aUNBQ2YsWUFBQSxHQUFjLFNBQUE7V0FBSSxJQUFDLENBQUEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFYLENBQXVCLFVBQXZCO0VBQUo7Ozs7R0FkbUIsRUFBRSxDQUFDOztBQWtCdEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],4:[function(require,module,exports){
var ClickableRelations,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ClickableRelations = (function(superClass) {
  extend(ClickableRelations, superClass);

  function ClickableRelations() {
    return ClickableRelations.__super__.constructor.apply(this, arguments);
  }

  ClickableRelations.prototype.ui = {
    showRelation: '[data-relation]'
  };

  ClickableRelations.prototype.events = {
    'click @ui.showRelation': 'showRelation'
  };

  ClickableRelations.prototype.showRelation = function(e) {
    var relatedId;
    e.preventDefault();
    relatedId = $(e.currentTarget).data('relation');
    return this.view.trigger('show:relation', relatedId);
  };

  return ClickableRelations;

})(Marionette.Behavior);

module.exports = ClickableRelations;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvY2xpY2thYmxlUmVsYXRpb25zLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL2NsaWNrYWJsZVJlbGF0aW9ucy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxrQkFBQTtFQUFBOzs7QUFBTTs7Ozs7OzsrQkFFSixFQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsaUJBQWQ7OzsrQkFFRixNQUFBLEdBQ0U7SUFBQSx3QkFBQSxFQUEwQixjQUExQjs7OytCQUVGLFlBQUEsR0FBYyxTQUFDLENBQUQ7QUFDWixRQUFBO0lBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQTtJQUNBLFNBQUEsR0FBWSxDQUFBLENBQUUsQ0FBQyxDQUFDLGFBQUosQ0FBa0IsQ0FBQyxJQUFuQixDQUF3QixVQUF4QjtXQUNaLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLGVBQWQsRUFBK0IsU0FBL0I7RUFIWTs7OztHQVJpQixVQUFVLENBQUM7O0FBZTVDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],5:[function(require,module,exports){
var ConfirmationsBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ConfirmationsBehavior = (function(superClass) {
  extend(ConfirmationsBehavior, superClass);

  function ConfirmationsBehavior() {
    return ConfirmationsBehavior.__super__.constructor.apply(this, arguments);
  }

  ConfirmationsBehavior.prototype.events = {
    'click @ui.confirmationTrigger': 'showConfirmation'
  };

  ConfirmationsBehavior.prototype.showConfirmation = function(e) {
    e.stopPropagation();
    return Backbone.Radio.channel('confirm').request('show', this.options).then((function(_this) {
      return function(confirmView) {
        confirmView.on('confirmed', function() {
          return _this.view.triggerMethod('confirmed');
        });
        return confirmView.on('denied', function() {
          return _this.view.triggerMethod('denied');
        });
      };
    })(this));
  };

  return ConfirmationsBehavior;

})(Marionette.Behavior);

module.exports = ConfirmationsBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvY29uZmlybWF0aW9ucy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9jb25maXJtYXRpb25zLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxJQUFBLHFCQUFBO0VBQUE7OztBQUFNOzs7Ozs7O2tDQUlKLE1BQUEsR0FDRTtJQUFBLCtCQUFBLEVBQWlDLGtCQUFqQzs7O2tDQUlGLGdCQUFBLEdBQWtCLFNBQUMsQ0FBRDtJQUNoQixDQUFDLENBQUMsZUFBRixDQUFBO1dBQ0EsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUMsRUFBa0QsSUFBQyxDQUFBLE9BQW5ELENBQTJELENBQUMsSUFBNUQsQ0FBaUUsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFdBQUQ7UUFDL0QsV0FBVyxDQUFDLEVBQVosQ0FBZSxXQUFmLEVBQTRCLFNBQUE7aUJBQUcsS0FBQyxDQUFBLElBQUksQ0FBQyxhQUFOLENBQW9CLFdBQXBCO1FBQUgsQ0FBNUI7ZUFDQSxXQUFXLENBQUMsRUFBWixDQUFlLFFBQWYsRUFBNEIsU0FBQTtpQkFBRyxLQUFDLENBQUEsSUFBSSxDQUFDLGFBQU4sQ0FBb0IsUUFBcEI7UUFBSCxDQUE1QjtNQUYrRDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBakU7RUFGZ0I7Ozs7R0FUZ0IsVUFBVSxDQUFDOztBQWlCL0MsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],6:[function(require,module,exports){
module.exports = {
  BindInputs: require('hn_behaviors/lib/bindInputs'),
  CancelButton: require('./cancelButton'),
  ClickableRelations: require('./clickableRelations'),
  Confirmations: require('./confirmations'),
  CopyToClipboard: require('hn_behaviors/lib/copyToClipboard'),
  DownloadFile: require('hn_behaviors/lib/downloadFile'),
  Flashes: require('hn_behaviors/lib/flashes'),
  FormSerialize: require('hn_behaviors/lib/formSerialize'),
  KeyboardControls: require('./keyboardControls'),
  ModelEvents: require('hn_behaviors/lib/modelEvents'),
  SelectableChild: require('./selectableChild'),
  SortableChild: require('./sortableChild'),
  SortableList: require('./sortableList'),
  SubmitButton: require('hn_behaviors/lib/submitButton'),
  Tooltips: require('hn_behaviors/lib/tooltips')
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvaW5kZXguY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBQyxPQUFQLEdBQ0U7RUFBQSxVQUFBLEVBQW9CLE9BQUEsQ0FBUSw2QkFBUixDQUFwQjtFQUNBLFlBQUEsRUFBb0IsT0FBQSxDQUFRLGdCQUFSLENBRHBCO0VBRUEsa0JBQUEsRUFBb0IsT0FBQSxDQUFRLHNCQUFSLENBRnBCO0VBR0EsYUFBQSxFQUFvQixPQUFBLENBQVEsaUJBQVIsQ0FIcEI7RUFJQSxlQUFBLEVBQW9CLE9BQUEsQ0FBUSxrQ0FBUixDQUpwQjtFQUtBLFlBQUEsRUFBb0IsT0FBQSxDQUFRLCtCQUFSLENBTHBCO0VBTUEsT0FBQSxFQUFvQixPQUFBLENBQVEsMEJBQVIsQ0FOcEI7RUFPQSxhQUFBLEVBQW9CLE9BQUEsQ0FBUSxnQ0FBUixDQVBwQjtFQVFBLGdCQUFBLEVBQW9CLE9BQUEsQ0FBUSxvQkFBUixDQVJwQjtFQVNBLFdBQUEsRUFBb0IsT0FBQSxDQUFRLDhCQUFSLENBVHBCO0VBVUEsZUFBQSxFQUFvQixPQUFBLENBQVEsbUJBQVIsQ0FWcEI7RUFXQSxhQUFBLEVBQW9CLE9BQUEsQ0FBUSxpQkFBUixDQVhwQjtFQVlBLFlBQUEsRUFBb0IsT0FBQSxDQUFRLGdCQUFSLENBWnBCO0VBYUEsWUFBQSxFQUFvQixPQUFBLENBQVEsK0JBQVIsQ0FicEI7RUFjQSxRQUFBLEVBQW9CLE9BQUEsQ0FBUSwyQkFBUixDQWRwQiJ9

},{"./cancelButton":3,"./clickableRelations":4,"./confirmations":5,"./keyboardControls":7,"./selectableChild":8,"./sortableChild":9,"./sortableList":10,"hn_behaviors/lib/bindInputs":189,"hn_behaviors/lib/copyToClipboard":190,"hn_behaviors/lib/downloadFile":191,"hn_behaviors/lib/flashes":192,"hn_behaviors/lib/formSerialize":193,"hn_behaviors/lib/modelEvents":194,"hn_behaviors/lib/submitButton":195,"hn_behaviors/lib/tooltips":196}],7:[function(require,module,exports){
var KeyboardControls,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

KeyboardControls = (function(superClass) {
  extend(KeyboardControls, superClass);

  function KeyboardControls() {
    this.keyAction = bind(this.keyAction, this);
    return KeyboardControls.__super__.constructor.apply(this, arguments);
  }

  KeyboardControls.prototype.initialize = function() {
    return this.keyEvents = this.options.keyEvents;
  };

  KeyboardControls.prototype.onRender = function() {
    this.removeEventListener();
    return this.addEventListener();
  };

  KeyboardControls.prototype.onBeforeRender = function() {
    return this.removeEventListener();
  };

  KeyboardControls.prototype.keyAction = function(e) {
    var keyCode;
    console.log('keyAction');
    keyCode = e.keyCode;
    if (!this.keyEvents[keyCode]) {
      return;
    }
    e.preventDefault();
    e.stopPropagation();
    return this.view.triggerMethod(this.keyEvents[keyCode], e);
  };

  KeyboardControls.prototype.addEventListener = function() {
    $(document).on('keydown', this.keyAction);
    return Backbone.Radio.channel('flash').trigger('add', {
      context: 'info',
      timeout: 1500,
      message: 'Keyboard controls enabled'
    });
  };

  KeyboardControls.prototype.removeEventListener = function() {
    $(document).off('keydown', this.keyAction);
    return Backbone.Radio.channel('flash').trigger('add', {
      context: 'info',
      timeout: 1500,
      message: 'Keyboard controls disabled'
    });
  };

  return KeyboardControls;

})(Mn.Behavior);

module.exports = KeyboardControls;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMva2V5Ym9hcmRDb250cm9scy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9rZXlib2FyZENvbnRyb2xzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxJQUFBLGdCQUFBO0VBQUE7Ozs7QUFBTTs7Ozs7Ozs7NkJBRUosVUFBQSxHQUFZLFNBQUE7V0FDVixJQUFDLENBQUEsU0FBRCxHQUFhLElBQUMsQ0FBQSxPQUFPLENBQUM7RUFEWjs7NkJBR1osUUFBQSxHQUFVLFNBQUE7SUFDUixJQUFDLENBQUEsbUJBQUQsQ0FBQTtXQUNBLElBQUMsQ0FBQSxnQkFBRCxDQUFBO0VBRlE7OzZCQUlWLGNBQUEsR0FBZ0IsU0FBQTtXQUNkLElBQUMsQ0FBQSxtQkFBRCxDQUFBO0VBRGM7OzZCQUdoQixTQUFBLEdBQVcsU0FBQyxDQUFEO0FBRVQsUUFBQTtJQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksV0FBWjtJQUdBLE9BQUEsR0FBVSxDQUFDLENBQUM7SUFJWixJQUFBLENBQWMsSUFBQyxDQUFBLFNBQVUsQ0FBQSxPQUFBLENBQXpCO0FBQUEsYUFBQTs7SUFHQSxDQUFDLENBQUMsY0FBRixDQUFBO0lBQ0EsQ0FBQyxDQUFDLGVBQUYsQ0FBQTtBQUlBLFdBQU8sSUFBQyxDQUFBLElBQUksQ0FBQyxhQUFOLENBQW9CLElBQUMsQ0FBQSxTQUFVLENBQUEsT0FBQSxDQUEvQixFQUF5QyxDQUF6QztFQWpCRTs7NkJBbUJYLGdCQUFBLEdBQWtCLFNBQUE7SUFDaEIsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEVBQVosQ0FBZSxTQUFmLEVBQTBCLElBQUMsQ0FBQSxTQUEzQjtXQUNBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixPQUF2QixDQUErQixDQUFDLE9BQWhDLENBQXdDLEtBQXhDLEVBQStDO01BQUUsT0FBQSxFQUFTLE1BQVg7TUFBbUIsT0FBQSxFQUFTLElBQTVCO01BQWtDLE9BQUEsRUFBUywyQkFBM0M7S0FBL0M7RUFGZ0I7OzZCQUlsQixtQkFBQSxHQUFxQixTQUFBO0lBQ25CLENBQUEsQ0FBRSxRQUFGLENBQVcsQ0FBQyxHQUFaLENBQWdCLFNBQWhCLEVBQTJCLElBQUMsQ0FBQSxTQUE1QjtXQUNBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixPQUF2QixDQUErQixDQUFDLE9BQWhDLENBQXdDLEtBQXhDLEVBQStDO01BQUUsT0FBQSxFQUFTLE1BQVg7TUFBbUIsT0FBQSxFQUFTLElBQTVCO01BQWtDLE9BQUEsRUFBUyw0QkFBM0M7S0FBL0M7RUFGbUI7Ozs7R0FuQ1EsRUFBRSxDQUFDOztBQXlDbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],8:[function(require,module,exports){
var SelectableChild,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SelectableChild = (function(superClass) {
  extend(SelectableChild, superClass);

  function SelectableChild() {
    return SelectableChild.__super__.constructor.apply(this, arguments);
  }

  SelectableChild.prototype.css = {
    active: 'active'
  };

  SelectableChild.prototype.events = {
    'click': 'onClick'
  };

  SelectableChild.prototype.modelEvents = {
    'selected': 'onClick'
  };

  SelectableChild.prototype.onRender = function() {
    if (!this.options.setActive) {
      return;
    }
    if (this.view.model.collection._activeModel === this.view.model.id) {
      return this.$el.trigger('click');
    }
  };

  SelectableChild.prototype.onSelected = function() {
    if (!this.options.setActive) {
      return;
    }
    this.view.model.collection._setActiveModel(this.view.model.id);
    return this.view.model.collection.trigger('selected:model', this.view.model);
  };

  SelectableChild.prototype.onClick = function(e) {
    if (this.view.onClick) {
      return this.view.onClick(e);
    }
    if (!this.options.doubleClick) {
      if (e != null) {
        e.preventDefault();
      }
    }
    if (this.$el.hasClass(this.css.active)) {
      return;
    }
    if (e != null) {
      e.preventDefault();
    }
    this.view.triggerMethod('selected');
    return this.$el.addClass(this.css.active).siblings().removeClass(this.css.active);
  };

  return SelectableChild;

})(Marionette.Behavior);

module.exports = SelectableChild;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvc2VsZWN0YWJsZUNoaWxkLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL3NlbGVjdGFibGVDaGlsZC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxlQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzRCQUVKLEdBQUEsR0FDRTtJQUFBLE1BQUEsRUFBUSxRQUFSOzs7NEJBRUYsTUFBQSxHQUNFO0lBQUEsT0FBQSxFQUFVLFNBQVY7Ozs0QkFFRixXQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQVksU0FBWjs7OzRCQUdGLFFBQUEsR0FBVSxTQUFBO0lBQ1IsSUFBQSxDQUFjLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBdkI7QUFBQSxhQUFBOztJQUNBLElBQXlCLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxZQUF2QixLQUF1QyxJQUFDLENBQUEsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUE1RTthQUFBLElBQUMsQ0FBQSxHQUFHLENBQUMsT0FBTCxDQUFhLE9BQWIsRUFBQTs7RUFGUTs7NEJBS1YsVUFBQSxHQUFZLFNBQUE7SUFDVixJQUFBLENBQWMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUF2QjtBQUFBLGFBQUE7O0lBQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLGVBQXZCLENBQXVDLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQW5EO1dBQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQXZCLENBQStCLGdCQUEvQixFQUFpRCxJQUFDLENBQUEsSUFBSSxDQUFDLEtBQXZEO0VBSFU7OzRCQU1aLE9BQUEsR0FBUyxTQUFDLENBQUQ7SUFFUCxJQUEyQixJQUFDLENBQUEsSUFBSSxDQUFDLE9BQWpDO0FBQUEsYUFBTyxJQUFDLENBQUEsSUFBSSxDQUFDLE9BQU4sQ0FBYyxDQUFkLEVBQVA7O0lBR0EsSUFBQSxDQUEyQixJQUFDLENBQUEsT0FBTyxDQUFDLFdBQXBDOztRQUFBLENBQUMsQ0FBRSxjQUFILENBQUE7T0FBQTs7SUFHQSxJQUFVLElBQUMsQ0FBQSxHQUFHLENBQUMsUUFBTCxDQUFjLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBbkIsQ0FBVjtBQUFBLGFBQUE7OztNQUdBLENBQUMsQ0FBRSxjQUFILENBQUE7O0lBQ0EsSUFBQyxDQUFBLElBQUksQ0FBQyxhQUFOLENBQW9CLFVBQXBCO1dBQ0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxRQUFMLENBQWMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFuQixDQUEwQixDQUFDLFFBQTNCLENBQUEsQ0FBcUMsQ0FBQyxXQUF0QyxDQUFrRCxJQUFDLENBQUEsR0FBRyxDQUFDLE1BQXZEO0VBYk87Ozs7R0F2Qm1CLFVBQVUsQ0FBQzs7QUF3Q3pDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],9:[function(require,module,exports){
var SortableChild,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SortableChild = (function(superClass) {
  extend(SortableChild, superClass);

  function SortableChild() {
    return SortableChild.__super__.constructor.apply(this, arguments);
  }

  SortableChild.prototype.events = {
    'sorted': 'onSorted'
  };

  SortableChild.prototype.onSorted = function(e, order) {
    return this.view.model.set('order', order);
  };

  return SortableChild;

})(Mn.Behavior);

module.exports = SortableChild;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvc29ydGFibGVDaGlsZC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9zb3J0YWJsZUNoaWxkLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxJQUFBLGFBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7MEJBRUosTUFBQSxHQUNFO0lBQUEsUUFBQSxFQUFVLFVBQVY7OzswQkFFRixRQUFBLEdBQVUsU0FBQyxDQUFELEVBQUksS0FBSjtXQUNSLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQVosQ0FBZ0IsT0FBaEIsRUFBeUIsS0FBekI7RUFEUTs7OztHQUxnQixFQUFFLENBQUM7O0FBVS9CLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],10:[function(require,module,exports){
var SortableList,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SortableList = (function(superClass) {
  extend(SortableList, superClass);

  function SortableList() {
    this.reorderCollection = bind(this.reorderCollection, this);
    return SortableList.__super__.constructor.apply(this, arguments);
  }

  SortableList.prototype.initialize = function() {
    return this.view.reorderCollection = (function(_this) {
      return function() {
        return _this.reorderCollection();
      };
    })(this);
  };

  SortableList.prototype.onRender = function() {
    return Sortable.create(this.view.el, {
      handle: this.options.handle || '.sortable',
      animation: this.options.animation || 250,
      onEnd: (function(_this) {
        return function(e) {
          return _this.reorderCollection();
        };
      })(this)
    });
  };

  SortableList.prototype.reorderCollection = function() {
    var el, i, len, order, ref, results;
    order = 1;
    ref = this.view.$el[0].children;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      el = ref[i];
      $(el).trigger('sorted', order);
      results.push(order++);
    }
    return results;
  };

  return SortableList;

})(Mn.Behavior);

module.exports = SortableList;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvc29ydGFibGVMaXN0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL3NvcnRhYmxlTGlzdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsSUFBQSxZQUFBO0VBQUE7Ozs7QUFBTTs7Ozs7Ozs7eUJBSUosVUFBQSxHQUFZLFNBQUE7V0FDVixJQUFDLENBQUEsSUFBSSxDQUFDLGlCQUFOLEdBQTBCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxpQkFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0VBRGhCOzt5QkFHWixRQUFBLEdBQVUsU0FBQTtXQUdSLFFBQVEsQ0FBQyxNQUFULENBQWdCLElBQUMsQ0FBQSxJQUFJLENBQUMsRUFBdEIsRUFDRTtNQUFBLE1BQUEsRUFBYyxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsSUFBbUIsV0FBakM7TUFDQSxTQUFBLEVBQWMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULElBQXNCLEdBRHBDO01BRUEsS0FBQSxFQUFPLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxDQUFEO2lCQUFPLEtBQUMsQ0FBQSxpQkFBRCxDQUFBO1FBQVA7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRlA7S0FERjtFQUhROzt5QkFVVixpQkFBQSxHQUFtQixTQUFBO0FBR2pCLFFBQUE7SUFBQSxLQUFBLEdBQVE7QUFDUjtBQUFBO1NBQUEscUNBQUE7O01BQ0UsQ0FBQSxDQUFFLEVBQUYsQ0FBSyxDQUFDLE9BQU4sQ0FBYyxRQUFkLEVBQXVCLEtBQXZCO21CQUNBLEtBQUE7QUFGRjs7RUFKaUI7Ozs7R0FqQk0sRUFBRSxDQUFDOztBQTJCOUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],11:[function(require,module,exports){
var BreadcrumbComponent, BreadcrumbList,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BreadcrumbList = require('./views/breadcrumbList');

BreadcrumbComponent = (function(superClass) {
  extend(BreadcrumbComponent, superClass);

  function BreadcrumbComponent() {
    return BreadcrumbComponent.__super__.constructor.apply(this, arguments);
  }

  BreadcrumbComponent.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.container = options.container;
    return this.collection = new Backbone.Collection();
  };

  BreadcrumbComponent.prototype.radioEvents = {
    'breadcrumb ready': 'onReady',
    'breadcrumb set': 'set'
  };

  BreadcrumbComponent.prototype.onReady = function() {
    this.set([
      {
        text: 'Loading...'
      }
    ]);
    return this.showView();
  };

  BreadcrumbComponent.prototype.set = function(models) {
    return this.collection.set(models);
  };

  BreadcrumbComponent.prototype.showView = function() {
    if (!this.shown) {
      this.container.show(new BreadcrumbList({
        collection: this.collection
      }));
      return this.shown = true;
    }
  };

  return BreadcrumbComponent;

})(Mn.Service);

module.exports = BreadcrumbComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2JyZWFkY3J1bWIvY29tcG9uZW50LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9icmVhZGNydW1iL2NvbXBvbmVudC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxtQ0FBQTtFQUFBOzs7QUFBQSxjQUFBLEdBQWlCLE9BQUEsQ0FBUSx3QkFBUjs7QUFJWDs7Ozs7OztnQ0FFSixVQUFBLEdBQVksU0FBQyxPQUFEOztNQUFDLFVBQVU7O0lBQ3JCLElBQUMsQ0FBQSxTQUFELEdBQWMsT0FBTyxDQUFDO1dBQ3RCLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBSSxRQUFRLENBQUMsVUFBYixDQUFBO0VBRko7O2dDQUlaLFdBQUEsR0FDRTtJQUFBLGtCQUFBLEVBQW9CLFNBQXBCO0lBQ0EsZ0JBQUEsRUFBb0IsS0FEcEI7OztnQ0FHRixPQUFBLEdBQVMsU0FBQTtJQUNQLElBQUMsQ0FBQSxHQUFELENBQUs7TUFBQztRQUFDLElBQUEsRUFBTSxZQUFQO09BQUQ7S0FBTDtXQUNBLElBQUMsQ0FBQSxRQUFELENBQUE7RUFGTzs7Z0NBSVQsR0FBQSxHQUFLLFNBQUMsTUFBRDtXQUNILElBQUMsQ0FBQSxVQUFVLENBQUMsR0FBWixDQUFnQixNQUFoQjtFQURHOztnQ0FHTCxRQUFBLEdBQVUsU0FBQTtJQUNSLElBQUEsQ0FBTyxJQUFDLENBQUEsS0FBUjtNQUNFLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLGNBQUosQ0FBbUI7UUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7T0FBbkIsQ0FBaEI7YUFDQSxJQUFDLENBQUEsS0FBRCxHQUFTLEtBRlg7O0VBRFE7Ozs7R0FqQnNCLEVBQUUsQ0FBQzs7QUF3QnJDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/breadcrumbList":12}],12:[function(require,module,exports){
var BreadcrumbChild, BreadcrumbList,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BreadcrumbChild = (function(superClass) {
  extend(BreadcrumbChild, superClass);

  function BreadcrumbChild() {
    return BreadcrumbChild.__super__.constructor.apply(this, arguments);
  }

  BreadcrumbChild.prototype.tagName = 'li';

  BreadcrumbChild.prototype.template = require('./templates/breadcrumb_child');

  BreadcrumbChild.prototype.className = function() {
    var css;
    css = 'breadcrumb-item';
    if (!this.model.get('href')) {
      return css + ' active';
    }
    return css;
  };

  return BreadcrumbChild;

})(Mn.LayoutView);

BreadcrumbList = (function(superClass) {
  extend(BreadcrumbList, superClass);

  function BreadcrumbList() {
    return BreadcrumbList.__super__.constructor.apply(this, arguments);
  }

  BreadcrumbList.prototype.className = 'breadcrumb mb-0 bg-light';

  BreadcrumbList.prototype.tagName = 'ol';

  BreadcrumbList.prototype.childView = BreadcrumbChild;

  BreadcrumbList.prototype.attributes = {
    role: 'navigation'
  };

  return BreadcrumbList;

})(Mn.CollectionView);

module.exports = BreadcrumbList;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2JyZWFkY3J1bWIvdmlld3MvYnJlYWRjcnVtYkxpc3QuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2JyZWFkY3J1bWIvdmlld3MvYnJlYWRjcnVtYkxpc3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsK0JBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7NEJBQ0osT0FBQSxHQUFTOzs0QkFDVCxRQUFBLEdBQVUsT0FBQSxDQUFRLDhCQUFSOzs0QkFFVixTQUFBLEdBQVcsU0FBQTtBQUNULFFBQUE7SUFBQSxHQUFBLEdBQU07SUFDTixJQUFBLENBQThCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE1BQVgsQ0FBOUI7QUFBQSxhQUFPLEdBQUEsR0FBTSxVQUFiOztBQUNBLFdBQU87RUFIRTs7OztHQUppQixFQUFFLENBQUM7O0FBVzNCOzs7Ozs7OzJCQUNKLFNBQUEsR0FBVzs7MkJBQ1gsT0FBQSxHQUFTOzsyQkFDVCxTQUFBLEdBQVc7OzJCQUVYLFVBQUEsR0FDRTtJQUFBLElBQUEsRUFBTSxZQUFOOzs7OztHQU55QixFQUFFLENBQUM7O0FBVWhDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/breadcrumb_child":13}],13:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (href, text) {
if ( href)
{
buf.push("<a" + (jade.attr("href", href, true, false)) + ">" + (jade.escape(null == (jade_interp = text) ? "" : jade_interp)) + "</a>");
}
else
{
buf.push(jade.escape(null == (jade_interp = text) ? "" : jade_interp));
}}.call(this,"href" in locals_for_with?locals_for_with.href:typeof href!=="undefined"?href:undefined,"text" in locals_for_with?locals_for_with.text:typeof text!=="undefined"?text:undefined));;return buf.join("");
};
},{"jade/runtime":209}],14:[function(require,module,exports){
var ConfirmComponent, ConfirmView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ConfirmView = require('./views/confirmView');

ConfirmComponent = (function(superClass) {
  extend(ConfirmComponent, superClass);

  function ConfirmComponent() {
    return ConfirmComponent.__super__.constructor.apply(this, arguments);
  }

  ConfirmComponent.prototype.radioRequests = {
    'confirm show': 'confirm'
  };

  ConfirmComponent.prototype.confirm = function(options) {
    if (options == null) {
      options = {};
    }
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var confirmView;
        confirmView = new ConfirmView(options);
        confirmView.on('denied', function() {
          return _this.hideModal();
        });
        confirmView.on('confirmed', function() {
          return _this.hideModal();
        });
        _this.showModal(confirmView, {
          size: options.size
        });
        return resolve(confirmView);
      };
    })(this));
  };

  return ConfirmComponent;

})(require('../modal/abstract'));

module.exports = ConfirmComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2NvbmZpcm0vY29tcG9uZW50LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9jb25maXJtL2NvbXBvbmVudC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw2QkFBQTtFQUFBOzs7QUFBQSxXQUFBLEdBQWMsT0FBQSxDQUFRLHFCQUFSOztBQU9SOzs7Ozs7OzZCQUVKLGFBQUEsR0FDRTtJQUFBLGNBQUEsRUFBZ0IsU0FBaEI7Ozs2QkFFRixPQUFBLEdBQVMsU0FBQyxPQUFEOztNQUFDLFVBQVE7O0FBQ2hCLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO0FBQ2pCLFlBQUE7UUFBQSxXQUFBLEdBQWMsSUFBSSxXQUFKLENBQWdCLE9BQWhCO1FBR2QsV0FBVyxDQUFDLEVBQVosQ0FBZSxRQUFmLEVBQTRCLFNBQUE7aUJBQUcsS0FBQyxDQUFBLFNBQUQsQ0FBQTtRQUFILENBQTVCO1FBQ0EsV0FBVyxDQUFDLEVBQVosQ0FBZSxXQUFmLEVBQTRCLFNBQUE7aUJBQUcsS0FBQyxDQUFBLFNBQUQsQ0FBQTtRQUFILENBQTVCO1FBSUEsS0FBQyxDQUFBLFNBQUQsQ0FBVyxXQUFYLEVBQXdCO1VBQUUsSUFBQSxFQUFNLE9BQU8sQ0FBQyxJQUFoQjtTQUF4QjtlQUdBLE9BQUEsQ0FBUSxXQUFSO01BWmlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaO0VBREE7Ozs7R0FMb0IsT0FBQSxDQUFRLG1CQUFSOztBQXNCL0IsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../modal/abstract":23,"./views/confirmView":15}],15:[function(require,module,exports){
var ConfirmView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ConfirmView = (function(superClass) {
  extend(ConfirmView, superClass);

  function ConfirmView() {
    return ConfirmView.__super__.constructor.apply(this, arguments);
  }

  ConfirmView.prototype.className = 'modal-content';

  ConfirmView.prototype.template = require('./templates/confirm_view');

  ConfirmView.prototype.ui = {
    deny: '[data-click=deny]',
    confirm: '[data-click=confirm]'
  };

  ConfirmView.prototype.triggers = {
    'click @ui.deny': 'denied',
    'click @ui.confirm': 'confirmed'
  };

  ConfirmView.prototype.defaultOptions = {
    message: 'Are you sure?',
    messageCss: '',
    denyIcon: 'fa-times',
    denyText: 'Cancel',
    denyCss: 'btn-secondary',
    confirmIcon: 'fa-check',
    confirmText: 'Confirm',
    confirmCss: 'btn-success'
  };

  ConfirmView.prototype.serializeData = function() {
    return _.extend(this.defaultOptions, this.options);
  };

  return ConfirmView;

})(Marionette.LayoutView);

module.exports = ConfirmView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2NvbmZpcm0vdmlld3MvY29uZmlybVZpZXcuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2NvbmZpcm0vdmlld3MvY29uZmlybVZpZXcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLElBQUEsV0FBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt3QkFDSixTQUFBLEdBQVc7O3dCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsMEJBQVI7O3dCQUVWLEVBQUEsR0FDRTtJQUFBLElBQUEsRUFBVSxtQkFBVjtJQUNBLE9BQUEsRUFBVSxzQkFEVjs7O3dCQUdGLFFBQUEsR0FDRTtJQUFBLGdCQUFBLEVBQXNCLFFBQXRCO0lBQ0EsbUJBQUEsRUFBc0IsV0FEdEI7Ozt3QkFHRixjQUFBLEdBQ0U7SUFBQSxPQUFBLEVBQWMsZUFBZDtJQUNBLFVBQUEsRUFBYyxFQURkO0lBR0EsUUFBQSxFQUFjLFVBSGQ7SUFJQSxRQUFBLEVBQWMsUUFKZDtJQUtBLE9BQUEsRUFBYyxlQUxkO0lBT0EsV0FBQSxFQUFjLFVBUGQ7SUFRQSxXQUFBLEVBQWMsU0FSZDtJQVNBLFVBQUEsRUFBYyxhQVRkOzs7d0JBV0YsYUFBQSxHQUFlLFNBQUE7QUFDYixXQUFPLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBQyxDQUFBLGNBQVYsRUFBMEIsSUFBQyxDQUFBLE9BQTNCO0VBRE07Ozs7R0F4QlMsVUFBVSxDQUFDOztBQTZCckMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/confirm_view":16}],16:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (confirmCss, confirmIcon, confirmText, denyCss, denyIcon, denyText, message, messageCss) {
jade_mixins["confirmButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button type=\"button\"" + (jade.attr("data-click", opts.click, true, false)) + (jade.cls(['btn','w-100',opts.css], [null,null,true])) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("<div class=\"modal-body\"><p" + (jade.cls(['lead','mb-0',messageCss], [null,null,true])) + ">" + (((jade_interp = message) == null ? '' : jade_interp)) + "</p></div><div class=\"modal-footer\"><div class=\"row\"><div class=\"col-lg-6\">");
jade_mixins["confirmButton"]({ click: 'deny', css: denyCss, icon: denyIcon, text: denyText });
buf.push("</div><div class=\"col-lg-6\">");
jade_mixins["confirmButton"]({ click: 'confirm', css: confirmCss, icon: confirmIcon, text: confirmText });
buf.push("</div></div></div>");}.call(this,"confirmCss" in locals_for_with?locals_for_with.confirmCss:typeof confirmCss!=="undefined"?confirmCss:undefined,"confirmIcon" in locals_for_with?locals_for_with.confirmIcon:typeof confirmIcon!=="undefined"?confirmIcon:undefined,"confirmText" in locals_for_with?locals_for_with.confirmText:typeof confirmText!=="undefined"?confirmText:undefined,"denyCss" in locals_for_with?locals_for_with.denyCss:typeof denyCss!=="undefined"?denyCss:undefined,"denyIcon" in locals_for_with?locals_for_with.denyIcon:typeof denyIcon!=="undefined"?denyIcon:undefined,"denyText" in locals_for_with?locals_for_with.denyText:typeof denyText!=="undefined"?denyText:undefined,"message" in locals_for_with?locals_for_with.message:typeof message!=="undefined"?message:undefined,"messageCss" in locals_for_with?locals_for_with.messageCss:typeof messageCss!=="undefined"?messageCss:undefined));;return buf.join("");
};
},{"jade/runtime":209}],17:[function(require,module,exports){
var HeaderService, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

HeaderService = (function(superClass) {
  extend(HeaderService, superClass);

  function HeaderService() {
    return HeaderService.__super__.constructor.apply(this, arguments);
  }

  HeaderService.prototype.initialize = function() {
    return this.container = this.options.container;
  };

  HeaderService.prototype.radioEvents = {
    'header reset': 'reset'
  };

  HeaderService.prototype.reset = function() {
    return this.container.show(new LayoutView());
  };

  return HeaderService;

})(Marionette.Service);

module.exports = HeaderService;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2hlYWRlci9jb21wb25lbnQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2hlYWRlci9jb21wb25lbnQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEseUJBQUE7RUFBQTs7O0FBQUEsVUFBQSxHQUFhLE9BQUEsQ0FBUSxnQkFBUjs7QUFNUDs7Ozs7OzswQkFFSixVQUFBLEdBQVksU0FBQTtXQUNWLElBQUMsQ0FBQSxTQUFELEdBQWEsSUFBQyxDQUFBLE9BQU8sQ0FBQztFQURaOzswQkFHWixXQUFBLEdBQ0U7SUFBQSxjQUFBLEVBQWdCLE9BQWhCOzs7MEJBRUYsS0FBQSxHQUFPLFNBQUE7V0FDTCxJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQUEsQ0FBaEI7RUFESzs7OztHQVJtQixVQUFVLENBQUM7O0FBYXZDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/layout":18}],18:[function(require,module,exports){
var HeaderView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

HeaderView = (function(superClass) {
  extend(HeaderView, superClass);

  function HeaderView() {
    return HeaderView.__super__.constructor.apply(this, arguments);
  }

  HeaderView.prototype.template = require('./templates/header');

  HeaderView.prototype.tagName = 'nav';

  HeaderView.prototype.className = 'navbar navbar-expand-lg navbar-light bg-light navbar-static-top';

  return HeaderView;

})(Marionette.LayoutView);

module.exports = HeaderView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2hlYWRlci92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2hlYWRlci92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLElBQUEsVUFBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt1QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzt1QkFDVixPQUFBLEdBQVM7O3VCQUNULFNBQUEsR0FBVzs7OztHQUhZLFVBQVUsQ0FBQzs7QUFPcEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/header":19}],19:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["navItemBreak"] = jade_interp = function(){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<li class=\"nav-item\"><a class=\"nav-link\">|</a></li>");
};
jade_mixins["navItem"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["navItemBreak"]();
buf.push("<li class=\"nav-item\"><a" + (jade.attr("href", opts.href, true, false)) + " class=\"nav-link\"><i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;" + (jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</a></li>");
};
buf.push("<a href=\"#\" class=\"navbar-brand\"><img src=\"img/brand/magellan/magellan-13.png\" height=\"40\"/></a><ul class=\"nav navbar-nav pull-left pl-1\">");
jade_mixins["navItem"]({ href: '#datasets', icon: 'fa-folder-open-o', text: 'Archives' });
jade_mixins["navItem"]({ href: '#ontologies', icon: 'fa-list-alt', text: 'Ontologies' });
jade_mixins["navItem"]({ href: '#settings', icon: 'fa-cog', text: 'Settings' });
jade_mixins["navItemBreak"]();
buf.push("</ul>");;return buf.join("");
};
},{"jade/runtime":209}],20:[function(require,module,exports){
var LoadingComponent, LoadingView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LoadingView = require('./views/layout');

LoadingComponent = (function(superClass) {
  extend(LoadingComponent, superClass);

  function LoadingComponent() {
    return LoadingComponent.__super__.constructor.apply(this, arguments);
  }

  LoadingComponent.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    return this.container = options.container;
  };

  LoadingComponent.prototype.radioEvents = {
    'loading ready': 'onReady',
    'loading show': 'showLoading',
    'loading hide': 'hideLoading'
  };

  LoadingComponent.prototype.showLoading = function(message) {
    if (message == null) {
      message = 'LOADING';
    }
    $('.loading-region').addClass('active');
    return this.view.updateMessage(message);
  };

  LoadingComponent.prototype.hideLoading = function() {
    return $('.loading-region').removeClass('active');
  };

  LoadingComponent.prototype.onReady = function() {
    if (!this.view) {
      this.view = new LoadingView();
      return this.container.show(this.view);
    }
  };

  return LoadingComponent;

})(Mn.Service);

module.exports = LoadingComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2xvYWRpbmcvY29tcG9uZW50LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9sb2FkaW5nL2NvbXBvbmVudC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw2QkFBQTtFQUFBOzs7QUFBQSxXQUFBLEdBQWMsT0FBQSxDQUFRLGdCQUFSOztBQUlSOzs7Ozs7OzZCQUVKLFVBQUEsR0FBWSxTQUFDLE9BQUQ7O01BQUMsVUFBVTs7V0FDckIsSUFBQyxDQUFBLFNBQUQsR0FBYyxPQUFPLENBQUM7RUFEWjs7NkJBR1osV0FBQSxHQUNFO0lBQUEsZUFBQSxFQUFrQixTQUFsQjtJQUNBLGNBQUEsRUFBa0IsYUFEbEI7SUFFQSxjQUFBLEVBQWtCLGFBRmxCOzs7NkJBSUYsV0FBQSxHQUFhLFNBQUMsT0FBRDs7TUFBQyxVQUFROztJQUNwQixDQUFBLENBQUUsaUJBQUYsQ0FBb0IsQ0FBQyxRQUFyQixDQUE4QixRQUE5QjtXQUNBLElBQUMsQ0FBQSxJQUFJLENBQUMsYUFBTixDQUFvQixPQUFwQjtFQUZXOzs2QkFJYixXQUFBLEdBQWEsU0FBQTtXQUNYLENBQUEsQ0FBRSxpQkFBRixDQUFvQixDQUFDLFdBQXJCLENBQWlDLFFBQWpDO0VBRFc7OzZCQUdiLE9BQUEsR0FBUyxTQUFBO0lBQ1AsSUFBQSxDQUFPLElBQUMsQ0FBQSxJQUFSO01BQ0UsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFJLFdBQUosQ0FBQTthQUNSLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFDLENBQUEsSUFBakIsRUFGRjs7RUFETzs7OztHQWpCb0IsRUFBRSxDQUFDOztBQXdCbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./views/layout":21}],21:[function(require,module,exports){
var LoadingView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LoadingView = (function(superClass) {
  extend(LoadingView, superClass);

  function LoadingView() {
    return LoadingView.__super__.constructor.apply(this, arguments);
  }

  LoadingView.prototype.template = require('./templates/loading');

  LoadingView.prototype.className = 'loading-view';

  LoadingView.prototype.ui = {
    message: '[data-display=message]'
  };

  LoadingView.prototype.updateMessage = function(msg) {
    return this.ui.message.text(msg);
  };

  return LoadingView;

})(Mn.LayoutView);

module.exports = LoadingView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2xvYWRpbmcvdmlld3MvbGF5b3V0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9sb2FkaW5nL3ZpZXdzL2xheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxXQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3dCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEscUJBQVI7O3dCQUNWLFNBQUEsR0FBVzs7d0JBRVgsRUFBQSxHQUNFO0lBQUEsT0FBQSxFQUFTLHdCQUFUOzs7d0JBRUYsYUFBQSxHQUFlLFNBQUMsR0FBRDtXQUNiLElBQUMsQ0FBQSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQVosQ0FBaUIsR0FBakI7RUFEYTs7OztHQVBTLEVBQUUsQ0FBQzs7QUFZN0IsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/loading":22}],22:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<i class=\"fa fa-fw fa-spin fa-spinner\"></i><p data-display=\"message\" class=\"message\">LOADING</p>");;return buf.join("");
};
},{"jade/runtime":209}],23:[function(require,module,exports){
var AbstractModalComponent, ModalView, hideModalOnHashChange,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ModalView = require('./view');

hideModalOnHashChange = function() {
  return window.modalWindow.hideModal();
};

AbstractModalComponent = (function(superClass) {
  extend(AbstractModalComponent, superClass);

  function AbstractModalComponent() {
    return AbstractModalComponent.__super__.constructor.apply(this, arguments);
  }

  AbstractModalComponent.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    return this.container = options.container;
  };

  AbstractModalComponent.prototype.hideModal = function() {
    return this.modalView.hideModal();
  };

  AbstractModalComponent.prototype.showModal = function(contentView, modalViewOptions) {
    if (modalViewOptions == null) {
      modalViewOptions = {};
    }
    this.modalView = new ModalView(modalViewOptions);
    this.modalView.on('show', (function(_this) {
      return function() {
        _this.modalView.contentRegion.show(contentView);
        window.addEventListener('hashchange', hideModalOnHashChange);
        return window.modalWindow = _this.modalView;
      };
    })(this));
    this.modalView.on('destroy', function() {
      window.removeEventListener('hashchange', hideModalOnHashChange);
      return delete window.modalWindow;
    });
    this.modalView.on('hidden:modal', (function(_this) {
      return function() {
        return typeof _this.onModalHidden === "function" ? _this.onModalHidden() : void 0;
      };
    })(this));
    return this.container.show(this.modalView);
  };

  return AbstractModalComponent;

})(Marionette.Service);

module.exports = AbstractModalComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL21vZGFsL2Fic3RyYWN0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9tb2RhbC9hYnN0cmFjdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx3REFBQTtFQUFBOzs7QUFBQSxTQUFBLEdBQVksT0FBQSxDQUFRLFFBQVI7O0FBS1oscUJBQUEsR0FBd0IsU0FBQTtTQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBbkIsQ0FBQTtBQUFIOztBQUdsQjs7Ozs7OzttQ0FFSixVQUFBLEdBQVksU0FBQyxPQUFEOztNQUFDLFVBQVU7O1dBQ3JCLElBQUMsQ0FBQSxTQUFELEdBQWEsT0FBTyxDQUFDO0VBRFg7O21DQUdaLFNBQUEsR0FBVyxTQUFBO1dBQ1QsSUFBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQUE7RUFEUzs7bUNBR1gsU0FBQSxHQUFXLFNBQUMsV0FBRCxFQUFjLGdCQUFkOztNQUFjLG1CQUFpQjs7SUFHdEMsSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLFNBQUosQ0FBYyxnQkFBZDtJQUdiLElBQUMsQ0FBQSxTQUFTLENBQUMsRUFBWCxDQUFjLE1BQWQsRUFBc0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ3BCLEtBQUMsQ0FBQSxTQUFTLENBQUMsYUFBYSxDQUFDLElBQXpCLENBQStCLFdBQS9CO1FBQ0EsTUFBTSxDQUFDLGdCQUFQLENBQXdCLFlBQXhCLEVBQXNDLHFCQUF0QztlQUNBLE1BQU0sQ0FBQyxXQUFQLEdBQXFCLEtBQUMsQ0FBQTtNQUhGO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF0QjtJQU1BLElBQUMsQ0FBQSxTQUFTLENBQUMsRUFBWCxDQUFjLFNBQWQsRUFBeUIsU0FBQTtNQUN2QixNQUFNLENBQUMsbUJBQVAsQ0FBMkIsWUFBM0IsRUFBeUMscUJBQXpDO2FBQ0EsT0FBTyxNQUFNLENBQUM7SUFGUyxDQUF6QjtJQUtBLElBQUMsQ0FBQSxTQUFTLENBQUMsRUFBWCxDQUFjLGNBQWQsRUFBOEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBOzJEQUFHLEtBQUMsQ0FBQTtNQUFKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE5QjtXQUdBLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFDLENBQUEsU0FBakI7RUFwQk87Ozs7R0FSd0IsVUFBVSxDQUFDOztBQWdDaEQsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./view":26}],24:[function(require,module,exports){
var ModalComponent,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ModalComponent = (function(superClass) {
  extend(ModalComponent, superClass);

  function ModalComponent() {
    return ModalComponent.__super__.constructor.apply(this, arguments);
  }

  ModalComponent.prototype.radioEvents = {
    'modal show': 'showViewProxy'
  };

  ModalComponent.prototype.showViewProxy = function(view, modalViewOptions) {
    if (modalViewOptions == null) {
      modalViewOptions = {};
    }
    view.on('hide', (function(_this) {
      return function() {
        return _this.hideModal();
      };
    })(this));
    return this.showModal(view, modalViewOptions);
  };

  return ModalComponent;

})(require('./abstract'));

module.exports = ModalComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL21vZGFsL2NvbXBvbmVudC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvbW9kYWwvY29tcG9uZW50LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLGNBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7MkJBRUosV0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLGVBQWQ7OzsyQkFFRixhQUFBLEdBQWUsU0FBQyxJQUFELEVBQU8sZ0JBQVA7O01BQU8sbUJBQWlCOztJQUNyQyxJQUFJLENBQUMsRUFBTCxDQUFRLE1BQVIsRUFBZ0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsS0FBQyxDQUFBLFNBQUQsQ0FBQTtNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQjtXQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBWCxFQUFpQixnQkFBakI7RUFGYTs7OztHQUxZLE9BQUEsQ0FBUSxZQUFSOztBQVc3QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./abstract":23}],25:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (modalCss) {
buf.push("<div role=\"document\" data-region=\"modal-content\"" + (jade.cls([modalCss], [true])) + "></div>");}.call(this,"modalCss" in locals_for_with?locals_for_with.modalCss:typeof modalCss!=="undefined"?modalCss:undefined));;return buf.join("");
};
},{"jade/runtime":209}],26:[function(require,module,exports){
var ModalView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ModalView = (function(superClass) {
  extend(ModalView, superClass);

  function ModalView() {
    return ModalView.__super__.constructor.apply(this, arguments);
  }

  ModalView.prototype.template = require('./modal_template');

  ModalView.prototype.attributes = {
    role: 'dialog',
    tabindex: '-1'
  };

  ModalView.prototype.className = 'modal fade';

  ModalView.prototype.templateHelpers = function() {
    var css, size;
    size = this.options.size || '';
    css = 'modal-dialog';
    if (size === 'small') {
      css += ' modal-sm';
    }
    if (size === 'large') {
      css += ' modal-lg';
    }
    return {
      modalCss: css
    };
  };

  ModalView.prototype.regions = {
    contentRegion: '[data-region=modal-content]'
  };

  ModalView.prototype.events = {
    'show.bs.modal': function() {
      return this.triggerMethod('show:modal');
    },
    'shown.bs.modal': function() {
      return this.triggerMethod('shown:modal');
    },
    'hide.bs.modal': function() {
      return this.triggerMethod('hide:modal');
    },
    'hidden.bs.modal': function() {
      return this.triggerMethod('hidden:modal');
    },
    'loaded.bs.modal': function() {
      return this.triggerMethod('loaded:modal');
    }
  };

  ModalView.prototype.onShow = function() {
    return this.$el.modal(this.options.modalOptions || {});
  };

  ModalView.prototype.hideModal = function() {
    return this.$el.modal('hide');
  };

  return ModalView;

})(Marionette.LayoutView);

module.exports = ModalView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL21vZGFsL3ZpZXcuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL21vZGFsL3ZpZXcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLElBQUEsU0FBQTtFQUFBOzs7QUFBTTs7Ozs7OztzQkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLGtCQUFSOztzQkFFVixVQUFBLEdBQ0U7SUFBQSxJQUFBLEVBQVUsUUFBVjtJQUNBLFFBQUEsRUFBVSxJQURWOzs7c0JBR0YsU0FBQSxHQUFXOztzQkFHWCxlQUFBLEdBQWlCLFNBQUE7QUFDZixRQUFBO0lBQUEsSUFBQSxHQUFPLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxJQUFpQjtJQUN4QixHQUFBLEdBQU07SUFDTixJQUFzQixJQUFBLEtBQVEsT0FBOUI7TUFBQSxHQUFBLElBQU8sWUFBUDs7SUFDQSxJQUFzQixJQUFBLEtBQVEsT0FBOUI7TUFBQSxHQUFBLElBQU8sWUFBUDs7QUFDQSxXQUFPO01BQUUsUUFBQSxFQUFVLEdBQVo7O0VBTFE7O3NCQU9qQixPQUFBLEdBQ0U7SUFBQSxhQUFBLEVBQWUsNkJBQWY7OztzQkFFRixNQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQW9CLFNBQUE7YUFBRyxJQUFDLENBQUEsYUFBRCxDQUFlLFlBQWY7SUFBSCxDQUFwQjtJQUNBLGdCQUFBLEVBQW9CLFNBQUE7YUFBRyxJQUFDLENBQUEsYUFBRCxDQUFlLGFBQWY7SUFBSCxDQURwQjtJQUVBLGVBQUEsRUFBb0IsU0FBQTthQUFHLElBQUMsQ0FBQSxhQUFELENBQWUsWUFBZjtJQUFILENBRnBCO0lBR0EsaUJBQUEsRUFBb0IsU0FBQTthQUFHLElBQUMsQ0FBQSxhQUFELENBQWUsY0FBZjtJQUFILENBSHBCO0lBSUEsaUJBQUEsRUFBb0IsU0FBQTthQUFHLElBQUMsQ0FBQSxhQUFELENBQWUsY0FBZjtJQUFILENBSnBCOzs7c0JBTUYsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsR0FBRyxDQUFDLEtBQUwsQ0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLFlBQVQsSUFBeUIsRUFBckM7RUFETTs7c0JBR1IsU0FBQSxHQUFXLFNBQUE7V0FDVCxJQUFDLENBQUEsR0FBRyxDQUFDLEtBQUwsQ0FBVyxNQUFYO0VBRFM7Ozs7R0E5QlcsVUFBVSxDQUFDOztBQW1DbkMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./modal_template":25}],27:[function(require,module,exports){
var crossDomainRoot, proxiedSync;

crossDomainRoot = 'http://192.168.33.33:3000';

proxiedSync = Backbone.sync;

Backbone.sync = (function(_this) {
  return function(method, model, options) {
    if (options == null) {
      options = {};
    }
    if (!options.url) {
      options.url = crossDomainRoot + _.result(model, 'url') || urlError();
    } else if (options.url.substring(0, 6) !== crossDomainRoot.substring(0, 6)) {
      options.url = crossDomainRoot + options.url;
    }
    if (!options.crossDomain) {
      options.crossDomain = true;
    }
    if (!options.xhrFields) {
      options.xhrFields = {
        withCredentials: true
      };
    }
    return proxiedSync(method, model, options);
  };
})(this);

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvY29ycy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbmZpZy9jb3JzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBOztBQUFBLGVBQUEsR0FBa0I7O0FBRWxCLFdBQUEsR0FBYyxRQUFRLENBQUM7O0FBRXZCLFFBQVEsQ0FBQyxJQUFULEdBQWdCLENBQUEsU0FBQSxLQUFBO1NBQUEsU0FBQyxNQUFELEVBQVMsS0FBVCxFQUFnQixPQUFoQjs7TUFBZ0IsVUFBVTs7SUFFeEMsSUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFaO01BQ0UsT0FBTyxDQUFDLEdBQVIsR0FBYyxlQUFBLEdBQWtCLENBQUMsQ0FBQyxNQUFGLENBQVMsS0FBVCxFQUFnQixLQUFoQixDQUFsQixJQUE0QyxRQUFBLENBQUEsRUFENUQ7S0FBQSxNQUdLLElBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFaLENBQXNCLENBQXRCLEVBQXlCLENBQXpCLENBQUEsS0FBK0IsZUFBZSxDQUFDLFNBQWhCLENBQTBCLENBQTFCLEVBQTZCLENBQTdCLENBQWxDO01BQ0gsT0FBTyxDQUFDLEdBQVIsR0FBYyxlQUFBLEdBQWtCLE9BQU8sQ0FBQyxJQURyQzs7SUFHTCxJQUFHLENBQUMsT0FBTyxDQUFDLFdBQVo7TUFDRSxPQUFPLENBQUMsV0FBUixHQUFzQixLQUR4Qjs7SUFHQSxJQUFHLENBQUMsT0FBTyxDQUFDLFNBQVo7TUFDRSxPQUFPLENBQUMsU0FBUixHQUFvQjtRQUFFLGVBQUEsRUFBaUIsSUFBbkI7UUFEdEI7O0FBR0EsV0FBTyxXQUFBLENBQVksTUFBWixFQUFvQixLQUFwQixFQUEyQixPQUEzQjtFQWRPO0FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSJ9

},{}],28:[function(require,module,exports){
require('./jwt');

require('./cors');

require('./marionette');

require('./window');

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvaW5kZXguY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQUEsQ0FBUSxPQUFSOztBQUNBLE9BQUEsQ0FBUSxRQUFSOztBQUNBLE9BQUEsQ0FBUSxjQUFSOztBQUNBLE9BQUEsQ0FBUSxVQUFSIn0=

},{"./cors":27,"./jwt":29,"./marionette":30,"./window":31}],29:[function(require,module,exports){
$.ajaxSetup({
  beforeSend: function(xhr) {
    var token;
    token = localStorage.getItem('token');
    if (token) {
      xhr.setRequestHeader('Authorization', 'JWT ' + token);
    }
  }
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvand0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29uZmlnL2p3dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsQ0FBQyxDQUFDLFNBQUYsQ0FDRTtFQUFBLFVBQUEsRUFBWSxTQUFDLEdBQUQ7QUFDVixRQUFBO0lBQUEsS0FBQSxHQUFRLFlBQVksQ0FBQyxPQUFiLENBQXFCLE9BQXJCO0lBQ1IsSUFBeUQsS0FBekQ7TUFBQSxHQUFHLENBQUMsZ0JBQUosQ0FBcUIsZUFBckIsRUFBc0MsTUFBQSxHQUFTLEtBQS9DLEVBQUE7O0VBRlUsQ0FBWjtDQURGIn0=

},{}],30:[function(require,module,exports){
Marionette.Behaviors.behaviorsLookup = function() {
  return require('../behaviors');
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvbWFyaW9uZXR0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbmZpZy9tYXJpb25ldHRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxVQUFVLENBQUMsU0FBUyxDQUFDLGVBQXJCLEdBQXVDLFNBQUE7U0FBRyxPQUFBLENBQVEsY0FBUjtBQUFIIn0=

},{"../behaviors":6}],31:[function(require,module,exports){
window._s = require('underscore.string');

window.Radio = Backbone.Radio;

if (window.global) {
  window.global.Backbone = Backbone;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvd2luZG93LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29uZmlnL3dpbmRvdy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsTUFBTSxDQUFDLEVBQVAsR0FBWSxPQUFBLENBQVEsbUJBQVI7O0FBR1osTUFBTSxDQUFDLEtBQVAsR0FBZSxRQUFRLENBQUM7O0FBR3hCLElBQUcsTUFBTSxDQUFDLE1BQVY7RUFDRSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQWQsR0FBeUIsU0FEM0IifQ==

},{"underscore.string":238}],32:[function(require,module,exports){
var App, AppLayout, BreadcrumbComponent, ConfirmComponent, DatasetRouter, DexieService, FlashComponent, HeaderComponent, LoadingComponent, MainRouter, ModalComponent, OntologyRouter, OverlayComponent, dexieConfiguration;

require('./config');

App = require('./app');

AppLayout = require('./application/views/layout');

require('hn_entities/lib/config');

DexieService = require('./modules/db/service');

HeaderComponent = require('./components/header/component');

new HeaderComponent({
  container: AppLayout.header
});

BreadcrumbComponent = require('./components/breadcrumb/component');

new BreadcrumbComponent({
  container: AppLayout.breadcrumb
});

ModalComponent = require('./components/modal/component');

new ModalComponent({
  container: AppLayout.modal
});

ConfirmComponent = require('./components/confirm/component');

new ConfirmComponent({
  container: AppLayout.modal
});

LoadingComponent = require('./components/loading/component');

new LoadingComponent({
  container: AppLayout.loading
});

OverlayComponent = require('hn_overlay/lib/component');

FlashComponent = require('hn_flash/lib/component');

new OverlayComponent({
  container: AppLayout.overlay
});

new FlashComponent({
  container: AppLayout.flash
});

require('./modules/search/factory');

require('./modules/datapoint/factory');

require('./modules/facet/factory');

require('./modules/knowledge_rule/factory');

require('./modules/viewer_rule/factory');

DatasetRouter = require('./modules/dataset/router');

MainRouter = require('./modules/main/router');

OntologyRouter = require('./modules/ontology/router');

new DatasetRouter({
  container: AppLayout.main
});

new MainRouter({
  container: AppLayout.main
});

new OntologyRouter({
  container: AppLayout.main
});

dexieConfiguration = {
  db: 'dexie_database_alpha_12',
  schema: [
    {
      name: 'facets',
      attrs: 'id, dataset_id, label'
    }, {
      name: 'datasets',
      attrs: 'id, label'
    }, {
      name: 'datapoints',
      attrs: 'id, dataset_id'
    }, {
      name: 'ontologies',
      attrs: 'id, prefix'
    }, {
      name: 'knowledge_rules',
      attrs: 'id, dataset_id'
    }, {
      name: 'viewer_rules',
      attrs: 'id, dataset_id'
    }
  ]
};

$(document).on('ready', (function(_this) {
  return function() {
    new App();
    return new DexieService(dexieConfiguration);
  };
})(this));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tYW5pZmVzdC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21hbmlmZXN0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxJQUFBOztBQUFBLE9BQUEsQ0FBUSxVQUFSOztBQUdBLEdBQUEsR0FBTSxPQUFBLENBQVEsT0FBUjs7QUFDTixTQUFBLEdBQVksT0FBQSxDQUFRLDRCQUFSOztBQUdaLE9BQUEsQ0FBUSx3QkFBUjs7QUFPQSxZQUFBLEdBQWUsT0FBQSxDQUFRLHNCQUFSOztBQVNmLGVBQUEsR0FBa0IsT0FBQSxDQUFRLCtCQUFSOztBQUNsQixJQUFJLGVBQUosQ0FBb0I7RUFBRSxTQUFBLEVBQVcsU0FBUyxDQUFDLE1BQXZCO0NBQXBCOztBQUdBLG1CQUFBLEdBQXNCLE9BQUEsQ0FBUSxtQ0FBUjs7QUFDdEIsSUFBSSxtQkFBSixDQUF3QjtFQUFFLFNBQUEsRUFBVyxTQUFTLENBQUMsVUFBdkI7Q0FBeEI7O0FBR0EsY0FBQSxHQUFpQixPQUFBLENBQVEsOEJBQVI7O0FBQ2pCLElBQUksY0FBSixDQUFtQjtFQUFFLFNBQUEsRUFBVyxTQUFTLENBQUMsS0FBdkI7Q0FBbkI7O0FBR0EsZ0JBQUEsR0FBbUIsT0FBQSxDQUFRLGdDQUFSOztBQUNuQixJQUFJLGdCQUFKLENBQXFCO0VBQUUsU0FBQSxFQUFXLFNBQVMsQ0FBQyxLQUF2QjtDQUFyQjs7QUFHQSxnQkFBQSxHQUFtQixPQUFBLENBQVEsZ0NBQVI7O0FBQ25CLElBQUksZ0JBQUosQ0FBcUI7RUFBRSxTQUFBLEVBQVcsU0FBUyxDQUFDLE9BQXZCO0NBQXJCOztBQUdBLGdCQUFBLEdBQXNCLE9BQUEsQ0FBUSwwQkFBUjs7QUFDdEIsY0FBQSxHQUFzQixPQUFBLENBQVEsd0JBQVI7O0FBQ3RCLElBQUksZ0JBQUosQ0FBcUI7RUFBRSxTQUFBLEVBQVcsU0FBUyxDQUFDLE9BQXZCO0NBQXJCOztBQUNBLElBQUksY0FBSixDQUFtQjtFQUFFLFNBQUEsRUFBVyxTQUFTLENBQUMsS0FBdkI7Q0FBbkI7O0FBS0EsT0FBQSxDQUFRLDBCQUFSOztBQUNBLE9BQUEsQ0FBUSw2QkFBUjs7QUFDQSxPQUFBLENBQVEseUJBQVI7O0FBQ0EsT0FBQSxDQUFRLGtDQUFSOztBQUNBLE9BQUEsQ0FBUSwrQkFBUjs7QUFRQSxhQUFBLEdBQWtCLE9BQUEsQ0FBUSwwQkFBUjs7QUFDbEIsVUFBQSxHQUFrQixPQUFBLENBQVEsdUJBQVI7O0FBQ2xCLGNBQUEsR0FBa0IsT0FBQSxDQUFRLDJCQUFSOztBQUNsQixJQUFJLGFBQUosQ0FBa0I7RUFBRSxTQUFBLEVBQVcsU0FBUyxDQUFDLElBQXZCO0NBQWxCOztBQUNBLElBQUksVUFBSixDQUFlO0VBQUUsU0FBQSxFQUFXLFNBQVMsQ0FBQyxJQUF2QjtDQUFmOztBQUNBLElBQUksY0FBSixDQUFtQjtFQUFFLFNBQUEsRUFBVyxTQUFTLENBQUMsSUFBdkI7Q0FBbkI7O0FBT0Esa0JBQUEsR0FDRTtFQUFBLEVBQUEsRUFBUSx5QkFBUjtFQUlBLE1BQUEsRUFBUztJQUNQO01BQUUsSUFBQSxFQUFNLFFBQVI7TUFBb0IsS0FBQSxFQUFPLHVCQUEzQjtLQURPLEVBRVA7TUFBRSxJQUFBLEVBQU0sVUFBUjtNQUFvQixLQUFBLEVBQU8sV0FBM0I7S0FGTyxFQUdQO01BQUUsSUFBQSxFQUFNLFlBQVI7TUFBc0IsS0FBQSxFQUFPLGdCQUE3QjtLQUhPLEVBSVA7TUFBRSxJQUFBLEVBQU0sWUFBUjtNQUFzQixLQUFBLEVBQU8sWUFBN0I7S0FKTyxFQUtQO01BQUUsSUFBQSxFQUFNLGlCQUFSO01BQTJCLEtBQUEsRUFBTyxnQkFBbEM7S0FMTyxFQU1QO01BQUUsSUFBQSxFQUFNLGNBQVI7TUFBd0IsS0FBQSxFQUFPLGdCQUEvQjtLQU5PO0dBSlQ7OztBQWdCRixDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsRUFBWixDQUFlLE9BQWYsRUFBd0IsQ0FBQSxTQUFBLEtBQUE7U0FBQSxTQUFBO0lBSXRCLElBQUksR0FBSixDQUFBO1dBQ0EsSUFBSSxZQUFKLENBQWlCLGtCQUFqQjtFQUxzQjtBQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBeEIifQ==

},{"./app":1,"./application/views/layout":2,"./components/breadcrumb/component":11,"./components/confirm/component":14,"./components/header/component":17,"./components/loading/component":20,"./components/modal/component":24,"./config":28,"./modules/datapoint/factory":38,"./modules/dataset/router":120,"./modules/db/service":125,"./modules/facet/factory":127,"./modules/knowledge_rule/factory":129,"./modules/main/router":134,"./modules/ontology/router":156,"./modules/search/factory":179,"./modules/viewer_rule/factory":181,"hn_entities/lib/config":197,"hn_flash/lib/component":200,"hn_overlay/lib/component":205}],33:[function(require,module,exports){
var AbstractRuleCollection, AbstractRuleModel, DefinitionCollection, DefinitionModel, isSubstringOf,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DefinitionModel = (function(superClass) {
  extend(DefinitionModel, superClass);

  function DefinitionModel() {
    this.evaluateAction = bind(this.evaluateAction, this);
    return DefinitionModel.__super__.constructor.apply(this, arguments);
  }

  DefinitionModel.prototype.defaults = {
    order: null,
    source: '@id',
    operation: 'ends_with',
    value: '',
    action: '',
    applied: false
  };

  DefinitionModel.prototype.isBlocking = function() {
    var ref;
    return (ref = this.get('action')) === 'filter' || ref === 'block';
  };

  DefinitionModel.prototype.evaluateAction = function(target, target_object, target_property, data) {
    var index, index_from_split_source, match_regex, match_source, replace_source, replace_text, replace_with, result, split, target_object_data;
    target_object_data = target.get(target_object);
    if (this.get('action') === 'block') {
      return;
    }
    if (this.get('action') === 'filter') {
      return;
    }
    if (this.get('action') === 'literal') {
      target_object_data[target_property] = this.get('literal_text');
      target.set(target_object, target_object_data);
      return;
    }
    if (this.get('action') === 'replace') {
      replace_source = data[this.get('replace_source')];
      replace_text = this.get('replace_text');
      replace_with = this.get('replace_with');
      result = replace_source.replace(replace_text, replace_with);
      target_object_data[target_property] = result;
      target.set(target_object, target_object_data);
      return;
    }
    if (this.get('action') === 'index_from_split') {
      index_from_split_source = data[this.get('index_from_split_source')];
      split = index_from_split_source.split(this.get('index_from_split_delimiter'));
      result = split[this.get('index_from_split_index')];
      if (result) {
        target_object_data[target_property] = result;
        target.set(target_object, target_object_data);
      }
      return;
    }
    if (this.get('action') === 'index_from_regex_match') {
      match_source = data[this.get('index_from_regex_match_source')];
      match_regex = this.get('index_from_regex_match_regex');
      index = this.get('index_from_regex_match_index');
      result = new RegExp(match_regex).exec(match_source);
      if (result && result[index]) {
        target_object_data[target_property] = result[index];
        target.set(target_object, target_object_data);
      }
    }
  };

  return DefinitionModel;

})(Backbone.RelationalModel);

DefinitionCollection = (function(superClass) {
  extend(DefinitionCollection, superClass);

  function DefinitionCollection() {
    this.evaluate = bind(this.evaluate, this);
    return DefinitionCollection.__super__.constructor.apply(this, arguments);
  }

  DefinitionCollection.prototype.model = DefinitionModel;

  DefinitionCollection.prototype.comparator = 'order';

  DefinitionCollection.prototype.evaluate = function(target, target_object, target_property) {
    var conditionMatched, data, definition, i, len, operation, ref, source, value;
    conditionMatched = false;
    ref = this.models;
    for (i = 0, len = ref.length; i < len; i++) {
      definition = ref[i];
      data = target.get('data');
      source = data[definition.get('source')];
      operation = definition.get('operation');
      value = definition.get('value');
      if (operation === 'exists') {
        if (source) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'exact_match') {
        if (source === value) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'starts_with') {
        if (_s.startsWith(source, value)) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'contains') {
        if (_s.include(source.toLowerCase(), value.toLowerCase())) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'contains_case_sensitive') {
        if (_s.include(source, value)) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'does_not_contain') {
        if (!_s.include(source.toLowerCase(), value.toLowerCase())) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
      if (operation === 'ends_with') {
        if (_s.endsWith(source, value)) {
          conditionMatched = true;
          definition.evaluateAction(target, target_object, target_property, data);
        } else {
          if (definition.isBlocking()) {
            break;
          }
        }
      }
    }
    return conditionMatched;
  };

  return DefinitionCollection;

})(Backbone.Collection);

AbstractRuleModel = (function(superClass) {
  extend(AbstractRuleModel, superClass);

  function AbstractRuleModel() {
    return AbstractRuleModel.__super__.constructor.apply(this, arguments);
  }

  AbstractRuleModel.prototype.radioChannel = null;

  AbstractRuleModel.prototype.defaults = {
    order: 0,
    enabled: true,
    target_property: '',
    definitions: []
  };

  AbstractRuleModel.prototype.relations = [
    {
      type: Backbone.HasMany,
      key: 'definitions',
      relatedModel: DefinitionModel,
      collectionType: DefinitionCollection
    }
  ];

  AbstractRuleModel.prototype.save = function() {
    return Backbone.Radio.channel(this.radioChannel).request('save', this);
  };

  AbstractRuleModel.prototype.destroy = function() {
    return Backbone.Radio.channel(this.radioChannel).request('destroy', this);
  };

  return AbstractRuleModel;

})(Backbone.RelationalModel);

isSubstringOf = function(str, sub) {
  return str.indexOf(sub) > -1;
};

AbstractRuleCollection = (function(superClass) {
  extend(AbstractRuleCollection, superClass);

  function AbstractRuleCollection() {
    return AbstractRuleCollection.__super__.constructor.apply(this, arguments);
  }

  AbstractRuleCollection.prototype.model = AbstractRuleModel;

  AbstractRuleCollection.prototype.target_object = null;

  AbstractRuleCollection.prototype.comparator = 'order';

  AbstractRuleCollection.prototype.applyRules = function(targetCollection) {
    var applyRuleToTarget, count, index;
    index = 0;
    count = _s.numberFormat(targetCollection.length);
    applyRuleToTarget = (function(_this) {
      return function(target) {
        var conditionMatched, definitionCollection, i, len, ref, rule, saveFlag, target_property;
        index = index + 1;
        Backbone.Radio.channel('loading').trigger('show', "Processing " + (_s.numberFormat(index)) + " of " + count);
        saveFlag = false;
        ref = _this.models;
        for (i = 0, len = ref.length; i < len; i++) {
          rule = ref[i];
          target_property = rule.get('target_property');
          definitionCollection = rule.get('definitions');
          conditionMatched = definitionCollection.evaluate(target, _this.target_object, target_property);
          if (conditionMatched) {
            saveFlag = true;
          }
        }
        if (saveFlag) {
          return target.save();
        }
        return new Promise(function(resolve, reject) {
          return resolve(true);
        });
      };
    })(this);
    return Promise.each(targetCollection.models, applyRuleToTarget);
  };

  return AbstractRuleCollection;

})(Backbone.Collection);

module.exports = {
  Model: AbstractRuleModel,
  Collection: AbstractRuleCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2Fic3RyYWN0X3J1bGUvZW50aXRpZXMuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2Fic3RyYWN0X3J1bGUvZW50aXRpZXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQUEsK0ZBQUE7RUFBQTs7OztBQUFNOzs7Ozs7Ozs0QkFJSixRQUFBLEdBQ0U7SUFBQSxLQUFBLEVBQVksSUFBWjtJQUdBLE1BQUEsRUFBWSxLQUhaO0lBSUEsU0FBQSxFQUFZLFdBSlo7SUFLQSxLQUFBLEVBQVksRUFMWjtJQVVBLE1BQUEsRUFBWSxFQVZaO0lBWUEsT0FBQSxFQUFTLEtBWlQ7Ozs0QkFtQkYsVUFBQSxHQUFZLFNBQUE7QUFFVixRQUFBO0FBQUEsa0JBQU8sSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLEVBQUEsS0FBbUIsUUFBbkIsSUFBQSxHQUFBLEtBQTZCO0VBRjFCOzs0QkFNWixjQUFBLEdBQWdCLFNBQUMsTUFBRCxFQUFTLGFBQVQsRUFBd0IsZUFBeEIsRUFBeUMsSUFBekM7QUFHZCxRQUFBO0lBQUEsa0JBQUEsR0FBcUIsTUFBTSxDQUFDLEdBQVAsQ0FBVyxhQUFYO0lBSXJCLElBQUcsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBQUEsS0FBa0IsT0FBckI7QUFDRSxhQURGOztJQUlBLElBQUcsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBQUEsS0FBa0IsUUFBckI7QUFDRSxhQURGOztJQUlBLElBQUcsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBQUEsS0FBa0IsU0FBckI7TUFDRSxrQkFBbUIsQ0FBQSxlQUFBLENBQW5CLEdBQXNDLElBQUMsQ0FBQSxHQUFELENBQUssY0FBTDtNQUN0QyxNQUFNLENBQUMsR0FBUCxDQUFXLGFBQVgsRUFBMEIsa0JBQTFCO0FBQ0EsYUFIRjs7SUFNQSxJQUFHLElBQUMsQ0FBQSxHQUFELENBQUssUUFBTCxDQUFBLEtBQWtCLFNBQXJCO01BR0UsY0FBQSxHQUFrQixJQUFLLENBQUEsSUFBQyxDQUFBLEdBQUQsQ0FBSyxnQkFBTCxDQUFBO01BQ3ZCLFlBQUEsR0FBa0IsSUFBQyxDQUFBLEdBQUQsQ0FBSyxjQUFMO01BQ2xCLFlBQUEsR0FBa0IsSUFBQyxDQUFBLEdBQUQsQ0FBSyxjQUFMO01BQ2xCLE1BQUEsR0FBa0IsY0FBYyxDQUFDLE9BQWYsQ0FBdUIsWUFBdkIsRUFBcUMsWUFBckM7TUFHbEIsa0JBQW1CLENBQUEsZUFBQSxDQUFuQixHQUFzQztNQUN0QyxNQUFNLENBQUMsR0FBUCxDQUFXLGFBQVgsRUFBMEIsa0JBQTFCO0FBQ0EsYUFYRjs7SUFjQSxJQUFHLElBQUMsQ0FBQSxHQUFELENBQUssUUFBTCxDQUFBLEtBQWtCLGtCQUFyQjtNQUNFLHVCQUFBLEdBQTBCLElBQUssQ0FBQSxJQUFDLENBQUEsR0FBRCxDQUFLLHlCQUFMLENBQUE7TUFDL0IsS0FBQSxHQUFRLHVCQUF1QixDQUFDLEtBQXhCLENBQThCLElBQUMsQ0FBQSxHQUFELENBQUssNEJBQUwsQ0FBOUI7TUFDUixNQUFBLEdBQVMsS0FBTSxDQUFBLElBQUMsQ0FBQSxHQUFELENBQUssd0JBQUwsQ0FBQTtNQUdmLElBQUcsTUFBSDtRQUNFLGtCQUFtQixDQUFBLGVBQUEsQ0FBbkIsR0FBc0M7UUFDdEMsTUFBTSxDQUFDLEdBQVAsQ0FBVyxhQUFYLEVBQTBCLGtCQUExQixFQUZGOztBQUlBLGFBVkY7O0lBYUEsSUFBRyxJQUFDLENBQUEsR0FBRCxDQUFLLFFBQUwsQ0FBQSxLQUFrQix3QkFBckI7TUFHRSxZQUFBLEdBQWdCLElBQUssQ0FBQSxJQUFDLENBQUEsR0FBRCxDQUFLLCtCQUFMLENBQUE7TUFDckIsV0FBQSxHQUFnQixJQUFDLENBQUEsR0FBRCxDQUFLLDhCQUFMO01BQ2hCLEtBQUEsR0FBZ0IsSUFBQyxDQUFBLEdBQUQsQ0FBSyw4QkFBTDtNQUdoQixNQUFBLEdBQVMsSUFBSSxNQUFKLENBQVcsV0FBWCxDQUF1QixDQUFDLElBQXhCLENBQTZCLFlBQTdCO01BR1QsSUFBRyxNQUFBLElBQVUsTUFBTyxDQUFBLEtBQUEsQ0FBcEI7UUFDRSxrQkFBbUIsQ0FBQSxlQUFBLENBQW5CLEdBQXNDLE1BQU8sQ0FBQSxLQUFBO1FBQzdDLE1BQU0sQ0FBQyxHQUFQLENBQVcsYUFBWCxFQUEwQixrQkFBMUIsRUFGRjtPQVhGOztFQWhEYzs7OztHQTlCWSxRQUFRLENBQUM7O0FBcUhqQzs7Ozs7Ozs7aUNBQ0osS0FBQSxHQUFPOztpQ0FDUCxVQUFBLEdBQVk7O2lDQUVaLFFBQUEsR0FBVSxTQUFDLE1BQUQsRUFBUyxhQUFULEVBQXdCLGVBQXhCO0FBSVIsUUFBQTtJQUFBLGdCQUFBLEdBQW1CO0FBSW5CO0FBQUEsU0FBQSxxQ0FBQTs7TUFHRSxJQUFBLEdBQU8sTUFBTSxDQUFDLEdBQVAsQ0FBVyxNQUFYO01BR1AsTUFBQSxHQUFZLElBQUssQ0FBQSxVQUFVLENBQUMsR0FBWCxDQUFlLFFBQWYsQ0FBQTtNQUNqQixTQUFBLEdBQVksVUFBVSxDQUFDLEdBQVgsQ0FBZSxXQUFmO01BQ1osS0FBQSxHQUFZLFVBQVUsQ0FBQyxHQUFYLENBQWUsT0FBZjtNQVdaLElBQUcsU0FBQSxLQUFhLFFBQWhCO1FBQ0UsSUFBRyxNQUFIO1VBQ0UsZ0JBQUEsR0FBbUI7VUFDbkIsVUFBVSxDQUFDLGNBQVgsQ0FBMEIsTUFBMUIsRUFBa0MsYUFBbEMsRUFBaUQsZUFBakQsRUFBa0UsSUFBbEUsRUFGRjtTQUFBLE1BQUE7VUFJRSxJQUFTLFVBQVUsQ0FBQyxVQUFYLENBQUEsQ0FBVDtBQUFBLGtCQUFBO1dBSkY7U0FERjs7TUFRQSxJQUFHLFNBQUEsS0FBYSxhQUFoQjtRQUNFLElBQUcsTUFBQSxLQUFVLEtBQWI7VUFDRSxnQkFBQSxHQUFtQjtVQUNuQixVQUFVLENBQUMsY0FBWCxDQUEwQixNQUExQixFQUFrQyxhQUFsQyxFQUFpRCxlQUFqRCxFQUFrRSxJQUFsRSxFQUZGO1NBQUEsTUFBQTtVQUlFLElBQVMsVUFBVSxDQUFDLFVBQVgsQ0FBQSxDQUFUO0FBQUEsa0JBQUE7V0FKRjtTQURGOztNQVNBLElBQUcsU0FBQSxLQUFhLGFBQWhCO1FBQ0UsSUFBRyxFQUFFLENBQUMsVUFBSCxDQUFjLE1BQWQsRUFBc0IsS0FBdEIsQ0FBSDtVQUNFLGdCQUFBLEdBQW1CO1VBQ25CLFVBQVUsQ0FBQyxjQUFYLENBQTBCLE1BQTFCLEVBQWtDLGFBQWxDLEVBQWlELGVBQWpELEVBQWtFLElBQWxFLEVBRkY7U0FBQSxNQUFBO1VBSUUsSUFBUyxVQUFVLENBQUMsVUFBWCxDQUFBLENBQVQ7QUFBQSxrQkFBQTtXQUpGO1NBREY7O01BUUEsSUFBRyxTQUFBLEtBQWEsVUFBaEI7UUFDRSxJQUFHLEVBQUUsQ0FBQyxPQUFILENBQVcsTUFBTSxDQUFDLFdBQVAsQ0FBQSxDQUFYLEVBQWlDLEtBQUssQ0FBQyxXQUFOLENBQUEsQ0FBakMsQ0FBSDtVQUNFLGdCQUFBLEdBQW1CO1VBQ25CLFVBQVUsQ0FBQyxjQUFYLENBQTBCLE1BQTFCLEVBQWtDLGFBQWxDLEVBQWlELGVBQWpELEVBQWtFLElBQWxFLEVBRkY7U0FBQSxNQUFBO1VBSUUsSUFBUyxVQUFVLENBQUMsVUFBWCxDQUFBLENBQVQ7QUFBQSxrQkFBQTtXQUpGO1NBREY7O01BUUEsSUFBRyxTQUFBLEtBQWEseUJBQWhCO1FBQ0UsSUFBRyxFQUFFLENBQUMsT0FBSCxDQUFXLE1BQVgsRUFBbUIsS0FBbkIsQ0FBSDtVQUNFLGdCQUFBLEdBQW1CO1VBQ25CLFVBQVUsQ0FBQyxjQUFYLENBQTBCLE1BQTFCLEVBQWtDLGFBQWxDLEVBQWlELGVBQWpELEVBQWtFLElBQWxFLEVBRkY7U0FBQSxNQUFBO1VBSUUsSUFBUyxVQUFVLENBQUMsVUFBWCxDQUFBLENBQVQ7QUFBQSxrQkFBQTtXQUpGO1NBREY7O01BUUEsSUFBRyxTQUFBLEtBQWEsa0JBQWhCO1FBQ0UsSUFBRyxDQUFJLEVBQUUsQ0FBQyxPQUFILENBQVcsTUFBTSxDQUFDLFdBQVAsQ0FBQSxDQUFYLEVBQWlDLEtBQUssQ0FBQyxXQUFOLENBQUEsQ0FBakMsQ0FBUDtVQUNFLGdCQUFBLEdBQW1CO1VBQ25CLFVBQVUsQ0FBQyxjQUFYLENBQTBCLE1BQTFCLEVBQWtDLGFBQWxDLEVBQWlELGVBQWpELEVBQWtFLElBQWxFLEVBRkY7U0FBQSxNQUFBO1VBSUUsSUFBUyxVQUFVLENBQUMsVUFBWCxDQUFBLENBQVQ7QUFBQSxrQkFBQTtXQUpGO1NBREY7O01BU0EsSUFBRyxTQUFBLEtBQWEsV0FBaEI7UUFDRSxJQUFHLEVBQUUsQ0FBQyxRQUFILENBQVksTUFBWixFQUFvQixLQUFwQixDQUFIO1VBQ0UsZ0JBQUEsR0FBbUI7VUFDbkIsVUFBVSxDQUFDLGNBQVgsQ0FBMEIsTUFBMUIsRUFBa0MsYUFBbEMsRUFBaUQsZUFBakQsRUFBa0UsSUFBbEUsRUFGRjtTQUFBLE1BQUE7VUFJRSxJQUFTLFVBQVUsQ0FBQyxVQUFYLENBQUEsQ0FBVDtBQUFBLGtCQUFBO1dBSkY7U0FERjs7QUFyRUY7QUE2RUEsV0FBTztFQXJGQzs7OztHQUp1QixRQUFRLENBQUM7O0FBZ0d0Qzs7Ozs7Ozs4QkFLSixZQUFBLEdBQWM7OzhCQUdkLFFBQUEsR0FDRTtJQUFBLEtBQUEsRUFBa0IsQ0FBbEI7SUFDQSxPQUFBLEVBQWtCLElBRGxCO0lBRUEsZUFBQSxFQUFrQixFQUZsQjtJQUdBLFdBQUEsRUFBa0IsRUFIbEI7Ozs4QkFNRixTQUFBLEdBQVc7SUFDUDtNQUFBLElBQUEsRUFBZ0IsUUFBUSxDQUFDLE9BQXpCO01BQ0EsR0FBQSxFQUFnQixhQURoQjtNQUVBLFlBQUEsRUFBZ0IsZUFGaEI7TUFHQSxjQUFBLEVBQWdCLG9CQUhoQjtLQURPOzs7OEJBUVgsSUFBQSxHQUFNLFNBQUE7V0FDSixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsSUFBQyxDQUFBLFlBQXhCLENBQXFDLENBQUMsT0FBdEMsQ0FBOEMsTUFBOUMsRUFBc0QsSUFBdEQ7RUFESTs7OEJBSU4sT0FBQSxHQUFTLFNBQUE7V0FDUCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsSUFBQyxDQUFBLFlBQXhCLENBQXFDLENBQUMsT0FBdEMsQ0FBOEMsU0FBOUMsRUFBeUQsSUFBekQ7RUFETzs7OztHQTNCcUIsUUFBUSxDQUFDOztBQWtDekMsYUFBQSxHQUFnQixTQUFDLEdBQUQsRUFBTSxHQUFOO0FBQ2QsU0FBTyxHQUFHLENBQUMsT0FBSixDQUFZLEdBQVosQ0FBQSxHQUFtQixDQUFDO0FBRGI7O0FBTVY7Ozs7Ozs7bUNBSUosS0FBQSxHQUFPOzttQ0FJUCxhQUFBLEdBQWU7O21DQUdmLFVBQUEsR0FBWTs7bUNBSVosVUFBQSxHQUFZLFNBQUMsZ0JBQUQ7QUFHVixRQUFBO0lBQUEsS0FBQSxHQUFRO0lBQ1IsS0FBQSxHQUFRLEVBQUUsQ0FBQyxZQUFILENBQWdCLGdCQUFnQixDQUFDLE1BQWpDO0lBS1IsaUJBQUEsR0FBb0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE1BQUQ7QUFHbEIsWUFBQTtRQUFBLEtBQUEsR0FBUSxLQUFBLEdBQVE7UUFDaEIsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUMsRUFBa0QsYUFBQSxHQUFhLENBQUMsRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsS0FBaEIsQ0FBRCxDQUFiLEdBQXFDLE1BQXJDLEdBQTJDLEtBQTdGO1FBTUEsUUFBQSxHQUFXO0FBR1g7QUFBQSxhQUFBLHFDQUFBOztVQUdFLGVBQUEsR0FBa0IsSUFBSSxDQUFDLEdBQUwsQ0FBUyxpQkFBVDtVQUNsQixvQkFBQSxHQUF1QixJQUFJLENBQUMsR0FBTCxDQUFTLGFBQVQ7VUFHdkIsZ0JBQUEsR0FBbUIsb0JBQW9CLENBQUMsUUFBckIsQ0FBOEIsTUFBOUIsRUFBc0MsS0FBQyxDQUFBLGFBQXZDLEVBQXNELGVBQXREO1VBR25CLElBQW1CLGdCQUFuQjtZQUFBLFFBQUEsR0FBVyxLQUFYOztBQVZGO1FBaUJBLElBQXdCLFFBQXhCO0FBQUEsaUJBQU8sTUFBTSxDQUFDLElBQVAsQ0FBQSxFQUFQOztBQUdBLGVBQU8sSUFBSSxPQUFKLENBQVksU0FBQyxPQUFELEVBQVUsTUFBVjtpQkFBcUIsT0FBQSxDQUFRLElBQVI7UUFBckIsQ0FBWjtNQWpDVztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7QUFvQ3BCLFdBQU8sT0FBTyxDQUFDLElBQVIsQ0FBYSxnQkFBZ0IsQ0FBQyxNQUE5QixFQUFzQyxpQkFBdEM7RUE3Q0c7Ozs7R0FmdUIsUUFBUSxDQUFDOztBQWdFOUMsTUFBTSxDQUFDLE9BQVAsR0FDRTtFQUFBLEtBQUEsRUFBWSxpQkFBWjtFQUNBLFVBQUEsRUFBWSxzQkFEWiJ9

},{}],34:[function(require,module,exports){
var DexieFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DexieFactory = (function(superClass) {
  extend(DexieFactory, superClass);

  function DexieFactory() {
    return DexieFactory.__super__.constructor.apply(this, arguments);
  }

  DexieFactory.prototype.ensureDb = function(options) {
    this.db || (this.db = Backbone.Radio.channel('db').request('db'));
    return this.db;
  };

  DexieFactory.prototype.getCollection = function(dataset_id) {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.db[_this.tableName].where('dataset_id').equals(dataset_id).toArray().then(function(models) {
          _this.cachedCollection.reset(models);
          return resolve(_this.cachedCollection);
        })["catch"](function(err) {
          return reject(err);
        });
      };
    })(this));
  };

  DexieFactory.prototype.getModel = function(id) {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        if (!id) {
          return resolve(new _this.cachedCollection.model());
        }
        if (_this.cachedCollection.get(id)) {
          return resolve(_this.cachedCollection.get(id));
        }
        return _this.getCollection().then(function() {
          return resolve(_this.cachedCollection.get(id));
        });
      };
    })(this));
  };

  DexieFactory.prototype.saveModel = function(model) {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var item;
        model.trigger('request');
        item = model.toJSON();
        return _this.db[_this.tableName].put(item).then(function(model_id) {
          model.trigger('sync');
          return resolve();
        })["catch"](function(err) {
          model.trigger('error', err);
          return reject(err);
        });
      };
    })(this));
  };

  DexieFactory.prototype.destroyModel = function(model) {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var primary_key;
        model.trigger('request');
        primary_key = model.id;
        return _this.db[_this.tableName]["delete"](primary_key).then(function(model_id) {
          model.trigger('destroy');
          return resolve();
        })["catch"](function(err) {
          model.trigger('error', err);
          return reject(err);
        });
      };
    })(this));
  };

  return DexieFactory;

})(Marionette.Service);

module.exports = DexieFactory;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2Jhc2UvZGV4aWVGYWN0b3J5LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9iYXNlL2RleGllRmFjdG9yeS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsSUFBQSxZQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3lCQUlKLFFBQUEsR0FBVSxTQUFDLE9BQUQ7SUFDUixJQUFDLENBQUEsT0FBRCxJQUFDLENBQUEsS0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsSUFBdkIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxJQUFyQztBQUNSLFdBQU8sSUFBQyxDQUFBO0VBRkE7O3lCQU1WLGFBQUEsR0FBZSxTQUFDLFVBQUQ7SUFHYixJQUFDLENBQUEsUUFBRCxDQUFBO0FBR0EsV0FBTyxJQUFJLE9BQUosQ0FBWSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsT0FBRCxFQUFVLE1BQVY7ZUFHakIsS0FBQyxDQUFBLEVBQUcsQ0FBQSxLQUFDLENBQUEsU0FBRCxDQUFXLENBQUMsS0FBaEIsQ0FBc0IsWUFBdEIsQ0FBbUMsQ0FBQyxNQUFwQyxDQUEyQyxVQUEzQyxDQUFzRCxDQUFDLE9BQXZELENBQUEsQ0FHQSxDQUFDLElBSEQsQ0FHTSxTQUFDLE1BQUQ7VUFHSixLQUFDLENBQUEsZ0JBQWdCLENBQUMsS0FBbEIsQ0FBd0IsTUFBeEI7QUFHQSxpQkFBTyxPQUFBLENBQVEsS0FBQyxDQUFBLGdCQUFUO1FBTkgsQ0FITixDQVlBLEVBQUMsS0FBRCxFQVpBLENBWU8sU0FBQyxHQUFEO0FBQVMsaUJBQU8sTUFBQSxDQUFPLEdBQVA7UUFBaEIsQ0FaUDtNQUhpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQU5NOzt5QkF5QmYsUUFBQSxHQUFVLFNBQUMsRUFBRDtJQUdSLElBQUMsQ0FBQSxRQUFELENBQUE7QUFHQSxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtRQUdqQixJQUFBLENBQXFELEVBQXJEO0FBQUEsaUJBQU8sT0FBQSxDQUFRLElBQUksS0FBQyxDQUFBLGdCQUFnQixDQUFDLEtBQXRCLENBQUEsQ0FBUixFQUFQOztRQUdBLElBQTZDLEtBQUMsQ0FBQSxnQkFBZ0IsQ0FBQyxHQUFsQixDQUFzQixFQUF0QixDQUE3QztBQUFBLGlCQUFPLE9BQUEsQ0FBUSxLQUFDLENBQUEsZ0JBQWdCLENBQUMsR0FBbEIsQ0FBc0IsRUFBdEIsQ0FBUixFQUFQOztBQUdBLGVBQU8sS0FBQyxDQUFBLGFBQUQsQ0FBQSxDQUFnQixDQUFDLElBQWpCLENBQXNCLFNBQUE7aUJBQU0sT0FBQSxDQUFRLEtBQUMsQ0FBQSxnQkFBZ0IsQ0FBQyxHQUFsQixDQUFzQixFQUF0QixDQUFSO1FBQU4sQ0FBdEI7TUFUVTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQU5DOzt5QkFtQlYsU0FBQSxHQUFXLFNBQUMsS0FBRDtJQUdULElBQUMsQ0FBQSxRQUFELENBQUE7QUFHQSxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtBQUdqQixZQUFBO1FBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkO1FBR0EsSUFBQSxHQUFPLEtBQUssQ0FBQyxNQUFOLENBQUE7ZUFHUCxLQUFDLENBQUEsRUFBRyxDQUFBLEtBQUMsQ0FBQSxTQUFELENBQVcsQ0FBQyxHQUFoQixDQUFvQixJQUFwQixDQUNBLENBQUMsSUFERCxDQUNNLFNBQUMsUUFBRDtVQUNKLEtBQUssQ0FBQyxPQUFOLENBQWMsTUFBZDtBQUNBLGlCQUFPLE9BQUEsQ0FBQTtRQUZILENBRE4sQ0FNQSxFQUFDLEtBQUQsRUFOQSxDQU1PLFNBQUMsR0FBRDtVQUNMLEtBQUssQ0FBQyxPQUFOLENBQWMsT0FBZCxFQUF1QixHQUF2QjtBQUNBLGlCQUFPLE1BQUEsQ0FBTyxHQUFQO1FBRkYsQ0FOUDtNQVRpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQU5FOzt5QkEyQlgsWUFBQSxHQUFjLFNBQUMsS0FBRDtJQUdaLElBQUMsQ0FBQSxRQUFELENBQUE7QUFHQSxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtBQUdqQixZQUFBO1FBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkO1FBR0EsV0FBQSxHQUFjLEtBQUssQ0FBQztlQUdwQixLQUFDLENBQUEsRUFBRyxDQUFBLEtBQUMsQ0FBQSxTQUFELENBQVcsRUFBQyxNQUFELEVBQWYsQ0FBdUIsV0FBdkIsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFDLFFBQUQ7VUFDSixLQUFLLENBQUMsT0FBTixDQUFjLFNBQWQ7QUFDQSxpQkFBTyxPQUFBLENBQUE7UUFGSCxDQUROLENBTUEsRUFBQyxLQUFELEVBTkEsQ0FNTyxTQUFDLEdBQUQ7VUFDTCxLQUFLLENBQUMsT0FBTixDQUFjLE9BQWQsRUFBdUIsR0FBdkI7QUFDQSxpQkFBTyxNQUFBLENBQU8sR0FBUDtRQUZGLENBTlA7TUFUaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVo7RUFOSzs7OztHQWpGVyxVQUFVLENBQUM7O0FBNEd0QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],35:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (directory, title) {
if ( directory)
{
buf.push("<input type=\"file\" id=\"file_upload\"" + (jade.attr("data-title", title, true, false)) + " webkitdirectory=\"webkitdirectory\" mozdirectory=\"mozdirectory\" class=\"form-control-file\"/>");
}
else
{
buf.push("<input type=\"file\" id=\"file_upload\"" + (jade.attr("data-title", title, true, false)) + " class=\"form-control-file\"/>");
}}.call(this,"directory" in locals_for_with?locals_for_with.directory:typeof directory!=="undefined"?directory:undefined,"title" in locals_for_with?locals_for_with.title:typeof title!=="undefined"?title:undefined));;return buf.join("");
};
},{"jade/runtime":209}],36:[function(require,module,exports){
var UploadWidget,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = (function(superClass) {
  extend(UploadWidget, superClass);

  function UploadWidget() {
    return UploadWidget.__super__.constructor.apply(this, arguments);
  }

  UploadWidget.prototype.template = require('./templates/upload');

  UploadWidget.prototype.className = 'form-group';

  UploadWidget.prototype.events = {
    'change input[type=file]': 'onInputChange'
  };

  UploadWidget.prototype.titles = {
    file: 'Open a file.',
    directory: 'Open a directory.'
  };

  UploadWidget.prototype.getTitle = function() {
    if (this.options.title) {
      return this.options.title;
    }
    if (this.options.directory) {
      return this.titles.directory;
    }
    return this.titles.file;
  };

  UploadWidget.prototype.templateHelpers = function() {
    var opts;
    return opts = {
      title: this.getTitle(),
      directory: this.options.directory
    };
  };

  UploadWidget.prototype.onInputChange = function(e) {
    if (this.options.directory) {
      return this.onDirectoryUpload(e);
    }
    return this.onFileUpload(e);
  };

  UploadWidget.prototype.onDirectoryUpload = function(e) {
    return this.trigger('directory:loaded', e.target.files);
  };

  UploadWidget.prototype.onFileUpload = function(e) {
    var file, fileReader;
    file = e.target.files[0];
    if (!file) {
      return;
    }
    fileReader = new FileReader();
    fileReader.onload = (function(_this) {
      return function() {
        return _this.trigger('file:loaded', fileReader.result);
      };
    })(this);
    return fileReader.readAsText(file);
  };

  return UploadWidget;

})(Mn.LayoutView);

module.exports = UploadWidget;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2Jhc2Uvdmlld3MvdXBsb2FkL3VwbG9hZC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvYmFzZS92aWV3cy91cGxvYWQvdXBsb2FkLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxJQUFBLFlBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7eUJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7eUJBQ1YsU0FBQSxHQUFXOzt5QkFFWCxNQUFBLEdBQ0U7SUFBQSx5QkFBQSxFQUEyQixlQUEzQjs7O3lCQUVGLE1BQUEsR0FDRTtJQUFBLElBQUEsRUFBWSxjQUFaO0lBQ0EsU0FBQSxFQUFZLG1CQURaOzs7eUJBR0YsUUFBQSxHQUFVLFNBQUE7SUFDUixJQUF5QixJQUFDLENBQUEsT0FBTyxDQUFDLEtBQWxDO0FBQUEsYUFBTyxJQUFDLENBQUEsT0FBTyxDQUFDLE1BQWhCOztJQUNBLElBQTRCLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBckM7QUFBQSxhQUFPLElBQUMsQ0FBQSxNQUFNLENBQUMsVUFBZjs7QUFDQSxXQUFPLElBQUMsQ0FBQSxNQUFNLENBQUM7RUFIUDs7eUJBS1YsZUFBQSxHQUFpQixTQUFBO0FBQ2YsUUFBQTtBQUFBLFdBQU8sSUFBQSxHQUNMO01BQUEsS0FBQSxFQUFZLElBQUMsQ0FBQSxRQUFELENBQUEsQ0FBWjtNQUNBLFNBQUEsRUFBWSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBRHJCOztFQUZhOzt5QkFLakIsYUFBQSxHQUFlLFNBQUMsQ0FBRDtJQUNiLElBQWdDLElBQUMsQ0FBQSxPQUFPLENBQUMsU0FBekM7QUFBQSxhQUFPLElBQUMsQ0FBQSxpQkFBRCxDQUFtQixDQUFuQixFQUFQOztBQUNBLFdBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxDQUFkO0VBRk07O3lCQUlmLGlCQUFBLEdBQW1CLFNBQUMsQ0FBRDtBQUNqQixXQUFPLElBQUMsQ0FBQSxPQUFELENBQVMsa0JBQVQsRUFBNkIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUF0QztFQURVOzt5QkFHbkIsWUFBQSxHQUFjLFNBQUMsQ0FBRDtBQUdaLFFBQUE7SUFBQSxJQUFBLEdBQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUEsQ0FBQTtJQUd0QixJQUFBLENBQWMsSUFBZDtBQUFBLGFBQUE7O0lBR0EsVUFBQSxHQUFhLElBQUksVUFBSixDQUFBO0lBQ2IsVUFBVSxDQUFDLE1BQVgsR0FBb0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsS0FBQyxDQUFBLE9BQUQsQ0FBUyxhQUFULEVBQXdCLFVBQVUsQ0FBQyxNQUFuQztNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTtXQUNwQixVQUFVLENBQUMsVUFBWCxDQUFzQixJQUF0QjtFQVhZOzs7O0dBNUJXLEVBQUUsQ0FBQzs7QUFrRDlCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/upload":35}],37:[function(require,module,exports){
var DatapointCollection, DatapointModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DatapointModel = (function(superClass) {
  extend(DatapointModel, superClass);

  function DatapointModel() {
    return DatapointModel.__super__.constructor.apply(this, arguments);
  }

  DatapointModel.prototype.urlRoot = 'datapoints';

  DatapointModel.prototype.save = function() {
    return Backbone.Radio.channel('datapoint').request('save', this);
  };

  return DatapointModel;

})(Backbone.Model);

DatapointCollection = (function(superClass) {
  extend(DatapointCollection, superClass);

  function DatapointCollection() {
    return DatapointCollection.__super__.constructor.apply(this, arguments);
  }

  DatapointCollection.prototype.model = DatapointModel;

  DatapointCollection.prototype.resetTargetObject = function(target_object) {
    var count, index, resetDatapoint;
    index = 0;
    count = _s.numberFormat(this.length);
    resetDatapoint = function(dp) {
      var raw;
      index = index + 1;
      Backbone.Radio.channel('loading').trigger('show', "Processing " + (_s.numberFormat(index)) + " of " + count);
      if (target_object === 'data') {
        raw = JSON.parse(JSON.stringify(dp.get('raw')));
        dp.set('data', raw);
      }
      if (target_object === 'views') {
        dp.set('views', {});
      }
      return dp.save();
    };
    return Promise.each(this.models, resetDatapoint);
  };

  return DatapointCollection;

})(Backbone.Collection);

module.exports = {
  Model: DatapointModel,
  Collection: DatapointCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFwb2ludC9lbnRpdGllcy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXBvaW50L2VudGl0aWVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLG1DQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzJCQUNKLE9BQUEsR0FBUzs7MkJBSVQsSUFBQSxHQUFNLFNBQUE7V0FDSixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsV0FBdkIsQ0FBbUMsQ0FBQyxPQUFwQyxDQUE0QyxNQUE1QyxFQUFvRCxJQUFwRDtFQURJOzs7O0dBTHFCLFFBQVEsQ0FBQzs7QUFVaEM7Ozs7Ozs7Z0NBQ0osS0FBQSxHQUFPOztnQ0FJUCxpQkFBQSxHQUFtQixTQUFDLGFBQUQ7QUFHakIsUUFBQTtJQUFBLEtBQUEsR0FBUTtJQUNSLEtBQUEsR0FBUSxFQUFFLENBQUMsWUFBSCxDQUFnQixJQUFDLENBQUEsTUFBakI7SUFHUixjQUFBLEdBQWlCLFNBQUMsRUFBRDtBQUdmLFVBQUE7TUFBQSxLQUFBLEdBQVEsS0FBQSxHQUFRO01BQ2hCLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE1BQTFDLEVBQWtELGFBQUEsR0FBYSxDQUFDLEVBQUUsQ0FBQyxZQUFILENBQWdCLEtBQWhCLENBQUQsQ0FBYixHQUFxQyxNQUFyQyxHQUEyQyxLQUE3RjtNQUlBLElBQUcsYUFBQSxLQUFpQixNQUFwQjtRQUNFLEdBQUEsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLElBQUksQ0FBQyxTQUFMLENBQWUsRUFBRSxDQUFDLEdBQUgsQ0FBTyxLQUFQLENBQWYsQ0FBWDtRQUNOLEVBQUUsQ0FBQyxHQUFILENBQU8sTUFBUCxFQUFlLEdBQWYsRUFGRjs7TUFLQSxJQUFHLGFBQUEsS0FBaUIsT0FBcEI7UUFDRSxFQUFFLENBQUMsR0FBSCxDQUFPLE9BQVAsRUFBZ0IsRUFBaEIsRUFERjs7QUFHQSxhQUFPLEVBQUUsQ0FBQyxJQUFILENBQUE7SUFoQlE7QUFtQmpCLFdBQU8sT0FBTyxDQUFDLElBQVIsQ0FBYSxJQUFDLENBQUEsTUFBZCxFQUFzQixjQUF0QjtFQTFCVTs7OztHQUxhLFFBQVEsQ0FBQzs7QUFtQzNDLE1BQU0sQ0FBQyxPQUFQLEdBQ0U7RUFBQSxLQUFBLEVBQVksY0FBWjtFQUNBLFVBQUEsRUFBWSxtQkFEWiJ9

},{}],38:[function(require,module,exports){
var DatapointFactory, DexieFactory, Entities,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

DatapointFactory = (function(superClass) {
  extend(DatapointFactory, superClass);

  function DatapointFactory() {
    return DatapointFactory.__super__.constructor.apply(this, arguments);
  }

  DatapointFactory.prototype.tableName = 'datapoints';

  DatapointFactory.prototype.radioRequests = {
    'datapoint collection': 'getCollection',
    'datapoint save': 'saveModel',
    'datapoint destroy': 'destroyModel'
  };

  DatapointFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  return DatapointFactory;

})(DexieFactory);

module.exports = new DatapointFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFwb2ludC9mYWN0b3J5LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhcG9pbnQvZmFjdG9yeS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx3Q0FBQTtFQUFBOzs7QUFBQSxRQUFBLEdBQWdCLE9BQUEsQ0FBUSxZQUFSOztBQUNoQixZQUFBLEdBQWdCLE9BQUEsQ0FBUSxzQkFBUjs7QUFJVjs7Ozs7Ozs2QkFHSixTQUFBLEdBQVc7OzZCQUdYLGFBQUEsR0FDRTtJQUFBLHNCQUFBLEVBQXdCLGVBQXhCO0lBQ0EsZ0JBQUEsRUFBd0IsV0FEeEI7SUFFQSxtQkFBQSxFQUF3QixjQUZ4Qjs7OzZCQUlGLFVBQUEsR0FBWSxTQUFBO1dBQ1YsSUFBQyxDQUFBLGdCQUFELEdBQW9CLElBQUksUUFBUSxDQUFDLFVBQWIsQ0FBQTtFQURWOzs7O0dBWGlCOztBQWdCL0IsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxnQkFBSixDQUFBIn0=

},{"../base/dexieFactory":34,"./entities":37}],39:[function(require,module,exports){
var FacetForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetForm = (function(superClass) {
  extend(FacetForm, superClass);

  function FacetForm() {
    return FacetForm.__super__.constructor.apply(this, arguments);
  }

  FacetForm.prototype.className = 'card card-body';

  FacetForm.prototype.template = require('./templates/facet_form');

  FacetForm.prototype.behaviors = {
    CancelButton: {},
    ModelEvents: {},
    SubmitButton: {},
    Flashes: {
      success: {
        message: 'Successfully updated Facet.'
      },
      error: {
        message: 'Error updating Facet.'
      }
    }
  };

  FacetForm.prototype.ui = {
    checkbox: 'input[type=checkbox]',
    edit: '[data-click=edit]'
  };

  FacetForm.prototype.onRender = function() {
    Backbone.Syphon.deserialize(this, this.model.attributes);
    return this.ui.checkbox.bootstrapSwitch({
      wrapperClass: 'enable-facet',
      onText: 'Enabled',
      offText: 'Disabled'
    });
  };

  FacetForm.prototype.onCancel = function() {
    return this.trigger('cancel', this);
  };

  FacetForm.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    this.model.set(data);
    return this.model.save();
  };

  FacetForm.prototype.onRequest = function() {
    this.disableSubmit();
    return this.disableCancel();
  };

  FacetForm.prototype.onSync = function() {
    this.flashSuccess();
    return this.trigger('sync', this);
  };

  FacetForm.prototype.onError = function() {
    this.flashError();
    return this.trigger('sync', this);
  };

  return FacetForm;

})(Mn.LayoutView);

module.exports = FacetForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL2ZhY2V0Rm9ybS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvZmFjZXRfdmlld3MvZmFjZXRGb3JtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFNBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7c0JBQ0osU0FBQSxHQUFXOztzQkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHdCQUFSOztzQkFFVixTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUNBLFdBQUEsRUFBYSxFQURiO0lBRUEsWUFBQSxFQUFjLEVBRmQ7SUFHQSxPQUFBLEVBQ0U7TUFBQSxPQUFBLEVBQ0U7UUFBQSxPQUFBLEVBQVUsNkJBQVY7T0FERjtNQUVBLEtBQUEsRUFDRTtRQUFBLE9BQUEsRUFBVSx1QkFBVjtPQUhGO0tBSkY7OztzQkFTRixFQUFBLEdBQ0U7SUFBQSxRQUFBLEVBQVUsc0JBQVY7SUFDQSxJQUFBLEVBQVUsbUJBRFY7OztzQkFHRixRQUFBLEdBQVUsU0FBQTtJQUNSLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBaEIsQ0FBNkIsSUFBN0IsRUFBZ0MsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUF2QztXQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBUSxDQUFDLGVBQWIsQ0FBNkI7TUFBRSxZQUFBLEVBQWMsY0FBaEI7TUFBZ0MsTUFBQSxFQUFRLFNBQXhDO01BQW1ELE9BQUEsRUFBUyxVQUE1RDtLQUE3QjtFQUZROztzQkFJVixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxPQUFELENBQVMsUUFBVCxFQUFtQixJQUFuQjtFQURROztzQkFHVixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxJQUFBLEdBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFoQixDQUEwQixJQUExQjtJQUNQLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQVg7V0FDQSxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQTtFQUhROztzQkFLVixTQUFBLEdBQVcsU0FBQTtJQUNULElBQUMsQ0FBQSxhQUFELENBQUE7V0FDQSxJQUFDLENBQUEsYUFBRCxDQUFBO0VBRlM7O3NCQUlYLE1BQUEsR0FBUSxTQUFBO0lBQ04sSUFBQyxDQUFBLFlBQUQsQ0FBQTtXQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUFpQixJQUFqQjtFQUZNOztzQkFJUixPQUFBLEdBQVMsU0FBQTtJQUNQLElBQUMsQ0FBQSxVQUFELENBQUE7V0FDQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQVQsRUFBaUIsSUFBakI7RUFGTzs7OztHQXRDYSxFQUFFLENBQUM7O0FBNEMzQixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/facet_form":44}],40:[function(require,module,exports){
var FacetChild, FacetList,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetChild = (function(superClass) {
  extend(FacetChild, superClass);

  function FacetChild() {
    return FacetChild.__super__.constructor.apply(this, arguments);
  }

  FacetChild.prototype.template = require('./templates/facet_child');

  FacetChild.prototype.className = function() {
    var css;
    css = ['list-group-item'];
    if (this.model.get('enabled')) {
      css.push('list-group-item-success');
    }
    if (!this.model.get('enabled')) {
      css.push('list-group-item-warning');
    }
    return css.join(' ');
  };

  FacetChild.prototype.behaviors = {
    SelectableChild: {},
    SortableChild: {}
  };

  FacetChild.prototype.modelEvents = {
    'change:order': 'onReordered',
    'sync': 'onSync'
  };

  FacetChild.prototype.onSync = function() {
    var css;
    css = this.className();
    return this.$el.removeClass().addClass(css);
  };

  FacetChild.prototype.onReordered = function() {
    return this.model.save();
  };

  return FacetChild;

})(Mn.LayoutView);

FacetList = (function(superClass) {
  extend(FacetList, superClass);

  function FacetList() {
    return FacetList.__super__.constructor.apply(this, arguments);
  }

  FacetList.prototype.className = 'list-group';

  FacetList.prototype.childView = FacetChild;

  FacetList.prototype.behaviors = {
    SortableList: {}
  };

  return FacetList;

})(Mn.CollectionView);

module.exports = FacetList;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL2ZhY2V0TGlzdC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvZmFjZXRfdmlld3MvZmFjZXRMaXN0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLHFCQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3VCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEseUJBQVI7O3VCQUVWLFNBQUEsR0FBVyxTQUFBO0FBQ1QsUUFBQTtJQUFBLEdBQUEsR0FBTSxDQUFDLGlCQUFEO0lBQ04sSUFBdUMsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsU0FBWCxDQUF2QztNQUFBLEdBQUcsQ0FBQyxJQUFKLENBQVMseUJBQVQsRUFBQTs7SUFDQSxJQUF1QyxDQUFJLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLFNBQVgsQ0FBM0M7TUFBQSxHQUFHLENBQUMsSUFBSixDQUFTLHlCQUFULEVBQUE7O0FBQ0EsV0FBTyxHQUFHLENBQUMsSUFBSixDQUFTLEdBQVQ7RUFKRTs7dUJBTVgsU0FBQSxHQUNFO0lBQUEsZUFBQSxFQUFpQixFQUFqQjtJQUNBLGFBQUEsRUFBZSxFQURmOzs7dUJBR0YsV0FBQSxHQUNFO0lBQUEsY0FBQSxFQUFnQixhQUFoQjtJQUNBLE1BQUEsRUFBZ0IsUUFEaEI7Ozt1QkFHRixNQUFBLEdBQVEsU0FBQTtBQUNOLFFBQUE7SUFBQSxHQUFBLEdBQU0sSUFBQyxDQUFBLFNBQUQsQ0FBQTtXQUVOLElBQUMsQ0FBQSxHQUFHLENBQUMsV0FBTCxDQUFBLENBQWtCLENBQUMsUUFBbkIsQ0FBNEIsR0FBNUI7RUFITTs7dUJBS1IsV0FBQSxHQUFhLFNBQUE7V0FDWCxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQTtFQURXOzs7O0dBdEJVLEVBQUUsQ0FBQzs7QUEyQnRCOzs7Ozs7O3NCQUNKLFNBQUEsR0FBVzs7c0JBQ1gsU0FBQSxHQUFXOztzQkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDs7Ozs7R0FMb0IsRUFBRSxDQUFDOztBQVMzQixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/facet_child":43}],41:[function(require,module,exports){
var FacetViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetViewer = (function(superClass) {
  extend(FacetViewer, superClass);

  function FacetViewer() {
    return FacetViewer.__super__.constructor.apply(this, arguments);
  }

  FacetViewer.prototype.template = require('./templates/facet_viewer');

  FacetViewer.prototype.className = 'card card-body';

  FacetViewer.prototype.ui = {
    edit: '[data-click=edit]',
    link: '[data-click=link]'
  };

  FacetViewer.prototype.triggers = {
    'click @ui.edit': 'edit'
  };

  FacetViewer.prototype.events = {
    'click @ui.link': 'linkToOntology'
  };

  FacetViewer.prototype.linkToOntology = function() {
    return this.model.linkToOntology().then((function(_this) {
      return function() {
        return _this.render();
      };
    })(this));
  };

  return FacetViewer;

})(Mn.LayoutView);

module.exports = FacetViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL2ZhY2V0Vmlld2VyLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9mYWNldF92aWV3cy9mYWNldFZpZXdlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxXQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3dCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsMEJBQVI7O3dCQUNWLFNBQUEsR0FBVzs7d0JBRVgsRUFBQSxHQUNFO0lBQUEsSUFBQSxFQUFNLG1CQUFOO0lBQ0EsSUFBQSxFQUFNLG1CQUROOzs7d0JBR0YsUUFBQSxHQUNFO0lBQUEsZ0JBQUEsRUFBa0IsTUFBbEI7Ozt3QkFFRixNQUFBLEdBQ0U7SUFBQSxnQkFBQSxFQUFrQixnQkFBbEI7Ozt3QkFFRixjQUFBLEdBQWdCLFNBQUE7V0FDZCxJQUFDLENBQUEsS0FBSyxDQUFDLGNBQVAsQ0FBQSxDQUF1QixDQUFDLElBQXhCLENBQTZCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFNLEtBQUMsQ0FBQSxNQUFELENBQUE7TUFBTjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBN0I7RUFEYzs7OztHQWRRLEVBQUUsQ0FBQzs7QUFtQjdCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/facet_viewer":46}],42:[function(require,module,exports){
var FacetForm, FacetList, FacetListLayout, FacetViewer,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetList = require('./facetList');

FacetViewer = require('./facetViewer');

FacetForm = require('./facetForm');

FacetListLayout = (function(superClass) {
  extend(FacetListLayout, superClass);

  function FacetListLayout() {
    this.showFacetEditor = bind(this.showFacetEditor, this);
    this.showFacetViewer = bind(this.showFacetViewer, this);
    return FacetListLayout.__super__.constructor.apply(this, arguments);
  }

  FacetListLayout.prototype.className = 'row';

  FacetListLayout.prototype.template = require('./templates/facet_list_layout');

  FacetListLayout.prototype.behaviors = {
    Flashes: {
      success: {
        message: 'Successfully linked all facets.'
      }
    }
  };

  FacetListLayout.prototype.ui = {
    linkFacets: '[data-click=link-facets]'
  };

  FacetListLayout.prototype.events = {
    'click @ui.linkFacets': 'linkFacets'
  };

  FacetListLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    viewerRegion: '[data-region=viewer]'
  };

  FacetListLayout.prototype.onRender = function() {
    var listView, ref;
    listView = new FacetList({
      collection: this.collection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showFacetViewer(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  FacetListLayout.prototype.linkFacets = function() {
    return this.collection.linkAllFacets().then((function(_this) {
      return function() {
        _this.flashSuccess();
        return _this.render();
      };
    })(this));
  };

  FacetListLayout.prototype.showFacetViewer = function(facetModel) {
    var facetViewer;
    facetViewer = new FacetViewer({
      model: facetModel
    });
    facetViewer.on('edit', (function(_this) {
      return function(view) {
        return _this.showFacetEditor(view.model);
      };
    })(this));
    return this.viewerRegion.show(facetViewer);
  };

  FacetListLayout.prototype.showFacetEditor = function(facetModel) {
    var facetForm;
    facetForm = new FacetForm({
      model: facetModel
    });
    facetForm.on('cancel', (function(_this) {
      return function(view) {
        return _this.showFacetViewer(view.model);
      };
    })(this));
    facetForm.on('sync', (function(_this) {
      return function(view) {
        return _this.showFacetViewer(view.model);
      };
    })(this));
    return this.viewerRegion.show(facetForm);
  };

  return FacetListLayout;

})(Mn.LayoutView);

module.exports = FacetListLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL2xheW91dC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvZmFjZXRfdmlld3MvbGF5b3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGtEQUFBO0VBQUE7Ozs7QUFBQSxTQUFBLEdBQVksT0FBQSxDQUFRLGFBQVI7O0FBQ1osV0FBQSxHQUFjLE9BQUEsQ0FBUSxlQUFSOztBQUNkLFNBQUEsR0FBWSxPQUFBLENBQVEsYUFBUjs7QUFJTjs7Ozs7Ozs7OzRCQUNKLFNBQUEsR0FBVzs7NEJBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSwrQkFBUjs7NEJBRVYsU0FBQSxHQUNFO0lBQUEsT0FBQSxFQUNFO01BQUEsT0FBQSxFQUNFO1FBQUEsT0FBQSxFQUFVLGlDQUFWO09BREY7S0FERjs7OzRCQUlGLEVBQUEsR0FDRTtJQUFBLFVBQUEsRUFBWSwwQkFBWjs7OzRCQUVGLE1BQUEsR0FDRTtJQUFBLHNCQUFBLEVBQXdCLFlBQXhCOzs7NEJBRUYsT0FBQSxHQUNFO0lBQUEsVUFBQSxFQUFjLG9CQUFkO0lBQ0EsWUFBQSxFQUFjLHNCQURkOzs7NEJBR0YsUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsUUFBQSxHQUFXLElBQUksU0FBSixDQUFjO01BQUUsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFmO0tBQWQ7SUFDWCxRQUFRLENBQUMsRUFBVCxDQUFZLG9CQUFaLEVBQWtDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxJQUFEO2VBQVUsS0FBQyxDQUFBLGVBQUQsQ0FBaUIsSUFBSSxDQUFDLEtBQXRCO01BQVY7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0lBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFFBQWpCO3NEQUNpQixDQUFFLE9BQW5CLENBQTJCLFVBQTNCO0VBSlE7OzRCQU1WLFVBQUEsR0FBWSxTQUFBO1dBQ1YsSUFBQyxDQUFBLFVBQVUsQ0FBQyxhQUFaLENBQUEsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFDL0IsS0FBQyxDQUFBLFlBQUQsQ0FBQTtlQUNBLEtBQUMsQ0FBQSxNQUFELENBQUE7TUFGK0I7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWpDO0VBRFU7OzRCQUtaLGVBQUEsR0FBaUIsU0FBQyxVQUFEO0FBR2YsUUFBQTtJQUFBLFdBQUEsR0FBYyxJQUFJLFdBQUosQ0FBZ0I7TUFBRSxLQUFBLEVBQU8sVUFBVDtLQUFoQjtJQUdkLFdBQVcsQ0FBQyxFQUFaLENBQWUsTUFBZixFQUF1QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUFVLEtBQUMsQ0FBQSxlQUFELENBQWlCLElBQUksQ0FBQyxLQUF0QjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF2QjtXQUdBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxDQUFtQixXQUFuQjtFQVRlOzs0QkFXakIsZUFBQSxHQUFpQixTQUFDLFVBQUQ7QUFHZixRQUFBO0lBQUEsU0FBQSxHQUFZLElBQUksU0FBSixDQUFjO01BQUUsS0FBQSxFQUFPLFVBQVQ7S0FBZDtJQUdaLFNBQVMsQ0FBQyxFQUFWLENBQWEsUUFBYixFQUF1QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUFVLEtBQUMsQ0FBQSxlQUFELENBQWlCLElBQUksQ0FBQyxLQUF0QjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF2QjtJQUdBLFNBQVMsQ0FBQyxFQUFWLENBQWEsTUFBYixFQUFxQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUFVLEtBQUMsQ0FBQSxlQUFELENBQWlCLElBQUksQ0FBQyxLQUF0QjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFyQjtXQUdBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxDQUFtQixTQUFuQjtFQVplOzs7O0dBekNXLEVBQUUsQ0FBQzs7QUF5RGpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./facetForm":39,"./facetList":40,"./facetViewer":41,"./templates/facet_list_layout":45}],43:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (label) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"row\"><div class=\"col-lg-2\"><i class=\"fa fa-fw fa-bars cursor-pointer sortable\"></i></div><div class=\"col-lg-10\">" + (jade.escape(null == (jade_interp = label) ? "" : jade_interp)) + "</div></div>");}.call(this,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined));;return buf.join("");
};
},{"jade/runtime":209}],44:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (enabled) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");
jade_mixins["formTextArea"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<textarea" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"rows": jade.escape(opts.rows),"cols": jade.escape(opts.cols),"class": "form-control"},attributes]), false)) + "></textarea>");
}
}, opts);
};
buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">Edit Facet</h4></div><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-6\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
buf.push("</div><div class=\"col-lg-6\">");
jade_mixins["formInput"]({ label: 'Enabled', formGroupCss: 'm-b-0', name: 'enabled', type: 'checkbox', value: enabled });
buf.push("</div><div class=\"col-lg-12\">");
jade_mixins["formTextArea"]({ label: 'Tooltip', placeholder: 'Tooltip', name: 'tooltip', type: 'text' });
buf.push("</div></div><div class=\"row\"><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div>");}.call(this,"enabled" in locals_for_with?locals_for_with.enabled:typeof enabled!=="undefined"?enabled:undefined));;return buf.join("");
};
},{"jade/runtime":209}],45:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><div class=\"row\"><div class=\"col-lg-6\"><p class=\"lead mb-0\">Facets</p></div><div class=\"col-lg-6 text-right\"><button data-click=\"link-facets\" class=\"btn btn-sm btn-outline-secondary\"><i class=\"fa fa-fw fa-link\"></i>&nbsp;\nLink Facets to Ontologies</button></div></div><div class=\"row\"><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div data-region=\"list\" class=\"col-lg-3\"></div><div data-region=\"viewer\" class=\"col-lg-9\"></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],46:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (attribute, enabled, label, tooltip) {
buf.push("<div class=\"row\"><div class=\"col-lg-6\"><h4 class=\"card-title\">" + (jade.escape(null == (jade_interp = label) ? "" : jade_interp)) + "</h4></div><div class=\"col-lg-6 text-right\"><button data-click=\"link\" class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-link\"></i>&nbsp;\nLink to Ontology</button><button data-click=\"edit\" class=\"btn btn-sm btn-outline-success\"><i class=\"fa fa-fw fa-pencil\"></i>&nbsp;\nEdit</button></div><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-12\"><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-search\"></i>&nbsp;\nMatches the<strong> " + (jade.escape((jade_interp = attribute) == null ? '' : jade_interp)) + "</strong> attribute.</div></div><div class=\"col-lg-12\">");
if ( tooltip)
{
buf.push("<div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-question-circle-o\"></i>&nbsp;" + (jade.escape(null == (jade_interp = tooltip) ? "" : jade_interp)) + "</div>");
}
else
{
buf.push("<div class=\"alert alert-warning\"><i class=\"fa fa-fw fa-warning\"></i>&nbsp;\nNo tooltip defined for this facet.</div>");
}
buf.push("</div><div class=\"col-lg-12\">");
if ( enabled)
{
buf.push("<div class=\"alert alert-success\"><i class=\"fa fa-fw fa-check-circle-o\"></i>&nbsp;\nFacet is enabled.</div>");
}
else
{
buf.push("<div class=\"alert alert-warning\"><i class=\"fa fa-fw fa-warning\"></i>&nbsp;\nFacet is not enabled.</div>");
}
buf.push("</div></div>");}.call(this,"attribute" in locals_for_with?locals_for_with.attribute:typeof attribute!=="undefined"?attribute:undefined,"enabled" in locals_for_with?locals_for_with.enabled:typeof enabled!=="undefined"?enabled:undefined,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined,"tooltip" in locals_for_with?locals_for_with.tooltip:typeof tooltip!=="undefined"?tooltip:undefined));;return buf.join("");
};
},{"jade/runtime":209}],47:[function(require,module,exports){
var DatasetConfigRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

DatasetConfigRoute = (function(superClass) {
  extend(DatasetConfigRoute, superClass);

  function DatasetConfigRoute() {
    return DatasetConfigRoute.__super__.constructor.apply(this, arguments);
  }

  DatasetConfigRoute.prototype.title = function() {
    return "Datasets - " + (this.model.get('label')) + " - Configuration";
  };

  DatasetConfigRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        href: "#datasets",
        text: 'Archives'
      }, {
        href: "#datasets/" + this.model.id,
        text: this.model.get('label')
      }, {
        href: "#datasets/" + this.model.id + "/search",
        text: 'Search'
      }, {
        text: 'Configuration'
      }
    ];
  };

  DatasetConfigRoute.prototype.fetch = function(id) {
    return Backbone.Radio.channel('dataset').request('model', id).then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  DatasetConfigRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return DatasetConfigRoute;

})(require('hn_routing/lib/route'));

module.exports = DatasetConfigRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL3JvdXRlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9yb3V0ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw4QkFBQTtFQUFBOzs7QUFBQSxVQUFBLEdBQWMsT0FBQSxDQUFRLGdCQUFSOztBQUlSOzs7Ozs7OytCQUdKLEtBQUEsR0FBTyxTQUFBO0FBQ0wsV0FBTyxhQUFBLEdBQWEsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBYixHQUFrQztFQURwQzs7K0JBR1AsV0FBQSxHQUFhLFNBQUE7QUFDWCxXQUFPO01BQ0w7UUFBRSxJQUFBLEVBQU0sTUFBUjtRQUFnQixJQUFBLEVBQU0sR0FBdEI7T0FESyxFQUVMO1FBQUUsSUFBQSxFQUFNLFdBQVI7UUFBcUIsSUFBQSxFQUFNLFVBQTNCO09BRkssRUFHTDtRQUFFLElBQUEsRUFBTSxZQUFBLEdBQWEsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUE1QjtRQUFrQyxJQUFBLEVBQU0sSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUF4QztPQUhLLEVBSUw7UUFBRSxJQUFBLEVBQU0sWUFBQSxHQUFhLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBcEIsR0FBdUIsU0FBL0I7UUFBeUMsSUFBQSxFQUFNLFFBQS9DO09BSkssRUFLTDtRQUFFLElBQUEsRUFBTSxlQUFSO09BTEs7O0VBREk7OytCQVNiLEtBQUEsR0FBTyxTQUFDLEVBQUQ7V0FDTCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxPQUExQyxFQUFtRCxFQUFuRCxDQUNBLENBQUMsSUFERCxDQUNNLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO2VBQVcsS0FBQyxDQUFBLEtBQUQsR0FBUztNQUFwQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FETjtFQURLOzsrQkFJUCxNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUFmLENBQWhCO0VBRE07Ozs7R0FuQnVCLE9BQUEsQ0FBUSxzQkFBUjs7QUF3QmpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/layout":51,"hn_routing/lib/route":207}],48:[function(require,module,exports){
var KnowledgeRuleForm, KnowledgeRuleLayout, RuleForm, RuleLayout,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

KnowledgeRuleLayout = require('../../knowledge_capture/views/layout');

KnowledgeRuleForm = require('../../knowledge_capture/views/ruleForm');

RuleForm = (function(superClass) {
  extend(RuleForm, superClass);

  function RuleForm() {
    return RuleForm.__super__.constructor.apply(this, arguments);
  }

  RuleForm.prototype.template = require('./templates/rule_form');

  RuleForm.prototype.onRender = function() {
    Backbone.Syphon.deserialize(this, this.model.attributes);
    return this.showDefinitionList();
  };

  return RuleForm;

})(KnowledgeRuleForm);

RuleLayout = (function(superClass) {
  extend(RuleLayout, superClass);

  function RuleLayout() {
    return RuleLayout.__super__.constructor.apply(this, arguments);
  }

  RuleLayout.prototype.template = require('./templates/layout');

  RuleLayout.prototype.className = 'row';

  RuleLayout.prototype.showRuleForm = function(model) {
    var formModel;
    if (model.currentTarget) {
      model = null;
    }
    formModel = model || this.buildNewRule();
    return this.fetchSourceOptions().then((function(_this) {
      return function(sourceOptions) {
        var formView;
        formView = new RuleForm({
          model: formModel,
          collection: formModel.get('definitions'),
          sourceOptions: sourceOptions
        });
        formView.on('cancel', function() {
          return _this.showRuleList();
        });
        formView.on('sync', function(model) {
          _this.collection.add(model);
          return _this.showRuleList();
        });
        return _this.contentRegion.show(formView);
      };
    })(this));
  };

  return RuleLayout;

})(KnowledgeRuleLayout);

module.exports = RuleLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL3ZpZXdlcl9ydWxlX3ZpZXdzL2xheW91dC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvdmlld2VyX3J1bGVfdmlld3MvbGF5b3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLDREQUFBO0VBQUE7OztBQUFBLG1CQUFBLEdBQXNCLE9BQUEsQ0FBUSxzQ0FBUjs7QUFDdEIsaUJBQUEsR0FBb0IsT0FBQSxDQUFRLHdDQUFSOztBQUlkOzs7Ozs7O3FCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsdUJBQVI7O3FCQUVWLFFBQUEsR0FBVSxTQUFBO0lBQ1IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxXQUFoQixDQUE2QixJQUE3QixFQUFnQyxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQXZDO1dBQ0EsSUFBQyxDQUFBLGtCQUFELENBQUE7RUFGUTs7OztHQUhXOztBQVNqQjs7Ozs7Ozt1QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzt1QkFDVixTQUFBLEdBQVc7O3VCQUtYLFlBQUEsR0FBYyxTQUFDLEtBQUQ7QUFHWixRQUFBO0lBQUEsSUFBZ0IsS0FBSyxDQUFDLGFBQXRCO01BQUEsS0FBQSxHQUFRLEtBQVI7O0lBR0EsU0FBQSxHQUFZLEtBQUEsSUFBUyxJQUFDLENBQUEsWUFBRCxDQUFBO1dBR3JCLElBQUMsQ0FBQSxrQkFBRCxDQUFBLENBQXFCLENBQUMsSUFBdEIsQ0FBMkIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLGFBQUQ7QUFHekIsWUFBQTtRQUFBLFFBQUEsR0FBVyxJQUFJLFFBQUosQ0FBYTtVQUFFLEtBQUEsRUFBTyxTQUFUO1VBQW9CLFVBQUEsRUFBWSxTQUFTLENBQUMsR0FBVixDQUFjLGFBQWQsQ0FBaEM7VUFBOEQsYUFBQSxFQUFlLGFBQTdFO1NBQWI7UUFHWCxRQUFRLENBQUMsRUFBVCxDQUFZLFFBQVosRUFBc0IsU0FBQTtpQkFBRyxLQUFDLENBQUEsWUFBRCxDQUFBO1FBQUgsQ0FBdEI7UUFHQSxRQUFRLENBQUMsRUFBVCxDQUFZLE1BQVosRUFBb0IsU0FBQyxLQUFEO1VBR2xCLEtBQUMsQ0FBQSxVQUFVLENBQUMsR0FBWixDQUFnQixLQUFoQjtpQkFHQSxLQUFDLENBQUEsWUFBRCxDQUFBO1FBTmtCLENBQXBCO2VBU0EsS0FBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLFFBQXBCO01BbEJ5QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBM0I7RUFUWTs7OztHQVBTOztBQXNDekIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../knowledge_capture/views/layout":75,"../../knowledge_capture/views/ruleForm":77,"./templates/layout":49,"./templates/rule_form":50}],49:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><div class=\"row\"><div class=\"col-lg-6\"><p class=\"lead mb-0\">Smart Rendering</p></div><div class=\"col-lg-6 text-right\"><button data-click=\"new\" class=\"btn btn-sm btn-outline-primary mr-2\"><i class=\"fa fa-fw fa-plus\"></i>&nbsp;\nNew Rule</button><button data-click=\"apply\" class=\"btn btn-sm btn-outline-success mr-2\"><i class=\"fa fa-fw fa-check-circle-o\"></i>&nbsp;\nApply Rules</button><button data-click=\"reset\" class=\"btn btn-sm btn-outline-danger\"><i class=\"fa fa-fw fa-refresh\"></i>&nbsp;\nReset</button></div></div><div class=\"row\"><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div data-region=\"content\" class=\"col-lg-12\"></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],50:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"col-lg-3\"><div class=\"row\"><div class=\"col-lg-12\">");
jade_mixins["formSelect"]({ label: 'Viewer Type', name: 'target_property', options: ['img', 'stl', 'dicom', 'pdf', 'csv', 'audio', 'video'] });
buf.push("</div></div><button data-click=\"add\" class=\"btn btn-outline-primary w-100 mb-2\"><i class=\"fa fa-fw fa-plus-circle\"></i>&nbsp;\nAdd Definition</button></div><div data-region=\"definitions\" class=\"col-lg-9\"></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined));;return buf.join("");
};
},{"jade/runtime":209}],51:[function(require,module,exports){
var ConfigLayoutView, FacetLayout, ViewerRuleLayout,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetLayout = require('../facet_views/layout');

ViewerRuleLayout = require('../viewer_rule_views/layout');

ConfigLayoutView = (function(superClass) {
  extend(ConfigLayoutView, superClass);

  function ConfigLayoutView() {
    return ConfigLayoutView.__super__.constructor.apply(this, arguments);
  }

  ConfigLayoutView.prototype.className = 'container-fluid';

  ConfigLayoutView.prototype.navItems = [
    {
      icon: 'fa-list',
      text: 'Facets',
      trigger: 'facets',
      "default": true
    }, {
      icon: 'fa-window-maximize',
      text: 'Smart Rendering',
      trigger: 'viewer'
    }
  ];

  ConfigLayoutView.prototype.navEvents = {
    'facets': 'facetConfig',
    'viewer': 'viewerConfig'
  };

  ConfigLayoutView.prototype.navOptions = {
    pills: true
  };

  ConfigLayoutView.prototype.facetConfig = function() {
    return this.model.fetchFacets().then((function(_this) {
      return function(facetCollection) {
        return _this.contentRegion.show(new FacetLayout({
          collection: facetCollection
        }));
      };
    })(this));
  };

  ConfigLayoutView.prototype.viewerConfig = function() {
    return this.model.fetchViewerRules().then((function(_this) {
      return function(viewerRuleCollection) {
        return _this.contentRegion.show(new ViewerRuleLayout({
          model: _this.model,
          collection: viewerRuleCollection
        }));
      };
    })(this));
  };

  return ConfigLayoutView;

})(require('lib/views/nav'));

module.exports = ConfigLayoutView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL3ZpZXdzL2xheW91dC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvdmlld3MvbGF5b3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLCtDQUFBO0VBQUE7OztBQUFBLFdBQUEsR0FBc0IsT0FBQSxDQUFRLHVCQUFSOztBQUN0QixnQkFBQSxHQUFzQixPQUFBLENBQVEsNkJBQVI7O0FBSWhCOzs7Ozs7OzZCQUNKLFNBQUEsR0FBVzs7NkJBRVgsUUFBQSxHQUFVO0lBQ1I7TUFBRSxJQUFBLEVBQU0sU0FBUjtNQUE4QixJQUFBLEVBQU0sUUFBcEM7TUFBMEQsT0FBQSxFQUFTLFFBQW5FO01BQTZFLENBQUEsT0FBQSxDQUFBLEVBQVMsSUFBdEY7S0FEUSxFQUVSO01BQUUsSUFBQSxFQUFNLG9CQUFSO01BQThCLElBQUEsRUFBTSxpQkFBcEM7TUFBMEQsT0FBQSxFQUFTLFFBQW5FO0tBRlE7Ozs2QkFLVixTQUFBLEdBQ0U7SUFBQSxRQUFBLEVBQWMsYUFBZDtJQUNBLFFBQUEsRUFBYyxjQURkOzs7NkJBR0YsVUFBQSxHQUNFO0lBQUEsS0FBQSxFQUFPLElBQVA7Ozs2QkFFRixXQUFBLEdBQWEsU0FBQTtXQUNYLElBQUMsQ0FBQSxLQUFLLENBQUMsV0FBUCxDQUFBLENBQW9CLENBQUMsSUFBckIsQ0FBMEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLGVBQUQ7ZUFDeEIsS0FBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLElBQUksV0FBSixDQUFnQjtVQUFFLFVBQUEsRUFBWSxlQUFkO1NBQWhCLENBQXBCO01BRHdCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUExQjtFQURXOzs2QkFJYixZQUFBLEdBQWMsU0FBQTtXQUNaLElBQUMsQ0FBQSxLQUFLLENBQUMsZ0JBQVAsQ0FBQSxDQUF5QixDQUFDLElBQTFCLENBQStCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxvQkFBRDtlQUM3QixLQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsSUFBSSxnQkFBSixDQUFxQjtVQUFFLEtBQUEsRUFBTyxLQUFDLENBQUEsS0FBVjtVQUFpQixVQUFBLEVBQVksb0JBQTdCO1NBQXJCLENBQXBCO01BRDZCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUEvQjtFQURZOzs7O0dBbkJlLE9BQUEsQ0FBUSxlQUFSOztBQXlCL0IsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../facet_views/layout":42,"../viewer_rule_views/layout":48,"lib/views/nav":287}],52:[function(require,module,exports){
var DatasetCreator, buildUniqueId,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

buildUniqueId = function(prefix) {
  if (prefix == null) {
    prefix = '';
  }
  return prefix + Math.random().toString(36).substr(2, 10);
};

window.buildUniqueId = buildUniqueId;

DatasetCreator = (function(superClass) {
  extend(DatasetCreator, superClass);

  function DatasetCreator() {
    return DatasetCreator.__super__.constructor.apply(this, arguments);
  }

  DatasetCreator.prototype.ensureFacets = function(dataset_id, datapoints) {
    var allKeys, el, i, index, len, saveFacet;
    allKeys = [];
    for (i = 0, len = datapoints.length; i < len; i++) {
      el = datapoints[i];
      allKeys = _.union(allKeys, _.keys(el));
    }
    index = 0;
    saveFacet = function(facet) {
      var attrs;
      attrs = {
        id: buildUniqueId('fc_'),
        dataset_id: dataset_id,
        attribute: facet,
        label: facet,
        order: index,
        enabled: facet === '@id' ? false : true,
        tooltip: ''
      };
      index = index + 1;
      return Backbone.Radio.channel('db').request('add', 'facets', attrs);
    };
    return Promise.each(allKeys, saveFacet);
  };

  DatasetCreator.prototype.ensureDatapoints = function(dataset_id, datapoints) {
    var count, index, saveDatapoint;
    index = 0;
    count = _s.numberFormat(datapoints.length);
    saveDatapoint = function(datapoint) {
      var attrs;
      index = index + 1;
      Backbone.Radio.channel('loading').trigger('show', "Processing " + (_s.numberFormat(index)) + " of " + count);
      attrs = {
        id: buildUniqueId('dp_'),
        dataset_id: dataset_id,
        raw: datapoint,
        data: JSON.parse(JSON.stringify(datapoint)),
        views: {}
      };
      return Backbone.Radio.channel('db').request('add', 'datapoints', attrs);
    };
    return Promise.each(datapoints, saveDatapoint);
  };

  DatasetCreator.prototype.ensureDataset = function(dataset) {
    return Backbone.Radio.channel('db').request('add', 'datasets', dataset.toJSON());
  };

  DatasetCreator.prototype.deploy = function(dataset, datapoints) {
    dataset.set('count', datapoints.length);
    dataset.set('id', buildUniqueId('ds_'));
    dataset.trigger('request');
    Radio.channel('loading').trigger('show', 'Saving Dataset...');
    return this.ensureDataset(dataset).then((function(_this) {
      return function(dataset_id) {
        Radio.channel('loading').trigger('show', 'Saving Datapoints...');
        return _this.ensureDatapoints(dataset_id, datapoints).then(function() {
          Radio.channel('loading').trigger('show', 'Generating Facets...');
          return _this.ensureFacets(dataset_id, datapoints).then(function() {
            Radio.channel('loading').trigger('show', 'Loading Facets...');
            return Radio.channel('facet').request('collection', dataset_id).then(function() {
              Radio.channel('loading').trigger('show', 'Linking Facets to Ontologies...');
              return Radio.channel('facet').request('link:all').then(function() {
                Radio.channel('loading').trigger('hide');
                return dataset.trigger('sync');
              })["catch"](function(err) {
                return dataset.trigger('error', err);
              });
            })["catch"](function(err) {
              return dataset.trigger('error', err);
            });
          })["catch"](function(err) {
            return dataset.trigger('error', err);
          });
        })["catch"](function(err) {
          return dataset.trigger('error', err);
        });
      };
    })(this))["catch"]((function(_this) {
      return function(err) {
        return dataset.trigger('error', err);
      };
    })(this));
  };

  return DatasetCreator;

})(Backbone.Model);

module.exports = new DatasetCreator();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY3JlYXRvci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jcmVhdG9yLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxJQUFBLDZCQUFBO0VBQUE7OztBQUFBLGFBQUEsR0FBZ0IsU0FBQyxNQUFEOztJQUFDLFNBQU87O0FBQ3RCLFNBQU8sTUFBQSxHQUFTLElBQUksQ0FBQyxNQUFMLENBQUEsQ0FBYSxDQUFDLFFBQWQsQ0FBdUIsRUFBdkIsQ0FBMEIsQ0FBQyxNQUEzQixDQUFrQyxDQUFsQyxFQUFxQyxFQUFyQztBQURGOztBQUloQixNQUFNLENBQUMsYUFBUCxHQUF1Qjs7QUFJakI7Ozs7Ozs7MkJBTUosWUFBQSxHQUFjLFNBQUMsVUFBRCxFQUFhLFVBQWI7QUFJWixRQUFBO0lBQUEsT0FBQSxHQUFVO0FBQ1YsU0FBQSw0Q0FBQTs7TUFDRSxPQUFBLEdBQVUsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxPQUFSLEVBQWlCLENBQUMsQ0FBQyxJQUFGLENBQU8sRUFBUCxDQUFqQjtBQURaO0lBSUEsS0FBQSxHQUFRO0lBSVIsU0FBQSxHQUFZLFNBQUMsS0FBRDtBQUdWLFVBQUE7TUFBQSxLQUFBLEdBQ0U7UUFBQSxFQUFBLEVBQVksYUFBQSxDQUFjLEtBQWQsQ0FBWjtRQUNBLFVBQUEsRUFBWSxVQURaO1FBRUEsU0FBQSxFQUFZLEtBRlo7UUFHQSxLQUFBLEVBQVksS0FIWjtRQUlBLEtBQUEsRUFBWSxLQUpaO1FBS0EsT0FBQSxFQUFlLEtBQUEsS0FBVSxLQUFiLEdBQXlCLEtBQXpCLEdBQW9DLElBTGhEO1FBTUEsT0FBQSxFQUFZLEVBTlo7O01BU0YsS0FBQSxHQUFRLEtBQUEsR0FBUTtBQUdoQixhQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixJQUF2QixDQUE0QixDQUFDLE9BQTdCLENBQXFDLEtBQXJDLEVBQTRDLFFBQTVDLEVBQXNELEtBQXREO0lBaEJHO0FBbUJaLFdBQU8sT0FBTyxDQUFDLElBQVIsQ0FBYSxPQUFiLEVBQXNCLFNBQXRCO0VBaENLOzsyQkFxQ2QsZ0JBQUEsR0FBa0IsU0FBQyxVQUFELEVBQWEsVUFBYjtBQUdoQixRQUFBO0lBQUEsS0FBQSxHQUFRO0lBQ1IsS0FBQSxHQUFRLEVBQUUsQ0FBQyxZQUFILENBQWdCLFVBQVUsQ0FBQyxNQUEzQjtJQUlSLGFBQUEsR0FBZ0IsU0FBQyxTQUFEO0FBR2QsVUFBQTtNQUFBLEtBQUEsR0FBUSxLQUFBLEdBQVE7TUFDaEIsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUMsRUFBa0QsYUFBQSxHQUFhLENBQUMsRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsS0FBaEIsQ0FBRCxDQUFiLEdBQXFDLE1BQXJDLEdBQTJDLEtBQTdGO01BR0EsS0FBQSxHQUNFO1FBQUEsRUFBQSxFQUFZLGFBQUEsQ0FBYyxLQUFkLENBQVo7UUFDQSxVQUFBLEVBQVksVUFEWjtRQUVBLEdBQUEsRUFBWSxTQUZaO1FBR0EsSUFBQSxFQUFZLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLFNBQUwsQ0FBZSxTQUFmLENBQVgsQ0FIWjtRQUlBLEtBQUEsRUFBWSxFQUpaOztBQU9GLGFBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLElBQXZCLENBQTRCLENBQUMsT0FBN0IsQ0FBcUMsS0FBckMsRUFBNEMsWUFBNUMsRUFBMEQsS0FBMUQ7SUFmTztBQWtCaEIsV0FBTyxPQUFPLENBQUMsSUFBUixDQUFhLFVBQWIsRUFBeUIsYUFBekI7RUExQlM7OzJCQThCbEIsYUFBQSxHQUFlLFNBQUMsT0FBRDtBQUNiLFdBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLElBQXZCLENBQTRCLENBQUMsT0FBN0IsQ0FBcUMsS0FBckMsRUFBNEMsVUFBNUMsRUFBd0QsT0FBTyxDQUFDLE1BQVIsQ0FBQSxDQUF4RDtFQURNOzsyQkFLZixNQUFBLEdBQVEsU0FBQyxPQUFELEVBQVUsVUFBVjtJQUlOLE9BQU8sQ0FBQyxHQUFSLENBQVksT0FBWixFQUFxQixVQUFVLENBQUMsTUFBaEM7SUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQVosRUFBa0IsYUFBQSxDQUFjLEtBQWQsQ0FBbEI7SUFJQSxPQUFPLENBQUMsT0FBUixDQUFnQixTQUFoQjtJQUdBLEtBQUssQ0FBQyxPQUFOLENBQWMsU0FBZCxDQUF3QixDQUFDLE9BQXpCLENBQWlDLE1BQWpDLEVBQXlDLG1CQUF6QztXQUdBLElBQUMsQ0FBQSxhQUFELENBQWUsT0FBZixDQUF1QixDQUFDLElBQXhCLENBQTZCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxVQUFEO1FBRzNCLEtBQUssQ0FBQyxPQUFOLENBQWMsU0FBZCxDQUF3QixDQUFDLE9BQXpCLENBQWlDLE1BQWpDLEVBQXlDLHNCQUF6QztlQUlBLEtBQUMsQ0FBQSxnQkFBRCxDQUFrQixVQUFsQixFQUE4QixVQUE5QixDQUF5QyxDQUFDLElBQTFDLENBQStDLFNBQUE7VUFHN0MsS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkLENBQXdCLENBQUMsT0FBekIsQ0FBaUMsTUFBakMsRUFBeUMsc0JBQXpDO2lCQUlBLEtBQUMsQ0FBQSxZQUFELENBQWMsVUFBZCxFQUEwQixVQUExQixDQUFxQyxDQUFDLElBQXRDLENBQTJDLFNBQUE7WUFHekMsS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkLENBQXdCLENBQUMsT0FBekIsQ0FBaUMsTUFBakMsRUFBeUMsbUJBQXpDO21CQUdBLEtBQUssQ0FBQyxPQUFOLENBQWMsT0FBZCxDQUFzQixDQUFDLE9BQXZCLENBQStCLFlBQS9CLEVBQTZDLFVBQTdDLENBQXdELENBQUMsSUFBekQsQ0FBOEQsU0FBQTtjQUc1RCxLQUFLLENBQUMsT0FBTixDQUFjLFNBQWQsQ0FBd0IsQ0FBQyxPQUF6QixDQUFpQyxNQUFqQyxFQUF5QyxpQ0FBekM7cUJBR0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxPQUFkLENBQXNCLENBQUMsT0FBdkIsQ0FBK0IsVUFBL0IsQ0FBMEMsQ0FBQyxJQUEzQyxDQUFnRCxTQUFBO2dCQUc5QyxLQUFLLENBQUMsT0FBTixDQUFjLFNBQWQsQ0FBd0IsQ0FBQyxPQUF6QixDQUFpQyxNQUFqQzt1QkFJQSxPQUFPLENBQUMsT0FBUixDQUFnQixNQUFoQjtjQVA4QyxDQUFoRCxDQVVBLEVBQUMsS0FBRCxFQVZBLENBVU8sU0FBQyxHQUFEO3VCQUFTLE9BQU8sQ0FBQyxPQUFSLENBQWdCLE9BQWhCLEVBQXlCLEdBQXpCO2NBQVQsQ0FWUDtZQU40RCxDQUE5RCxDQWlCQSxFQUFDLEtBQUQsRUFqQkEsQ0FpQk8sU0FBQyxHQUFEO3FCQUFTLE9BQU8sQ0FBQyxPQUFSLENBQWdCLE9BQWhCLEVBQXlCLEdBQXpCO1lBQVQsQ0FqQlA7VUFOeUMsQ0FBM0MsQ0F3QkEsRUFBQyxLQUFELEVBeEJBLENBd0JPLFNBQUMsR0FBRDttQkFBUyxPQUFPLENBQUMsT0FBUixDQUFnQixPQUFoQixFQUF5QixHQUF6QjtVQUFULENBeEJQO1FBUDZDLENBQS9DLENBZ0NBLEVBQUMsS0FBRCxFQWhDQSxDQWdDTyxTQUFDLEdBQUQ7aUJBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7UUFBVCxDQWhDUDtNQVAyQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBN0IsQ0F3Q0EsRUFBQyxLQUFELEVBeENBLENBd0NPLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxHQUFEO2VBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7TUFBVDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0F4Q1A7RUFmTTs7OztHQTlFbUIsUUFBUSxDQUFDOztBQXlJdEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxjQUFKLENBQUEifQ==

},{}],53:[function(require,module,exports){
var DatasetDestructor, DestroyDatasetRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

DatasetDestructor = require('../destructor');

DestroyDatasetRoute = (function(superClass) {
  extend(DestroyDatasetRoute, superClass);

  function DestroyDatasetRoute() {
    return DestroyDatasetRoute.__super__.constructor.apply(this, arguments);
  }

  DestroyDatasetRoute.prototype.title = function() {
    return "Magellan - " + (this.model.get('label')) + " - Destroy";
  };

  DestroyDatasetRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        text: 'Archives',
        href: '#datasets'
      }, {
        href: "#datasets/" + this.model.id,
        text: this.model.get('label')
      }, {
        text: 'Destroy'
      }
    ];
  };

  DestroyDatasetRoute.prototype.fetch = function(id) {
    return Backbone.Radio.channel('dataset').request('model', id).then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  DestroyDatasetRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model,
      destructor: DatasetDestructor
    }));
  };

  return DestroyDatasetRoute;

})(require('hn_routing/lib/route'));

module.exports = DestroyDatasetRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJveS9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9kZXN0cm95L3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGtEQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYSxPQUFBLENBQVEsZ0JBQVI7O0FBQ2IsaUJBQUEsR0FBb0IsT0FBQSxDQUFRLGVBQVI7O0FBSWQ7Ozs7Ozs7Z0NBRUosS0FBQSxHQUFPLFNBQUE7QUFDTCxXQUFPLGFBQUEsR0FBYSxDQUFDLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBRCxDQUFiLEdBQWtDO0VBRHBDOztnQ0FHUCxXQUFBLEdBQWEsU0FBQTtBQUNYLFdBQU87TUFDTDtRQUFFLElBQUEsRUFBTSxNQUFSO1FBQWdCLElBQUEsRUFBTSxHQUF0QjtPQURLLEVBRUw7UUFBRSxJQUFBLEVBQU0sVUFBUjtRQUFvQixJQUFBLEVBQU0sV0FBMUI7T0FGSyxFQUdMO1FBQUUsSUFBQSxFQUFNLFlBQUEsR0FBYSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQTVCO1FBQWtDLElBQUEsRUFBTSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQXhDO09BSEssRUFJTDtRQUFFLElBQUEsRUFBTSxTQUFSO09BSks7O0VBREk7O2dDQVFiLEtBQUEsR0FBTyxTQUFDLEVBQUQ7V0FDTCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxPQUExQyxFQUFtRCxFQUFuRCxDQUNBLENBQUMsSUFERCxDQUNNLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO2VBQVcsS0FBQyxDQUFBLEtBQUQsR0FBUztNQUFwQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FETjtFQURLOztnQ0FJUCxNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixVQUFBLEVBQVksaUJBQTdCO0tBQWYsQ0FBaEI7RUFETTs7OztHQWpCd0IsT0FBQSxDQUFRLHNCQUFSOztBQXNCbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../destructor":56,"./views/layout":54,"hn_routing/lib/route":207}],54:[function(require,module,exports){
var DestroyDatasetLayout, UploadWidget,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

DestroyDatasetLayout = (function(superClass) {
  extend(DestroyDatasetLayout, superClass);

  function DestroyDatasetLayout() {
    return DestroyDatasetLayout.__super__.constructor.apply(this, arguments);
  }

  DestroyDatasetLayout.prototype.template = require('./templates/layout');

  DestroyDatasetLayout.prototype.className = 'container';

  DestroyDatasetLayout.prototype.behaviors = {
    ModelEvents: {},
    Confirmations: {
      message: 'Are you sure you want to destroy this dataset?',
      confirmIcon: 'fa-trash',
      confirmText: 'DESTROY',
      confirmCss: 'btn-danger'
    },
    Flashes: {
      success: {
        message: 'Successfully reset dataset.'
      }
    }
  };

  DestroyDatasetLayout.prototype.ui = {
    confirmationTrigger: '[data-click=confirm]'
  };

  DestroyDatasetLayout.prototype.onConfirmed = function() {
    return this.options.destructor.deploy(this.model);
  };

  DestroyDatasetLayout.prototype.onRequest = function() {
    return this.ui.confirmationTrigger.addClass('disabled');
  };

  DestroyDatasetLayout.prototype.onSync = function() {
    return Radio.channel('app').trigger('redirect', '#datasets');
  };

  DestroyDatasetLayout.prototype.onError = function(err) {
    console.log('ERROR');
    return console.log(err);
  };

  return DestroyDatasetLayout;

})(Mn.LayoutView);

module.exports = DestroyDatasetLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJveS92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJveS92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsa0NBQUE7RUFBQTs7O0FBQUEsWUFBQSxHQUFlLE9BQUEsQ0FBUSxtQ0FBUjs7QUFJVDs7Ozs7OztpQ0FDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOztpQ0FDVixTQUFBLEdBQVc7O2lDQUVYLFNBQUEsR0FDRTtJQUFBLFdBQUEsRUFBYSxFQUFiO0lBRUEsYUFBQSxFQUNFO01BQUEsT0FBQSxFQUFjLGdEQUFkO01BQ0EsV0FBQSxFQUFjLFVBRGQ7TUFFQSxXQUFBLEVBQWMsU0FGZDtNQUdBLFVBQUEsRUFBYyxZQUhkO0tBSEY7SUFRQSxPQUFBLEVBQ0U7TUFBQSxPQUFBLEVBQ0U7UUFBQSxPQUFBLEVBQVUsNkJBQVY7T0FERjtLQVRGOzs7aUNBWUYsRUFBQSxHQUNFO0lBQUEsbUJBQUEsRUFBc0Isc0JBQXRCOzs7aUNBS0YsV0FBQSxHQUFhLFNBQUE7V0FDWCxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFwQixDQUEyQixJQUFDLENBQUEsS0FBNUI7RUFEVzs7aUNBSWIsU0FBQSxHQUFXLFNBQUE7V0FDVCxJQUFDLENBQUEsRUFBRSxDQUFDLG1CQUFtQixDQUFDLFFBQXhCLENBQWlDLFVBQWpDO0VBRFM7O2lDQUlYLE1BQUEsR0FBUSxTQUFBO1dBQ04sS0FBSyxDQUFDLE9BQU4sQ0FBYyxLQUFkLENBQW9CLENBQUMsT0FBckIsQ0FBNkIsVUFBN0IsRUFBeUMsV0FBekM7RUFETTs7aUNBS1IsT0FBQSxHQUFTLFNBQUMsR0FBRDtJQUNQLE9BQU8sQ0FBQyxHQUFSLENBQVksT0FBWjtXQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksR0FBWjtFQUZPOzs7O0dBcEN3QixFQUFFLENBQUM7O0FBMEN0QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"../../../base/views/upload/upload":36,"./templates/layout":55}],55:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">Destroy Dataset</h4></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\"><div class=\"alert alert-danger mb-0\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;<strong>Destroy</strong><br/>Destroys the dataset and it's associated data. This action is permanent.</div></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\"><button data-click=\"confirm\" class=\"btn btn-danger mr-2\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;\nDestroy</button></div></div></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],56:[function(require,module,exports){
var DatasetDestructor,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DatasetDestructor = (function(superClass) {
  extend(DatasetDestructor, superClass);

  function DatasetDestructor() {
    return DatasetDestructor.__super__.constructor.apply(this, arguments);
  }

  DatasetDestructor.prototype.destroyFacets = function(facets) {
    return this.destroyCollection(facets, 'facet');
  };

  DatasetDestructor.prototype.destroyDatapoints = function(datapoints) {
    return this.destroyCollection(datapoints, 'datapoint');
  };

  DatasetDestructor.prototype.destroyKnowledgeRules = function(knowledgeRules) {
    return this.destroyCollection(knowledgeRules, 'knowledge:rule');
  };

  DatasetDestructor.prototype.destroyViewerRules = function(viewerRules) {
    return this.destroyCollection(viewerRules, 'viewer:rule');
  };

  DatasetDestructor.prototype.destroyCollection = function(collection, radioChannel) {
    var destroyModel;
    destroyModel = function(model) {
      return Backbone.Radio.channel(radioChannel).request('destroy', model);
    };
    return Promise.each(collection.models, destroyModel);
  };

  DatasetDestructor.prototype.destroyDataset = function(dataset) {
    return Backbone.Radio.channel('dataset').request('destroy', dataset);
  };

  DatasetDestructor.prototype.deploy = function(dataset) {
    console.log('DESTROY DATASET');
    dataset.trigger('request');
    Radio.channel('loading').trigger('show', 'Destroying Dataset...');
    return dataset.fetchViewerRules().then((function(_this) {
      return function(viewerRules) {
        Radio.channel('loading').trigger('show', 'Destoying Smart Rendering...');
        return _this.destroyViewerRules(viewerRules).then(function() {
          return dataset.fetchKnowledgeRules().then(function(knowledgeRules) {
            Radio.channel('loading').trigger('show', 'Destoying Knowledge Capture...');
            return _this.destroyKnowledgeRules(knowledgeRules).then(function() {
              return dataset.fetchFacets().then(function(facets) {
                Radio.channel('loading').trigger('show', 'Destoying Facets...');
                return _this.destroyFacets(facets).then(function() {
                  return dataset.fetchDatapoints().then(function(datapoints) {
                    Radio.channel('loading').trigger('show', 'Destoying Knowledge Graph...');
                    return _this.destroyDatapoints(datapoints).then(function() {
                      Radio.channel('loading').trigger('show', 'Destoying Archive...');
                      return _this.destroyDataset(dataset).then(function() {
                        Radio.channel('loading').trigger('hide');
                        return dataset.trigger('sync');
                      })["catch"](function(err) {
                        return dataset.trigger('error', err);
                      });
                    })["catch"](function(err) {
                      return dataset.trigger('error', err);
                    });
                  })["catch"](function(err) {
                    return dataset.trigger('error', err);
                  });
                })["catch"](function(err) {
                  return dataset.trigger('error', err);
                });
              })["catch"](function(err) {
                return dataset.trigger('error', err);
              });
            })["catch"](function(err) {
              return dataset.trigger('error', err);
            });
          })["catch"](function(err) {
            return dataset.trigger('error', err);
          });
        })["catch"](function(err) {
          return dataset.trigger('error', err);
        });
      };
    })(this))["catch"]((function(_this) {
      return function(err) {
        return dataset.trigger('error', err);
      };
    })(this));
  };

  return DatasetDestructor;

})(Backbone.Model);

module.exports = new DatasetDestructor();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJ1Y3Rvci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9kZXN0cnVjdG9yLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxJQUFBLGlCQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzhCQUlKLGFBQUEsR0FBZSxTQUFDLE1BQUQ7QUFBWSxXQUFPLElBQUMsQ0FBQSxpQkFBRCxDQUFtQixNQUFuQixFQUEyQixPQUEzQjtFQUFuQjs7OEJBSWYsaUJBQUEsR0FBbUIsU0FBQyxVQUFEO0FBQWdCLFdBQU8sSUFBQyxDQUFBLGlCQUFELENBQW1CLFVBQW5CLEVBQStCLFdBQS9CO0VBQXZCOzs4QkFJbkIscUJBQUEsR0FBdUIsU0FBQyxjQUFEO0FBQW9CLFdBQU8sSUFBQyxDQUFBLGlCQUFELENBQW1CLGNBQW5CLEVBQW1DLGdCQUFuQztFQUEzQjs7OEJBSXZCLGtCQUFBLEdBQW9CLFNBQUMsV0FBRDtBQUFpQixXQUFPLElBQUMsQ0FBQSxpQkFBRCxDQUFtQixXQUFuQixFQUFnQyxhQUFoQztFQUF4Qjs7OEJBSXBCLGlCQUFBLEdBQW1CLFNBQUMsVUFBRCxFQUFhLFlBQWI7QUFJakIsUUFBQTtJQUFBLFlBQUEsR0FBZSxTQUFDLEtBQUQ7QUFBVyxhQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixZQUF2QixDQUFvQyxDQUFDLE9BQXJDLENBQTZDLFNBQTdDLEVBQXdELEtBQXhEO0lBQWxCO0FBR2YsV0FBTyxPQUFPLENBQUMsSUFBUixDQUFhLFVBQVUsQ0FBQyxNQUF4QixFQUFnQyxZQUFoQztFQVBVOzs4QkFXbkIsY0FBQSxHQUFnQixTQUFDLE9BQUQ7QUFDZCxXQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLFNBQTFDLEVBQXFELE9BQXJEO0VBRE87OzhCQUtoQixNQUFBLEdBQVEsU0FBQyxPQUFEO0lBRU4sT0FBTyxDQUFDLEdBQVIsQ0FBWSxpQkFBWjtJQUlBLE9BQU8sQ0FBQyxPQUFSLENBQWdCLFNBQWhCO0lBR0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkLENBQXdCLENBQUMsT0FBekIsQ0FBaUMsTUFBakMsRUFBeUMsdUJBQXpDO1dBR0EsT0FBTyxDQUFDLGdCQUFSLENBQUEsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsV0FBRDtRQUdKLEtBQUssQ0FBQyxPQUFOLENBQWMsU0FBZCxDQUF3QixDQUFDLE9BQXpCLENBQWlDLE1BQWpDLEVBQXlDLDhCQUF6QztlQUdBLEtBQUMsQ0FBQSxrQkFBRCxDQUFvQixXQUFwQixDQUNBLENBQUMsSUFERCxDQUNNLFNBQUE7aUJBR0osT0FBTyxDQUFDLG1CQUFSLENBQUEsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFDLGNBQUQ7WUFHSixLQUFLLENBQUMsT0FBTixDQUFjLFNBQWQsQ0FBd0IsQ0FBQyxPQUF6QixDQUFpQyxNQUFqQyxFQUF5QyxnQ0FBekM7bUJBR0EsS0FBQyxDQUFBLHFCQUFELENBQXVCLGNBQXZCLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQTtxQkFHSixPQUFPLENBQUMsV0FBUixDQUFBLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQyxNQUFEO2dCQUdKLEtBQUssQ0FBQyxPQUFOLENBQWMsU0FBZCxDQUF3QixDQUFDLE9BQXpCLENBQWlDLE1BQWpDLEVBQXlDLHFCQUF6Qzt1QkFHQSxLQUFDLENBQUEsYUFBRCxDQUFlLE1BQWYsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFBO3lCQUdKLE9BQU8sQ0FBQyxlQUFSLENBQUEsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFDLFVBQUQ7b0JBR0osS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkLENBQXdCLENBQUMsT0FBekIsQ0FBaUMsTUFBakMsRUFBeUMsOEJBQXpDOzJCQUdBLEtBQUMsQ0FBQSxpQkFBRCxDQUFtQixVQUFuQixDQUNBLENBQUMsSUFERCxDQUNNLFNBQUE7c0JBR0osS0FBSyxDQUFDLE9BQU4sQ0FBYyxTQUFkLENBQXdCLENBQUMsT0FBekIsQ0FBaUMsTUFBakMsRUFBeUMsc0JBQXpDOzZCQUdBLEtBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQTt3QkFHSixLQUFLLENBQUMsT0FBTixDQUFjLFNBQWQsQ0FBd0IsQ0FBQyxPQUF6QixDQUFpQyxNQUFqQzsrQkFHQSxPQUFPLENBQUMsT0FBUixDQUFnQixNQUFoQjtzQkFOSSxDQUROLENBVUEsRUFBQyxLQUFELEVBVkEsQ0FVTyxTQUFDLEdBQUQ7K0JBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7c0JBQVQsQ0FWUDtvQkFOSSxDQUROLENBa0JBLEVBQUMsS0FBRCxFQWxCQSxDQWtCTyxTQUFDLEdBQUQ7NkJBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7b0JBQVQsQ0FsQlA7a0JBTkksQ0FETixDQTBCQSxFQUFDLEtBQUQsRUExQkEsQ0EwQk8sU0FBQyxHQUFEOzJCQUFTLE9BQU8sQ0FBQyxPQUFSLENBQWdCLE9BQWhCLEVBQXlCLEdBQXpCO2tCQUFULENBMUJQO2dCQUhJLENBRE4sQ0ErQkEsRUFBQyxLQUFELEVBL0JBLENBK0JPLFNBQUMsR0FBRDt5QkFBUyxPQUFPLENBQUMsT0FBUixDQUFnQixPQUFoQixFQUF5QixHQUF6QjtnQkFBVCxDQS9CUDtjQU5JLENBRE4sQ0F1Q0EsRUFBQyxLQUFELEVBdkNBLENBdUNPLFNBQUMsR0FBRDt1QkFBUyxPQUFPLENBQUMsT0FBUixDQUFnQixPQUFoQixFQUF5QixHQUF6QjtjQUFULENBdkNQO1lBSEksQ0FETixDQTRDQSxFQUFDLEtBQUQsRUE1Q0EsQ0E0Q08sU0FBQyxHQUFEO3FCQUFTLE9BQU8sQ0FBQyxPQUFSLENBQWdCLE9BQWhCLEVBQXlCLEdBQXpCO1lBQVQsQ0E1Q1A7VUFOSSxDQUROLENBb0RBLEVBQUMsS0FBRCxFQXBEQSxDQW9ETyxTQUFDLEdBQUQ7bUJBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7VUFBVCxDQXBEUDtRQUhJLENBRE4sQ0F5REEsRUFBQyxLQUFELEVBekRBLENBeURPLFNBQUMsR0FBRDtpQkFBUyxPQUFPLENBQUMsT0FBUixDQUFnQixPQUFoQixFQUF5QixHQUF6QjtRQUFULENBekRQO01BTkk7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE4sQ0FpRUEsRUFBQyxLQUFELEVBakVBLENBaUVPLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxHQUFEO2VBQVMsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekI7TUFBVDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FqRVA7RUFaTTs7OztHQXBDc0IsUUFBUSxDQUFDOztBQXFIekMsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxpQkFBSixDQUFBIn0=

},{}],57:[function(require,module,exports){
var EditDatasetRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

EditDatasetRoute = (function(superClass) {
  extend(EditDatasetRoute, superClass);

  function EditDatasetRoute() {
    return EditDatasetRoute.__super__.constructor.apply(this, arguments);
  }

  EditDatasetRoute.prototype.title = function() {
    return "Magellan - " + (this.model.get('label')) + " - Edit";
  };

  EditDatasetRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        text: 'Archives',
        href: '#datasets'
      }, {
        href: "#datasets/" + this.model.id,
        text: this.model.get('label')
      }, {
        text: 'Edit'
      }
    ];
  };

  EditDatasetRoute.prototype.fetch = function(id) {
    return Backbone.Radio.channel('dataset').request('model', id).then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  EditDatasetRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return EditDatasetRoute;

})(require('hn_routing/lib/route'));

module.exports = EditDatasetRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZWRpdC9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9lZGl0L3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLDRCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYSxPQUFBLENBQVEsZ0JBQVI7O0FBSVA7Ozs7Ozs7NkJBRUosS0FBQSxHQUFPLFNBQUE7QUFDTCxXQUFPLGFBQUEsR0FBYSxDQUFDLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBRCxDQUFiLEdBQWtDO0VBRHBDOzs2QkFHUCxXQUFBLEdBQWEsU0FBQTtBQUNYLFdBQU87TUFDTDtRQUFFLElBQUEsRUFBTSxNQUFSO1FBQWdCLElBQUEsRUFBTSxHQUF0QjtPQURLLEVBRUw7UUFBRSxJQUFBLEVBQU0sVUFBUjtRQUFvQixJQUFBLEVBQU0sV0FBMUI7T0FGSyxFQUdMO1FBQUUsSUFBQSxFQUFNLFlBQUEsR0FBYSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQTVCO1FBQWtDLElBQUEsRUFBTSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQXhDO09BSEssRUFJTDtRQUFFLElBQUEsRUFBTSxNQUFSO09BSks7O0VBREk7OzZCQVFiLEtBQUEsR0FBTyxTQUFDLEVBQUQ7V0FDTCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxPQUExQyxFQUFtRCxFQUFuRCxDQUNBLENBQUMsSUFERCxDQUNNLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO2VBQVcsS0FBQyxDQUFBLEtBQUQsR0FBUztNQUFwQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FETjtFQURLOzs2QkFJUCxNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUFmLENBQWhCO0VBRE07Ozs7R0FqQnFCLE9BQUEsQ0FBUSxzQkFBUjs7QUFzQi9CLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/layout":58,"hn_routing/lib/route":207}],58:[function(require,module,exports){
var EditDatasetLayout,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

EditDatasetLayout = (function(superClass) {
  extend(EditDatasetLayout, superClass);

  function EditDatasetLayout() {
    return EditDatasetLayout.__super__.constructor.apply(this, arguments);
  }

  EditDatasetLayout.prototype.template = require('./templates/layout');

  EditDatasetLayout.prototype.className = 'container';

  EditDatasetLayout.prototype.behaviors = {
    ModelEvents: {},
    SubmitButton: {}
  };

  EditDatasetLayout.prototype.onRender = function() {
    return Backbone.Syphon.deserialize(this, this.model.attributes);
  };

  EditDatasetLayout.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    this.model.set(data);
    return this.model.save();
  };

  EditDatasetLayout.prototype.onRequest = function() {
    return console.log('ON REQUEST');
  };

  EditDatasetLayout.prototype.onSync = function() {
    return Radio.channel('app').trigger('redirect', '#datasets');
  };

  EditDatasetLayout.prototype.onError = function(err) {
    console.log('ERROR');
    return console.log(err);
  };

  return EditDatasetLayout;

})(Mn.LayoutView);

module.exports = EditDatasetLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZWRpdC92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZWRpdC92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsaUJBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7OEJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7OEJBQ1YsU0FBQSxHQUFXOzs4QkFFWCxTQUFBLEdBQ0U7SUFBQSxXQUFBLEVBQWEsRUFBYjtJQUNBLFlBQUEsRUFBYyxFQURkOzs7OEJBR0YsUUFBQSxHQUFVLFNBQUE7V0FDUixRQUFRLENBQUMsTUFBTSxDQUFDLFdBQWhCLENBQTZCLElBQTdCLEVBQWdDLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBdkM7RUFEUTs7OEJBSVYsUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsSUFBQSxHQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsU0FBaEIsQ0FBMEIsSUFBMUI7SUFHUCxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFYO1dBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFQLENBQUE7RUFMUTs7OEJBUVYsU0FBQSxHQUFXLFNBQUE7V0FDVCxPQUFPLENBQUMsR0FBUixDQUFZLFlBQVo7RUFEUzs7OEJBR1gsTUFBQSxHQUFRLFNBQUE7V0FDTixLQUFLLENBQUMsT0FBTixDQUFjLEtBQWQsQ0FBb0IsQ0FBQyxPQUFyQixDQUE2QixVQUE3QixFQUF5QyxXQUF6QztFQURNOzs4QkFJUixPQUFBLEdBQVMsU0FBQyxHQUFEO0lBQ1AsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO1dBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxHQUFaO0VBRk87Ozs7R0EzQnFCLEVBQUUsQ0FBQzs7QUFpQ25DLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/layout":59}],59:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");














buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">Edit Dataset</h4></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
buf.push("</div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\">");
jade_mixins["submitButton"]({});
buf.push("</div></div></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],60:[function(require,module,exports){
var DatasetCollection, DatasetModel,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

DatasetModel = (function(superClass) {
  extend(DatasetModel, superClass);

  function DatasetModel() {
    this.destroySuperfluousFacets = bind(this.destroySuperfluousFacets, this);
    return DatasetModel.__super__.constructor.apply(this, arguments);
  }

  DatasetModel.prototype.urlRoot = 'datasets';

  DatasetModel.prototype.defaults = {
    id: '',
    label: '',
    context: {}
  };

  DatasetModel.prototype.save = function() {
    return Backbone.Radio.channel('dataset').request('save', this);
  };

  DatasetModel.prototype.fetchFacets = function() {
    return Backbone.Radio.channel('facet').request('collection', this.id);
  };

  DatasetModel.prototype.fetchDatapoints = function() {
    return Backbone.Radio.channel('datapoint').request('collection', this.id);
  };

  DatasetModel.prototype.fetchKnowledgeRules = function() {
    return Backbone.Radio.channel('knowledge:rule').request('collection', this.id);
  };

  DatasetModel.prototype.fetchViewerRules = function() {
    return Backbone.Radio.channel('viewer:rule').request('collection', this.id);
  };

  DatasetModel.prototype.generateNewFacets = function(facetKeys, indexStart) {
    var index, saveFacet;
    index = indexStart;
    saveFacet = (function(_this) {
      return function(facet) {
        var attrs;
        attrs = {
          id: buildUniqueId('fc_'),
          dataset_id: _this.id,
          attribute: facet,
          label: facet,
          order: index,
          enabled: true,
          tooltip: ''
        };
        index = index + 1;
        return Backbone.Radio.channel('db').request('add', 'facets', attrs);
      };
    })(this);
    return Promise.each(facetKeys, saveFacet);
  };

  DatasetModel.prototype.destroySuperfluousFacets = function(toDestroy, facetCollection) {
    var destroyFacet;
    destroyFacet = (function(_this) {
      return function(facet) {
        facetCollection.remove(facet);
        return facet.destroy();
      };
    })(this);
    return Promise.each(toDestroy, destroyFacet);
  };

  DatasetModel.prototype.regenerateFacets = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.fetchDatapoints().then(function(datapointCollection) {
          return _this.fetchFacets().then(function(facetCollection) {
            var allKeys, attr, dp, facet, i, j, len, len1, pendingDestroy, ref, ref1;
            pendingDestroy = [];
            allKeys = [];
            ref = datapointCollection.models;
            for (i = 0, len = ref.length; i < len; i++) {
              dp = ref[i];
              allKeys = _.union(allKeys, _.keys(dp.get('data')));
            }
            ref1 = facetCollection.models;
            for (j = 0, len1 = ref1.length; j < len1; j++) {
              facet = ref1[j];
              attr = facet.get('attribute');
              if (indexOf.call(allKeys, attr) >= 0) {
                allKeys = _.without(allKeys, attr);
              } else {
                pendingDestroy.push(facet);
              }
            }
            return _this.destroySuperfluousFacets(pendingDestroy, facetCollection).then(function() {
              return _this.generateNewFacets(allKeys, facetCollection.length + 1).then(function() {
                return resolve();
              })["catch"](function() {
                return reject(err);
              });
            })["catch"](function(err) {
              return reject(err);
            });
          });
        });
      };
    })(this));
  };

  return DatasetModel;

})(Backbone.Model);

DatasetCollection = (function(superClass) {
  extend(DatasetCollection, superClass);

  function DatasetCollection() {
    return DatasetCollection.__super__.constructor.apply(this, arguments);
  }

  DatasetCollection.prototype.urlRoot = 'datasets';

  DatasetCollection.prototype.model = DatasetModel;

  return DatasetCollection;

})(Backbone.Collection);

module.exports = {
  Model: DatasetModel,
  Collection: DatasetCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZW50aXRpZXMuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZW50aXRpZXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQUEsK0JBQUE7RUFBQTs7Ozs7QUFBTTs7Ozs7Ozs7eUJBQ0osT0FBQSxHQUFTOzt5QkFLVCxRQUFBLEdBQ0U7SUFBQSxFQUFBLEVBQVUsRUFBVjtJQUNBLEtBQUEsRUFBVSxFQURWO0lBRUEsT0FBQSxFQUFVLEVBRlY7Ozt5QkFLRixJQUFBLEdBQU0sU0FBQTtXQUNKLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE1BQTFDLEVBQWtELElBQWxEO0VBREk7O3lCQU1OLFdBQUEsR0FBYSxTQUFBO0FBQ1gsV0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsT0FBdkIsQ0FBK0IsQ0FBQyxPQUFoQyxDQUF3QyxZQUF4QyxFQUFzRCxJQUFDLENBQUEsRUFBdkQ7RUFESTs7eUJBR2IsZUFBQSxHQUFpQixTQUFBO0FBQ2YsV0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsV0FBdkIsQ0FBbUMsQ0FBQyxPQUFwQyxDQUE0QyxZQUE1QyxFQUEwRCxJQUFDLENBQUEsRUFBM0Q7RUFEUTs7eUJBR2pCLG1CQUFBLEdBQXFCLFNBQUE7QUFDbkIsV0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsZ0JBQXZCLENBQXdDLENBQUMsT0FBekMsQ0FBaUQsWUFBakQsRUFBK0QsSUFBQyxDQUFBLEVBQWhFO0VBRFk7O3lCQUdyQixnQkFBQSxHQUFrQixTQUFBO0FBQ2hCLFdBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLGFBQXZCLENBQXFDLENBQUMsT0FBdEMsQ0FBOEMsWUFBOUMsRUFBNEQsSUFBQyxDQUFBLEVBQTdEO0VBRFM7O3lCQUdsQixpQkFBQSxHQUFtQixTQUFDLFNBQUQsRUFBWSxVQUFaO0FBR2pCLFFBQUE7SUFBQSxLQUFBLEdBQVE7SUFJUixTQUFBLEdBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLEtBQUQ7QUFHVixZQUFBO1FBQUEsS0FBQSxHQUNFO1VBQUEsRUFBQSxFQUFZLGFBQUEsQ0FBYyxLQUFkLENBQVo7VUFDQSxVQUFBLEVBQVksS0FBQyxDQUFBLEVBRGI7VUFFQSxTQUFBLEVBQVksS0FGWjtVQUdBLEtBQUEsRUFBWSxLQUhaO1VBSUEsS0FBQSxFQUFZLEtBSlo7VUFLQSxPQUFBLEVBQVksSUFMWjtVQU1BLE9BQUEsRUFBWSxFQU5aOztRQVNGLEtBQUEsR0FBUSxLQUFBLEdBQVE7QUFHaEIsZUFBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsSUFBdkIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxLQUFyQyxFQUE0QyxRQUE1QyxFQUFzRCxLQUF0RDtNQWhCRztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7QUFxQlosV0FBTyxPQUFPLENBQUMsSUFBUixDQUFhLFNBQWIsRUFBd0IsU0FBeEI7RUE1QlU7O3lCQWlDbkIsd0JBQUEsR0FBMEIsU0FBQyxTQUFELEVBQVksZUFBWjtBQUl4QixRQUFBO0lBQUEsWUFBQSxHQUFlLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxLQUFEO1FBQ2IsZUFBZSxDQUFDLE1BQWhCLENBQXVCLEtBQXZCO0FBQ0EsZUFBTyxLQUFLLENBQUMsT0FBTixDQUFBO01BRk07SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0FBS2YsV0FBTyxPQUFPLENBQUMsSUFBUixDQUFhLFNBQWIsRUFBd0IsWUFBeEI7RUFUaUI7O3lCQVkxQixnQkFBQSxHQUFrQixTQUFBO0FBR2hCLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO2VBR2pCLEtBQUMsQ0FBQSxlQUFELENBQUEsQ0FBa0IsQ0FBQyxJQUFuQixDQUF3QixTQUFDLG1CQUFEO2lCQUd0QixLQUFDLENBQUEsV0FBRCxDQUFBLENBQWMsQ0FBQyxJQUFmLENBQW9CLFNBQUMsZUFBRDtBQUdsQixnQkFBQTtZQUFBLGNBQUEsR0FBaUI7WUFHakIsT0FBQSxHQUFVO0FBQ1Y7QUFBQSxpQkFBQSxxQ0FBQTs7Y0FDRSxPQUFBLEdBQVUsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxPQUFSLEVBQWlCLENBQUMsQ0FBQyxJQUFGLENBQU8sRUFBRSxDQUFDLEdBQUgsQ0FBTyxNQUFQLENBQVAsQ0FBakI7QUFEWjtBQUlBO0FBQUEsaUJBQUEsd0NBQUE7O2NBR0UsSUFBQSxHQUFPLEtBQUssQ0FBQyxHQUFOLENBQVUsV0FBVjtjQUdQLElBQUcsYUFBUSxPQUFSLEVBQUEsSUFBQSxNQUFIO2dCQUNFLE9BQUEsR0FBVSxDQUFDLENBQUMsT0FBRixDQUFVLE9BQVYsRUFBbUIsSUFBbkIsRUFEWjtlQUFBLE1BQUE7Z0JBT0UsY0FBYyxDQUFDLElBQWYsQ0FBb0IsS0FBcEIsRUFQRjs7QUFORjttQkFnQkEsS0FBQyxDQUFBLHdCQUFELENBQTBCLGNBQTFCLEVBQTBDLGVBQTFDLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQTtxQkFHSixLQUFDLENBQUEsaUJBQUQsQ0FBbUIsT0FBbkIsRUFBNEIsZUFBZSxDQUFDLE1BQWhCLEdBQXlCLENBQXJELENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQTtBQUFNLHVCQUFPLE9BQUEsQ0FBQTtjQUFiLENBRE4sQ0FFQSxFQUFDLEtBQUQsRUFGQSxDQUVPLFNBQUE7QUFBTSx1QkFBTyxNQUFBLENBQU8sR0FBUDtjQUFiLENBRlA7WUFISSxDQUROLENBUUEsRUFBQyxLQUFELEVBUkEsQ0FRTyxTQUFDLEdBQUQ7QUFBUyxxQkFBTyxNQUFBLENBQU8sR0FBUDtZQUFoQixDQVJQO1VBM0JrQixDQUFwQjtRQUhzQixDQUF4QjtNQUhpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQUhTOzs7O0dBM0VPLFFBQVEsQ0FBQzs7QUEySDlCOzs7Ozs7OzhCQUNKLE9BQUEsR0FBUzs7OEJBQ1QsS0FBQSxHQUFPOzs7O0dBRnVCLFFBQVEsQ0FBQzs7QUFNekMsTUFBTSxDQUFDLE9BQVAsR0FDRTtFQUFBLEtBQUEsRUFBWSxZQUFaO0VBQ0EsVUFBQSxFQUFZLGlCQURaIn0=

},{}],61:[function(require,module,exports){
var DatasetExportRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

DatasetExportRoute = (function(superClass) {
  extend(DatasetExportRoute, superClass);

  function DatasetExportRoute() {
    return DatasetExportRoute.__super__.constructor.apply(this, arguments);
  }

  DatasetExportRoute.prototype.title = function() {
    return "Datasets - " + (this.model.get('label')) + " - Export";
  };

  DatasetExportRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        href: "#datasets",
        text: 'Archives'
      }, {
        href: "#datasets/" + this.model.id,
        text: this.model.get('label')
      }, {
        text: 'Export'
      }
    ];
  };

  DatasetExportRoute.prototype.fetch = function(id) {
    return Backbone.Radio.channel('dataset').request('model', id).then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  DatasetExportRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return DatasetExportRoute;

})(require('hn_routing/lib/route'));

module.exports = DatasetExportRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZXhwb3J0L3JvdXRlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2V4cG9ydC9yb3V0ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw4QkFBQTtFQUFBOzs7QUFBQSxVQUFBLEdBQWMsT0FBQSxDQUFRLGdCQUFSOztBQUlSOzs7Ozs7OytCQUVKLEtBQUEsR0FBTyxTQUFBO0FBQ0wsV0FBTyxhQUFBLEdBQWEsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBYixHQUFrQztFQURwQzs7K0JBR1AsV0FBQSxHQUFhLFNBQUE7QUFDWCxXQUFPO01BQ0w7UUFBRSxJQUFBLEVBQU0sTUFBUjtRQUFnQixJQUFBLEVBQU0sR0FBdEI7T0FESyxFQUVMO1FBQUUsSUFBQSxFQUFNLFdBQVI7UUFBcUIsSUFBQSxFQUFNLFVBQTNCO09BRkssRUFHTDtRQUFFLElBQUEsRUFBTSxZQUFBLEdBQWEsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUE1QjtRQUFrQyxJQUFBLEVBQU0sSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUF4QztPQUhLLEVBSUw7UUFBRSxJQUFBLEVBQU0sUUFBUjtPQUpLOztFQURJOzsrQkFRYixLQUFBLEdBQU8sU0FBQyxFQUFEO1dBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsT0FBMUMsRUFBbUQsRUFBbkQsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUFXLEtBQUMsQ0FBQSxLQUFELEdBQVM7TUFBcEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE47RUFESzs7K0JBSVAsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZixDQUFoQjtFQURNOzs7O0dBakJ1QixPQUFBLENBQVEsc0JBQVI7O0FBc0JqQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./views/layout":62,"hn_routing/lib/route":207}],62:[function(require,module,exports){
var ExportView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ExportView = (function(superClass) {
  extend(ExportView, superClass);

  function ExportView() {
    return ExportView.__super__.constructor.apply(this, arguments);
  }

  ExportView.prototype.template = require('./templates/export');

  ExportView.prototype.className = 'container d-flex align-items-center h-100 flex-column';

  ExportView.prototype.behaviors = {
    DownloadFile: {},
    Flashes: {
      success: {
        message: 'Successfully exported dataset for analysis.'
      }
    }
  };

  ExportView.prototype.ui = {
    exportJSON: '[data-export=json]',
    exportCSV: '[data-export=csv]'
  };

  ExportView.prototype.events = {
    'click @ui.exportJSON': 'exportJSON',
    'click @ui.exportCSV': 'exportCSV'
  };

  ExportView.prototype.generateFilename = function(extension) {
    var date, filename, label;
    label = this.model.get('label');
    label = label.toLowerCase().replace(/\s/g, '_');
    date = new Date().toJSON().slice(0, 10).replace(/-/g, '_');
    filename = [label, '_magellan_analysis_export_', date, '.', extension];
    return filename.join('');
  };

  ExportView.prototype.preExport = function() {
    return Backbone.Radio.channel('loading').trigger('show', "Exporting " + (this.model.get('label')) + "...");
  };

  ExportView.prototype.postExport = function() {
    Backbone.Radio.channel('loading').trigger('hide');
    return this.flashSuccess();
  };

  ExportView.prototype.exportJSON = function() {
    this.preExport();
    return this.model.fetchDatapoints().then((function(_this) {
      return function(datapoints) {
        var filename, filetype;
        filename = _this.generateFilename('json');
        filetype = 'application/json';
        _this.downloadFile({
          content: JSON.stringify(datapoints.pluck('data'), null, 2),
          type: filetype,
          filename: filename
        });
        return _this.postExport();
      };
    })(this));
  };

  ExportView.prototype.exportCSV = function() {
    Backbone.Radio.channel('loading').trigger('show', "Exporting " + (this.model.get('label')) + "...");
    return this.model.fetchDatapoints().then((function(_this) {
      return function(datapoints) {
        var allKeys, csvOut, el, filename, filetype, header, i, j, jsonExport, k, len, len1, len2, row, value;
        jsonExport = datapoints.pluck('data');
        allKeys = [];
        for (i = 0, len = jsonExport.length; i < len; i++) {
          el = jsonExport[i];
          allKeys = _.union(allKeys, _.keys(el));
        }
        allKeys = _.uniq(allKeys);
        csvOut = [];
        csvOut.push(allKeys.join(', '));
        for (j = 0, len1 = jsonExport.length; j < len1; j++) {
          el = jsonExport[j];
          row = [];
          for (k = 0, len2 = allKeys.length; k < len2; k++) {
            header = allKeys[k];
            value = el[header];
            if (typeof value === 'object' && value['@id']) {
              value = value['@id'];
            }
            if (value === void 0) {
              value = 'NULL';
            }
            row.push(value);
          }
          csvOut.push(row.join(', '));
        }
        filename = _this.generateFilename('csv');
        filetype = 'text/csv';
        _this.downloadFile({
          content: csvOut.join('\n'),
          type: filetype,
          filename: filename
        });
        return _this.postExport();
      };
    })(this));
  };

  return ExportView;

})(Mn.LayoutView);

module.exports = ExportView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZXhwb3J0L3ZpZXdzL2xheW91dC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9leHBvcnQvdmlld3MvbGF5b3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7dUJBQ1YsU0FBQSxHQUFXOzt1QkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUNBLE9BQUEsRUFDRTtNQUFBLE9BQUEsRUFDRTtRQUFBLE9BQUEsRUFBVSw2Q0FBVjtPQURGO0tBRkY7Ozt1QkFLRixFQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQVksb0JBQVo7SUFDQSxTQUFBLEVBQVksbUJBRFo7Ozt1QkFHRixNQUFBLEdBQ0U7SUFBQSxzQkFBQSxFQUF3QixZQUF4QjtJQUNBLHFCQUFBLEVBQXdCLFdBRHhCOzs7dUJBSUYsZ0JBQUEsR0FBa0IsU0FBQyxTQUFEO0FBQ2hCLFFBQUE7SUFBQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWDtJQUNSLEtBQUEsR0FBUSxLQUFLLENBQUMsV0FBTixDQUFBLENBQW1CLENBQUMsT0FBcEIsQ0FBNEIsS0FBNUIsRUFBbUMsR0FBbkM7SUFDUixJQUFBLEdBQVEsSUFBSSxJQUFKLENBQUEsQ0FBVSxDQUFDLE1BQVgsQ0FBQSxDQUFtQixDQUFDLEtBQXBCLENBQTBCLENBQTFCLEVBQTRCLEVBQTVCLENBQStCLENBQUMsT0FBaEMsQ0FBd0MsSUFBeEMsRUFBOEMsR0FBOUM7SUFDUixRQUFBLEdBQVcsQ0FBQyxLQUFELEVBQVEsNEJBQVIsRUFBc0MsSUFBdEMsRUFBNEMsR0FBNUMsRUFBaUQsU0FBakQ7QUFDWCxXQUFPLFFBQVEsQ0FBQyxJQUFULENBQWMsRUFBZDtFQUxTOzt1QkFPbEIsU0FBQSxHQUFXLFNBQUE7V0FHVCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxNQUExQyxFQUFrRCxZQUFBLEdBQVksQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBWixHQUFpQyxLQUFuRjtFQUhTOzt1QkFLWCxVQUFBLEdBQVksU0FBQTtJQUdWLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE1BQTFDO1dBR0EsSUFBQyxDQUFBLFlBQUQsQ0FBQTtFQU5VOzt1QkFRWixVQUFBLEdBQVksU0FBQTtJQUNWLElBQUMsQ0FBQSxTQUFELENBQUE7V0FJQSxJQUFDLENBQUEsS0FBSyxDQUFDLGVBQVAsQ0FBQSxDQUF3QixDQUFDLElBQXpCLENBQThCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxVQUFEO0FBRzVCLFlBQUE7UUFBQSxRQUFBLEdBQVksS0FBQyxDQUFBLGdCQUFELENBQWtCLE1BQWxCO1FBQ1osUUFBQSxHQUFZO1FBR1osS0FBQyxDQUFBLFlBQUQsQ0FBYztVQUFFLE9BQUEsRUFBUyxJQUFJLENBQUMsU0FBTCxDQUFlLFVBQVUsQ0FBQyxLQUFYLENBQWlCLE1BQWpCLENBQWYsRUFBeUMsSUFBekMsRUFBK0MsQ0FBL0MsQ0FBWDtVQUE4RCxJQUFBLEVBQU0sUUFBcEU7VUFBOEUsUUFBQSxFQUFVLFFBQXhGO1NBQWQ7ZUFDQSxLQUFDLENBQUEsVUFBRCxDQUFBO01BUjRCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE5QjtFQUxVOzt1QkFnQlosU0FBQSxHQUFXLFNBQUE7SUFHVCxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxNQUExQyxFQUFrRCxZQUFBLEdBQVksQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBWixHQUFpQyxLQUFuRjtXQUlBLElBQUMsQ0FBQSxLQUFLLENBQUMsZUFBUCxDQUFBLENBQXdCLENBQUMsSUFBekIsQ0FBOEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFVBQUQ7QUFHNUIsWUFBQTtRQUFBLFVBQUEsR0FBYSxVQUFVLENBQUMsS0FBWCxDQUFpQixNQUFqQjtRQUdiLE9BQUEsR0FBVTtBQUNWLGFBQUEsNENBQUE7O1VBQUEsT0FBQSxHQUFVLENBQUMsQ0FBQyxLQUFGLENBQVEsT0FBUixFQUFpQixDQUFDLENBQUMsSUFBRixDQUFPLEVBQVAsQ0FBakI7QUFBVjtRQUNBLE9BQUEsR0FBVSxDQUFDLENBQUMsSUFBRixDQUFPLE9BQVA7UUFHVixNQUFBLEdBQVM7UUFHVCxNQUFNLENBQUMsSUFBUCxDQUFZLE9BQU8sQ0FBQyxJQUFSLENBQWEsSUFBYixDQUFaO0FBR0EsYUFBQSw4Q0FBQTs7VUFDRSxHQUFBLEdBQU07QUFFTixlQUFBLDJDQUFBOztZQUNFLEtBQUEsR0FBUSxFQUFHLENBQUEsTUFBQTtZQUNYLElBQXdCLE9BQU8sS0FBUCxLQUFnQixRQUFoQixJQUE0QixLQUFNLENBQUEsS0FBQSxDQUExRDtjQUFBLEtBQUEsR0FBUSxLQUFNLENBQUEsS0FBQSxFQUFkOztZQUNBLElBQWtCLEtBQUEsS0FBUyxNQUEzQjtjQUFBLEtBQUEsR0FBUSxPQUFSOztZQUNBLEdBQUcsQ0FBQyxJQUFKLENBQVMsS0FBVDtBQUpGO1VBTUEsTUFBTSxDQUFDLElBQVAsQ0FBWSxHQUFHLENBQUMsSUFBSixDQUFTLElBQVQsQ0FBWjtBQVRGO1FBWUEsUUFBQSxHQUFZLEtBQUMsQ0FBQSxnQkFBRCxDQUFrQixLQUFsQjtRQUNaLFFBQUEsR0FBWTtRQUdaLEtBQUMsQ0FBQSxZQUFELENBQWM7VUFBRSxPQUFBLEVBQVMsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFaLENBQVg7VUFBOEIsSUFBQSxFQUFNLFFBQXBDO1VBQThDLFFBQUEsRUFBVSxRQUF4RDtTQUFkO2VBQ0EsS0FBQyxDQUFBLFVBQUQsQ0FBQTtNQWxDNEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTlCO0VBUFM7Ozs7R0F2RFksRUFBRSxDQUFDOztBQW9HNUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/export":63}],63:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"row d-flex w-100 flex-column\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Export</p></div><div class=\"col-lg-12\"><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-question-circle\"></i>&nbsp;\nThis action exports the dataset with Knowledge Capture.</div></div><div class=\"col-lg-6\"><button data-export=\"json\" class=\"btn btn-outline-success w-100\"><i class=\"fa fa-fw fa-file-code-o\"></i>&nbsp;\nJSON Export</button></div><div class=\"col-lg-6\"><button data-export=\"csv\" class=\"btn btn-outline-success w-100\"><i class=\"fa fa-fw fa-file-excel-o\"></i>&nbsp;\nCSV Archive</button></div></div></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],64:[function(require,module,exports){
var DatasetFactory, DexieFactory, Entities,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

DatasetFactory = (function(superClass) {
  extend(DatasetFactory, superClass);

  function DatasetFactory() {
    return DatasetFactory.__super__.constructor.apply(this, arguments);
  }

  DatasetFactory.prototype.tableName = 'datasets';

  DatasetFactory.prototype.radioRequests = {
    'dataset model': 'getModel',
    'dataset save': 'saveModel',
    'dataset destroy': 'destroyModel',
    'dataset collection': 'getCollection'
  };

  DatasetFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  DatasetFactory.prototype.getCollection = function() {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.db[_this.tableName].toArray().then(function(models) {
          _this.cachedCollection.reset(models);
          return resolve(_this.cachedCollection);
        })["catch"](function(err) {
          return reject(err);
        });
      };
    })(this));
  };

  return DatasetFactory;

})(DexieFactory);

module.exports = new DatasetFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZmFjdG9yeS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9mYWN0b3J5LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLHNDQUFBO0VBQUE7OztBQUFBLFFBQUEsR0FBVyxPQUFBLENBQVEsWUFBUjs7QUFDWCxZQUFBLEdBQWdCLE9BQUEsQ0FBUSxzQkFBUjs7QUFJVjs7Ozs7OzsyQkFFSixTQUFBLEdBQVc7OzJCQUVYLGFBQUEsR0FDRTtJQUFBLGVBQUEsRUFBc0IsVUFBdEI7SUFDQSxjQUFBLEVBQXNCLFdBRHRCO0lBRUEsaUJBQUEsRUFBc0IsY0FGdEI7SUFHQSxvQkFBQSxFQUFzQixlQUh0Qjs7OzJCQUtGLFVBQUEsR0FBWSxTQUFBO1dBQ1YsSUFBQyxDQUFBLGdCQUFELEdBQW9CLElBQUksUUFBUSxDQUFDLFVBQWIsQ0FBQTtFQURWOzsyQkFHWixhQUFBLEdBQWUsU0FBQTtJQUdiLElBQUMsQ0FBQSxRQUFELENBQUE7QUFHQSxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtlQUdqQixLQUFDLENBQUEsRUFBRyxDQUFBLEtBQUMsQ0FBQSxTQUFELENBQVcsQ0FBQyxPQUFoQixDQUFBLENBR0EsQ0FBQyxJQUhELENBR00sU0FBQyxNQUFEO1VBQ0osS0FBQyxDQUFBLGdCQUFnQixDQUFDLEtBQWxCLENBQXdCLE1BQXhCO0FBQ0EsaUJBQU8sT0FBQSxDQUFRLEtBQUMsQ0FBQSxnQkFBVDtRQUZILENBSE4sQ0FRQSxFQUFDLEtBQUQsRUFSQSxDQVFPLFNBQUMsR0FBRDtBQUNMLGlCQUFPLE1BQUEsQ0FBTyxHQUFQO1FBREYsQ0FSUDtNQUhpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQU5NOzs7O0dBYlk7O0FBbUM3QixNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLGNBQUosQ0FBQSJ9

},{"../base/dexieFactory":34,"./entities":60}],65:[function(require,module,exports){
var ArchiveImporter,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ArchiveImporter = (function() {
  function ArchiveImporter() {
    this.sanitizeString = bind(this.sanitizeString, this);
  }

  ArchiveImporter.prototype.context = {
    "dmoa": "http://dmo.org/archive/",
    "dmoi": "http://dmo.org/instance/",
    "foaf": "http://xmlns.com/foaf/0.1/",
    "nfo": "http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#",
    "ore": "http://www.openarchives.org/ore/terms/",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#"
  };

  ArchiveImporter.prototype.sanitizeString = function(str) {
    return str.replace('{', '\{').replace('{', '\{');
  };

  ArchiveImporter.prototype.getType = function(label) {
    var fn, ofType;
    if (!label) {
      return 'FALSE';
    }
    ofType = function(fn, ext) {
      return fn.indexOf(ext) !== -1;
    };
    if (!label.split('.')[1]) {
      return 'nfo:Folder';
    }
    fn = this.sanitizeString(label);
    if (ofType(fn, '.csv') || ofType(fn, '.xlx') || ofType(fn, '.xlsx')) {
      return 'nfo:Spreadsheet';
    }
    if (ofType(fn, '.png') || ofType(fn, '.jpg')) {
      return 'nfo:Image';
    }
    if (ofType(fn, '.txt')) {
      return 'nfo:PlainTextDocument';
    }
    return 'nfo:Document';
  };

  ArchiveImporter.prototype.directoryIDs = [];

  ArchiveImporter.prototype.collectDirectory = function(dir) {
    this.directoryIDs.push(dir);
    return this.directoryIDs = _.uniq(this.directoryIDs);
  };

  ArchiveImporter.prototype.addDirectories = function() {
    var belongsTo, dir, dirElement, i, len, ref, results;
    ref = this.directoryIDs;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      dir = ref[i];
      belongsTo = dir.split('/');
      belongsTo.pop();
      belongsTo.pop();
      belongsTo = belongsTo.join('/') + '/';
      if (belongsTo === '/') {
        belongsTo = 'root';
      }
      dirElement = {
        '@id': dir,
        '@type': 'nfo:Folder',
        'rdfs:label': dir,
        'nfo:belongsToContainer': belongsTo
      };
      results.push(this.output['@graph'].push(dirElement));
    }
    return results;
  };

  ArchiveImporter.prototype.parseFile = function(file, prefix) {
    var belongsTo, el, filepath, label, pieces;
    if (prefix) {
      if (!_s.endsWith(prefix, '/')) {
        prefix = prefix + '/';
      }
      if (!_s.startsWith(prefix, '/')) {
        prefix = '/' + prefix;
      }
      filepath = prefix + file.webkitRelativePath;
    } else {
      filepath = '/' + file.webkitRelativePath;
    }
    pieces = filepath.split('/');
    label = pieces.pop();
    belongsTo = pieces.join('/') + '/';
    this.collectDirectory(belongsTo);
    el = {
      '@id': filepath,
      '@type': this.getType(label),
      'rdfs:label': label,
      'nfo:belongsToContainer': belongsTo
    };
    return el;
  };

  ArchiveImporter.prototype.parse = function(files, prefix) {
    var f, i, len;
    if (prefix == null) {
      prefix = null;
    }
    this.directoryIDs = [];
    this.output = {
      "@context": this.context,
      "@graph": []
    };
    for (i = 0, len = files.length; i < len; i++) {
      f = files[i];
      this.output['@graph'].push(this.parseFile(f, prefix));
    }
    this.addDirectories();
    return this.output;
  };

  return ArchiveImporter;

})();

module.exports = new ArchiveImporter();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvaW1wb3J0ZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvaW1wb3J0ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLElBQUEsZUFBQTtFQUFBOztBQUFNOzs7Ozs0QkFFSixPQUFBLEdBQ0U7SUFBQSxNQUFBLEVBQVEseUJBQVI7SUFDQSxNQUFBLEVBQVEsMEJBRFI7SUFFQSxNQUFBLEVBQVEsNEJBRlI7SUFHQSxLQUFBLEVBQVEsMkRBSFI7SUFJQSxLQUFBLEVBQVEsd0NBSlI7SUFLQSxLQUFBLEVBQVEsNkNBTFI7SUFNQSxNQUFBLEVBQVEsdUNBTlI7SUFPQSxLQUFBLEVBQVEsbUNBUFI7Ozs0QkFTRixjQUFBLEdBQWdCLFNBQUMsR0FBRDtBQUNkLFdBQU8sR0FBRyxDQUFDLE9BQUosQ0FBWSxHQUFaLEVBQWlCLElBQWpCLENBQXNCLENBQUMsT0FBdkIsQ0FBK0IsR0FBL0IsRUFBb0MsSUFBcEM7RUFETzs7NEJBR2hCLE9BQUEsR0FBUyxTQUFDLEtBQUQ7QUFFUCxRQUFBO0lBQUEsSUFBQSxDQUFzQixLQUF0QjtBQUFBLGFBQU8sUUFBUDs7SUFHQSxNQUFBLEdBQVMsU0FBQyxFQUFELEVBQUssR0FBTDtBQUFhLGFBQU8sRUFBRSxDQUFDLE9BQUgsQ0FBVyxHQUFYLENBQUEsS0FBbUIsQ0FBQztJQUF4QztJQUdULElBQUEsQ0FBMkIsS0FBSyxDQUFDLEtBQU4sQ0FBWSxHQUFaLENBQWlCLENBQUEsQ0FBQSxDQUE1QztBQUFBLGFBQU8sYUFBUDs7SUFHQSxFQUFBLEdBQUssSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsS0FBaEI7SUFLTCxJQUE0QixNQUFBLENBQU8sRUFBUCxFQUFVLE1BQVYsQ0FBQSxJQUFxQixNQUFBLENBQU8sRUFBUCxFQUFVLE1BQVYsQ0FBckIsSUFBMEMsTUFBQSxDQUFPLEVBQVAsRUFBVSxPQUFWLENBQXRFO0FBQUEsYUFBTyxrQkFBUDs7SUFHQSxJQUFzQixNQUFBLENBQU8sRUFBUCxFQUFVLE1BQVYsQ0FBQSxJQUFxQixNQUFBLENBQU8sRUFBUCxFQUFVLE1BQVYsQ0FBM0M7QUFBQSxhQUFPLFlBQVA7O0lBR0EsSUFBa0MsTUFBQSxDQUFPLEVBQVAsRUFBVSxNQUFWLENBQWxDO0FBQUEsYUFBTyx3QkFBUDs7QUFHQSxXQUFPO0VBekJBOzs0QkE4QlQsWUFBQSxHQUFjOzs0QkFJZCxnQkFBQSxHQUFrQixTQUFDLEdBQUQ7SUFDaEIsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLEdBQW5CO1dBQ0EsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFDLENBQUEsWUFBUjtFQUZBOzs0QkFNbEIsY0FBQSxHQUFnQixTQUFBO0FBQ2QsUUFBQTtBQUFBO0FBQUE7U0FBQSxxQ0FBQTs7TUFHRSxTQUFBLEdBQVksR0FBRyxDQUFDLEtBQUosQ0FBVSxHQUFWO01BQ1osU0FBUyxDQUFDLEdBQVYsQ0FBQTtNQUNBLFNBQVMsQ0FBQyxHQUFWLENBQUE7TUFDQSxTQUFBLEdBQVksU0FBUyxDQUFDLElBQVYsQ0FBZSxHQUFmLENBQUEsR0FBc0I7TUFDbEMsSUFBc0IsU0FBQSxLQUFhLEdBQW5DO1FBQUEsU0FBQSxHQUFZLE9BQVo7O01BR0EsVUFBQSxHQUNFO1FBQUEsS0FBQSxFQUEwQixHQUExQjtRQUNBLE9BQUEsRUFBMEIsWUFEMUI7UUFFQSxZQUFBLEVBQTBCLEdBRjFCO1FBR0Esd0JBQUEsRUFBMEIsU0FIMUI7O21CQU1GLElBQUMsQ0FBQSxNQUFPLENBQUEsUUFBQSxDQUFTLENBQUMsSUFBbEIsQ0FBdUIsVUFBdkI7QUFqQkY7O0VBRGM7OzRCQXNCaEIsU0FBQSxHQUFXLFNBQUMsSUFBRCxFQUFPLE1BQVA7QUFHVCxRQUFBO0lBQUEsSUFBRyxNQUFIO01BR0UsSUFBQSxDQUE2QixFQUFFLENBQUMsUUFBSCxDQUFZLE1BQVosRUFBb0IsR0FBcEIsQ0FBN0I7UUFBQSxNQUFBLEdBQVMsTUFBQSxHQUFTLElBQWxCOztNQUNBLElBQUEsQ0FBNkIsRUFBRSxDQUFDLFVBQUgsQ0FBYyxNQUFkLEVBQXNCLEdBQXRCLENBQTdCO1FBQUEsTUFBQSxHQUFTLEdBQUEsR0FBTSxPQUFmOztNQUdBLFFBQUEsR0FBVyxNQUFBLEdBQVMsSUFBSSxDQUFDLG1CQVAzQjtLQUFBLE1BQUE7TUFXRSxRQUFBLEdBQVcsR0FBQSxHQUFNLElBQUksQ0FBQyxtQkFYeEI7O0lBY0EsTUFBQSxHQUFZLFFBQVEsQ0FBQyxLQUFULENBQWUsR0FBZjtJQUNaLEtBQUEsR0FBWSxNQUFNLENBQUMsR0FBUCxDQUFBO0lBQ1osU0FBQSxHQUFZLE1BQU0sQ0FBQyxJQUFQLENBQVksR0FBWixDQUFBLEdBQW1CO0lBRy9CLElBQUMsQ0FBQSxnQkFBRCxDQUFrQixTQUFsQjtJQUlBLEVBQUEsR0FDRTtNQUFBLEtBQUEsRUFBMEIsUUFBMUI7TUFDQSxPQUFBLEVBQTBCLElBQUMsQ0FBQSxPQUFELENBQVMsS0FBVCxDQUQxQjtNQUVBLFlBQUEsRUFBMEIsS0FGMUI7TUFHQSx3QkFBQSxFQUEwQixTQUgxQjs7QUFPRixXQUFPO0VBbENFOzs0QkF1Q1gsS0FBQSxHQUFPLFNBQUMsS0FBRCxFQUFRLE1BQVI7QUFHTCxRQUFBOztNQUhhLFNBQU87O0lBR3BCLElBQUMsQ0FBQSxZQUFELEdBQWdCO0lBR2hCLElBQUMsQ0FBQSxNQUFELEdBQVU7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLE9BQWY7TUFBd0IsUUFBQSxFQUFVLEVBQWxDOztBQUdWLFNBQUEsdUNBQUE7O01BQUEsSUFBQyxDQUFBLE1BQU8sQ0FBQSxRQUFBLENBQVMsQ0FBQyxJQUFsQixDQUF1QixJQUFDLENBQUEsU0FBRCxDQUFXLENBQVgsRUFBYyxNQUFkLENBQXZCO0FBQUE7SUFHQSxJQUFDLENBQUEsY0FBRCxDQUFBO0FBR0EsV0FBTyxJQUFDLENBQUE7RUFmSDs7Ozs7O0FBbUJULE1BQU0sQ0FBQyxPQUFQLEdBQWlCLElBQUksZUFBSixDQUFBIn0=

},{}],66:[function(require,module,exports){
var KnowledgeCaptureRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

KnowledgeCaptureRoute = (function(superClass) {
  extend(KnowledgeCaptureRoute, superClass);

  function KnowledgeCaptureRoute() {
    return KnowledgeCaptureRoute.__super__.constructor.apply(this, arguments);
  }

  KnowledgeCaptureRoute.prototype.title = function() {
    return "Datasets - " + (this.model.get('label')) + " - Knowledge Capture";
  };

  KnowledgeCaptureRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        href: "#datasets",
        text: 'Archives'
      }, {
        href: "#datasets/" + this.model.id,
        text: this.model.get('label')
      }, {
        href: "#datasets/" + this.model.id + "/search",
        text: 'Search'
      }, {
        text: 'Knowledge Capture'
      }
    ];
  };

  KnowledgeCaptureRoute.prototype.fetch = function(id) {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return Backbone.Radio.channel('dataset').request('model', id).then(function(model) {
          _this.model = model;
          return _this.model.fetchKnowledgeRules().then(function(knowledgeRuleCollection) {
            _this.collection = knowledgeRuleCollection;
            return resolve();
          })["catch"](function(err) {
            return reject(err);
          });
        })["catch"](function(err) {
          return reject(err);
        });
      };
    })(this));
  };

  KnowledgeCaptureRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model,
      collection: this.collection
    }));
  };

  return KnowledgeCaptureRoute;

})(require('hn_routing/lib/route'));

module.exports = KnowledgeCaptureRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvcm91dGUuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvcm91dGUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsaUNBQUE7RUFBQTs7O0FBQUEsVUFBQSxHQUFjLE9BQUEsQ0FBUSxnQkFBUjs7QUFJUjs7Ozs7OztrQ0FFSixLQUFBLEdBQU8sU0FBQTtBQUNMLFdBQU8sYUFBQSxHQUFhLENBQUMsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUFELENBQWIsR0FBa0M7RUFEcEM7O2tDQUdQLFdBQUEsR0FBYSxTQUFBO0FBQ1gsV0FBTztNQUNMO1FBQUUsSUFBQSxFQUFNLE1BQVI7UUFBZ0IsSUFBQSxFQUFNLEdBQXRCO09BREssRUFFTDtRQUFFLElBQUEsRUFBTSxXQUFSO1FBQXFCLElBQUEsRUFBTSxVQUEzQjtPQUZLLEVBR0w7UUFBRSxJQUFBLEVBQU0sWUFBQSxHQUFhLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBNUI7UUFBa0MsSUFBQSxFQUFNLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBeEM7T0FISyxFQUlMO1FBQUUsSUFBQSxFQUFNLFlBQUEsR0FBYSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQXBCLEdBQXVCLFNBQS9CO1FBQXlDLElBQUEsRUFBTSxRQUEvQztPQUpLLEVBS0w7UUFBRSxJQUFBLEVBQU0sbUJBQVI7T0FMSzs7RUFESTs7a0NBU2IsS0FBQSxHQUFPLFNBQUMsRUFBRDtBQUVMLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO2VBR2pCLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE9BQTFDLEVBQW1ELEVBQW5ELENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQyxLQUFEO1VBR0osS0FBQyxDQUFBLEtBQUQsR0FBUztpQkFHVCxLQUFDLENBQUEsS0FBSyxDQUFDLG1CQUFQLENBQUEsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFDLHVCQUFEO1lBR0osS0FBQyxDQUFBLFVBQUQsR0FBYztBQUdkLG1CQUFPLE9BQUEsQ0FBQTtVQU5ILENBRE4sQ0FVQSxFQUFDLEtBQUQsRUFWQSxDQVVPLFNBQUMsR0FBRDtBQUFTLG1CQUFPLE1BQUEsQ0FBTyxHQUFQO1VBQWhCLENBVlA7UUFOSSxDQUROLENBa0JBLEVBQUMsS0FBRCxFQWxCQSxDQWtCTyxTQUFDLEdBQUQ7QUFBUyxpQkFBTyxNQUFBLENBQU8sR0FBUDtRQUFoQixDQWxCUDtNQUhpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQUZGOztrQ0F5QlAsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7TUFBaUIsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUE5QjtLQUFmLENBQWhCO0VBRE07Ozs7R0F2QzBCLE9BQUEsQ0FBUSxzQkFBUjs7QUE0Q3BDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/layout":75,"hn_routing/lib/route":207}],67:[function(require,module,exports){
var ActionForm, ActionTypeForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ActionTypeForm = (function(superClass) {
  extend(ActionTypeForm, superClass);

  function ActionTypeForm() {
    return ActionTypeForm.__super__.constructor.apply(this, arguments);
  }

  ActionTypeForm.prototype.className = 'row';

  ActionTypeForm.prototype.templateMap = {
    filter: require('./templates/action_type_filter'),
    replace: require('./templates/action_type_replace'),
    literal: require('./templates/action_type_literal'),
    clone: require('./templates/action_type_clone'),
    index_from_split: require('./templates/action_type_index_from_split'),
    index_from_regex_match: require('./templates/action_type_index_from_regex_match')
  };

  ActionTypeForm.prototype.initialize = function(options) {
    return this.model.set('action', this.options.actionType);
  };

  ActionTypeForm.prototype.templateHelpers = function() {
    return {
      sourceOptions: this.options.sourceOptions
    };
  };

  ActionTypeForm.prototype.getTemplate = function() {
    return this.templateMap[this.options.actionType];
  };

  ActionTypeForm.prototype.onRender = function() {
    return Backbone.Syphon.deserialize(this, this.model.attributes);
  };

  return ActionTypeForm;

})(Mn.LayoutView);

ActionForm = (function(superClass) {
  extend(ActionForm, superClass);

  function ActionForm() {
    return ActionForm.__super__.constructor.apply(this, arguments);
  }

  ActionForm.prototype.className = 'row';

  ActionForm.prototype.template = require('./templates/action_form');

  ActionForm.prototype.ui = {
    actionSelect: '[data-select=action]'
  };

  ActionForm.prototype.events = {
    'click @ui.actionSelect': 'actionSelected'
  };

  ActionForm.prototype.regions = {
    actionTypeRegion: '[data-region=action-type]'
  };

  ActionForm.prototype.availableActions = [
    {
      action: 'literal',
      icon: 'fa-quote-right',
      text: 'Literal',
      "default": true
    }, {
      action: 'filter',
      icon: 'fa-filter',
      text: 'Filter'
    }, {
      action: 'replace',
      icon: 'fa-strikethrough',
      text: 'Replace'
    }, {
      action: 'clone',
      icon: 'fa-copy',
      text: 'Clone'
    }, {
      action: 'index_from_split',
      icon: 'fa-code-fork',
      text: 'Split and Index'
    }, {
      action: 'index_from_regex_match',
      icon: 'fa-registered',
      text: 'Index from RegEx Match'
    }
  ];

  ActionForm.prototype.templateHelpers = function() {
    return {
      isNew: this.options.isNew,
      availableActions: this.availableActions
    };
  };

  ActionForm.prototype.onRender = function() {
    return this.renderDefaultTypeForm();
  };

  ActionForm.prototype.actionSelected = function(e) {
    var actionType, el;
    el = $(e.currentTarget);
    actionType = el.data('action');
    el.addClass('active').siblings('.btn').removeClass('active');
    el.blur();
    return this.showActionTypeForm(actionType);
  };

  ActionForm.prototype.showActionTypeForm = function(actionType) {
    return this.actionTypeRegion.show(new ActionTypeForm({
      model: this.model,
      actionType: actionType,
      sourceOptions: this.options.sourceOptions
    }));
  };

  ActionForm.prototype.renderDefaultTypeForm = function() {
    var defaultAction;
    if (this.options.isNew) {
      defaultAction = _.findWhere(this.availableActions, {
        "default": true
      });
      return this.showActionTypeForm(defaultAction.action);
    } else {
      return this.showActionTypeForm(this.model.get('action'));
    }
  };

  return ActionForm;

})(Mn.LayoutView);

module.exports = ActionForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvYWN0aW9uRm9ybS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9hY3Rpb25Gb3JtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLDBCQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzJCQUNKLFNBQUEsR0FBVzs7MkJBRVgsV0FBQSxHQUVFO0lBQUEsTUFBQSxFQUF3QixPQUFBLENBQVEsZ0NBQVIsQ0FBeEI7SUFDQSxPQUFBLEVBQXdCLE9BQUEsQ0FBUSxpQ0FBUixDQUR4QjtJQUVBLE9BQUEsRUFBd0IsT0FBQSxDQUFRLGlDQUFSLENBRnhCO0lBR0EsS0FBQSxFQUF3QixPQUFBLENBQVEsK0JBQVIsQ0FIeEI7SUFJQSxnQkFBQSxFQUF3QixPQUFBLENBQVEsMENBQVIsQ0FKeEI7SUFLQSxzQkFBQSxFQUF3QixPQUFBLENBQVEsZ0RBQVIsQ0FMeEI7OzsyQkFPRixVQUFBLEdBQVksU0FBQyxPQUFEO1dBQ1YsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsUUFBWCxFQUFxQixJQUFDLENBQUEsT0FBTyxDQUFDLFVBQTlCO0VBRFU7OzJCQUdaLGVBQUEsR0FBaUIsU0FBQTtBQUNmLFdBQU87TUFBRSxhQUFBLEVBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxhQUExQjs7RUFEUTs7MkJBR2pCLFdBQUEsR0FBYSxTQUFBO0FBQ1gsV0FBTyxJQUFDLENBQUEsV0FBWSxDQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsVUFBVDtFQURUOzsyQkFHYixRQUFBLEdBQVUsU0FBQTtXQUNSLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBaEIsQ0FBNkIsSUFBN0IsRUFBZ0MsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUF2QztFQURROzs7O0dBckJpQixFQUFFLENBQUM7O0FBMEIxQjs7Ozs7Ozt1QkFDSixTQUFBLEdBQVc7O3VCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEseUJBQVI7O3VCQUVWLEVBQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxzQkFBZDs7O3VCQUVGLE1BQUEsR0FDRTtJQUFBLHdCQUFBLEVBQTBCLGdCQUExQjs7O3VCQUVGLE9BQUEsR0FDRTtJQUFBLGdCQUFBLEVBQWtCLDJCQUFsQjs7O3VCQUVGLGdCQUFBLEdBQWtCO0lBQ2hCO01BQUUsTUFBQSxFQUFRLFNBQVY7TUFBb0MsSUFBQSxFQUFNLGdCQUExQztNQUE4RCxJQUFBLEVBQU0sU0FBcEU7TUFBK0UsQ0FBQSxPQUFBLENBQUEsRUFBUyxJQUF4RjtLQURnQixFQUdoQjtNQUFFLE1BQUEsRUFBUSxRQUFWO01BQW9DLElBQUEsRUFBTSxXQUExQztNQUE4RCxJQUFBLEVBQU0sUUFBcEU7S0FIZ0IsRUFJaEI7TUFBRSxNQUFBLEVBQVEsU0FBVjtNQUFvQyxJQUFBLEVBQU0sa0JBQTFDO01BQThELElBQUEsRUFBTSxTQUFwRTtLQUpnQixFQUtoQjtNQUFFLE1BQUEsRUFBUSxPQUFWO01BQW9DLElBQUEsRUFBTSxTQUExQztNQUE4RCxJQUFBLEVBQU0sT0FBcEU7S0FMZ0IsRUFNaEI7TUFBRSxNQUFBLEVBQVEsa0JBQVY7TUFBb0MsSUFBQSxFQUFNLGNBQTFDO01BQThELElBQUEsRUFBTSxpQkFBcEU7S0FOZ0IsRUFPaEI7TUFBRSxNQUFBLEVBQVEsd0JBQVY7TUFBb0MsSUFBQSxFQUFNLGVBQTFDO01BQThELElBQUEsRUFBTSx3QkFBcEU7S0FQZ0I7Ozt1QkFjbEIsZUFBQSxHQUFpQixTQUFBO0FBQ2YsV0FBTztNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQWxCO01BQXlCLGdCQUFBLEVBQWtCLElBQUMsQ0FBQSxnQkFBNUM7O0VBRFE7O3VCQUdqQixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxxQkFBRCxDQUFBO0VBRFE7O3VCQUdWLGNBQUEsR0FBZ0IsU0FBQyxDQUFEO0FBQ2QsUUFBQTtJQUFBLEVBQUEsR0FBSyxDQUFBLENBQUUsQ0FBQyxDQUFDLGFBQUo7SUFDTCxVQUFBLEdBQWEsRUFBRSxDQUFDLElBQUgsQ0FBUSxRQUFSO0lBQ2IsRUFBRSxDQUFDLFFBQUgsQ0FBWSxRQUFaLENBQXFCLENBQUMsUUFBdEIsQ0FBK0IsTUFBL0IsQ0FBc0MsQ0FBQyxXQUF2QyxDQUFtRCxRQUFuRDtJQUNBLEVBQUUsQ0FBQyxJQUFILENBQUE7V0FDQSxJQUFDLENBQUEsa0JBQUQsQ0FBb0IsVUFBcEI7RUFMYzs7dUJBT2hCLGtCQUFBLEdBQW9CLFNBQUMsVUFBRDtXQUNsQixJQUFDLENBQUEsZ0JBQWdCLENBQUMsSUFBbEIsQ0FBdUIsSUFBSSxjQUFKLENBQW1CO01BQUUsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUFWO01BQWlCLFVBQUEsRUFBWSxVQUE3QjtNQUF5QyxhQUFBLEVBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxhQUFqRTtLQUFuQixDQUF2QjtFQURrQjs7dUJBSXBCLHFCQUFBLEdBQXVCLFNBQUE7QUFHckIsUUFBQTtJQUFBLElBQUcsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFaO01BR0UsYUFBQSxHQUFnQixDQUFDLENBQUMsU0FBRixDQUFZLElBQUMsQ0FBQSxnQkFBYixFQUErQjtRQUFFLENBQUEsT0FBQSxDQUFBLEVBQVMsSUFBWDtPQUEvQjthQUNoQixJQUFDLENBQUEsa0JBQUQsQ0FBb0IsYUFBYSxDQUFDLE1BQWxDLEVBSkY7S0FBQSxNQUFBO2FBUUUsSUFBQyxDQUFBLGtCQUFELENBQW9CLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLFFBQVgsQ0FBcEIsRUFSRjs7RUFIcUI7Ozs7R0E1Q0EsRUFBRSxDQUFDOztBQTJENUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/action_form":80,"./templates/action_type_clone":81,"./templates/action_type_filter":82,"./templates/action_type_index_from_regex_match":83,"./templates/action_type_index_from_split":84,"./templates/action_type_literal":85,"./templates/action_type_replace":86}],68:[function(require,module,exports){
var ApplyRulesView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ApplyRulesView = (function(superClass) {
  extend(ApplyRulesView, superClass);

  function ApplyRulesView() {
    return ApplyRulesView.__super__.constructor.apply(this, arguments);
  }

  ApplyRulesView.prototype.template = require('./templates/apply_rules');

  ApplyRulesView.prototype.className = 'card card-body';

  ApplyRulesView.prototype.behaviors = {
    CancelButton: {},
    Confirmations: {
      message: 'Are you sure you want to apply rules to this dataset?',
      confirmIcon: 'fa-check-circle-o',
      confirmText: 'Apply Rules',
      confirmCss: 'btn-success'
    },
    Flashes: {
      success: {
        message: 'Successfully applied rules to dataset.'
      }
    }
  };

  ApplyRulesView.prototype.ui = {
    confirmationTrigger: '[data-click=submit]'
  };

  ApplyRulesView.prototype.onCancel = function() {
    return this.trigger('cancel');
  };

  ApplyRulesView.prototype.onConfirmed = function() {
    this.disableCancel();
    return this.model.fetchDatapoints().then((function(_this) {
      return function(datapoints) {
        return _this.collection.applyRules(datapoints).then(function() {
          return _this.model.regenerateFacets().then(function() {
            Backbone.Radio.channel('loading').trigger('hide');
            _this.flashSuccess();
            return _this.trigger('success');
          });
        });
      };
    })(this));
  };

  return ApplyRulesView;

})(Mn.LayoutView);

module.exports = ApplyRulesView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvYXBwbHlSdWxlcy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9hcHBseVJ1bGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLGNBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7MkJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx5QkFBUjs7MkJBQ1YsU0FBQSxHQUFXOzsyQkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUdBLGFBQUEsRUFDRTtNQUFBLE9BQUEsRUFBYyx1REFBZDtNQUNBLFdBQUEsRUFBYyxtQkFEZDtNQUVBLFdBQUEsRUFBYyxhQUZkO01BR0EsVUFBQSxFQUFjLGFBSGQ7S0FKRjtJQVNBLE9BQUEsRUFDRTtNQUFBLE9BQUEsRUFDRTtRQUFBLE9BQUEsRUFBVSx3Q0FBVjtPQURGO0tBVkY7OzsyQkFhRixFQUFBLEdBQ0U7SUFBQSxtQkFBQSxFQUFzQixxQkFBdEI7OzsyQkFFRixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxPQUFELENBQVMsUUFBVDtFQURROzsyQkFHVixXQUFBLEdBQWEsU0FBQTtJQUVYLElBQUMsQ0FBQSxhQUFELENBQUE7V0FFQSxJQUFDLENBQUEsS0FBSyxDQUFDLGVBQVAsQ0FBQSxDQUF3QixDQUFDLElBQXpCLENBQThCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxVQUFEO2VBRTVCLEtBQUMsQ0FBQSxVQUFVLENBQUMsVUFBWixDQUF1QixVQUF2QixDQUFrQyxDQUFDLElBQW5DLENBQXdDLFNBQUE7aUJBRXRDLEtBQUMsQ0FBQSxLQUFLLENBQUMsZ0JBQVAsQ0FBQSxDQUF5QixDQUFDLElBQTFCLENBQStCLFNBQUE7WUFHN0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUM7WUFHQSxLQUFDLENBQUEsWUFBRCxDQUFBO21CQUdBLEtBQUMsQ0FBQSxPQUFELENBQVMsU0FBVDtVQVQ2QixDQUEvQjtRQUZzQyxDQUF4QztNQUY0QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBOUI7RUFKVzs7OztHQXhCYyxFQUFFLENBQUM7O0FBNkNoQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/apply_rules":87}],69:[function(require,module,exports){
var ConstraintForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ConstraintForm = (function(superClass) {
  extend(ConstraintForm, superClass);

  function ConstraintForm() {
    return ConstraintForm.__super__.constructor.apply(this, arguments);
  }

  ConstraintForm.prototype.className = 'row';

  ConstraintForm.prototype.template = require('./templates/constraint_form');

  ConstraintForm.prototype.operationOptions = [['exists', 'Exists'], ['exact_match', 'Exact Match'], ['starts_with', 'Starts With'], ['ends_with', 'Ends With'], ['contains', 'Contains'], ['does_not_contain', 'Does Not Contain'], ['contains_case_sensitive', 'Contains (case sensitive)']];

  ConstraintForm.prototype.templateHelpers = function() {
    var helpers;
    return helpers = {
      sourceOptions: this.options.sourceOptions,
      operationOptions: this.operationOptions
    };
  };

  ConstraintForm.prototype.onRender = function() {
    return Backbone.Syphon.deserialize(this, this.model.attributes);
  };

  return ConstraintForm;

})(Mn.LayoutView);

module.exports = ConstraintForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvY29uc3RyYWludEZvcm0uY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvY29uc3RyYWludEZvcm0uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsY0FBQTtFQUFBOzs7QUFBTTs7Ozs7OzsyQkFDSixTQUFBLEdBQVc7OzJCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsNkJBQVI7OzJCQVFWLGdCQUFBLEdBQWtCLENBQ2hCLENBQUMsUUFBRCxFQUE0QixRQUE1QixDQURnQixFQUVoQixDQUFDLGFBQUQsRUFBNEIsYUFBNUIsQ0FGZ0IsRUFHaEIsQ0FBQyxhQUFELEVBQTRCLGFBQTVCLENBSGdCLEVBSWhCLENBQUMsV0FBRCxFQUE0QixXQUE1QixDQUpnQixFQUtoQixDQUFDLFVBQUQsRUFBNEIsVUFBNUIsQ0FMZ0IsRUFNaEIsQ0FBQyxrQkFBRCxFQUE0QixrQkFBNUIsQ0FOZ0IsRUFPaEIsQ0FBQyx5QkFBRCxFQUE0QiwyQkFBNUIsQ0FQZ0I7OzJCQVVsQixlQUFBLEdBQWlCLFNBQUE7QUFDZixRQUFBO0FBQUEsV0FBTyxPQUFBLEdBQ0w7TUFBQSxhQUFBLEVBQWtCLElBQUMsQ0FBQSxPQUFPLENBQUMsYUFBM0I7TUFDQSxnQkFBQSxFQUFrQixJQUFDLENBQUEsZ0JBRG5COztFQUZhOzsyQkFLakIsUUFBQSxHQUFVLFNBQUE7V0FDUixRQUFRLENBQUMsTUFBTSxDQUFDLFdBQWhCLENBQTZCLElBQTdCLEVBQWdDLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBdkM7RUFEUTs7OztHQXpCaUIsRUFBRSxDQUFDOztBQThCaEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/constraint_form":88}],70:[function(require,module,exports){
var ActionForm, ConstraintForm, DefinitionForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ConstraintForm = require('./constraintForm');

ActionForm = require('./actionForm');

DefinitionForm = (function(superClass) {
  extend(DefinitionForm, superClass);

  function DefinitionForm() {
    return DefinitionForm.__super__.constructor.apply(this, arguments);
  }

  DefinitionForm.prototype.className = 'row';

  DefinitionForm.prototype.template = require('./templates/definition_form');

  DefinitionForm.prototype.behaviors = {
    CancelButton: {},
    SubmitButton: {}
  };

  DefinitionForm.prototype.regions = {
    constraintRegion: '[data-region=constraint]',
    actionRegion: '[data-region=action]'
  };

  DefinitionForm.prototype.templateHelpers = function() {
    return {
      isNew: this.options.isNew
    };
  };

  DefinitionForm.prototype.onRender = function() {
    this.constraintRegion.show(new ConstraintForm({
      model: this.model,
      sourceOptions: this.options.sourceOptions
    }));
    return this.actionRegion.show(new ActionForm({
      model: this.model,
      isNew: this.options.isNew,
      sourceOptions: this.options.sourceOptions
    }));
  };

  DefinitionForm.prototype.onCancel = function(e) {
    e.stopPropagation();
    return this.trigger('cancel', this);
  };

  DefinitionForm.prototype.onSubmit = function(e) {
    var data;
    e.stopPropagation();
    data = Backbone.Syphon.serialize(this);
    this.model.set(data);
    return this.trigger('submit', this);
  };

  return DefinitionForm;

})(Mn.LayoutView);

module.exports = DefinitionForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkZvcm0uY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkZvcm0uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsMENBQUE7RUFBQTs7O0FBQUEsY0FBQSxHQUFpQixPQUFBLENBQVEsa0JBQVI7O0FBQ2pCLFVBQUEsR0FBYSxPQUFBLENBQVEsY0FBUjs7QUFJUDs7Ozs7OzsyQkFDSixTQUFBLEdBQVc7OzJCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsNkJBQVI7OzJCQUVWLFNBQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxFQUFkO0lBQ0EsWUFBQSxFQUFjLEVBRGQ7OzsyQkFHRixPQUFBLEdBQ0U7SUFBQSxnQkFBQSxFQUFrQiwwQkFBbEI7SUFDQSxZQUFBLEVBQWtCLHNCQURsQjs7OzJCQUdGLGVBQUEsR0FBaUIsU0FBQTtBQUNmLFdBQU87TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFsQjs7RUFEUTs7MkJBR2pCLFFBQUEsR0FBVSxTQUFBO0lBQ1IsSUFBQyxDQUFBLGdCQUFnQixDQUFDLElBQWxCLENBQXVCLElBQUksY0FBSixDQUFtQjtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixhQUFBLEVBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxhQUF6QztLQUFuQixDQUF2QjtXQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxDQUFtQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixLQUFBLEVBQU8sSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFqQztNQUF3QyxhQUFBLEVBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxhQUFoRTtLQUFmLENBQW5CO0VBRlE7OzJCQUlWLFFBQUEsR0FBVSxTQUFDLENBQUQ7SUFDUixDQUFDLENBQUMsZUFBRixDQUFBO1dBQ0EsSUFBQyxDQUFBLE9BQUQsQ0FBUyxRQUFULEVBQW1CLElBQW5CO0VBRlE7OzJCQUlWLFFBQUEsR0FBVSxTQUFDLENBQUQ7QUFDUixRQUFBO0lBQUEsQ0FBQyxDQUFDLGVBQUYsQ0FBQTtJQUdBLElBQUEsR0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQWhCLENBQTBCLElBQTFCO0lBS1AsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBWDtXQUdBLElBQUMsQ0FBQSxPQUFELENBQVMsUUFBVCxFQUFtQixJQUFuQjtFQVpROzs7O0dBdkJpQixFQUFFLENBQUM7O0FBdUNoQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./actionForm":67,"./constraintForm":69,"./templates/definition_form":91}],71:[function(require,module,exports){
var DefinitionChild, DefinitionEmpty, DefinitionLayout, DefinitionList, DefinitionViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DefinitionViewer = require('./definitionViewer');

DefinitionEmpty = (function(superClass) {
  extend(DefinitionEmpty, superClass);

  function DefinitionEmpty() {
    return DefinitionEmpty.__super__.constructor.apply(this, arguments);
  }

  DefinitionEmpty.prototype.template = require('./templates/definition_empty');

  DefinitionEmpty.prototype.className = 'list-group-item list-group-item-warning';

  return DefinitionEmpty;

})(Mn.LayoutView);

DefinitionChild = (function(superClass) {
  extend(DefinitionChild, superClass);

  function DefinitionChild() {
    return DefinitionChild.__super__.constructor.apply(this, arguments);
  }

  DefinitionChild.prototype.template = require('./templates/definition_child');

  DefinitionChild.prototype.className = 'list-group-item';

  DefinitionChild.prototype.behaviors = {
    SortableChild: {},
    SelectableChild: {}
  };

  DefinitionChild.prototype.modelEvents = {
    'change:order': 'onReordered'
  };

  DefinitionChild.prototype.onReordered = function() {
    return this.render();
  };

  return DefinitionChild;

})(Mn.LayoutView);

DefinitionList = (function(superClass) {
  extend(DefinitionList, superClass);

  function DefinitionList() {
    return DefinitionList.__super__.constructor.apply(this, arguments);
  }

  DefinitionList.prototype.className = 'list-group';

  DefinitionList.prototype.childView = DefinitionChild;

  DefinitionList.prototype.emptyView = DefinitionEmpty;

  DefinitionList.prototype.behaviors = {
    SortableList: {}
  };

  DefinitionList.prototype.collectionEvents = {
    'remove': 'onCollectionRemove',
    'add': 'onCollectionRemove'
  };

  DefinitionList.prototype.onCollectionRemove = function() {
    var ref;
    setTimeout(this.reorderCollection, 250);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  return DefinitionList;

})(Mn.CollectionView);

DefinitionLayout = (function(superClass) {
  extend(DefinitionLayout, superClass);

  function DefinitionLayout() {
    return DefinitionLayout.__super__.constructor.apply(this, arguments);
  }

  DefinitionLayout.prototype.className = 'row';

  DefinitionLayout.prototype.template = require('./templates/definition_list_layout');

  DefinitionLayout.prototype.collectionEvents = {
    'add': 'render',
    'remove': 'render'
  };

  DefinitionLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  DefinitionLayout.prototype.onRender = function() {
    return this.showDefinitionList();
  };

  DefinitionLayout.prototype.showDefinitionList = function() {
    var listView, ref;
    listView = new DefinitionList({
      collection: this.collection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showDefinitionViewer(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  DefinitionLayout.prototype.showDefinitionViewer = function(model) {
    var definitionViewer;
    definitionViewer = new DefinitionViewer({
      model: model
    });
    definitionViewer.on('edit', (function(_this) {
      return function(view) {
        return _this.trigger('edit:definition', view.model);
      };
    })(this));
    return this.detailRegion.show(definitionViewer);
  };

  return DefinitionLayout;

})(Mn.LayoutView);

module.exports = DefinitionLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkxpc3QuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkxpc3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsb0ZBQUE7RUFBQTs7O0FBQUEsZ0JBQUEsR0FBbUIsT0FBQSxDQUFRLG9CQUFSOztBQUliOzs7Ozs7OzRCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsOEJBQVI7OzRCQUNWLFNBQUEsR0FBVzs7OztHQUZpQixFQUFFLENBQUM7O0FBTTNCOzs7Ozs7OzRCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsOEJBQVI7OzRCQUNWLFNBQUEsR0FBVzs7NEJBRVgsU0FBQSxHQUNFO0lBQUEsYUFBQSxFQUFlLEVBQWY7SUFDQSxlQUFBLEVBQWlCLEVBRGpCOzs7NEJBR0YsV0FBQSxHQUNFO0lBQUEsY0FBQSxFQUFnQixhQUFoQjs7OzRCQUVGLFdBQUEsR0FBYSxTQUFBO1dBQ1gsSUFBQyxDQUFBLE1BQUQsQ0FBQTtFQURXOzs7O0dBWGUsRUFBRSxDQUFDOztBQWlCM0I7Ozs7Ozs7MkJBQ0osU0FBQSxHQUFXOzsyQkFDWCxTQUFBLEdBQVc7OzJCQUNYLFNBQUEsR0FBVzs7MkJBRVgsU0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLEVBQWQ7OzsyQkFFRixnQkFBQSxHQUNFO0lBQUEsUUFBQSxFQUFVLG9CQUFWO0lBQ0EsS0FBQSxFQUFVLG9CQURWOzs7MkJBS0Ysa0JBQUEsR0FBb0IsU0FBQTtBQUNsQixRQUFBO0lBQUEsVUFBQSxDQUFZLElBQUMsQ0FBQSxpQkFBYixFQUFnQyxHQUFoQztzREFDaUIsQ0FBRSxPQUFuQixDQUEyQixVQUEzQjtFQUZrQjs7OztHQWRPLEVBQUUsQ0FBQzs7QUFvQjFCOzs7Ozs7OzZCQUNKLFNBQUEsR0FBVzs7NkJBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQ0FBUjs7NkJBRVYsZ0JBQUEsR0FDRTtJQUFBLEtBQUEsRUFBVSxRQUFWO0lBQ0EsUUFBQSxFQUFVLFFBRFY7Ozs2QkFHRixPQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQWMsb0JBQWQ7SUFDQSxZQUFBLEVBQWMsc0JBRGQ7Ozs2QkFHRixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxrQkFBRCxDQUFBO0VBRFE7OzZCQUdWLGtCQUFBLEdBQW9CLFNBQUE7QUFDbEIsUUFBQTtJQUFBLFFBQUEsR0FBVyxJQUFJLGNBQUosQ0FBbUI7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7S0FBbkI7SUFDWCxRQUFRLENBQUMsRUFBVCxDQUFZLG9CQUFaLEVBQWtDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxJQUFEO2VBQVUsS0FBQyxDQUFBLG9CQUFELENBQXNCLElBQUksQ0FBQyxLQUEzQjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQztJQUNBLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFpQixRQUFqQjtzREFDaUIsQ0FBRSxPQUFuQixDQUEyQixVQUEzQjtFQUprQjs7NkJBTXBCLG9CQUFBLEdBQXNCLFNBQUMsS0FBRDtBQUNwQixRQUFBO0lBQUEsZ0JBQUEsR0FBbUIsSUFBSSxnQkFBSixDQUFxQjtNQUFFLEtBQUEsRUFBTyxLQUFUO0tBQXJCO0lBQ25CLGdCQUFnQixDQUFDLEVBQWpCLENBQW9CLE1BQXBCLEVBQTRCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxJQUFEO2VBQVUsS0FBQyxDQUFBLE9BQUQsQ0FBUyxpQkFBVCxFQUE0QixJQUFJLENBQUMsS0FBakM7TUFBVjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBNUI7V0FDQSxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsZ0JBQW5CO0VBSG9COzs7O0dBckJPLEVBQUUsQ0FBQzs7QUE0QmxDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./definitionViewer":72,"./templates/definition_child":89,"./templates/definition_empty":90,"./templates/definition_list_layout":92}],72:[function(require,module,exports){
var DefinitionViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DefinitionViewer = (function(superClass) {
  extend(DefinitionViewer, superClass);

  function DefinitionViewer() {
    return DefinitionViewer.__super__.constructor.apply(this, arguments);
  }

  DefinitionViewer.prototype.className = 'row';

  DefinitionViewer.prototype.template = require('./templates/definition_viewer');

  DefinitionViewer.prototype.behaviors = {
    Confirmations: {
      message: 'Are you sure you want to discard this definition?',
      confirmIcon: 'fa-trash',
      confirmText: 'DISCARD',
      confirmCss: 'btn-danger'
    }
  };

  DefinitionViewer.prototype.ui = {
    edit: '[data-click=edit]',
    confirmationTrigger: '[data-click=discard]'
  };

  DefinitionViewer.prototype.triggers = {
    'click @ui.edit': 'edit'
  };

  DefinitionViewer.prototype.onConfirmed = function() {
    return this.model.collection.remove(this.model);
  };

  return DefinitionViewer;

})(Mn.LayoutView);

module.exports = DefinitionViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvblZpZXdlci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9kZWZpbml0aW9uVmlld2VyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLGdCQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzZCQUNKLFNBQUEsR0FBVzs7NkJBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSwrQkFBUjs7NkJBRVYsU0FBQSxHQUNFO0lBQUEsYUFBQSxFQUNFO01BQUEsT0FBQSxFQUFjLG1EQUFkO01BQ0EsV0FBQSxFQUFjLFVBRGQ7TUFFQSxXQUFBLEVBQWMsU0FGZDtNQUdBLFVBQUEsRUFBYyxZQUhkO0tBREY7Ozs2QkFNRixFQUFBLEdBQ0U7SUFBQSxJQUFBLEVBQXNCLG1CQUF0QjtJQUNBLG1CQUFBLEVBQXNCLHNCQUR0Qjs7OzZCQUdGLFFBQUEsR0FDRTtJQUFBLGdCQUFBLEVBQWtCLE1BQWxCOzs7NkJBR0YsV0FBQSxHQUFhLFNBQUE7V0FDWCxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFsQixDQUF5QixJQUFDLENBQUEsS0FBMUI7RUFEVzs7OztHQW5CZ0IsRUFBRSxDQUFDOztBQXdCbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/definition_viewer":93}],73:[function(require,module,exports){
var ExportForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ExportForm = (function(superClass) {
  extend(ExportForm, superClass);

  function ExportForm() {
    return ExportForm.__super__.constructor.apply(this, arguments);
  }

  ExportForm.prototype.template = require('./templates/export_form');

  ExportForm.prototype.className = 'card card-body';

  ExportForm.prototype.behaviors = {
    CancelButton: {},
    SubmitButton: {},
    DownloadFile: {},
    Flashes: {
      success: {
        message: 'Successfully exported Knowledge Capture.'
      }
    }
  };

  ExportForm.prototype.onCancel = function() {
    return this.trigger('cancel');
  };

  ExportForm.prototype.generateFilename = function() {
    var date, filename, label;
    label = this.model.get('label');
    label = label.toLowerCase().replace(/\s/g, '_');
    date = new Date().toJSON().slice(0, 10).replace(/-/g, '_');
    filename = [label, '_magellan_kn_rules_', date, '.json'];
    return filename.join('');
  };

  ExportForm.prototype.onSubmit = function() {
    return this.model.fetchKnowledgeRules().then((function(_this) {
      return function(knowledgeRuleCollection) {
        var content, filename, filetype;
        content = JSON.stringify(knowledgeRuleCollection.toJSON(), null, 2);
        filename = _this.generateFilename();
        filetype = 'applicaton/json';
        _this.downloadFile({
          content: content,
          type: filetype,
          filename: filename
        });
        _this.flashSuccess();
        return _this.trigger('success');
      };
    })(this));
  };

  return ExportForm;

})(Mn.LayoutView);

module.exports = ExportForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZXhwb3J0Rm9ybS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9leHBvcnRGb3JtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx5QkFBUjs7dUJBQ1YsU0FBQSxHQUFXOzt1QkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUNBLFlBQUEsRUFBYyxFQURkO0lBRUEsWUFBQSxFQUFjLEVBRmQ7SUFHQSxPQUFBLEVBQ0U7TUFBQSxPQUFBLEVBQ0U7UUFBQSxPQUFBLEVBQVUsMENBQVY7T0FERjtLQUpGOzs7dUJBT0YsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFDLENBQUEsT0FBRCxDQUFTLFFBQVQ7RUFEUTs7dUJBSVYsZ0JBQUEsR0FBa0IsU0FBQTtBQUNoQixRQUFBO0lBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVg7SUFDUixLQUFBLEdBQVEsS0FBSyxDQUFDLFdBQU4sQ0FBQSxDQUFtQixDQUFDLE9BQXBCLENBQTRCLEtBQTVCLEVBQW1DLEdBQW5DO0lBQ1IsSUFBQSxHQUFRLElBQUksSUFBSixDQUFBLENBQVUsQ0FBQyxNQUFYLENBQUEsQ0FBbUIsQ0FBQyxLQUFwQixDQUEwQixDQUExQixFQUE0QixFQUE1QixDQUErQixDQUFDLE9BQWhDLENBQXdDLElBQXhDLEVBQThDLEdBQTlDO0lBQ1IsUUFBQSxHQUFXLENBQUMsS0FBRCxFQUFRLHFCQUFSLEVBQStCLElBQS9CLEVBQXFDLE9BQXJDO0FBQ1gsV0FBTyxRQUFRLENBQUMsSUFBVCxDQUFjLEVBQWQ7RUFMUzs7dUJBT2xCLFFBQUEsR0FBVSxTQUFBO1dBQ1IsSUFBQyxDQUFBLEtBQUssQ0FBQyxtQkFBUCxDQUFBLENBQTRCLENBQUMsSUFBN0IsQ0FBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLHVCQUFEO0FBR2hDLFlBQUE7UUFBQSxPQUFBLEdBQVksSUFBSSxDQUFDLFNBQUwsQ0FBZSx1QkFBdUIsQ0FBQyxNQUF4QixDQUFBLENBQWYsRUFBaUQsSUFBakQsRUFBdUQsQ0FBdkQ7UUFDWixRQUFBLEdBQVksS0FBQyxDQUFBLGdCQUFELENBQUE7UUFDWixRQUFBLEdBQVk7UUFHWixLQUFDLENBQUEsWUFBRCxDQUFjO1VBQUUsT0FBQSxFQUFTLE9BQVg7VUFBb0IsSUFBQSxFQUFNLFFBQTFCO1VBQW9DLFFBQUEsRUFBVSxRQUE5QztTQUFkO1FBR0EsS0FBQyxDQUFBLFlBQUQsQ0FBQTtlQUdBLEtBQUMsQ0FBQSxPQUFELENBQVMsU0FBVDtNQWRnQztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEM7RUFEUTs7OztHQXZCYSxFQUFFLENBQUM7O0FBMEM1QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/export_form":94}],74:[function(require,module,exports){
var ImportForm, UploadWidget,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

ImportForm = (function(superClass) {
  extend(ImportForm, superClass);

  function ImportForm() {
    this.onFileUpload = bind(this.onFileUpload, this);
    return ImportForm.__super__.constructor.apply(this, arguments);
  }

  ImportForm.prototype.template = require('./templates/import_form');

  ImportForm.prototype.className = 'card card-body';

  ImportForm.prototype.behaviors = {
    CancelButton: {},
    SubmitButton: {},
    DownloadFile: {},
    Flashes: {
      success: {
        message: 'Successfully imported Knowledge Capture.'
      }
    }
  };

  ImportForm.prototype.regions = {
    uploadRegion: '[data-region=upload]'
  };

  ImportForm.prototype.onCancel = function() {
    return this.trigger('cancel');
  };

  ImportForm.prototype.onRender = function() {
    var uploadWidget;
    uploadWidget = new UploadWidget();
    uploadWidget.on('file:loaded', this.onFileUpload);
    this.uploadRegion.show(uploadWidget);
    return this.disableSubmit();
  };

  ImportForm.prototype.onFileUpload = function(uploadedText) {
    this.importedRules = JSON.parse(uploadedText);
    return this.enableSubmit();
  };

  ImportForm.prototype.onSubmit = function() {
    return this.model.fetchKnowledgeRules().then((function(_this) {
      return function(knowledgeRuleCollection) {
        var buildNewRule, definition, i, j, len, len1, order, ref, ref1, rule;
        order = knowledgeRuleCollection.length + 1;
        ref = _this.importedRules;
        for (i = 0, len = ref.length; i < len; i++) {
          rule = ref[i];
          rule.dataset_id = _this.model.id;
          rule.order = order;
          order = order + 1;
          rule.id = buildUniqueId('kn_');
          ref1 = rule.definitions;
          for (j = 0, len1 = ref1.length; j < len1; j++) {
            definition = ref1[j];
            definition.id = buildUniqueId('cn_');
          }
        }
        buildNewRule = function(rule) {
          var importedRule;
          importedRule = new knowledgeRuleCollection.model(rule);
          return importedRule.save();
        };
        return Promise.each(_this.importedRules, buildNewRule).then(function() {
          knowledgeRuleCollection.add(_this.importedRules);
          _this.flashSuccess();
          return _this.trigger('success');
        });
      };
    })(this));
  };

  return ImportForm;

})(Mn.LayoutView);

module.exports = ImportForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvaW1wb3J0Rm9ybS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9pbXBvcnRGb3JtLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLHdCQUFBO0VBQUE7Ozs7QUFBQSxZQUFBLEdBQWUsT0FBQSxDQUFRLG1DQUFSOztBQUlUOzs7Ozs7Ozt1QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLHlCQUFSOzt1QkFDVixTQUFBLEdBQVc7O3VCQUVYLFNBQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxFQUFkO0lBQ0EsWUFBQSxFQUFjLEVBRGQ7SUFFQSxZQUFBLEVBQWMsRUFGZDtJQUdBLE9BQUEsRUFDRTtNQUFBLE9BQUEsRUFDRTtRQUFBLE9BQUEsRUFBVSwwQ0FBVjtPQURGO0tBSkY7Ozt1QkFPRixPQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsc0JBQWQ7Ozt1QkFFRixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxPQUFELENBQVMsUUFBVDtFQURROzt1QkFHVixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxZQUFBLEdBQWUsSUFBSSxZQUFKLENBQUE7SUFDZixZQUFZLENBQUMsRUFBYixDQUFnQixhQUFoQixFQUErQixJQUFDLENBQUEsWUFBaEM7SUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsWUFBbkI7V0FDQSxJQUFDLENBQUEsYUFBRCxDQUFBO0VBSlE7O3VCQVFWLFlBQUEsR0FBYyxTQUFDLFlBQUQ7SUFHWixJQUFDLENBQUEsYUFBRCxHQUFpQixJQUFJLENBQUMsS0FBTCxDQUFXLFlBQVg7V0FHakIsSUFBQyxDQUFBLFlBQUQsQ0FBQTtFQU5ZOzt1QkFTZCxRQUFBLEdBQVUsU0FBQTtXQUdSLElBQUMsQ0FBQSxLQUFLLENBQUMsbUJBQVAsQ0FBQSxDQUE0QixDQUFDLElBQTdCLENBQWtDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyx1QkFBRDtBQU1oQyxZQUFBO1FBQUEsS0FBQSxHQUFRLHVCQUF1QixDQUFDLE1BQXhCLEdBQWlDO0FBR3pDO0FBQUEsYUFBQSxxQ0FBQTs7VUFHRSxJQUFJLENBQUMsVUFBTCxHQUFrQixLQUFDLENBQUEsS0FBSyxDQUFDO1VBR3pCLElBQUksQ0FBQyxLQUFMLEdBQWE7VUFDYixLQUFBLEdBQVEsS0FBQSxHQUFRO1VBR2hCLElBQUksQ0FBQyxFQUFMLEdBQVUsYUFBQSxDQUFjLEtBQWQ7QUFHVjtBQUFBLGVBQUEsd0NBQUE7O1lBQ0UsVUFBVSxDQUFDLEVBQVgsR0FBZ0IsYUFBQSxDQUFjLEtBQWQ7QUFEbEI7QUFiRjtRQW9CQSxZQUFBLEdBQWUsU0FBQyxJQUFEO0FBR2IsY0FBQTtVQUFBLFlBQUEsR0FBZSxJQUFJLHVCQUF1QixDQUFDLEtBQTVCLENBQWtDLElBQWxDO0FBR2YsaUJBQU8sWUFBWSxDQUFDLElBQWIsQ0FBQTtRQU5NO2VBU2YsT0FBTyxDQUFDLElBQVIsQ0FBYSxLQUFDLENBQUEsYUFBZCxFQUE2QixZQUE3QixDQUNBLENBQUMsSUFERCxDQUNNLFNBQUE7VUFHSix1QkFBdUIsQ0FBQyxHQUF4QixDQUE0QixLQUFDLENBQUEsYUFBN0I7VUFHQSxLQUFDLENBQUEsWUFBRCxDQUFBO2lCQUdBLEtBQUMsQ0FBQSxPQUFELENBQVMsU0FBVDtRQVRJLENBRE47TUF0Q2dDO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQztFQUhROzs7O0dBbkNhLEVBQUUsQ0FBQzs7QUEwRjVCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"../../../base/views/upload/upload":36,"./templates/import_form":95}],75:[function(require,module,exports){
var ApplyRulesView, ExportForm, ImportForm, ResetRulesView, RuleForm, RuleLayout, RuleList,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RuleList = require('./ruleList');

RuleForm = require('./ruleForm');

ExportForm = require('./exportForm');

ImportForm = require('./importForm');

ApplyRulesView = require('./applyRules');

ResetRulesView = require('./resetRules');

RuleLayout = (function(superClass) {
  extend(RuleLayout, superClass);

  function RuleLayout() {
    return RuleLayout.__super__.constructor.apply(this, arguments);
  }

  RuleLayout.prototype.className = 'container-fluid';

  RuleLayout.prototype.template = require('./templates/layout');

  RuleLayout.prototype.ui = {
    "export": '[data-click=export]',
    "import": '[data-click=import]',
    newRule: '[data-click=new]',
    apply: '[data-click=apply]',
    reset: '[data-click=reset]'
  };

  RuleLayout.prototype.events = {
    'click @ui.export': 'showExportForm',
    'click @ui.import': 'showImportForm',
    'click @ui.newRule': 'showRuleForm',
    'click @ui.apply': 'applyRules',
    'click @ui.reset': 'resetDataset'
  };

  RuleLayout.prototype.regions = {
    contentRegion: '[data-region=content]'
  };

  RuleLayout.prototype.onRender = function() {
    return this.showRuleList();
  };

  RuleLayout.prototype.fetchSourceOptions = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.model.fetchFacets().then(function(facetCollection) {
          var attrs, labels, sourceOptions;
          attrs = facetCollection.pluck('attribute');
          labels = facetCollection.pluck('label');
          sourceOptions = _.zip(attrs, labels);
          return resolve(sourceOptions);
        });
      };
    })(this));
  };

  RuleLayout.prototype.showRuleList = function() {
    var ruleList;
    ruleList = new RuleList({
      collection: this.collection
    });
    ruleList.on('edit', (function(_this) {
      return function(ruleModel) {
        return _this.showRuleForm(ruleModel);
      };
    })(this));
    return this.contentRegion.show(ruleList);
  };

  RuleLayout.prototype.buildNewRule = function() {
    var params;
    params = {
      id: window.buildUniqueId('kn_'),
      order: this.collection.length + 1,
      dataset_id: this.model.id
    };
    return new this.collection.model(params);
  };

  RuleLayout.prototype.showRuleForm = function(model) {
    var formModel;
    if (model.currentTarget) {
      model = null;
    }
    formModel = model || this.buildNewRule();
    return this.fetchSourceOptions().then((function(_this) {
      return function(sourceOptions) {
        var formView;
        formView = new RuleForm({
          model: formModel,
          collection: formModel.get('definitions'),
          sourceOptions: sourceOptions
        });
        formView.on('cancel', function() {
          return _this.showRuleList();
        });
        formView.on('sync', function(model) {
          _this.collection.add(model);
          return _this.showRuleList();
        });
        return _this.contentRegion.show(formView);
      };
    })(this));
  };

  RuleLayout.prototype.applyRules = function() {
    var applyView;
    applyView = new ApplyRulesView({
      model: this.model,
      collection: this.collection
    });
    applyView.on('cancel', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    applyView.on('success', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    return this.contentRegion.show(applyView);
  };

  RuleLayout.prototype.resetDataset = function() {
    var resetView;
    resetView = new ResetRulesView({
      model: this.model,
      target_object: this.collection.target_object
    });
    resetView.on('cancel', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    resetView.on('success', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    return this.contentRegion.show(resetView);
  };

  RuleLayout.prototype.showExportForm = function() {
    var exportForm;
    exportForm = new ExportForm({
      model: this.model
    });
    exportForm.on('cancel', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    exportForm.on('success', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    return this.contentRegion.show(exportForm);
  };

  RuleLayout.prototype.showImportForm = function() {
    var importForm;
    importForm = new ImportForm({
      model: this.model
    });
    importForm.on('cancel', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    importForm.on('success', (function(_this) {
      return function() {
        return _this.showRuleList();
      };
    })(this));
    return this.contentRegion.show(importForm);
  };

  return RuleLayout;

})(Mn.LayoutView);

module.exports = RuleLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvbGF5b3V0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL2xheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxzRkFBQTtFQUFBOzs7QUFBQSxRQUFBLEdBQWtCLE9BQUEsQ0FBUSxZQUFSOztBQUNsQixRQUFBLEdBQWtCLE9BQUEsQ0FBUSxZQUFSOztBQUNsQixVQUFBLEdBQWtCLE9BQUEsQ0FBUSxjQUFSOztBQUNsQixVQUFBLEdBQWtCLE9BQUEsQ0FBUSxjQUFSOztBQUNsQixjQUFBLEdBQWtCLE9BQUEsQ0FBUSxjQUFSOztBQUNsQixjQUFBLEdBQWtCLE9BQUEsQ0FBUSxjQUFSOztBQUlaOzs7Ozs7O3VCQUNKLFNBQUEsR0FBVzs7dUJBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7dUJBRVYsRUFBQSxHQUNFO0lBQUEsQ0FBQSxNQUFBLENBQUEsRUFBVSxxQkFBVjtJQUNBLENBQUEsTUFBQSxDQUFBLEVBQVUscUJBRFY7SUFFQSxPQUFBLEVBQVUsa0JBRlY7SUFHQSxLQUFBLEVBQVUsb0JBSFY7SUFJQSxLQUFBLEVBQVUsb0JBSlY7Ozt1QkFNRixNQUFBLEdBQ0U7SUFBQSxrQkFBQSxFQUFzQixnQkFBdEI7SUFDQSxrQkFBQSxFQUFzQixnQkFEdEI7SUFFQSxtQkFBQSxFQUFzQixjQUZ0QjtJQUdBLGlCQUFBLEVBQXNCLFlBSHRCO0lBSUEsaUJBQUEsRUFBc0IsY0FKdEI7Ozt1QkFNRixPQUFBLEdBQ0U7SUFBQSxhQUFBLEVBQWUsdUJBQWY7Ozt1QkFFRixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxZQUFELENBQUE7RUFEUTs7dUJBT1Ysa0JBQUEsR0FBb0IsU0FBQTtBQUdsQixXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtlQUdqQixLQUFDLENBQUEsS0FBSyxDQUFDLFdBQVAsQ0FBQSxDQUFvQixDQUFDLElBQXJCLENBQTBCLFNBQUMsZUFBRDtBQUl4QixjQUFBO1VBQUEsS0FBQSxHQUFRLGVBQWUsQ0FBQyxLQUFoQixDQUFzQixXQUF0QjtVQUNSLE1BQUEsR0FBUyxlQUFlLENBQUMsS0FBaEIsQ0FBc0IsT0FBdEI7VUFHVCxhQUFBLEdBQWdCLENBQUMsQ0FBQyxHQUFGLENBQU0sS0FBTixFQUFhLE1BQWI7QUFHaEIsaUJBQU8sT0FBQSxDQUFRLGFBQVI7UUFYaUIsQ0FBMUI7TUFIaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVo7RUFIVzs7dUJBcUJwQixZQUFBLEdBQWMsU0FBQTtBQUNaLFFBQUE7SUFBQSxRQUFBLEdBQVcsSUFBSSxRQUFKLENBQWE7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7S0FBYjtJQUNYLFFBQVEsQ0FBQyxFQUFULENBQVksTUFBWixFQUFvQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsU0FBRDtlQUFlLEtBQUMsQ0FBQSxZQUFELENBQWMsU0FBZDtNQUFmO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFwQjtXQUNBLElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixRQUFwQjtFQUhZOzt1QkFTZCxZQUFBLEdBQWMsU0FBQTtBQUNaLFFBQUE7SUFBQSxNQUFBLEdBQ0U7TUFBQSxFQUFBLEVBQVksTUFBTSxDQUFDLGFBQVAsQ0FBcUIsS0FBckIsQ0FBWjtNQUNBLEtBQUEsRUFBWSxJQUFDLENBQUEsVUFBVSxDQUFDLE1BQVosR0FBcUIsQ0FEakM7TUFFQSxVQUFBLEVBQVksSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUZuQjs7QUFJRixXQUFPLElBQUksSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUFoQixDQUFzQixNQUF0QjtFQU5LOzt1QkFXZCxZQUFBLEdBQWMsU0FBQyxLQUFEO0FBR1osUUFBQTtJQUFBLElBQWdCLEtBQUssQ0FBQyxhQUF0QjtNQUFBLEtBQUEsR0FBUSxLQUFSOztJQUdBLFNBQUEsR0FBWSxLQUFBLElBQVMsSUFBQyxDQUFBLFlBQUQsQ0FBQTtXQUdyQixJQUFDLENBQUEsa0JBQUQsQ0FBQSxDQUFxQixDQUFDLElBQXRCLENBQTJCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxhQUFEO0FBR3pCLFlBQUE7UUFBQSxRQUFBLEdBQVcsSUFBSSxRQUFKLENBQWE7VUFBRSxLQUFBLEVBQU8sU0FBVDtVQUFvQixVQUFBLEVBQVksU0FBUyxDQUFDLEdBQVYsQ0FBYyxhQUFkLENBQWhDO1VBQThELGFBQUEsRUFBZSxhQUE3RTtTQUFiO1FBR1gsUUFBUSxDQUFDLEVBQVQsQ0FBWSxRQUFaLEVBQXNCLFNBQUE7aUJBQUcsS0FBQyxDQUFBLFlBQUQsQ0FBQTtRQUFILENBQXRCO1FBR0EsUUFBUSxDQUFDLEVBQVQsQ0FBWSxNQUFaLEVBQW9CLFNBQUMsS0FBRDtVQUdsQixLQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0IsS0FBaEI7aUJBR0EsS0FBQyxDQUFBLFlBQUQsQ0FBQTtRQU5rQixDQUFwQjtlQVNBLEtBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixRQUFwQjtNQWxCeUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTNCO0VBVFk7O3VCQStCZCxVQUFBLEdBQVksU0FBQTtBQUNWLFFBQUE7SUFBQSxTQUFBLEdBQVksSUFBSSxjQUFKLENBQW1CO01BQUUsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUFWO01BQWlCLFVBQUEsRUFBWSxJQUFDLENBQUEsVUFBOUI7S0FBbkI7SUFDWixTQUFTLENBQUMsRUFBVixDQUFhLFFBQWIsRUFBdUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsS0FBQyxDQUFBLFlBQUQsQ0FBQTtNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF2QjtJQUNBLFNBQVMsQ0FBQyxFQUFWLENBQWEsU0FBYixFQUF3QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsWUFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXhCO1dBQ0EsSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLFNBQXBCO0VBSlU7O3VCQVFaLFlBQUEsR0FBYyxTQUFBO0FBQ1osUUFBQTtJQUFBLFNBQUEsR0FBWSxJQUFJLGNBQUosQ0FBbUI7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7TUFBaUIsYUFBQSxFQUFlLElBQUMsQ0FBQSxVQUFVLENBQUMsYUFBNUM7S0FBbkI7SUFDWixTQUFTLENBQUMsRUFBVixDQUFhLFFBQWIsRUFBdUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsS0FBQyxDQUFBLFlBQUQsQ0FBQTtNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF2QjtJQUNBLFNBQVMsQ0FBQyxFQUFWLENBQWEsU0FBYixFQUF3QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsWUFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXhCO1dBQ0EsSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLFNBQXBCO0VBSlk7O3VCQVFkLGNBQUEsR0FBZ0IsU0FBQTtBQUNkLFFBQUE7SUFBQSxVQUFBLEdBQWEsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZjtJQUNiLFVBQVUsQ0FBQyxFQUFYLENBQWMsUUFBZCxFQUF3QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsWUFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXhCO0lBQ0EsVUFBVSxDQUFDLEVBQVgsQ0FBYyxTQUFkLEVBQXlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxZQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBekI7V0FDQSxJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsVUFBcEI7RUFKYzs7dUJBUWhCLGNBQUEsR0FBZ0IsU0FBQTtBQUNkLFFBQUE7SUFBQSxVQUFBLEdBQWEsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZjtJQUNiLFVBQVUsQ0FBQyxFQUFYLENBQWMsUUFBZCxFQUF3QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsWUFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXhCO0lBQ0EsVUFBVSxDQUFDLEVBQVgsQ0FBYyxTQUFkLEVBQXlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxZQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBekI7V0FDQSxJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsVUFBcEI7RUFKYzs7OztHQTVITyxFQUFFLENBQUM7O0FBb0k1QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./applyRules":68,"./exportForm":73,"./importForm":74,"./resetRules":76,"./ruleForm":77,"./ruleList":78,"./templates/layout":96}],76:[function(require,module,exports){
var ResetRulesView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ResetRulesView = (function(superClass) {
  extend(ResetRulesView, superClass);

  function ResetRulesView() {
    return ResetRulesView.__super__.constructor.apply(this, arguments);
  }

  ResetRulesView.prototype.template = require('./templates/reset_rules');

  ResetRulesView.prototype.className = 'card card-body';

  ResetRulesView.prototype.behaviors = {
    CancelButton: {},
    Confirmations: {
      message: 'Are you sure you want to reset this dataset?',
      confirmIcon: 'fa-refresh',
      confirmText: 'RESET',
      confirmCss: 'btn-danger'
    },
    Flashes: {
      success: {
        message: 'Successfully reset dataset.'
      }
    }
  };

  ResetRulesView.prototype.ui = {
    confirmationTrigger: '[data-click=submit]'
  };

  ResetRulesView.prototype.onCancel = function() {
    return this.trigger('cancel');
  };

  ResetRulesView.prototype.onConfirmed = function() {
    return this.model.fetchDatapoints().then((function(_this) {
      return function(datapoints) {
        return datapoints.resetTargetObject(_this.options.target_object).then(function() {
          return _this.model.regenerateFacets().then(function() {
            Backbone.Radio.channel('loading').trigger('hide');
            _this.flashSuccess();
            return _this.trigger('success');
          });
        });
      };
    })(this));
  };

  return ResetRulesView;

})(Mn.LayoutView);

module.exports = ResetRulesView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcmVzZXRSdWxlcy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9yZXNldFJ1bGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxJQUFBLGNBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7MkJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx5QkFBUjs7MkJBQ1YsU0FBQSxHQUFXOzsyQkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUVBLGFBQUEsRUFDRTtNQUFBLE9BQUEsRUFBYyw4Q0FBZDtNQUNBLFdBQUEsRUFBYyxZQURkO01BRUEsV0FBQSxFQUFjLE9BRmQ7TUFHQSxVQUFBLEVBQWMsWUFIZDtLQUhGO0lBUUEsT0FBQSxFQUNFO01BQUEsT0FBQSxFQUNFO1FBQUEsT0FBQSxFQUFVLDZCQUFWO09BREY7S0FURjs7OzJCQVlGLEVBQUEsR0FDRTtJQUFBLG1CQUFBLEVBQXNCLHFCQUF0Qjs7OzJCQUVGLFFBQUEsR0FBVSxTQUFBO1dBQ1IsSUFBQyxDQUFBLE9BQUQsQ0FBUyxRQUFUO0VBRFE7OzJCQUdWLFdBQUEsR0FBYSxTQUFBO1dBQ1gsSUFBQyxDQUFBLEtBQUssQ0FBQyxlQUFQLENBQUEsQ0FBd0IsQ0FBQyxJQUF6QixDQUE4QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsVUFBRDtlQUU1QixVQUFVLENBQUMsaUJBQVgsQ0FBNkIsS0FBQyxDQUFBLE9BQU8sQ0FBQyxhQUF0QyxDQUFvRCxDQUFDLElBQXJELENBQTBELFNBQUE7aUJBRXhELEtBQUMsQ0FBQSxLQUFLLENBQUMsZ0JBQVAsQ0FBQSxDQUF5QixDQUFDLElBQTFCLENBQStCLFNBQUE7WUFHN0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUM7WUFHQSxLQUFDLENBQUEsWUFBRCxDQUFBO21CQUdBLEtBQUMsQ0FBQSxPQUFELENBQVMsU0FBVDtVQVQ2QixDQUEvQjtRQUZ3RCxDQUExRDtNQUY0QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBOUI7RUFEVzs7OztHQXZCYyxFQUFFLENBQUM7O0FBeUNoQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/reset_rules":98}],77:[function(require,module,exports){
var DefinitionForm, DefinitionList, OntologySelector, RuleForm,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DefinitionForm = require('./definitionForm');

DefinitionList = require('./definitionList');

OntologySelector = (function(superClass) {
  extend(OntologySelector, superClass);

  function OntologySelector() {
    this.initAttributeSelector = bind(this.initAttributeSelector, this);
    return OntologySelector.__super__.constructor.apply(this, arguments);
  }

  OntologySelector.prototype.className = 'row';

  OntologySelector.prototype.template = require('./templates/ontology_attribute_selector');

  OntologySelector.prototype.ui = {
    attributeSelector: '[name=target_property]'
  };

  OntologySelector.prototype.templateHelpers = function() {
    return {
      dropdown: this.options.dropdown
    };
  };

  OntologySelector.prototype.onRender = function() {
    Backbone.Syphon.deserialize(this, this.model.attributes);
    return setTimeout(this.initAttributeSelector, 200);
  };

  OntologySelector.prototype.initAttributeSelector = function() {
    return this.ui.attributeSelector.select2({
      placeholder: 'Target Attribute'
    });
  };

  return OntologySelector;

})(Mn.LayoutView);

RuleForm = (function(superClass) {
  extend(RuleForm, superClass);

  function RuleForm() {
    return RuleForm.__super__.constructor.apply(this, arguments);
  }

  RuleForm.prototype.className = 'row';

  RuleForm.prototype.template = require('./templates/rule_form');

  RuleForm.prototype.behaviors = {
    CancelButton: {},
    SubmitButton: {},
    ModelEvents: {}
  };

  RuleForm.prototype.ui = {
    addDefinition: '[data-click=add]'
  };

  RuleForm.prototype.events = {
    'click @ui.addDefinition': 'addDefinition'
  };

  RuleForm.prototype.regions = {
    ontologySelector: '[data-region=ontology-selector]',
    definitionsRegion: '[data-region=definitions]'
  };

  RuleForm.prototype.addToCollection = function(definitionModel) {
    this.collection.add(definitionModel);
    return this.showDefinitionList();
  };

  RuleForm.prototype.showOntologyAttributeSelector = function() {
    return Backbone.Radio.channel('ontology').request('attribute:dropdown').then((function(_this) {
      return function(dropdown) {
        return _this.ontologySelector.show(new OntologySelector({
          model: _this.model,
          dropdown: dropdown
        }));
      };
    })(this));
  };

  RuleForm.prototype.addDefinition = function() {
    var definitionForm, newDefinition;
    newDefinition = new this.collection.model({
      id: buildUniqueId('cn_'),
      order: this.collection.length + 1
    });
    definitionForm = new DefinitionForm({
      model: newDefinition,
      isNew: true,
      sourceOptions: this.options.sourceOptions
    });
    definitionForm.on('cancel', (function(_this) {
      return function() {
        return _this.showDefinitionList();
      };
    })(this));
    definitionForm.on('submit', (function(_this) {
      return function(view) {
        return _this.addToCollection(view.model);
      };
    })(this));
    return this.definitionsRegion.show(definitionForm);
  };

  RuleForm.prototype.editDefinition = function(definitionModel) {
    var definitionForm;
    definitionForm = new DefinitionForm({
      model: definitionModel,
      sourceOptions: this.options.sourceOptions
    });
    definitionForm.on('cancel', (function(_this) {
      return function() {
        return _this.showDefinitionList();
      };
    })(this));
    definitionForm.on('submit', (function(_this) {
      return function(view) {
        return _this.showDefinitionList();
      };
    })(this));
    return this.definitionsRegion.show(definitionForm);
  };

  RuleForm.prototype.showDefinitionList = function() {
    var definitionList;
    definitionList = new DefinitionList({
      collection: this.collection,
      header: true
    });
    definitionList.on('edit:definition', (function(_this) {
      return function(definitionModel) {
        return _this.editDefinition(definitionModel);
      };
    })(this));
    return this.definitionsRegion.show(definitionList);
  };

  RuleForm.prototype.onRender = function() {
    Backbone.Syphon.deserialize(this, this.model.attributes);
    this.showDefinitionList();
    return this.showOntologyAttributeSelector();
  };

  RuleForm.prototype.onCancel = function() {
    return this.trigger('cancel');
  };

  RuleForm.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    this.collection.sort();
    this.model.set(data);
    return this.model.save();
  };

  RuleForm.prototype.onRequest = function() {
    return console.log('onRequest');
  };

  RuleForm.prototype.onSync = function() {
    return this.trigger('sync', this.model);
  };

  RuleForm.prototype.onError = function() {
    return console.log('onError');
  };

  return RuleForm;

})(Mn.LayoutView);

module.exports = RuleForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUZvcm0uY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUZvcm0uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsMERBQUE7RUFBQTs7OztBQUFBLGNBQUEsR0FBaUIsT0FBQSxDQUFRLGtCQUFSOztBQUNqQixjQUFBLEdBQWlCLE9BQUEsQ0FBUSxrQkFBUjs7QUFNWDs7Ozs7Ozs7NkJBQ0osU0FBQSxHQUFXOzs2QkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHlDQUFSOzs2QkFFVixFQUFBLEdBQ0U7SUFBQSxpQkFBQSxFQUFtQix3QkFBbkI7Ozs2QkFFRixlQUFBLEdBQWlCLFNBQUE7QUFDZixXQUFPO01BQUUsUUFBQSxFQUFVLElBQUMsQ0FBQSxPQUFPLENBQUMsUUFBckI7O0VBRFE7OzZCQUdqQixRQUFBLEdBQVUsU0FBQTtJQUNSLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBaEIsQ0FBNEIsSUFBNUIsRUFBK0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUF0QztXQUNBLFVBQUEsQ0FBVyxJQUFDLENBQUEscUJBQVosRUFBbUMsR0FBbkM7RUFGUTs7NkJBSVYscUJBQUEsR0FBdUIsU0FBQTtXQUNyQixJQUFDLENBQUEsRUFBRSxDQUFDLGlCQUFpQixDQUFDLE9BQXRCLENBQThCO01BQUUsV0FBQSxFQUFhLGtCQUFmO0tBQTlCO0VBRHFCOzs7O0dBZE0sRUFBRSxDQUFDOztBQXFCNUI7Ozs7Ozs7cUJBQ0osU0FBQSxHQUFXOztxQkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHVCQUFSOztxQkFFVixTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDtJQUNBLFlBQUEsRUFBYyxFQURkO0lBRUEsV0FBQSxFQUFhLEVBRmI7OztxQkFJRixFQUFBLEdBQ0U7SUFBQSxhQUFBLEVBQWUsa0JBQWY7OztxQkFFRixNQUFBLEdBQ0U7SUFBQSx5QkFBQSxFQUEyQixlQUEzQjs7O3FCQUVGLE9BQUEsR0FDRTtJQUFBLGdCQUFBLEVBQW9CLGlDQUFwQjtJQUNBLGlCQUFBLEVBQW9CLDJCQURwQjs7O3FCQUdGLGVBQUEsR0FBaUIsU0FBQyxlQUFEO0lBQ2YsSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFaLENBQWdCLGVBQWhCO1dBQ0EsSUFBQyxDQUFBLGtCQUFELENBQUE7RUFGZTs7cUJBSWpCLDZCQUFBLEdBQStCLFNBQUE7V0FDN0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsb0JBQTNDLENBQWdFLENBQUMsSUFBakUsQ0FBc0UsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQ7ZUFDcEUsS0FBQyxDQUFBLGdCQUFnQixDQUFDLElBQWxCLENBQXVCLElBQUksZ0JBQUosQ0FBcUI7VUFBRSxLQUFBLEVBQU8sS0FBQyxDQUFBLEtBQVY7VUFBaUIsUUFBQSxFQUFVLFFBQTNCO1NBQXJCLENBQXZCO01BRG9FO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF0RTtFQUQ2Qjs7cUJBSS9CLGFBQUEsR0FBZSxTQUFBO0FBR2IsUUFBQTtJQUFBLGFBQUEsR0FBZ0IsSUFBSSxJQUFDLENBQUEsVUFBVSxDQUFDLEtBQWhCLENBQXNCO01BQUUsRUFBQSxFQUFJLGFBQUEsQ0FBYyxLQUFkLENBQU47TUFBNEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxVQUFVLENBQUMsTUFBWixHQUFxQixDQUF4RDtLQUF0QjtJQUdoQixjQUFBLEdBQWlCLElBQUksY0FBSixDQUFtQjtNQUFFLEtBQUEsRUFBTyxhQUFUO01BQXdCLEtBQUEsRUFBTyxJQUEvQjtNQUFxQyxhQUFBLEVBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxhQUE3RDtLQUFuQjtJQUdqQixjQUFjLENBQUMsRUFBZixDQUFrQixRQUFsQixFQUE0QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsa0JBQUQsQ0FBQTtNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE1QjtJQUdBLGNBQWMsQ0FBQyxFQUFmLENBQWtCLFFBQWxCLEVBQTRCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxJQUFEO2VBQVUsS0FBQyxDQUFBLGVBQUQsQ0FBaUIsSUFBSSxDQUFDLEtBQXRCO01BQVY7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTVCO1dBR0EsSUFBQyxDQUFBLGlCQUFpQixDQUFDLElBQW5CLENBQXdCLGNBQXhCO0VBZmE7O3FCQWlCZixjQUFBLEdBQWdCLFNBQUMsZUFBRDtBQUdkLFFBQUE7SUFBQSxjQUFBLEdBQWlCLElBQUksY0FBSixDQUFtQjtNQUFFLEtBQUEsRUFBTyxlQUFUO01BQTBCLGFBQUEsRUFBZSxJQUFDLENBQUEsT0FBTyxDQUFDLGFBQWxEO0tBQW5CO0lBR2pCLGNBQWMsQ0FBQyxFQUFmLENBQWtCLFFBQWxCLEVBQTRCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxrQkFBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTVCO0lBR0EsY0FBYyxDQUFDLEVBQWYsQ0FBa0IsUUFBbEIsRUFBNEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQ7ZUFBVSxLQUFDLENBQUEsa0JBQUQsQ0FBQTtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE1QjtXQUdBLElBQUMsQ0FBQSxpQkFBaUIsQ0FBQyxJQUFuQixDQUF3QixjQUF4QjtFQVpjOztxQkFjaEIsa0JBQUEsR0FBb0IsU0FBQTtBQUNsQixRQUFBO0lBQUEsY0FBQSxHQUFpQixJQUFJLGNBQUosQ0FBbUI7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7TUFBMkIsTUFBQSxFQUFRLElBQW5DO0tBQW5CO0lBQ2pCLGNBQWMsQ0FBQyxFQUFmLENBQWtCLGlCQUFsQixFQUFxQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsZUFBRDtBQUFxQixlQUFPLEtBQUMsQ0FBQSxjQUFELENBQWdCLGVBQWhCO01BQTVCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFyQztXQUdBLElBQUMsQ0FBQSxpQkFBaUIsQ0FBQyxJQUFuQixDQUF3QixjQUF4QjtFQUxrQjs7cUJBT3BCLFFBQUEsR0FBVSxTQUFBO0lBQ1IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxXQUFoQixDQUE2QixJQUE3QixFQUFnQyxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQXZDO0lBQ0EsSUFBQyxDQUFBLGtCQUFELENBQUE7V0FDQSxJQUFDLENBQUEsNkJBQUQsQ0FBQTtFQUhROztxQkFLVixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxPQUFELENBQVMsUUFBVDtFQURROztxQkFHVixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxJQUFBLEdBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFoQixDQUEwQixJQUExQjtJQUNQLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFBO0lBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBWDtXQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBUCxDQUFBO0VBSlE7O3FCQU1WLFNBQUEsR0FBVyxTQUFBO1dBQ1QsT0FBTyxDQUFDLEdBQVIsQ0FBWSxXQUFaO0VBRFM7O3FCQUdYLE1BQUEsR0FBUSxTQUFBO1dBQ04sSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBQWlCLElBQUMsQ0FBQSxLQUFsQjtFQURNOztxQkFHUixPQUFBLEdBQVMsU0FBQTtXQUNQLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWjtFQURPOzs7O0dBckZZLEVBQUUsQ0FBQzs7QUEwRjFCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./definitionForm":70,"./definitionList":71,"./templates/ontology_attribute_selector":97,"./templates/rule_form":101}],78:[function(require,module,exports){
var RuleChild, RuleEmpty, RuleLayout, RuleList, RuleViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RuleViewer = require('./ruleViewer');

RuleEmpty = (function(superClass) {
  extend(RuleEmpty, superClass);

  function RuleEmpty() {
    return RuleEmpty.__super__.constructor.apply(this, arguments);
  }

  RuleEmpty.prototype.template = require('./templates/rule_empty');

  RuleEmpty.prototype.className = 'list-group-item list-group-item-warning';

  return RuleEmpty;

})(Mn.LayoutView);

RuleChild = (function(superClass) {
  extend(RuleChild, superClass);

  function RuleChild() {
    return RuleChild.__super__.constructor.apply(this, arguments);
  }

  RuleChild.prototype.template = require('./templates/rule_child');

  RuleChild.prototype.className = 'list-group-item';

  RuleChild.prototype.behaviors = {
    SelectableChild: {},
    SortableChild: {},
    Tooltips: {}
  };

  RuleChild.prototype.modelEvents = {
    'change:order': 'onReordered',
    'sync': 'onSync'
  };

  RuleChild.prototype.onReordered = function() {
    return this.model.save();
  };

  RuleChild.prototype.onSync = function() {
    return this.render();
  };

  return RuleChild;

})(Mn.LayoutView);

RuleList = (function(superClass) {
  extend(RuleList, superClass);

  function RuleList() {
    return RuleList.__super__.constructor.apply(this, arguments);
  }

  RuleList.prototype.className = 'list-group';

  RuleList.prototype.childView = RuleChild;

  RuleList.prototype.emptyView = RuleEmpty;

  RuleList.prototype.behaviors = {
    SortableList: {}
  };

  RuleList.prototype.collectionEvents = {
    'remove': 'onCollectionRemove'
  };

  RuleList.prototype.onCollectionRemove = function() {
    var ref;
    setTimeout(this.reorderCollection, 250);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  return RuleList;

})(Mn.CollectionView);

RuleLayout = (function(superClass) {
  extend(RuleLayout, superClass);

  function RuleLayout() {
    return RuleLayout.__super__.constructor.apply(this, arguments);
  }

  RuleLayout.prototype.className = 'row';

  RuleLayout.prototype.template = require('./templates/rule_list_layout');

  RuleLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  RuleLayout.prototype.onRender = function() {
    var listView, ref;
    listView = new RuleList({
      collection: this.collection
    });
    window.listView = listView;
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showDetail(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  RuleLayout.prototype.showDetail = function(model) {
    var ruleViewer;
    ruleViewer = new RuleViewer({
      model: model
    });
    ruleViewer.on('edit', (function(_this) {
      return function(view) {
        return _this.trigger('edit', view.model);
      };
    })(this));
    return this.detailRegion.show(ruleViewer);
  };

  return RuleLayout;

})(Mn.LayoutView);

module.exports = RuleLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUxpc3QuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUxpc3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsc0RBQUE7RUFBQTs7O0FBQUEsVUFBQSxHQUFhLE9BQUEsQ0FBUSxjQUFSOztBQUlQOzs7Ozs7O3NCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsd0JBQVI7O3NCQUNWLFNBQUEsR0FBVzs7OztHQUZXLEVBQUUsQ0FBQzs7QUFNckI7Ozs7Ozs7c0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx3QkFBUjs7c0JBQ1YsU0FBQSxHQUFXOztzQkFFWCxTQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWlCLEVBQWpCO0lBQ0EsYUFBQSxFQUFlLEVBRGY7SUFFQSxRQUFBLEVBQVUsRUFGVjs7O3NCQUlGLFdBQUEsR0FDRTtJQUFBLGNBQUEsRUFBZ0IsYUFBaEI7SUFDQSxNQUFBLEVBQWdCLFFBRGhCOzs7c0JBR0YsV0FBQSxHQUFhLFNBQUE7V0FDWCxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQTtFQURXOztzQkFHYixNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxNQUFELENBQUE7RUFETTs7OztHQWhCYyxFQUFFLENBQUM7O0FBcUJyQjs7Ozs7OztxQkFDSixTQUFBLEdBQVc7O3FCQUNYLFNBQUEsR0FBVzs7cUJBQ1gsU0FBQSxHQUFXOztxQkFFWCxTQUFBLEdBQ0U7SUFBQSxZQUFBLEVBQWMsRUFBZDs7O3FCQUVGLGdCQUFBLEdBQ0U7SUFBQSxRQUFBLEVBQVUsb0JBQVY7OztxQkFJRixrQkFBQSxHQUFvQixTQUFBO0FBQ2xCLFFBQUE7SUFBQSxVQUFBLENBQVksSUFBQyxDQUFBLGlCQUFiLEVBQWdDLEdBQWhDO3NEQUNpQixDQUFFLE9BQW5CLENBQTJCLFVBQTNCO0VBRmtCOzs7O0dBYkMsRUFBRSxDQUFDOztBQW1CcEI7Ozs7Ozs7dUJBQ0osU0FBQSxHQUFXOzt1QkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLDhCQUFSOzt1QkFFVixPQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQWMsb0JBQWQ7SUFDQSxZQUFBLEVBQWMsc0JBRGQ7Ozt1QkFHRixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxRQUFBLEdBQVcsSUFBSSxRQUFKLENBQWE7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7S0FBYjtJQUNYLE1BQU0sQ0FBQyxRQUFQLEdBQWtCO0lBQ2xCLFFBQVEsQ0FBQyxFQUFULENBQVksb0JBQVosRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQ7ZUFBVSxLQUFDLENBQUEsVUFBRCxDQUFZLElBQUksQ0FBQyxLQUFqQjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQztJQUNBLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFpQixRQUFqQjtzREFDaUIsQ0FBRSxPQUFuQixDQUEyQixVQUEzQjtFQUxROzt1QkFPVixVQUFBLEdBQVksU0FBQyxLQUFEO0FBQ1YsUUFBQTtJQUFBLFVBQUEsR0FBYSxJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxLQUFUO0tBQWY7SUFDYixVQUFVLENBQUMsRUFBWCxDQUFjLE1BQWQsRUFBc0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQ7ZUFBVSxLQUFDLENBQUEsT0FBRCxDQUFTLE1BQVQsRUFBaUIsSUFBSSxDQUFDLEtBQXRCO01BQVY7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXRCO1dBQ0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLFVBQW5CO0VBSFU7Ozs7R0FmVyxFQUFFLENBQUM7O0FBc0I1QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./ruleViewer":79,"./templates/rule_child":99,"./templates/rule_empty":100,"./templates/rule_list_layout":102}],79:[function(require,module,exports){
var RuleViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RuleViewer = (function(superClass) {
  extend(RuleViewer, superClass);

  function RuleViewer() {
    return RuleViewer.__super__.constructor.apply(this, arguments);
  }

  RuleViewer.prototype.className = 'card card-body';

  RuleViewer.prototype.template = require('./templates/rule_viewer');

  RuleViewer.prototype.behaviors = {
    Confirmations: {
      message: 'Are you sure you want to destroy this Knowledge Rule?',
      confirmIcon: 'fa-trash',
      confirmText: 'DESTROY',
      confirmCss: 'btn-danger'
    }
  };

  RuleViewer.prototype.ui = {
    edit: '[data-click=edit]',
    confirmationTrigger: '[data-click=destroy]'
  };

  RuleViewer.prototype.triggers = {
    'click @ui.edit': 'edit'
  };

  RuleViewer.prototype.modelEvents = {
    'destroy': 'onModelDestroy',
    'error': 'onError'
  };

  RuleViewer.prototype.onConfirmed = function() {
    return this.model.destroy();
  };

  RuleViewer.prototype.onModelDestroy = function() {
    return this.model.collection.remove(this.model);
  };

  RuleViewer.prototype.onError = function() {
    return console.log('onError');
  };

  return RuleViewer;

})(Mn.LayoutView);

module.exports = RuleViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZVZpZXdlci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9ydWxlVmlld2VyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBQ0osU0FBQSxHQUFXOzt1QkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHlCQUFSOzt1QkFFVixTQUFBLEdBQ0U7SUFBQSxhQUFBLEVBQ0U7TUFBQSxPQUFBLEVBQWMsdURBQWQ7TUFDQSxXQUFBLEVBQWMsVUFEZDtNQUVBLFdBQUEsRUFBYyxTQUZkO01BR0EsVUFBQSxFQUFjLFlBSGQ7S0FERjs7O3VCQU1GLEVBQUEsR0FDRTtJQUFBLElBQUEsRUFBc0IsbUJBQXRCO0lBQ0EsbUJBQUEsRUFBc0Isc0JBRHRCOzs7dUJBR0YsUUFBQSxHQUNFO0lBQUEsZ0JBQUEsRUFBa0IsTUFBbEI7Ozt1QkFFRixXQUFBLEdBQ0U7SUFBQSxTQUFBLEVBQVksZ0JBQVo7SUFDQSxPQUFBLEVBQVksU0FEWjs7O3VCQUdGLFdBQUEsR0FBYSxTQUFBO1dBQ1gsSUFBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLENBQUE7RUFEVzs7dUJBR2IsY0FBQSxHQUFnQixTQUFBO1dBQ2QsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBbEIsQ0FBeUIsSUFBQyxDQUFBLEtBQTFCO0VBRGM7O3VCQUdoQixPQUFBLEdBQVMsU0FBQTtXQUNQLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWjtFQURPOzs7O0dBNUJjLEVBQUUsQ0FBQzs7QUFpQzVCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/rule_viewer":103}],80:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (availableActions, isNew, undefined) {
jade_mixins["actionSelector"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button data-select=\"action\"" + (jade.attr("data-action", opts.action, true, false)) + " class=\"btn btn-outline-secondary\"><i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;\n" + (jade.escape((jade_interp = opts.text) == null ? '' : jade_interp)) + "</button>");
};
buf.push("<div class=\"col-lg-12\"><p class=\"lead\">Action</p></div>");
if ( isNew)
{
buf.push("<div class=\"col-lg-12\"><div class=\"btn-group w-100\">");
// iterate availableActions
;(function(){
  var $$obj = availableActions;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var actionType = $$obj[$index];

jade_mixins["actionSelector"](actionType);
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var actionType = $$obj[$index];

jade_mixins["actionSelector"](actionType);
    }

  }
}).call(this);

buf.push("</div></div>");
}
buf.push("<div data-region=\"action-type\" class=\"col-lg-12 mt-2\"></div>");}.call(this,"availableActions" in locals_for_with?locals_for_with.availableActions:typeof availableActions!=="undefined"?availableActions:undefined,"isNew" in locals_for_with?locals_for_with.isNew:typeof isNew!=="undefined"?isNew:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined));;return buf.join("");
};
},{"jade/runtime":209}],81:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, sourceOptions) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"clone\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-copy\"></i>&nbsp;<strong>Clone</strong><br/>Clones the attribute defined in the Clone From field.</div></div><div class=\"col-lg-4\">");
jade_mixins["formSelect"]({ label: 'Clone From', name: 'clone_source', options: sourceOptions });
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"sourceOptions" in locals_for_with?locals_for_with.sourceOptions:typeof sourceOptions!=="undefined"?sourceOptions:undefined));;return buf.join("");
};
},{"jade/runtime":209}],82:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"filter\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-filter\"></i>&nbsp;<strong>Filter</strong><br/>Allows the definition chain to continue if the supplied constraint is met.</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],83:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, sourceOptions) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"index_from_regex_match\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-registered\"></i>&nbsp;<strong>Index From Regex Match</strong><br/>Matches a pattern and returns the index from the match group.</div></div><div class=\"col-lg-4\">");
jade_mixins["formSelect"]({ label: 'Source', name: 'index_from_regex_match_source', options: sourceOptions });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formInput"]({ label: 'Regular Expression', placeholder: 'Regular Expression', name: 'index_from_regex_match_regex', type: 'text' });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formInput"]({ label: 'Index', placeholder: 'Index', name: 'index_from_regex_match_index', type: 'text' });
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"sourceOptions" in locals_for_with?locals_for_with.sourceOptions:typeof sourceOptions!=="undefined"?sourceOptions:undefined));;return buf.join("");
};
},{"jade/runtime":209}],84:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, sourceOptions) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"index_from_split\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-code-fork\"></i>&nbsp;<strong>Index From Split</strong><br/>Splits a string at a character and returns the sub-string at specified index.</div></div><div class=\"col-lg-4\">");
jade_mixins["formSelect"]({ label: 'Source', name: 'index_from_split_source', options: sourceOptions });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formInput"]({ label: 'Split At', placeholder: 'Split At', name: 'index_from_split_delimiter', type: 'text' });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formInput"]({ label: 'Index', placeholder: 'Index', name: 'index_from_split_index', type: 'text' });
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"sourceOptions" in locals_for_with?locals_for_with.sourceOptions:typeof sourceOptions!=="undefined"?sourceOptions:undefined));;return buf.join("");
};
},{"jade/runtime":209}],85:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"static\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-quote-right\"></i>&nbsp;<strong>Literal</strong><br/>Assigns the supplied literal text to the rule's target property.</div></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Literal Text', placeholder: 'Literal Text', name: 'literal_text', type: 'text' });
buf.push("</div>");;return buf.join("");
};
},{"jade/runtime":209}],86:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, sourceOptions) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><input type=\"hidden\" name=\"action\" value=\"replace\"/><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-strikethrough\"></i>&nbsp;<strong>Replace</strong><br/>Returns a copy of text source with text replacement.</div></div><div class=\"col-lg-12\">");
jade_mixins["formSelect"]({ label: 'Text Source', name: 'replace_source', options: sourceOptions });
buf.push("</div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Text to Replace', placeholder: 'Text to Replace', name: 'replace_text', type: 'text' });
buf.push("</div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Replace With', placeholder: 'Replace With', name: 'replace_with', type: 'text' });
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"sourceOptions" in locals_for_with?locals_for_with.sourceOptions:typeof sourceOptions!=="undefined"?sourceOptions:undefined));;return buf.join("");
};
},{"jade/runtime":209}],87:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Apply Rules</p></div><div class=\"col-lg-12\"><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-question-circle\"></i>&nbsp;<strong>HELP</strong><p class=\"mb-0\">This action applies the defined rules to the dataset and updates its facets.</p></div></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],88:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, operationOptions, sourceOptions) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");
jade_mixins["formSelect"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<select" + (jade.attr("name", opts.name, true, false)) + (jade.attr("multiple", opts.multiple, true, false)) + " class=\"form-control c-select\">");
if ( opts.options)
{
// iterate opts.options
;(function(){
  var $$obj = opts.options;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var opt = $$obj[$index];

if ( Array.isArray(opt))
{
buf.push("<option" + (jade.attr("value", opt[0], true, false)) + ">" + (jade.escape(null == (jade_interp = opt[1]) ? "" : jade_interp)) + "</option>");
}
else
{
buf.push("<option>" + (jade.escape(null == (jade_interp = opt) ? "" : jade_interp)) + "</option>");
}
    }

  }
}).call(this);

}
buf.push("</select>");
}
}, opts);
};
buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");














buf.push("");














buf.push("<div class=\"col-lg-12\"><p class=\"lead\">Constraint</p></div><div class=\"col-lg-4\">");
jade_mixins["formSelect"]({ label: 'Source', name: 'source', options: sourceOptions });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formSelect"]({ label: 'Operation', name: 'operation', options: operationOptions });
buf.push("</div><div class=\"col-lg-4\">");
jade_mixins["formInput"]({ label: 'Value', placeholder: 'Value', name: 'value', type: 'text' });
buf.push("</div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"operationOptions" in locals_for_with?locals_for_with.operationOptions:typeof operationOptions!=="undefined"?operationOptions:undefined,"sourceOptions" in locals_for_with?locals_for_with.sourceOptions:typeof sourceOptions!=="undefined"?sourceOptions:undefined));;return buf.join("");
};
},{"jade/runtime":209}],89:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (action, tooltipAttrs) {
tooltipAttrs = { 'data-placement': 'left', 'data-toggle': 'tooltip' }
buf.push("<div class=\"row\"><div class=\"col-lg-2\"><i class=\"fa fa-fw fa-bars cursor-pointer sortable\"></i></div><div class=\"col-lg-10\">" + (jade.escape(null == (jade_interp = action) ? "" : jade_interp)) + "</div></div>");}.call(this,"action" in locals_for_with?locals_for_with.action:typeof action!=="undefined"?action:undefined,"tooltipAttrs" in locals_for_with?locals_for_with.tooltipAttrs:typeof tooltipAttrs!=="undefined"?tooltipAttrs:undefined));;return buf.join("");
};
},{"jade/runtime":209}],90:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12\">No Definitions.</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],91:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (isNew) {
jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead mb-0\">");
if ( isNew)
{
buf.push("New Definition");
}
else
{
buf.push("Edit Definition");
}
buf.push("</p></div><div class=\"col-lg-12\"><hr/></div><div data-region=\"constraint\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div data-region=\"action\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div></div></div>");}.call(this,"isNew" in locals_for_with?locals_for_with.isNew:typeof isNew!=="undefined"?isNew:undefined));;return buf.join("");
};
},{"jade/runtime":209}],92:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div data-region=\"list\" class=\"col-lg-4\"></div><div data-region=\"detail\" class=\"col-lg-8\"><div class=\"alert alert-warning\">No Definition selected.</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],93:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (action, clone_source, literal_text, operation, replace_source, replace_text, replace_with, source, value) {
buf.push("<div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-6\"><p class=\"lead mb-0\">Definition</p></div><div class=\"col-lg-6 text-right\"><button data-click=\"edit\" class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-pencil\"></i>&nbsp;\nEdit</button><button data-click=\"discard\" class=\"btn btn-sm btn-outline-danger\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;\nDiscard</button></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\"><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Constraint</p></div><div class=\"col-lg-4\"><strong>Source</strong></div><div class=\"col-lg-4\"><strong>Operation</strong></div><div class=\"col-lg-4\"><strong>Value</strong></div><div class=\"col-lg-4\">" + (jade.escape(null == (jade_interp = source) ? "" : jade_interp)) + "</div><div class=\"col-lg-4\">" + (jade.escape(null == (jade_interp = operation) ? "" : jade_interp)) + "</div><div class=\"col-lg-4\">" + (jade.escape(null == (jade_interp = value) ? "" : jade_interp)) + "</div></div><div class=\"row\"><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Action</p></div>");
if ( action == 'literal')
{
buf.push("<div class=\"col-lg-6\"><strong>Action Type</strong></div><div class=\"col-lg-6\"><strong>Literal Text</strong></div><div class=\"col-lg-6\">Literal</div><div class=\"col-lg-6\">" + (jade.escape(null == (jade_interp = literal_text) ? "" : jade_interp)) + "</div>");
}
if ( action == 'block')
{
buf.push("<div class=\"col-lg-12\"><strong>Action Type</strong></div><div class=\"col-lg-12\">Block</div>");
}
if ( action == 'clone')
{
buf.push("<div class=\"col-lg-6\"><strong>Action Type</strong></div><div class=\"col-lg-6\"><strong>Clone From</strong></div><div class=\"col-lg-6\">Clone</div><div class=\"col-lg-6\">" + (jade.escape(null == (jade_interp = clone_source) ? "" : jade_interp)) + "</div>");
}
if ( action == 'replace')
{
buf.push("<div class=\"col-lg-6\"><strong>Action Type</strong></div><div class=\"col-lg-6\"><strong>Text Source</strong></div><div class=\"col-lg-6\">Replace</div><div class=\"col-lg-6\">" + (jade.escape(null == (jade_interp = replace_source) ? "" : jade_interp)) + "</div><div class=\"col-lg-12\"><strong>Text to Replace</strong></div><div class=\"col-lg-12\">" + (jade.escape(null == (jade_interp = replace_text) ? "" : jade_interp)) + "</div><div class=\"col-lg-12\"><strong>Replace With</strong></div><div class=\"col-lg-12\">" + (jade.escape(null == (jade_interp = replace_with) ? "" : jade_interp)) + "</div>");
}
buf.push("</div></div></div></div></div>");}.call(this,"action" in locals_for_with?locals_for_with.action:typeof action!=="undefined"?action:undefined,"clone_source" in locals_for_with?locals_for_with.clone_source:typeof clone_source!=="undefined"?clone_source:undefined,"literal_text" in locals_for_with?locals_for_with.literal_text:typeof literal_text!=="undefined"?literal_text:undefined,"operation" in locals_for_with?locals_for_with.operation:typeof operation!=="undefined"?operation:undefined,"replace_source" in locals_for_with?locals_for_with.replace_source:typeof replace_source!=="undefined"?replace_source:undefined,"replace_text" in locals_for_with?locals_for_with.replace_text:typeof replace_text!=="undefined"?replace_text:undefined,"replace_with" in locals_for_with?locals_for_with.replace_with:typeof replace_with!=="undefined"?replace_with:undefined,"source" in locals_for_with?locals_for_with.source:typeof source!=="undefined"?source:undefined,"value" in locals_for_with?locals_for_with.value:typeof value!=="undefined"?value:undefined));;return buf.join("");
};
},{"jade/runtime":209}],94:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Export Rules</p></div><div class=\"col-lg-12\"><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-cloud-download\"></i>&nbsp;<strong>Export</strong><p class=\"mb-0\">This action exports the rules defined on this dataset. They may then be imported by other datasets.</p></div></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],95:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Import Rules</p></div><div class=\"col-lg-12\"><div class=\"alert alert-primary\"><i class=\"fa fa-fw fa-cloud-download\"></i>&nbsp;<strong>Import</strong><p class=\"mb-0\">This action imports Knowledge Capture rules exported by Magellan.</p></div></div><div class=\"col-lg-12\"><hr/></div><div data-region=\"upload\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],96:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12\"><button data-click=\"export\" class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-cloud-download\"></i>&nbsp;\nExport Rules</button><button data-click=\"import\" class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-cloud-upload\"></i>&nbsp;\nImport Rules</button><button data-click=\"new\" class=\"btn btn-sm btn-outline-primary mr-2\"><i class=\"fa fa-fw fa-plus\"></i>&nbsp;\nNew Rule</button><button data-click=\"apply\" class=\"btn btn-sm btn-outline-success mr-2\"><i class=\"fa fa-fw fa-check-circle-o\"></i>&nbsp;\nApply Rules</button><button data-click=\"reset\" class=\"btn btn-sm btn-outline-danger\"><i class=\"fa fa-fw fa-refresh\"></i>&nbsp;\nReset</button></div></div><div class=\"row\"><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div data-region=\"content\" class=\"col-lg-12\"></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],97:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (dropdown, undefined) {
buf.push("<div class=\"col-lg-12\"><div class=\"form-group\"><label>Target Property</label><select name=\"target_property\" placeholder=\"Target Property\" class=\"form-control\">");
// iterate dropdown
;(function(){
  var $$obj = dropdown;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var group = $$obj[$index];

buf.push("<optgroup" + (jade.attr("label", group.label, true, false)) + ">");
// iterate group.items
;(function(){
  var $$obj = group.items;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var item = $$obj[$index];

buf.push("<option" + (jade.attr("value", item, true, false)) + ">" + (jade.escape(null == (jade_interp = item) ? "" : jade_interp)) + "</option>");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var item = $$obj[$index];

buf.push("<option" + (jade.attr("value", item, true, false)) + ">" + (jade.escape(null == (jade_interp = item) ? "" : jade_interp)) + "</option>");
    }

  }
}).call(this);

buf.push("</optgroup>");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var group = $$obj[$index];

buf.push("<optgroup" + (jade.attr("label", group.label, true, false)) + ">");
// iterate group.items
;(function(){
  var $$obj = group.items;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var item = $$obj[$index];

buf.push("<option" + (jade.attr("value", item, true, false)) + ">" + (jade.escape(null == (jade_interp = item) ? "" : jade_interp)) + "</option>");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var item = $$obj[$index];

buf.push("<option" + (jade.attr("value", item, true, false)) + ">" + (jade.escape(null == (jade_interp = item) ? "" : jade_interp)) + "</option>");
    }

  }
}).call(this);

buf.push("</optgroup>");
    }

  }
}).call(this);

buf.push("</select></div></div>");}.call(this,"dropdown" in locals_for_with?locals_for_with.dropdown:typeof dropdown!=="undefined"?dropdown:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined));;return buf.join("");
};
},{"jade/runtime":209}],98:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Reset Rules</p></div><div class=\"col-lg-12\"><div class=\"alert alert-danger\"><i class=\"fa fa-fw fa-warning\"></i>&nbsp;<strong>WARNING</strong><p class=\"mb-0\">This action restores the dataset to its default values before any rules were applied. This action is destructive.</p></div></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],99:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (target_property, tooltipAttrs) {
tooltipAttrs = { 'data-placement': 'left', 'data-toggle': 'tooltip' }
buf.push("<div class=\"row\"><div class=\"col-lg-2\"><i class=\"fa fa-fw fa-bars cursor-pointer sortable\"></i></div><div class=\"col-lg-10\">" + (jade.escape(null == (jade_interp = target_property) ? "" : jade_interp)) + "</div></div>");}.call(this,"target_property" in locals_for_with?locals_for_with.target_property:typeof target_property!=="undefined"?target_property:undefined,"tooltipAttrs" in locals_for_with?locals_for_with.tooltipAttrs:typeof tooltipAttrs!=="undefined"?tooltipAttrs:undefined));;return buf.join("");
};
},{"jade/runtime":209}],100:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12\">No Rules Defined.</div></div>");;return buf.join("");
};
},{"jade/runtime":209}],101:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");








buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");
jade_mixins["cancelButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Cancel'
}
if (!( opts.icon))
{
opts.icon = 'fa-times'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "cancel","class": "btn-outline-secondary"},attributes])
}, opts);
};
buf.push("<div class=\"col-lg-3\"><div class=\"row\"><div data-region=\"ontology-selector\" class=\"col-lg-12\"></div></div><button data-click=\"add\" class=\"btn btn-outline-primary w-100 mb-2\"><i class=\"fa fa-fw fa-plus-circle\"></i>&nbsp;\nAdd Definition</button></div><div data-region=\"definitions\" class=\"col-lg-9\"></div><div class=\"col-lg-12\">");
jade_mixins["cancelButton"]({});
jade_mixins["submitButton"]({});
buf.push("</div>");;return buf.join("");
};
},{"jade/runtime":209}],102:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div data-region=\"list\" class=\"col-lg-4\"></div><div data-region=\"detail\" class=\"col-lg-8\"></div>");;return buf.join("");
};
},{"jade/runtime":209}],103:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (definitions, enabled, target_property) {
buf.push("<div class=\"row\"><div class=\"col-lg-8\"><h4 class=\"card-title\">Rule Details</h4></div><div class=\"col-lg-4 text-right\"><button data-click=\"edit\" class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-pencil\"></i>&nbsp;\nEdit</button><button data-click=\"destroy\" class=\"btn btn-sm btn-outline-danger\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;\nDestroy</button></div><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">Enabled: " + (jade.escape((jade_interp = enabled) == null ? '' : jade_interp)) + "</p><p class=\"lead\">Target: " + (jade.escape((jade_interp = target_property) == null ? '' : jade_interp)) + "</p><hr/><p class=\"lead\">Definitions: " + (jade.escape((jade_interp = definitions.length) == null ? '' : jade_interp)) + "</p></div></div>");}.call(this,"definitions" in locals_for_with?locals_for_with.definitions:typeof definitions!=="undefined"?definitions:undefined,"enabled" in locals_for_with?locals_for_with.enabled:typeof enabled!=="undefined"?enabled:undefined,"target_property" in locals_for_with?locals_for_with.target_property:typeof target_property!=="undefined"?target_property:undefined));;return buf.join("");
};
},{"jade/runtime":209}],104:[function(require,module,exports){
var DatasetListRoute, LayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

DatasetListRoute = (function(superClass) {
  extend(DatasetListRoute, superClass);

  function DatasetListRoute() {
    return DatasetListRoute.__super__.constructor.apply(this, arguments);
  }

  DatasetListRoute.prototype.title = 'Magellan - Datasets';

  DatasetListRoute.prototype.breadcrumbs = [
    {
      href: '#',
      text: 'Home'
    }, {
      text: 'Archives'
    }
  ];

  DatasetListRoute.prototype.fetch = function() {
    return Backbone.Radio.channel('dataset').request('collection').then((function(_this) {
      return function(collection) {
        return _this.collection = collection;
      };
    })(this));
  };

  DatasetListRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      collection: this.collection
    }));
  };

  return DatasetListRoute;

})(require('hn_routing/lib/route'));

module.exports = DatasetListRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9saXN0L3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLDRCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYyxPQUFBLENBQVEsZ0JBQVI7O0FBSVI7Ozs7Ozs7NkJBRUosS0FBQSxHQUFPOzs2QkFFUCxXQUFBLEdBQWE7SUFDWDtNQUFFLElBQUEsRUFBTSxHQUFSO01BQWEsSUFBQSxFQUFNLE1BQW5CO0tBRFcsRUFFWDtNQUFFLElBQUEsRUFBTSxVQUFSO0tBRlc7Ozs2QkFLYixLQUFBLEdBQU8sU0FBQTtBQUNMLFdBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsWUFBMUMsQ0FDUCxDQUFDLElBRE0sQ0FDRCxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsVUFBRDtlQUFnQixLQUFDLENBQUEsVUFBRCxHQUFjO01BQTlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURDO0VBREY7OzZCQUlQLE1BQUEsR0FBUSxTQUFBO1dBQ04sSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLENBQWdCLElBQUksVUFBSixDQUFlO01BQUUsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFmO0tBQWYsQ0FBaEI7RUFETTs7OztHQWJxQixPQUFBLENBQVEsc0JBQVI7O0FBa0IvQixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./views/layout":105,"hn_routing/lib/route":207}],105:[function(require,module,exports){
var DatasetChild, DatasetEmpty, DatasetList, DatasetListLayout, DatasetShow, LdViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LdViewer = require('../../../search/facetsearch/views/graph.coffee');

DatasetEmpty = (function(superClass) {
  extend(DatasetEmpty, superClass);

  function DatasetEmpty() {
    return DatasetEmpty.__super__.constructor.apply(this, arguments);
  }

  DatasetEmpty.prototype.template = require('./templates/dataset_empty');

  DatasetEmpty.prototype.className = 'list-group-item list-group-item-warning';

  DatasetEmpty.prototype.tagName = 'li';

  return DatasetEmpty;

})(Mn.LayoutView);

DatasetChild = (function(superClass) {
  extend(DatasetChild, superClass);

  function DatasetChild() {
    return DatasetChild.__super__.constructor.apply(this, arguments);
  }

  DatasetChild.prototype.template = require('./templates/dataset_child');

  DatasetChild.prototype.className = 'list-group-item';

  DatasetChild.prototype.tagName = 'li';

  DatasetChild.prototype.behaviors = {
    SelectableChild: {}
  };

  return DatasetChild;

})(Mn.LayoutView);

DatasetList = (function(superClass) {
  extend(DatasetList, superClass);

  function DatasetList() {
    return DatasetList.__super__.constructor.apply(this, arguments);
  }

  DatasetList.prototype.className = 'row';

  DatasetList.prototype.template = require('./templates/dataset_list');

  DatasetList.prototype.childView = DatasetChild;

  DatasetList.prototype.emptyView = DatasetEmpty;

  DatasetList.prototype.childViewContainer = 'ul';

  return DatasetList;

})(Mn.CompositeView);

DatasetShow = (function(superClass) {
  extend(DatasetShow, superClass);

  function DatasetShow() {
    return DatasetShow.__super__.constructor.apply(this, arguments);
  }

  DatasetShow.prototype.className = 'card card-body';

  DatasetShow.prototype.template = require('./templates/dataset_show');

  return DatasetShow;

})(Mn.LayoutView);

DatasetListLayout = (function(superClass) {
  extend(DatasetListLayout, superClass);

  function DatasetListLayout() {
    return DatasetListLayout.__super__.constructor.apply(this, arguments);
  }

  DatasetListLayout.prototype.template = require('./templates/layout');

  DatasetListLayout.prototype.className = 'container-fluid';

  DatasetListLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  DatasetListLayout.prototype.onShow = function() {
    var listView, ref;
    listView = new DatasetList({
      collection: this.collection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showDataset(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  DatasetListLayout.prototype.showDataset = function(dataset) {
    return this.detailRegion.show(new DatasetShow({
      model: dataset
    }));
  };

  return DatasetListLayout;

})(Mn.LayoutView);

module.exports = DatasetListLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsaUZBQUE7RUFBQTs7O0FBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxnREFBUjs7QUFJTDs7Ozs7Ozt5QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLDJCQUFSOzt5QkFDVixTQUFBLEdBQVc7O3lCQUNYLE9BQUEsR0FBUzs7OztHQUhnQixFQUFFLENBQUM7O0FBT3hCOzs7Ozs7O3lCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsMkJBQVI7O3lCQUNWLFNBQUEsR0FBVzs7eUJBQ1gsT0FBQSxHQUFTOzt5QkFFVCxTQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWlCLEVBQWpCOzs7OztHQU51QixFQUFFLENBQUM7O0FBVXhCOzs7Ozs7O3dCQUNKLFNBQUEsR0FBVzs7d0JBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSwwQkFBUjs7d0JBQ1YsU0FBQSxHQUFXOzt3QkFDWCxTQUFBLEdBQVc7O3dCQUNYLGtCQUFBLEdBQW9COzs7O0dBTEksRUFBRSxDQUFDOztBQVN2Qjs7Ozs7Ozt3QkFDSixTQUFBLEdBQVc7O3dCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsMEJBQVI7Ozs7R0FGYyxFQUFFLENBQUM7O0FBTXZCOzs7Ozs7OzhCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsb0JBQVI7OzhCQUNWLFNBQUEsR0FBVzs7OEJBRVgsT0FBQSxHQUNFO0lBQUEsVUFBQSxFQUFjLG9CQUFkO0lBQ0EsWUFBQSxFQUFjLHNCQURkOzs7OEJBR0YsTUFBQSxHQUFRLFNBQUE7QUFDTixRQUFBO0lBQUEsUUFBQSxHQUFXLElBQUksV0FBSixDQUFnQjtNQUFFLFVBQUEsRUFBWSxJQUFDLENBQUEsVUFBZjtLQUFoQjtJQUNYLFFBQVEsQ0FBQyxFQUFULENBQVksb0JBQVosRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQ7ZUFBVSxLQUFDLENBQUEsV0FBRCxDQUFhLElBQUksQ0FBQyxLQUFsQjtNQUFWO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQztJQUNBLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFpQixRQUFqQjtzREFDaUIsQ0FBRSxPQUFuQixDQUEyQixVQUEzQjtFQUpNOzs4QkFNUixXQUFBLEdBQWEsU0FBQyxPQUFEO1dBQ1gsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLElBQUksV0FBSixDQUFnQjtNQUFFLEtBQUEsRUFBTyxPQUFUO0tBQWhCLENBQW5CO0VBRFc7Ozs7R0FkaUIsRUFBRSxDQUFDOztBQW1CbkMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../../search/facetsearch/views/graph.coffee":160,"./templates/dataset_child":106,"./templates/dataset_empty":107,"./templates/dataset_list":108,"./templates/dataset_show":109,"./templates/layout":110}],106:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (label) {
buf.push(jade.escape(null == (jade_interp = label) ? "" : jade_interp));}.call(this,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined));;return buf.join("");
};
},{"jade/runtime":209}],107:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("No Datasets");;return buf.join("");
};
},{"jade/runtime":209}],108:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><a href=\"#datasets/new\" class=\"btn btn-lg btn-outline-primary w-100\"><i class=\"fa fa-fw fa-plus\"></i>&nbsp;\nNew Archive</a><ul class=\"list-group mt-2\"></ul></div>");;return buf.join("");
};
},{"jade/runtime":209}],109:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (_s, count, id, label) {
buf.push("<div class=\"row\"><div class=\"col-lg-6\"><h4 class=\"card-title\">" + (jade.escape(null == (jade_interp = label) ? "" : jade_interp)) + "</h4></div><div class=\"col-lg-6 text-right\"><a" + (jade.attr("href", "#datasets/" + (id) + "", true, false)) + " class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-eye\"></i>&nbsp;\nShow</a><a" + (jade.attr("href", "#datasets/" + (id) + "/edit", true, false)) + " class=\"btn btn-sm btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-pencil\"></i>&nbsp;\nEdit</a><a" + (jade.attr("href", "#datasets/" + (id) + "/destroy", true, false)) + " class=\"btn btn-sm btn-outline-danger\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;\nDestroy</a></div><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">" + (jade.escape((jade_interp = _s.numberFormat(count)) == null ? '' : jade_interp)) + " Items</p></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/capture", true, false)) + " class=\"btn btn-mg btn-lg btn-outline-primary w-100\"><i class=\"fa fa-fw fa-lg fa-paperclip\"></i>&nbsp;\nKnowledge Capture</a></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/search", true, false)) + " class=\"btn btn-mg btn-lg btn-outline-success w-100\"><i class=\"fa fa-fw fa-lg fa-search\"></i>&nbsp;\nSearch</a></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/export", true, false)) + " class=\"btn btn-mg btn-lg btn-outline-success w-100\"><i class=\"fa fa-fw fa-lg fa-cloud-download\"></i>&nbsp;\nExport</a></div></div>");}.call(this,"_s" in locals_for_with?locals_for_with._s:typeof _s!=="undefined"?_s:undefined,"count" in locals_for_with?locals_for_with.count:typeof count!=="undefined"?count:undefined,"id" in locals_for_with?locals_for_with.id:typeof id!=="undefined"?id:undefined,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined));;return buf.join("");
};
},{"jade/runtime":209}],110:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div data-region=\"list\" class=\"col-lg-3\"></div><div data-region=\"detail\" class=\"col-lg-9\"></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],111:[function(require,module,exports){
var ArchiveImporter, DatasetCreator, LayoutView, NewDatasetRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

DatasetCreator = require('../creator');

ArchiveImporter = require('../importer');

NewDatasetRoute = (function(superClass) {
  extend(NewDatasetRoute, superClass);

  function NewDatasetRoute() {
    return NewDatasetRoute.__super__.constructor.apply(this, arguments);
  }

  NewDatasetRoute.prototype.title = 'Magellan - New Dataset';

  NewDatasetRoute.prototype.breadcrumbs = [
    {
      text: 'Home',
      href: '#'
    }, {
      text: 'Archives',
      href: '#datasets'
    }, {
      text: 'New'
    }
  ];

  NewDatasetRoute.prototype.fetch = function() {
    return Backbone.Radio.channel('dataset').request('model').then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  NewDatasetRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model,
      creator: DatasetCreator,
      importer: ArchiveImporter
    }));
  };

  return NewDatasetRoute;

})(require('hn_routing/lib/route'));

module.exports = NewDatasetRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3JvdXRlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L25ldy9yb3V0ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw0REFBQTtFQUFBOzs7QUFBQSxVQUFBLEdBQWEsT0FBQSxDQUFRLGdCQUFSOztBQUNiLGNBQUEsR0FBaUIsT0FBQSxDQUFRLFlBQVI7O0FBQ2pCLGVBQUEsR0FBa0IsT0FBQSxDQUFRLGFBQVI7O0FBSVo7Ozs7Ozs7NEJBRUosS0FBQSxHQUFPOzs0QkFFUCxXQUFBLEdBQWE7SUFDWDtNQUFFLElBQUEsRUFBTSxNQUFSO01BQWdCLElBQUEsRUFBTSxHQUF0QjtLQURXLEVBRVg7TUFBRSxJQUFBLEVBQU0sVUFBUjtNQUFvQixJQUFBLEVBQU0sV0FBMUI7S0FGVyxFQUdYO01BQUUsSUFBQSxFQUFNLEtBQVI7S0FIVzs7OzRCQU1iLEtBQUEsR0FBTyxTQUFBO1dBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsT0FBMUMsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUFXLEtBQUMsQ0FBQSxLQUFELEdBQVM7TUFBcEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE47RUFESzs7NEJBSVAsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7TUFBaUIsT0FBQSxFQUFTLGNBQTFCO01BQTBDLFFBQUEsRUFBVSxlQUFwRDtLQUFmLENBQWhCO0VBRE07Ozs7R0Fkb0IsT0FBQSxDQUFRLHNCQUFSOztBQW1COUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../creator":52,"../importer":65,"./views/layout":114,"hn_routing/lib/route":207}],112:[function(require,module,exports){
var ArchiveForm, UploadWidget,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

ArchiveForm = (function(superClass) {
  extend(ArchiveForm, superClass);

  function ArchiveForm() {
    this.onDirectoryUpload = bind(this.onDirectoryUpload, this);
    return ArchiveForm.__super__.constructor.apply(this, arguments);
  }

  ArchiveForm.prototype.template = require('./templates/archive_form');

  ArchiveForm.prototype.className = 'row';

  ArchiveForm.prototype.behaviors = {
    ModelEvents: {},
    SubmitButton: {}
  };

  ArchiveForm.prototype.regions = {
    uploadRegion: '[data-region=upload]'
  };

  ArchiveForm.prototype.onRender = function() {
    var uploadWidget;
    uploadWidget = new UploadWidget({
      directory: true
    });
    uploadWidget.on('directory:loaded', this.onDirectoryUpload);
    this.uploadRegion.show(uploadWidget);
    return this.disableSubmit();
  };

  ArchiveForm.prototype.onDirectoryUpload = function(files) {
    this.uploadedFiles = files;
    return this.enableSubmit();
  };

  ArchiveForm.prototype.onSubmit = function() {
    var data, json;
    data = Backbone.Syphon.serialize(this);
    json = this.options.importer.parse(this.uploadedFiles, data.prefix);
    this.model.set('context', json['@context']);
    this.uploadedGraph = json['@graph'];
    delete data.prefix;
    this.model.set(data);
    return this.options.creator.deploy(this.model, this.uploadedGraph);
  };

  ArchiveForm.prototype.onSync = function() {
    return Radio.channel('app').trigger('redirect', '#datasets');
  };

  ArchiveForm.prototype.onError = function(err) {
    console.log('ERROR');
    return console.log(err);
  };

  return ArchiveForm;

})(Mn.LayoutView);

module.exports = ArchiveForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL2FyY2hpdmVGb3JtLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L25ldy92aWV3cy9hcmNoaXZlRm9ybS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx5QkFBQTtFQUFBOzs7O0FBQUEsWUFBQSxHQUFlLE9BQUEsQ0FBUSxtQ0FBUjs7QUFLVDs7Ozs7Ozs7d0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSwwQkFBUjs7d0JBQ1YsU0FBQSxHQUFXOzt3QkFFWCxTQUFBLEdBQ0U7SUFBQSxXQUFBLEVBQWEsRUFBYjtJQUNBLFlBQUEsRUFBYyxFQURkOzs7d0JBR0YsT0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLHNCQUFkOzs7d0JBRUYsUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsWUFBQSxHQUFlLElBQUksWUFBSixDQUFpQjtNQUFFLFNBQUEsRUFBVyxJQUFiO0tBQWpCO0lBQ2YsWUFBWSxDQUFDLEVBQWIsQ0FBZ0Isa0JBQWhCLEVBQW9DLElBQUMsQ0FBQSxpQkFBckM7SUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsWUFBbkI7V0FDQSxJQUFDLENBQUEsYUFBRCxDQUFBO0VBSlE7O3dCQVFWLGlCQUFBLEdBQW1CLFNBQUMsS0FBRDtJQUdqQixJQUFDLENBQUEsYUFBRCxHQUFpQjtXQUlqQixJQUFDLENBQUEsWUFBRCxDQUFBO0VBUGlCOzt3QkFVbkIsUUFBQSxHQUFVLFNBQUE7QUFHUixRQUFBO0lBQUEsSUFBQSxHQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsU0FBaEIsQ0FBMEIsSUFBMUI7SUFJUCxJQUFBLEdBQU8sSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBbEIsQ0FBd0IsSUFBQyxDQUFBLGFBQXpCLEVBQXdDLElBQUksQ0FBQyxNQUE3QztJQUdQLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLFNBQVgsRUFBc0IsSUFBSyxDQUFBLFVBQUEsQ0FBM0I7SUFHQSxJQUFDLENBQUEsYUFBRCxHQUFpQixJQUFLLENBQUEsUUFBQTtJQUd0QixPQUFPLElBQUksQ0FBQztJQUdaLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQVg7V0FDQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFqQixDQUF3QixJQUFDLENBQUEsS0FBekIsRUFBZ0MsSUFBQyxDQUFBLGFBQWpDO0VBcEJROzt3QkFzQlYsTUFBQSxHQUFRLFNBQUE7V0FDTixLQUFLLENBQUMsT0FBTixDQUFjLEtBQWQsQ0FBb0IsQ0FBQyxPQUFyQixDQUE2QixVQUE3QixFQUF5QyxXQUF6QztFQURNOzt3QkFLUixPQUFBLEdBQVMsU0FBQyxHQUFEO0lBQ1AsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO1dBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxHQUFaO0VBRk87Ozs7R0F4RGUsRUFBRSxDQUFDOztBQThEN0IsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../../base/views/upload/upload":36,"./templates/archive_form":116}],113:[function(require,module,exports){
var NewDatasetLayout, UploadWidget,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

NewDatasetLayout = (function(superClass) {
  extend(NewDatasetLayout, superClass);

  function NewDatasetLayout() {
    this.onJsonUpload = bind(this.onJsonUpload, this);
    return NewDatasetLayout.__super__.constructor.apply(this, arguments);
  }

  NewDatasetLayout.prototype.template = require('./templates/json_form');

  NewDatasetLayout.prototype.className = 'row';

  NewDatasetLayout.prototype.behaviors = {
    ModelEvents: {},
    SubmitButton: {}
  };

  NewDatasetLayout.prototype.regions = {
    uploadRegion: '[data-region=upload]'
  };

  NewDatasetLayout.prototype.onRender = function() {
    var uploadWidget;
    uploadWidget = new UploadWidget();
    uploadWidget.on('file:loaded', this.onJsonUpload);
    this.uploadRegion.show(uploadWidget);
    return this.disableSubmit();
  };

  NewDatasetLayout.prototype.onJsonUpload = function(uploadedText) {
    this.parsedJson = JSON.parse(uploadedText);
    return this.enableSubmit();
  };

  NewDatasetLayout.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    this.model.set('context', this.parsedJson['@context']);
    this.model.set(data);
    return this.options.creator.deploy(this.model, this.parsedJson['@graph']);
  };

  NewDatasetLayout.prototype.onSync = function() {
    return Radio.channel('app').trigger('redirect', '#datasets');
  };

  NewDatasetLayout.prototype.onError = function(err) {
    console.log('ERROR');
    return console.log(err);
  };

  return NewDatasetLayout;

})(Mn.LayoutView);

module.exports = NewDatasetLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL2pzb25Gb3JtLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L25ldy92aWV3cy9qc29uRm9ybS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw4QkFBQTtFQUFBOzs7O0FBQUEsWUFBQSxHQUFlLE9BQUEsQ0FBUSxtQ0FBUjs7QUFNVDs7Ozs7Ozs7NkJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx1QkFBUjs7NkJBQ1YsU0FBQSxHQUFXOzs2QkFFWCxTQUFBLEdBQ0U7SUFBQSxXQUFBLEVBQWEsRUFBYjtJQUNBLFlBQUEsRUFBYyxFQURkOzs7NkJBR0YsT0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLHNCQUFkOzs7NkJBRUYsUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsWUFBQSxHQUFlLElBQUksWUFBSixDQUFBO0lBQ2YsWUFBWSxDQUFDLEVBQWIsQ0FBZ0IsYUFBaEIsRUFBK0IsSUFBQyxDQUFBLFlBQWhDO0lBQ0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLFlBQW5CO1dBQ0EsSUFBQyxDQUFBLGFBQUQsQ0FBQTtFQUpROzs2QkFVVixZQUFBLEdBQWMsU0FBQyxZQUFEO0lBR1osSUFBQyxDQUFBLFVBQUQsR0FBYyxJQUFJLENBQUMsS0FBTCxDQUFXLFlBQVg7V0FJZCxJQUFDLENBQUEsWUFBRCxDQUFBO0VBUFk7OzZCQVVkLFFBQUEsR0FBVSxTQUFBO0FBR1IsUUFBQTtJQUFBLElBQUEsR0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQWhCLENBQTBCLElBQTFCO0lBR1AsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsU0FBWCxFQUFzQixJQUFDLENBQUEsVUFBVyxDQUFBLFVBQUEsQ0FBbEM7SUFHQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFYO1dBQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBakIsQ0FBd0IsSUFBQyxDQUFBLEtBQXpCLEVBQWdDLElBQUMsQ0FBQSxVQUFXLENBQUEsUUFBQSxDQUE1QztFQVZROzs2QkFZVixNQUFBLEdBQVEsU0FBQTtXQUNOLEtBQUssQ0FBQyxPQUFOLENBQWMsS0FBZCxDQUFvQixDQUFDLE9BQXJCLENBQTZCLFVBQTdCLEVBQXlDLFdBQXpDO0VBRE07OzZCQUlSLE9BQUEsR0FBUyxTQUFDLEdBQUQ7SUFDUCxPQUFPLENBQUMsR0FBUixDQUFZLE9BQVo7V0FDQSxPQUFPLENBQUMsR0FBUixDQUFZLEdBQVo7RUFGTzs7OztHQS9Db0IsRUFBRSxDQUFDOztBQXFEbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../../base/views/upload/upload":36,"./templates/json_form":117}],114:[function(require,module,exports){
var ArchiveForm, ImportSelectorView, JsonForm, RdfForm,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ArchiveForm = require('./archiveForm');

JsonForm = require('./jsonForm');

RdfForm = require('./rdfForm');

ImportSelectorView = (function(superClass) {
  extend(ImportSelectorView, superClass);

  function ImportSelectorView() {
    return ImportSelectorView.__super__.constructor.apply(this, arguments);
  }

  ImportSelectorView.prototype.className = 'container';

  ImportSelectorView.prototype.template = require('./templates/layout');

  ImportSelectorView.prototype.navItems = [
    {
      icon: 'fa-folder-open-o',
      text: 'Archive',
      trigger: 'archive',
      "default": true
    }, {
      icon: 'fa-code',
      text: 'JSON-LD',
      trigger: 'json'
    }, {
      icon: 'fa-file',
      text: 'RDF/XML',
      trigger: 'rdf'
    }
  ];

  ImportSelectorView.prototype.navEvents = {
    'archive': 'archive',
    'json': 'json',
    'rdf': 'rdf'
  };

  ImportSelectorView.prototype.navOptions = {
    pills: true
  };

  ImportSelectorView.prototype.json = function() {
    return this.contentRegion.show(new JsonForm({
      model: this.model,
      creator: this.options.creator
    }));
  };

  ImportSelectorView.prototype.archive = function() {
    return this.contentRegion.show(new ArchiveForm({
      model: this.model,
      creator: this.options.creator,
      importer: this.options.importer
    }));
  };

  ImportSelectorView.prototype.rdf = function() {
    return this.contentRegion.show(new RdfForm({
      model: this.model,
      creator: this.options.creator
    }));
  };

  return ImportSelectorView;

})(require('lib/views/nav'));

module.exports = ImportSelectorView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL2xheW91dC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9uZXcvdmlld3MvbGF5b3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGtEQUFBO0VBQUE7OztBQUFBLFdBQUEsR0FBYyxPQUFBLENBQVEsZUFBUjs7QUFDZCxRQUFBLEdBQWMsT0FBQSxDQUFRLFlBQVI7O0FBQ2QsT0FBQSxHQUFjLE9BQUEsQ0FBUSxXQUFSOztBQUlSOzs7Ozs7OytCQUNKLFNBQUEsR0FBVzs7K0JBQ1gsUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7K0JBRVYsUUFBQSxHQUFVO0lBQ1I7TUFBRSxJQUFBLEVBQU0sa0JBQVI7TUFBNEIsSUFBQSxFQUFNLFNBQWxDO01BQWdELE9BQUEsRUFBUyxTQUF6RDtNQUFvRSxDQUFBLE9BQUEsQ0FBQSxFQUFTLElBQTdFO0tBRFEsRUFFUjtNQUFFLElBQUEsRUFBTSxTQUFSO01BQXNCLElBQUEsRUFBTSxTQUE1QjtNQUF5QyxPQUFBLEVBQVMsTUFBbEQ7S0FGUSxFQUdSO01BQUUsSUFBQSxFQUFNLFNBQVI7TUFBbUIsSUFBQSxFQUFNLFNBQXpCO01BQXVDLE9BQUEsRUFBUyxLQUFoRDtLQUhROzs7K0JBTVYsU0FBQSxHQUNFO0lBQUEsU0FBQSxFQUFZLFNBQVo7SUFDQSxNQUFBLEVBQVksTUFEWjtJQUVBLEtBQUEsRUFBWSxLQUZaOzs7K0JBSUYsVUFBQSxHQUNFO0lBQUEsS0FBQSxFQUFPLElBQVA7OzsrQkFFRixJQUFBLEdBQU0sU0FBQTtXQUNKLElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFJLFFBQUosQ0FBYTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixPQUFBLEVBQVMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFuQztLQUFiLENBQXBCO0VBREk7OytCQUdOLE9BQUEsR0FBUyxTQUFBO1dBQ1AsSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLElBQUksV0FBSixDQUFnQjtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixPQUFBLEVBQVMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFuQztNQUE0QyxRQUFBLEVBQVUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUEvRDtLQUFoQixDQUFwQjtFQURPOzsrQkFHVCxHQUFBLEdBQUssU0FBQTtXQUNILElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFJLE9BQUosQ0FBWTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtNQUFpQixPQUFBLEVBQVMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFuQztLQUFaLENBQXBCO0VBREc7Ozs7R0F4QjBCLE9BQUEsQ0FBUSxlQUFSOztBQTZCakMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./archiveForm":112,"./jsonForm":113,"./rdfForm":115,"./templates/layout":118,"lib/views/nav":287}],115:[function(require,module,exports){
var RdfForm, UploadWidget,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

RdfForm = (function(superClass) {
  extend(RdfForm, superClass);

  function RdfForm() {
    this.onJsonUpload = bind(this.onJsonUpload, this);
    return RdfForm.__super__.constructor.apply(this, arguments);
  }

  RdfForm.prototype.template = require('./templates/rdf_form');

  RdfForm.prototype.className = 'row';

  RdfForm.prototype.behaviors = {
    ModelEvents: {},
    SubmitButton: {}
  };

  RdfForm.prototype.regions = {
    uploadRegion: '[data-region=upload]'
  };

  RdfForm.prototype.ui = {
    dirInput: '[name=dir]'
  };

  RdfForm.prototype.events = {
    'change @ui.dirInput': 'onDirChange'
  };

  RdfForm.prototype.onRender = function() {
    var uploadWidget;
    uploadWidget = new UploadWidget();
    uploadWidget.on('file:loaded', this.onJsonUpload);
    this.uploadRegion.show(uploadWidget);
    return this.disableSubmit();
  };

  RdfForm.prototype.onJsonUpload = function(uploadedText) {};

  RdfForm.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    this.model.set(data);
    return this.options.creator.deploy(this.model, this.uploadedGraph);
  };

  RdfForm.prototype.onSync = function() {
    return Radio.channel('app').trigger('redirect', '#datasets');
  };

  RdfForm.prototype.onError = function(err) {
    console.log('ERROR');
    return console.log(err);
  };

  return RdfForm;

})(Mn.LayoutView);

module.exports = RdfForm;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL3JkZkZvcm0uY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL3JkZkZvcm0uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEscUJBQUE7RUFBQTs7OztBQUFBLFlBQUEsR0FBZSxPQUFBLENBQVEsbUNBQVI7O0FBS1Q7Ozs7Ozs7O29CQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsc0JBQVI7O29CQUNWLFNBQUEsR0FBVzs7b0JBRVgsU0FBQSxHQUNFO0lBQUEsV0FBQSxFQUFhLEVBQWI7SUFDQSxZQUFBLEVBQWMsRUFEZDs7O29CQUdGLE9BQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxzQkFBZDs7O29CQUVGLEVBQUEsR0FDRTtJQUFBLFFBQUEsRUFBVSxZQUFWOzs7b0JBRUYsTUFBQSxHQUNFO0lBQUEscUJBQUEsRUFBdUIsYUFBdkI7OztvQkFFRixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxZQUFBLEdBQWUsSUFBSSxZQUFKLENBQUE7SUFDZixZQUFZLENBQUMsRUFBYixDQUFnQixhQUFoQixFQUErQixJQUFDLENBQUEsWUFBaEM7SUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsWUFBbkI7V0FDQSxJQUFDLENBQUEsYUFBRCxDQUFBO0VBSlE7O29CQVVWLFlBQUEsR0FBYyxTQUFDLFlBQUQsR0FBQTs7b0JBaUJkLFFBQUEsR0FBVSxTQUFBO0FBR1IsUUFBQTtJQUFBLElBQUEsR0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQWhCLENBQTBCLElBQTFCO0lBR1AsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBWDtXQUNBLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQWpCLENBQXdCLElBQUMsQ0FBQSxLQUF6QixFQUFnQyxJQUFDLENBQUEsYUFBakM7RUFQUTs7b0JBU1YsTUFBQSxHQUFRLFNBQUE7V0FDTixLQUFLLENBQUMsT0FBTixDQUFjLEtBQWQsQ0FBb0IsQ0FBQyxPQUFyQixDQUE2QixVQUE3QixFQUF5QyxXQUF6QztFQURNOztvQkFJUixPQUFBLEdBQVMsU0FBQyxHQUFEO0lBQ1AsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO1dBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxHQUFaO0VBRk87Ozs7R0F6RFcsRUFBRSxDQUFDOztBQStEekIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../../base/views/upload/upload":36,"./templates/rdf_form":119}],116:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");














buf.push("<div class=\"col-lg-12\"><div class=\"alert alert-primary\"><p class=\"lead mb-0\"><i class=\"fa fa-fw fa-folder-open-o\"></i>&nbsp;\nArchive</p><p class=\"lead mb-0\">Imports a file system directory for processing by Magellan.</p></div></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
buf.push("</div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Directory Prefix', placeholder: 'Directory Prefix', name: 'prefix', type: 'text' });
buf.push("</div><div class=\"col-lg-12\"><hr/></div><div data-region=\"upload\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\"><a href=\"#datasets\" class=\"btn btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-times\"></i>&nbsp;\nCancel</a>");
jade_mixins["submitButton"]({});
buf.push("</div>");;return buf.join("");
};
},{"jade/runtime":209}],117:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");














buf.push("<div class=\"col-lg-12\"><div class=\"alert alert-primary\"><p class=\"lead mb-0\"><i class=\"fa fa-fw fa-code\"></i>&nbsp;\nJSON-LD</p><p class=\"lead mb-0\">Imports an existing JSON-LD knowledge graph for processing by Magellan.</p></div></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
buf.push("</div><div data-region=\"upload\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\"><a href=\"#datasets\" class=\"btn btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-times\"></i>&nbsp;\nCancel</a>");
jade_mixins["submitButton"]({});
buf.push("</div>");;return buf.join("");
};
},{"jade/runtime":209}],118:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">New Archive</h4></div><div class=\"col-lg-12\"><hr/></div><div data-region=\"nav\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div data-region=\"content\" class=\"col-lg-12\"></div></div></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],119:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");














buf.push("<div class=\"col-lg-12\"><div class=\"alert alert-primary\"><p class=\"lead mb-0\"><i class=\"fa fa-fw fa-file\"></i>&nbsp;\nRDF/XML</p><p class=\"lead mb-0\">Imports an existing RDF/XML knowledge graph for processing by Magellan.</p></div></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
buf.push("</div><div data-region=\"upload\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\"><a href=\"#datasets\" class=\"btn btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-times\"></i>&nbsp;\nCancel</a>");
jade_mixins["submitButton"]({});
buf.push("</div>");;return buf.join("");
};
},{"jade/runtime":209}],120:[function(require,module,exports){
var CaptureRoute, ConfigRoute, DatasetRouter, DestroyRoute, EditRoute, ExportRoute, ListRoute, NewRoute, SearchRoute, ShowRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./factory');

require('./creator');

ListRoute = require('./list/route');

ShowRoute = require('./show/route');

SearchRoute = require('./search/route');

ConfigRoute = require('./config/route');

NewRoute = require('./new/route');

EditRoute = require('./edit/route');

DestroyRoute = require('./destroy/route');

ExportRoute = require('./export/route');

CaptureRoute = require('./knowledge_capture/route');

DatasetRouter = (function(superClass) {
  extend(DatasetRouter, superClass);

  function DatasetRouter() {
    return DatasetRouter.__super__.constructor.apply(this, arguments);
  }

  DatasetRouter.prototype.routes = {
    'datasets(/)': 'list',
    'datasets/new(/)': 'new',
    'datasets/:id(/)': 'show',
    'datasets/:id/search(/)': 'search',
    'datasets/:id/capture(/)': 'knowledgeCapture',
    'datasets/:id/config(/)': 'config',
    'datasets/:id/export(/)': 'export',
    'datasets/:id/edit(/)': 'edit',
    'datasets/:id/destroy(/)': 'destroy'
  };

  DatasetRouter.prototype.list = function() {
    return new ListRoute({
      container: this.container
    });
  };

  DatasetRouter.prototype.show = function(id) {
    return new ShowRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype.search = function(id) {
    return new SearchRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype.knowledgeCapture = function(id) {
    return new CaptureRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype.config = function(id) {
    return new ConfigRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype["export"] = function(id) {
    return new ExportRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype.edit = function(id) {
    return new EditRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype.destroy = function(id) {
    return new DestroyRoute({
      container: this.container,
      id: id
    });
  };

  DatasetRouter.prototype["new"] = function() {
    return new NewRoute({
      container: this.container
    });
  };

  return DatasetRouter;

})(require('hn_routing/lib/router'));

module.exports = DatasetRouter;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvcm91dGVyLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L3JvdXRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSwySEFBQTtFQUFBOzs7QUFBQSxPQUFBLENBQVEsV0FBUjs7QUFDQSxPQUFBLENBQVEsV0FBUjs7QUFFQSxTQUFBLEdBQWdCLE9BQUEsQ0FBUSxjQUFSOztBQUNoQixTQUFBLEdBQWdCLE9BQUEsQ0FBUSxjQUFSOztBQUNoQixXQUFBLEdBQWdCLE9BQUEsQ0FBUSxnQkFBUjs7QUFDaEIsV0FBQSxHQUFnQixPQUFBLENBQVEsZ0JBQVI7O0FBQ2hCLFFBQUEsR0FBZ0IsT0FBQSxDQUFRLGFBQVI7O0FBQ2hCLFNBQUEsR0FBZ0IsT0FBQSxDQUFRLGNBQVI7O0FBQ2hCLFlBQUEsR0FBZ0IsT0FBQSxDQUFRLGlCQUFSOztBQUNoQixXQUFBLEdBQWdCLE9BQUEsQ0FBUSxnQkFBUjs7QUFDaEIsWUFBQSxHQUFnQixPQUFBLENBQVEsMkJBQVI7O0FBSVY7Ozs7Ozs7MEJBRUosTUFBQSxHQUNFO0lBQUEsYUFBQSxFQUE0QixNQUE1QjtJQUNBLGlCQUFBLEVBQTRCLEtBRDVCO0lBRUEsaUJBQUEsRUFBNEIsTUFGNUI7SUFHQSx3QkFBQSxFQUE0QixRQUg1QjtJQUlBLHlCQUFBLEVBQTRCLGtCQUo1QjtJQUtBLHdCQUFBLEVBQTRCLFFBTDVCO0lBTUEsd0JBQUEsRUFBNEIsUUFONUI7SUFPQSxzQkFBQSxFQUE0QixNQVA1QjtJQVFBLHlCQUFBLEVBQTRCLFNBUjVCOzs7MEJBVUYsSUFBQSxHQUFNLFNBQUE7V0FDSixJQUFJLFNBQUosQ0FBYztNQUFFLFNBQUEsRUFBVyxJQUFDLENBQUEsU0FBZDtLQUFkO0VBREk7OzBCQUdOLElBQUEsR0FBTSxTQUFDLEVBQUQ7V0FDSixJQUFJLFNBQUosQ0FBYztNQUFFLFNBQUEsRUFBVyxJQUFDLENBQUEsU0FBZDtNQUF5QixFQUFBLEVBQUksRUFBN0I7S0FBZDtFQURJOzswQkFHTixNQUFBLEdBQVEsU0FBQyxFQUFEO1dBQ04sSUFBSSxXQUFKLENBQWdCO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO01BQXlCLEVBQUEsRUFBSSxFQUE3QjtLQUFoQjtFQURNOzswQkFHUixnQkFBQSxHQUFrQixTQUFDLEVBQUQ7V0FDaEIsSUFBSSxZQUFKLENBQWlCO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO01BQXlCLEVBQUEsRUFBSSxFQUE3QjtLQUFqQjtFQURnQjs7MEJBR2xCLE1BQUEsR0FBUSxTQUFDLEVBQUQ7V0FDTixJQUFJLFdBQUosQ0FBZ0I7TUFBRSxTQUFBLEVBQVcsSUFBQyxDQUFBLFNBQWQ7TUFBeUIsRUFBQSxFQUFJLEVBQTdCO0tBQWhCO0VBRE07OzJCQUdSLFFBQUEsR0FBUSxTQUFDLEVBQUQ7V0FDTixJQUFJLFdBQUosQ0FBZ0I7TUFBRSxTQUFBLEVBQVcsSUFBQyxDQUFBLFNBQWQ7TUFBeUIsRUFBQSxFQUFJLEVBQTdCO0tBQWhCO0VBRE07OzBCQUdSLElBQUEsR0FBTSxTQUFDLEVBQUQ7V0FDSixJQUFJLFNBQUosQ0FBYztNQUFFLFNBQUEsRUFBVyxJQUFDLENBQUEsU0FBZDtNQUF5QixFQUFBLEVBQUksRUFBN0I7S0FBZDtFQURJOzswQkFHTixPQUFBLEdBQVMsU0FBQyxFQUFEO1dBQ1AsSUFBSSxZQUFKLENBQWlCO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO01BQXlCLEVBQUEsRUFBSSxFQUE3QjtLQUFqQjtFQURPOzsyQkFHVCxLQUFBLEdBQUssU0FBQTtXQUNILElBQUksUUFBSixDQUFhO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO0tBQWI7RUFERzs7OztHQXJDcUIsT0FBQSxDQUFRLHVCQUFSOztBQTBDNUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./config/route":47,"./creator":52,"./destroy/route":53,"./edit/route":57,"./export/route":61,"./factory":64,"./knowledge_capture/route":66,"./list/route":104,"./new/route":111,"./search/route":121,"./show/route":122,"hn_routing/lib/router":208}],121:[function(require,module,exports){
var DatasetSearchRoute, SearchView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SearchView = require('../../search/facetsearch/views/layout');

DatasetSearchRoute = (function(superClass) {
  extend(DatasetSearchRoute, superClass);

  function DatasetSearchRoute() {
    return DatasetSearchRoute.__super__.constructor.apply(this, arguments);
  }

  DatasetSearchRoute.prototype.title = function() {
    return "Magellan - " + (this.model.get('label')) + " - Search";
  };

  DatasetSearchRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        text: 'Archives',
        href: '#datasets'
      }, {
        text: "" + (this.model.get('label')),
        href: "#datasets/" + this.model.id
      }, {
        text: 'Search'
      }
    ];
  };

  DatasetSearchRoute.prototype.fetch = function(id) {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return Backbone.Radio.channel('dataset').request('model', id).then(function(model) {
          _this.model = model;
          return _this.model.fetchDatapoints().then(function(datapoints) {
            _this.datapoints = datapoints;
            return _this.model.fetchFacets().then(function(facetCollection) {
              _this.facetCollection = facetCollection;
              return Backbone.Radio.channel('search:result').request('collection').then(function(collection) {
                _this.collection = collection;
                return resolve();
              });
            });
          });
        });
      };
    })(this));
  };

  DatasetSearchRoute.prototype.render = function() {
    return this.container.show(new SearchView({
      model: this.model,
      collection: this.collection,
      items: this.datapoints,
      facetCollection: this.facetCollection
    }));
  };

  return DatasetSearchRoute;

})(require('hn_routing/lib/route'));

module.exports = DatasetSearchRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2VhcmNoL3JvdXRlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L3NlYXJjaC9yb3V0ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw4QkFBQTtFQUFBOzs7QUFBQSxVQUFBLEdBQWEsT0FBQSxDQUFRLHVDQUFSOztBQUlQOzs7Ozs7OytCQUVKLEtBQUEsR0FBTyxTQUFBO0FBQ0wsV0FBTyxhQUFBLEdBQWEsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBYixHQUFrQztFQURwQzs7K0JBR1AsV0FBQSxHQUFhLFNBQUE7QUFDWCxXQUFPO01BQ0w7UUFBRSxJQUFBLEVBQU0sTUFBUjtRQUFnQixJQUFBLEVBQU0sR0FBdEI7T0FESyxFQUVMO1FBQUUsSUFBQSxFQUFNLFVBQVI7UUFBb0IsSUFBQSxFQUFNLFdBQTFCO09BRkssRUFHTDtRQUFFLElBQUEsRUFBTSxFQUFBLEdBQUUsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQUQsQ0FBVjtRQUFrQyxJQUFBLEVBQU0sWUFBQSxHQUFhLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBNUQ7T0FISyxFQUlMO1FBQUUsSUFBQSxFQUFNLFFBQVI7T0FKSzs7RUFESTs7K0JBVWIsS0FBQSxHQUFPLFNBQUMsRUFBRDtBQUdMLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO2VBQ2pCLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixTQUF2QixDQUFpQyxDQUFDLE9BQWxDLENBQTBDLE9BQTFDLEVBQW1ELEVBQW5ELENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQyxLQUFEO1VBR0osS0FBQyxDQUFBLEtBQUQsR0FBUztpQkFHVCxLQUFDLENBQUEsS0FBSyxDQUFDLGVBQVAsQ0FBQSxDQUF3QixDQUFDLElBQXpCLENBQThCLFNBQUMsVUFBRDtZQUc1QixLQUFDLENBQUEsVUFBRCxHQUFjO21CQUdkLEtBQUMsQ0FBQSxLQUFLLENBQUMsV0FBUCxDQUFBLENBQW9CLENBQUMsSUFBckIsQ0FBMEIsU0FBQyxlQUFEO2NBR3hCLEtBQUMsQ0FBQSxlQUFELEdBQW1CO3FCQUduQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsZUFBdkIsQ0FBdUMsQ0FBQyxPQUF4QyxDQUFnRCxZQUFoRCxDQUE2RCxDQUFDLElBQTlELENBQW1FLFNBQUMsVUFBRDtnQkFHakUsS0FBQyxDQUFBLFVBQUQsR0FBYztBQUdkLHVCQUFPLE9BQUEsQ0FBQTtjQU4wRCxDQUFuRTtZQU53QixDQUExQjtVQU40QixDQUE5QjtRQU5JLENBRE47TUFEaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVo7RUFIRjs7K0JBK0JQLE1BQUEsR0FBUSxTQUFBO1dBQ04sSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLENBQWdCLElBQUksVUFBSixDQUFlO01BQUUsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUFWO01BQWlCLFVBQUEsRUFBWSxJQUFDLENBQUEsVUFBOUI7TUFBMEMsS0FBQSxFQUFPLElBQUMsQ0FBQSxVQUFsRDtNQUE4RCxlQUFBLEVBQWlCLElBQUMsQ0FBQSxlQUFoRjtLQUFmLENBQWhCO0VBRE07Ozs7R0E5Q3VCLE9BQUEsQ0FBUSxzQkFBUjs7QUFtRGpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"../../search/facetsearch/views/layout":163,"hn_routing/lib/route":207}],122:[function(require,module,exports){
var LayoutView, ShowDatasetRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

ShowDatasetRoute = (function(superClass) {
  extend(ShowDatasetRoute, superClass);

  function ShowDatasetRoute() {
    return ShowDatasetRoute.__super__.constructor.apply(this, arguments);
  }

  ShowDatasetRoute.prototype.title = function() {
    return "Magellan - " + (this.model.get('label'));
  };

  ShowDatasetRoute.prototype.breadcrumbs = function() {
    return [
      {
        text: 'Home',
        href: '#'
      }, {
        text: 'Archives',
        href: '#datasets'
      }, {
        text: this.model.get('label')
      }
    ];
  };

  ShowDatasetRoute.prototype.fetch = function(id) {
    return Backbone.Radio.channel('dataset').request('model', id).then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  ShowDatasetRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return ShowDatasetRoute;

})(require('hn_routing/lib/route'));

module.exports = ShowDatasetRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2hvdy9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9zaG93L3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLDRCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYSxPQUFBLENBQVEsZ0JBQVI7O0FBSVA7Ozs7Ozs7NkJBRUosS0FBQSxHQUFPLFNBQUE7QUFDTCxXQUFPLGFBQUEsR0FBYSxDQUFDLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBRDtFQURmOzs2QkFHUCxXQUFBLEdBQWEsU0FBQTtBQUNYLFdBQU87TUFDTDtRQUFFLElBQUEsRUFBTSxNQUFSO1FBQWdCLElBQUEsRUFBTSxHQUF0QjtPQURLLEVBRUw7UUFBRSxJQUFBLEVBQU0sVUFBUjtRQUFvQixJQUFBLEVBQU0sV0FBMUI7T0FGSyxFQUdMO1FBQUUsSUFBQSxFQUFNLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBUjtPQUhLOztFQURJOzs2QkFPYixLQUFBLEdBQU8sU0FBQyxFQUFEO1dBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsT0FBMUMsRUFBbUQsRUFBbkQsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUFXLEtBQUMsQ0FBQSxLQUFELEdBQVM7TUFBcEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE47RUFESzs7NkJBSVAsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZixDQUFoQjtFQURNOzs7O0dBaEJxQixPQUFBLENBQVEsc0JBQVI7O0FBcUIvQixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./views/layout":123,"hn_routing/lib/route":207}],123:[function(require,module,exports){
var ShowDatasetLayout, UploadWidget,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

UploadWidget = require('../../../base/views/upload/upload');

ShowDatasetLayout = (function(superClass) {
  extend(ShowDatasetLayout, superClass);

  function ShowDatasetLayout() {
    return ShowDatasetLayout.__super__.constructor.apply(this, arguments);
  }

  ShowDatasetLayout.prototype.template = require('./templates/layout');

  ShowDatasetLayout.prototype.className = 'container';

  return ShowDatasetLayout;

})(Mn.LayoutView);

module.exports = ShowDatasetLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2hvdy92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2hvdy92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsK0JBQUE7RUFBQTs7O0FBQUEsWUFBQSxHQUFlLE9BQUEsQ0FBUSxtQ0FBUjs7QUFJVDs7Ozs7Ozs4QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzs4QkFDVixTQUFBLEdBQVc7Ozs7R0FGbUIsRUFBRSxDQUFDOztBQU1uQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"../../../base/views/upload/upload":36,"./templates/layout":124}],124:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (_s, count, id, label) {
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-8\"><h4 class=\"card-title\">" + (jade.escape(null == (jade_interp = label) ? "" : jade_interp)) + "</h4></div><div class=\"col-lg-4 text-right\"><a" + (jade.attr("href", "#datasets/" + (id) + "/edit", true, false)) + " class=\"btn btn-outline-secondary mr-2\"><i class=\"fa fa-fw fa-pencil\"></i>&nbsp;\nEdit</a><a" + (jade.attr("href", "#datasets/" + (id) + "/destroy", true, false)) + " class=\"btn btn-outline-danger\"><i class=\"fa fa-fw fa-trash\"></i>&nbsp;\nDestroy</a></div><div class=\"col-lg-12\"><hr/></div></div><div class=\"row\"><div class=\"col-lg-12\"><p class=\"lead\">" + (jade.escape((jade_interp = _s.numberFormat(count)) == null ? '' : jade_interp)) + " Items</p></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/capture", true, false)) + " class=\"btn btn-lg btn-outline-primary w-100\"><i class=\"fa fa-fw fa-paperclip\"></i>&nbsp;\nKnowledge Capture</a></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/search", true, false)) + " class=\"btn btn-lg btn-outline-success w-100\"><i class=\"fa fa-fw fa-search\"></i>&nbsp;\nSearch</a></div><div class=\"col-lg-4\"><a" + (jade.attr("href", "#datasets/" + (id) + "/export", true, false)) + " class=\"btn btn-lg btn-outline-success w-100\"><i class=\"fa fa-fw fa-cloud-download\"></i>&nbsp;\nExport</a></div></div></div></div></div>");}.call(this,"_s" in locals_for_with?locals_for_with._s:typeof _s!=="undefined"?_s:undefined,"count" in locals_for_with?locals_for_with.count:typeof count!=="undefined"?count:undefined,"id" in locals_for_with?locals_for_with.id:typeof id!=="undefined"?id:undefined,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined));;return buf.join("");
};
},{"jade/runtime":209}],125:[function(require,module,exports){
var DexieService,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

DexieService = (function(superClass) {
  extend(DexieService, superClass);

  function DexieService() {
    this.onDexieReady = bind(this.onDexieReady, this);
    return DexieService.__super__.constructor.apply(this, arguments);
  }

  DexieService.prototype.radioRequests = {
    'db add': 'addDocument',
    'db delete': 'deleteDocument',
    'db db': 'getDb'
  };

  DexieService.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.db = new Dexie(options.db);
    this.schema = options.schema;
    this.version = options.version || 1;
    window.db = this.db;
    this.ensureSchema();
    this.db.on('ready', this.onDexieReady);
    return this.db.open();
  };

  DexieService.prototype.onDexieReady = function() {
    return this.ensureDocuments().then((function(_this) {
      return function(results) {
        var isValid;
        isValid = _this.validateDocumentCount(results);
        if (isValid) {
          return _this.startApp();
        }
        return _this.populateTables();
      };
    })(this));
  };

  DexieService.prototype.validateDocumentCount = function(results) {
    if (_.isEmpty(results)) {
      return true;
    }
    results.push(-1);
    if (_.min(results) > 0) {
      return true;
    }
    return false;
  };

  DexieService.prototype.startApp = function() {
    return Backbone.Radio.channel('db').trigger('ready');
  };

  DexieService.prototype.ensureSchema = function() {
    var i, len, ref, table;
    ref = this.schema;
    for (i = 0, len = ref.length; i < len; i++) {
      table = ref[i];
      if (this.db[table.name]) {
        continue;
      }
      return this.addSchema();
    }
  };

  DexieService.prototype.addSchema = function() {
    var i, len, ref, schemaDefinition, table;
    schemaDefinition = {};
    ref = this.schema;
    for (i = 0, len = ref.length; i < len; i++) {
      table = ref[i];
      schemaDefinition[table.name] = table.attrs;
    }
    this.db.version(this.version).stores(schemaDefinition);
    return true;
  };

  DexieService.prototype.ensureDocuments = function() {
    var countPromises, i, len, ref, table;
    countPromises = [];
    ref = this.schema;
    for (i = 0, len = ref.length; i < len; i++) {
      table = ref[i];
      if (!table.ensureDocuments) {
        continue;
      }
      countPromises.push(this.db[table.name].count());
    }
    return Promise.all(countPromises);
  };

  DexieService.prototype.populateTables = function() {
    if (window.global && window.global.ServerRadio) {
      window.global.ServerRadio.trigger('populate');
    } else {

    }
    return this.startApp();
  };

  DexieService.prototype.addDocument = function(table, doc) {
    return this.db[table].add(doc);
  };

  DexieService.prototype.deleteDocument = function(table, document_id) {
    return this.db[table]["delete"](document_id);
  };

  DexieService.prototype.getDb = function() {
    return this.db;
  };

  return DexieService;

})(Marionette.Service);

module.exports = DexieService;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RiL3NlcnZpY2UuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RiL3NlcnZpY2UuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLElBQUEsWUFBQTtFQUFBOzs7O0FBQU07Ozs7Ozs7O3lCQUVKLGFBQUEsR0FDRTtJQUFBLFFBQUEsRUFBYyxhQUFkO0lBQ0EsV0FBQSxFQUFjLGdCQURkO0lBRUEsT0FBQSxFQUFjLE9BRmQ7Ozt5QkFJRixVQUFBLEdBQVksU0FBQyxPQUFEOztNQUFDLFVBQVE7O0lBSW5CLElBQUMsQ0FBQSxFQUFELEdBQVksSUFBSSxLQUFKLENBQVUsT0FBTyxDQUFDLEVBQWxCO0lBQ1osSUFBQyxDQUFBLE1BQUQsR0FBWSxPQUFPLENBQUM7SUFDcEIsSUFBQyxDQUFBLE9BQUQsR0FBWSxPQUFPLENBQUMsT0FBUixJQUFtQjtJQUcvQixNQUFNLENBQUMsRUFBUCxHQUFZLElBQUMsQ0FBQTtJQUdiLElBQUMsQ0FBQSxZQUFELENBQUE7SUFJQSxJQUFDLENBQUEsRUFBRSxDQUFDLEVBQUosQ0FBTyxPQUFQLEVBQWdCLElBQUMsQ0FBQSxZQUFqQjtXQUdBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFBO0VBbkJVOzt5QkFzQlosWUFBQSxHQUFjLFNBQUE7V0FJWixJQUFDLENBQUEsZUFBRCxDQUFBLENBQ0EsQ0FBQyxJQURELENBQ00sQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQ7QUFHSixZQUFBO1FBQUEsT0FBQSxHQUFVLEtBQUMsQ0FBQSxxQkFBRCxDQUF1QixPQUF2QjtRQUdWLElBQXNCLE9BQXRCO0FBQUEsaUJBQU8sS0FBQyxDQUFBLFFBQUQsQ0FBQSxFQUFQOztBQUdBLGVBQU8sS0FBQyxDQUFBLGNBQUQsQ0FBQTtNQVRIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUROO0VBSlk7O3lCQWlCZCxxQkFBQSxHQUF1QixTQUFDLE9BQUQ7SUFHckIsSUFBZSxDQUFDLENBQUMsT0FBRixDQUFVLE9BQVYsQ0FBZjtBQUFBLGFBQU8sS0FBUDs7SUFHQSxPQUFPLENBQUMsSUFBUixDQUFhLENBQUMsQ0FBZDtJQUdBLElBQWUsQ0FBQyxDQUFDLEdBQUYsQ0FBTSxPQUFOLENBQUEsR0FBaUIsQ0FBaEM7QUFBQSxhQUFPLEtBQVA7O0FBR0EsV0FBTztFQVpjOzt5QkFldkIsUUFBQSxHQUFVLFNBQUE7V0FDUixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsSUFBdkIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxPQUFyQztFQURROzt5QkFLVixZQUFBLEdBQWMsU0FBQTtBQUVaLFFBQUE7QUFBQTtBQUFBLFNBQUEscUNBQUE7O01BQ0UsSUFBWSxJQUFDLENBQUEsRUFBRyxDQUFBLEtBQUssQ0FBQyxJQUFOLENBQWhCO0FBQUEsaUJBQUE7O0FBQ0EsYUFBTyxJQUFDLENBQUEsU0FBRCxDQUFBO0FBRlQ7RUFGWTs7eUJBT2QsU0FBQSxHQUFXLFNBQUE7QUFJVCxRQUFBO0lBQUEsZ0JBQUEsR0FBbUI7QUFHbkI7QUFBQSxTQUFBLHFDQUFBOztNQUdFLGdCQUFpQixDQUFBLEtBQUssQ0FBQyxJQUFOLENBQWpCLEdBQStCLEtBQUssQ0FBQztBQUh2QztJQU1BLElBQUMsQ0FBQSxFQUFFLENBQUMsT0FBSixDQUFZLElBQUMsQ0FBQSxPQUFiLENBQXFCLENBQUMsTUFBdEIsQ0FBNkIsZ0JBQTdCO0FBQ0EsV0FBTztFQWRFOzt5QkFvQlgsZUFBQSxHQUFpQixTQUFBO0FBR2YsUUFBQTtJQUFBLGFBQUEsR0FBZ0I7QUFHaEI7QUFBQSxTQUFBLHFDQUFBOztNQUdFLElBQUEsQ0FBZ0IsS0FBSyxDQUFDLGVBQXRCO0FBQUEsaUJBQUE7O01BR0EsYUFBYSxDQUFDLElBQWQsQ0FBb0IsSUFBQyxDQUFBLEVBQUcsQ0FBQSxLQUFLLENBQUMsSUFBTixDQUFXLENBQUMsS0FBaEIsQ0FBQSxDQUFwQjtBQU5GO0FBU0EsV0FBTyxPQUFPLENBQUMsR0FBUixDQUFZLGFBQVo7RUFmUTs7eUJBb0JqQixjQUFBLEdBQWdCLFNBQUE7SUFJZCxJQUFHLE1BQU0sQ0FBQyxNQUFQLElBQWlCLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBbEM7TUFDRSxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUExQixDQUFrQyxVQUFsQyxFQURGO0tBQUEsTUFBQTtBQUFBOztXQU9BLElBQUMsQ0FBQSxRQUFELENBQUE7RUFYYzs7eUJBZWhCLFdBQUEsR0FBYSxTQUFDLEtBQUQsRUFBUSxHQUFSO1dBQ1gsSUFBQyxDQUFBLEVBQUcsQ0FBQSxLQUFBLENBQU0sQ0FBQyxHQUFYLENBQWUsR0FBZjtFQURXOzt5QkFLYixjQUFBLEdBQWdCLFNBQUMsS0FBRCxFQUFRLFdBQVI7V0FDZCxJQUFDLENBQUEsRUFBRyxDQUFBLEtBQUEsQ0FBTSxFQUFDLE1BQUQsRUFBVixDQUFrQixXQUFsQjtFQURjOzt5QkFHaEIsS0FBQSxHQUFPLFNBQUE7QUFDTCxXQUFPLElBQUMsQ0FBQTtFQURIOzs7O0dBeElrQixVQUFVLENBQUM7O0FBNkl0QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],126:[function(require,module,exports){
var FacetCollection, FacetModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetModel = (function(superClass) {
  extend(FacetModel, superClass);

  function FacetModel() {
    return FacetModel.__super__.constructor.apply(this, arguments);
  }

  FacetModel.prototype.urlRoot = 'facet';

  FacetModel.prototype.save = function() {
    return Backbone.Radio.channel('facet').request('save', this);
  };

  FacetModel.prototype.destroy = function() {
    return Backbone.Radio.channel('facet').request('destroy', this);
  };

  FacetModel.prototype.linkToOntology = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var attr, ont_attr, ont_prefix;
        attr = _this.get('attribute');
        if (attr === '@id' || attr === '@type') {
          return resolve(true);
        }
        if (attr.indexOf(':') < 0) {
          return resolve(true);
        }
        attr = attr.split(':');
        ont_prefix = attr[0];
        ont_attr = attr[1];
        return Backbone.Radio.channel('ontology').request('attribute', ont_prefix, ont_attr).then(function(ontologyAttribute) {
          var pluckAttr, update;
          if (!ontologyAttribute) {
            return resolve(true);
          }
          pluckAttr = function(attr) {
            if (typeof attr === 'string') {
              return attr;
            }
            if (typeof attr === 'object') {
              return attr['@value'];
            }
          };
          update = {
            label: pluckAttr(ontologyAttribute['rdfs:label']),
            tooltip: pluckAttr(ontologyAttribute['rdfs:comment'])
          };
          _this.set(update);
          return _this.save().then(function() {
            return resolve(true);
          })["catch"](function(err) {
            return reject(err);
          });
        });
      };
    })(this));
  };

  return FacetModel;

})(Backbone.Model);

FacetCollection = (function(superClass) {
  extend(FacetCollection, superClass);

  function FacetCollection() {
    return FacetCollection.__super__.constructor.apply(this, arguments);
  }

  FacetCollection.prototype.model = FacetModel;

  FacetCollection.prototype.comparator = 'order';

  FacetCollection.prototype.getEnabled = function() {
    var facet, facets, i, len, ref;
    this.sort();
    facets = [];
    ref = this.where({
      enabled: true
    });
    for (i = 0, len = ref.length; i < len; i++) {
      facet = ref[i];
      facets.push(facet.toJSON());
    }
    return facets;
  };

  FacetCollection.prototype.linkAllFacets = function() {
    var linkFacet;
    linkFacet = (function(_this) {
      return function(facet) {
        return facet.linkToOntology();
      };
    })(this);
    return Promise.each(this.models, linkFacet);
  };

  return FacetCollection;

})(Backbone.Collection);

module.exports = {
  Model: FacetModel,
  Collection: FacetCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2ZhY2V0L2VudGl0aWVzLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9mYWNldC9lbnRpdGllcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSwyQkFBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt1QkFDSixPQUFBLEdBQVM7O3VCQUdULElBQUEsR0FBTSxTQUFBO0FBQ0osV0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsT0FBdkIsQ0FBK0IsQ0FBQyxPQUFoQyxDQUF3QyxNQUF4QyxFQUFnRCxJQUFoRDtFQURIOzt1QkFJTixPQUFBLEdBQVMsU0FBQTtBQUNQLFdBQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLE9BQXZCLENBQStCLENBQUMsT0FBaEMsQ0FBd0MsU0FBeEMsRUFBbUQsSUFBbkQ7RUFEQTs7dUJBS1QsY0FBQSxHQUFnQixTQUFBO0FBR2QsV0FBTyxJQUFJLE9BQUosQ0FBWSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsT0FBRCxFQUFVLE1BQVY7QUFHakIsWUFBQTtRQUFBLElBQUEsR0FBTyxLQUFDLENBQUEsR0FBRCxDQUFLLFdBQUw7UUFHUCxJQUF3QixJQUFBLEtBQVMsS0FBVCxJQUFBLElBQUEsS0FBZ0IsT0FBeEM7QUFBQSxpQkFBTyxPQUFBLENBQVEsSUFBUixFQUFQOztRQUNBLElBQXdCLElBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUFBLEdBQW9CLENBQTVDO0FBQUEsaUJBQU8sT0FBQSxDQUFRLElBQVIsRUFBUDs7UUFHQSxJQUFBLEdBQWMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYO1FBQ2QsVUFBQSxHQUFjLElBQUssQ0FBQSxDQUFBO1FBQ25CLFFBQUEsR0FBYyxJQUFLLENBQUEsQ0FBQTtlQUduQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsVUFBdkIsQ0FBa0MsQ0FBQyxPQUFuQyxDQUEyQyxXQUEzQyxFQUF3RCxVQUF4RCxFQUFvRSxRQUFwRSxDQUNBLENBQUMsSUFERCxDQUNNLFNBQUMsaUJBQUQ7QUFHSixjQUFBO1VBQUEsSUFBQSxDQUE0QixpQkFBNUI7QUFBQSxtQkFBTyxPQUFBLENBQVEsSUFBUixFQUFQOztVQUdBLFNBQUEsR0FBWSxTQUFDLElBQUQ7WUFDVixJQUFHLE9BQU8sSUFBUCxLQUFnQixRQUFuQjtBQUNFLHFCQUFPLEtBRFQ7O1lBR0EsSUFBRyxPQUFPLElBQVAsS0FBZ0IsUUFBbkI7QUFDRSxxQkFBTyxJQUFLLENBQUEsUUFBQSxFQURkOztVQUpVO1VBVVosTUFBQSxHQUNFO1lBQUEsS0FBQSxFQUFVLFNBQUEsQ0FBVSxpQkFBa0IsQ0FBQSxZQUFBLENBQTVCLENBQVY7WUFDQSxPQUFBLEVBQVUsU0FBQSxDQUFVLGlCQUFrQixDQUFBLGNBQUEsQ0FBNUIsQ0FEVjs7VUFJRixLQUFDLENBQUEsR0FBRCxDQUFLLE1BQUw7aUJBR0EsS0FBQyxDQUFBLElBQUQsQ0FBQSxDQUNBLENBQUMsSUFERCxDQUNNLFNBQUE7QUFBTSxtQkFBTyxPQUFBLENBQVEsSUFBUjtVQUFiLENBRE4sQ0FFQSxFQUFDLEtBQUQsRUFGQSxDQUVPLFNBQUMsR0FBRDtBQUFTLG1CQUFPLE1BQUEsQ0FBTyxHQUFQO1VBQWhCLENBRlA7UUF4QkksQ0FETjtNQWZpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQUhPOzs7O0dBYk8sUUFBUSxDQUFDOztBQThENUI7Ozs7Ozs7NEJBQ0osS0FBQSxHQUFPOzs0QkFDUCxVQUFBLEdBQVk7OzRCQUVaLFVBQUEsR0FBWSxTQUFBO0FBQ1YsUUFBQTtJQUFBLElBQUMsQ0FBQSxJQUFELENBQUE7SUFDQSxNQUFBLEdBQVM7QUFDVDs7O0FBQUEsU0FBQSxxQ0FBQTs7TUFBQSxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUssQ0FBQyxNQUFOLENBQUEsQ0FBWjtBQUFBO0FBQ0EsV0FBTztFQUpHOzs0QkFRWixhQUFBLEdBQWUsU0FBQTtBQUdiLFFBQUE7SUFBQSxTQUFBLEdBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLEtBQUQ7QUFBVyxlQUFPLEtBQUssQ0FBQyxjQUFOLENBQUE7TUFBbEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0FBR1osV0FBTyxPQUFPLENBQUMsSUFBUixDQUFhLElBQUMsQ0FBQSxNQUFkLEVBQXNCLFNBQXRCO0VBTk07Ozs7R0FaYSxRQUFRLENBQUM7O0FBc0J2QyxNQUFNLENBQUMsT0FBUCxHQUNFO0VBQUEsS0FBQSxFQUFZLFVBQVo7RUFDQSxVQUFBLEVBQVksZUFEWiJ9

},{}],127:[function(require,module,exports){
var DexieFactory, Entities, FacetFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

FacetFactory = (function(superClass) {
  extend(FacetFactory, superClass);

  function FacetFactory() {
    return FacetFactory.__super__.constructor.apply(this, arguments);
  }

  FacetFactory.prototype.tableName = 'facets';

  FacetFactory.prototype.radioRequests = {
    'facet collection': 'getCollection',
    'facet save': 'saveModel',
    'facet destroy': 'destroyModel',
    'facet link:all': 'linkAllFacets'
  };

  FacetFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  FacetFactory.prototype.linkAllFacets = function() {
    return this.cachedCollection.linkAllFacets();
  };

  return FacetFactory;

})(DexieFactory);

module.exports = new FacetFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2ZhY2V0L2ZhY3RvcnkuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2ZhY2V0L2ZhY3RvcnkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsb0NBQUE7RUFBQTs7O0FBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSOztBQUNYLFlBQUEsR0FBZ0IsT0FBQSxDQUFRLHNCQUFSOztBQUlWOzs7Ozs7O3lCQUdKLFNBQUEsR0FBVzs7eUJBR1gsYUFBQSxHQUNFO0lBQUEsa0JBQUEsRUFBb0IsZUFBcEI7SUFDQSxZQUFBLEVBQW9CLFdBRHBCO0lBRUEsZUFBQSxFQUFvQixjQUZwQjtJQUdBLGdCQUFBLEVBQW9CLGVBSHBCOzs7eUJBS0YsVUFBQSxHQUFZLFNBQUE7V0FDVixJQUFDLENBQUEsZ0JBQUQsR0FBb0IsSUFBSSxRQUFRLENBQUMsVUFBYixDQUFBO0VBRFY7O3lCQUdaLGFBQUEsR0FBZSxTQUFBO0FBQ2IsV0FBTyxJQUFDLENBQUEsZ0JBQWdCLENBQUMsYUFBbEIsQ0FBQTtFQURNOzs7O0dBZlU7O0FBb0IzQixNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLFlBQUosQ0FBQSJ9

},{"../base/dexieFactory":34,"./entities":126}],128:[function(require,module,exports){
var AbstractRuleEntities, KnowledgeRuleCollection, KnowledgeRuleModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

AbstractRuleEntities = require('../abstract_rule/entities');

KnowledgeRuleModel = (function(superClass) {
  extend(KnowledgeRuleModel, superClass);

  function KnowledgeRuleModel() {
    return KnowledgeRuleModel.__super__.constructor.apply(this, arguments);
  }

  KnowledgeRuleModel.prototype.radioChannel = 'knowledge:rule';

  return KnowledgeRuleModel;

})(AbstractRuleEntities.Model);

KnowledgeRuleModel.setup();

KnowledgeRuleCollection = (function(superClass) {
  extend(KnowledgeRuleCollection, superClass);

  function KnowledgeRuleCollection() {
    return KnowledgeRuleCollection.__super__.constructor.apply(this, arguments);
  }

  KnowledgeRuleCollection.prototype.model = KnowledgeRuleModel;

  KnowledgeRuleCollection.prototype.target_object = 'data';

  return KnowledgeRuleCollection;

})(AbstractRuleEntities.Collection);

module.exports = {
  Model: KnowledgeRuleModel,
  Collection: KnowledgeRuleCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2tub3dsZWRnZV9ydWxlL2VudGl0aWVzLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9rbm93bGVkZ2VfcnVsZS9lbnRpdGllcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxpRUFBQTtFQUFBOzs7QUFBQSxvQkFBQSxHQUF1QixPQUFBLENBQVEsMkJBQVI7O0FBS2pCOzs7Ozs7OytCQUdKLFlBQUEsR0FBYzs7OztHQUhpQixvQkFBb0IsQ0FBQzs7QUFRdEQsa0JBQWtCLENBQUMsS0FBbkIsQ0FBQTs7QUFLTTs7Ozs7OztvQ0FDSixLQUFBLEdBQU87O29DQUdQLGFBQUEsR0FBZTs7OztHQUpxQixvQkFBb0IsQ0FBQzs7QUFRM0QsTUFBTSxDQUFDLE9BQVAsR0FDRTtFQUFBLEtBQUEsRUFBWSxrQkFBWjtFQUNBLFVBQUEsRUFBWSx1QkFEWiJ9

},{"../abstract_rule/entities":33}],129:[function(require,module,exports){
var DexieFactory, Entities, KnowledgeRuleFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

KnowledgeRuleFactory = (function(superClass) {
  extend(KnowledgeRuleFactory, superClass);

  function KnowledgeRuleFactory() {
    return KnowledgeRuleFactory.__super__.constructor.apply(this, arguments);
  }

  KnowledgeRuleFactory.prototype.tableName = 'knowledge_rules';

  KnowledgeRuleFactory.prototype.radioRequests = {
    'knowledge:rule collection': 'getCollection',
    'knowledge:rule save': 'saveModel',
    'knowledge:rule destroy': 'destroyModel'
  };

  KnowledgeRuleFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  return KnowledgeRuleFactory;

})(DexieFactory);

module.exports = new KnowledgeRuleFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2tub3dsZWRnZV9ydWxlL2ZhY3RvcnkuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2tub3dsZWRnZV9ydWxlL2ZhY3RvcnkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsNENBQUE7RUFBQTs7O0FBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSOztBQUNYLFlBQUEsR0FBZ0IsT0FBQSxDQUFRLHNCQUFSOztBQUlWOzs7Ozs7O2lDQUdKLFNBQUEsR0FBVzs7aUNBR1gsYUFBQSxHQUNFO0lBQUEsMkJBQUEsRUFBOEIsZUFBOUI7SUFDQSxxQkFBQSxFQUE4QixXQUQ5QjtJQUVBLHdCQUFBLEVBQThCLGNBRjlCOzs7aUNBSUYsVUFBQSxHQUFZLFNBQUE7V0FDVixJQUFDLENBQUEsZ0JBQUQsR0FBb0IsSUFBSSxRQUFRLENBQUMsVUFBYixDQUFBO0VBRFY7Ozs7R0FYcUI7O0FBZ0JuQyxNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLG9CQUFKLENBQUEifQ==

},{"../base/dexieFactory":34,"./entities":128}],130:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (json, undefined) {
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><pre>");
// iterate json
;(function(){
  var $$obj = json;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var each = $$obj[$index];

buf.push("<span>" + (jade.escape(null == (jade_interp = each) ? "" : jade_interp)) + "</span>");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var each = $$obj[$index];

buf.push("<span>" + (jade.escape(null == (jade_interp = each) ? "" : jade_interp)) + "</span>");
    }

  }
}).call(this);

buf.push("</pre></div></div>");}.call(this,"json" in locals_for_with?locals_for_with.json:typeof json!=="undefined"?json:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined));;return buf.join("");
};
},{"jade/runtime":209}],131:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (span, stacked) {
buf.push("<div class=\"row\">");
if ( stacked)
{
buf.push("<div data-region=\"nav\"" + (jade.cls(["col-xs-" + (span) + ""], [true])) + "></div><div data-region=\"content\"" + (jade.cls(["col-xs-" + (12-span) + ""], [true])) + "></div>");
}
else
{
buf.push("<div class=\"col-lg-12\"><div class=\"row\"><div data-region=\"nav\" class=\"col-lg-12\"></div></div><div class=\"row mt-2\"><div data-region=\"content\" class=\"col-lg-12\"></div></div></div>");
}
buf.push("</div>");}.call(this,"span" in locals_for_with?locals_for_with.span:typeof span!=="undefined"?span:undefined,"stacked" in locals_for_with?locals_for_with.stacked:typeof stacked!=="undefined"?stacked:undefined));;return buf.join("");
};
},{"jade/runtime":209}],132:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (dropdown, href, icon, linkCss, text, trigger, undefined) {
if ( !dropdown)
{
buf.push("<a" + (jade.attr("href", href, true, false)) + (jade.attr("data-trigger", trigger, true, false)) + (jade.cls(['nav-link','cursor-pointer',linkCss], [null,null,true])) + ">");
if ( icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = text) ? "" : jade_interp)) + "</a>");
}
else
{
buf.push("<a data-toggle=\"dropdown\" class=\"nav-link cursor-pointer dropdown-toggle\">");
if ( icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = text) ? "" : jade_interp)) + "</a><div class=\"dropdown-menu w-100\">");
// iterate dropdown
;(function(){
  var $$obj = dropdown;
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var item = $$obj[$index];

buf.push("<a class=\"dropdown-item\">" + (jade.escape(null == (jade_interp = item.text) ? "" : jade_interp)) + "</a>");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var item = $$obj[$index];

buf.push("<a class=\"dropdown-item\">" + (jade.escape(null == (jade_interp = item.text) ? "" : jade_interp)) + "</a>");
    }

  }
}).call(this);

buf.push("</div>");
}}.call(this,"dropdown" in locals_for_with?locals_for_with.dropdown:typeof dropdown!=="undefined"?dropdown:undefined,"href" in locals_for_with?locals_for_with.href:typeof href!=="undefined"?href:undefined,"icon" in locals_for_with?locals_for_with.icon:typeof icon!=="undefined"?icon:undefined,"linkCss" in locals_for_with?locals_for_with.linkCss:typeof linkCss!=="undefined"?linkCss:undefined,"text" in locals_for_with?locals_for_with.text:typeof text!=="undefined"?text:undefined,"trigger" in locals_for_with?locals_for_with.trigger:typeof trigger!=="undefined"?trigger:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined));;return buf.join("");
};
},{"jade/runtime":209}],133:[function(require,module,exports){
var SettingsFactory, SettingsModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SettingsModel = (function(superClass) {
  extend(SettingsModel, superClass);

  function SettingsModel() {
    return SettingsModel.__super__.constructor.apply(this, arguments);
  }

  SettingsModel.prototype.url = 'settings';

  SettingsModel.prototype.defaults = {};

  return SettingsModel;

})(Backbone.Model);

SettingsFactory = (function(superClass) {
  extend(SettingsFactory, superClass);

  function SettingsFactory() {
    return SettingsFactory.__super__.constructor.apply(this, arguments);
  }

  SettingsFactory.prototype.radioRequests = {
    'settings model': 'getModel'
  };

  SettingsFactory.prototype.initialize = function() {
    return this.settingsModel = new SettingsModel();
  };

  SettingsFactory.prototype.getModel = function() {
    return this.settingsModel;
  };

  return SettingsFactory;

})(Marionette.Service);

module.exports = new SettingsFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vZmFjdG9yeS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi9mYWN0b3J5LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLDhCQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzBCQUNKLEdBQUEsR0FBSzs7MEJBQ0wsUUFBQSxHQUFVOzs7O0dBRmdCLFFBQVEsQ0FBQzs7QUFNL0I7Ozs7Ozs7NEJBRUosYUFBQSxHQUNFO0lBQUEsZ0JBQUEsRUFBbUIsVUFBbkI7Ozs0QkFFRixVQUFBLEdBQVksU0FBQTtXQUNWLElBQUMsQ0FBQSxhQUFELEdBQWlCLElBQUksYUFBSixDQUFBO0VBRFA7OzRCQUdaLFFBQUEsR0FBVSxTQUFBO0FBQ1IsV0FBTyxJQUFDLENBQUE7RUFEQTs7OztHQVJrQixVQUFVLENBQUM7O0FBYXpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLElBQUksZUFBSixDQUFBIn0=

},{}],134:[function(require,module,exports){
var MainRouter, SettingsRoute, WelcomeRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./factory');

WelcomeRoute = require('./welcome/route');

SettingsRoute = require('./settings/route');

MainRouter = (function(superClass) {
  extend(MainRouter, superClass);

  function MainRouter() {
    return MainRouter.__super__.constructor.apply(this, arguments);
  }

  MainRouter.prototype.routes = {
    '(/)': 'welcome',
    'settings(/)': 'settings'
  };

  MainRouter.prototype.welcome = function() {
    return new WelcomeRoute({
      container: this.container
    });
  };

  MainRouter.prototype.settings = function() {
    return new SettingsRoute({
      container: this.container
    });
  };

  return MainRouter;

})(require('hn_routing/lib/router'));

module.exports = MainRouter;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vcm91dGVyLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9tYWluL3JvdXRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx1Q0FBQTtFQUFBOzs7QUFBQSxPQUFBLENBQVEsV0FBUjs7QUFFQSxZQUFBLEdBQWUsT0FBQSxDQUFRLGlCQUFSOztBQUNmLGFBQUEsR0FBZ0IsT0FBQSxDQUFRLGtCQUFSOztBQUtWOzs7Ozs7O3VCQUVKLE1BQUEsR0FDRTtJQUFBLEtBQUEsRUFBZ0IsU0FBaEI7SUFDQSxhQUFBLEVBQWdCLFVBRGhCOzs7dUJBR0YsT0FBQSxHQUFTLFNBQUE7V0FDUCxJQUFJLFlBQUosQ0FBaUI7TUFBRSxTQUFBLEVBQVcsSUFBQyxDQUFBLFNBQWQ7S0FBakI7RUFETzs7dUJBR1QsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFJLGFBQUosQ0FBa0I7TUFBRSxTQUFBLEVBQVcsSUFBQyxDQUFBLFNBQWQ7S0FBbEI7RUFEUTs7OztHQVRhLE9BQUEsQ0FBUSx1QkFBUjs7QUFjekIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./factory":133,"./settings/route":135,"./welcome/route":138,"hn_routing/lib/router":208}],135:[function(require,module,exports){
var LayoutView, SearchSettingsRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

SearchSettingsRoute = (function(superClass) {
  extend(SearchSettingsRoute, superClass);

  function SearchSettingsRoute() {
    return SearchSettingsRoute.__super__.constructor.apply(this, arguments);
  }

  SearchSettingsRoute.prototype.title = 'Magellan - Settings';

  SearchSettingsRoute.prototype.breadcrumbs = [
    {
      href: '#',
      text: 'Home'
    }, {
      text: 'Settings'
    }
  ];

  SearchSettingsRoute.prototype.fetch = function() {
    return this.model = Backbone.Radio.channel('settings').request('model');
  };

  SearchSettingsRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return SearchSettingsRoute;

})(require('hn_routing/lib/route'));

module.exports = SearchSettingsRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vc2V0dGluZ3Mvcm91dGUuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vc2V0dGluZ3Mvcm91dGUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsK0JBQUE7RUFBQTs7O0FBQUEsVUFBQSxHQUFjLE9BQUEsQ0FBUSxnQkFBUjs7QUFJUjs7Ozs7OztnQ0FFSixLQUFBLEdBQU87O2dDQUVQLFdBQUEsR0FBYTtJQUNYO01BQUUsSUFBQSxFQUFNLEdBQVI7TUFBYSxJQUFBLEVBQU0sTUFBbkI7S0FEVyxFQUVYO01BQUUsSUFBQSxFQUFNLFVBQVI7S0FGVzs7O2dDQUtiLEtBQUEsR0FBTyxTQUFBO1dBQ0wsSUFBQyxDQUFBLEtBQUQsR0FBUyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsVUFBdkIsQ0FBa0MsQ0FBQyxPQUFuQyxDQUEyQyxPQUEzQztFQURKOztnQ0FHUCxNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUFmLENBQWhCO0VBRE07Ozs7R0Fad0IsT0FBQSxDQUFRLHNCQUFSOztBQWlCbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./views/layout":136,"hn_routing/lib/route":207}],136:[function(require,module,exports){
var SettingsLayoutView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SettingsLayoutView = (function(superClass) {
  extend(SettingsLayoutView, superClass);

  function SettingsLayoutView() {
    return SettingsLayoutView.__super__.constructor.apply(this, arguments);
  }

  SettingsLayoutView.prototype.template = require('./templates/layout');

  SettingsLayoutView.prototype.className = 'container d-flex align-items-center h-100 flex-column';

  SettingsLayoutView.prototype.behaviors = {
    Confirmations: {
      message: 'Are you sure you want to flush the database?',
      confirmIcon: 'fa-trash',
      confirmText: 'FLUSH DATABASE',
      confirmCss: 'btn-danger'
    }
  };

  SettingsLayoutView.prototype.ui = {
    confirmationTrigger: '[data-click=confirm]'
  };

  SettingsLayoutView.prototype.onConfirmed = function() {
    return Backbone.Radio.channel('flash').trigger('success', {
      message: 'Database flushed.'
    });
  };

  return SettingsLayoutView;

})(Marionette.LayoutView);

module.exports = SettingsLayoutView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vc2V0dGluZ3Mvdmlld3MvbGF5b3V0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9tYWluL3NldHRpbmdzL3ZpZXdzL2xheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxrQkFBQTtFQUFBOzs7QUFBTTs7Ozs7OzsrQkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzsrQkFDVixTQUFBLEdBQVc7OytCQUVYLFNBQUEsR0FDRTtJQUFBLGFBQUEsRUFDRTtNQUFBLE9BQUEsRUFBYyw4Q0FBZDtNQUNBLFdBQUEsRUFBYyxVQURkO01BRUEsV0FBQSxFQUFjLGdCQUZkO01BR0EsVUFBQSxFQUFjLFlBSGQ7S0FERjs7OytCQU1GLEVBQUEsR0FDRTtJQUFBLG1CQUFBLEVBQXFCLHNCQUFyQjs7OytCQUlGLFdBQUEsR0FBYSxTQUFBO1dBQ1gsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLE9BQXZCLENBQStCLENBQUMsT0FBaEMsQ0FBd0MsU0FBeEMsRUFBbUQ7TUFBRSxPQUFBLEVBQVMsbUJBQVg7S0FBbkQ7RUFEVzs7OztHQWhCa0IsVUFBVSxDQUFDOztBQTBCNUMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/layout":137}],137:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row d-flex flex-row w-100\"><div class=\"col-lg-12\"><div class=\"card card-body\"><h4 class=\"card-title\">Settings</h4><button data-click=\"confirm\" class=\"btn btn-danger\"><i class=\"fa fa-fw fa-times\"></i>Flush Database</button></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],138:[function(require,module,exports){
var LayoutView, WelcomeRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

WelcomeRoute = (function(superClass) {
  extend(WelcomeRoute, superClass);

  function WelcomeRoute() {
    return WelcomeRoute.__super__.constructor.apply(this, arguments);
  }

  WelcomeRoute.prototype.title = 'Magellan - Welcome';

  WelcomeRoute.prototype.breadcrumbs = [
    {
      text: 'Home'
    }
  ];

  WelcomeRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return WelcomeRoute;

})(require('hn_routing/lib/route'));

module.exports = WelcomeRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vd2VsY29tZS9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi93ZWxjb21lL3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLHdCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYyxPQUFBLENBQVEsZ0JBQVI7O0FBSVI7Ozs7Ozs7eUJBRUosS0FBQSxHQUFPOzt5QkFFUCxXQUFBLEdBQWE7SUFDWDtNQUFFLElBQUEsRUFBTSxNQUFSO0tBRFc7Ozt5QkFJYixNQUFBLEdBQVEsU0FBQTtXQUNOLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFJLFVBQUosQ0FBZTtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUFmLENBQWhCO0VBRE07Ozs7R0FSaUIsT0FBQSxDQUFRLHNCQUFSOztBQWEzQixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./views/layout":139,"hn_routing/lib/route":207}],139:[function(require,module,exports){
var WelcomeView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

WelcomeView = (function(superClass) {
  extend(WelcomeView, superClass);

  function WelcomeView() {
    return WelcomeView.__super__.constructor.apply(this, arguments);
  }

  WelcomeView.prototype.template = require('./templates/layout');

  WelcomeView.prototype.className = 'container d-flex align-items-center h-100 flex-column';

  return WelcomeView;

})(Marionette.LayoutView);

module.exports = WelcomeView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vd2VsY29tZS92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vd2VsY29tZS92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsV0FBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt3QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzt3QkFDVixTQUFBLEdBQVc7Ozs7R0FGYSxVQUFVLENBQUM7O0FBTXJDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/layout":140}],140:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["btn"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<a" + (jade.attr("href", opts.href, true, false)) + (jade.cls(['btn','btn-lg','w-50',opts.css], [null,null,null,true])) + "><i" + (jade.cls(['fa','fa-fw','mr-1',opts.icon], [null,null,null,true])) + "></i>" + (jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</a>");
};
buf.push("<div class=\"row w-100 d-flex flex-column\"><div class=\"col-lg-12\"><div class=\"jumbotron jumbotron-fluid bg-light mb-0 pb-4\"><div class=\"text-center\"><img src=\"img/brand/magellan/magellan-13.png\" class=\"w-50\"/><p style=\"font-size:180%;\" class=\"lead mt-3\">Archive Explorer</p></div><hr class=\"my-4\"/><p class=\"lead\"><strong>Magellan</strong> is an ontology-driven application for browsing and curating unstructured archival datasets. The objective was to create a highly-configurable faceted browsing solution capable of knowledge-enhanced search queries driven by ontologies.</p><hr class=\"my-4\"/><div class=\"text-center mt-3\"><p class=\"lead\">Let's Get Started</p></div><div class=\"btn-group w-100 mt-3\">");
jade_mixins["btn"]({ text: 'Explore Archives', icon: 'fa-folder-open-o', href: '#datasets', css: 'btn-outline-primary' });
jade_mixins["btn"]({ text: 'Explore Ontologies', icon: 'fa-list-alt', href: '#ontologies', css: 'btn-outline-success' });
buf.push("</div></div></div><div class=\"col-lg-12 mb-3\"><div class=\"card\"><div class=\"card-body\"><p class=\"lead\">No archive too complex.</p><p class=\"card-text\">The software allows domain expert curators to declaratively define rules that generate new, query-able properties on the archival data - thus making the search experience knowledge-enhanced. The processed archival data may then be exported in a fashion that makes future consumption easier.</p><p class=\"lead\">Completely Open Source</p><p class=\"card-text\">The software solution was developed using the Agile software development methodology and is entirely open-source under the MIT License. The result of this study has successfully produced a functioning publicly available software solution in accordance with its objectives. The resulting software from this study has conclusively demonstrated the ability to layer query-able knowledge on top of unstructured archival datasets.</p></div></div></div><div class=\"col-lg-12 my-4 text-center\"><a href=\"https://github.com/tetherless-world/magellan\" target=\"_blank\" class=\"btn btn-sm btn-outline-dark\"><i class=\"fa fa-fw fa-github mr-1\"></i>Github</a><p class=\"mt-4\">Built with<i class=\"fa fa-heart-o ml-1\"></i>&nbsp;by&nbsp;<a href=\"https://tw.rpi.edu/\" target=\"_blank\">TWC</a>&nbsp;@&nbsp;<a href=\"https://rpi.edu/\" target=\"_blank\">RPI.</a></p></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],141:[function(require,module,exports){
var OntologyCollection, OntologyModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

OntologyModel = (function(superClass) {
  extend(OntologyModel, superClass);

  function OntologyModel() {
    return OntologyModel.__super__.constructor.apply(this, arguments);
  }

  OntologyModel.prototype.url = 'ontologies';

  OntologyModel.prototype.save = function() {
    return Backbone.Radio.channel('ontology').request('save', this);
  };

  return OntologyModel;

})(Backbone.Model);

OntologyCollection = (function(superClass) {
  extend(OntologyCollection, superClass);

  function OntologyCollection() {
    return OntologyCollection.__super__.constructor.apply(this, arguments);
  }

  OntologyCollection.prototype.urlRool = 'ontologies';

  OntologyCollection.prototype.model = OntologyModel;

  return OntologyCollection;

})(Backbone.Collection);

module.exports = {
  Model: OntologyModel,
  Collection: OntologyCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2VudGl0aWVzLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9lbnRpdGllcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxpQ0FBQTtFQUFBOzs7QUFBTTs7Ozs7OzswQkFDSixHQUFBLEdBQUs7OzBCQUdMLElBQUEsR0FBTSxTQUFBO1dBQ0osUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsTUFBM0MsRUFBbUQsSUFBbkQ7RUFESTs7OztHQUpvQixRQUFRLENBQUM7O0FBUy9COzs7Ozs7OytCQUNKLE9BQUEsR0FBUzs7K0JBQ1QsS0FBQSxHQUFPOzs7O0dBRndCLFFBQVEsQ0FBQzs7QUFNMUMsTUFBTSxDQUFDLE9BQVAsR0FDRTtFQUFBLEtBQUEsRUFBWSxhQUFaO0VBQ0EsVUFBQSxFQUFZLGtCQURaIn0=

},{}],142:[function(require,module,exports){
var DexieFactory, Entities, OntologyFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

OntologyFactory = (function(superClass) {
  extend(OntologyFactory, superClass);

  function OntologyFactory() {
    return OntologyFactory.__super__.constructor.apply(this, arguments);
  }

  OntologyFactory.prototype.tableName = 'ontologies';

  OntologyFactory.prototype.radioRequests = {
    'ontology model': 'getModel',
    'ontology save': 'saveModel',
    'ontology collection': 'getCollection',
    'ontology attribute': 'attribute',
    'ontology attribute:dropdown': 'getAttributeDropdown'
  };

  OntologyFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  OntologyFactory.prototype.getCollection = function(dataset_id) {
    this.ensureDb();
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.db[_this.tableName].toArray().then(function(models) {
          _this.cachedCollection.reset(models);
          return resolve(_this.cachedCollection);
        })["catch"](function(err) {
          return reject(err);
        });
      };
    })(this));
  };

  OntologyFactory.prototype.attribute = function(prefix, attribute) {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.getCollection().then(function(ontologyCollection) {
          var graph, ontology;
          ontology = ontologyCollection.findWhere({
            prefix: prefix
          });
          if (!ontology) {
            return resolve(false);
          }
          graph = ontology.get('graph');
          attribute = prefix + ':' + attribute;
          return resolve(_.find(graph, function(attr) {
            return attr['@id'] === attribute;
          }));
        });
      };
    })(this));
  };

  OntologyFactory.prototype.getAttributeDropdown = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var dropdown;
        dropdown = [];
        return _this.getCollection().then(function(ontologyCollection) {
          var i, item, len, ontology, ref;
          ref = ontologyCollection.models;
          for (i = 0, len = ref.length; i < len; i++) {
            ontology = ref[i];
            item = {};
            item.label = ontology.get('label');
            item.items = _.pluck(ontology.get('graph'), '@id');
            dropdown.push(item);
          }
          return resolve(dropdown);
        });
      };
    })(this));
  };

  return OntologyFactory;

})(DexieFactory);

module.exports = new OntologyFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2ZhY3RvcnkuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2ZhY3RvcnkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsdUNBQUE7RUFBQTs7O0FBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSOztBQUNYLFlBQUEsR0FBZ0IsT0FBQSxDQUFRLHNCQUFSOztBQUlWOzs7Ozs7OzRCQUVKLFNBQUEsR0FBVzs7NEJBRVgsYUFBQSxHQUNFO0lBQUEsZ0JBQUEsRUFBZ0MsVUFBaEM7SUFDQSxlQUFBLEVBQWdDLFdBRGhDO0lBRUEscUJBQUEsRUFBZ0MsZUFGaEM7SUFHQSxvQkFBQSxFQUFnQyxXQUhoQztJQUlBLDZCQUFBLEVBQWdDLHNCQUpoQzs7OzRCQU1GLFVBQUEsR0FBWSxTQUFBO1dBQ1YsSUFBQyxDQUFBLGdCQUFELEdBQW9CLElBQUksUUFBUSxDQUFDLFVBQWIsQ0FBQTtFQURWOzs0QkFLWixhQUFBLEdBQWUsU0FBQyxVQUFEO0lBR2IsSUFBQyxDQUFBLFFBQUQsQ0FBQTtBQUdBLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO2VBR2pCLEtBQUMsQ0FBQSxFQUFHLENBQUEsS0FBQyxDQUFBLFNBQUQsQ0FBVyxDQUFDLE9BQWhCLENBQUEsQ0FHQSxDQUFDLElBSEQsQ0FHTSxTQUFDLE1BQUQ7VUFHSixLQUFDLENBQUEsZ0JBQWdCLENBQUMsS0FBbEIsQ0FBd0IsTUFBeEI7QUFHQSxpQkFBTyxPQUFBLENBQVEsS0FBQyxDQUFBLGdCQUFUO1FBTkgsQ0FITixDQVlBLEVBQUMsS0FBRCxFQVpBLENBWU8sU0FBQyxHQUFEO0FBQVMsaUJBQU8sTUFBQSxDQUFPLEdBQVA7UUFBaEIsQ0FaUDtNQUhpQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQU5NOzs0QkF1QmYsU0FBQSxHQUFXLFNBQUMsTUFBRCxFQUFTLFNBQVQ7QUFDVCxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtlQUdqQixLQUFDLENBQUEsYUFBRCxDQUFBLENBQWdCLENBQUMsSUFBakIsQ0FBc0IsU0FBQyxrQkFBRDtBQUdwQixjQUFBO1VBQUEsUUFBQSxHQUFXLGtCQUFrQixDQUFDLFNBQW5CLENBQTZCO1lBQUUsTUFBQSxFQUFRLE1BQVY7V0FBN0I7VUFHWCxJQUFBLENBQTZCLFFBQTdCO0FBQUEsbUJBQU8sT0FBQSxDQUFRLEtBQVIsRUFBUDs7VUFHQSxLQUFBLEdBQVEsUUFBUSxDQUFDLEdBQVQsQ0FBYSxPQUFiO1VBR1IsU0FBQSxHQUFZLE1BQUEsR0FBUyxHQUFULEdBQWU7QUFHM0IsaUJBQU8sT0FBQSxDQUFRLENBQUMsQ0FBQyxJQUFGLENBQU8sS0FBUCxFQUFjLFNBQUMsSUFBRDttQkFBVSxJQUFLLENBQUEsS0FBQSxDQUFMLEtBQWU7VUFBekIsQ0FBZCxDQUFSO1FBZmEsQ0FBdEI7TUFIaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVo7RUFERTs7NEJBdUJYLG9CQUFBLEdBQXNCLFNBQUE7QUFHcEIsV0FBTyxJQUFJLE9BQUosQ0FBWSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsT0FBRCxFQUFVLE1BQVY7QUFHakIsWUFBQTtRQUFBLFFBQUEsR0FBVztlQUdYLEtBQUMsQ0FBQSxhQUFELENBQUEsQ0FBZ0IsQ0FBQyxJQUFqQixDQUFzQixTQUFDLGtCQUFEO0FBR3BCLGNBQUE7QUFBQTtBQUFBLGVBQUEscUNBQUE7O1lBSUUsSUFBQSxHQUFPO1lBQ1AsSUFBSSxDQUFDLEtBQUwsR0FBYSxRQUFRLENBQUMsR0FBVCxDQUFhLE9BQWI7WUFDYixJQUFJLENBQUMsS0FBTCxHQUFhLENBQUMsQ0FBQyxLQUFGLENBQVEsUUFBUSxDQUFDLEdBQVQsQ0FBYSxPQUFiLENBQVIsRUFBK0IsS0FBL0I7WUFHYixRQUFRLENBQUMsSUFBVCxDQUFjLElBQWQ7QUFURjtBQVlBLGlCQUFPLE9BQUEsQ0FBUSxRQUFSO1FBZmEsQ0FBdEI7TUFOaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVo7RUFIYTs7OztHQTlETTs7QUEwRjlCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLElBQUksZUFBSixDQUFBIn0=

},{"../base/dexieFactory":34,"./entities":141}],143:[function(require,module,exports){
var OntologyImporter,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

OntologyImporter = (function(superClass) {
  extend(OntologyImporter, superClass);

  function OntologyImporter() {
    this.ensureBundled = bind(this.ensureBundled, this);
    this.ensureOntology = bind(this.ensureOntology, this);
    this.fetchFromGithub = bind(this.fetchFromGithub, this);
    return OntologyImporter.__super__.constructor.apply(this, arguments);
  }

  OntologyImporter.prototype.radioRequests = {
    'ontology ensure:bundled': 'ensureBundled'
  };

  OntologyImporter.prototype.bundleManifest = [
    {
      label: 'FOAF',
      prefix: 'foaf'
    }, {
      label: 'GEO',
      prefix: 'geo'
    }, {
      label: 'NFO',
      prefix: 'nfo'
    }, {
      label: 'ORE',
      prefix: 'ore'
    }, {
      label: 'RDF',
      prefix: 'rdf'
    }, {
      label: 'RDFS',
      prefix: 'rdfs'
    }
  ];

  OntologyImporter.prototype.fetchNew = function() {
    return Backbone.Radio.channel('ontology').request('model');
  };

  OntologyImporter.prototype.fetchCollection = function() {
    return Backbone.Radio.channel('ontology').request('collection');
  };

  OntologyImporter.prototype.bundleSrc = function(ontology_prefix) {
    return "https://raw.githubusercontent.com/aeksco/json_ld_ontologies/master/" + ontology_prefix + "/" + ontology_prefix + ".json";
  };

  OntologyImporter.prototype.fetchFromGithub = function(ontology_attrs) {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var url;
        url = _this.bundleSrc(ontology_attrs.prefix);
        return fetch(url).then(function(resp) {
          return resp.json().then(function(parsedJson) {
            return resolve(parsedJson);
          })["catch"](function(err) {
            return reject(err);
          });
        })["catch"](function(err) {
          return reject(err);
        });
      };
    })(this));
  };

  OntologyImporter.prototype.ensureOntology = function(ontology_attrs) {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return _this.fetchCollection().then(function(collection) {
          var extantOntology;
          extantOntology = collection.findWhere({
            prefix: ontology_attrs.prefix
          });
          if (extantOntology) {
            return resolve(true);
          }
          Backbone.Radio.channel('loading').trigger('show', "Fetching " + ontology_attrs.label + " Ontology");
          return _this.fetchNew().then(function(newOntology) {
            return _this.fetchFromGithub(ontology_attrs).then(function(parsedJson) {
              newOntology.set(ontology_attrs);
              newOntology.set('id', buildUniqueId('on_'));
              newOntology.set('context', parsedJson['@context']);
              newOntology.set('graph', parsedJson['@graph']);
              return newOntology.save().then(function() {
                return resolve(true);
              })["catch"](function(err) {
                return reject(err);
              });
            });
          });
        });
      };
    })(this));
  };

  OntologyImporter.prototype.ensureBundled = function() {
    Backbone.Radio.channel('loading').trigger('show', "Loading Ontologies...");
    return Promise.each(this.bundleManifest, this.ensureOntology);
  };

  return OntologyImporter;

})(Marionette.Service);

module.exports = new OntologyImporter();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2ltcG9ydGVyLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9pbXBvcnRlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsSUFBQSxnQkFBQTtFQUFBOzs7O0FBQU07Ozs7Ozs7Ozs7NkJBR0osYUFBQSxHQUNFO0lBQUEseUJBQUEsRUFBNEIsZUFBNUI7Ozs2QkFJRixjQUFBLEdBQWdCO0lBQ2Q7TUFBRSxLQUFBLEVBQU8sTUFBVDtNQUFrQixNQUFBLEVBQVEsTUFBMUI7S0FEYyxFQUVkO01BQUUsS0FBQSxFQUFPLEtBQVQ7TUFBa0IsTUFBQSxFQUFRLEtBQTFCO0tBRmMsRUFHZDtNQUFFLEtBQUEsRUFBTyxLQUFUO01BQWtCLE1BQUEsRUFBUSxLQUExQjtLQUhjLEVBSWQ7TUFBRSxLQUFBLEVBQU8sS0FBVDtNQUFrQixNQUFBLEVBQVEsS0FBMUI7S0FKYyxFQUtkO01BQUUsS0FBQSxFQUFPLEtBQVQ7TUFBa0IsTUFBQSxFQUFRLEtBQTFCO0tBTGMsRUFNZDtNQUFFLEtBQUEsRUFBTyxNQUFUO01BQWtCLE1BQUEsRUFBUSxNQUExQjtLQU5jOzs7NkJBV2hCLFFBQUEsR0FBVSxTQUFBO1dBQ1IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsT0FBM0M7RUFEUTs7NkJBS1YsZUFBQSxHQUFpQixTQUFBO1dBQ2YsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsWUFBM0M7RUFEZTs7NkJBS2pCLFNBQUEsR0FBVyxTQUFDLGVBQUQ7QUFDVCxXQUFPLHFFQUFBLEdBQXNFLGVBQXRFLEdBQXNGLEdBQXRGLEdBQXlGLGVBQXpGLEdBQXlHO0VBRHZHOzs2QkFLWCxlQUFBLEdBQWlCLFNBQUMsY0FBRDtBQUdmLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBVSxNQUFWO0FBR2pCLFlBQUE7UUFBQSxHQUFBLEdBQU0sS0FBQyxDQUFBLFNBQUQsQ0FBVyxjQUFjLENBQUMsTUFBMUI7ZUFHTixLQUFBLENBQU0sR0FBTixDQUNBLENBQUMsSUFERCxDQUNNLFNBQUMsSUFBRDtpQkFHSixJQUFJLENBQUMsSUFBTCxDQUFBLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQyxVQUFEO0FBQWdCLG1CQUFPLE9BQUEsQ0FBUSxVQUFSO1VBQXZCLENBRE4sQ0FJQSxFQUFDLEtBQUQsRUFKQSxDQUlPLFNBQUMsR0FBRDtBQUFTLG1CQUFPLE1BQUEsQ0FBTyxHQUFQO1VBQWhCLENBSlA7UUFISSxDQUROLENBU0EsRUFBQyxLQUFELEVBVEEsQ0FTTyxTQUFDLEdBQUQ7QUFBUyxpQkFBTyxNQUFBLENBQU8sR0FBUDtRQUFoQixDQVRQO01BTmlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaO0VBSFE7OzZCQXVCakIsY0FBQSxHQUFnQixTQUFDLGNBQUQ7QUFHZCxXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtlQUlqQixLQUFDLENBQUEsZUFBRCxDQUFBLENBQWtCLENBQUMsSUFBbkIsQ0FBd0IsU0FBQyxVQUFEO0FBR3RCLGNBQUE7VUFBQSxjQUFBLEdBQWlCLFVBQVUsQ0FBQyxTQUFYLENBQXFCO1lBQUUsTUFBQSxFQUFRLGNBQWMsQ0FBQyxNQUF6QjtXQUFyQjtVQUdqQixJQUF3QixjQUF4QjtBQUFBLG1CQUFPLE9BQUEsQ0FBUSxJQUFSLEVBQVA7O1VBR0EsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUMsRUFBa0QsV0FBQSxHQUFZLGNBQWMsQ0FBQyxLQUEzQixHQUFpQyxXQUFuRjtpQkFHQSxLQUFDLENBQUEsUUFBRCxDQUFBLENBQVcsQ0FBQyxJQUFaLENBQWlCLFNBQUMsV0FBRDttQkFHZixLQUFDLENBQUEsZUFBRCxDQUFpQixjQUFqQixDQUFnQyxDQUFDLElBQWpDLENBQXNDLFNBQUMsVUFBRDtjQUdwQyxXQUFXLENBQUMsR0FBWixDQUFnQixjQUFoQjtjQUNBLFdBQVcsQ0FBQyxHQUFaLENBQWdCLElBQWhCLEVBQXNCLGFBQUEsQ0FBYyxLQUFkLENBQXRCO2NBQ0EsV0FBVyxDQUFDLEdBQVosQ0FBZ0IsU0FBaEIsRUFBMkIsVUFBVyxDQUFBLFVBQUEsQ0FBdEM7Y0FDQSxXQUFXLENBQUMsR0FBWixDQUFnQixPQUFoQixFQUF5QixVQUFXLENBQUEsUUFBQSxDQUFwQztxQkFHQSxXQUFXLENBQUMsSUFBWixDQUFBLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQTtBQUFNLHVCQUFPLE9BQUEsQ0FBUSxJQUFSO2NBQWIsQ0FETixDQUVBLEVBQUMsS0FBRCxFQUZBLENBRU8sU0FBQyxHQUFEO0FBQVMsdUJBQU8sTUFBQSxDQUFPLEdBQVA7Y0FBaEIsQ0FGUDtZQVRvQyxDQUF0QztVQUhlLENBQWpCO1FBWnNCLENBQXhCO01BSmlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaO0VBSE87OzZCQXFDaEIsYUFBQSxHQUFlLFNBQUE7SUFHYixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEwQyxNQUExQyxFQUFrRCx1QkFBbEQ7QUFHQSxXQUFPLE9BQU8sQ0FBQyxJQUFSLENBQWEsSUFBQyxDQUFBLGNBQWQsRUFBOEIsSUFBQyxDQUFBLGNBQS9CO0VBTk07Ozs7R0E5RmMsVUFBVSxDQUFDOztBQXlHMUMsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxnQkFBSixDQUFBIn0=

},{}],144:[function(require,module,exports){
var LayoutView, OntologyListRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

OntologyListRoute = (function(superClass) {
  extend(OntologyListRoute, superClass);

  function OntologyListRoute() {
    return OntologyListRoute.__super__.constructor.apply(this, arguments);
  }

  OntologyListRoute.prototype.title = 'Magellan - Ontologies';

  OntologyListRoute.prototype.breadcrumbs = [
    {
      href: '#',
      text: 'Home'
    }, {
      text: 'Ontologies'
    }
  ];

  OntologyListRoute.prototype.fetch = function() {
    return Backbone.Radio.channel('ontology').request('collection').then((function(_this) {
      return function(collection) {
        return _this.collection = collection;
      };
    })(this));
  };

  OntologyListRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      collection: this.collection
    }));
  };

  return OntologyListRoute;

})(require('hn_routing/lib/route'));

module.exports = OntologyListRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2xpc3Qvcm91dGUuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2xpc3Qvcm91dGUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsNkJBQUE7RUFBQTs7O0FBQUEsVUFBQSxHQUFjLE9BQUEsQ0FBUSxnQkFBUjs7QUFJUjs7Ozs7Ozs4QkFFSixLQUFBLEdBQU87OzhCQUVQLFdBQUEsR0FBYTtJQUNYO01BQUUsSUFBQSxFQUFNLEdBQVI7TUFBYSxJQUFBLEVBQU0sTUFBbkI7S0FEVyxFQUVYO01BQUUsSUFBQSxFQUFNLFlBQVI7S0FGVzs7OzhCQUtiLEtBQUEsR0FBTyxTQUFBO1dBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsWUFBM0MsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsVUFBRDtlQUFnQixLQUFDLENBQUEsVUFBRCxHQUFjO01BQTlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUROO0VBREs7OzhCQUlQLE1BQUEsR0FBUSxTQUFBO1dBQ04sSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLENBQWdCLElBQUksVUFBSixDQUFlO01BQUUsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFmO0tBQWYsQ0FBaEI7RUFETTs7OztHQWJzQixPQUFBLENBQVEsc0JBQVI7O0FBa0JoQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./views/layout":145,"hn_routing/lib/route":207}],145:[function(require,module,exports){
var AttributeChild, AttributeDetail, AttributeList, AttributeListLayout, JsonViewer, LdViewer, OntologyChild, OntologyEmpty, OntologyList, OntologyListLayout,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LdViewer = require('../../../search/facetsearch/views/graph.coffee');

JsonViewer = require('lib/views/json_viewer');

OntologyEmpty = (function(superClass) {
  extend(OntologyEmpty, superClass);

  function OntologyEmpty() {
    return OntologyEmpty.__super__.constructor.apply(this, arguments);
  }

  OntologyEmpty.prototype.template = require('./templates/ontology_empty');

  OntologyEmpty.prototype.className = 'list-group-item list-group-item-warning';

  OntologyEmpty.prototype.tagName = 'li';

  return OntologyEmpty;

})(Mn.LayoutView);

OntologyChild = (function(superClass) {
  extend(OntologyChild, superClass);

  function OntologyChild() {
    return OntologyChild.__super__.constructor.apply(this, arguments);
  }

  OntologyChild.prototype.template = require('./templates/ontology_child');

  OntologyChild.prototype.className = 'list-group-item';

  OntologyChild.prototype.tagName = 'li';

  OntologyChild.prototype.behaviors = {
    SelectableChild: {}
  };

  return OntologyChild;

})(Mn.LayoutView);

OntologyList = (function(superClass) {
  extend(OntologyList, superClass);

  function OntologyList() {
    return OntologyList.__super__.constructor.apply(this, arguments);
  }

  OntologyList.prototype.className = 'row';

  OntologyList.prototype.template = require('./templates/ontology_list');

  OntologyList.prototype.childView = OntologyChild;

  OntologyList.prototype.emptyView = OntologyEmpty;

  OntologyList.prototype.childViewContainer = 'ul';

  return OntologyList;

})(Mn.CompositeView);

AttributeDetail = (function(superClass) {
  extend(AttributeDetail, superClass);

  function AttributeDetail() {
    return AttributeDetail.__super__.constructor.apply(this, arguments);
  }

  AttributeDetail.prototype.className = 'col-lg-12';

  AttributeDetail.prototype.navItems = [
    {
      icon: 'fa-code',
      text: 'JSON',
      trigger: 'json',
      "default": true
    }, {
      icon: 'fa-sitemap',
      text: 'Graph',
      trigger: 'graph'
    }
  ];

  AttributeDetail.prototype.navEvents = {
    'json': 'showJson',
    'graph': 'showGraph'
  };

  AttributeDetail.prototype.showJson = function() {
    return this.contentRegion.show(new JsonViewer({
      model: this.model
    }));
  };

  AttributeDetail.prototype.showGraph = function() {
    return this.contentRegion.show(new LdViewer({
      json: this.model.toJSON()
    }));
  };

  return AttributeDetail;

})(require('lib/views/nav'));

AttributeChild = (function(superClass) {
  extend(AttributeChild, superClass);

  function AttributeChild() {
    return AttributeChild.__super__.constructor.apply(this, arguments);
  }

  AttributeChild.prototype.className = 'list-group-item';

  AttributeChild.prototype.template = require('./templates/attribute_child');

  AttributeChild.prototype.tagName = 'li';

  AttributeChild.prototype.behaviors = {
    SelectableChild: {}
  };

  AttributeChild.prototype.serializeData = function() {
    return {
      data: AttributeChild.__super__.serializeData.apply(this, arguments)
    };
  };

  return AttributeChild;

})(Mn.LayoutView);

AttributeList = (function(superClass) {
  extend(AttributeList, superClass);

  function AttributeList() {
    return AttributeList.__super__.constructor.apply(this, arguments);
  }

  AttributeList.prototype.className = 'list-group';

  AttributeList.prototype.childView = AttributeChild;

  return AttributeList;

})(Mn.CollectionView);

AttributeListLayout = (function(superClass) {
  extend(AttributeListLayout, superClass);

  function AttributeListLayout() {
    return AttributeListLayout.__super__.constructor.apply(this, arguments);
  }

  AttributeListLayout.prototype.className = 'row';

  AttributeListLayout.prototype.template = require('./templates/attribute_layout');

  AttributeListLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  AttributeListLayout.prototype.onRender = function() {
    var attributeCollection, listView, ref;
    attributeCollection = new Backbone.Collection(this.model.get('graph'));
    listView = new AttributeList({
      collection: attributeCollection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showAttribute(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = attributeCollection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  AttributeListLayout.prototype.showAttribute = function(attributeModel) {
    return this.detailRegion.show(new AttributeDetail({
      model: attributeModel
    }));
  };

  return AttributeListLayout;

})(Mn.LayoutView);

OntologyListLayout = (function(superClass) {
  extend(OntologyListLayout, superClass);

  function OntologyListLayout() {
    return OntologyListLayout.__super__.constructor.apply(this, arguments);
  }

  OntologyListLayout.prototype.template = require('./templates/layout');

  OntologyListLayout.prototype.className = 'container-fluid';

  OntologyListLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  OntologyListLayout.prototype.onShow = function() {
    var listView, ref;
    listView = new OntologyList({
      collection: this.collection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showGraph(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  OntologyListLayout.prototype.showGraph = function(ontology) {
    return this.detailRegion.show(new AttributeListLayout({
      model: ontology
    }));
  };

  return OntologyListLayout;

})(Mn.LayoutView);

module.exports = OntologyListLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2xpc3Qvdmlld3MvbGF5b3V0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9saXN0L3ZpZXdzL2xheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSx5SkFBQTtFQUFBOzs7QUFBQSxRQUFBLEdBQVcsT0FBQSxDQUFRLGdEQUFSOztBQUVYLFVBQUEsR0FBYSxPQUFBLENBQVEsdUJBQVI7O0FBSVA7Ozs7Ozs7MEJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSw0QkFBUjs7MEJBQ1YsU0FBQSxHQUFXOzswQkFDWCxPQUFBLEdBQVM7Ozs7R0FIaUIsRUFBRSxDQUFDOztBQU96Qjs7Ozs7OzswQkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLDRCQUFSOzswQkFDVixTQUFBLEdBQVc7OzBCQUNYLE9BQUEsR0FBUzs7MEJBRVQsU0FBQSxHQUNFO0lBQUEsZUFBQSxFQUFpQixFQUFqQjs7Ozs7R0FOd0IsRUFBRSxDQUFDOztBQVV6Qjs7Ozs7Ozt5QkFDSixTQUFBLEdBQVc7O3lCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsMkJBQVI7O3lCQUNWLFNBQUEsR0FBVzs7eUJBQ1gsU0FBQSxHQUFXOzt5QkFDWCxrQkFBQSxHQUFvQjs7OztHQUxLLEVBQUUsQ0FBQzs7QUFTeEI7Ozs7Ozs7NEJBRUosU0FBQSxHQUFXOzs0QkFFWCxRQUFBLEdBQVU7SUFDUjtNQUFFLElBQUEsRUFBTSxTQUFSO01BQXNCLElBQUEsRUFBTSxNQUE1QjtNQUFzQyxPQUFBLEVBQVMsTUFBL0M7TUFBdUQsQ0FBQSxPQUFBLENBQUEsRUFBUyxJQUFoRTtLQURRLEVBRVI7TUFBRSxJQUFBLEVBQU0sWUFBUjtNQUFzQixJQUFBLEVBQU0sT0FBNUI7TUFBc0MsT0FBQSxFQUFTLE9BQS9DO0tBRlE7Ozs0QkFLVixTQUFBLEdBQ0U7SUFBQSxNQUFBLEVBQVksVUFBWjtJQUNBLE9BQUEsRUFBWSxXQURaOzs7NEJBR0YsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZixDQUFwQjtFQURROzs0QkFHVixTQUFBLEdBQVcsU0FBQTtXQUNULElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFJLFFBQUosQ0FBYTtNQUFFLElBQUEsRUFBTSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBQSxDQUFSO0tBQWIsQ0FBcEI7RUFEUzs7OztHQWhCaUIsT0FBQSxDQUFRLGVBQVI7O0FBc0J4Qjs7Ozs7OzsyQkFDSixTQUFBLEdBQVc7OzJCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsNkJBQVI7OzJCQUNWLE9BQUEsR0FBUzs7MkJBRVQsU0FBQSxHQUNFO0lBQUEsZUFBQSxFQUFpQixFQUFqQjs7OzJCQUVGLGFBQUEsR0FBZSxTQUFBO0FBQ2IsV0FBTztNQUFFLElBQUEsRUFBTSxtREFBQSxTQUFBLENBQVI7O0VBRE07Ozs7R0FSWSxFQUFFLENBQUM7O0FBVzFCOzs7Ozs7OzBCQUNKLFNBQUEsR0FBVzs7MEJBQ1gsU0FBQSxHQUFXOzs7O0dBRmUsRUFBRSxDQUFDOztBQUl6Qjs7Ozs7OztnQ0FDSixTQUFBLEdBQVc7O2dDQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEsOEJBQVI7O2dDQUVWLE9BQUEsR0FDRTtJQUFBLFVBQUEsRUFBYyxvQkFBZDtJQUNBLFlBQUEsRUFBYyxzQkFEZDs7O2dDQUdGLFFBQUEsR0FBVSxTQUFBO0FBQ1IsUUFBQTtJQUFBLG1CQUFBLEdBQXNCLElBQUksUUFBUSxDQUFDLFVBQWIsQ0FBd0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUF4QjtJQUV0QixRQUFBLEdBQVcsSUFBSSxhQUFKLENBQWtCO01BQUUsVUFBQSxFQUFZLG1CQUFkO0tBQWxCO0lBQ1gsUUFBUSxDQUFDLEVBQVQsQ0FBWSxvQkFBWixFQUFrQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUFVLEtBQUMsQ0FBQSxhQUFELENBQWUsSUFBSSxDQUFDLEtBQXBCO01BQVY7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0lBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFFBQWpCOzBEQUN5QixDQUFFLE9BQTNCLENBQW1DLFVBQW5DO0VBTlE7O2dDQVFWLGFBQUEsR0FBZSxTQUFDLGNBQUQ7V0FDYixJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsSUFBSSxlQUFKLENBQW9CO01BQUUsS0FBQSxFQUFPLGNBQVQ7S0FBcEIsQ0FBbkI7RUFEYTs7OztHQWhCaUIsRUFBRSxDQUFDOztBQXFCL0I7Ozs7Ozs7K0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7K0JBQ1YsU0FBQSxHQUFXOzsrQkFFWCxPQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQVksb0JBQVo7SUFDQSxZQUFBLEVBQWMsc0JBRGQ7OzsrQkFHRixNQUFBLEdBQVEsU0FBQTtBQUNOLFFBQUE7SUFBQSxRQUFBLEdBQVcsSUFBSSxZQUFKLENBQWlCO01BQUUsVUFBQSxFQUFZLElBQUMsQ0FBQSxVQUFmO0tBQWpCO0lBQ1gsUUFBUSxDQUFDLEVBQVQsQ0FBWSxvQkFBWixFQUFrQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUFVLEtBQUMsQ0FBQSxTQUFELENBQVcsSUFBSSxDQUFDLEtBQWhCO01BQVY7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0lBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFFBQWpCO3NEQUNpQixDQUFFLE9BQW5CLENBQTJCLFVBQTNCO0VBSk07OytCQU1SLFNBQUEsR0FBVyxTQUFDLFFBQUQ7V0FDVCxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsSUFBSSxtQkFBSixDQUF3QjtNQUFFLEtBQUEsRUFBTyxRQUFUO0tBQXhCLENBQW5CO0VBRFM7Ozs7R0Fkb0IsRUFBRSxDQUFDOztBQW1CcEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"../../../search/facetsearch/views/graph.coffee":160,"./templates/attribute_child":146,"./templates/attribute_layout":147,"./templates/layout":148,"./templates/ontology_child":149,"./templates/ontology_empty":150,"./templates/ontology_list":151,"lib/views/json_viewer":286,"lib/views/nav":287}],146:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (data) {
buf.push(jade.escape(null == (jade_interp = data['@id']) ? "" : jade_interp));}.call(this,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined));;return buf.join("");
};
},{"jade/runtime":209}],147:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (label) {
buf.push("<div class=\"col-lg-12\"><div class=\"card card-body\"><h4 class=\"card-title\">" + (jade.escape(null == (jade_interp = label) ? "" : jade_interp)) + "</h4><hr/><div class=\"row\"><div data-region=\"list\" class=\"col-lg-4\"></div><div class=\"col-lg-8\"><div data-region=\"detail\" class=\"row\"></div></div></div></div></div>");}.call(this,"label" in locals_for_with?locals_for_with.label:typeof label!=="undefined"?label:undefined));;return buf.join("");
};
},{"jade/runtime":209}],148:[function(require,module,exports){
module.exports=require(110)
},{"jade/runtime":209}],149:[function(require,module,exports){
module.exports=require(106)
},{"jade/runtime":209}],150:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("No Ontologies");;return buf.join("");
};
},{"jade/runtime":209}],151:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><a href=\"#ontologies/new\" class=\"btn btn-lg btn-outline-primary w-100\"><i class=\"fa fa-fw fa-plus\"></i>&nbsp;\nAdd Ontology</a><ul class=\"list-group mt-2\"></ul></div>");;return buf.join("");
};
},{"jade/runtime":209}],152:[function(require,module,exports){
var LayoutView, NewDatasetRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

LayoutView = require('./views/layout');

NewDatasetRoute = (function(superClass) {
  extend(NewDatasetRoute, superClass);

  function NewDatasetRoute() {
    return NewDatasetRoute.__super__.constructor.apply(this, arguments);
  }

  NewDatasetRoute.prototype.title = 'Magellan - New Ontology';

  NewDatasetRoute.prototype.breadcrumbs = [
    {
      text: 'Home',
      href: '#'
    }, {
      text: 'Ontologies',
      href: '#ontologies'
    }, {
      text: 'New'
    }
  ];

  NewDatasetRoute.prototype.fetch = function() {
    return Backbone.Radio.channel('ontology').request('model').then((function(_this) {
      return function(model) {
        return _this.model = model;
      };
    })(this));
  };

  NewDatasetRoute.prototype.render = function() {
    return this.container.show(new LayoutView({
      model: this.model
    }));
  };

  return NewDatasetRoute;

})(require('hn_routing/lib/route'));

module.exports = NewDatasetRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L25ldy9yb3V0ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvbmV3L3JvdXRlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLDJCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYSxPQUFBLENBQVEsZ0JBQVI7O0FBSVA7Ozs7Ozs7NEJBRUosS0FBQSxHQUFPOzs0QkFFUCxXQUFBLEdBQWE7SUFDWDtNQUFFLElBQUEsRUFBTSxNQUFSO01BQWdCLElBQUEsRUFBTSxHQUF0QjtLQURXLEVBRVg7TUFBRSxJQUFBLEVBQU0sWUFBUjtNQUFzQixJQUFBLEVBQU0sYUFBNUI7S0FGVyxFQUdYO01BQUUsSUFBQSxFQUFNLEtBQVI7S0FIVzs7OzRCQU1iLEtBQUEsR0FBTyxTQUFBO1dBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFVBQXZCLENBQWtDLENBQUMsT0FBbkMsQ0FBMkMsT0FBM0MsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUFXLEtBQUMsQ0FBQSxLQUFELEdBQVM7TUFBcEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE47RUFESzs7NEJBSVAsTUFBQSxHQUFRLFNBQUE7V0FDTixJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZixDQUFoQjtFQURNOzs7O0dBZG9CLE9BQUEsQ0FBUSxzQkFBUjs7QUFtQjlCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./views/layout":153,"hn_routing/lib/route":207}],153:[function(require,module,exports){
var Marionette, NewOntologyLayout, UploadWidget,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Marionette = require('backbone.marionette');

UploadWidget = (function(superClass) {
  extend(UploadWidget, superClass);

  function UploadWidget() {
    return UploadWidget.__super__.constructor.apply(this, arguments);
  }

  UploadWidget.prototype.template = require('./templates/upload');

  UploadWidget.prototype.className = 'form-group';

  UploadWidget.prototype.events = {
    'change input[type=file]': 'onInputChange'
  };

  UploadWidget.prototype.onInputChange = function(e) {
    var file, fileReader;
    file = e.target.files[0];
    if (!file) {
      return;
    }
    fileReader = new FileReader();
    fileReader.onload = (function(_this) {
      return function() {
        return _this.onFileLoaded(fileReader.result);
      };
    })(this);
    return fileReader.readAsText(file);
  };

  UploadWidget.prototype.onFileLoaded = function(text) {
    var parsed;
    parsed = JSON.parse(text);
    return this.trigger('parse', parsed);
  };

  return UploadWidget;

})(Mn.LayoutView);

NewOntologyLayout = (function(superClass) {
  extend(NewOntologyLayout, superClass);

  function NewOntologyLayout() {
    this.onJsonUpload = bind(this.onJsonUpload, this);
    return NewOntologyLayout.__super__.constructor.apply(this, arguments);
  }

  NewOntologyLayout.prototype.template = require('./templates/layout');

  NewOntologyLayout.prototype.className = 'container';

  NewOntologyLayout.prototype.behaviors = {
    SubmitButton: {}
  };

  NewOntologyLayout.prototype.regions = {
    uploadRegion: '[data-region=upload]'
  };

  NewOntologyLayout.prototype.onRender = function() {
    var uploadWidget;
    uploadWidget = new UploadWidget();
    uploadWidget.on('parse', this.onJsonUpload);
    this.uploadRegion.show(uploadWidget);
    return this.disableSubmit();
  };

  NewOntologyLayout.prototype.onJsonUpload = function(parsedJson) {
    this.model.set('context', parsedJson['@context']);
    this.model.set('graph', parsedJson['@graph']);
    return this.enableSubmit();
  };

  NewOntologyLayout.prototype.onSubmit = function() {
    var data;
    data = Backbone.Syphon.serialize(this);
    data.id = buildUniqueId('on_');
    this.model.set(data);
    return this.saveToDexie();
  };

  NewOntologyLayout.prototype.saveToDexie = function() {
    var table;
    table = 'ontologies';
    return window.db[table].add(this.model.toJSON()).then((function(_this) {
      return function(model_id) {
        return Backbone.Radio.channel('app').trigger('redirect', '#ontologies');
      };
    })(this))["catch"]((function(_this) {
      return function(err) {
        return console.log('ERROR CAUGHT');
      };
    })(this));
  };

  return NewOntologyLayout;

})(Mn.LayoutView);

module.exports = NewOntologyLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L25ldy92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L25ldy92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsMkNBQUE7RUFBQTs7OztBQUFBLFVBQUEsR0FBYSxPQUFBLENBQVEscUJBQVI7O0FBTVA7Ozs7Ozs7eUJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7eUJBQ1YsU0FBQSxHQUFXOzt5QkFFWCxNQUFBLEdBQ0U7SUFBQSx5QkFBQSxFQUEyQixlQUEzQjs7O3lCQUVGLGFBQUEsR0FBZSxTQUFDLENBQUQ7QUFHYixRQUFBO0lBQUEsSUFBQSxHQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBTSxDQUFBLENBQUE7SUFHdEIsSUFBQSxDQUFjLElBQWQ7QUFBQSxhQUFBOztJQUdBLFVBQUEsR0FBYSxJQUFJLFVBQUosQ0FBQTtJQUNiLFVBQVUsQ0FBQyxNQUFYLEdBQW9CLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxZQUFELENBQWMsVUFBVSxDQUFDLE1BQXpCO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO1dBQ3BCLFVBQVUsQ0FBQyxVQUFYLENBQXNCLElBQXRCO0VBWGE7O3lCQWVmLFlBQUEsR0FBYyxTQUFDLElBQUQ7QUFDWixRQUFBO0lBQUEsTUFBQSxHQUFTLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBWDtXQUNULElBQUMsQ0FBQSxPQUFELENBQVMsT0FBVCxFQUFrQixNQUFsQjtFQUZZOzs7O0dBdEJXLEVBQUUsQ0FBQzs7QUE2QnhCOzs7Ozs7Ozs4QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLG9CQUFSOzs4QkFDVixTQUFBLEdBQVc7OzhCQUVYLFNBQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxFQUFkOzs7OEJBRUYsT0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLHNCQUFkOzs7OEJBRUYsUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsWUFBQSxHQUFlLElBQUksWUFBSixDQUFBO0lBQ2YsWUFBWSxDQUFDLEVBQWIsQ0FBZ0IsT0FBaEIsRUFBeUIsSUFBQyxDQUFBLFlBQTFCO0lBQ0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLFlBQW5CO1dBQ0EsSUFBQyxDQUFBLGFBQUQsQ0FBQTtFQUpROzs4QkFNVixZQUFBLEdBQWMsU0FBQyxVQUFEO0lBRVosSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsU0FBWCxFQUFzQixVQUFXLENBQUEsVUFBQSxDQUFqQztJQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsRUFBb0IsVUFBVyxDQUFBLFFBQUEsQ0FBL0I7V0FDQSxJQUFDLENBQUEsWUFBRCxDQUFBO0VBSlk7OzhCQU1kLFFBQUEsR0FBVSxTQUFBO0FBQ1IsUUFBQTtJQUFBLElBQUEsR0FBVSxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQWhCLENBQTBCLElBQTFCO0lBQ1YsSUFBSSxDQUFDLEVBQUwsR0FBVSxhQUFBLENBQWMsS0FBZDtJQUNWLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQVg7V0FDQSxJQUFDLENBQUEsV0FBRCxDQUFBO0VBSlE7OzhCQVVWLFdBQUEsR0FBYSxTQUFBO0FBQ1gsUUFBQTtJQUFBLEtBQUEsR0FBUTtXQUVSLE1BQU0sQ0FBQyxFQUFHLENBQUEsS0FBQSxDQUFNLENBQUMsR0FBakIsQ0FBcUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQUEsQ0FBckIsQ0FDQSxDQUFDLElBREQsQ0FDTSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsUUFBRDtlQUFjLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixLQUF2QixDQUE2QixDQUFDLE9BQTlCLENBQXNDLFVBQXRDLEVBQWtELGFBQWxEO01BQWQ7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRE4sQ0FHQSxFQUFDLEtBQUQsRUFIQSxDQUdPLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxHQUFEO2VBQVMsT0FBTyxDQUFDLEdBQVIsQ0FBWSxjQUFaO01BQVQ7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBSFA7RUFIVzs7OztHQWhDaUIsRUFBRSxDQUFDOztBQTBDbkMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/layout":154,"./templates/upload":155,"backbone.marionette":183}],154:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_mixins["formGroup"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<fieldset" + (jade.cls(['form-group',opts.formGroupCss], [null,true])) + ">");
if ( opts.label)
{
buf.push("<label class=\"form-control-label\">" + (jade.escape(null == (jade_interp = opts.label) ? "" : jade_interp)) + "</label>");
}
block && block();
buf.push("</fieldset>");
};
buf.push("");
jade_mixins["formInput"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
jade_mixins["formGroup"].call({
block: function(){
buf.push("<input" + (jade.attrs(jade.merge([{"placeholder": jade.escape(opts.placeholder),"name": jade.escape(opts.name),"type": jade.escape(opts.type),"value": jade.escape(opts.value),"class": "form-control"},attributes]), false)) + "/>");
}
}, opts);
};
buf.push("");








buf.push("");


































buf.push("");




buf.push("");
jade_mixins["button"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
buf.push("<button" + (jade.attrs(jade.merge([{"type": "button","class": "btn"},attributes]), false)) + ">");
if ( opts.icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',opts.icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push((jade.escape(null == (jade_interp = opts.text) ? "" : jade_interp)) + "</button>");
};
buf.push("");
jade_mixins["submitButton"] = jade_interp = function(opts){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (!( opts.text))
{
opts.text = 'Submit'
}
if (!( opts.icon))
{
opts.icon = 'fa-check'
}
jade_mixins["button"].call({
attributes: jade.merge([{"data-click": "submit","class": "btn-outline-success"},attributes])
}, opts);
};
buf.push("");














buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div class=\"card card-body\"><div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">New Ontology</h4></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12\">");
jade_mixins["formInput"]({ label: 'Label', placeholder: 'Label', name: 'label', type: 'text' });
jade_mixins["formInput"]({ label: 'Prefix', placeholder: 'Prefix', name: 'prefix', type: 'text' });
buf.push("</div><div data-region=\"upload\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"><hr/></div><div class=\"col-lg-12 text-right\">");
jade_mixins["submitButton"]({});
buf.push("</div></div></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],155:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<input type=\"file\" id=\"file_upload\" data-title=\"Drag and drop a JSON-LD dataset\" class=\"form-control-file\"/>");;return buf.join("");
};
},{"jade/runtime":209}],156:[function(require,module,exports){
var ListRoute, NewRoute, OntologyRouter,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./factory');

require('./importer');

ListRoute = require('./list/route');

NewRoute = require('./new/route');

OntologyRouter = (function(superClass) {
  extend(OntologyRouter, superClass);

  function OntologyRouter() {
    return OntologyRouter.__super__.constructor.apply(this, arguments);
  }

  OntologyRouter.prototype.routes = {
    'ontologies(/)': 'list',
    'ontologies/:id/search(/)': 'search',
    'ontologies/new(/)': 'new'
  };

  OntologyRouter.prototype.list = function() {
    return new ListRoute({
      container: this.container
    });
  };

  OntologyRouter.prototype.search = function(id) {
    return console.log('SEARCH');
  };

  OntologyRouter.prototype["new"] = function() {
    return new NewRoute({
      container: this.container
    });
  };

  return OntologyRouter;

})(require('hn_routing/lib/router'));

module.exports = OntologyRouter;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L3JvdXRlci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvcm91dGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLG1DQUFBO0VBQUE7OztBQUFBLE9BQUEsQ0FBUSxXQUFSOztBQUNBLE9BQUEsQ0FBUSxZQUFSOztBQUVBLFNBQUEsR0FBWSxPQUFBLENBQVEsY0FBUjs7QUFDWixRQUFBLEdBQVcsT0FBQSxDQUFRLGFBQVI7O0FBSUw7Ozs7Ozs7MkJBRUosTUFBQSxHQUNFO0lBQUEsZUFBQSxFQUE0QixNQUE1QjtJQUNBLDBCQUFBLEVBQTRCLFFBRDVCO0lBRUEsbUJBQUEsRUFBNEIsS0FGNUI7OzsyQkFJRixJQUFBLEdBQU0sU0FBQTtXQUNKLElBQUksU0FBSixDQUFjO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO0tBQWQ7RUFESTs7MkJBSU4sTUFBQSxHQUFRLFNBQUMsRUFBRDtXQUNOLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWjtFQURNOzs0QkFHUixLQUFBLEdBQUssU0FBQTtXQUNILElBQUksUUFBSixDQUFhO01BQUUsU0FBQSxFQUFXLElBQUMsQ0FBQSxTQUFkO0tBQWI7RUFERzs7OztHQWRzQixPQUFBLENBQVEsdUJBQVI7O0FBbUI3QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./factory":142,"./importer":143,"./list/route":144,"./new/route":152,"hn_routing/lib/router":208}],157:[function(require,module,exports){
var SearchResultCollection, SearchResultDecorator, SearchResultModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SearchResultDecorator = (function(superClass) {
  extend(SearchResultDecorator, superClass);

  function SearchResultDecorator() {
    return SearchResultDecorator.__super__.constructor.apply(this, arguments);
  }

  SearchResultDecorator.prototype.icon = function() {
    var nfoType;
    nfoType = this.get('data')['@type'];
    switch (nfoType) {
      case "nfo:Folder":
        return 'fa-folder-open-o';
      case "nfo:Document":
        return 'fa-file-o';
      case "nfo:Image":
        return 'fa-file-image-o';
      case "nfo:PlainTextDocument":
        return 'fa-file-text-o';
      case "nfo:Spreadsheet":
        return 'fa-file-excel-o';
    }
  };

  return SearchResultDecorator;

})(Mn.Decorator);

SearchResultModel = (function(superClass) {
  extend(SearchResultModel, superClass);

  function SearchResultModel() {
    return SearchResultModel.__super__.constructor.apply(this, arguments);
  }

  SearchResultModel.prototype.decorator = SearchResultDecorator;

  SearchResultModel.prototype.stringifyJson = function() {
    return JSON.stringify(this.toJSON(), null, 2);
  };

  return SearchResultModel;

})(Backbone.Model);

SearchResultCollection = (function(superClass) {
  extend(SearchResultCollection, superClass);

  function SearchResultCollection() {
    return SearchResultCollection.__super__.constructor.apply(this, arguments);
  }

  SearchResultCollection.prototype.model = SearchResultModel;

  return SearchResultCollection;

})(Backbone.Collection);

module.exports = {
  Model: SearchResultModel,
  Collection: SearchResultCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9lbnRpdGllcy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2VudGl0aWVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxJQUFBLGdFQUFBO0VBQUE7OztBQUFNOzs7Ozs7O2tDQUVKLElBQUEsR0FBTSxTQUFBO0FBQ0osUUFBQTtJQUFBLE9BQUEsR0FBVSxJQUFDLENBQUEsR0FBRCxDQUFLLE1BQUwsQ0FBYSxDQUFBLE9BQUE7QUFFaEIsWUFBTyxPQUFQO0FBQUEsV0FDQSxZQURBO2VBQzhCO0FBRDlCLFdBRUEsY0FGQTtlQUU4QjtBQUY5QixXQUdBLFdBSEE7ZUFHOEI7QUFIOUIsV0FJQSx1QkFKQTtlQUk4QjtBQUo5QixXQUtBLGlCQUxBO2VBSzhCO0FBTDlCO0VBSEg7Ozs7R0FGNEIsRUFBRSxDQUFDOztBQWNqQzs7Ozs7Ozs4QkFHSixTQUFBLEdBQVc7OzhCQUlYLGFBQUEsR0FBZSxTQUFBO0FBQUcsV0FBTyxJQUFJLENBQUMsU0FBTCxDQUFlLElBQUMsQ0FBQSxNQUFELENBQUEsQ0FBZixFQUEwQixJQUExQixFQUFnQyxDQUFoQztFQUFWOzs7O0dBUGUsUUFBUSxDQUFDOztBQVduQzs7Ozs7OzttQ0FDSixLQUFBLEdBQU87Ozs7R0FENEIsUUFBUSxDQUFDOztBQUs5QyxNQUFNLENBQUMsT0FBUCxHQUNFO0VBQUEsS0FBQSxFQUFZLGlCQUFaO0VBQ0EsVUFBQSxFQUFZLHNCQURaIn0=

},{}],158:[function(require,module,exports){
var CsvViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

CsvViewer = (function(superClass) {
  extend(CsvViewer, superClass);

  function CsvViewer() {
    return CsvViewer.__super__.constructor.apply(this, arguments);
  }

  CsvViewer.prototype.template = require('./templates/csv');

  CsvViewer.prototype.className = 'card card-body';

  CsvViewer.prototype.onRender = function() {
    var url;
    url = this.model.get('views').csv;
    return this.loadCsv(url);
  };

  CsvViewer.prototype.loadCsv = function(url) {
    var xhr;
    xhr = new XMLHttpRequest;
    xhr.open('GET', url, true);
    xhr.responseType = 'text';
    xhr.onload = (function(_this) {
      return function(e) {
        var status;
        status = xhr.status === 200 ? 'success' : 'error';
        if (status === 'success') {
          return _this.renderCsv(xhr.response);
        }
      };
    })(this);
    return xhr.send();
  };

  CsvViewer.prototype.renderCsv = function(text) {
    var container, parsedCSV;
    parsedCSV = d3.csvParseRows(text);
    return container = d3.select('.csv-viewer').append('table').selectAll('tr').data(parsedCSV).enter().append('tr').selectAll('td').data(function(d) {
      return d;
    }).enter().append('td').text(function(d) {
      return d;
    });
  };

  return CsvViewer;

})(Mn.LayoutView);

module.exports = CsvViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9jc3ZWaWV3ZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9jc3ZWaWV3ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsU0FBQTtFQUFBOzs7QUFBTTs7Ozs7OztzQkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLGlCQUFSOztzQkFDVixTQUFBLEdBQVc7O3NCQUVYLFFBQUEsR0FBVSxTQUFBO0FBQ1IsUUFBQTtJQUFBLEdBQUEsR0FBTSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQW1CLENBQUM7V0FDMUIsSUFBQyxDQUFBLE9BQUQsQ0FBUyxHQUFUO0VBRlE7O3NCQUlWLE9BQUEsR0FBUyxTQUFDLEdBQUQ7QUFJUCxRQUFBO0lBQUEsR0FBQSxHQUFNLElBQUk7SUFDVixHQUFHLENBQUMsSUFBSixDQUFTLEtBQVQsRUFBZ0IsR0FBaEIsRUFBcUIsSUFBckI7SUFDQSxHQUFHLENBQUMsWUFBSixHQUFtQjtJQUduQixHQUFHLENBQUMsTUFBSixHQUFhLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO0FBQ1gsWUFBQTtRQUFBLE1BQUEsR0FBWSxHQUFHLENBQUMsTUFBSixLQUFjLEdBQWpCLEdBQTBCLFNBQTFCLEdBQXlDO1FBR2xELElBQW1DLE1BQUEsS0FBVSxTQUE3QztBQUFBLGlCQUFPLEtBQUMsQ0FBQSxTQUFELENBQVcsR0FBRyxDQUFDLFFBQWYsRUFBUDs7TUFKVztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7V0FPYixHQUFHLENBQUMsSUFBSixDQUFBO0VBaEJPOztzQkFrQlQsU0FBQSxHQUFXLFNBQUMsSUFBRDtBQUlULFFBQUE7SUFBQSxTQUFBLEdBQVksRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsSUFBaEI7V0FDWixTQUFBLEdBQVksRUFBRSxDQUFDLE1BQUgsQ0FBVSxhQUFWLENBQ1osQ0FBQyxNQURXLENBQ0osT0FESSxDQUVaLENBQUMsU0FGVyxDQUVELElBRkMsQ0FHWixDQUFDLElBSFcsQ0FHTixTQUhNLENBSVosQ0FBQyxLQUpXLENBQUEsQ0FLWixDQUFDLE1BTFcsQ0FLSixJQUxJLENBTVosQ0FBQyxTQU5XLENBTUQsSUFOQyxDQU9aLENBQUMsSUFQVyxDQU9OLFNBQUMsQ0FBRDthQUFPO0lBQVAsQ0FQTSxDQVFaLENBQUMsS0FSVyxDQUFBLENBUUosQ0FBQyxNQVJHLENBUUksSUFSSixDQVFTLENBQUMsSUFSVixDQVFlLFNBQUMsQ0FBRDthQUFPO0lBQVAsQ0FSZjtFQUxIOzs7O0dBMUJXLEVBQUUsQ0FBQzs7QUEyQzNCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/csv":169}],159:[function(require,module,exports){

/**
 * Please note that when passing in custom templates for
 * listItemTemplate and orderByTemplate to keep the classes as
 * they are used in the code at other locations as well.
 */
var applyFilters, createEmptyFacetCollection, createFacetUI, defaults, filter, filterSingleItem, getFilterById, initFacetCount, order, resetFacetCount, setZeroCounts, settings, showMoreResults, sortFacetCollection, toggleFilter, updateFacetCollection, updateFacetUI, updateResults;

defaults = {
  items: [
    {
      a: 2,
      b: 1,
      c: 2
    }, {
      a: 2,
      b: 2,
      c: 1
    }, {
      a: 1,
      b: 1,
      c: 1
    }, {
      a: 3,
      b: 3,
      c: 1
    }
  ],
  facets: {
    'a': 'Title A',
    'b': 'Title B',
    'c': 'Title C'
  },
  facetElement: '#facets',
  listItemTemplate: '<div class="facetitem" id="<%= id %>"><%= name %> <span class="facetitemcount">(<%= count %>)</span></div>',
  countTemplate: '<div class=facettotalcount>Results</div>',
  resultTemplateBypass: null,
  orderByOptions: {
    'a': 'by A',
    'b': 'by B',
    'RANDOM': 'by random'
  },
  state: {
    orderBy: false,
    filters: {}
  },
  enablePagination: true,
  paginationCount: 20
};


/**
 * This is the first function / variable that gets exported into the
 * jQuery namespace. Pass in your own settings (see above) to initialize
 * the faceted search
 */

settings = {};


/**
 * The following section contains the logic of the faceted search
 */


/**
 * initializes all facets and their individual filters
 */

createEmptyFacetCollection = function() {
  var facet, j, len, ref, results;
  ref = settings.facets;
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    facet = ref[j];
    results.push(settings.facetCollection[facet.attribute] = {});
  }
  return results;
};

setZeroCounts = function() {
  var attrKey, facet, facetitem, item, j, len, ref, results;
  ref = settings.items;
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    item = ref[j];
    item = item.data;
    results.push((function() {
      var k, len1, ref1, results1;
      ref1 = settings.facets;
      results1 = [];
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        facet = ref1[k];
        if ($.isArray(item[facet.attribute])) {
          results1.push((function() {
            var l, len2, ref2, results2;
            ref2 = item[facet.attribute];
            results2 = [];
            for (l = 0, len2 = ref2.length; l < len2; l++) {
              facetitem = ref2[l];
              if (typeof facetitem === 'object') {
                results2.push(settings.facetCollection[facet.attribute][facetitem['@id']] = settings.facetCollection[facet.attribute][facetitem['@id']] || {
                  count: 0,
                  id: _.uniqueId('facet_')
                });
              } else {
                results2.push(settings.facetCollection[facet.attribute][facetitem] = settings.facetCollection[facet.attribute][facetitem] || {
                  count: 0,
                  id: _.uniqueId('facet_')
                });
              }
            }
            return results2;
          })());
        } else if (typeof item[facet.attribute] === 'object' && (item[facet.attribute]['@id'] || item[facet.attribute]['@value'])) {
          attrKey = item[facet.attribute]['@id'] ? '@id' : '@value';
          results1.push(settings.facetCollection[facet.attribute][item[facet.attribute][attrKey]] = settings.facetCollection[facet.attribute][item[facet.attribute][attrKey]] || {
            count: 0,
            id: _.uniqueId('facet_')
          });
        } else {
          if (item[facet.attribute] !== void 0) {
            results1.push(settings.facetCollection[facet.attribute][item[facet.attribute]] = settings.facetCollection[facet.attribute][item[facet.attribute]] || {
              count: 0,
              id: _.uniqueId('facet_')
            });
          } else {
            results1.push(void 0);
          }
        }
      }
      return results1;
    })());
  }
  return results;
};

sortFacetCollection = function() {
  var el, facet, facettitle, j, len, ref, results, sorted, sortedstore;
  ref = settings.facetCollection;
  results = [];
  for (facettitle in ref) {
    facet = ref[facettitle];
    sorted = _.keys(settings.facetCollection[facettitle]).sort();
    if (settings.facet_SortOption && settings.facet_SortOption[facettitle]) {
      sorted = _.union(settings.facet_SortOption[facettitle], sorted);
    }
    sortedstore = {};
    for (j = 0, len = sorted.length; j < len; j++) {
      el = sorted[j];
      sortedstore[el] = settings.facetCollection[facettitle][el];
    }
    results.push(settings.facetCollection[facettitle] = sortedstore);
  }
  return results;
};

initFacetCount = function() {
  createEmptyFacetCollection();
  setZeroCounts();
  return sortFacetCollection();
};


/**
 * resets the facet count
 */

resetFacetCount = function() {
  var facetname, itemname, items, ref, results, value;
  ref = settings.facetCollection;
  results = [];
  for (facetname in ref) {
    items = ref[facetname];
    results.push((function() {
      var results1;
      results1 = [];
      for (itemname in items) {
        value = items[itemname];
        results1.push(settings.facetCollection[facetname][itemname].count = 0);
      }
      return results1;
    })());
  }
  return results;
};


/**
 * Filters all items from the settings according to the currently
 * set filters and stores the results in the settings.currentResults.
 * The number of items in each filter from each facet is also updated
 */

filterSingleItem = function(item) {
  var attrKey, f, facet, filter, filtersApply, inters, j, len, ref, ref1;
  filtersApply = true;
  item = item.data;
  ref = settings.state.filters;
  for (facet in ref) {
    filter = ref[facet];
    if ($.isArray(item[facet])) {
      if (item[facet][0] && typeof item[facet][0] === 'object') {
        ref1 = item[facet];
        for (j = 0, len = ref1.length; j < len; j++) {
          f = ref1[j];
          if (filter.length && _.indexOf(filter, f['@id']) === -1) {
            filtersApply = false;
          }
        }
      } else {
        inters = _.intersection(item[facet], filter);
        if (inters.length === 0) {
          filtersApply = false;
        }
      }
    } else if (typeof item[facet] === 'object' && (item[facet]['@id'] || item[facet]['@value'])) {
      attrKey = item[facet]['@id'] ? '@id' : '@value';
      if (filter.length && _.indexOf(filter, item[facet][attrKey]) === -1) {
        filtersApply = false;
      }
    } else {
      if (filter.length && _.indexOf(filter, item[facet]) === -1) {
        filtersApply = false;
      }
    }
  }
  return filtersApply;
};

applyFilters = function() {
  return settings.currentResults = _.select(settings.items, filterSingleItem);
};

updateFacetCollection = function() {
  var attrKey, facet, item, j, len, ref, results;
  ref = settings.facets;
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    facet = ref[j];
    results.push((function() {
      var k, len1, ref1, results1;
      ref1 = settings.currentResults;
      results1 = [];
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        item = ref1[k];
        item = item.data;
        if ($.isArray(item[facet.attribute])) {
          results1.push(_.each(item[facet.attribute], function(facetitem) {
            if (typeof facetitem === 'object') {
              return settings.facetCollection[facet.attribute][facetitem['@id']].count += 1;
            } else {
              settings.facetCollection[facet.attribute][facetitem].count += 1;
            }
          }));
        } else if (typeof item[facet.attribute] === 'object' && (item[facet.attribute]['@id'] || item[facet.attribute]['@value'])) {
          attrKey = item[facet.attribute]['@id'] ? '@id' : '@value';
          if (item[facet.attribute][attrKey] !== void 0) {
            results1.push(settings.facetCollection[facet.attribute][item[facet.attribute][attrKey]].count += 1);
          } else {
            results1.push(void 0);
          }
        } else {
          if (item[facet.attribute] !== void 0) {
            results1.push(settings.facetCollection[facet.attribute][item[facet.attribute]].count += 1);
          } else {
            results1.push(void 0);
          }
        }
      }
      return results1;
    })());
  }
  return results;
};

filter = function() {
  applyFilters();
  resetFacetCount();
  updateFacetCollection();
  settings.state.shownResults = 0;
};


/**
 * Orders the currentResults according to the settings.state.orderBy variable
 */

order = function() {
  if (settings.state.orderBy) {
    $('.activeorderby').removeClass('activeorderby');
    $('#orderby_' + settings.state.orderBy).addClass('activeorderby');
    return settings.currentResults = _.sortBy(settings.currentResults, function(item) {
      if (settings.state.orderBy === 'RANDOM') {
        return Math.random() * 10000;
      } else {
        return item[settings.state.orderBy];
      }
    });
  }
};


/**
 * The given facetname and filtername are activated or deactivated
 * depending on what they were beforehand. This causes the items to
 * be filtered again and the UI is updated accordingly.
 */

toggleFilter = function(key, value) {
  settings.state.filters[key] = settings.state.filters[key] || [];
  if (_.indexOf(settings.state.filters[key], value) === -1) {
    settings.state.filters[key].push(value);
  } else {
    settings.state.filters[key] = _.without(settings.state.filters[key], value);
    if (settings.state.filters[key].length === 0) {
      delete settings.state.filters[key];
    }
  }
  filter();
};


/**
 * The following section contains the presentation of the faceted search
 */


/**
 * This function is only called once, it creates the facets ui.
 */

createFacetUI = function() {
  var bottom, bottomContainer, containertemplate, countHtml, deselect, deselectTemplate, facet, facetContainer, facetHtml, facetItem, facetItemHtml, facetListContainer, facetTitleTemplate, facetlist, itemHtml, itemtemplate, j, len, orderByTemplate, ordertemplate, ref, titletemplate;
  facetContainer = '<div class=facetsearch id=<%= id %> ></div>';
  facetTitleTemplate = '<h3 class=facettitle><i class="icon"></i><%= title %><i class="fa fa-fw help" data-toggle="tooltip" data-placement="right" title="<%= tooltip %>"></i><br><span class="prefix <%= prefix %>"><%= prefix %> : <%= _id %></span></h3>';
  facetListContainer = '<div class=facetlist></div>';
  itemtemplate = _.template(settings.listItemTemplate);
  titletemplate = _.template(facetTitleTemplate);
  containertemplate = _.template(facetContainer);
  $(settings.facetElement).html('');
  ref = settings.facets;
  for (j = 0, len = ref.length; j < len; j++) {
    facet = ref[j];
    facetHtml = $(containertemplate({
      id: facet.attribute
    }));
    facetItem = {
      title: facet.label,
      tooltip: facet.tooltip,
      prefix: facet.prefix,
      _id: facet._id
    };
    console.log(facetItem);
    facetItemHtml = $(titletemplate(facetItem));
    facetHtml.append(facetItemHtml);
    facetlist = $(facetListContainer);
    _.each(settings.facetCollection[facet.attribute], function(filter, filtername) {
      var filteritem, item, splitName;
      splitName = filtername.trim().split('/');
      filtername = splitName.pop();
      filtername || (filtername = splitName.pop());
      item = {
        id: filter.id,
        name: filtername,
        count: filter.count
      };
      filteritem = $(itemtemplate(item));
      if (_.indexOf(settings.state.filters[facet.attribute], filtername) >= 0) {
        filteritem.addClass('activefacet');
      }
      if (item.count === 0) {
        filteritem.addClass('no-match');
      }
      facetlist.append(filteritem);
    });
    facetHtml.append(facetlist);
    $(settings.facetElement).append(facetHtml);
    $('[data-toggle=tooltip]').tooltip();
  }
  $('.facetitem').click(function(event) {
    var filter;
    filter = getFilterById(this.id);
    toggleFilter(filter.facetname, filter.filtername);
    order();
    updateFacetUI();
    updateResults();
  });
  bottomContainer = '<div class=bottomline></div>';
  bottom = $(bottomContainer);
  countHtml = _.template(settings.countTemplate, {
    count: settings.currentResults.length || 0
  });
  $(bottom).append(countHtml);
  orderByTemplate = '<div class=orderby><span class="orderby-title">Sort by: </span><ul><% _.each(options, function(value, key) { %>' + '<li class=orderbyitem id=orderby_<%= key %>>' + '<%= value %> </li> <% }); %></ul></div>';
  ordertemplate = _.template(orderByTemplate);
  itemHtml = $(ordertemplate({
    'options': settings.orderByOptions
  }));
  $(bottom).append(itemHtml);
  $(settings.facetElement).append(bottom);
  $('.orderbyitem').each(function() {
    var id;
    id = this.id.substr(8);
    if (settings.state.orderBy === id) {
      $(this).addClass('activeorderby');
    }
  });
  $('.orderbyitem').click(function(event) {
    var id;
    id = this.id.substr(8);
    settings.state.orderBy = id;
    settings.state.shownResults = 0;
    order();
    updateResults();
  });
  deselectTemplate = '<div class=deselectstartover>Deselect all filters</div>';
  deselect = $(deselectTemplate).click(function(event) {
    settings.state.filters = {};
    jQuery.facetUpdate();
  });
  $(bottom).append(deselect);
};


/**
 * get a facetname and filtername by the unique id that is created in the beginning
 */

getFilterById = function(id) {
  var result;
  result = false;
  _.each(settings.facetCollection, function(facet, facetname) {
    _.each(facet, function(filter, filtername) {
      if (filter.id === id) {
        result = {
          'facetname': facetname,
          'filtername': filtername
        };
      }
    });
  });
  return result;
};


/**
 * This function is only called whenever a filter has been added or removed
 * It adds a class to the active filters and shows the correct number for each
 */

updateFacetUI = function() {
  var countHtml, itemtemplate;
  itemtemplate = _.template(settings.listItemTemplate);
  _.each(settings.facetCollection, function(facet, facetname) {
    _.each(facet, function(filter, filtername) {
      var filteritem, item, splitName;
      splitName = filtername.trim().split('/');
      filtername = splitName.pop();
      filtername || (filtername = splitName.pop());
      item = {
        id: filter.id,
        name: filtername,
        count: filter.count
      };
      filteritem = $(itemtemplate(item)).html();
      $('#' + filter.id).html(filteritem);
      if (settings.state.filters[facetname] && _.indexOf(settings.state.filters[facetname], filtername) >= 0) {
        $('#' + filter.id).addClass('activefacet');
      } else {
        $('#' + filter.id).removeClass('activefacet');
      }
      if (filter.count === 0) {
        $('#' + filter.id).addClass('no-match');
      } else {
        $('#' + filter.id).removeClass('no-match');
      }
    });
  });
  countHtml = _.template(settings.countTemplate, {
    count: settings.currentResults.length
  });
  $(settings.facetElement + ' .facettotalcount').replaceWith(countHtml);
};


/**
 * Updates the the list of results according to the filters that have been set
 */

updateResults = function() {
  var noResults;
  noResults = '<div class=results>Sorry, but no items match these criteria</div>';
  showMoreResults();
};

showMoreResults = function() {
  var itemHtml;
  var i, item, itemHtml, showMoreTemplate, showNowCount;
  showNowCount = settings.enablePagination ? Math.min(settings.currentResults.length - settings.state.shownResults, settings.paginationCount) : settings.currentResults.length;
  itemHtml = '';
  if (settings.beforeResultRender) {
    settings.beforeResultRender();
  }
  i = settings.state.shownResults;
  while (i < settings.state.shownResults + showNowCount) {
    item = settings.currentResults[i];
    if (settings.resultTemplateBypass) {
      settings.resultTemplateBypass(item);
    }
    i++;
  }
  return showMoreTemplate = '<a id=showmorebutton>Show more</a>';
};

jQuery.facetelize = $.facetelize = function(usersettings) {
  $.extend(settings, defaults, usersettings);
  settings.currentResults = [];
  settings.facetCollection = {};
  $(settings.facetElement).data('settings', settings);
  window.state = settings.state;
  initFacetCount();
  filter();
  order();
  updateResults();
  createFacetUI();
  return settings.state;
};


/**
 * This is the second function / variable that gets exported into the
 * jQuery namespace. Use it to update everything if you messed with
 * the settings object
 */

jQuery.facetUpdate = function() {
  filter();
  order();
  updateFacetUI();
  updateResults();
};

jQuery.clearFacets = function() {
  settings.state.filters = {};
  jQuery.facetUpdate();
};

return;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9lbmdpbmUuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9lbmdpbmUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTs7Ozs7QUFBQSxJQUFBOztBQU9BLFFBQUEsR0FDRTtFQUFBLEtBQUEsRUFBTztJQUFDO01BQUMsQ0FBQSxFQUFFLENBQUg7TUFBSyxDQUFBLEVBQUUsQ0FBUDtNQUFTLENBQUEsRUFBRSxDQUFYO0tBQUQsRUFBZTtNQUFDLENBQUEsRUFBRSxDQUFIO01BQUssQ0FBQSxFQUFFLENBQVA7TUFBUyxDQUFBLEVBQUUsQ0FBWDtLQUFmLEVBQTZCO01BQUMsQ0FBQSxFQUFFLENBQUg7TUFBSyxDQUFBLEVBQUUsQ0FBUDtNQUFTLENBQUEsRUFBRSxDQUFYO0tBQTdCLEVBQTJDO01BQUMsQ0FBQSxFQUFFLENBQUg7TUFBSyxDQUFBLEVBQUUsQ0FBUDtNQUFTLENBQUEsRUFBRSxDQUFYO0tBQTNDO0dBQVA7RUFDQSxNQUFBLEVBQVE7SUFBQyxHQUFBLEVBQUssU0FBTjtJQUFpQixHQUFBLEVBQUssU0FBdEI7SUFBaUMsR0FBQSxFQUFLLFNBQXRDO0dBRFI7RUFFQSxZQUFBLEVBQWMsU0FGZDtFQUdBLGdCQUFBLEVBQWtCLDRHQUhsQjtFQUlBLGFBQUEsRUFBZSwwQ0FKZjtFQUtBLG9CQUFBLEVBQXNCLElBTHRCO0VBTUEsY0FBQSxFQUNFO0lBQUEsR0FBQSxFQUFLLE1BQUw7SUFDQSxHQUFBLEVBQUssTUFETDtJQUVBLFFBQUEsRUFBVSxXQUZWO0dBUEY7RUFVQSxLQUFBLEVBQ0U7SUFBQSxPQUFBLEVBQVMsS0FBVDtJQUNBLE9BQUEsRUFBUyxFQURUO0dBWEY7RUFhQSxnQkFBQSxFQUFrQixJQWJsQjtFQWNBLGVBQUEsRUFBaUIsRUFkakI7Ozs7QUFnQkY7Ozs7OztBQU1BLFFBQUEsR0FBVzs7O0FBRVg7Ozs7O0FBSUE7Ozs7QUFPQSwwQkFBQSxHQUE2QixTQUFBO0FBQzNCLE1BQUE7QUFBQTtBQUFBO09BQUEscUNBQUE7O2lCQUNFLFFBQVEsQ0FBQyxlQUFnQixDQUFBLEtBQUssQ0FBQyxTQUFOLENBQXpCLEdBQTRDO0FBRDlDOztBQUQyQjs7QUFNN0IsYUFBQSxHQUFnQixTQUFBO0FBR2QsTUFBQTtBQUFBO0FBQUE7T0FBQSxxQ0FBQTs7SUFHRSxJQUFBLEdBQU8sSUFBSSxDQUFDOzs7QUFHWjtBQUFBO1dBQUEsd0NBQUE7O1FBR0UsSUFBRyxDQUFDLENBQUMsT0FBRixDQUFVLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFmLENBQUg7OztBQUVFO0FBQUE7aUJBQUEsd0NBQUE7O2NBRUUsSUFBRyxPQUFPLFNBQVAsS0FBb0IsUUFBdkI7OEJBQ0UsUUFBUSxDQUFDLGVBQWdCLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxTQUFVLENBQUEsS0FBQSxDQUFWLENBQTFDLEdBQThELFFBQVEsQ0FBQyxlQUFnQixDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsU0FBVSxDQUFBLEtBQUEsQ0FBVixDQUExQyxJQUM1RDtrQkFBQSxLQUFBLEVBQU8sQ0FBUDtrQkFDQSxFQUFBLEVBQUksQ0FBQyxDQUFDLFFBQUYsQ0FBVyxRQUFYLENBREo7bUJBRko7ZUFBQSxNQUFBOzhCQU1FLFFBQVEsQ0FBQyxlQUFnQixDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsU0FBQSxDQUExQyxHQUF1RCxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLFNBQUEsQ0FBMUMsSUFDckQ7a0JBQUEsS0FBQSxFQUFPLENBQVA7a0JBQ0EsRUFBQSxFQUFJLENBQUMsQ0FBQyxRQUFGLENBQVcsUUFBWCxDQURKO21CQVBKOztBQUZGOztnQkFGRjtTQUFBLE1BZUssSUFBRyxPQUFPLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFaLEtBQWlDLFFBQWpDLElBQTZDLENBQUMsSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsS0FBQSxDQUF0QixJQUFnQyxJQUFLLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxRQUFBLENBQXZELENBQWhEO1VBR0gsT0FBQSxHQUFhLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLEtBQUEsQ0FBekIsR0FBcUMsS0FBckMsR0FBZ0Q7d0JBRTFELFFBQVEsQ0FBQyxlQUFnQixDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsT0FBQSxDQUF0QixDQUExQyxHQUE0RSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLE9BQUEsQ0FBdEIsQ0FBMUMsSUFDMUU7WUFBQSxLQUFBLEVBQU8sQ0FBUDtZQUNBLEVBQUEsRUFBSSxDQUFDLENBQUMsUUFBRixDQUFXLFFBQVgsQ0FESjthQU5DO1NBQUEsTUFBQTtVQVdILElBQUcsSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQUwsS0FBeUIsTUFBNUI7MEJBQ0UsUUFBUSxDQUFDLGVBQWdCLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxJQUFLLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBTCxDQUExQyxHQUFtRSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFMLENBQTFDLElBQ2pFO2NBQUEsS0FBQSxFQUFPLENBQVA7Y0FDQSxFQUFBLEVBQUksQ0FBQyxDQUFDLFFBQUYsQ0FBVyxRQUFYLENBREo7ZUFGSjtXQUFBLE1BQUE7a0NBQUE7V0FYRzs7QUFsQlA7OztBQU5GOztBQUhjOztBQTZDaEIsbUJBQUEsR0FBc0IsU0FBQTtBQUVwQixNQUFBO0FBQUE7QUFBQTtPQUFBLGlCQUFBOztJQUVFLE1BQUEsR0FBUyxDQUFDLENBQUMsSUFBRixDQUFPLFFBQVEsQ0FBQyxlQUFnQixDQUFBLFVBQUEsQ0FBaEMsQ0FBNEMsQ0FBQyxJQUE3QyxDQUFBO0lBRVQsSUFBRyxRQUFRLENBQUMsZ0JBQVQsSUFBOEIsUUFBUSxDQUFDLGdCQUFpQixDQUFBLFVBQUEsQ0FBM0Q7TUFDRSxNQUFBLEdBQVMsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxRQUFRLENBQUMsZ0JBQWlCLENBQUEsVUFBQSxDQUFsQyxFQUErQyxNQUEvQyxFQURYOztJQUdBLFdBQUEsR0FBYztBQUVkLFNBQUEsd0NBQUE7O01BQ0UsV0FBWSxDQUFBLEVBQUEsQ0FBWixHQUFrQixRQUFRLENBQUMsZUFBZ0IsQ0FBQSxVQUFBLENBQVksQ0FBQSxFQUFBO0FBRHpEO2lCQUdBLFFBQVEsQ0FBQyxlQUFnQixDQUFBLFVBQUEsQ0FBekIsR0FBdUM7QUFaekM7O0FBRm9COztBQWlCdEIsY0FBQSxHQUFpQixTQUFBO0VBR2YsMEJBQUEsQ0FBQTtFQUdBLGFBQUEsQ0FBQTtTQUdBLG1CQUFBLENBQUE7QUFUZTs7O0FBV2pCOzs7O0FBSUEsZUFBQSxHQUFrQixTQUFBO0FBQ2hCLE1BQUE7QUFBQTtBQUFBO09BQUEsZ0JBQUE7Ozs7QUFDRTtXQUFBLGlCQUFBOztzQkFDRSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxTQUFBLENBQVcsQ0FBQSxRQUFBLENBQVMsQ0FBQyxLQUE5QyxHQUFzRDtBQUR4RDs7O0FBREY7O0FBRGdCOzs7QUFLbEI7Ozs7OztBQU1BLGdCQUFBLEdBQW1CLFNBQUMsSUFBRDtBQUVqQixNQUFBO0VBQUEsWUFBQSxHQUFlO0VBR2YsSUFBQSxHQUFPLElBQUksQ0FBQztBQUdaO0FBQUEsT0FBQSxZQUFBOztJQUlFLElBQUcsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxJQUFLLENBQUEsS0FBQSxDQUFmLENBQUg7TUFFRSxJQUFHLElBQUssQ0FBQSxLQUFBLENBQU8sQ0FBQSxDQUFBLENBQVosSUFBa0IsT0FBTyxJQUFLLENBQUEsS0FBQSxDQUFPLENBQUEsQ0FBQSxDQUFuQixLQUEwQixRQUEvQztBQUNFO0FBQUEsYUFBQSxzQ0FBQTs7VUFFRSxJQUFHLE1BQU0sQ0FBQyxNQUFQLElBQWtCLENBQUMsQ0FBQyxPQUFGLENBQVUsTUFBVixFQUFrQixDQUFFLENBQUEsS0FBQSxDQUFwQixDQUFBLEtBQStCLENBQUMsQ0FBckQ7WUFDRSxZQUFBLEdBQWUsTUFEakI7O0FBRkYsU0FERjtPQUFBLE1BQUE7UUFPRSxNQUFBLEdBQVMsQ0FBQyxDQUFDLFlBQUYsQ0FBZSxJQUFLLENBQUEsS0FBQSxDQUFwQixFQUE0QixNQUE1QjtRQUNULElBQUcsTUFBTSxDQUFDLE1BQVAsS0FBaUIsQ0FBcEI7VUFDRSxZQUFBLEdBQWUsTUFEakI7U0FSRjtPQUZGO0tBQUEsTUFhSyxJQUFHLE9BQU8sSUFBSyxDQUFBLEtBQUEsQ0FBWixLQUF1QixRQUF2QixJQUFtQyxDQUFDLElBQUssQ0FBQSxLQUFBLENBQU8sQ0FBQSxLQUFBLENBQVosSUFBc0IsSUFBSyxDQUFBLEtBQUEsQ0FBTyxDQUFBLFFBQUEsQ0FBbkMsQ0FBdEM7TUFHSCxPQUFBLEdBQWEsSUFBSyxDQUFBLEtBQUEsQ0FBTyxDQUFBLEtBQUEsQ0FBZixHQUEyQixLQUEzQixHQUFzQztNQUVoRCxJQUFHLE1BQU0sQ0FBQyxNQUFQLElBQWtCLENBQUMsQ0FBQyxPQUFGLENBQVUsTUFBVixFQUFrQixJQUFLLENBQUEsS0FBQSxDQUFPLENBQUEsT0FBQSxDQUE5QixDQUFBLEtBQTJDLENBQUMsQ0FBakU7UUFDRSxZQUFBLEdBQWUsTUFEakI7T0FMRztLQUFBLE1BQUE7TUFTSCxJQUFHLE1BQU0sQ0FBQyxNQUFQLElBQWtCLENBQUMsQ0FBQyxPQUFGLENBQVUsTUFBVixFQUFrQixJQUFLLENBQUEsS0FBQSxDQUF2QixDQUFBLEtBQWtDLENBQUMsQ0FBeEQ7UUFDRSxZQUFBLEdBQWUsTUFEakI7T0FURzs7QUFqQlA7QUE4QkEsU0FBTztBQXRDVTs7QUEyQ25CLFlBQUEsR0FBZSxTQUFBO1NBQ2IsUUFBUSxDQUFDLGNBQVQsR0FBMEIsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxRQUFRLENBQUMsS0FBbEIsRUFBeUIsZ0JBQXpCO0FBRGI7O0FBS2YscUJBQUEsR0FBd0IsU0FBQTtBQUd0QixNQUFBO0FBQUE7QUFBQTtPQUFBLHFDQUFBOzs7O0FBSUU7QUFBQTtXQUFBLHdDQUFBOztRQUVFLElBQUEsR0FBTyxJQUFJLENBQUM7UUFJWixJQUFHLENBQUMsQ0FBQyxPQUFGLENBQVUsSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWYsQ0FBSDt3QkFDRSxDQUFDLENBQUMsSUFBRixDQUFPLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFaLEVBQThCLFNBQUMsU0FBRDtZQUU1QixJQUFHLE9BQU8sU0FBUCxLQUFxQixRQUF4QjtxQkFDRSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLFNBQVUsQ0FBQSxLQUFBLENBQVYsQ0FBaUIsQ0FBQyxLQUE1RCxJQUFxRSxFQUR2RTthQUFBLE1BQUE7Y0FJRSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLFNBQUEsQ0FBVSxDQUFDLEtBQXJELElBQThELEVBSmhFOztVQUY0QixDQUE5QixHQURGO1NBQUEsTUFVSyxJQUFHLE9BQU8sSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQVosS0FBaUMsUUFBakMsSUFBNkMsQ0FBQyxJQUFLLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxLQUFBLENBQXRCLElBQWdDLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLFFBQUEsQ0FBdkQsQ0FBaEQ7VUFFSCxPQUFBLEdBQWEsSUFBSyxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWlCLENBQUEsS0FBQSxDQUF6QixHQUFxQyxLQUFyQyxHQUFnRDtVQUUxRCxJQUFHLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLE9BQUEsQ0FBdEIsS0FBa0MsTUFBckM7MEJBQ0UsUUFBUSxDQUFDLGVBQWdCLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxJQUFLLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBaUIsQ0FBQSxPQUFBLENBQXRCLENBQStCLENBQUMsS0FBMUUsSUFBbUYsR0FEckY7V0FBQSxNQUFBO2tDQUFBO1dBSkc7U0FBQSxNQUFBO1VBUUgsSUFBRyxJQUFLLENBQUEsS0FBSyxDQUFDLFNBQU4sQ0FBTCxLQUF5QixNQUE1QjswQkFDRSxRQUFRLENBQUMsZUFBZ0IsQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFpQixDQUFBLElBQUssQ0FBQSxLQUFLLENBQUMsU0FBTixDQUFMLENBQXNCLENBQUMsS0FBakUsSUFBMEUsR0FENUU7V0FBQSxNQUFBO2tDQUFBO1dBUkc7O0FBaEJQOzs7QUFKRjs7QUFIc0I7O0FBb0N4QixNQUFBLEdBQVMsU0FBQTtFQUdQLFlBQUEsQ0FBQTtFQVNBLGVBQUEsQ0FBQTtFQUdBLHFCQUFBLENBQUE7RUFHQSxRQUFRLENBQUMsS0FBSyxDQUFDLFlBQWYsR0FBOEI7QUFsQnZCOzs7QUFxQlQ7Ozs7QUFJQSxLQUFBLEdBQVEsU0FBQTtFQUNOLElBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFsQjtJQUdFLENBQUEsQ0FBRSxnQkFBRixDQUFtQixDQUFDLFdBQXBCLENBQWdDLGVBQWhDO0lBQ0EsQ0FBQSxDQUFFLFdBQUEsR0FBYyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQS9CLENBQXVDLENBQUMsUUFBeEMsQ0FBaUQsZUFBakQ7V0FHQSxRQUFRLENBQUMsY0FBVCxHQUEwQixDQUFDLENBQUMsTUFBRixDQUFTLFFBQVEsQ0FBQyxjQUFsQixFQUFrQyxTQUFDLElBQUQ7TUFDMUQsSUFBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsS0FBMEIsUUFBN0I7ZUFDRSxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsTUFEbEI7T0FBQSxNQUFBO2VBR0UsSUFBSyxDQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixFQUhQOztJQUQwRCxDQUFsQyxFQVA1Qjs7QUFETTs7O0FBY1I7Ozs7OztBQU1BLFlBQUEsR0FBZSxTQUFDLEdBQUQsRUFBTSxLQUFOO0VBQ2IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFRLENBQUEsR0FBQSxDQUF2QixHQUE4QixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQVEsQ0FBQSxHQUFBLENBQXZCLElBQStCO0VBRTdELElBQUcsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQVEsQ0FBQSxHQUFBLENBQWpDLEVBQXVDLEtBQXZDLENBQUEsS0FBaUQsQ0FBQyxDQUFyRDtJQUNFLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBUSxDQUFBLEdBQUEsQ0FBSSxDQUFDLElBQTVCLENBQWlDLEtBQWpDLEVBREY7R0FBQSxNQUFBO0lBSUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFRLENBQUEsR0FBQSxDQUF2QixHQUE4QixDQUFDLENBQUMsT0FBRixDQUFVLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBUSxDQUFBLEdBQUEsQ0FBakMsRUFBdUMsS0FBdkM7SUFDOUIsSUFBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQVEsQ0FBQSxHQUFBLENBQUksQ0FBQyxNQUE1QixLQUFzQyxDQUF6QztNQUNFLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFRLENBQUEsR0FBQSxFQURoQztLQUxGOztFQVFBLE1BQUEsQ0FBQTtBQVhhOzs7QUFjZjs7Ozs7QUFJQTs7OztBQUlBLGFBQUEsR0FBZ0IsU0FBQTtBQUVkLE1BQUE7RUFBQSxjQUFBLEdBQWlCO0VBQ2pCLGtCQUFBLEdBQXFCO0VBQ3JCLGtCQUFBLEdBQXFCO0VBR3JCLFlBQUEsR0FBZSxDQUFDLENBQUMsUUFBRixDQUFXLFFBQVEsQ0FBQyxnQkFBcEI7RUFDZixhQUFBLEdBQWdCLENBQUMsQ0FBQyxRQUFGLENBQVcsa0JBQVg7RUFDaEIsaUJBQUEsR0FBb0IsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxjQUFYO0VBQ3BCLENBQUEsQ0FBRSxRQUFRLENBQUMsWUFBWCxDQUF3QixDQUFDLElBQXpCLENBQThCLEVBQTlCO0FBS0E7QUFBQSxPQUFBLHFDQUFBOztJQUNFLFNBQUEsR0FBWSxDQUFBLENBQUUsaUJBQUEsQ0FBa0I7TUFBQSxFQUFBLEVBQUksS0FBSyxDQUFDLFNBQVY7S0FBbEIsQ0FBRjtJQUdaLFNBQUEsR0FDRTtNQUFBLEtBQUEsRUFBVSxLQUFLLENBQUMsS0FBaEI7TUFDQSxPQUFBLEVBQVUsS0FBSyxDQUFDLE9BRGhCO01BRUEsTUFBQSxFQUFVLEtBQUssQ0FBQyxNQUZoQjtNQUdBLEdBQUEsRUFBVSxLQUFLLENBQUMsR0FIaEI7O0lBUUYsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaO0lBRUEsYUFBQSxHQUFnQixDQUFBLENBQUUsYUFBQSxDQUFjLFNBQWQsQ0FBRjtJQUNoQixTQUFTLENBQUMsTUFBVixDQUFpQixhQUFqQjtJQUNBLFNBQUEsR0FBWSxDQUFBLENBQUUsa0JBQUY7SUFJWixDQUFDLENBQUMsSUFBRixDQUFPLFFBQVEsQ0FBQyxlQUFnQixDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWhDLEVBQWtELFNBQUMsTUFBRCxFQUFTLFVBQVQ7QUFJaEQsVUFBQTtNQUFBLFNBQUEsR0FBYyxVQUFVLENBQUMsSUFBWCxDQUFBLENBQWlCLENBQUMsS0FBbEIsQ0FBd0IsR0FBeEI7TUFDZCxVQUFBLEdBQWMsU0FBUyxDQUFDLEdBQVYsQ0FBQTtNQUNkLGVBQUEsYUFBZSxTQUFTLENBQUMsR0FBVixDQUFBO01BRWYsSUFBQSxHQUNFO1FBQUEsRUFBQSxFQUFJLE1BQU0sQ0FBQyxFQUFYO1FBQ0EsSUFBQSxFQUFNLFVBRE47UUFFQSxLQUFBLEVBQU8sTUFBTSxDQUFDLEtBRmQ7O01BU0YsVUFBQSxHQUFhLENBQUEsQ0FBRSxZQUFBLENBQWEsSUFBYixDQUFGO01BQ2IsSUFBRyxDQUFDLENBQUMsT0FBRixDQUFVLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBUSxDQUFBLEtBQUssQ0FBQyxTQUFOLENBQWpDLEVBQW1ELFVBQW5ELENBQUEsSUFBa0UsQ0FBckU7UUFDRSxVQUFVLENBQUMsUUFBWCxDQUFvQixhQUFwQixFQURGOztNQUdBLElBQUcsSUFBSSxDQUFDLEtBQUwsS0FBYyxDQUFqQjtRQUNFLFVBQVUsQ0FBQyxRQUFYLENBQW9CLFVBQXBCLEVBREY7O01BSUEsU0FBUyxDQUFDLE1BQVYsQ0FBaUIsVUFBakI7SUExQmdELENBQWxEO0lBOEJBLFNBQVMsQ0FBQyxNQUFWLENBQWlCLFNBQWpCO0lBQ0EsQ0FBQSxDQUFFLFFBQVEsQ0FBQyxZQUFYLENBQXdCLENBQUMsTUFBekIsQ0FBZ0MsU0FBaEM7SUFHQSxDQUFBLENBQUUsdUJBQUYsQ0FBMEIsQ0FBQyxPQUEzQixDQUFBO0FBdkRGO0VBNkRBLENBQUEsQ0FBRSxZQUFGLENBQWUsQ0FBQyxLQUFoQixDQUFzQixTQUFDLEtBQUQ7SUFDcEI7SUFDQSxNQUFBLEdBQVMsYUFBQSxDQUFjLElBQUMsQ0FBQSxFQUFmO0lBQ1QsWUFBQSxDQUFhLE1BQU0sQ0FBQyxTQUFwQixFQUErQixNQUFNLENBQUMsVUFBdEM7SUFFQSxLQUFBLENBQUE7SUFDQSxhQUFBLENBQUE7SUFDQSxhQUFBLENBQUE7RUFQb0IsQ0FBdEI7RUFlQSxlQUFBLEdBQWtCO0VBQ2xCLE1BQUEsR0FBUyxDQUFBLENBQUUsZUFBRjtFQUNULFNBQUEsR0FBWSxDQUFDLENBQUMsUUFBRixDQUFXLFFBQVEsQ0FBQyxhQUFwQixFQUFtQztJQUFBLEtBQUEsRUFBTyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQXhCLElBQWtDLENBQXpDO0dBQW5DO0VBQ1osQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLE1BQVYsQ0FBaUIsU0FBakI7RUFLQSxlQUFBLEdBQWtCLGlIQUFBLEdBQW9ILDhDQUFwSCxHQUFxSztFQUV2TCxhQUFBLEdBQWdCLENBQUMsQ0FBQyxRQUFGLENBQVcsZUFBWDtFQUNoQixRQUFBLEdBQVcsQ0FBQSxDQUFFLGFBQUEsQ0FBYztJQUFBLFNBQUEsRUFBVyxRQUFRLENBQUMsY0FBcEI7R0FBZCxDQUFGO0VBQ1gsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLE1BQVYsQ0FBaUIsUUFBakI7RUFDQSxDQUFBLENBQUUsUUFBUSxDQUFDLFlBQVgsQ0FBd0IsQ0FBQyxNQUF6QixDQUFnQyxNQUFoQztFQUNBLENBQUEsQ0FBRSxjQUFGLENBQWlCLENBQUMsSUFBbEIsQ0FBdUIsU0FBQTtBQUNyQixRQUFBO0lBQUEsRUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFFLENBQUMsTUFBSixDQUFXLENBQVg7SUFDTCxJQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixLQUEwQixFQUE3QjtNQUNFLENBQUEsQ0FBRSxJQUFGLENBQU8sQ0FBQyxRQUFSLENBQWlCLGVBQWpCLEVBREY7O0VBRnFCLENBQXZCO0VBU0EsQ0FBQSxDQUFFLGNBQUYsQ0FBaUIsQ0FBQyxLQUFsQixDQUF3QixTQUFDLEtBQUQ7QUFDdEIsUUFBQTtJQUFBLEVBQUEsR0FBSyxJQUFDLENBQUEsRUFBRSxDQUFDLE1BQUosQ0FBVyxDQUFYO0lBQ0wsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLEdBQXlCO0lBRXpCLFFBQVEsQ0FBQyxLQUFLLENBQUMsWUFBZixHQUE4QjtJQUM5QixLQUFBLENBQUE7SUFDQSxhQUFBLENBQUE7RUFOc0IsQ0FBeEI7RUFZQSxnQkFBQSxHQUFtQjtFQUNuQixRQUFBLEdBQVcsQ0FBQSxDQUFFLGdCQUFGLENBQW1CLENBQUMsS0FBcEIsQ0FBMEIsU0FBQyxLQUFEO0lBQ25DLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixHQUF5QjtJQUN6QixNQUFNLENBQUMsV0FBUCxDQUFBO0VBRm1DLENBQTFCO0VBUVgsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLE1BQVYsQ0FBaUIsUUFBakI7QUF2SWM7OztBQTJJaEI7Ozs7QUFJQSxhQUFBLEdBQWdCLFNBQUMsRUFBRDtBQUNkLE1BQUE7RUFBQSxNQUFBLEdBQVM7RUFDVCxDQUFDLENBQUMsSUFBRixDQUFPLFFBQVEsQ0FBQyxlQUFoQixFQUFpQyxTQUFDLEtBQUQsRUFBUSxTQUFSO0lBQy9CLENBQUMsQ0FBQyxJQUFGLENBQU8sS0FBUCxFQUFjLFNBQUMsTUFBRCxFQUFTLFVBQVQ7TUFDWixJQUFHLE1BQU0sQ0FBQyxFQUFQLEtBQWEsRUFBaEI7UUFDRSxNQUFBLEdBQ0U7VUFBQSxXQUFBLEVBQWMsU0FBZDtVQUNBLFlBQUEsRUFBYyxVQURkO1VBRko7O0lBRFksQ0FBZDtFQUQrQixDQUFqQztTQVFBO0FBVmM7OztBQVloQjs7Ozs7QUFNQSxhQUFBLEdBQWdCLFNBQUE7QUFHZCxNQUFBO0VBQUEsWUFBQSxHQUFlLENBQUMsQ0FBQyxRQUFGLENBQVcsUUFBUSxDQUFDLGdCQUFwQjtFQUlmLENBQUMsQ0FBQyxJQUFGLENBQU8sUUFBUSxDQUFDLGVBQWhCLEVBQWlDLFNBQUMsS0FBRCxFQUFRLFNBQVI7SUFDL0IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxLQUFQLEVBQWMsU0FBQyxNQUFELEVBQVMsVUFBVDtBQUtaLFVBQUE7TUFBQSxTQUFBLEdBQWMsVUFBVSxDQUFDLElBQVgsQ0FBQSxDQUFpQixDQUFDLEtBQWxCLENBQXdCLEdBQXhCO01BQ2QsVUFBQSxHQUFjLFNBQVMsQ0FBQyxHQUFWLENBQUE7TUFDZCxlQUFBLGFBQWUsU0FBUyxDQUFDLEdBQVYsQ0FBQTtNQUlmLElBQUEsR0FDRTtRQUFBLEVBQUEsRUFBSSxNQUFNLENBQUMsRUFBWDtRQUNBLElBQUEsRUFBTSxVQUROO1FBRUEsS0FBQSxFQUFPLE1BQU0sQ0FBQyxLQUZkOztNQU1GLFVBQUEsR0FBYSxDQUFBLENBQUUsWUFBQSxDQUFhLElBQWIsQ0FBRixDQUFxQixDQUFDLElBQXRCLENBQUE7TUFDYixDQUFBLENBQUUsR0FBQSxHQUFNLE1BQU0sQ0FBQyxFQUFmLENBQWtCLENBQUMsSUFBbkIsQ0FBd0IsVUFBeEI7TUFJQSxJQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBUSxDQUFBLFNBQUEsQ0FBdkIsSUFBc0MsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQVEsQ0FBQSxTQUFBLENBQWpDLEVBQTZDLFVBQTdDLENBQUEsSUFBNEQsQ0FBckc7UUFDRSxDQUFBLENBQUUsR0FBQSxHQUFNLE1BQU0sQ0FBQyxFQUFmLENBQWtCLENBQUMsUUFBbkIsQ0FBNEIsYUFBNUIsRUFERjtPQUFBLE1BQUE7UUFHRSxDQUFBLENBQUUsR0FBQSxHQUFNLE1BQU0sQ0FBQyxFQUFmLENBQWtCLENBQUMsV0FBbkIsQ0FBK0IsYUFBL0IsRUFIRjs7TUFPQSxJQUFHLE1BQU0sQ0FBQyxLQUFQLEtBQWdCLENBQW5CO1FBQ0UsQ0FBQSxDQUFFLEdBQUEsR0FBTSxNQUFNLENBQUMsRUFBZixDQUFrQixDQUFDLFFBQW5CLENBQTRCLFVBQTVCLEVBREY7T0FBQSxNQUFBO1FBR0UsQ0FBQSxDQUFFLEdBQUEsR0FBTSxNQUFNLENBQUMsRUFBZixDQUFrQixDQUFDLFdBQW5CLENBQStCLFVBQS9CLEVBSEY7O0lBOUJZLENBQWQ7RUFEK0IsQ0FBakM7RUF5Q0EsU0FBQSxHQUFZLENBQUMsQ0FBQyxRQUFGLENBQVcsUUFBUSxDQUFDLGFBQXBCLEVBQW1DO0lBQUEsS0FBQSxFQUFPLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBL0I7R0FBbkM7RUFDWixDQUFBLENBQUUsUUFBUSxDQUFDLFlBQVQsR0FBd0IsbUJBQTFCLENBQThDLENBQUMsV0FBL0MsQ0FBMkQsU0FBM0Q7QUFqRGM7OztBQW9EaEI7Ozs7QUFLQSxhQUFBLEdBQWdCLFNBQUE7QUFDZCxNQUFBO0VBQUEsU0FBQSxHQUFZO0VBRVosZUFBQSxDQUFBO0FBSGM7O0FBTWhCLGVBQUEsR0FBa0IsU0FBQTtFQUNoQjtBQUFBLE1BQUE7RUFHQSxZQUFBLEdBQWtCLFFBQVEsQ0FBQyxnQkFBWixHQUFrQyxJQUFJLENBQUMsR0FBTCxDQUFTLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBeEIsR0FBa0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxZQUExRCxFQUF5RSxRQUFRLENBQUMsZUFBbEYsQ0FBbEMsR0FBMEksUUFBUSxDQUFDLGNBQWMsQ0FBQztFQUNqTCxRQUFBLEdBQVc7RUFHWCxJQUFHLFFBQVEsQ0FBQyxrQkFBWjtJQUNFLFFBQVEsQ0FBQyxrQkFBVCxDQUFBLEVBREY7O0VBSUEsQ0FBQSxHQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDbkIsU0FBTSxDQUFBLEdBQUksUUFBUSxDQUFDLEtBQUssQ0FBQyxZQUFmLEdBQThCLFlBQXhDO0lBRUUsSUFBQSxHQUFPLFFBQVEsQ0FBQyxjQUFlLENBQUEsQ0FBQTtJQU8vQixJQUFHLFFBQVEsQ0FBQyxvQkFBWjtNQUNFLFFBQVEsQ0FBQyxvQkFBVCxDQUE4QixJQUE5QixFQURGOztJQUVBLENBQUE7RUFYRjtTQWlCQSxnQkFBQSxHQUFtQjtBQTlCSDs7QUErQ2xCLE1BQU0sQ0FBQyxVQUFQLEdBQ0EsQ0FBQyxDQUFDLFVBQUYsR0FBZSxTQUFDLFlBQUQ7RUFHYixDQUFDLENBQUMsTUFBRixDQUFTLFFBQVQsRUFBbUIsUUFBbkIsRUFBNkIsWUFBN0I7RUFHQSxRQUFRLENBQUMsY0FBVCxHQUEwQjtFQUcxQixRQUFRLENBQUMsZUFBVCxHQUEyQjtFQUczQixDQUFBLENBQUUsUUFBUSxDQUFDLFlBQVgsQ0FBd0IsQ0FBQyxJQUF6QixDQUE4QixVQUE5QixFQUEwQyxRQUExQztFQUdBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsUUFBUSxDQUFDO0VBR3hCLGNBQUEsQ0FBQTtFQUNBLE1BQUEsQ0FBQTtFQUNBLEtBQUEsQ0FBQTtFQUNBLGFBQUEsQ0FBQTtFQUNBLGFBQUEsQ0FBQTtTQUNBLFFBQVEsQ0FBQztBQXZCSTs7O0FBeUJmOzs7Ozs7QUFNQSxNQUFNLENBQUMsV0FBUCxHQUFxQixTQUFBO0VBQ25CLE1BQUEsQ0FBQTtFQUNBLEtBQUEsQ0FBQTtFQUNBLGFBQUEsQ0FBQTtFQUNBLGFBQUEsQ0FBQTtBQUptQjs7QUFTckIsTUFBTSxDQUFDLFdBQVAsR0FBcUIsU0FBQTtFQUNuQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsR0FBeUI7RUFDekIsTUFBTSxDQUFDLFdBQVAsQ0FBQTtBQUZtQjs7QUFPckIifQ==

},{}],160:[function(require,module,exports){
var JsonLDGraphView, jsonVis,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

jsonVis = require('jsonld-vis');

jsonVis["default"](d3);

JsonLDGraphView = (function(superClass) {
  extend(JsonLDGraphView, superClass);

  function JsonLDGraphView() {
    this.initJsonChart = bind(this.initJsonChart, this);
    return JsonLDGraphView.__super__.constructor.apply(this, arguments);
  }

  JsonLDGraphView.prototype.template = require('./templates/graph');

  JsonLDGraphView.prototype.className = 'card card-body';

  JsonLDGraphView.prototype.graphOptions = {
    w: 800,
    h: 300,
    maxLabelWidth: 250,
    transitionDuration: 250,
    transitionEase: 'cubic-in-out',
    minRadius: 5,
    scalingFactor: 1.5
  };

  JsonLDGraphView.prototype.onRender = function() {
    return setTimeout(this.initJsonChart, 100);
  };

  JsonLDGraphView.prototype.initJsonChart = function() {
    var each, i, json, len, results;
    json = this.options.json;
    if (Array.isArray(json)) {
      results = [];
      for (i = 0, len = json.length; i < len; i++) {
        each = json[i];
        results.push(d3.jsonldVis(each, '[data-display=graph]', this.graphOptions));
      }
      return results;
    } else {
      return d3.jsonldVis(this.options.json, '[data-display=graph]', this.graphOptions);
    }
  };

  return JsonLDGraphView;

})(Mn.LayoutView);

module.exports = JsonLDGraphView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9ncmFwaC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL2dyYXBoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxJQUFBLHdCQUFBO0VBQUE7Ozs7QUFBQSxPQUFBLEdBQVUsT0FBQSxDQUFRLFlBQVI7O0FBQ1YsT0FBTyxFQUFDLE9BQUQsRUFBUCxDQUFnQixFQUFoQjs7QUFJTTs7Ozs7Ozs7NEJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxtQkFBUjs7NEJBQ1YsU0FBQSxHQUFXOzs0QkFFWCxZQUFBLEdBQ0U7SUFBQSxDQUFBLEVBQW9CLEdBQXBCO0lBQ0EsQ0FBQSxFQUFvQixHQURwQjtJQUVBLGFBQUEsRUFBb0IsR0FGcEI7SUFHQSxrQkFBQSxFQUFvQixHQUhwQjtJQUlBLGNBQUEsRUFBb0IsY0FKcEI7SUFLQSxTQUFBLEVBQW9CLENBTHBCO0lBTUEsYUFBQSxFQUFvQixHQU5wQjs7OzRCQVFGLFFBQUEsR0FBVSxTQUFBO1dBQ1IsVUFBQSxDQUFXLElBQUMsQ0FBQSxhQUFaLEVBQTJCLEdBQTNCO0VBRFE7OzRCQUlWLGFBQUEsR0FBZSxTQUFBO0FBSWIsUUFBQTtJQUFBLElBQUEsR0FBTyxJQUFDLENBQUEsT0FBTyxDQUFDO0lBRWhCLElBQUcsS0FBSyxDQUFDLE9BQU4sQ0FBYyxJQUFkLENBQUg7QUFDRTtXQUFBLHNDQUFBOztxQkFDRSxFQUFFLENBQUMsU0FBSCxDQUFhLElBQWIsRUFBbUIsc0JBQW5CLEVBQTJDLElBQUMsQ0FBQSxZQUE1QztBQURGO3FCQURGO0tBQUEsTUFBQTthQUtFLEVBQUUsQ0FBQyxTQUFILENBQWEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUF0QixFQUE0QixzQkFBNUIsRUFBb0QsSUFBQyxDQUFBLFlBQXJELEVBTEY7O0VBTmE7Ozs7R0FqQmEsRUFBRSxDQUFDOztBQWdDakMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/graph":171,"jsonld-vis":211}],161:[function(require,module,exports){
var FacetSearchHeader,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FacetSearchHeader = (function(superClass) {
  extend(FacetSearchHeader, superClass);

  function FacetSearchHeader() {
    return FacetSearchHeader.__super__.constructor.apply(this, arguments);
  }

  FacetSearchHeader.prototype.template = require('./templates/header');

  FacetSearchHeader.prototype.className = 'card card-body';

  FacetSearchHeader.prototype.ui = {
    clear: '[data-click=clear]',
    list: '[data-click=list]',
    viewer: '[data-click=viewer]'
  };

  FacetSearchHeader.prototype.triggers = {
    'click @ui.clear': 'clear',
    'click @ui.list': 'list',
    'click @ui.viewer': 'viewer'
  };

  return FacetSearchHeader;

})(Mn.LayoutView);

module.exports = FacetSearchHeader;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9oZWFkZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9oZWFkZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsaUJBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7OEJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7OEJBQ1YsU0FBQSxHQUFXOzs4QkFFWCxFQUFBLEdBQ0U7SUFBQSxLQUFBLEVBQVEsb0JBQVI7SUFDQSxJQUFBLEVBQVEsbUJBRFI7SUFFQSxNQUFBLEVBQVEscUJBRlI7Ozs4QkFJRixRQUFBLEdBQ0U7SUFBQSxpQkFBQSxFQUFvQixPQUFwQjtJQUNBLGdCQUFBLEVBQW9CLE1BRHBCO0lBRUEsa0JBQUEsRUFBb0IsUUFGcEI7Ozs7O0dBVjRCLEVBQUUsQ0FBQzs7QUFnQm5DLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/header":172}],162:[function(require,module,exports){
var ResultDetailView, STLViewer,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

STLViewer = require('./stlViewer');

ResultDetailView = (function(superClass) {
  extend(ResultDetailView, superClass);

  function ResultDetailView() {
    this.onImageOut = bind(this.onImageOut, this);
    this.onImageIn = bind(this.onImageIn, this);
    return ResultDetailView.__super__.constructor.apply(this, arguments);
  }

  ResultDetailView.prototype.template = require('./templates/detail');

  ResultDetailView.prototype.className = 'card card-body rdf-viewer-detail';

  ResultDetailView.prototype.events = {
    'click [data-click=close]': 'closeView',
    'mouseover img': 'onImageIn',
    'mouseout img': 'onImageOut'
  };

  ResultDetailView.prototype.regions = {
    viewerRegion: '[data-region=viewer]'
  };

  ResultDetailView.prototype.onImageIn = function(e) {
    this.trigger('show:underlay');
    if (this.drift) {
      return this.drift.enable();
    }
    return this.drift = new Drift(document.querySelector('img'), {
      containInline: true,
      inlinePane: 200,
      paneContainer: $('.drift-content')[0],
      zoomFactor: 5,
      hoverBoundingBox: true
    });
  };

  ResultDetailView.prototype.onImageOut = function(e) {
    this.trigger('hide:underlay');
    return this.drift.disable();
  };

  ResultDetailView.prototype.closeView = function() {
    $('.drift-content').html('');
    this.trigger('hide:underlay');
    return this.trigger('hide');
  };

  ResultDetailView.prototype.onRender = function() {
    if (this.model.get('views').dicom) {
      return this.loadDicom();
    }
    if (this.model.get('views').stl) {
      return this.viewerRegion.show(new STLViewer({
        model: this.model
      }));
    }
  };

  ResultDetailView.prototype.fetchDicom = function(url) {
    var str2ab, xhr;
    str2ab = function(str) {
      var buf, bufView, i, strLen;
      buf = new ArrayBuffer(str.length * 2);
      bufView = new Uint16Array(buf);
      i = 0;
      strLen = str.length;
      while (i < strLen) {
        bufView[i] = str.charCodeAt(i);
        i++;
      }
      return buf;
    };
    xhr = new XMLHttpRequest;
    xhr.open('GET', url, true);
    xhr.responseType = 'text';
    xhr.onload = (function(_this) {
      return function(e) {
        var status;
        status = xhr.status === 200 ? 'success' : 'error';
        if (status === 'success') {
          return _this.renderDicom(str2ab(xhr.response));
        }
      };
    })(this);
    return xhr.send();
  };

  ResultDetailView.prototype.loadDicom = function() {
    var url;
    url = this.model.get('views').dicom;
    if (_s.startsWith(url, 'file://')) {
      return Backbone.Radio.channel('background').request('file', url).then((function(_this) {
        return function(dicomBuffer) {
          return _this.renderDicom(dicomBuffer);
        };
      })(this));
    } else {
      console.log('FETCH FROM SERVER');
      return this.fetchDicom(encodeURI(url));
    }
  };

  ResultDetailView.prototype.renderDicom = function(pixelData) {
    var element, height, imageObject, width;
    element = document.getElementById('dicomImage');
    cornerstone.enable(element);
    width = 256;
    height = 256;
    imageObject = {
      imageId: '12345',
      minPixelValue: 0,
      maxPixelValue: 257,
      slope: 1.0,
      intercept: 0,
      windowCenter: 127,
      windowWidth: 256,
      getPixelData: function() {
        return pixelData;
      },
      rows: height,
      columns: width,
      height: height,
      width: width,
      color: false,
      columnPixelSpacing: .8984375,
      rowPixelSpacing: .8984375,
      sizeInBytes: width * height * 2
    };
    return cornerstone.displayImage(element, imageObject);
  };

  ResultDetailView.prototype.loadCsv = function(url) {
    var xhr;
    xhr = new XMLHttpRequest;
    xhr.open('GET', url, true);
    xhr.responseType = 'text';
    xhr.onload = (function(_this) {
      return function(e) {
        var status;
        status = xhr.status === 200 ? 'success' : 'error';
        if (status === 'success') {
          return _this.renderCsv(xhr.response);
        }
      };
    })(this);
    return xhr.send();
  };

  ResultDetailView.prototype.renderCsv = function(text) {
    var container, parsedCSV;
    console.log('RENDER CSV');
    console.log(text);
    parsedCSV = d3.csvParseRows(text);
    return container = d3.select('.drift-content').append('table').selectAll('tr').data(parsedCSV).enter().append('tr').selectAll('td').data(function(d) {
      return d;
    }).enter().append('td').text(function(d) {
      return d;
    });
  };

  return ResultDetailView;

})(Mn.LayoutView);

module.exports = ResultDetailView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9pdGVtRGV0YWlsLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvaXRlbURldGFpbC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSwyQkFBQTtFQUFBOzs7O0FBQUEsU0FBQSxHQUFZLE9BQUEsQ0FBUSxhQUFSOztBQUlOOzs7Ozs7Ozs7NkJBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxvQkFBUjs7NkJBQ1YsU0FBQSxHQUFXOzs2QkFFWCxNQUFBLEdBQ0U7SUFBQSwwQkFBQSxFQUE0QixXQUE1QjtJQUNBLGVBQUEsRUFBaUIsV0FEakI7SUFFQSxjQUFBLEVBQWdCLFlBRmhCOzs7NkJBSUYsT0FBQSxHQUNFO0lBQUEsWUFBQSxFQUFjLHNCQUFkOzs7NkJBRUYsU0FBQSxHQUFXLFNBQUMsQ0FBRDtJQUNULElBQUMsQ0FBQSxPQUFELENBQVMsZUFBVDtJQUNBLElBQTBCLElBQUMsQ0FBQSxLQUEzQjtBQUFBLGFBQU8sSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQUEsRUFBUDs7V0FDQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSixDQUFVLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBQVYsRUFBeUM7TUFDaEQsYUFBQSxFQUFlLElBRGlDO01BRWhELFVBQUEsRUFBWSxHQUZvQztNQUdoRCxhQUFBLEVBQWUsQ0FBQSxDQUFFLGdCQUFGLENBQW9CLENBQUEsQ0FBQSxDQUhhO01BSWhELFVBQUEsRUFBWSxDQUpvQztNQUtoRCxnQkFBQSxFQUFrQixJQUw4QjtLQUF6QztFQUhBOzs2QkFXWCxVQUFBLEdBQVksU0FBQyxDQUFEO0lBQ1YsSUFBQyxDQUFBLE9BQUQsQ0FBUyxlQUFUO1dBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLENBQUE7RUFGVTs7NkJBSVosU0FBQSxHQUFXLFNBQUE7SUFDVCxDQUFBLENBQUUsZ0JBQUYsQ0FBbUIsQ0FBQyxJQUFwQixDQUF5QixFQUF6QjtJQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsZUFBVDtXQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVDtFQUhTOzs2QkFLWCxRQUFBLEdBQVUsU0FBQTtJQUdSLElBQXVCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBbUIsQ0FBQyxLQUEzQztBQUFBLGFBQU8sSUFBQyxDQUFBLFNBQUQsQ0FBQSxFQUFQOztJQUdBLElBQXVELElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBbUIsQ0FBQyxHQUEzRTthQUFBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxDQUFtQixJQUFJLFNBQUosQ0FBYztRQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtPQUFkLENBQW5CLEVBQUE7O0VBTlE7OzZCQWtCVixVQUFBLEdBQVksU0FBQyxHQUFEO0FBRVYsUUFBQTtJQUFBLE1BQUEsR0FBUyxTQUFDLEdBQUQ7QUFDUCxVQUFBO01BQUEsR0FBQSxHQUFNLElBQUksV0FBSixDQUFnQixHQUFHLENBQUMsTUFBSixHQUFhLENBQTdCO01BRU4sT0FBQSxHQUFVLElBQUksV0FBSixDQUFnQixHQUFoQjtNQUNWLENBQUEsR0FBSTtNQUNKLE1BQUEsR0FBUyxHQUFHLENBQUM7QUFDYixhQUFNLENBQUEsR0FBSSxNQUFWO1FBQ0UsT0FBUSxDQUFBLENBQUEsQ0FBUixHQUFhLEdBQUcsQ0FBQyxVQUFKLENBQWUsQ0FBZjtRQUNiLENBQUE7TUFGRjtBQUdBLGFBQU87SUFUQTtJQWFULEdBQUEsR0FBTSxJQUFJO0lBQ1YsR0FBRyxDQUFDLElBQUosQ0FBUyxLQUFULEVBQWdCLEdBQWhCLEVBQXFCLElBQXJCO0lBQ0EsR0FBRyxDQUFDLFlBQUosR0FBbUI7SUFHbkIsR0FBRyxDQUFDLE1BQUosR0FBYSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtBQUNYLFlBQUE7UUFBQSxNQUFBLEdBQVksR0FBRyxDQUFDLE1BQUosS0FBYyxHQUFqQixHQUEwQixTQUExQixHQUF5QztRQUdsRCxJQUE2QyxNQUFBLEtBQVUsU0FBdkQ7QUFBQSxpQkFBTyxLQUFDLENBQUEsV0FBRCxDQUFhLE1BQUEsQ0FBTyxHQUFHLENBQUMsUUFBWCxDQUFiLEVBQVA7O01BSlc7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO1dBT2IsR0FBRyxDQUFDLElBQUosQ0FBQTtFQTNCVTs7NkJBNkJaLFNBQUEsR0FBVyxTQUFBO0FBQ1QsUUFBQTtJQUFBLEdBQUEsR0FBTSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxPQUFYLENBQW1CLENBQUM7SUFFMUIsSUFBRyxFQUFFLENBQUMsVUFBSCxDQUFjLEdBQWQsRUFBbUIsU0FBbkIsQ0FBSDthQUVFLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixZQUF2QixDQUFvQyxDQUFDLE9BQXJDLENBQTZDLE1BQTdDLEVBQXFELEdBQXJELENBQXlELENBQUMsSUFBMUQsQ0FBK0QsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFDLFdBQUQ7aUJBQWlCLEtBQUMsQ0FBQSxXQUFELENBQWEsV0FBYjtRQUFqQjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBL0QsRUFGRjtLQUFBLE1BQUE7TUFLRSxPQUFPLENBQUMsR0FBUixDQUFZLG1CQUFaO2FBQ0EsSUFBQyxDQUFBLFVBQUQsQ0FBWSxTQUFBLENBQVUsR0FBVixDQUFaLEVBTkY7O0VBSFM7OzZCQVdYLFdBQUEsR0FBYSxTQUFDLFNBQUQ7QUFLWCxRQUFBO0lBQUEsT0FBQSxHQUFVLFFBQVEsQ0FBQyxjQUFULENBQXdCLFlBQXhCO0lBQ1YsV0FBVyxDQUFDLE1BQVosQ0FBbUIsT0FBbkI7SUFJQSxLQUFBLEdBQVE7SUFDUixNQUFBLEdBQVM7SUFFVCxXQUFBLEdBQ0U7TUFBQSxPQUFBLEVBQVMsT0FBVDtNQUNBLGFBQUEsRUFBZSxDQURmO01BRUEsYUFBQSxFQUFlLEdBRmY7TUFHQSxLQUFBLEVBQU8sR0FIUDtNQUlBLFNBQUEsRUFBVyxDQUpYO01BS0EsWUFBQSxFQUFjLEdBTGQ7TUFNQSxXQUFBLEVBQWEsR0FOYjtNQU9BLFlBQUEsRUFBYyxTQUFBO0FBQUcsZUFBTztNQUFWLENBUGQ7TUFRQSxJQUFBLEVBQU0sTUFSTjtNQVNBLE9BQUEsRUFBUyxLQVRUO01BVUEsTUFBQSxFQUFRLE1BVlI7TUFXQSxLQUFBLEVBQU8sS0FYUDtNQVlBLEtBQUEsRUFBTyxLQVpQO01BYUEsa0JBQUEsRUFBb0IsUUFicEI7TUFjQSxlQUFBLEVBQWlCLFFBZGpCO01BZUEsV0FBQSxFQUFhLEtBQUEsR0FBUSxNQUFSLEdBQWlCLENBZjlCOztXQW1CRixXQUFXLENBQUMsWUFBWixDQUF5QixPQUF6QixFQUFrQyxXQUFsQztFQWpDVzs7NkJBc0NiLE9BQUEsR0FBUyxTQUFDLEdBQUQ7QUFJUCxRQUFBO0lBQUEsR0FBQSxHQUFNLElBQUk7SUFDVixHQUFHLENBQUMsSUFBSixDQUFTLEtBQVQsRUFBZ0IsR0FBaEIsRUFBcUIsSUFBckI7SUFDQSxHQUFHLENBQUMsWUFBSixHQUFtQjtJQUduQixHQUFHLENBQUMsTUFBSixHQUFhLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO0FBQ1gsWUFBQTtRQUFBLE1BQUEsR0FBWSxHQUFHLENBQUMsTUFBSixLQUFjLEdBQWpCLEdBQTBCLFNBQTFCLEdBQXlDO1FBR2xELElBQW1DLE1BQUEsS0FBVSxTQUE3QztBQUFBLGlCQUFPLEtBQUMsQ0FBQSxTQUFELENBQVcsR0FBRyxDQUFDLFFBQWYsRUFBUDs7TUFKVztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7V0FPYixHQUFHLENBQUMsSUFBSixDQUFBO0VBaEJPOzs2QkFrQlQsU0FBQSxHQUFXLFNBQUMsSUFBRDtBQUNULFFBQUE7SUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLFlBQVo7SUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQVo7SUFFQSxTQUFBLEdBQVksRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsSUFBaEI7V0FDWixTQUFBLEdBQVksRUFBRSxDQUFDLE1BQUgsQ0FBVSxnQkFBVixDQUNaLENBQUMsTUFEVyxDQUNKLE9BREksQ0FFWixDQUFDLFNBRlcsQ0FFRCxJQUZDLENBR1osQ0FBQyxJQUhXLENBR04sU0FITSxDQUlaLENBQUMsS0FKVyxDQUFBLENBS1osQ0FBQyxNQUxXLENBS0osSUFMSSxDQU1aLENBQUMsU0FOVyxDQU1ELElBTkMsQ0FPWixDQUFDLElBUFcsQ0FPTixTQUFDLENBQUQ7YUFBTztJQUFQLENBUE0sQ0FRWixDQUFDLEtBUlcsQ0FBQSxDQVFKLENBQUMsTUFSRyxDQVFJLElBUkosQ0FRUyxDQUFDLElBUlYsQ0FRZSxTQUFDLENBQUQ7YUFBTztJQUFQLENBUmY7RUFMSDs7OztHQWxKa0IsRUFBRSxDQUFDOztBQW1LbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./stlViewer":167,"./templates/detail":170}],163:[function(require,module,exports){
var DetailView, FacetedViewLayout, HeaderView, RecordList, RecordListLayout,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./engine');

RecordList = require('./recordList');

RecordListLayout = require('./recordListLayout');

DetailView = require('./itemDetail');

HeaderView = require('./header');

FacetedViewLayout = (function(superClass) {
  extend(FacetedViewLayout, superClass);

  function FacetedViewLayout() {
    this.initFacetView = bind(this.initFacetView, this);
    this.showItem = bind(this.showItem, this);
    this.showRecordListLayout = bind(this.showRecordListLayout, this);
    this.showRecordList = bind(this.showRecordList, this);
    return FacetedViewLayout.__super__.constructor.apply(this, arguments);
  }

  FacetedViewLayout.prototype.template = require('./templates/layout');

  FacetedViewLayout.prototype.className = 'container-fluid';

  FacetedViewLayout.prototype.events = {
    'click h3.facettitle': 'toggleCollapseFacet'
  };

  FacetedViewLayout.prototype.toggleCollapseFacet = function(e) {
    return $(e.currentTarget).parents('.facetsearch').toggleClass('active');
  };

  FacetedViewLayout.prototype.regions = {
    listRegion: '[data-region=record-list]',
    headerRegion: '[data-region=header]',
    detailRegion: '[data-region=detail]'
  };

  FacetedViewLayout.prototype.onRender = function() {
    var headerView;
    headerView = new HeaderView({
      model: this.model
    });
    headerView.on('clear', (function(_this) {
      return function() {
        return jQuery.clearFacets();
      };
    })(this));
    headerView.on('list', this.showRecordList);
    headerView.on('viewer', this.showRecordListLayout);
    this.headerRegion.show(headerView);
    setTimeout(this.initFacetView, 100);
    return this.showRecordList();
  };

  FacetedViewLayout.prototype.showRecordList = function() {
    var listView;
    listView = new RecordList({
      collection: this.collection
    });
    listView.on('childview:show:relation', (function(_this) {
      return function(view, id) {
        return _this.showItem(id);
      };
    })(this));
    return this.listRegion.show(listView);
  };

  FacetedViewLayout.prototype.showRecordListLayout = function() {
    var listView;
    listView = new RecordListLayout({
      collection: this.collection
    });
    listView.on('childview:show:relation', (function(_this) {
      return function(view, id) {
        return _this.showItem(id);
      };
    })(this));
    return this.listRegion.show(listView);
  };

  FacetedViewLayout.prototype.showItem = function(id) {
    var el, i, item, len, ref;
    item = null;
    ref = this.options.items.models;
    for (i = 0, len = ref.length; i < len; i++) {
      el = ref[i];
      if (el.get('data')['@id'] === id) {
        item = el;
        break;
      }
    }
    if (!item) {
      return;
    }
    if (this.detailView && this.detailView.model.id === item.id) {
      return this.detailView.trigger('hide');
    }
    this.detailView = new DetailView({
      model: item
    });
    this.detailView.on('show:underlay', (function(_this) {
      return function() {
        return _this.$('.drift-underlay').addClass('active');
      };
    })(this));
    this.detailView.on('hide:underlay', (function(_this) {
      return function() {
        return _this.$('.drift-underlay').removeClass('active');
      };
    })(this));
    this.detailView.on('hide', (function(_this) {
      return function() {
        _this.detailRegion.$el.removeClass('active');
        return setTimeout(function() {
          _this.detailRegion.empty();
          return delete _this.detailView;
        }, 100);
      };
    })(this));
    this.detailRegion.show(this.detailView);
    return this.detailRegion.$el.addClass('active');
  };

  FacetedViewLayout.prototype.initFacetView = function() {
    var f, facets, i, len, orderByOptions, settings, state;
    facets = this.options.facetCollection.getEnabled();
    orderByOptions = {};
    for (i = 0, len = facets.length; i < len; i++) {
      f = facets[i];
      orderByOptions[f.attribute] = f.label;
    }
    settings = {
      items: this.options.items.toJSON(),
      facets: facets,
      resultElement: '#results',
      facetElement: '#facets',
      resultTemplate: 'placeholder',
      resultTemplateBypass: (function(_this) {
        return function(item) {
          return _this.collection.add(item);
        };
      })(this),
      beforeResultRender: (function(_this) {
        return function() {
          return _this.collection.reset([]);
        };
      })(this),
      paginationCount: 50,
      orderByOptions: orderByOptions
    };
    state = $.facetelize(settings);
  };

  return FacetedViewLayout;

})(Mn.LayoutView);

module.exports = FacetedViewLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9sYXlvdXQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9sYXlvdXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsdUVBQUE7RUFBQTs7OztBQUFBLE9BQUEsQ0FBUSxVQUFSOztBQUNBLFVBQUEsR0FBYSxPQUFBLENBQVEsY0FBUjs7QUFDYixnQkFBQSxHQUFtQixPQUFBLENBQVEsb0JBQVI7O0FBQ25CLFVBQUEsR0FBYSxPQUFBLENBQVEsY0FBUjs7QUFDYixVQUFBLEdBQWEsT0FBQSxDQUFRLFVBQVI7O0FBSVA7Ozs7Ozs7Ozs7OzhCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsb0JBQVI7OzhCQUNWLFNBQUEsR0FBVzs7OEJBRVgsTUFBQSxHQUNFO0lBQUEscUJBQUEsRUFBdUIscUJBQXZCOzs7OEJBRUYsbUJBQUEsR0FBcUIsU0FBQyxDQUFEO1dBQ25CLENBQUEsQ0FBRSxDQUFDLENBQUMsYUFBSixDQUFrQixDQUFDLE9BQW5CLENBQTJCLGNBQTNCLENBQTBDLENBQUMsV0FBM0MsQ0FBdUQsUUFBdkQ7RUFEbUI7OzhCQUdyQixPQUFBLEdBQ0U7SUFBQSxVQUFBLEVBQWMsMkJBQWQ7SUFDQSxZQUFBLEVBQWMsc0JBRGQ7SUFFQSxZQUFBLEVBQWMsc0JBRmQ7Ozs4QkFJRixRQUFBLEdBQVUsU0FBQTtBQUlSLFFBQUE7SUFBQSxVQUFBLEdBQWEsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZjtJQUdiLFVBQVUsQ0FBQyxFQUFYLENBQWMsT0FBZCxFQUF1QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxNQUFNLENBQUMsV0FBUCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZCO0lBR0EsVUFBVSxDQUFDLEVBQVgsQ0FBYyxNQUFkLEVBQXNCLElBQUMsQ0FBQSxjQUF2QjtJQUNBLFVBQVUsQ0FBQyxFQUFYLENBQWMsUUFBZCxFQUF3QixJQUFDLENBQUEsb0JBQXpCO0lBR0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLENBQW1CLFVBQW5CO0lBR0EsVUFBQSxDQUFXLElBQUMsQ0FBQSxhQUFaLEVBQTJCLEdBQTNCO1dBSUEsSUFBQyxDQUFBLGNBQUQsQ0FBQTtFQXJCUTs7OEJBdUJWLGNBQUEsR0FBZ0IsU0FBQTtBQUNkLFFBQUE7SUFBQSxRQUFBLEdBQVcsSUFBSSxVQUFKLENBQWU7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7S0FBZjtJQUNYLFFBQVEsQ0FBQyxFQUFULENBQVkseUJBQVosRUFBdUMsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQsRUFBTyxFQUFQO2VBQWMsS0FBQyxDQUFBLFFBQUQsQ0FBVSxFQUFWO01BQWQ7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZDO1dBR0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFFBQWpCO0VBTGM7OzhCQU9oQixvQkFBQSxHQUFzQixTQUFBO0FBQ3BCLFFBQUE7SUFBQSxRQUFBLEdBQVcsSUFBSSxnQkFBSixDQUFxQjtNQUFFLFVBQUEsRUFBWSxJQUFDLENBQUEsVUFBZjtLQUFyQjtJQUNYLFFBQVEsQ0FBQyxFQUFULENBQVkseUJBQVosRUFBdUMsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQsRUFBTyxFQUFQO2VBQWMsS0FBQyxDQUFBLFFBQUQsQ0FBVSxFQUFWO01BQWQ7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZDO1dBQ0EsSUFBQyxDQUFBLFVBQVUsQ0FBQyxJQUFaLENBQWlCLFFBQWpCO0VBSG9COzs4QkFLdEIsUUFBQSxHQUFVLFNBQUMsRUFBRDtBQUdSLFFBQUE7SUFBQSxJQUFBLEdBQU87QUFHUDtBQUFBLFNBQUEscUNBQUE7O01BQ0UsSUFBRyxFQUFFLENBQUMsR0FBSCxDQUFPLE1BQVAsQ0FBZSxDQUFBLEtBQUEsQ0FBZixLQUF5QixFQUE1QjtRQUNFLElBQUEsR0FBTztBQUNQLGNBRkY7O0FBREY7SUFNQSxJQUFBLENBQWMsSUFBZDtBQUFBLGFBQUE7O0lBR0EsSUFBc0MsSUFBQyxDQUFBLFVBQUQsSUFBZSxJQUFDLENBQUEsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFsQixLQUF3QixJQUFJLENBQUMsRUFBbEY7QUFBQSxhQUFPLElBQUMsQ0FBQSxVQUFVLENBQUMsT0FBWixDQUFvQixNQUFwQixFQUFQOztJQUdBLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBVDtLQUFmO0lBR2QsSUFBQyxDQUFBLFVBQVUsQ0FBQyxFQUFaLENBQWUsZUFBZixFQUFnQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsQ0FBRCxDQUFHLGlCQUFILENBQXFCLENBQUMsUUFBdEIsQ0FBK0IsUUFBL0I7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBaEM7SUFDQSxJQUFDLENBQUEsVUFBVSxDQUFDLEVBQVosQ0FBZSxlQUFmLEVBQWdDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxDQUFELENBQUcsaUJBQUgsQ0FBcUIsQ0FBQyxXQUF0QixDQUFrQyxRQUFsQztNQUFIO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQztJQVNBLElBQUMsQ0FBQSxVQUFVLENBQUMsRUFBWixDQUFlLE1BQWYsRUFBdUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ3JCLEtBQUMsQ0FBQSxZQUFZLENBQUMsR0FBRyxDQUFDLFdBQWxCLENBQThCLFFBQTlCO2VBQ0EsVUFBQSxDQUFZLFNBQUE7VUFDVixLQUFDLENBQUEsWUFBWSxDQUFDLEtBQWQsQ0FBQTtpQkFDQSxPQUFPLEtBQUMsQ0FBQTtRQUZFLENBQVosRUFHQSxHQUhBO01BRnFCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF2QjtJQVFBLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFBZCxDQUFtQixJQUFDLENBQUEsVUFBcEI7V0FDQSxJQUFDLENBQUEsWUFBWSxDQUFDLEdBQUcsQ0FBQyxRQUFsQixDQUEyQixRQUEzQjtFQXhDUTs7OEJBMENWLGFBQUEsR0FBZSxTQUFBO0FBR2IsUUFBQTtJQUFBLE1BQUEsR0FBUyxJQUFDLENBQUEsT0FBTyxDQUFDLGVBQWUsQ0FBQyxVQUF6QixDQUFBO0lBR1QsY0FBQSxHQUFpQjtBQUNqQixTQUFBLHdDQUFBOztNQUFBLGNBQWUsQ0FBQSxDQUFDLENBQUMsU0FBRixDQUFmLEdBQThCLENBQUMsQ0FBQztBQUFoQztJQUVBLFFBQUEsR0FDRTtNQUFBLEtBQUEsRUFBTyxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFmLENBQUEsQ0FBUDtNQUNBLE1BQUEsRUFBUSxNQURSO01BRUEsYUFBQSxFQUFlLFVBRmY7TUFHQSxZQUFBLEVBQWUsU0FIZjtNQUlBLGNBQUEsRUFBZ0IsYUFKaEI7TUFLQSxvQkFBQSxFQUFzQixDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUMsSUFBRDtpQkFBVSxLQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0IsSUFBaEI7UUFBVjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FMdEI7TUFNQSxrQkFBQSxFQUFvQixDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUE7aUJBQUcsS0FBQyxDQUFBLFVBQVUsQ0FBQyxLQUFaLENBQWtCLEVBQWxCO1FBQUg7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBTnBCO01BU0EsZUFBQSxFQUFpQixFQVRqQjtNQWFBLGNBQUEsRUFBZ0IsY0FiaEI7O0lBeUJGLEtBQUEsR0FBUSxDQUFDLENBQUMsVUFBRixDQUFhLFFBQWI7RUFuQ0s7Ozs7R0E1RmUsRUFBRSxDQUFDOztBQXFJbkMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./engine":159,"./header":161,"./itemDetail":162,"./recordList":164,"./recordListLayout":165,"./templates/layout":173}],164:[function(require,module,exports){
var RecordList, RecordViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RecordViewer = require('./recordViewer');

RecordList = (function(superClass) {
  extend(RecordList, superClass);

  function RecordList() {
    return RecordList.__super__.constructor.apply(this, arguments);
  }

  RecordList.prototype.tagName = 'ul';

  RecordList.prototype.className = 'list-group record-list-group';

  RecordList.prototype.childView = RecordViewer;

  RecordList.prototype.childViewOptions = function() {
    return {
      tagName: 'li',
      className: 'list-group-item'
    };
  };

  return RecordList;

})(Mn.CollectionView);

module.exports = RecordList;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9yZWNvcmRMaXN0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvcmVjb3JkTGlzdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSx3QkFBQTtFQUFBOzs7QUFBQSxZQUFBLEdBQWUsT0FBQSxDQUFRLGdCQUFSOztBQUlUOzs7Ozs7O3VCQUNKLE9BQUEsR0FBWTs7dUJBQ1osU0FBQSxHQUFZOzt1QkFDWixTQUFBLEdBQVk7O3VCQUVaLGdCQUFBLEdBQWtCLFNBQUE7QUFDaEIsV0FBTztNQUFFLE9BQUEsRUFBUyxJQUFYO01BQWlCLFNBQUEsRUFBVyxpQkFBNUI7O0VBRFM7Ozs7R0FMSyxFQUFFLENBQUM7O0FBVTVCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./recordViewer":166}],165:[function(require,module,exports){
var RecordListChild, RecordListLayout, RecordListView, RecordViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RecordViewer = require('./recordViewer');

RecordListChild = (function(superClass) {
  extend(RecordListChild, superClass);

  function RecordListChild() {
    return RecordListChild.__super__.constructor.apply(this, arguments);
  }

  RecordListChild.prototype.tagName = 'a';

  RecordListChild.prototype.className = 'list-group-item';

  RecordListChild.prototype.template = require('./templates/record_list_child');

  RecordListChild.prototype.behaviors = {
    SelectableChild: {}
  };

  return RecordListChild;

})(Mn.LayoutView);

RecordListView = (function(superClass) {
  extend(RecordListView, superClass);

  function RecordListView() {
    return RecordListView.__super__.constructor.apply(this, arguments);
  }

  RecordListView.prototype.tagName = 'ul';

  RecordListView.prototype.className = 'list-group record-list-group';

  RecordListView.prototype.childView = RecordListChild;

  return RecordListView;

})(Mn.CollectionView);

RecordListLayout = (function(superClass) {
  extend(RecordListLayout, superClass);

  function RecordListLayout() {
    return RecordListLayout.__super__.constructor.apply(this, arguments);
  }

  RecordListLayout.prototype.template = require('./templates/record_list_layout');

  RecordListLayout.prototype.className = 'row';

  RecordListLayout.prototype.regions = {
    listRegion: '[data-region=list]',
    detailRegion: '[data-region=detail]'
  };

  RecordListLayout.prototype.onRender = function() {
    var listView, ref;
    listView = new RecordListView({
      collection: this.collection
    });
    listView.on('childview:selected', (function(_this) {
      return function(view) {
        return _this.showDataset(view.model);
      };
    })(this));
    this.listRegion.show(listView);
    return (ref = this.collection.at(0)) != null ? ref.trigger('selected') : void 0;
  };

  RecordListLayout.prototype.showDataset = function(dataset) {
    var detailView;
    detailView = new RecordViewer({
      model: dataset
    });
    this.detailRegion.show(detailView);
    detailView.on('show:underlay', (function(_this) {
      return function() {
        return $('.drift-underlay').addClass('active');
      };
    })(this));
    return detailView.on('hide:underlay', (function(_this) {
      return function() {
        return $('.drift-underlay').removeClass('active');
      };
    })(this));
  };

  return RecordListLayout;

})(Mn.LayoutView);

module.exports = RecordListLayout;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9yZWNvcmRMaXN0TGF5b3V0LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvcmVjb3JkTGlzdExheW91dC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSwrREFBQTtFQUFBOzs7QUFBQSxZQUFBLEdBQWUsT0FBQSxDQUFRLGdCQUFSOztBQUlUOzs7Ozs7OzRCQUNKLE9BQUEsR0FBWTs7NEJBQ1osU0FBQSxHQUFZOzs0QkFDWixRQUFBLEdBQVUsT0FBQSxDQUFRLCtCQUFSOzs0QkFFVixTQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWlCLEVBQWpCOzs7OztHQU4wQixFQUFFLENBQUM7O0FBVTNCOzs7Ozs7OzJCQUNKLE9BQUEsR0FBWTs7MkJBQ1osU0FBQSxHQUFZOzsyQkFDWixTQUFBLEdBQVk7Ozs7R0FIZSxFQUFFLENBQUM7O0FBTzFCOzs7Ozs7OzZCQUNKLFFBQUEsR0FBVSxPQUFBLENBQVEsZ0NBQVI7OzZCQUNWLFNBQUEsR0FBVzs7NkJBRVgsT0FBQSxHQUNFO0lBQUEsVUFBQSxFQUFjLG9CQUFkO0lBQ0EsWUFBQSxFQUFjLHNCQURkOzs7NkJBa0NGLFFBQUEsR0FBVSxTQUFBO0FBQ1IsUUFBQTtJQUFBLFFBQUEsR0FBVyxJQUFJLGNBQUosQ0FBbUI7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7S0FBbkI7SUFDWCxRQUFRLENBQUMsRUFBVCxDQUFZLG9CQUFaLEVBQWtDLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxJQUFEO2VBQVUsS0FBQyxDQUFBLFdBQUQsQ0FBYSxJQUFJLENBQUMsS0FBbEI7TUFBVjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEM7SUFDQSxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsUUFBakI7c0RBQ2lCLENBQUUsT0FBbkIsQ0FBMkIsVUFBM0I7RUFKUTs7NkJBTVYsV0FBQSxHQUFhLFNBQUMsT0FBRDtBQUNYLFFBQUE7SUFBQSxVQUFBLEdBQWEsSUFBSSxZQUFKLENBQWlCO01BQUUsS0FBQSxFQUFPLE9BQVQ7S0FBakI7SUFDYixJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsVUFBbkI7SUFDQSxVQUFVLENBQUMsRUFBWCxDQUFjLGVBQWQsRUFBK0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsQ0FBQSxDQUFFLGlCQUFGLENBQW9CLENBQUMsUUFBckIsQ0FBOEIsUUFBOUI7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBL0I7V0FDQSxVQUFVLENBQUMsRUFBWCxDQUFjLGVBQWQsRUFBK0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQUcsQ0FBQSxDQUFFLGlCQUFGLENBQW9CLENBQUMsV0FBckIsQ0FBaUMsUUFBakM7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBL0I7RUFKVzs7OztHQTdDZ0IsRUFBRSxDQUFDOztBQXFEbEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./recordViewer":166,"./templates/record_list_child":174,"./templates/record_list_layout":175}],166:[function(require,module,exports){
var CsvViewer, JsonGraph, JsonViewer, RecordViewer, RecordViewerSelector, TableView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

JsonViewer = require('lib/views/json_viewer');

JsonGraph = require('./graph');

TableView = require('./table');

CsvViewer = require('./csvViewer');

RecordViewerSelector = (function(superClass) {
  extend(RecordViewerSelector, superClass);

  function RecordViewerSelector() {
    return RecordViewerSelector.__super__.constructor.apply(this, arguments);
  }

  RecordViewerSelector.prototype.navItems = function() {
    var csvViewer, items;
    items = [
      {
        icon: 'fa-table',
        text: 'Table',
        trigger: 'table',
        "default": true
      }, {
        icon: 'fa-code',
        text: 'JSON',
        trigger: 'json'
      }, {
        icon: 'fa-sitemap',
        text: 'Graph',
        trigger: 'graph'
      }
    ];
    csvViewer = {
      icon: 'fa-file-excel-o',
      text: 'CSV',
      trigger: 'csv'
    };
    if (this.model.get('views').csv) {
      items.push(csvViewer);
    }
    return items;
  };

  RecordViewerSelector.prototype.navEvents = {
    'table': 'showTable',
    'json': 'showJson',
    'graph': 'showGraph',
    'csv': 'showCsv'
  };

  RecordViewerSelector.prototype.showTable = function() {
    return this.contentRegion.show(new TableView({
      model: this.model
    }));
  };

  RecordViewerSelector.prototype.showJson = function() {
    return this.contentRegion.show(new JsonViewer({
      model: this.model
    }));
  };

  RecordViewerSelector.prototype.showGraph = function() {
    return this.contentRegion.show(new JsonGraph({
      json: this.model.toJSON()['data']
    }));
  };

  RecordViewerSelector.prototype.showCsv = function() {
    return this.contentRegion.show(new CsvViewer({
      model: this.model
    }));
  };

  return RecordViewerSelector;

})(require('lib/views/nav'));

RecordViewer = (function(superClass) {
  extend(RecordViewer, superClass);

  function RecordViewer() {
    this.onImageOut = bind(this.onImageOut, this);
    this.onImageIn = bind(this.onImageIn, this);
    return RecordViewer.__super__.constructor.apply(this, arguments);
  }

  RecordViewer.prototype.template = require('./templates/record_viewer');

  RecordViewer.prototype.className = 'card card-body';

  RecordViewer.prototype.regions = {
    viewerRegion: '[data-region=viewer]'
  };

  RecordViewer.prototype.behaviors = function() {
    var obj;
    return obj = {
      Tooltips: {},
      ClickableRelations: {},
      Flashes: {
        success: {
          message: 'Copied JSON to clipboard.',
          timeout: 1000
        },
        error: {
          message: 'Error copying JSON to clipboard.',
          timeout: 1000
        }
      }
    };
  };

  RecordViewer.prototype.onClipboardSuccess = function() {
    return this.flashSuccess();
  };

  RecordViewer.prototype.onClipboardError = function() {
    return this.flashError();
  };

  RecordViewer.prototype.onRender = function() {
    return this.viewerRegion.show(new RecordViewerSelector({
      model: this.model
    }));
  };

  RecordViewer.prototype.events = {
    'mouseover img': 'onImageIn',
    'mouseout img': 'onImageOut'
  };

  RecordViewer.prototype.onImageIn = function(e) {
    this.trigger('show:underlay');
    if (this.drift) {
      return this.drift.enable();
    }
    return this.drift = new Drift(document.querySelector('img'), {
      containInline: true,
      inlinePane: 200,
      paneContainer: $('.drift-content')[0],
      zoomFactor: 5,
      hoverBoundingBox: true
    });
  };

  RecordViewer.prototype.onImageOut = function(e) {
    this.trigger('hide:underlay');
    return this.drift.disable();
  };

  return RecordViewer;

})(Mn.LayoutView);

module.exports = RecordViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9yZWNvcmRWaWV3ZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9yZWNvcmRWaWV3ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsK0VBQUE7RUFBQTs7OztBQUFBLFVBQUEsR0FBYyxPQUFBLENBQVEsdUJBQVI7O0FBQ2QsU0FBQSxHQUFjLE9BQUEsQ0FBUSxTQUFSOztBQUNkLFNBQUEsR0FBYyxPQUFBLENBQVEsU0FBUjs7QUFDZCxTQUFBLEdBQWMsT0FBQSxDQUFRLGFBQVI7O0FBSVI7Ozs7Ozs7aUNBRUosUUFBQSxHQUFVLFNBQUE7QUFDUixRQUFBO0lBQUEsS0FBQSxHQUFRO01BQ047UUFBRSxJQUFBLEVBQU0sVUFBUjtRQUFzQixJQUFBLEVBQU0sT0FBNUI7UUFBc0MsT0FBQSxFQUFTLE9BQS9DO1FBQXdELENBQUEsT0FBQSxDQUFBLEVBQVMsSUFBakU7T0FETSxFQUVOO1FBQUUsSUFBQSxFQUFNLFNBQVI7UUFBc0IsSUFBQSxFQUFNLE1BQTVCO1FBQXNDLE9BQUEsRUFBUyxNQUEvQztPQUZNLEVBR047UUFBRSxJQUFBLEVBQU0sWUFBUjtRQUFzQixJQUFBLEVBQU0sT0FBNUI7UUFBc0MsT0FBQSxFQUFTLE9BQS9DO09BSE07O0lBT1IsU0FBQSxHQUFZO01BQUUsSUFBQSxFQUFNLGlCQUFSO01BQTJCLElBQUEsRUFBTSxLQUFqQztNQUF5QyxPQUFBLEVBQVMsS0FBbEQ7O0lBQ1osSUFBeUIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUFtQixDQUFDLEdBQTdDO01BQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxTQUFYLEVBQUE7O0FBRUEsV0FBTztFQVhDOztpQ0FhVixTQUFBLEdBQ0U7SUFBQSxPQUFBLEVBQVksV0FBWjtJQUNBLE1BQUEsRUFBWSxVQURaO0lBRUEsT0FBQSxFQUFZLFdBRlo7SUFHQSxLQUFBLEVBQVksU0FIWjs7O2lDQUtGLFNBQUEsR0FBVyxTQUFBO1dBQ1QsSUFBQyxDQUFBLGFBQWEsQ0FBQyxJQUFmLENBQW9CLElBQUksU0FBSixDQUFjO01BQUUsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUFWO0tBQWQsQ0FBcEI7RUFEUzs7aUNBR1gsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsSUFBSSxVQUFKLENBQWU7TUFBRSxLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQVY7S0FBZixDQUFwQjtFQURROztpQ0FHVixTQUFBLEdBQVcsU0FBQTtXQUNULElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFJLFNBQUosQ0FBYztNQUFFLElBQUEsRUFBTSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBQSxDQUFnQixDQUFBLE1BQUEsQ0FBeEI7S0FBZCxDQUFwQjtFQURTOztpQ0FHWCxPQUFBLEdBQVMsU0FBQTtXQUNQLElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFJLFNBQUosQ0FBYztNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUFkLENBQXBCO0VBRE87Ozs7R0E5QndCLE9BQUEsQ0FBUSxlQUFSOztBQW1DN0I7Ozs7Ozs7Ozt5QkFDSixRQUFBLEdBQVUsT0FBQSxDQUFRLDJCQUFSOzt5QkFDVixTQUFBLEdBQVk7O3lCQUVaLE9BQUEsR0FDRTtJQUFBLFlBQUEsRUFBYyxzQkFBZDs7O3lCQUVGLFNBQUEsR0FBVyxTQUFBO0FBQ1QsUUFBQTtBQUFBLFdBQU8sR0FBQSxHQUNMO01BQUEsUUFBQSxFQUFVLEVBQVY7TUFDQSxrQkFBQSxFQUFvQixFQURwQjtNQUdBLE9BQUEsRUFDRTtRQUFBLE9BQUEsRUFDRTtVQUFBLE9BQUEsRUFBVSwyQkFBVjtVQUNBLE9BQUEsRUFBVSxJQURWO1NBREY7UUFHQSxLQUFBLEVBQ0U7VUFBQSxPQUFBLEVBQVUsa0NBQVY7VUFDQSxPQUFBLEVBQVUsSUFEVjtTQUpGO09BSkY7O0VBRk87O3lCQWNYLGtCQUFBLEdBQW9CLFNBQUE7V0FBRyxJQUFDLENBQUEsWUFBRCxDQUFBO0VBQUg7O3lCQUNwQixnQkFBQSxHQUFrQixTQUFBO1dBQUcsSUFBQyxDQUFBLFVBQUQsQ0FBQTtFQUFIOzt5QkFFbEIsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsQ0FBbUIsSUFBSSxvQkFBSixDQUF5QjtNQUFFLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBVjtLQUF6QixDQUFuQjtFQURROzt5QkFHVixNQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWlCLFdBQWpCO0lBQ0EsY0FBQSxFQUFnQixZQURoQjs7O3lCQUdGLFNBQUEsR0FBVyxTQUFDLENBQUQ7SUFDVCxJQUFDLENBQUEsT0FBRCxDQUFTLGVBQVQ7SUFDQSxJQUEwQixJQUFDLENBQUEsS0FBM0I7QUFBQSxhQUFPLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFBLEVBQVA7O1dBQ0EsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFJLEtBQUosQ0FBVSxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUFWLEVBQXlDO01BQ2hELGFBQUEsRUFBZSxJQURpQztNQUVoRCxVQUFBLEVBQVksR0FGb0M7TUFHaEQsYUFBQSxFQUFlLENBQUEsQ0FBRSxnQkFBRixDQUFvQixDQUFBLENBQUEsQ0FIYTtNQUloRCxVQUFBLEVBQVksQ0FKb0M7TUFLaEQsZ0JBQUEsRUFBa0IsSUFMOEI7S0FBekM7RUFIQTs7eUJBV1gsVUFBQSxHQUFZLFNBQUMsQ0FBRDtJQUNWLElBQUMsQ0FBQSxPQUFELENBQVMsZUFBVDtXQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFBO0VBRlU7Ozs7R0ExQ2EsRUFBRSxDQUFDOztBQWdEOUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./csvViewer":158,"./graph":160,"./table":168,"./templates/record_viewer":176,"lib/views/json_viewer":286,"lib/views/nav":287}],167:[function(require,module,exports){
var STLViewer, loadStl,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

loadStl = (function() {
  var binaryVector3, loadBinaryStl, loadTextStl, m2vec3, toLines;
  binaryVector3 = function(view, offset) {
    var v;
    v = new THREE.Vector3;
    v.x = view.getFloat32(offset + 0, true);
    v.y = view.getFloat32(offset + 4, true);
    v.z = view.getFloat32(offset + 8, true);
    return v;
  };
  loadBinaryStl = function(buffer) {
    var geom, i, normal, offset, size, view;
    view = new DataView(buffer);
    size = view.getUint32(80, true);
    geom = new THREE.Geometry;
    offset = 84;
    i = 0;
    while (i < size) {
      normal = binaryVector3(view, offset);
      geom.vertices.push(binaryVector3(view, offset + 12));
      geom.vertices.push(binaryVector3(view, offset + 24));
      geom.vertices.push(binaryVector3(view, offset + 36));
      geom.faces.push(new THREE.Face3(i * 3, i * 3 + 1, i * 3 + 2, normal));
      offset += 4 * 3 * 4 + 2;
      i++;
    }
    return geom;
  };
  m2vec3 = function(match) {
    var v;
    v = new THREE.Vector3;
    v.x = parseFloat(match[1]);
    v.y = parseFloat(match[2]);
    v.z = parseFloat(match[3]);
    return v;
  };
  toLines = function(array) {
    var h, i, line, lines;
    lines = [];
    h = 0;
    i = 0;
    while (i < array.length) {
      if (array[i] === 10) {
        line = String.fromCharCode.apply(null, array.subarray(h, i));
        lines.push(line);
        h = i + 1;
      }
      i++;
    }
    lines.push(String.fromCharCode.apply(null, array.subarray(h)));
    return lines;
  };
  loadTextStl = function(buffer) {
    var base, facetReg, geom, index, lines, normal, scan, scanOk, v1, v2, v3, vertexReg;
    lines = toLines(new Uint8Array(buffer));
    index = 0;
    scan = function(regexp) {
      var r;
      while (lines[index].match(/^\s*$/)) {
        index++;
      }
      r = lines[index].match(regexp);
      return r;
    };
    scanOk = function(regexp) {
      var r;
      r = scan(regexp);
      if (!r) {
        throw new Error('not text stl: ' + regexp.toString() + '=> (line ' + index - 1 + ')' + '[' + lines[index - 1] + ']');
      }
      index++;
      return r;
    };
    facetReg = /^\s*facet\s+normal\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/;
    vertexReg = /^\s*vertex\s+([^s]+)\s+([^\s]+)\s+([^\s]+)/;
    geom = new THREE.Geometry;
    scanOk(/^\s*solid\s(.*)/);
    while (!scan(/^\s*endsolid/)) {
      normal = scanOk(facetReg);
      scanOk(/^\s*outer\s+loop/);
      v1 = scanOk(vertexReg);
      v2 = scanOk(vertexReg);
      v3 = scanOk(vertexReg);
      scanOk(/\s*endloop/);
      scanOk(/\s*endfacet/);
      base = geom.vertices.length;
      geom.vertices.push(m2vec3(v1));
      geom.vertices.push(m2vec3(v2));
      geom.vertices.push(m2vec3(v3));
      geom.faces.push(new THREE.Face3(base, base + 1, base + 2, m2vec3(normal)));
    }
    return geom;
  };
  return function(buffer) {
    var ex;
    try {
      console.log('load as text stl');
      return loadTextStl(buffer);
    } catch (error) {
      ex = error;
      console.log(ex);
      console.log('load as binary stl');
      return loadBinaryStl(buffer);
    }
  };
})();

STLViewer = (function(superClass) {
  extend(STLViewer, superClass);

  function STLViewer() {
    this.buildScene = bind(this.buildScene, this);
    this.openFile = bind(this.openFile, this);
    return STLViewer.__super__.constructor.apply(this, arguments);
  }

  STLViewer.prototype.template = require('./templates/stl_viewer');

  STLViewer.prototype.className = 'row';

  STLViewer.prototype.ui = {
    view: '[data-region=stl-viewer]'
  };

  STLViewer.prototype.events = {
    'dragover @ui.view': 'onDragOver',
    'drop @ui.view': 'onDrop'
  };

  STLViewer.prototype.onDragOver = function(e) {
    e.stopPropagation();
    e.preventDefault();
    e.originalEvent.dataTransfer = 'copy';
  };

  STLViewer.prototype.onDrop = function(e) {
    var file;
    e.stopPropagation();
    e.preventDefault();
    file = e.originalEvent.dataTransfer.files[0];
    this.openFile(file);
  };

  STLViewer.prototype.onRender = function() {
    var url;
    setTimeout(this.buildScene, 10);
    url = this.model.get('views').stl;
    console.log(url);
    return Backbone.Radio.channel('background').request('file', url).then((function(_this) {
      return function(stlBuffer) {
        var buffer, geom, toArrayBuffer;
        console.log('FETCHED FILE!');
        console.log(stlBuffer);
        toArrayBuffer = function(buf) {
          var ab, i, view;
          ab = new ArrayBuffer(buf.length);
          view = new Uint8Array(ab);
          i = 0;
          while (i < buf.length) {
            view[i] = buf[i];
            ++i;
          }
          return ab;
        };
        buffer = toArrayBuffer(stlBuffer);
        console.log('ARRAY BUFFER');
        console.log(buffer);
        geom = loadSTL(buffer);
        _this.scene.remove(_this.currentObj);
        _this.currentObj = new THREE.Mesh(geom, _this.material);
        return _this.scene.add(_this.currentObj);
      };
    })(this));
  };

  STLViewer.prototype.openFile = function(stlBuffer) {
    var onLoad, reader;
    reader = new FileReader();
    onLoad = (function(_this) {
      return function(e) {
        var buffer, geom;
        buffer = e.target.result;
        geom = loadSTL(buffer);
        _this.scene.remove(_this.currentObj);
        _this.currentObj = new THREE.Mesh(geom, _this.material);
        _this.scene.add(_this.currentObj);
      };
    })(this);
    reader.addEventListener('load', onLoad, false);
    reader.readAsArrayBuffer(stlBuffer);
    return true;
  };

  STLViewer.prototype.sceneConfig = {
    size: {
      width: 800,
      height: 800
    },
    camera: {
      pos: {
        x: 0,
        y: 0,
        z: 80
      }
    },
    lights: [
      {
        color: 0xffffff,
        pos: {
          x: 0,
          y: 100,
          z: 100
        }
      }, {
        color: 0xffffff,
        pos: {
          x: 0,
          y: -100,
          z: -100
        }
      }
    ],
    material: {
      color: 0x009199,
      specular: 0x030303
    }
  };

  STLViewer.prototype.buildScene = function() {
    var camera, controls, j, l, len, light, looper, pos, ratio, ref, renderer, view;
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(this.sceneConfig.size.width, this.sceneConfig.size.height);
    view = this.ui.view[0];
    view.appendChild(renderer.domElement);
    ratio = this.sceneConfig.size.width / this.sceneConfig.size.height;
    camera = new THREE.PerspectiveCamera(45, ratio, 1, 1000);
    pos = this.sceneConfig.camera.pos;
    camera.position.set(pos.x, pos.y, pos.z);
    controls = new THREE.OrbitControls(camera, view);
    this.scene = new THREE.Scene;
    this.scene.add(new THREE.AmbientLight(0x666666));
    ref = this.sceneConfig.lights;
    for (j = 0, len = ref.length; j < len; j++) {
      l = ref[j];
      light = new THREE.DirectionalLight(l.color);
      light.position.set(l.pos.x, l.pos.y, l.pos.z);
      this.scene.add(light);
    }
    this.material = new THREE.MeshPhongMaterial(this.sceneConfig.material);
    this.currentObj = new THREE.Mesh(new THREE.Geometry, this.material);
    this.scene.add(this.currentObj);
    looper = (function(_this) {
      return function() {
        requestAnimationFrame(looper);
        controls.update();
        renderer.clear();
        renderer.render(_this.scene, camera);
      };
    })(this);
    looper();
  };

  return STLViewer;

})(Mn.LayoutView);

module.exports = STLViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9zdGxWaWV3ZXIuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9zdGxWaWV3ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLElBQUEsa0JBQUE7RUFBQTs7OztBQUFBLE9BQUEsR0FBYSxDQUFBLFNBQUE7QUFFWCxNQUFBO0VBQUEsYUFBQSxHQUFnQixTQUFDLElBQUQsRUFBTyxNQUFQO0FBQ2QsUUFBQTtJQUFBLENBQUEsR0FBSSxJQUFLLEtBQUssQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFGLEdBQU0sSUFBSSxDQUFDLFVBQUwsQ0FBZ0IsTUFBQSxHQUFTLENBQXpCLEVBQTRCLElBQTVCO0lBQ04sQ0FBQyxDQUFDLENBQUYsR0FBTSxJQUFJLENBQUMsVUFBTCxDQUFnQixNQUFBLEdBQVMsQ0FBekIsRUFBNEIsSUFBNUI7SUFDTixDQUFDLENBQUMsQ0FBRixHQUFNLElBQUksQ0FBQyxVQUFMLENBQWdCLE1BQUEsR0FBUyxDQUF6QixFQUE0QixJQUE1QjtXQUNOO0VBTGM7RUFPaEIsYUFBQSxHQUFnQixTQUFDLE1BQUQ7QUFFZCxRQUFBO0lBQUEsSUFBQSxHQUFPLElBQUksUUFBSixDQUFhLE1BQWI7SUFDUCxJQUFBLEdBQU8sSUFBSSxDQUFDLFNBQUwsQ0FBZSxFQUFmLEVBQW1CLElBQW5CO0lBQ1AsSUFBQSxHQUFPLElBQUssS0FBSyxDQUFDO0lBQ2xCLE1BQUEsR0FBUztJQUNULENBQUEsR0FBSTtBQUNKLFdBQU0sQ0FBQSxHQUFJLElBQVY7TUFDRSxNQUFBLEdBQVMsYUFBQSxDQUFjLElBQWQsRUFBb0IsTUFBcEI7TUFDVCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQWQsQ0FBbUIsYUFBQSxDQUFjLElBQWQsRUFBb0IsTUFBQSxHQUFTLEVBQTdCLENBQW5CO01BQ0EsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFkLENBQW1CLGFBQUEsQ0FBYyxJQUFkLEVBQW9CLE1BQUEsR0FBUyxFQUE3QixDQUFuQjtNQUNBLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBZCxDQUFtQixhQUFBLENBQWMsSUFBZCxFQUFvQixNQUFBLEdBQVMsRUFBN0IsQ0FBbkI7TUFDQSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQVgsQ0FBZ0IsSUFBSyxLQUFLLENBQUMsS0FBWCxDQUFrQixDQUFBLEdBQUksQ0FBdEIsRUFBeUIsQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFqQyxFQUFvQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQTVDLEVBQStDLE1BQS9DLENBQWhCO01BQ0EsTUFBQSxJQUFVLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBUixHQUFZO01BQ3RCLENBQUE7SUFQRjtXQVFBO0VBZmM7RUFpQmhCLE1BQUEsR0FBUyxTQUFDLEtBQUQ7QUFDUCxRQUFBO0lBQUEsQ0FBQSxHQUFJLElBQUssS0FBSyxDQUFDO0lBQ2YsQ0FBQyxDQUFDLENBQUYsR0FBTSxVQUFBLENBQVcsS0FBTSxDQUFBLENBQUEsQ0FBakI7SUFDTixDQUFDLENBQUMsQ0FBRixHQUFNLFVBQUEsQ0FBVyxLQUFNLENBQUEsQ0FBQSxDQUFqQjtJQUNOLENBQUMsQ0FBQyxDQUFGLEdBQU0sVUFBQSxDQUFXLEtBQU0sQ0FBQSxDQUFBLENBQWpCO1dBQ047RUFMTztFQU9ULE9BQUEsR0FBVSxTQUFDLEtBQUQ7QUFDUixRQUFBO0lBQUEsS0FBQSxHQUFRO0lBQ1IsQ0FBQSxHQUFJO0lBQ0osQ0FBQSxHQUFJO0FBQ0osV0FBTSxDQUFBLEdBQUksS0FBSyxDQUFDLE1BQWhCO01BQ0UsSUFBRyxLQUFNLENBQUEsQ0FBQSxDQUFOLEtBQVksRUFBZjtRQUNFLElBQUEsR0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQXBCLENBQTBCLElBQTFCLEVBQWdDLEtBQUssQ0FBQyxRQUFOLENBQWUsQ0FBZixFQUFrQixDQUFsQixDQUFoQztRQUNQLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBWDtRQUNBLENBQUEsR0FBSSxDQUFBLEdBQUksRUFIVjs7TUFJQSxDQUFBO0lBTEY7SUFNQSxLQUFLLENBQUMsSUFBTixDQUFXLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBcEIsQ0FBMEIsSUFBMUIsRUFBZ0MsS0FBSyxDQUFDLFFBQU4sQ0FBZSxDQUFmLENBQWhDLENBQVg7V0FDQTtFQVhRO0VBYVYsV0FBQSxHQUFjLFNBQUMsTUFBRDtBQUNaLFFBQUE7SUFBQSxLQUFBLEdBQVEsT0FBQSxDQUFRLElBQUksVUFBSixDQUFlLE1BQWYsQ0FBUjtJQUNSLEtBQUEsR0FBUTtJQUVSLElBQUEsR0FBTyxTQUFDLE1BQUQ7QUFDTCxVQUFBO0FBQUEsYUFBTSxLQUFNLENBQUEsS0FBQSxDQUFNLENBQUMsS0FBYixDQUFtQixPQUFuQixDQUFOO1FBQ0UsS0FBQTtNQURGO01BRUEsQ0FBQSxHQUFJLEtBQU0sQ0FBQSxLQUFBLENBQU0sQ0FBQyxLQUFiLENBQW1CLE1BQW5CO2FBQ0o7SUFKSztJQU1QLE1BQUEsR0FBUyxTQUFDLE1BQUQ7QUFDUCxVQUFBO01BQUEsQ0FBQSxHQUFJLElBQUEsQ0FBSyxNQUFMO01BQ0osSUFBRyxDQUFDLENBQUo7QUFDRSxjQUFNLElBQUksS0FBSixDQUFVLGdCQUFBLEdBQW1CLE1BQU0sQ0FBQyxRQUFQLENBQUEsQ0FBbkIsR0FBdUMsV0FBdkMsR0FBcUQsS0FBckQsR0FBNkQsQ0FBN0QsR0FBaUUsR0FBakUsR0FBdUUsR0FBdkUsR0FBNkUsS0FBTSxDQUFBLEtBQUEsR0FBUSxDQUFSLENBQW5GLEdBQWdHLEdBQTFHLEVBRFI7O01BRUEsS0FBQTthQUNBO0lBTE87SUFPVCxRQUFBLEdBQVc7SUFDWCxTQUFBLEdBQVk7SUFDWixJQUFBLEdBQU8sSUFBSyxLQUFLLENBQUM7SUFDbEIsTUFBQSxDQUFPLGlCQUFQO0FBQ0EsV0FBTSxDQUFDLElBQUEsQ0FBSyxjQUFMLENBQVA7TUFDRSxNQUFBLEdBQVMsTUFBQSxDQUFPLFFBQVA7TUFDVCxNQUFBLENBQU8sa0JBQVA7TUFDQSxFQUFBLEdBQUssTUFBQSxDQUFPLFNBQVA7TUFDTCxFQUFBLEdBQUssTUFBQSxDQUFPLFNBQVA7TUFDTCxFQUFBLEdBQUssTUFBQSxDQUFPLFNBQVA7TUFDTCxNQUFBLENBQU8sWUFBUDtNQUNBLE1BQUEsQ0FBTyxhQUFQO01BQ0EsSUFBQSxHQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7TUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFkLENBQW1CLE1BQUEsQ0FBTyxFQUFQLENBQW5CO01BQ0EsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFkLENBQW1CLE1BQUEsQ0FBTyxFQUFQLENBQW5CO01BQ0EsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFkLENBQW1CLE1BQUEsQ0FBTyxFQUFQLENBQW5CO01BQ0EsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFYLENBQWdCLElBQUssS0FBSyxDQUFDLEtBQVgsQ0FBa0IsSUFBbEIsRUFBd0IsSUFBQSxHQUFPLENBQS9CLEVBQWtDLElBQUEsR0FBTyxDQUF6QyxFQUE0QyxNQUFBLENBQU8sTUFBUCxDQUE1QyxDQUFoQjtJQVpGO1dBYUE7RUFsQ1k7U0FvQ2QsU0FBQyxNQUFEO0FBQ0UsUUFBQTtBQUFBO01BQ0UsT0FBTyxDQUFDLEdBQVIsQ0FBWSxrQkFBWjtBQUNBLGFBQU8sV0FBQSxDQUFZLE1BQVosRUFGVDtLQUFBLGFBQUE7TUFHTTtNQUNKLE9BQU8sQ0FBQyxHQUFSLENBQVksRUFBWjtNQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksb0JBQVo7QUFDQSxhQUFPLGFBQUEsQ0FBYyxNQUFkLEVBTlQ7O0VBREY7QUFsRlcsQ0FBQSxDQUFILENBQUE7O0FBaUdKOzs7Ozs7Ozs7c0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSx3QkFBUjs7c0JBQ1YsU0FBQSxHQUFXOztzQkFFWCxFQUFBLEdBQ0U7SUFBQSxJQUFBLEVBQVEsMEJBQVI7OztzQkFFRixNQUFBLEdBQ0U7SUFBQSxtQkFBQSxFQUFzQixZQUF0QjtJQUNBLGVBQUEsRUFBc0IsUUFEdEI7OztzQkFNRixVQUFBLEdBQVksU0FBQyxDQUFEO0lBQ1YsQ0FBQyxDQUFDLGVBQUYsQ0FBQTtJQUNBLENBQUMsQ0FBQyxjQUFGLENBQUE7SUFDQSxDQUFDLENBQUMsYUFBYSxDQUFDLFlBQWhCLEdBQStCO0VBSHJCOztzQkFNWixNQUFBLEdBQVEsU0FBQyxDQUFEO0FBQ04sUUFBQTtJQUFBLENBQUMsQ0FBQyxlQUFGLENBQUE7SUFDQSxDQUFDLENBQUMsY0FBRixDQUFBO0lBQ0EsSUFBQSxHQUFPLENBQUMsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLEtBQU0sQ0FBQSxDQUFBO0lBQzFDLElBQUMsQ0FBQSxRQUFELENBQVUsSUFBVjtFQUpNOztzQkFRUixRQUFBLEdBQVUsU0FBQTtBQUNSLFFBQUE7SUFBQSxVQUFBLENBQVksSUFBQyxDQUFBLFVBQWIsRUFBeUIsRUFBekI7SUFFQSxHQUFBLEdBQU0sSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUFtQixDQUFDO0lBRTFCLE9BQU8sQ0FBQyxHQUFSLENBQVksR0FBWjtXQUVBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixZQUF2QixDQUFvQyxDQUFDLE9BQXJDLENBQTZDLE1BQTdDLEVBQXFELEdBQXJELENBQ0EsQ0FBQyxJQURELENBQ00sQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFNBQUQ7QUFDSixZQUFBO1FBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxlQUFaO1FBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaO1FBR0EsYUFBQSxHQUFnQixTQUFDLEdBQUQ7QUFDZCxjQUFBO1VBQUEsRUFBQSxHQUFLLElBQUksV0FBSixDQUFnQixHQUFHLENBQUMsTUFBcEI7VUFDTCxJQUFBLEdBQU8sSUFBSSxVQUFKLENBQWUsRUFBZjtVQUNQLENBQUEsR0FBSTtBQUNKLGlCQUFNLENBQUEsR0FBSSxHQUFHLENBQUMsTUFBZDtZQUNFLElBQUssQ0FBQSxDQUFBLENBQUwsR0FBVSxHQUFJLENBQUEsQ0FBQTtZQUNkLEVBQUU7VUFGSjtpQkFHQTtRQVBjO1FBU2hCLE1BQUEsR0FBUyxhQUFBLENBQWMsU0FBZDtRQUVULE9BQU8sQ0FBQyxHQUFSLENBQVksY0FBWjtRQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtRQUVBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjtRQUdQLEtBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLEtBQUMsQ0FBQSxVQUFmO1FBQ0EsS0FBQyxDQUFBLFVBQUQsR0FBYyxJQUFLLEtBQUssQ0FBQyxJQUFYLENBQWlCLElBQWpCLEVBQXVCLEtBQUMsQ0FBQSxRQUF4QjtlQUNkLEtBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLEtBQUMsQ0FBQSxVQUFaO01BeEJJO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUROO0VBUFE7O3NCQW9DVixRQUFBLEdBQVUsU0FBQyxTQUFEO0FBRVIsUUFBQTtJQUFBLE1BQUEsR0FBUyxJQUFJLFVBQUosQ0FBQTtJQUdULE1BQUEsR0FBUyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtBQUNQLFlBQUE7UUFBQSxNQUFBLEdBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNsQixJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7UUFHUCxLQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBYyxLQUFDLENBQUEsVUFBZjtRQUNBLEtBQUMsQ0FBQSxVQUFELEdBQWMsSUFBSyxLQUFLLENBQUMsSUFBWCxDQUFpQixJQUFqQixFQUF1QixLQUFDLENBQUEsUUFBeEI7UUFDZCxLQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxLQUFDLENBQUEsVUFBWjtNQVBPO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTtJQVdULE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQyxNQUFoQyxFQUF3QyxLQUF4QztJQUdBLE1BQU0sQ0FBQyxpQkFBUCxDQUF5QixTQUF6QjtBQUNBLFdBQU87RUFwQkM7O3NCQXVCVixXQUFBLEdBRUU7SUFBQSxJQUFBLEVBQ0U7TUFBQSxLQUFBLEVBQVEsR0FBUjtNQUNBLE1BQUEsRUFBUSxHQURSO0tBREY7SUFJQSxNQUFBLEVBQ0U7TUFBQSxHQUFBLEVBQ0U7UUFBQSxDQUFBLEVBQUcsQ0FBSDtRQUNBLENBQUEsRUFBRyxDQURIO1FBRUEsQ0FBQSxFQUFHLEVBRkg7T0FERjtLQUxGO0lBV0EsTUFBQSxFQUFRO01BQ0o7UUFBQSxLQUFBLEVBQU8sUUFBUDtRQUNBLEdBQUEsRUFDRTtVQUFBLENBQUEsRUFBRyxDQUFIO1VBQ0EsQ0FBQSxFQUFHLEdBREg7VUFFQSxDQUFBLEVBQUcsR0FGSDtTQUZGO09BREksRUFPSjtRQUFBLEtBQUEsRUFBTyxRQUFQO1FBQ0EsR0FBQSxFQUNFO1VBQUEsQ0FBQSxFQUFHLENBQUg7VUFDQSxDQUFBLEVBQUcsQ0FBQyxHQURKO1VBRUEsQ0FBQSxFQUFHLENBQUMsR0FGSjtTQUZGO09BUEk7S0FYUjtJQTBCQSxRQUFBLEVBQ0U7TUFBQSxLQUFBLEVBQVUsUUFBVjtNQUNBLFFBQUEsRUFBVSxRQURWO0tBM0JGOzs7c0JBK0JGLFVBQUEsR0FBWSxTQUFBO0FBR1YsUUFBQTtJQUFBLFFBQUEsR0FBVyxJQUFJLEtBQUssQ0FBQyxhQUFWLENBQUE7SUFDWCxRQUFRLENBQUMsT0FBVCxDQUFpQixJQUFDLENBQUEsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFuQyxFQUEwQyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUE1RDtJQUdBLElBQUEsR0FBTyxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUssQ0FBQSxDQUFBO0lBQ2hCLElBQUksQ0FBQyxXQUFMLENBQWlCLFFBQVEsQ0FBQyxVQUExQjtJQUdBLEtBQUEsR0FBUyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFsQixHQUEwQixJQUFDLENBQUEsV0FBVyxDQUFDLElBQUksQ0FBQztJQUNyRCxNQUFBLEdBQVMsSUFBSyxLQUFLLENBQUMsaUJBQVgsQ0FBOEIsRUFBOUIsRUFBa0MsS0FBbEMsRUFBeUMsQ0FBekMsRUFBNEMsSUFBNUM7SUFDVCxHQUFBLEdBQU0sSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUM7SUFDMUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFoQixDQUFvQixHQUFHLENBQUMsQ0FBeEIsRUFBMkIsR0FBRyxDQUFDLENBQS9CLEVBQWtDLEdBQUcsQ0FBQyxDQUF0QztJQUtBLFFBQUEsR0FBVyxJQUFLLEtBQUssQ0FBQyxhQUFYLENBQTBCLE1BQTFCLEVBQWtDLElBQWxDO0lBR1gsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFLLEtBQUssQ0FBQztJQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFLLEtBQUssQ0FBQyxZQUFYLENBQXlCLFFBQXpCLENBQVg7QUFHQTtBQUFBLFNBQUEscUNBQUE7O01BQ0UsS0FBQSxHQUFRLElBQUssS0FBSyxDQUFDLGdCQUFYLENBQTZCLENBQUMsQ0FBQyxLQUEvQjtNQUNSLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBZixDQUFtQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQXpCLEVBQTRCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBbEMsRUFBcUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUEzQztNQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLEtBQVg7QUFIRjtJQU1BLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSyxLQUFLLENBQUMsaUJBQVgsQ0FBOEIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxRQUEzQztJQUdaLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBSyxLQUFLLENBQUMsSUFBWCxDQUFpQixJQUFLLEtBQUssQ0FBQyxRQUE1QixFQUF1QyxJQUFDLENBQUEsUUFBeEM7SUFDZCxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsVUFBWjtJQUdBLE1BQUEsR0FBUyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFDUCxxQkFBQSxDQUFzQixNQUF0QjtRQUNBLFFBQVEsQ0FBQyxNQUFULENBQUE7UUFDQSxRQUFRLENBQUMsS0FBVCxDQUFBO1FBQ0EsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IsS0FBQyxDQUFBLEtBQWpCLEVBQXdCLE1BQXhCO01BSk87SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0lBUVQsTUFBQSxDQUFBO0VBL0NVOzs7O0dBeEhVLEVBQUUsQ0FBQzs7QUE4SzNCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./templates/stl_viewer":177}],168:[function(require,module,exports){
var RecordTable,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

RecordTable = (function(superClass) {
  extend(RecordTable, superClass);

  function RecordTable() {
    return RecordTable.__super__.constructor.apply(this, arguments);
  }

  RecordTable.prototype.template = require('./templates/table');

  RecordTable.prototype.tagName = 'table';

  RecordTable.prototype.className = 'table table-responsive attr-table';

  RecordTable.prototype.ui = {
    toggleAggregates: '[data-click=toggle-aggegates]'
  };

  RecordTable.prototype.events = {
    'click @ui.toggleAggregates': 'toggleAggregates'
  };

  RecordTable.prototype.aggregatesShown = false;

  RecordTable.prototype.toggleAggregates = function() {
    if (this.aggregatesShown) {
      this.ui.toggleAggregates.text('Show Elements');
      this.$('[data-toggle=aggregates]').hide();
      return this.aggregatesShown = false;
    } else {
      this.ui.toggleAggregates.text('Hide Elements');
      this.$('[data-toggle=aggregates]').show();
      return this.aggregatesShown = true;
    }
  };

  return RecordTable;

})(Mn.LayoutView);

module.exports = RecordTable;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy90YWJsZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RhYmxlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFdBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7d0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxtQkFBUjs7d0JBQ1YsT0FBQSxHQUFZOzt3QkFDWixTQUFBLEdBQVk7O3dCQUVaLEVBQUEsR0FDRTtJQUFBLGdCQUFBLEVBQWtCLCtCQUFsQjs7O3dCQUVGLE1BQUEsR0FDRTtJQUFBLDRCQUFBLEVBQThCLGtCQUE5Qjs7O3dCQUdGLGVBQUEsR0FBaUI7O3dCQUNqQixnQkFBQSxHQUFrQixTQUFBO0lBQ2hCLElBQUcsSUFBQyxDQUFBLGVBQUo7TUFDRSxJQUFDLENBQUEsRUFBRSxDQUFDLGdCQUFnQixDQUFDLElBQXJCLENBQTBCLGVBQTFCO01BQ0EsSUFBQyxDQUFBLENBQUQsQ0FBRywwQkFBSCxDQUE4QixDQUFDLElBQS9CLENBQUE7YUFDQSxJQUFDLENBQUEsZUFBRCxHQUFtQixNQUhyQjtLQUFBLE1BQUE7TUFNRSxJQUFDLENBQUEsRUFBRSxDQUFDLGdCQUFnQixDQUFDLElBQXJCLENBQTBCLGVBQTFCO01BQ0EsSUFBQyxDQUFBLENBQUQsQ0FBRywwQkFBSCxDQUE4QixDQUFDLElBQS9CLENBQUE7YUFDQSxJQUFDLENBQUEsZUFBRCxHQUFtQixLQVJyQjs7RUFEZ0I7Ozs7R0FiTSxFQUFFLENBQUM7O0FBMEI3QixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{"./templates/table":178}],169:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12 csv-viewer\"></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],170:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, data, undefined, views) {
buf.push("<div class=\"row header\"><div class=\"col-lg-12\"><i data-click=\"close\" class=\"fa fa-2x fa-times detail-close\"></i></div><div class=\"col-lg-12 mt-2\"><h4 class=\"card-title\">" + (jade.escape(null == (jade_interp = data['rdfs:label']) ? "" : jade_interp)) + "</h4></div></div>");
if ( views.img)
{
buf.push("<div class=\"row\"><div class=\"col-lg-12 text-center\"><img" + (jade.attr("data-zoom", views.img, true, false)) + (jade.attr("src", views.img, true, false)) + " style=\"max-height:30rem;\" class=\"img-thumbnail\"/></div></div>");
}
if ( views.pdf)
{
buf.push("<div class=\"row\"><div class=\"col-lg-12 text-center\"><iframe" + (jade.attr("src", views.pdf, true, false)) + " style=\"min-height:30rem;\" class=\"w-100\"></iframe></div></div>");
}
if ( views.audio)
{
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><a" + (jade.attr("href", views.audio, true, false)) + " target=\"_blank\" class=\"btn btn-outline-primary w-100\"><i class=\"fa fa-fw fa-file-audio-o\"></i>&nbsp;\nListen</a></div></div>");
}
buf.push("<div class=\"row\"><div data-region=\"viewer\" class=\"col-lg-12\"></div></div>");
if ( views.dicom)
{
buf.push("<p class=\"lead\">DICOM VIEWER</p><div id=\"dicomImage\" style=\"width:512px;height:512px;\"></div>");
}
if ( views.video)
{
buf.push("<video width=\"320\" height=\"240\" controls=\"\"><source" + (jade.attr("src", views.video, true, false)) + " type=\"video/mp4\"/>Your browser does not support the video tag.</video>");
}
buf.push("<div class=\"row mt-2\"><div class=\"col-lg-12\"><table class=\"table table-responsive attr-table\">");
jade_mixins["arrayRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
if ( typeof(data[attr][0]) == 'object')
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td><a data-click=\"toggle-aggegates\">Show Elements</a>&nbsp; (" + (jade.escape((jade_interp = data[attr].length) == null ? '' : jade_interp)) + " items)</td></tr><tr data-toggle=\"aggregates\" style=\"display:none;\" class=\"aggregate-list\"><td></td><td>");
// iterate data[attr]
;(function(){
  var $$obj = data[attr];
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var obj = $$obj[$index];

buf.push("<a" + (jade.attr("data-relation", obj['@id'], true, false)) + ">" + (jade.escape(null == (jade_interp = obj['@id']) ? "" : jade_interp)) + "</a>, &nbsp;");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var obj = $$obj[$index];

buf.push("<a" + (jade.attr("data-relation", obj['@id'], true, false)) + ">" + (jade.escape(null == (jade_interp = obj['@id']) ? "" : jade_interp)) + "</a>, &nbsp;");
    }

  }
}).call(this);

buf.push("</td></tr>");
}
else
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape((jade_interp = data[attr].join(', ')) == null ? '' : jade_interp)) + "</td></tr>");
}
}
};
jade_mixins["attrRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape((jade_interp = data[attr]) == null ? '' : jade_interp)) + "</td></tr>");
}
};
jade_mixins["idRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td><a" + (jade.attr("data-relation", data[attr]['@id'], true, false)) + ">" + (jade.escape((jade_interp = data[attr]['@id']) == null ? '' : jade_interp)) + "</a></td></tr>");
}
};
jade_mixins["valueRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape(null == (jade_interp = data[attr]['@value']) ? "" : jade_interp)) + "</td></tr>");
}
};
buf.push("");
// iterate data
;(function(){
  var $$obj = data;
  if ('number' == typeof $$obj.length) {

    for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
      var val = $$obj[key];

if ( Array.isArray(val))
{
jade_mixins["arrayRow"](key);
}
else if ( typeof val == 'object')
{
if ( val['@id'])
{
jade_mixins["idRow"](key);
}
if ( val['@value'])
{
jade_mixins["valueRow"](key);
}
}
else
{
jade_mixins["attrRow"](key);
}
    }

  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;      var val = $$obj[key];

if ( Array.isArray(val))
{
jade_mixins["arrayRow"](key);
}
else if ( typeof val == 'object')
{
if ( val['@id'])
{
jade_mixins["idRow"](key);
}
if ( val['@value'])
{
jade_mixins["valueRow"](key);
}
}
else
{
jade_mixins["attrRow"](key);
}
    }

  }
}).call(this);

buf.push("</table></div></div>");}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined,"views" in locals_for_with?locals_for_with.views:typeof views!=="undefined"?views:undefined));;return buf.join("");
};
},{"jade/runtime":209}],171:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-12\"><div data-display=\"graph\" class=\"ld__graph\"></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],172:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (id) {
buf.push("<div class=\"row\"><div class=\"col-lg-6 text-xs-left\"><a data-click=\"clear\" class=\"btn btn-outline-secondary\"><i class=\"fa fa-fw fa-times-circle-o\"></i>&nbsp;\nClear Filters</a></div><div class=\"col-lg-6 text-right\"><a" + (jade.attr("href", "#datasets/" + (id) + "/capture", true, false)) + " class=\"btn btn-outline-primary mr-2\"><i class=\"fa fa-fw fa-paperclip\"></i>&nbsp;\nKnowledge Capture</a><a" + (jade.attr("href", "#datasets/" + (id) + "/config", true, false)) + " class=\"btn btn-outline-secondary\"><i class=\"fa fa-fw fa-cog\"></i>&nbsp;\nConfiguration</a></div></div>");}.call(this,"id" in locals_for_with?locals_for_with.id:typeof id!=="undefined"?id:undefined));;return buf.join("");
};
},{"jade/runtime":209}],173:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"row\"><div class=\"col-lg-3\"><div id=\"facets\"></div></div><div class=\"col-lg-9 pl-0\"><div class=\"row\"><div data-region=\"header\" class=\"col-lg-12 pb-3\"></div><div data-region=\"record-list\" class=\"col-lg-12\"></div><div class=\"col-lg-12\"></div></div></div><div data-region=\"detail\" class=\"rdf-detail\"><div class=\"card card-body\"><h4 class=\"card-title\">RDF Viewer</h4><p class=\"lead\">Click a node to details.</p></div></div><div class=\"drift-underlay\"><div class=\"drift-background\"></div><div class=\"drift-content\"></div></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],174:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (data, icon) {
buf.push("<div class=\"row\"><div class=\"col-lg-2\"><i" + (jade.cls(['fa','fa-fw',icon], [null,null,true])) + "></i></div><div class=\"col-lg-10\">" + (jade.escape(null == (jade_interp = data['rdfs:label']) ? "" : jade_interp)) + "</div></div>");}.call(this,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined,"icon" in locals_for_with?locals_for_with.icon:typeof icon!=="undefined"?icon:undefined));;return buf.join("");
};
},{"jade/runtime":209}],175:[function(require,module,exports){
module.exports=require(102)
},{"jade/runtime":209}],176:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (data, icon) {
buf.push("<div class=\"row\"><div class=\"col-lg-12\"><h4 class=\"card-title\">");
if ( icon)
{
buf.push("<i" + (jade.cls(['fa','fa-fw',icon], [null,null,true])) + "></i>&nbsp;");
}
buf.push("<a" + (jade.attr("data-relation", data['@id'], true, false)) + " class=\"cursor-pointer\">" + (jade.escape(null == (jade_interp = data['@id']) ? "" : jade_interp)) + "</a></h4></div></div><div class=\"row\"><div data-region=\"viewer\" class=\"col-lg-12\"></div></div>");}.call(this,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined,"icon" in locals_for_with?locals_for_with.icon:typeof icon!=="undefined"?icon:undefined));;return buf.join("");
};
},{"jade/runtime":209}],177:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;

buf.push("<div class=\"col-lg-12\"><div data-region=\"stl-viewer\" class=\"stl-viewer\"></div></div>");;return buf.join("");
};
},{"jade/runtime":209}],178:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (Array, data, undefined) {
buf.push("");
jade_mixins["arrayRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
if ( typeof(data[attr][0]) == 'object')
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td><a data-click=\"toggle-aggegates\">Show Elements</a>&nbsp; (" + (jade.escape((jade_interp = data[attr].length) == null ? '' : jade_interp)) + " items)</td></tr><tr data-toggle=\"aggregates\" style=\"display:none;\" class=\"aggregate-list\"><td></td><td>");
// iterate data[attr]
;(function(){
  var $$obj = data[attr];
  if ('number' == typeof $$obj.length) {

    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
      var obj = $$obj[$index];

buf.push("<a" + (jade.attr("data-relation", obj['@id'], true, false)) + ">" + (jade.escape(null == (jade_interp = obj['@id']) ? "" : jade_interp)) + "</a>, &nbsp;");
    }

  } else {
    var $$l = 0;
    for (var $index in $$obj) {
      $$l++;      var obj = $$obj[$index];

buf.push("<a" + (jade.attr("data-relation", obj['@id'], true, false)) + ">" + (jade.escape(null == (jade_interp = obj['@id']) ? "" : jade_interp)) + "</a>, &nbsp;");
    }

  }
}).call(this);

buf.push("</td></tr>");
}
else
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape((jade_interp = data[attr].join(', ')) == null ? '' : jade_interp)) + "</td></tr>");
}
}
};
jade_mixins["attrRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape((jade_interp = data[attr]) == null ? '' : jade_interp)) + "</td></tr>");
}
};
jade_mixins["idRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td><a" + (jade.attr("data-relation", data[attr]['@id'], true, false)) + ">" + (jade.escape((jade_interp = data[attr]['@id']) == null ? '' : jade_interp)) + "</a></td></tr>");
}
};
jade_mixins["valueRow"] = jade_interp = function(attr){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if ( data[attr])
{
buf.push("<tr><td>" + (jade.escape((jade_interp = attr) == null ? '' : jade_interp)) + ":</td><td>" + (jade.escape(null == (jade_interp = data[attr]['@value']) ? "" : jade_interp)) + "</td></tr>");
}
};
buf.push("");
// iterate data
;(function(){
  var $$obj = data;
  if ('number' == typeof $$obj.length) {

    for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
      var val = $$obj[key];

if ( Array.isArray(val))
{
jade_mixins["arrayRow"](key);
}
else if ( typeof val == 'object')
{
if ( val['@id'])
{
jade_mixins["idRow"](key);
}
if ( val['@value'])
{
jade_mixins["valueRow"](key);
}
}
else
{
jade_mixins["attrRow"](key);
}
    }

  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;      var val = $$obj[key];

if ( Array.isArray(val))
{
jade_mixins["arrayRow"](key);
}
else if ( typeof val == 'object')
{
if ( val['@id'])
{
jade_mixins["idRow"](key);
}
if ( val['@value'])
{
jade_mixins["valueRow"](key);
}
}
else
{
jade_mixins["attrRow"](key);
}
    }

  }
}).call(this);
}.call(this,"Array" in locals_for_with?locals_for_with.Array:typeof Array!=="undefined"?Array:undefined,"data" in locals_for_with?locals_for_with.data:typeof data!=="undefined"?data:undefined,"undefined" in locals_for_with?locals_for_with.undefined:typeof undefined!=="undefined"?undefined:undefined));;return buf.join("");
};
},{"jade/runtime":209}],179:[function(require,module,exports){
var Entities, SearchResultFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

SearchResultFactory = (function(superClass) {
  extend(SearchResultFactory, superClass);

  function SearchResultFactory() {
    return SearchResultFactory.__super__.constructor.apply(this, arguments);
  }

  SearchResultFactory.prototype.radioRequests = {
    'search:result collection': 'getCollection'
  };

  SearchResultFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  SearchResultFactory.prototype.getCollection = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        return resolve(_this.cachedCollection);
      };
    })(this));
  };

  return SearchResultFactory;

})(Marionette.Service);

module.exports = new SearchResultFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWN0b3J5LmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjdG9yeS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw2QkFBQTtFQUFBOzs7QUFBQSxRQUFBLEdBQVcsT0FBQSxDQUFRLFlBQVI7O0FBSUw7Ozs7Ozs7Z0NBRUosYUFBQSxHQUNFO0lBQUEsMEJBQUEsRUFBNEIsZUFBNUI7OztnQ0FFRixVQUFBLEdBQVksU0FBQTtXQUNWLElBQUMsQ0FBQSxnQkFBRCxHQUFvQixJQUFJLFFBQVEsQ0FBQyxVQUFiLENBQUE7RUFEVjs7Z0NBR1osYUFBQSxHQUFlLFNBQUE7QUFDYixXQUFPLElBQUksT0FBSixDQUFZLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsTUFBVjtBQUNqQixlQUFPLE9BQUEsQ0FBUSxLQUFDLENBQUEsZ0JBQVQ7TUFEVTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWjtFQURNOzs7O0dBUmlCLFVBQVUsQ0FBQzs7QUFjN0MsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxtQkFBSixDQUFBIn0=

},{"./entities":157}],180:[function(require,module,exports){
var AbstractRuleEntities, ViewerRuleCollection, ViewerRuleDecorator, ViewerRuleModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

AbstractRuleEntities = require('../abstract_rule/entities');

ViewerRuleDecorator = (function(superClass) {
  extend(ViewerRuleDecorator, superClass);

  function ViewerRuleDecorator() {
    return ViewerRuleDecorator.__super__.constructor.apply(this, arguments);
  }

  ViewerRuleDecorator.prototype.icon = function() {
    return 'fa-globe';
  };

  return ViewerRuleDecorator;

})(Mn.Decorator);

ViewerRuleModel = (function(superClass) {
  extend(ViewerRuleModel, superClass);

  function ViewerRuleModel() {
    return ViewerRuleModel.__super__.constructor.apply(this, arguments);
  }

  ViewerRuleModel.prototype.decorator = ViewerRuleDecorator;

  ViewerRuleModel.prototype.radioChannel = 'viewer:rule';

  return ViewerRuleModel;

})(AbstractRuleEntities.Model);

ViewerRuleModel.setup();

ViewerRuleCollection = (function(superClass) {
  extend(ViewerRuleCollection, superClass);

  function ViewerRuleCollection() {
    return ViewerRuleCollection.__super__.constructor.apply(this, arguments);
  }

  ViewerRuleCollection.prototype.model = ViewerRuleModel;

  ViewerRuleCollection.prototype.target_object = 'views';

  return ViewerRuleCollection;

})(AbstractRuleEntities.Collection);

module.exports = {
  Model: ViewerRuleModel,
  Collection: ViewerRuleCollection
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3ZpZXdlcl9ydWxlL2VudGl0aWVzLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy92aWV3ZXJfcnVsZS9lbnRpdGllcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxnRkFBQTtFQUFBOzs7QUFBQSxvQkFBQSxHQUF1QixPQUFBLENBQVEsMkJBQVI7O0FBS2pCOzs7Ozs7O2dDQUVKLElBQUEsR0FBTSxTQUFBO0FBQ0osV0FBTztFQURIOzs7O0dBRjBCLEVBQUUsQ0FBQzs7QUFRL0I7Ozs7Ozs7NEJBR0osU0FBQSxHQUFXOzs0QkFHWCxZQUFBLEdBQWM7Ozs7R0FOYyxvQkFBb0IsQ0FBQzs7QUFVbkQsZUFBZSxDQUFDLEtBQWhCLENBQUE7O0FBS007Ozs7Ozs7aUNBQ0osS0FBQSxHQUFPOztpQ0FHUCxhQUFBLEdBQWU7Ozs7R0FKa0Isb0JBQW9CLENBQUM7O0FBUXhELE1BQU0sQ0FBQyxPQUFQLEdBQ0U7RUFBQSxLQUFBLEVBQVksZUFBWjtFQUNBLFVBQUEsRUFBWSxvQkFEWiJ9

},{"../abstract_rule/entities":33}],181:[function(require,module,exports){
var DexieFactory, Entities, ViewerRuleFactory,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Entities = require('./entities');

DexieFactory = require('../base/dexieFactory');

ViewerRuleFactory = (function(superClass) {
  extend(ViewerRuleFactory, superClass);

  function ViewerRuleFactory() {
    return ViewerRuleFactory.__super__.constructor.apply(this, arguments);
  }

  ViewerRuleFactory.prototype.tableName = 'viewer_rules';

  ViewerRuleFactory.prototype.radioRequests = {
    'viewer:rule collection': 'getCollection',
    'viewer:rule save': 'saveModel',
    'viewer:rule destroy': 'destroyModel'
  };

  ViewerRuleFactory.prototype.initialize = function() {
    return this.cachedCollection = new Entities.Collection();
  };

  return ViewerRuleFactory;

})(DexieFactory);

module.exports = new ViewerRuleFactory();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3ZpZXdlcl9ydWxlL2ZhY3RvcnkuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3ZpZXdlcl9ydWxlL2ZhY3RvcnkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEseUNBQUE7RUFBQTs7O0FBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSOztBQUNYLFlBQUEsR0FBZ0IsT0FBQSxDQUFRLHNCQUFSOztBQUlWOzs7Ozs7OzhCQUdKLFNBQUEsR0FBVzs7OEJBR1gsYUFBQSxHQUNFO0lBQUEsd0JBQUEsRUFBMkIsZUFBM0I7SUFDQSxrQkFBQSxFQUEyQixXQUQzQjtJQUVBLHFCQUFBLEVBQTJCLGNBRjNCOzs7OEJBSUYsVUFBQSxHQUFZLFNBQUE7V0FDVixJQUFDLENBQUEsZ0JBQUQsR0FBb0IsSUFBSSxRQUFRLENBQUMsVUFBYixDQUFBO0VBRFY7Ozs7R0FYa0I7O0FBZ0JoQyxNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLGlCQUFKLENBQUEifQ==

},{"../base/dexieFactory":34,"./entities":180}],182:[function(require,module,exports){
// Backbone.BabySitter
// -------------------
// v0.1.11
//
// Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  'use strict';

  var previousChildViewContainer = Backbone.ChildViewContainer;

  // BabySitter.ChildViewContainer
  // -----------------------------
  //
  // Provide a container to store, retrieve and
  // shut down child views.
  
  Backbone.ChildViewContainer = (function (Backbone, _) {
  
    // Container Constructor
    // ---------------------
  
    var Container = function(views){
      this._views = {};
      this._indexByModel = {};
      this._indexByCustom = {};
      this._updateLength();
  
      _.each(views, this.add, this);
    };
  
    // Container Methods
    // -----------------
  
    _.extend(Container.prototype, {
  
      // Add a view to this container. Stores the view
      // by `cid` and makes it searchable by the model
      // cid (and model itself). Optionally specify
      // a custom key to store an retrieve the view.
      add: function(view, customIndex){
        var viewCid = view.cid;
  
        // store the view
        this._views[viewCid] = view;
  
        // index it by model
        if (view.model){
          this._indexByModel[view.model.cid] = viewCid;
        }
  
        // index by custom
        if (customIndex){
          this._indexByCustom[customIndex] = viewCid;
        }
  
        this._updateLength();
        return this;
      },
  
      // Find a view by the model that was attached to
      // it. Uses the model's `cid` to find it.
      findByModel: function(model){
        return this.findByModelCid(model.cid);
      },
  
      // Find a view by the `cid` of the model that was attached to
      // it. Uses the model's `cid` to find the view `cid` and
      // retrieve the view using it.
      findByModelCid: function(modelCid){
        var viewCid = this._indexByModel[modelCid];
        return this.findByCid(viewCid);
      },
  
      // Find a view by a custom indexer.
      findByCustom: function(index){
        var viewCid = this._indexByCustom[index];
        return this.findByCid(viewCid);
      },
  
      // Find by index. This is not guaranteed to be a
      // stable index.
      findByIndex: function(index){
        return _.values(this._views)[index];
      },
  
      // retrieve a view by its `cid` directly
      findByCid: function(cid){
        return this._views[cid];
      },
  
      // Remove a view
      remove: function(view){
        var viewCid = view.cid;
  
        // delete model index
        if (view.model){
          delete this._indexByModel[view.model.cid];
        }
  
        // delete custom index
        _.any(this._indexByCustom, function(cid, key) {
          if (cid === viewCid) {
            delete this._indexByCustom[key];
            return true;
          }
        }, this);
  
        // remove the view from the container
        delete this._views[viewCid];
  
        // update the length
        this._updateLength();
        return this;
      },
  
      // Call a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.call`.
      call: function(method){
        this.apply(method, _.tail(arguments));
      },
  
      // Apply a method on every view in the container,
      // passing parameters to the call method one at a
      // time, like `function.apply`.
      apply: function(method, args){
        _.each(this._views, function(view){
          if (_.isFunction(view[method])){
            view[method].apply(view, args || []);
          }
        });
      },
  
      // Update the `.length` attribute on this container
      _updateLength: function(){
        this.length = _.size(this._views);
      }
    });
  
    // Borrowing this code from Backbone.Collection:
    // http://backbonejs.org/docs/backbone.html#section-106
    //
    // Mix in methods from Underscore, for iteration, and other
    // collection related features.
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck', 'reduce'];
  
    _.each(methods, function(method) {
      Container.prototype[method] = function() {
        var views = _.values(this._views);
        var args = [views].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  
    // return the public API
    return Container;
  })(Backbone, _);
  

  Backbone.ChildViewContainer.VERSION = '0.1.11';

  Backbone.ChildViewContainer.noConflict = function () {
    Backbone.ChildViewContainer = previousChildViewContainer;
    return this;
  };

  return Backbone.ChildViewContainer;

}));

},{"backbone":185,"underscore":284}],183:[function(require,module,exports){
// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.4.7
//
// Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {
      return (root.Marionette = root.Mn = factory(root, Backbone, _));
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    var Wreqr = require('backbone.wreqr');
    var BabySitter = require('backbone.babysitter');
    module.exports = factory(root, Backbone, _);
  } else {
    root.Marionette = root.Mn = factory(root, root.Backbone, root._);
  }

}(this, function(root, Backbone, _) {
  'use strict';

  var previousMarionette = root.Marionette;
  var previousMn = root.Mn;

  var Marionette = Backbone.Marionette = {};

  Marionette.VERSION = '2.4.7';

  Marionette.noConflict = function() {
    root.Marionette = previousMarionette;
    root.Mn = previousMn;
    return this;
  };

  // Get the Deferred creator for later use
  Marionette.Deferred = Backbone.$.Deferred;

  Marionette.FEATURES = {
  };
  
  Marionette.isEnabled = function(name) {
    return !!Marionette.FEATURES[name];
  };
  
  /* jshint unused: false *//* global console */
  
  // Helpers
  // -------
  
  // Marionette.extend
  // -----------------
  
  // Borrow the Backbone `extend` method so we can use it as needed
  Marionette.extend = Backbone.Model.extend;
  
  // Marionette.isNodeAttached
  // -------------------------
  
  // Determine if `el` is a child of the document
  Marionette.isNodeAttached = function(el) {
    return Backbone.$.contains(document.documentElement, el);
  };
  
  // Merge `keys` from `options` onto `this`
  Marionette.mergeOptions = function(options, keys) {
    if (!options) { return; }
    _.extend(this, _.pick(options, keys));
  };
  
  // Marionette.getOption
  // --------------------
  
  // Retrieve an object, function or other value from a target
  // object or its `options`, with `options` taking precedence.
  Marionette.getOption = function(target, optionName) {
    if (!target || !optionName) { return; }
    if (target.options && (target.options[optionName] !== undefined)) {
      return target.options[optionName];
    } else {
      return target[optionName];
    }
  };
  
  // Proxy `Marionette.getOption`
  Marionette.proxyGetOption = function(optionName) {
    return Marionette.getOption(this, optionName);
  };
  
  // Similar to `_.result`, this is a simple helper
  // If a function is provided we call it with context
  // otherwise just return the value. If the value is
  // undefined return a default value
  Marionette._getValue = function(value, context, params) {
    if (_.isFunction(value)) {
      value = params ? value.apply(context, params) : value.call(context);
    }
    return value;
  };
  
  // Marionette.normalizeMethods
  // ----------------------
  
  // Pass in a mapping of events => functions or function names
  // and return a mapping of events => functions
  Marionette.normalizeMethods = function(hash) {
    return _.reduce(hash, function(normalizedHash, method, name) {
      if (!_.isFunction(method)) {
        method = this[method];
      }
      if (method) {
        normalizedHash[name] = method;
      }
      return normalizedHash;
    }, {}, this);
  };
  
  // utility method for parsing @ui. syntax strings
  // into associated selector
  Marionette.normalizeUIString = function(uiString, ui) {
    return uiString.replace(/@ui\.[a-zA-Z-_$0-9]*/g, function(r) {
      return ui[r.slice(4)];
    });
  };
  
  // allows for the use of the @ui. syntax within
  // a given key for triggers and events
  // swaps the @ui with the associated selector.
  // Returns a new, non-mutated, parsed events hash.
  Marionette.normalizeUIKeys = function(hash, ui) {
    return _.reduce(hash, function(memo, val, key) {
      var normalizedKey = Marionette.normalizeUIString(key, ui);
      memo[normalizedKey] = val;
      return memo;
    }, {});
  };
  
  // allows for the use of the @ui. syntax within
  // a given value for regions
  // swaps the @ui with the associated selector
  Marionette.normalizeUIValues = function(hash, ui, properties) {
    _.each(hash, function(val, key) {
      if (_.isString(val)) {
        hash[key] = Marionette.normalizeUIString(val, ui);
      } else if (_.isObject(val) && _.isArray(properties)) {
        _.extend(val, Marionette.normalizeUIValues(_.pick(val, properties), ui));
        /* Value is an object, and we got an array of embedded property names to normalize. */
        _.each(properties, function(property) {
          var propertyVal = val[property];
          if (_.isString(propertyVal)) {
            val[property] = Marionette.normalizeUIString(propertyVal, ui);
          }
        });
      }
    });
    return hash;
  };
  
  // Mix in methods from Underscore, for iteration, and other
  // collection related features.
  // Borrowing this code from Backbone.Collection:
  // http://backbonejs.org/docs/backbone.html#section-121
  Marionette.actAsCollection = function(object, listProperty) {
    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',
      'select', 'reject', 'every', 'all', 'some', 'any', 'include',
      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',
      'last', 'without', 'isEmpty', 'pluck'];
  
    _.each(methods, function(method) {
      object[method] = function() {
        var list = _.values(_.result(this, listProperty));
        var args = [list].concat(_.toArray(arguments));
        return _[method].apply(_, args);
      };
    });
  };
  
  var deprecate = Marionette.deprecate = function(message, test) {
    if (_.isObject(message)) {
      message = (
        message.prev + ' is going to be removed in the future. ' +
        'Please use ' + message.next + ' instead.' +
        (message.url ? ' See: ' + message.url : '')
      );
    }
  
    if ((test === undefined || !test) && !deprecate._cache[message]) {
      deprecate._warn('Deprecation warning: ' + message);
      deprecate._cache[message] = true;
    }
  };
  
  deprecate._console = typeof console !== 'undefined' ? console : {};
  deprecate._warn = function() {
    var warn = deprecate._console.warn || deprecate._console.log || function() {};
    return warn.apply(deprecate._console, arguments);
  };
  deprecate._cache = {};
  
  /* jshint maxstatements: 14, maxcomplexity: 7 */
  
  // Trigger Method
  // --------------
  
  Marionette._triggerMethod = (function() {
    // split the event name on the ":"
    var splitter = /(^|:)(\w)/gi;
  
    // take the event section ("section1:section2:section3")
    // and turn it in to uppercase name
    function getEventName(match, prefix, eventName) {
      return eventName.toUpperCase();
    }
  
    return function(context, event, args) {
      var noEventArg = arguments.length < 3;
      if (noEventArg) {
        args = event;
        event = args[0];
      }
  
      // get the method name from the event name
      var methodName = 'on' + event.replace(splitter, getEventName);
      var method = context[methodName];
      var result;
  
      // call the onMethodName if it exists
      if (_.isFunction(method)) {
        // pass all args, except the event name
        result = method.apply(context, noEventArg ? _.rest(args) : args);
      }
  
      // trigger the event, if a trigger method exists
      if (_.isFunction(context.trigger)) {
        if (noEventArg + args.length > 1) {
          context.trigger.apply(context, noEventArg ? args : [event].concat(_.drop(args, 0)));
        } else {
          context.trigger(event);
        }
      }
  
      return result;
    };
  })();
  
  // Trigger an event and/or a corresponding method name. Examples:
  //
  // `this.triggerMethod("foo")` will trigger the "foo" event and
  // call the "onFoo" method.
  //
  // `this.triggerMethod("foo:bar")` will trigger the "foo:bar" event and
  // call the "onFooBar" method.
  Marionette.triggerMethod = function(event) {
    return Marionette._triggerMethod(this, arguments);
  };
  
  // triggerMethodOn invokes triggerMethod on a specific context
  //
  // e.g. `Marionette.triggerMethodOn(view, 'show')`
  // will trigger a "show" event or invoke onShow the view.
  Marionette.triggerMethodOn = function(context) {
    var fnc = _.isFunction(context.triggerMethod) ?
                  context.triggerMethod :
                  Marionette.triggerMethod;
  
    return fnc.apply(context, _.rest(arguments));
  };
  
  // DOM Refresh
  // -----------
  
  // Monitor a view's state, and after it has been rendered and shown
  // in the DOM, trigger a "dom:refresh" event every time it is
  // re-rendered.
  
  Marionette.MonitorDOMRefresh = function(view) {
    if (view._isDomRefreshMonitored) { return; }
    view._isDomRefreshMonitored = true;
  
    // track when the view has been shown in the DOM,
    // using a Marionette.Region (or by other means of triggering "show")
    function handleShow() {
      view._isShown = true;
      triggerDOMRefresh();
    }
  
    // track when the view has been rendered
    function handleRender() {
      view._isRendered = true;
      triggerDOMRefresh();
    }
  
    // Trigger the "dom:refresh" event and corresponding "onDomRefresh" method
    function triggerDOMRefresh() {
      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {
        Marionette.triggerMethodOn(view, 'dom:refresh', view);
      }
    }
  
    view.on({
      show: handleShow,
      render: handleRender
    });
  };
  
  /* jshint maxparams: 5 */
  
  // Bind Entity Events & Unbind Entity Events
  // -----------------------------------------
  //
  // These methods are used to bind/unbind a backbone "entity" (e.g. collection/model)
  // to methods on a target object.
  //
  // The first parameter, `target`, must have the Backbone.Events module mixed in.
  //
  // The second parameter is the `entity` (Backbone.Model, Backbone.Collection or
  // any object that has Backbone.Events mixed in) to bind the events from.
  //
  // The third parameter is a hash of { "event:name": "eventHandler" }
  // configuration. Multiple handlers can be separated by a space. A
  // function can be supplied instead of a string handler name.
  
  (function(Marionette) {
    'use strict';
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function bindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
  
        var method = target[methodName];
        if (!method) {
          throw new Marionette.Error('Method "' + methodName +
            '" was configured as an event handler, but does not exist.');
        }
  
        target.listenTo(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function bindToFunction(target, entity, evt, method) {
      target.listenTo(entity, evt, method);
    }
  
    // Bind the event to handlers specified as a string of
    // handler names on the target object
    function unbindFromStrings(target, entity, evt, methods) {
      var methodNames = methods.split(/\s+/);
  
      _.each(methodNames, function(methodName) {
        var method = target[methodName];
        target.stopListening(entity, evt, method);
      });
    }
  
    // Bind the event to a supplied callback function
    function unbindToFunction(target, entity, evt, method) {
      target.stopListening(entity, evt, method);
    }
  
    // generic looping function
    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {
      if (!entity || !bindings) { return; }
  
      // type-check bindings
      if (!_.isObject(bindings)) {
        throw new Marionette.Error({
          message: 'Bindings must be an object or function.',
          url: 'marionette.functions.html#marionettebindentityevents'
        });
      }
  
      // allow the bindings to be a function
      bindings = Marionette._getValue(bindings, target);
  
      // iterate the bindings and bind them
      _.each(bindings, function(methods, evt) {
  
        // allow for a function as the handler,
        // or a list of event names as a string
        if (_.isFunction(methods)) {
          functionCallback(target, entity, evt, methods);
        } else {
          stringCallback(target, entity, evt, methods);
        }
  
      });
    }
  
    // Export Public API
    Marionette.bindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);
    };
  
    Marionette.unbindEntityEvents = function(target, entity, bindings) {
      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);
    };
  
    // Proxy `bindEntityEvents`
    Marionette.proxyBindEntityEvents = function(entity, bindings) {
      return Marionette.bindEntityEvents(this, entity, bindings);
    };
  
    // Proxy `unbindEntityEvents`
    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {
      return Marionette.unbindEntityEvents(this, entity, bindings);
    };
  })(Marionette);
  

  // Error
  // -----
  
  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];
  
  Marionette.Error = Marionette.extend.call(Error, {
    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',
  
    constructor: function(message, options) {
      if (_.isObject(message)) {
        options = message;
        message = options.message;
      } else if (!options) {
        options = {};
      }
  
      var error = Error.call(this, message);
      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));
  
      this.captureStackTrace();
  
      if (options.url) {
        this.url = this.urlRoot + options.url;
      }
    },
  
    captureStackTrace: function() {
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, Marionette.Error);
      }
    },
  
    toString: function() {
      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');
    }
  });
  
  Marionette.Error.extend = Marionette.extend;
  
  // Callbacks
  // ---------
  
  // A simple way of managing a collection of callbacks
  // and executing them at a later point in time, using jQuery's
  // `Deferred` object.
  Marionette.Callbacks = function() {
    this._deferred = Marionette.Deferred();
    this._callbacks = [];
  };
  
  _.extend(Marionette.Callbacks.prototype, {
  
    // Add a callback to be executed. Callbacks added here are
    // guaranteed to execute, even if they are added after the
    // `run` method is called.
    add: function(callback, contextOverride) {
      var promise = _.result(this._deferred, 'promise');
  
      this._callbacks.push({cb: callback, ctx: contextOverride});
  
      promise.then(function(args) {
        if (contextOverride) { args.context = contextOverride; }
        callback.call(args.context, args.options);
      });
    },
  
    // Run all registered callbacks with the context specified.
    // Additional callbacks can be added after this has been run
    // and they will still be executed.
    run: function(options, context) {
      this._deferred.resolve({
        options: options,
        context: context
      });
    },
  
    // Resets the list of callbacks to be run, allowing the same list
    // to be run multiple times - whenever the `run` method is called.
    reset: function() {
      var callbacks = this._callbacks;
      this._deferred = Marionette.Deferred();
      this._callbacks = [];
  
      _.each(callbacks, function(cb) {
        this.add(cb.cb, cb.ctx);
      }, this);
    }
  });
  
  // Controller
  // ----------
  
  // A multi-purpose object to use as a controller for
  // modules and routers, and as a mediator for workflow
  // and coordination of other objects, views, and more.
  Marionette.Controller = function(options) {
    this.options = options || {};
  
    if (_.isFunction(this.initialize)) {
      this.initialize(this.options);
    }
  };
  
  Marionette.Controller.extend = Marionette.extend;
  
  // Controller Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Controller.prototype, Backbone.Events, {
    destroy: function() {
      Marionette._triggerMethod(this, 'before:destroy', arguments);
      Marionette._triggerMethod(this, 'destroy', arguments);
  
      this.stopListening();
      this.off();
      return this;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption
  
  });
  
  // Object
  // ------
  
  // A Base Class that other Classes should descend from.
  // Object borrows many conventions and utilities from Backbone.
  Marionette.Object = function(options) {
    this.options = _.extend({}, _.result(this, 'options'), options);
  
    this.initialize.apply(this, arguments);
  };
  
  Marionette.Object.extend = Marionette.extend;
  
  // Object Methods
  // --------------
  
  // Ensure it can trigger events with Backbone.Events
  _.extend(Marionette.Object.prototype, Backbone.Events, {
  
    //this is a noop method intended to be overridden by classes that extend from this base
    initialize: function() {},
  
    destroy: function(options) {
      options = options || {};
  
      this.triggerMethod('before:destroy', options);
      this.triggerMethod('destroy', options);
      this.stopListening();
  
      return this;
    },
  
    // Import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod,
  
    // A handy way to merge options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */
  
  // Region
  // ------
  
  // Manage the visual regions of your composite application. See
  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/
  
  Marionette.Region = Marionette.Object.extend({
    constructor: function(options) {
  
      // set options temporarily so that we can get `el`.
      // options will be overriden by Object.constructor
      this.options = options || {};
      this.el = this.getOption('el');
  
      // Handle when this.el is passed in as a $ wrapped element.
      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;
  
      if (!this.el) {
        throw new Marionette.Error({
          name: 'NoElError',
          message: 'An "el" must be specified for a region.'
        });
      }
  
      this.$el = this.getEl(this.el);
      Marionette.Object.call(this, options);
    },
  
    // Displays a backbone view instance inside of the region.
    // Handles calling the `render` method for you. Reads content
    // directly from the `el` attribute. Also calls an optional
    // `onShow` and `onDestroy` method on your view, just after showing
    // or just before destroying the view, respectively.
    // The `preventDestroy` option can be used to prevent a view from
    // the old view being destroyed on show.
    // The `forceShow` option can be used to force a view to be
    // re-rendered if it's already shown in the region.
    show: function(view, options) {
      if (!this._ensureElement()) {
        return;
      }
  
      this._ensureViewIsIntact(view);
      Marionette.MonitorDOMRefresh(view);
  
      var showOptions     = options || {};
      var isDifferentView = view !== this.currentView;
      var preventDestroy  = !!showOptions.preventDestroy;
      var forceShow       = !!showOptions.forceShow;
  
      // We are only changing the view if there is a current view to change to begin with
      var isChangingView = !!this.currentView;
  
      // Only destroy the current view if we don't want to `preventDestroy` and if
      // the view given in the first argument is different than `currentView`
      var _shouldDestroyView = isDifferentView && !preventDestroy;
  
      // Only show the view given in the first argument if it is different than
      // the current view or if we want to re-show the view. Note that if
      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.
      var _shouldShowView = isDifferentView || forceShow;
  
      if (isChangingView) {
        this.triggerMethod('before:swapOut', this.currentView, this, options);
      }
  
      if (this.currentView && isDifferentView) {
        delete this.currentView._parent;
      }
  
      if (_shouldDestroyView) {
        this.empty();
  
      // A `destroy` event is attached to the clean up manually removed views.
      // We need to detach this event when a new view is going to be shown as it
      // is no longer relevant.
      } else if (isChangingView && _shouldShowView) {
        this.currentView.off('destroy', this.empty, this);
      }
  
      if (_shouldShowView) {
  
        // We need to listen for if a view is destroyed
        // in a way other than through the region.
        // If this happens we need to remove the reference
        // to the currentView since once a view has been destroyed
        // we can not reuse it.
        view.once('destroy', this.empty, this);
  
        // make this region the view's parent,
        // It's important that this parent binding happens before rendering
        // so that any events the child may trigger during render can also be
        // triggered on the child's ancestor views
        view._parent = this;
        this._renderView(view);
  
        if (isChangingView) {
          this.triggerMethod('before:swap', view, this, options);
        }
  
        this.triggerMethod('before:show', view, this, options);
        Marionette.triggerMethodOn(view, 'before:show', view, this, options);
  
        if (isChangingView) {
          this.triggerMethod('swapOut', this.currentView, this, options);
        }
  
        // An array of views that we're about to display
        var attachedRegion = Marionette.isNodeAttached(this.el);
  
        // The views that we're about to attach to the document
        // It's important that we prevent _getNestedViews from being executed unnecessarily
        // as it's a potentially-slow method
        var displayedViews = [];
  
        var attachOptions = _.extend({
          triggerBeforeAttach: this.triggerBeforeAttach,
          triggerAttach: this.triggerAttach
        }, showOptions);
  
        if (attachedRegion && attachOptions.triggerBeforeAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews, 'before:');
        }
  
        this.attachHtml(view);
        this.currentView = view;
  
        if (attachedRegion && attachOptions.triggerAttach) {
          displayedViews = this._displayedViews(view);
          this._triggerAttach(displayedViews);
        }
  
        if (isChangingView) {
          this.triggerMethod('swap', view, this, options);
        }
  
        this.triggerMethod('show', view, this, options);
        Marionette.triggerMethodOn(view, 'show', view, this, options);
  
        return this;
      }
  
      return this;
    },
  
    triggerBeforeAttach: true,
    triggerAttach: true,
  
    _triggerAttach: function(views, prefix) {
      var eventName = (prefix || '') + 'attach';
      _.each(views, function(view) {
        Marionette.triggerMethodOn(view, eventName, view, this);
      }, this);
    },
  
    _displayedViews: function(view) {
      return _.union([view], _.result(view, '_getNestedViews') || []);
    },
  
    _renderView: function(view) {
      if (!view.supportsRenderLifecycle) {
        Marionette.triggerMethodOn(view, 'before:render', view);
      }
      view.render();
      if (!view.supportsRenderLifecycle) {
        Marionette.triggerMethodOn(view, 'render', view);
      }
    },
  
    _ensureElement: function() {
      if (!_.isObject(this.el)) {
        this.$el = this.getEl(this.el);
        this.el = this.$el[0];
      }
  
      if (!this.$el || this.$el.length === 0) {
        if (this.getOption('allowMissingEl')) {
          return false;
        } else {
          throw new Marionette.Error('An "el" ' + this.$el.selector + ' must exist in DOM');
        }
      }
      return true;
    },
  
    _ensureViewIsIntact: function(view) {
      if (!view) {
        throw new Marionette.Error({
          name: 'ViewNotValid',
          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'
        });
      }
  
      if (view.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + view.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Override this method to change how the region finds the DOM
    // element that it manages. Return a jQuery selector object scoped
    // to a provided parent el or the document if none exists.
    getEl: function(el) {
      return Backbone.$(el, Marionette._getValue(this.options.parentEl, this));
    },
  
    // Override this method to change how the new view is
    // appended to the `$el` that the region is managing
    attachHtml: function(view) {
      this.$el.contents().detach();
  
      this.el.appendChild(view.el);
    },
  
    // Destroy the current view, if there is one. If there is no
    // current view, it does nothing and returns immediately.
    empty: function(options) {
      var view = this.currentView;
  
      var emptyOptions = options || {};
      var preventDestroy  = !!emptyOptions.preventDestroy;
      // If there is no view in the region
      // we should not remove anything
      if (!view) { return this; }
  
      view.off('destroy', this.empty, this);
      this.triggerMethod('before:empty', view);
      if (!preventDestroy) {
        this._destroyView();
      }
      this.triggerMethod('empty', view);
  
      // Remove region pointer to the currentView
      delete this.currentView;
  
      if (preventDestroy) {
        this.$el.contents().detach();
      }
  
      return this;
    },
  
    // call 'destroy' or 'remove', depending on which is found
    // on the view (if showing a raw Backbone view or a Marionette View)
    _destroyView: function() {
      var view = this.currentView;
      if (view.isDestroyed) { return; }
  
      if (!view.supportsDestroyLifecycle) {
        Marionette.triggerMethodOn(view, 'before:destroy', view);
      }
      if (view.destroy) {
        view.destroy();
      } else {
        view.remove();
  
        // appending isDestroyed to raw Backbone View allows regions
        // to throw a ViewDestroyedError for this view
        view.isDestroyed = true;
      }
      if (!view.supportsDestroyLifecycle) {
        Marionette.triggerMethodOn(view, 'destroy', view);
      }
    },
  
    // Attach an existing view to the region. This
    // will not call `render` or `onShow` for the new view,
    // and will not replace the current HTML for the `el`
    // of the region.
    attachView: function(view) {
      if (this.currentView) {
        delete this.currentView._parent;
      }
      view._parent = this;
      this.currentView = view;
      return this;
    },
  
    // Checks whether a view is currently present within
    // the region. Returns `true` if there is and `false` if
    // no view is present.
    hasView: function() {
      return !!this.currentView;
    },
  
    // Reset the region by destroying any existing view and
    // clearing out the cached `$el`. The next time a view
    // is shown via this region, the region will re-query the
    // DOM for the region's `el`.
    reset: function() {
      this.empty();
  
      if (this.$el) {
        this.el = this.$el.selector;
      }
  
      delete this.$el;
      return this;
    }
  
  },
  
  // Static Methods
  {
  
    // Build an instance of a region by passing in a configuration object
    // and a default region class to use if none is specified in the config.
    //
    // The config object should either be a string as a jQuery DOM selector,
    // a Region class directly, or an object literal that specifies a selector,
    // a custom regionClass, and any options to be supplied to the region:
    //
    // ```js
    // {
    //   selector: "#foo",
    //   regionClass: MyCustomRegion,
    //   allowMissingEl: false
    // }
    // ```
    //
    buildRegion: function(regionConfig, DefaultRegionClass) {
      if (_.isString(regionConfig)) {
        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);
      }
  
      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {
        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);
      }
  
      if (_.isFunction(regionConfig)) {
        return this._buildRegionFromRegionClass(regionConfig);
      }
  
      throw new Marionette.Error({
        message: 'Improper region configuration type.',
        url: 'marionette.region.html#region-configuration-types'
      });
    },
  
    // Build the region from a string selector like '#foo-region'
    _buildRegionFromSelector: function(selector, DefaultRegionClass) {
      return new DefaultRegionClass({el: selector});
    },
  
    // Build the region from a configuration object
    // ```js
    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }
    // ```
    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {
      var RegionClass = regionConfig.regionClass || DefaultRegionClass;
      var options = _.omit(regionConfig, 'selector', 'regionClass');
  
      if (regionConfig.selector && !options.el) {
        options.el = regionConfig.selector;
      }
  
      return new RegionClass(options);
    },
  
    // Build the region directly from a given `RegionClass`
    _buildRegionFromRegionClass: function(RegionClass) {
      return new RegionClass();
    }
  });
  
  // Region Manager
  // --------------
  
  // Manage one or more related `Marionette.Region` objects.
  Marionette.RegionManager = Marionette.Controller.extend({
    constructor: function(options) {
      this._regions = {};
      this.length = 0;
  
      Marionette.Controller.call(this, options);
  
      this.addRegions(this.getOption('regions'));
    },
  
    // Add multiple regions using an object literal or a
    // function that returns an object literal, where
    // each key becomes the region name, and each value is
    // the region definition.
    addRegions: function(regionDefinitions, defaults) {
      regionDefinitions = Marionette._getValue(regionDefinitions, this, arguments);
  
      return _.reduce(regionDefinitions, function(regions, definition, name) {
        if (_.isString(definition)) {
          definition = {selector: definition};
        }
        if (definition.selector) {
          definition = _.defaults({}, definition, defaults);
        }
  
        regions[name] = this.addRegion(name, definition);
        return regions;
      }, {}, this);
    },
  
    // Add an individual region to the region manager,
    // and return the region instance
    addRegion: function(name, definition) {
      var region;
  
      if (definition instanceof Marionette.Region) {
        region = definition;
      } else {
        region = Marionette.Region.buildRegion(definition, Marionette.Region);
      }
  
      this.triggerMethod('before:add:region', name, region);
  
      region._parent = this;
      this._store(name, region);
  
      this.triggerMethod('add:region', name, region);
      return region;
    },
  
    // Get a region by name
    get: function(name) {
      return this._regions[name];
    },
  
    // Gets all the regions contained within
    // the `regionManager` instance.
    getRegions: function() {
      return _.clone(this._regions);
    },
  
    // Remove a region by name
    removeRegion: function(name) {
      var region = this._regions[name];
      this._remove(name, region);
  
      return region;
    },
  
    // Empty all regions in the region manager, and
    // remove them
    removeRegions: function() {
      var regions = this.getRegions();
      _.each(this._regions, function(region, name) {
        this._remove(name, region);
      }, this);
  
      return regions;
    },
  
    // Empty all regions in the region manager, but
    // leave them attached
    emptyRegions: function() {
      var regions = this.getRegions();
      _.invoke(regions, 'empty');
      return regions;
    },
  
    // Destroy all regions and shut down the region
    // manager entirely
    destroy: function() {
      this.removeRegions();
      return Marionette.Controller.prototype.destroy.apply(this, arguments);
    },
  
    // internal method to store regions
    _store: function(name, region) {
      if (!this._regions[name]) {
        this.length++;
      }
  
      this._regions[name] = region;
    },
  
    // internal method to remove a region
    _remove: function(name, region) {
      this.triggerMethod('before:remove:region', name, region);
      region.empty();
      region.stopListening();
  
      delete region._parent;
      delete this._regions[name];
      this.length--;
      this.triggerMethod('remove:region', name, region);
    }
  });
  
  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');
  

  // Template Cache
  // --------------
  
  // Manage templates stored in `<script>` blocks,
  // caching them for faster access.
  Marionette.TemplateCache = function(templateId) {
    this.templateId = templateId;
  };
  
  // TemplateCache object-level methods. Manage the template
  // caches from these method calls instead of creating
  // your own TemplateCache instances
  _.extend(Marionette.TemplateCache, {
    templateCaches: {},
  
    // Get the specified template by id. Either
    // retrieves the cached version, or loads it
    // from the DOM.
    get: function(templateId, options) {
      var cachedTemplate = this.templateCaches[templateId];
  
      if (!cachedTemplate) {
        cachedTemplate = new Marionette.TemplateCache(templateId);
        this.templateCaches[templateId] = cachedTemplate;
      }
  
      return cachedTemplate.load(options);
    },
  
    // Clear templates from the cache. If no arguments
    // are specified, clears all templates:
    // `clear()`
    //
    // If arguments are specified, clears each of the
    // specified templates from the cache:
    // `clear("#t1", "#t2", "...")`
    clear: function() {
      var i;
      var args = _.toArray(arguments);
      var length = args.length;
  
      if (length > 0) {
        for (i = 0; i < length; i++) {
          delete this.templateCaches[args[i]];
        }
      } else {
        this.templateCaches = {};
      }
    }
  });
  
  // TemplateCache instance methods, allowing each
  // template cache object to manage its own state
  // and know whether or not it has been loaded
  _.extend(Marionette.TemplateCache.prototype, {
  
    // Internal method to load the template
    load: function(options) {
      // Guard clause to prevent loading this template more than once
      if (this.compiledTemplate) {
        return this.compiledTemplate;
      }
  
      // Load the template and compile it
      var template = this.loadTemplate(this.templateId, options);
      this.compiledTemplate = this.compileTemplate(template, options);
  
      return this.compiledTemplate;
    },
  
    // Load a template from the DOM, by default. Override
    // this method to provide your own template retrieval
    // For asynchronous loading with AMD/RequireJS, consider
    // using a template-loader plugin as described here:
    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs
    loadTemplate: function(templateId, options) {
      var $template = Backbone.$(templateId);
  
      if (!$template.length) {
        throw new Marionette.Error({
          name: 'NoTemplateError',
          message: 'Could not find template: "' + templateId + '"'
        });
      }
      return $template.html();
    },
  
    // Pre-compile the template before caching it. Override
    // this method if you do not need to pre-compile a template
    // (JST / RequireJS for example) or if you want to change
    // the template engine used (Handebars, etc).
    compileTemplate: function(rawTemplate, options) {
      return _.template(rawTemplate, options);
    }
  });
  
  // Renderer
  // --------
  
  // Render a template with data by passing in the template
  // selector and the data to render.
  Marionette.Renderer = {
  
    // Render a template with data. The `template` parameter is
    // passed to the `TemplateCache` object to retrieve the
    // template function. Override this method to provide your own
    // custom rendering and template handling for all of Marionette.
    render: function(template, data) {
      if (!template) {
        throw new Marionette.Error({
          name: 'TemplateNotFoundError',
          message: 'Cannot render the template since its false, null or undefined.'
        });
      }
  
      var templateFunc = _.isFunction(template) ? template : Marionette.TemplateCache.get(template);
  
      return templateFunc(data);
    }
  };
  

  /* jshint maxlen: 114, nonew: false */
  // View
  // ----
  
  // The core view class that other Marionette views extend from.
  Marionette.View = Backbone.View.extend({
    isDestroyed: false,
    supportsRenderLifecycle: true,
    supportsDestroyLifecycle: true,
  
    constructor: function(options) {
      this.render = _.bind(this.render, this);
  
      options = Marionette._getValue(options, this);
  
      // this exposes view options to the view initializer
      // this is a backfill since backbone removed the assignment
      // of this.options
      // at some point however this may be removed
      this.options = _.extend({}, _.result(this, 'options'), options);
  
      this._behaviors = Marionette.Behaviors(this);
  
      Backbone.View.call(this, this.options);
  
      Marionette.MonitorDOMRefresh(this);
    },
  
    // Get the template for this view
    // instance. You can set a `template` attribute in the view
    // definition or pass a `template: "whatever"` parameter in
    // to the constructor options.
    getTemplate: function() {
      return this.getOption('template');
    },
  
    // Serialize a model by returning its attributes. Clones
    // the attributes to allow modification.
    serializeModel: function(model) {
      return model.toJSON.apply(model, _.rest(arguments));
    },
  
    // Mix in template helper methods. Looks for a
    // `templateHelpers` attribute, which can either be an
    // object literal, or a function that returns an object
    // literal. All methods and attributes from this object
    // are copies to the object passed in.
    mixinTemplateHelpers: function(target) {
      target = target || {};
      var templateHelpers = this.getOption('templateHelpers');
      templateHelpers = Marionette._getValue(templateHelpers, this);
      return _.extend(target, templateHelpers);
    },
  
    // normalize the keys of passed hash with the views `ui` selectors.
    // `{"@ui.foo": "bar"}`
    normalizeUIKeys: function(hash) {
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));
    },
  
    // normalize the values of passed hash with the views `ui` selectors.
    // `{foo: "@ui.bar"}`
    normalizeUIValues: function(hash, properties) {
      var ui = _.result(this, 'ui');
      var uiBindings = _.result(this, '_uiBindings');
      return Marionette.normalizeUIValues(hash, uiBindings || ui, properties);
    },
  
    // Configure `triggers` to forward DOM events to view
    // events. `triggers: {"click .foo": "do:foo"}`
    configureTriggers: function() {
      if (!this.triggers) { return; }
  
      // Allow `triggers` to be configured as a function
      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));
  
      // Configure the triggers, prevent default
      // action and stop propagation of DOM events
      return _.reduce(triggers, function(events, value, key) {
        events[key] = this._buildViewTrigger(value);
        return events;
      }, {}, this);
    },
  
    // Overriding Backbone.View's delegateEvents to handle
    // the `triggers`, `modelEvents`, and `collectionEvents` configuration
    delegateEvents: function(events) {
      this._delegateDOMEvents(events);
      this.bindEntityEvents(this.model, this.getOption('modelEvents'));
      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // internal method to delegate DOM events and triggers
    _delegateDOMEvents: function(eventsArg) {
      var events = Marionette._getValue(eventsArg || this.events, this);
  
      // normalize ui keys
      events = this.normalizeUIKeys(events);
      if (_.isUndefined(eventsArg)) {this.events = events;}
  
      var combinedEvents = {};
  
      // look up if this view has behavior events
      var behaviorEvents = _.result(this, 'behaviorEvents') || {};
      var triggers = this.configureTriggers();
      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};
  
      // behavior events will be overriden by view events and or triggers
      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);
  
      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);
    },
  
    // Overriding Backbone.View's undelegateEvents to handle unbinding
    // the `triggers`, `modelEvents`, and `collectionEvents` config
    undelegateEvents: function() {
      Backbone.View.prototype.undelegateEvents.apply(this, arguments);
  
      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));
      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));
  
      _.each(this._behaviors, function(behavior) {
        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));
        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));
      }, this);
  
      return this;
    },
  
    // Internal helper method to verify whether the view hasn't been destroyed
    _ensureViewIsIntact: function() {
      if (this.isDestroyed) {
        throw new Marionette.Error({
          name: 'ViewDestroyedError',
          message: 'View (cid: "' + this.cid + '") has already been destroyed and cannot be used.'
        });
      }
    },
  
    // Default `destroy` implementation, for removing a view from the
    // DOM and unbinding it. Regions will call this method
    // for you. You can specify an `onDestroy` method in your view to
    // add custom code that is called after the view is destroyed.
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      var args = _.toArray(arguments);
  
      this.triggerMethod.apply(this, ['before:destroy'].concat(args));
  
      // mark as destroyed before doing the actual destroy, to
      // prevent infinite loops within "destroy" event handlers
      // that are trying to destroy other views
      this.isDestroyed = true;
      this.triggerMethod.apply(this, ['destroy'].concat(args));
  
      // unbind UI elements
      this.unbindUIElements();
  
      this.isRendered = false;
  
      // remove the view from the DOM
      this.remove();
  
      // Call destroy on each behavior after
      // destroying the view.
      // This unbinds event listeners
      // that behaviors have registered for.
      _.invoke(this._behaviors, 'destroy', args);
  
      return this;
    },
  
    bindUIElements: function() {
      this._bindUIElements();
      _.invoke(this._behaviors, this._bindUIElements);
    },
  
    // This method binds the elements specified in the "ui" hash inside the view's code with
    // the associated jQuery selectors.
    _bindUIElements: function() {
      if (!this.ui) { return; }
  
      // store the ui hash in _uiBindings so they can be reset later
      // and so re-rendering the view will be able to find the bindings
      if (!this._uiBindings) {
        this._uiBindings = this.ui;
      }
  
      // get the bindings result, as a function or otherwise
      var bindings = _.result(this, '_uiBindings');
  
      // empty the ui so we don't have anything to start with
      this.ui = {};
  
      // bind each of the selectors
      _.each(bindings, function(selector, key) {
        this.ui[key] = this.$(selector);
      }, this);
    },
  
    // This method unbinds the elements specified in the "ui" hash
    unbindUIElements: function() {
      this._unbindUIElements();
      _.invoke(this._behaviors, this._unbindUIElements);
    },
  
    _unbindUIElements: function() {
      if (!this.ui || !this._uiBindings) { return; }
  
      // delete all of the existing ui bindings
      _.each(this.ui, function($el, name) {
        delete this.ui[name];
      }, this);
  
      // reset the ui element to the original bindings configuration
      this.ui = this._uiBindings;
      delete this._uiBindings;
    },
  
    // Internal method to create an event handler for a given `triggerDef` like
    // 'click:foo'
    _buildViewTrigger: function(triggerDef) {
  
      var options = _.defaults({}, triggerDef, {
        preventDefault: true,
        stopPropagation: true
      });
  
      var eventName = _.isObject(triggerDef) ? options.event : triggerDef;
  
      return function(e) {
        if (e) {
          if (e.preventDefault && options.preventDefault) {
            e.preventDefault();
          }
  
          if (e.stopPropagation && options.stopPropagation) {
            e.stopPropagation();
          }
        }
  
        var args = {
          view: this,
          model: this.model,
          collection: this.collection
        };
  
        this.triggerMethod(eventName, args);
      };
    },
  
    setElement: function() {
      var ret = Backbone.View.prototype.setElement.apply(this, arguments);
  
      // proxy behavior $el to the view's $el.
      // This is needed because a view's $el proxy
      // is not set until after setElement is called.
      _.invoke(this._behaviors, 'proxyViewProperties', this);
  
      return ret;
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: function() {
      var ret = Marionette._triggerMethod(this, arguments);
  
      this._triggerEventOnBehaviors(arguments);
      this._triggerEventOnParentLayout(arguments[0], _.rest(arguments));
  
      return ret;
    },
  
    _triggerEventOnBehaviors: function(args) {
      var triggerMethod = Marionette._triggerMethod;
      var behaviors = this._behaviors;
      // Use good ol' for as this is a very hot function
      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {
        triggerMethod(behaviors[i], args);
      }
    },
  
    _triggerEventOnParentLayout: function(eventName, args) {
      var layoutView = this._parentLayoutView();
      if (!layoutView) {
        return;
      }
  
      // invoke triggerMethod on parent view
      var eventPrefix = Marionette.getOption(layoutView, 'childViewEventPrefix');
      var prefixedEventName = eventPrefix + ':' + eventName;
      var callArgs = [this].concat(args);
  
      Marionette._triggerMethod(layoutView, prefixedEventName, callArgs);
  
      // call the parent view's childEvents handler
      var childEvents = Marionette.getOption(layoutView, 'childEvents');
  
      // since childEvents can be an object or a function use Marionette._getValue
      // to handle the abstaction for us.
      childEvents = Marionette._getValue(childEvents, layoutView);
      var normalizedChildEvents = layoutView.normalizeMethods(childEvents);
  
      if (normalizedChildEvents && _.isFunction(normalizedChildEvents[eventName])) {
        normalizedChildEvents[eventName].apply(layoutView, callArgs);
      }
    },
  
    // This method returns any views that are immediate
    // children of this view
    _getImmediateChildren: function() {
      return [];
    },
  
    // Returns an array of every nested view within this view
    _getNestedViews: function() {
      var children = this._getImmediateChildren();
  
      if (!children.length) { return children; }
  
      return _.reduce(children, function(memo, view) {
        if (!view._getNestedViews) { return memo; }
        return memo.concat(view._getNestedViews());
      }, children);
    },
  
    // Walk the _parent tree until we find a layout view (if one exists).
    // Returns the parent layout view hierarchically closest to this view.
    _parentLayoutView: function() {
      var parent  = this._parent;
  
      while (parent) {
        if (parent instanceof Marionette.LayoutView) {
          return parent;
        }
        parent = parent._parent;
      }
    },
  
    // Imports the "normalizeMethods" to transform hashes of
    // events=>function references/names to a hash of events=>function references
    normalizeMethods: Marionette.normalizeMethods,
  
    // A handy way to merge passed-in options onto the instance
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    // Proxy `bindEntityEvents` to enable binding view's events from another entity.
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Item View
  // ---------
  
  // A single item view implementation that contains code for rendering
  // with underscore.js templates, serializing the view's model or collection,
  // and calling several methods on extended views, such as `onRender`.
  Marionette.ItemView = Marionette.View.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.View.prototype.constructor which allows overriding
    constructor: function() {
      Marionette.View.apply(this, arguments);
    },
  
    // Serialize the model or collection for the view. If a model is
    // found, the view's `serializeModel` is called. If a collection is found,
    // each model in the collection is serialized by calling
    // the view's `serializeCollection` and put into an `items` array in
    // the resulting data. If both are found, defaults to the model.
    // You can override the `serializeData` method in your own view definition,
    // to provide custom serialization for your view's data.
    serializeData: function() {
      if (!this.model && !this.collection) {
        return {};
      }
  
      var args = [this.model || this.collection];
      if (arguments.length) {
        args.push.apply(args, arguments);
      }
  
      if (this.model) {
        return this.serializeModel.apply(this, args);
      } else {
        return {
          items: this.serializeCollection.apply(this, args)
        };
      }
    },
  
    // Serialize a collection by serializing each of its models.
    serializeCollection: function(collection) {
      return collection.toJSON.apply(collection, _.rest(arguments));
    },
  
    // Render the view, defaulting to underscore.js templates.
    // You can override this in your view definition to provide
    // a very specific rendering for your view. In general, though,
    // you should override the `Marionette.Renderer` object to
    // change how Marionette renders views.
    render: function() {
      this._ensureViewIsIntact();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this.isRendered = true;
      this.bindUIElements();
  
      this.triggerMethod('render', this);
  
      return this;
    },
  
    // Internal method to render the template with the serialized data
    // and template helpers via the `Marionette.Renderer` object.
    // Throws an `UndefinedTemplateError` error if the template is
    // any falsely value but literal `false`.
    _renderTemplate: function() {
      var template = this.getTemplate();
  
      // Allow template-less item views
      if (template === false) {
        return;
      }
  
      if (!template) {
        throw new Marionette.Error({
          name: 'UndefinedTemplateError',
          message: 'Cannot render the template since it is null or undefined.'
        });
      }
  
      // Add in entity data and template helpers
      var data = this.mixinTemplateHelpers(this.serializeData());
  
      // Render and add to el
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      return this;
    },
  
    // Attaches the content of a given view.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    }
  });
  
  /* jshint maxstatements: 20, maxcomplexity: 7 */
  
  // Collection View
  // ---------------
  
  // A view that iterates over a Backbone.Collection
  // and renders an individual child view for each model.
  Marionette.CollectionView = Marionette.View.extend({
  
    // used as the prefix for child view events
    // that are forwarded through the collectionview
    childViewEventPrefix: 'childview',
  
    // flag for maintaining the sorted order of the collection
    sort: true,
  
    // constructor
    // option to pass `{sort: false}` to prevent the `CollectionView` from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    //
    // option to pass `{comparator: compFunction()}` to allow the `CollectionView`
    // to use a custom sort order for the collection.
    constructor: function(options) {
      this.once('render', this._initialEvents);
      this._initChildViewStorage();
  
      Marionette.View.apply(this, arguments);
  
      this.on({
        'before:show':   this._onBeforeShowCalled,
        'show':          this._onShowCalled,
        'before:attach': this._onBeforeAttachCalled,
        'attach':        this._onAttachCalled
      });
      this.initRenderBuffer();
    },
  
    // Instead of inserting elements one by one into the page,
    // it's much more performant to insert elements into a document
    // fragment and then insert that document fragment into the page
    initRenderBuffer: function() {
      this._bufferedChildren = [];
    },
  
    startBuffering: function() {
      this.initRenderBuffer();
      this.isBuffering = true;
    },
  
    endBuffering: function() {
      // Only trigger attach if already shown and attached, otherwise Region#show() handles this.
      var canTriggerAttach = this._isShown && Marionette.isNodeAttached(this.el);
      var nestedViews;
  
      this.isBuffering = false;
  
      if (this._isShown) {
        this._triggerMethodMany(this._bufferedChildren, this, 'before:show');
      }
      if (canTriggerAttach && this._triggerBeforeAttach) {
        nestedViews = this._getNestedViews();
        this._triggerMethodMany(nestedViews, this, 'before:attach');
      }
  
      this.attachBuffer(this, this._createBuffer());
  
      if (canTriggerAttach && this._triggerAttach) {
        nestedViews = this._getNestedViews();
        this._triggerMethodMany(nestedViews, this, 'attach');
      }
      if (this._isShown) {
        this._triggerMethodMany(this._bufferedChildren, this, 'show');
      }
      this.initRenderBuffer();
    },
  
    _triggerMethodMany: function(targets, source, eventName) {
      var args = _.drop(arguments, 3);
  
      _.each(targets, function(target) {
        Marionette.triggerMethodOn.apply(target, [target, eventName, target, source].concat(args));
      });
    },
  
    // Configured the initial events that the collection view
    // binds to.
    _initialEvents: function() {
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this.render);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Handle a child added to the collection
    _onCollectionAdd: function(child, collection, opts) {
      // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2
      var index = opts.at !== undefined && (opts.index || collection.indexOf(child));
  
      // When filtered or when there is no initial index, calculate index.
      if (this.getOption('filter') || index === false) {
        index = _.indexOf(this._filteredSortedModels(index), child);
      }
  
      if (this._shouldAddChild(child, index)) {
        this.destroyEmptyView();
        var ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }
    },
  
    // get the child view by model it holds, and remove it
    _onCollectionRemove: function(model) {
      var view = this.children.findByModel(model);
      this.removeChildView(view);
      this.checkEmpty();
    },
  
    _onBeforeShowCalled: function() {
      // Reset attach event flags at the top of the Region#show() event lifecycle; if the Region's
      // show() options permit onBeforeAttach/onAttach events, these flags will be set true again.
      this._triggerBeforeAttach = this._triggerAttach = false;
      this.children.each(function(childView) {
        Marionette.triggerMethodOn(childView, 'before:show', childView);
      });
    },
  
    _onShowCalled: function() {
      this.children.each(function(childView) {
        Marionette.triggerMethodOn(childView, 'show', childView);
      });
    },
  
    // If during Region#show() onBeforeAttach was fired, continue firing it for child views
    _onBeforeAttachCalled: function() {
      this._triggerBeforeAttach = true;
    },
  
    // If during Region#show() onAttach was fired, continue firing it for child views
    _onAttachCalled: function() {
      this._triggerAttach = true;
    },
  
    // Render children views. Override this method to
    // provide your own implementation of a render function for
    // the collection view.
    render: function() {
      this._ensureViewIsIntact();
      this.triggerMethod('before:render', this);
      this._renderChildren();
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    // Reorder DOM after sorting. When your element's rendering
    // do not use their index, you can pass reorderOnSort: true
    // to only reorder the DOM after a sort instead of rendering
    // all the collectionView
    reorder: function() {
      var children = this.children;
      var models = this._filteredSortedModels();
  
      if (!models.length && this._showingEmptyView) { return this; }
  
      var anyModelsAdded = _.some(models, function(model) {
        return !children.findByModel(model);
      });
  
      // If there are any new models added due to filtering
      // We need to add child views
      // So render as normal
      if (anyModelsAdded) {
        this.render();
      } else {
        // get the DOM nodes in the same order as the models
        var elsToReorder = _.map(models, function(model, index) {
          var view = children.findByModel(model);
          view._index = index;
          return view.el;
        });
  
        // find the views that were children before but arent in this new ordering
        var filteredOutViews = children.filter(function(view) {
          return !_.contains(elsToReorder, view.el);
        });
  
        this.triggerMethod('before:reorder');
  
        // since append moves elements that are already in the DOM,
        // appending the elements will effectively reorder them
        this._appendReorderedChildren(elsToReorder);
  
        // remove any views that have been filtered out
        _.each(filteredOutViews, this.removeChildView, this);
        this.checkEmpty();
  
        this.triggerMethod('reorder');
      }
    },
  
    // Render view after sorting. Override this method to
    // change how the view renders after a `sort` on the collection.
    // An example of this would be to only `renderChildren` in a `CompositeView`
    // rather than the full view.
    resortView: function() {
      if (Marionette.getOption(this, 'reorderOnSort')) {
        this.reorder();
      } else {
        this.render();
      }
    },
  
    // Internal method. This checks for any changes in the order of the collection.
    // If the index of any view doesn't match, it will render.
    _sortViews: function() {
      var models = this._filteredSortedModels();
  
      // check for any changes in sort order of views
      var orderChanged = _.find(models, function(item, index) {
        var view = this.children.findByModel(item);
        return !view || view._index !== index;
      }, this);
  
      if (orderChanged) {
        this.resortView();
      }
    },
  
    // Internal reference to what index a `emptyView` is.
    _emptyViewIndex: -1,
  
    // Internal method. Separated so that CompositeView can append to the childViewContainer
    // if necessary
    _appendReorderedChildren: function(children) {
      this.$el.append(children);
    },
  
    // Internal method. Separated so that CompositeView can have
    // more control over events being triggered, around the rendering
    // process
    _renderChildren: function() {
      this.destroyEmptyView();
      this.destroyChildren({checkEmpty: false});
  
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      } else {
        this.triggerMethod('before:render:collection', this);
        this.startBuffering();
        this.showCollection();
        this.endBuffering();
        this.triggerMethod('render:collection', this);
  
        // If we have shown children and none have passed the filter, show the empty view
        if (this.children.isEmpty() && this.getOption('filter')) {
          this.showEmptyView();
        }
      }
    },
  
    // Internal method to loop through collection and show each child view.
    showCollection: function() {
      var ChildView;
  
      var models = this._filteredSortedModels();
  
      _.each(models, function(child, index) {
        ChildView = this.getChildView(child);
        this.addChild(child, ChildView, index);
      }, this);
    },
  
    // Allow the collection to be sorted by a custom view comparator
    _filteredSortedModels: function(addedAt) {
      var viewComparator = this.getViewComparator();
      var models = this.collection.models;
      addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);
  
      if (viewComparator) {
        var addedModel;
        // Preserve `at` location, even for a sorted view
        if (addedAt) {
          addedModel = models[addedAt];
          models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));
        }
        models = this._sortModelsBy(models, viewComparator);
        if (addedModel) {
          models.splice(addedAt, 0, addedModel);
        }
      }
  
      // Filter after sorting in case the filter uses the index
      if (this.getOption('filter')) {
        models = _.filter(models, function(model, index) {
          return this._shouldAddChild(model, index);
        }, this);
      }
  
      return models;
    },
  
    _sortModelsBy: function(models, comparator) {
      if (typeof comparator === 'string') {
        return _.sortBy(models, function(model) {
          return model.get(comparator);
        }, this);
      } else if (comparator.length === 1) {
        return _.sortBy(models, comparator, this);
      } else {
        return models.sort(_.bind(comparator, this));
      }
    },
  
    // Internal method to show an empty view in place of
    // a collection of child views, when the collection is empty
    showEmptyView: function() {
      var EmptyView = this.getEmptyView();
  
      if (EmptyView && !this._showingEmptyView) {
        this.triggerMethod('before:render:empty');
  
        this._showingEmptyView = true;
        var model = new Backbone.Model();
        this.addEmptyView(model, EmptyView);
  
        this.triggerMethod('render:empty');
      }
    },
  
    // Internal method to destroy an existing emptyView instance
    // if one exists. Called when a collection view has been
    // rendered empty, and then a child is added to the collection.
    destroyEmptyView: function() {
      if (this._showingEmptyView) {
        this.triggerMethod('before:remove:empty');
  
        this.destroyChildren();
        delete this._showingEmptyView;
  
        this.triggerMethod('remove:empty');
      }
    },
  
    // Retrieve the empty view class
    getEmptyView: function() {
      return this.getOption('emptyView');
    },
  
    // Render and show the emptyView. Similar to addChild method
    // but "add:child" events are not fired, and the event from
    // emptyView are not forwarded
    addEmptyView: function(child, EmptyView) {
      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or
      // Region#show() handles this.
      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);
      var nestedViews;
  
      // get the emptyViewOptions, falling back to childViewOptions
      var emptyViewOptions = this.getOption('emptyViewOptions') ||
                            this.getOption('childViewOptions');
  
      if (_.isFunction(emptyViewOptions)) {
        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);
      }
  
      // build the empty view
      var view = this.buildChildView(child, EmptyView, emptyViewOptions);
  
      view._parent = this;
  
      // Proxy emptyView events
      this.proxyChildEvents(view);
  
      view.once('render', function() {
        // trigger the 'before:show' event on `view` if the collection view has already been shown
        if (this._isShown) {
          Marionette.triggerMethodOn(view, 'before:show', view);
        }
  
        // Trigger `before:attach` following `render` to avoid adding logic and event triggers
        // to public method `renderChildView()`.
        if (canTriggerAttach && this._triggerBeforeAttach) {
          nestedViews = this._getViewAndNested(view);
          this._triggerMethodMany(nestedViews, this, 'before:attach');
        }
      }, this);
  
      // Store the `emptyView` like a `childView` so we can properly remove and/or close it later
      this.children.add(view);
      this.renderChildView(view, this._emptyViewIndex);
  
      // Trigger `attach`
      if (canTriggerAttach && this._triggerAttach) {
        nestedViews = this._getViewAndNested(view);
        this._triggerMethodMany(nestedViews, this, 'attach');
      }
      // call the 'show' method if the collection view has already been shown
      if (this._isShown) {
        Marionette.triggerMethodOn(view, 'show', view);
      }
    },
  
    // Retrieve the `childView` class, either from `this.options.childView`
    // or from the `childView` in the object definition. The "options"
    // takes precedence.
    // This method receives the model that will be passed to the instance
    // created from this `childView`. Overriding methods may use the child
    // to determine what `childView` class to return.
    getChildView: function(child) {
      var childView = this.getOption('childView');
  
      if (!childView) {
        throw new Marionette.Error({
          name: 'NoChildViewError',
          message: 'A "childView" must be specified'
        });
      }
  
      return childView;
    },
  
    // Render the child's view and add it to the
    // HTML for the collection view at a given index.
    // This will also update the indices of later views in the collection
    // in order to keep the children in sync with the collection.
    addChild: function(child, ChildView, index) {
      var childViewOptions = this.getOption('childViewOptions');
      childViewOptions = Marionette._getValue(childViewOptions, this, [child, index]);
  
      var view = this.buildChildView(child, ChildView, childViewOptions);
  
      // increment indices of views after this one
      this._updateIndices(view, true, index);
  
      this.triggerMethod('before:add:child', view);
      this._addChildView(view, index);
      this.triggerMethod('add:child', view);
  
      view._parent = this;
  
      return view;
    },
  
    // Internal method. This decrements or increments the indices of views after the
    // added/removed view to keep in sync with the collection.
    _updateIndices: function(view, increment, index) {
      if (!this.getOption('sort')) {
        return;
      }
  
      if (increment) {
        // assign the index to the view
        view._index = index;
      }
  
      // update the indexes of views after this one
      this.children.each(function(laterView) {
        if (laterView._index >= view._index) {
          laterView._index += increment ? 1 : -1;
        }
      });
    },
  
    // Internal Method. Add the view to children and render it at
    // the given index.
    _addChildView: function(view, index) {
      // Only trigger attach if already shown, attached, and not buffering, otherwise endBuffer() or
      // Region#show() handles this.
      var canTriggerAttach = this._isShown && !this.isBuffering && Marionette.isNodeAttached(this.el);
      var nestedViews;
  
      // set up the child view event forwarding
      this.proxyChildEvents(view);
  
      view.once('render', function() {
        // trigger the 'before:show' event on `view` if the collection view has already been shown
        if (this._isShown && !this.isBuffering) {
          Marionette.triggerMethodOn(view, 'before:show', view);
        }
  
        // Trigger `before:attach` following `render` to avoid adding logic and event triggers
        // to public method `renderChildView()`.
        if (canTriggerAttach && this._triggerBeforeAttach) {
          nestedViews = this._getViewAndNested(view);
          this._triggerMethodMany(nestedViews, this, 'before:attach');
        }
      }, this);
  
      // Store the child view itself so we can properly remove and/or destroy it later
      this.children.add(view);
      this.renderChildView(view, index);
  
      // Trigger `attach`
      if (canTriggerAttach && this._triggerAttach) {
        nestedViews = this._getViewAndNested(view);
        this._triggerMethodMany(nestedViews, this, 'attach');
      }
      // Trigger `show`
      if (this._isShown && !this.isBuffering) {
        Marionette.triggerMethodOn(view, 'show', view);
      }
    },
  
    // render the child view
    renderChildView: function(view, index) {
      if (!view.supportsRenderLifecycle) {
        Marionette.triggerMethodOn(view, 'before:render', view);
      }
      view.render();
      if (!view.supportsRenderLifecycle) {
        Marionette.triggerMethodOn(view, 'render', view);
      }
      this.attachHtml(this, view, index);
      return view;
    },
  
    // Build a `childView` for a model in the collection.
    buildChildView: function(child, ChildViewClass, childViewOptions) {
      var options = _.extend({model: child}, childViewOptions);
      var childView = new ChildViewClass(options);
      Marionette.MonitorDOMRefresh(childView);
      return childView;
    },
  
    // Remove the child view and destroy it.
    // This function also updates the indices of
    // later views in the collection in order to keep
    // the children in sync with the collection.
    removeChildView: function(view) {
      if (!view) { return view; }
  
      this.triggerMethod('before:remove:child', view);
  
      if (!view.supportsDestroyLifecycle) {
        Marionette.triggerMethodOn(view, 'before:destroy', view);
      }
      // call 'destroy' or 'remove', depending on which is found
      if (view.destroy) {
        view.destroy();
      } else {
        view.remove();
      }
      if (!view.supportsDestroyLifecycle) {
        Marionette.triggerMethodOn(view, 'destroy', view);
      }
  
      delete view._parent;
      this.stopListening(view);
      this.children.remove(view);
      this.triggerMethod('remove:child', view);
  
      // decrement the index of views after this one
      this._updateIndices(view, false);
  
      return view;
    },
  
    // check if the collection is empty
    isEmpty: function() {
      return !this.collection || this.collection.length === 0;
    },
  
    // If empty, show the empty view
    checkEmpty: function() {
      if (this.isEmpty(this.collection)) {
        this.showEmptyView();
      }
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(collectionView, buffer) {
      collectionView.$el.append(buffer);
    },
  
    // Create a fragment buffer from the currently buffered children
    _createBuffer: function() {
      var elBuffer = document.createDocumentFragment();
      _.each(this._bufferedChildren, function(b) {
        elBuffer.appendChild(b.el);
      });
      return elBuffer;
    },
  
    // Append the HTML to the collection's `el`.
    // Override this method to do something other
    // than `.append`.
    attachHtml: function(collectionView, childView, index) {
      if (collectionView.isBuffering) {
        // buffering happens on reset events and initial renders
        // in order to reduce the number of inserts into the
        // document, which are expensive.
        collectionView._bufferedChildren.splice(index, 0, childView);
      } else {
        // If we've already rendered the main collection, append
        // the new child into the correct order if we need to. Otherwise
        // append to the end.
        if (!collectionView._insertBefore(childView, index)) {
          collectionView._insertAfter(childView);
        }
      }
    },
  
    // Internal method. Check whether we need to insert the view into
    // the correct position.
    _insertBefore: function(childView, index) {
      var currentView;
      var findPosition = this.getOption('sort') && (index < this.children.length - 1);
      if (findPosition) {
        // Find the view after this one
        currentView = this.children.find(function(view) {
          return view._index === index + 1;
        });
      }
  
      if (currentView) {
        currentView.$el.before(childView.el);
        return true;
      }
  
      return false;
    },
  
    // Internal method. Append a view to the end of the $el
    _insertAfter: function(childView) {
      this.$el.append(childView.el);
    },
  
    // Internal method to set up the `children` object for
    // storing all of the child views
    _initChildViewStorage: function() {
      this.children = new Backbone.ChildViewContainer();
    },
  
    // Handle cleanup and other destroying needs for the collection of views
    destroy: function() {
      if (this.isDestroyed) { return this; }
  
      this.triggerMethod('before:destroy:collection');
      this.destroyChildren({checkEmpty: false});
      this.triggerMethod('destroy:collection');
  
      return Marionette.View.prototype.destroy.apply(this, arguments);
    },
  
    // Destroy the child views that this collection view
    // is holding on to, if any
    destroyChildren: function(options) {
      var destroyOptions = options || {};
      var shouldCheckEmpty = true;
      var childViews = this.children.map(_.identity);
  
      if (!_.isUndefined(destroyOptions.checkEmpty)) {
        shouldCheckEmpty = destroyOptions.checkEmpty;
      }
  
      this.children.each(this.removeChildView, this);
  
      if (shouldCheckEmpty) {
        this.checkEmpty();
      }
      return childViews;
    },
  
    // Return true if the given child should be shown
    // Return false otherwise
    // The filter will be passed (child, index, collection)
    // Where
    //  'child' is the given model
    //  'index' is the index of that model in the collection
    //  'collection' is the collection referenced by this CollectionView
    _shouldAddChild: function(child, index) {
      var filter = this.getOption('filter');
      return !_.isFunction(filter) || filter.call(this, child, index, this.collection);
    },
  
    // Set up the child view event forwarding. Uses a "childview:"
    // prefix in front of all forwarded events.
    proxyChildEvents: function(view) {
      var prefix = this.getOption('childViewEventPrefix');
  
      // Forward all child view events through the parent,
      // prepending "childview:" to the event name
      this.listenTo(view, 'all', function() {
        var args = _.toArray(arguments);
        var rootEvent = args[0];
        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));
  
        args[0] = prefix + ':' + rootEvent;
        args.splice(1, 0, view);
  
        // call collectionView childEvent if defined
        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {
          childEvents[rootEvent].apply(this, args.slice(1));
        }
  
        this.triggerMethod.apply(this, args);
      });
    },
  
    _getImmediateChildren: function() {
      return _.values(this.children._views);
    },
  
    _getViewAndNested: function(view) {
      // This will not fail on Backbone.View which does not have #_getNestedViews.
      return [view].concat(_.result(view, '_getNestedViews') || []);
    },
  
    getViewComparator: function() {
      return this.getOption('viewComparator');
    }
  });
  
  /* jshint maxstatements: 17, maxlen: 117 */
  
  // Composite View
  // --------------
  
  // Used for rendering a branch-leaf, hierarchical structure.
  // Extends directly from CollectionView and also renders an
  // a child view as `modelView`, for the top leaf
  Marionette.CompositeView = Marionette.CollectionView.extend({
  
    // Setting up the inheritance chain which allows changes to
    // Marionette.CollectionView.prototype.constructor which allows overriding
    // option to pass '{sort: false}' to prevent the CompositeView from
    // maintaining the sorted order of the collection.
    // This will fallback onto appending childView's to the end.
    constructor: function() {
      Marionette.CollectionView.apply(this, arguments);
    },
  
    // Configured the initial events that the composite view
    // binds to. Override this method to prevent the initial
    // events, or to add your own initial events.
    _initialEvents: function() {
  
      // Bind only after composite view is rendered to avoid adding child views
      // to nonexistent childViewContainer
  
      if (this.collection) {
        this.listenTo(this.collection, 'add', this._onCollectionAdd);
        this.listenTo(this.collection, 'remove', this._onCollectionRemove);
        this.listenTo(this.collection, 'reset', this._renderChildren);
  
        if (this.getOption('sort')) {
          this.listenTo(this.collection, 'sort', this._sortViews);
        }
      }
    },
  
    // Retrieve the `childView` to be used when rendering each of
    // the items in the collection. The default is to return
    // `this.childView` or Marionette.CompositeView if no `childView`
    // has been defined
    getChildView: function(child) {
      var childView = this.getOption('childView') || this.constructor;
  
      return childView;
    },
  
    // Serialize the model for the view.
    // You can override the `serializeData` method in your own view
    // definition, to provide custom serialization for your view's data.
    serializeData: function() {
      var data = {};
  
      if (this.model) {
        data = _.partial(this.serializeModel, this.model).apply(this, arguments);
      }
  
      return data;
    },
  
    // Renders the model and the collection.
    render: function() {
      this._ensureViewIsIntact();
      this._isRendering = true;
      this.resetChildViewContainer();
  
      this.triggerMethod('before:render', this);
  
      this._renderTemplate();
      this._renderChildren();
  
      this._isRendering = false;
      this.isRendered = true;
      this.triggerMethod('render', this);
      return this;
    },
  
    _renderChildren: function() {
      if (this.isRendered || this._isRendering) {
        Marionette.CollectionView.prototype._renderChildren.call(this);
      }
    },
  
    // Render the root template that the children
    // views are appended to
    _renderTemplate: function() {
      var data = {};
      data = this.serializeData();
      data = this.mixinTemplateHelpers(data);
  
      this.triggerMethod('before:render:template');
  
      var template = this.getTemplate();
      var html = Marionette.Renderer.render(template, data, this);
      this.attachElContent(html);
  
      // the ui bindings is done here and not at the end of render since they
      // will not be available until after the model is rendered, but should be
      // available before the collection is rendered.
      this.bindUIElements();
      this.triggerMethod('render:template');
    },
  
    // Attaches the content of the root.
    // This method can be overridden to optimize rendering,
    // or to render in a non standard way.
    //
    // For example, using `innerHTML` instead of `$el.html`
    //
    // ```js
    // attachElContent: function(html) {
    //   this.el.innerHTML = html;
    //   return this;
    // }
    // ```
    attachElContent: function(html) {
      this.$el.html(html);
  
      return this;
    },
  
    // You might need to override this if you've overridden attachHtml
    attachBuffer: function(compositeView, buffer) {
      var $container = this.getChildViewContainer(compositeView);
      $container.append(buffer);
    },
  
    // Internal method. Append a view to the end of the $el.
    // Overidden from CollectionView to ensure view is appended to
    // childViewContainer
    _insertAfter: function(childView) {
      var $container = this.getChildViewContainer(this, childView);
      $container.append(childView.el);
    },
  
    // Internal method. Append reordered childView'.
    // Overidden from CollectionView to ensure reordered views
    // are appended to childViewContainer
    _appendReorderedChildren: function(children) {
      var $container = this.getChildViewContainer(this);
      $container.append(children);
    },
  
    // Internal method to ensure an `$childViewContainer` exists, for the
    // `attachHtml` method to use.
    getChildViewContainer: function(containerView, childView) {
      if (!!containerView.$childViewContainer) {
        return containerView.$childViewContainer;
      }
  
      var container;
      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');
      if (childViewContainer) {
  
        var selector = Marionette._getValue(childViewContainer, containerView);
  
        if (selector.charAt(0) === '@' && containerView.ui) {
          container = containerView.ui[selector.substr(4)];
        } else {
          container = containerView.$(selector);
        }
  
        if (container.length <= 0) {
          throw new Marionette.Error({
            name: 'ChildViewContainerMissingError',
            message: 'The specified "childViewContainer" was not found: ' + containerView.childViewContainer
          });
        }
  
      } else {
        container = containerView.$el;
      }
  
      containerView.$childViewContainer = container;
      return container;
    },
  
    // Internal method to reset the `$childViewContainer` on render
    resetChildViewContainer: function() {
      if (this.$childViewContainer) {
        this.$childViewContainer = undefined;
      }
    }
  });
  
  // Layout View
  // -----------
  
  // Used for managing application layoutViews, nested layoutViews and
  // multiple regions within an application or sub-application.
  //
  // A specialized view class that renders an area of HTML and then
  // attaches `Region` instances to the specified `regions`.
  // Used for composite view management and sub-application areas.
  Marionette.LayoutView = Marionette.ItemView.extend({
    regionClass: Marionette.Region,
  
    options: {
      destroyImmediate: false
    },
  
    // used as the prefix for child view events
    // that are forwarded through the layoutview
    childViewEventPrefix: 'childview',
  
    // Ensure the regions are available when the `initialize` method
    // is called.
    constructor: function(options) {
      options = options || {};
  
      this._firstRender = true;
      this._initializeRegions(options);
  
      Marionette.ItemView.call(this, options);
    },
  
    // LayoutView's render will use the existing region objects the
    // first time it is called. Subsequent calls will destroy the
    // views that the regions are showing and then reset the `el`
    // for the regions to the newly rendered DOM elements.
    render: function() {
      this._ensureViewIsIntact();
  
      if (this._firstRender) {
        // if this is the first render, don't do anything to
        // reset the regions
        this._firstRender = false;
      } else {
        // If this is not the first render call, then we need to
        // re-initialize the `el` for each region
        this._reInitializeRegions();
      }
  
      return Marionette.ItemView.prototype.render.apply(this, arguments);
    },
  
    // Handle destroying regions, and then destroy the view itself.
    destroy: function() {
      if (this.isDestroyed) { return this; }
      // #2134: remove parent element before destroying the child views, so
      // removing the child views doesn't retrigger repaints
      if (this.getOption('destroyImmediate') === true) {
        this.$el.remove();
      }
      this.regionManager.destroy();
      return Marionette.ItemView.prototype.destroy.apply(this, arguments);
    },
  
    showChildView: function(regionName, view, options) {
      var region = this.getRegion(regionName);
      return region.show.apply(region, _.rest(arguments));
    },
  
    getChildView: function(regionName) {
      return this.getRegion(regionName).currentView;
    },
  
    // Add a single region, by name, to the layoutView
    addRegion: function(name, definition) {
      var regions = {};
      regions[name] = definition;
      return this._buildRegions(regions)[name];
    },
  
    // Add multiple regions as a {name: definition, name2: def2} object literal
    addRegions: function(regions) {
      this.regions = _.extend({}, this.regions, regions);
      return this._buildRegions(regions);
    },
  
    // Remove a single region from the LayoutView, by name
    removeRegion: function(name) {
      delete this.regions[name];
      return this.regionManager.removeRegion(name);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this.regionManager.get(region);
    },
  
    // Get all regions
    getRegions: function() {
      return this.regionManager.getRegions();
    },
  
    // internal method to build regions
    _buildRegions: function(regions) {
      var defaults = {
        regionClass: this.getOption('regionClass'),
        parentEl: _.partial(_.result, this, 'el')
      };
  
      return this.regionManager.addRegions(regions, defaults);
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on this layoutView.
    _initializeRegions: function(options) {
      var regions;
      this._initRegionManager();
  
      regions = Marionette._getValue(this.regions, this, [options]) || {};
  
      // Enable users to define `regions` as instance options.
      var regionOptions = this.getOption.call(options, 'regions');
  
      // enable region options to be a function
      regionOptions = Marionette._getValue(regionOptions, this, [options]);
  
      _.extend(regions, regionOptions);
  
      // Normalize region selectors hash to allow
      // a user to use the @ui. syntax.
      regions = this.normalizeUIValues(regions, ['selector', 'el']);
  
      this.addRegions(regions);
    },
  
    // Internal method to re-initialize all of the regions by updating the `el` that
    // they point to
    _reInitializeRegions: function() {
      this.regionManager.invoke('reset');
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the region manager
    // and all regions in it
    _initRegionManager: function() {
      this.regionManager = this.getRegionManager();
      this.regionManager._parent = this;
  
      this.listenTo(this.regionManager, 'before:add:region', function(name) {
        this.triggerMethod('before:add:region', name);
      });
  
      this.listenTo(this.regionManager, 'add:region', function(name, region) {
        this[name] = region;
        this.triggerMethod('add:region', name, region);
      });
  
      this.listenTo(this.regionManager, 'before:remove:region', function(name) {
        this.triggerMethod('before:remove:region', name);
      });
  
      this.listenTo(this.regionManager, 'remove:region', function(name, region) {
        delete this[name];
        this.triggerMethod('remove:region', name, region);
      });
    },
  
    _getImmediateChildren: function() {
      return _.chain(this.regionManager.getRegions())
        .pluck('currentView')
        .compact()
        .value();
    }
  });
  

  // Behavior
  // --------
  
  // A Behavior is an isolated set of DOM /
  // user interactions that can be mixed into any View.
  // Behaviors allow you to blackbox View specific interactions
  // into portable logical chunks, keeping your views simple and your code DRY.
  
  Marionette.Behavior = Marionette.Object.extend({
    constructor: function(options, view) {
      // Setup reference to the view.
      // this comes in handle when a behavior
      // wants to directly talk up the chain
      // to the view.
      this.view = view;
      this.defaults = _.result(this, 'defaults') || {};
      this.options  = _.extend({}, this.defaults, options);
      // Construct an internal UI hash using
      // the views UI hash and then the behaviors UI hash.
      // This allows the user to use UI hash elements
      // defined in the parent view as well as those
      // defined in the given behavior.
      this.ui = _.extend({}, _.result(view, 'ui'), _.result(this, 'ui'));
  
      Marionette.Object.apply(this, arguments);
    },
  
    // proxy behavior $ method to the view
    // this is useful for doing jquery DOM lookups
    // scoped to behaviors view.
    $: function() {
      return this.view.$.apply(this.view, arguments);
    },
  
    // Stops the behavior from listening to events.
    // Overrides Object#destroy to prevent additional events from being triggered.
    destroy: function() {
      this.stopListening();
  
      return this;
    },
  
    proxyViewProperties: function(view) {
      this.$el = view.$el;
      this.el = view.el;
    }
  });
  
  /* jshint maxlen: 143 */
  // Behaviors
  // ---------
  
  // Behaviors is a utility class that takes care of
  // gluing your behavior instances to their given View.
  // The most important part of this class is that you
  // **MUST** override the class level behaviorsLookup
  // method for things to work properly.
  
  Marionette.Behaviors = (function(Marionette, _) {
    // Borrow event splitter from Backbone
    var delegateEventSplitter = /^(\S+)\s*(.*)$/;
  
    function Behaviors(view, behaviors) {
  
      if (!_.isObject(view.behaviors)) {
        return {};
      }
  
      // Behaviors defined on a view can be a flat object literal
      // or it can be a function that returns an object.
      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));
  
      // Wraps several of the view's methods
      // calling the methods first on each behavior
      // and then eventually calling the method on the view.
      Behaviors.wrap(view, behaviors, _.keys(methods));
      return behaviors;
    }
  
    var methods = {
      behaviorTriggers: function(behaviorTriggers, behaviors) {
        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);
        return triggerBuilder.buildBehaviorTriggers();
      },
  
      behaviorEvents: function(behaviorEvents, behaviors) {
        var _behaviorsEvents = {};
  
        _.each(behaviors, function(b, i) {
          var _events = {};
          var behaviorEvents = _.clone(_.result(b, 'events')) || {};
  
          // Normalize behavior events hash to allow
          // a user to use the @ui. syntax.
          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, getBehaviorsUI(b));
  
          var j = 0;
          _.each(behaviorEvents, function(behaviour, key) {
            var match     = key.match(delegateEventSplitter);
  
            // Set event name to be namespaced using the view cid,
            // the behavior index, and the behavior event index
            // to generate a non colliding event namespace
            // http://api.jquery.com/event.namespace/
            var eventName = match[1] + '.' + [this.cid, i, j++, ' '].join('');
            var selector  = match[2];
  
            var eventKey  = eventName + selector;
            var handler   = _.isFunction(behaviour) ? behaviour : b[behaviour];
            if (!handler) { return; }
            _events[eventKey] = _.bind(handler, b);
          }, this);
  
          _behaviorsEvents = _.extend(_behaviorsEvents, _events);
        }, this);
  
        return _behaviorsEvents;
      }
    };
  
    _.extend(Behaviors, {
  
      // Placeholder method to be extended by the user.
      // The method should define the object that stores the behaviors.
      // i.e.
      //
      // ```js
      // Marionette.Behaviors.behaviorsLookup: function() {
      //   return App.Behaviors
      // }
      // ```
      behaviorsLookup: function() {
        throw new Marionette.Error({
          message: 'You must define where your behaviors are stored.',
          url: 'marionette.behaviors.html#behaviorslookup'
        });
      },
  
      // Takes care of getting the behavior class
      // given options and a key.
      // If a user passes in options.behaviorClass
      // default to using that. Otherwise delegate
      // the lookup to the users `behaviorsLookup` implementation.
      getBehaviorClass: function(options, key) {
        if (options.behaviorClass) {
          return options.behaviorClass;
        }
  
        // Get behavior class can be either a flat object or a method
        return Marionette._getValue(Behaviors.behaviorsLookup, this, [options, key])[key];
      },
  
      // Iterate over the behaviors object, for each behavior
      // instantiate it and get its grouped behaviors.
      parseBehaviors: function(view, behaviors) {
        return _.chain(behaviors).map(function(options, key) {
          var BehaviorClass = Behaviors.getBehaviorClass(options, key);
  
          var behavior = new BehaviorClass(options, view);
          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));
  
          return [behavior].concat(nestedBehaviors);
        }).flatten().value();
      },
  
      // Wrap view internal methods so that they delegate to behaviors. For example,
      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.
      // i.e.
      //
      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`
      wrap: function(view, behaviors, methodNames) {
        _.each(methodNames, function(methodName) {
          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);
        });
      }
    });
  
    // Class to build handlers for `triggers` on behaviors
    // for views
    function BehaviorTriggersBuilder(view, behaviors) {
      this._view      = view;
      this._behaviors = behaviors;
      this._triggers  = {};
    }
  
    _.extend(BehaviorTriggersBuilder.prototype, {
      // Main method to build the triggers hash with event keys and handlers
      buildBehaviorTriggers: function() {
        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);
        return this._triggers;
      },
  
      // Internal method to build all trigger handlers for a given behavior
      _buildTriggerHandlersForBehavior: function(behavior, i) {
        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};
  
        triggersHash = Marionette.normalizeUIKeys(triggersHash, getBehaviorsUI(behavior));
  
        _.each(triggersHash, _.bind(this._setHandlerForBehavior, this, behavior, i));
      },
  
      // Internal method to create and assign the trigger handler for a given
      // behavior
      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {
        // Unique identifier for the `this._triggers` hash
        var triggerKey = trigger.replace(/^\S+/, function(triggerName) {
          return triggerName + '.' + 'behaviortriggers' + i;
        });
  
        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);
      }
    });
  
    function getBehaviorsUI(behavior) {
      return behavior._uiBindings || behavior.ui;
    }
  
    return Behaviors;
  
  })(Marionette, _);
  

  // App Router
  // ----------
  
  // Reduce the boilerplate code of handling route events
  // and then calling a single method on another object.
  // Have your routers configured to call the method on
  // your object, directly.
  //
  // Configure an AppRouter with `appRoutes`.
  //
  // App routers can only take one `controller` object.
  // It is recommended that you divide your controller
  // objects in to smaller pieces of related functionality
  // and have multiple routers / controllers, instead of
  // just one giant router and controller.
  //
  // You can also add standard routes to an AppRouter.
  
  Marionette.AppRouter = Backbone.Router.extend({
  
    constructor: function(options) {
      this.options = options || {};
  
      Backbone.Router.apply(this, arguments);
  
      var appRoutes = this.getOption('appRoutes');
      var controller = this._getController();
      this.processAppRoutes(controller, appRoutes);
      this.on('route', this._processOnRoute, this);
    },
  
    // Similar to route method on a Backbone Router but
    // method is called on the controller
    appRoute: function(route, methodName) {
      var controller = this._getController();
      this._addAppRoute(controller, route, methodName);
    },
  
    // process the route event and trigger the onRoute
    // method call, if it exists
    _processOnRoute: function(routeName, routeArgs) {
      // make sure an onRoute before trying to call it
      if (_.isFunction(this.onRoute)) {
        // find the path that matches the current route
        var routePath = _.invert(this.getOption('appRoutes'))[routeName];
        this.onRoute(routeName, routePath, routeArgs);
      }
    },
  
    // Internal method to process the `appRoutes` for the
    // router, and turn them in to routes that trigger the
    // specified method on the specified `controller`.
    processAppRoutes: function(controller, appRoutes) {
      if (!appRoutes) { return; }
  
      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes
  
      _.each(routeNames, function(route) {
        this._addAppRoute(controller, route, appRoutes[route]);
      }, this);
    },
  
    _getController: function() {
      return this.getOption('controller');
    },
  
    _addAppRoute: function(controller, route, methodName) {
      var method = controller[methodName];
  
      if (!method) {
        throw new Marionette.Error('Method "' + methodName + '" was not found on the controller');
      }
  
      this.route(route, methodName, _.bind(method, controller));
    },
  
    mergeOptions: Marionette.mergeOptions,
  
    // Proxy `getOption` to enable getting options from this or this.options by name.
    getOption: Marionette.proxyGetOption,
  
    triggerMethod: Marionette.triggerMethod,
  
    bindEntityEvents: Marionette.proxyBindEntityEvents,
  
    unbindEntityEvents: Marionette.proxyUnbindEntityEvents
  });
  
  // Application
  // -----------
  
  // Contain and manage the composite application as a whole.
  // Stores and starts up `Region` objects, includes an
  // event aggregator as `app.vent`
  Marionette.Application = Marionette.Object.extend({
    constructor: function(options) {
      this._initializeRegions(options);
      this._initCallbacks = new Marionette.Callbacks();
      this.submodules = {};
      _.extend(this, options);
      this._initChannel();
      Marionette.Object.apply(this, arguments);
    },
  
    // Command execution, facilitated by Backbone.Wreqr.Commands
    execute: function() {
      this.commands.execute.apply(this.commands, arguments);
    },
  
    // Request/response, facilitated by Backbone.Wreqr.RequestResponse
    request: function() {
      return this.reqres.request.apply(this.reqres, arguments);
    },
  
    // Add an initializer that is either run at when the `start`
    // method is called, or run immediately if added after `start`
    // has already been called.
    addInitializer: function(initializer) {
      this._initCallbacks.add(initializer);
    },
  
    // kick off all of the application's processes.
    // initializes all of the regions that have been added
    // to the app, and runs all of the initializer functions
    start: function(options) {
      this.triggerMethod('before:start', options);
      this._initCallbacks.run(options, this);
      this.triggerMethod('start', options);
    },
  
    // Add regions to your app.
    // Accepts a hash of named strings or Region objects
    // addRegions({something: "#someRegion"})
    // addRegions({something: Region.extend({el: "#someRegion"}) });
    addRegions: function(regions) {
      return this._regionManager.addRegions(regions);
    },
  
    // Empty all regions in the app, without removing them
    emptyRegions: function() {
      return this._regionManager.emptyRegions();
    },
  
    // Removes a region from your app, by name
    // Accepts the regions name
    // removeRegion('myRegion')
    removeRegion: function(region) {
      return this._regionManager.removeRegion(region);
    },
  
    // Provides alternative access to regions
    // Accepts the region name
    // getRegion('main')
    getRegion: function(region) {
      return this._regionManager.get(region);
    },
  
    // Get all the regions from the region manager
    getRegions: function() {
      return this._regionManager.getRegions();
    },
  
    // Create a module, attached to the application
    module: function(moduleNames, moduleDefinition) {
  
      // Overwrite the module class if the user specifies one
      var ModuleClass = Marionette.Module.getClass(moduleDefinition);
  
      var args = _.toArray(arguments);
      args.unshift(this);
  
      // see the Marionette.Module object for more information
      return ModuleClass.create.apply(ModuleClass, args);
    },
  
    // Enable easy overriding of the default `RegionManager`
    // for customized region interactions and business-specific
    // view logic for better control over single regions.
    getRegionManager: function() {
      return new Marionette.RegionManager();
    },
  
    // Internal method to initialize the regions that have been defined in a
    // `regions` attribute on the application instance
    _initializeRegions: function(options) {
      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};
  
      this._initRegionManager();
  
      // Enable users to define `regions` in instance options.
      var optionRegions = Marionette.getOption(options, 'regions');
  
      // Enable region options to be a function
      if (_.isFunction(optionRegions)) {
        optionRegions = optionRegions.call(this, options);
      }
  
      // Overwrite current regions with those passed in options
      _.extend(regions, optionRegions);
  
      this.addRegions(regions);
  
      return this;
    },
  
    // Internal method to set up the region manager
    _initRegionManager: function() {
      this._regionManager = this.getRegionManager();
      this._regionManager._parent = this;
  
      this.listenTo(this._regionManager, 'before:add:region', function() {
        Marionette._triggerMethod(this, 'before:add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'add:region', function(name, region) {
        this[name] = region;
        Marionette._triggerMethod(this, 'add:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'before:remove:region', function() {
        Marionette._triggerMethod(this, 'before:remove:region', arguments);
      });
  
      this.listenTo(this._regionManager, 'remove:region', function(name) {
        delete this[name];
        Marionette._triggerMethod(this, 'remove:region', arguments);
      });
    },
  
    // Internal method to setup the Wreqr.radio channel
    _initChannel: function() {
      this.channelName = _.result(this, 'channelName') || 'global';
      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);
      this.vent = _.result(this, 'vent') || this.channel.vent;
      this.commands = _.result(this, 'commands') || this.channel.commands;
      this.reqres = _.result(this, 'reqres') || this.channel.reqres;
    }
  });
  
  /* jshint maxparams: 9 */
  
  // Module
  // ------
  
  // A simple module system, used to create privacy and encapsulation in
  // Marionette applications
  Marionette.Module = function(moduleName, app, options) {
    this.moduleName = moduleName;
    this.options = _.extend({}, this.options, options);
    // Allow for a user to overide the initialize
    // for a given module instance.
    this.initialize = options.initialize || this.initialize;
  
    // Set up an internal store for sub-modules.
    this.submodules = {};
  
    this._setupInitializersAndFinalizers();
  
    // Set an internal reference to the app
    // within a module.
    this.app = app;
  
    if (_.isFunction(this.initialize)) {
      this.initialize(moduleName, app, this.options);
    }
  };
  
  Marionette.Module.extend = Marionette.extend;
  
  // Extend the Module prototype with events / listenTo, so that the module
  // can be used as an event aggregator or pub/sub.
  _.extend(Marionette.Module.prototype, Backbone.Events, {
  
    // By default modules start with their parents.
    startWithParent: true,
  
    // Initialize is an empty function by default. Override it with your own
    // initialization logic when extending Marionette.Module.
    initialize: function() {},
  
    // Initializer for a specific module. Initializers are run when the
    // module's `start` method is called.
    addInitializer: function(callback) {
      this._initializerCallbacks.add(callback);
    },
  
    // Finalizers are run when a module is stopped. They are used to teardown
    // and finalize any variables, references, events and other code that the
    // module had set up.
    addFinalizer: function(callback) {
      this._finalizerCallbacks.add(callback);
    },
  
    // Start the module, and run all of its initializers
    start: function(options) {
      // Prevent re-starting a module that is already started
      if (this._isInitialized) { return; }
  
      // start the sub-modules (depth-first hierarchy)
      _.each(this.submodules, function(mod) {
        // check to see if we should start the sub-module with this parent
        if (mod.startWithParent) {
          mod.start(options);
        }
      });
  
      // run the callbacks to "start" the current module
      this.triggerMethod('before:start', options);
  
      this._initializerCallbacks.run(options, this);
      this._isInitialized = true;
  
      this.triggerMethod('start', options);
    },
  
    // Stop this module by running its finalizers and then stop all of
    // the sub-modules for this module
    stop: function() {
      // if we are not initialized, don't bother finalizing
      if (!this._isInitialized) { return; }
      this._isInitialized = false;
  
      this.triggerMethod('before:stop');
  
      // stop the sub-modules; depth-first, to make sure the
      // sub-modules are stopped / finalized before parents
      _.invoke(this.submodules, 'stop');
  
      // run the finalizers
      this._finalizerCallbacks.run(undefined, this);
  
      // reset the initializers and finalizers
      this._initializerCallbacks.reset();
      this._finalizerCallbacks.reset();
  
      this.triggerMethod('stop');
    },
  
    // Configure the module with a definition function and any custom args
    // that are to be passed in to the definition function
    addDefinition: function(moduleDefinition, customArgs) {
      this._runModuleDefinition(moduleDefinition, customArgs);
    },
  
    // Internal method: run the module definition function with the correct
    // arguments
    _runModuleDefinition: function(definition, customArgs) {
      // If there is no definition short circut the method.
      if (!definition) { return; }
  
      // build the correct list of arguments for the module definition
      var args = _.flatten([
        this,
        this.app,
        Backbone,
        Marionette,
        Backbone.$, _,
        customArgs
      ]);
  
      definition.apply(this, args);
    },
  
    // Internal method: set up new copies of initializers and finalizers.
    // Calling this method will wipe out all existing initializers and
    // finalizers.
    _setupInitializersAndFinalizers: function() {
      this._initializerCallbacks = new Marionette.Callbacks();
      this._finalizerCallbacks = new Marionette.Callbacks();
    },
  
    // import the `triggerMethod` to trigger events with corresponding
    // methods if the method exists
    triggerMethod: Marionette.triggerMethod
  });
  
  // Class methods to create modules
  _.extend(Marionette.Module, {
  
    // Create a module, hanging off the app parameter as the parent object.
    create: function(app, moduleNames, moduleDefinition) {
      var module = app;
  
      // get the custom args passed in after the module definition and
      // get rid of the module name and definition function
      var customArgs = _.drop(arguments, 3);
  
      // Split the module names and get the number of submodules.
      // i.e. an example module name of `Doge.Wow.Amaze` would
      // then have the potential for 3 module definitions.
      moduleNames = moduleNames.split('.');
      var length = moduleNames.length;
  
      // store the module definition for the last module in the chain
      var moduleDefinitions = [];
      moduleDefinitions[length - 1] = moduleDefinition;
  
      // Loop through all the parts of the module definition
      _.each(moduleNames, function(moduleName, i) {
        var parentModule = module;
        module = this._getModule(parentModule, moduleName, app, moduleDefinition);
        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);
      }, this);
  
      // Return the last module in the definition chain
      return module;
    },
  
    _getModule: function(parentModule, moduleName, app, def, args) {
      var options = _.extend({}, def);
      var ModuleClass = this.getClass(def);
  
      // Get an existing module of this name if we have one
      var module = parentModule[moduleName];
  
      if (!module) {
        // Create a new module if we don't have one
        module = new ModuleClass(moduleName, app, options);
        parentModule[moduleName] = module;
        // store the module on the parent
        parentModule.submodules[moduleName] = module;
      }
  
      return module;
    },
  
    // ## Module Classes
    //
    // Module classes can be used as an alternative to the define pattern.
    // The extend function of a Module is identical to the extend functions
    // on other Backbone and Marionette classes.
    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.
    getClass: function(moduleDefinition) {
      var ModuleClass = Marionette.Module;
  
      if (!moduleDefinition) {
        return ModuleClass;
      }
  
      // If all of the module's functionality is defined inside its class,
      // then the class can be passed in directly. `MyApp.module("Foo", FooModule)`.
      if (moduleDefinition.prototype instanceof ModuleClass) {
        return moduleDefinition;
      }
  
      return moduleDefinition.moduleClass || ModuleClass;
    },
  
    // Add the module definition and add a startWithParent initializer function.
    // This is complicated because module definitions are heavily overloaded
    // and support an anonymous function, module class, or options object
    _addModuleDefinition: function(parentModule, module, def, args) {
      var fn = this._getDefine(def);
      var startWithParent = this._getStartWithParent(def, module);
  
      if (fn) {
        module.addDefinition(fn, args);
      }
  
      this._addStartWithParent(parentModule, module, startWithParent);
    },
  
    _getStartWithParent: function(def, module) {
      var swp;
  
      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {
        swp = module.constructor.prototype.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      if (_.isObject(def)) {
        swp = def.startWithParent;
        return _.isUndefined(swp) ? true : swp;
      }
  
      return true;
    },
  
    _getDefine: function(def) {
      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {
        return def;
      }
  
      if (_.isObject(def)) {
        return def.define;
      }
  
      return null;
    },
  
    _addStartWithParent: function(parentModule, module, startWithParent) {
      module.startWithParent = module.startWithParent && startWithParent;
  
      if (!module.startWithParent || !!module.startWithParentIsConfigured) {
        return;
      }
  
      module.startWithParentIsConfigured = true;
  
      parentModule.addInitializer(function(options) {
        if (module.startWithParent) {
          module.start(options);
        }
      });
    }
  });
  

  return Marionette;
}));

},{"backbone":185,"backbone.babysitter":182,"backbone.wreqr":184,"underscore":284}],184:[function(require,module,exports){
// Backbone.Wreqr (Backbone.Marionette)
// ----------------------------------
// v1.4.0
//
// Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.wreqr


(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['backbone', 'underscore'], function(Backbone, _) {
      return factory(Backbone, _);
    });
  } else if (typeof exports !== 'undefined') {
    var Backbone = require('backbone');
    var _ = require('underscore');
    module.exports = factory(Backbone, _);
  } else {
    factory(root.Backbone, root._);
  }

}(this, function(Backbone, _) {
  "use strict";

  var previousWreqr = Backbone.Wreqr;

  var Wreqr = Backbone.Wreqr = {};

  Backbone.Wreqr.VERSION = '1.4.0';

  Backbone.Wreqr.noConflict = function () {
    Backbone.Wreqr = previousWreqr;
    return this;
  };

  // Handlers
  // --------
  // A registry of functions to call, given a name
  
  Wreqr.Handlers = (function(Backbone, _){
    "use strict";
    
    // Constructor
    // -----------
  
    var Handlers = function(options){
      this.options = options;
      this._wreqrHandlers = {};
      
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    Handlers.extend = Backbone.Model.extend;
  
    // Instance Members
    // ----------------
  
    _.extend(Handlers.prototype, Backbone.Events, {
  
      // Add multiple handlers using an object literal configuration
      setHandlers: function(handlers){
        _.each(handlers, _.bind(function(handler, name){
          var context = null;
  
          if (_.isObject(handler) && !_.isFunction(handler)){
            context = handler.context;
            handler = handler.callback;
          }
  
          this.setHandler(name, handler, context);
        }, this));
      },
  
      // Add a handler for the given name, with an
      // optional context to run the handler within
      setHandler: function(name, handler, context){
        var config = {
          callback: handler,
          context: context
        };
  
        this._wreqrHandlers[name] = config;
  
        this.trigger("handler:add", name, handler, context);
      },
  
      // Determine whether or not a handler is registered
      hasHandler: function(name){
        return !! this._wreqrHandlers[name];
      },
  
      // Get the currently registered handler for
      // the specified name. Throws an exception if
      // no handler is found.
      getHandler: function(name){
        var config = this._wreqrHandlers[name];
  
        if (!config){
          return;
        }
  
        return function(){
          return config.callback.apply(config.context, arguments);
        };
      },
  
      // Remove a handler for the specified name
      removeHandler: function(name){
        delete this._wreqrHandlers[name];
      },
  
      // Remove all handlers from this registry
      removeAllHandlers: function(){
        this._wreqrHandlers = {};
      }
    });
  
    return Handlers;
  })(Backbone, _);
  
  // Wreqr.CommandStorage
  // --------------------
  //
  // Store and retrieve commands for execution.
  Wreqr.CommandStorage = (function(){
    "use strict";
  
    // Constructor function
    var CommandStorage = function(options){
      this.options = options;
      this._commands = {};
  
      if (_.isFunction(this.initialize)){
        this.initialize(options);
      }
    };
  
    // Instance methods
    _.extend(CommandStorage.prototype, Backbone.Events, {
  
      // Get an object literal by command name, that contains
      // the `commandName` and the `instances` of all commands
      // represented as an array of arguments to process
      getCommands: function(commandName){
        var commands = this._commands[commandName];
  
        // we don't have it, so add it
        if (!commands){
  
          // build the configuration
          commands = {
            command: commandName, 
            instances: []
          };
  
          // store it
          this._commands[commandName] = commands;
        }
  
        return commands;
      },
  
      // Add a command by name, to the storage and store the
      // args for the command
      addCommand: function(commandName, args){
        var command = this.getCommands(commandName);
        command.instances.push(args);
      },
  
      // Clear all commands for the given `commandName`
      clearCommands: function(commandName){
        var command = this.getCommands(commandName);
        command.instances = [];
      }
    });
  
    return CommandStorage;
  })();
  
  // Wreqr.Commands
  // --------------
  //
  // A simple command pattern implementation. Register a command
  // handler and execute it.
  Wreqr.Commands = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      // default storage type
      storageType: Wreqr.CommandStorage,
  
      constructor: function(options){
        this.options = options || {};
  
        this._initializeStorage(this.options);
        this.on("handler:add", this._executeCommands, this);
  
        Wreqr.Handlers.prototype.constructor.apply(this, arguments);
      },
  
      // Execute a named command with the supplied args
      execute: function(name){
        name = arguments[0];
        var args = _.rest(arguments);
  
        if (this.hasHandler(name)){
          this.getHandler(name).apply(this, args);
        } else {
          this.storage.addCommand(name, args);
        }
  
      },
  
      // Internal method to handle bulk execution of stored commands
      _executeCommands: function(name, handler, context){
        var command = this.storage.getCommands(name);
  
        // loop through and execute all the stored command instances
        _.each(command.instances, function(args){
          handler.apply(context, args);
        });
  
        this.storage.clearCommands(name);
      },
  
      // Internal method to initialize storage either from the type's
      // `storageType` or the instance `options.storageType`.
      _initializeStorage: function(options){
        var storage;
  
        var StorageType = options.storageType || this.storageType;
        if (_.isFunction(StorageType)){
          storage = new StorageType();
        } else {
          storage = StorageType;
        }
  
        this.storage = storage;
      }
    });
  
  })(Wreqr, _);
  
  // Wreqr.RequestResponse
  // ---------------------
  //
  // A simple request/response implementation. Register a
  // request handler, and return a response from it
  Wreqr.RequestResponse = (function(Wreqr, _){
    "use strict";
  
    return Wreqr.Handlers.extend({
      request: function(name){
        if (this.hasHandler(name)) {
          return this.getHandler(name).apply(this, _.rest(arguments));
        }
      }
    });
  
  })(Wreqr, _);
  
  // Event Aggregator
  // ----------------
  // A pub-sub object that can be used to decouple various parts
  // of an application through event-driven architecture.
  
  Wreqr.EventAggregator = (function(Backbone, _){
    "use strict";
    var EA = function(){};
  
    // Copy the `extend` function used by Backbone's classes
    EA.extend = Backbone.Model.extend;
  
    // Copy the basic Backbone.Events on to the event aggregator
    _.extend(EA.prototype, Backbone.Events);
  
    return EA;
  })(Backbone, _);
  
  // Wreqr.Channel
  // --------------
  //
  // An object that wraps the three messaging systems:
  // EventAggregator, RequestResponse, Commands
  Wreqr.Channel = (function(Wreqr){
    "use strict";
  
    var Channel = function(channelName) {
      this.vent        = new Backbone.Wreqr.EventAggregator();
      this.reqres      = new Backbone.Wreqr.RequestResponse();
      this.commands    = new Backbone.Wreqr.Commands();
      this.channelName = channelName;
    };
  
    _.extend(Channel.prototype, {
  
      // Remove all handlers from the messaging systems of this channel
      reset: function() {
        this.vent.off();
        this.vent.stopListening();
        this.reqres.removeAllHandlers();
        this.commands.removeAllHandlers();
        return this;
      },
  
      // Connect a hash of events; one for each messaging system
      connectEvents: function(hash, context) {
        this._connect('vent', hash, context);
        return this;
      },
  
      connectCommands: function(hash, context) {
        this._connect('commands', hash, context);
        return this;
      },
  
      connectRequests: function(hash, context) {
        this._connect('reqres', hash, context);
        return this;
      },
  
      // Attach the handlers to a given message system `type`
      _connect: function(type, hash, context) {
        if (!hash) {
          return;
        }
  
        context = context || this;
        var method = (type === 'vent') ? 'on' : 'setHandler';
  
        _.each(hash, _.bind(function(fn, eventName) {
          this[type][method](eventName, _.bind(fn, context));
        }, this));
      }
    });
  
  
    return Channel;
  })(Wreqr);
  
  // Wreqr.Radio
  // --------------
  //
  // An object that lets you communicate with many channels.
  Wreqr.radio = (function(Wreqr, _){
    "use strict";
  
    var Radio = function() {
      this._channels = {};
      this.vent = {};
      this.commands = {};
      this.reqres = {};
      this._proxyMethods();
    };
  
    _.extend(Radio.prototype, {
  
      channel: function(channelName) {
        if (!channelName) {
          throw new Error('Channel must receive a name');
        }
  
        return this._getChannel( channelName );
      },
  
      _getChannel: function(channelName) {
        var channel = this._channels[channelName];
  
        if(!channel) {
          channel = new Wreqr.Channel(channelName);
          this._channels[channelName] = channel;
        }
  
        return channel;
      },
  
      _proxyMethods: function() {
        _.each(['vent', 'commands', 'reqres'], _.bind(function(system) {
          _.each( messageSystems[system], _.bind(function(method) {
            this[system][method] = proxyMethod(this, system, method);
          }, this));
        }, this));
      }
    });
  
  
    var messageSystems = {
      vent: [
        'on',
        'off',
        'trigger',
        'once',
        'stopListening',
        'listenTo',
        'listenToOnce'
      ],
  
      commands: [
        'execute',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ],
  
      reqres: [
        'request',
        'setHandler',
        'setHandlers',
        'removeHandler',
        'removeAllHandlers'
      ]
    };
  
    var proxyMethod = function(radio, system, method) {
      return function(channelName) {
        var messageSystem = radio._getChannel(channelName)[system];
  
        return messageSystem[method].apply(messageSystem, _.rest(arguments));
      };
    };
  
    return new Radio();
  
  })(Wreqr, _);
  

  return Backbone.Wreqr;

}));

},{"backbone":185,"underscore":284}],185:[function(require,module,exports){
(function (global){
//     Backbone.js 1.2.3

//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

(function(factory) {

  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.
  // We use `self` instead of `window` for `WebWorker` support.
  var root = (typeof self == 'object' && self.self == self && self) ||
            (typeof global == 'object' && global.global == global && global);

  // Set up Backbone appropriately for the environment. Start with AMD.
  if (typeof define === 'function' && define.amd) {
    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {
      // Export global even in AMD case in case this script is loaded with
      // others that may still expect a global Backbone.
      root.Backbone = factory(root, exports, _, $);
    });

  // Next for Node.js or CommonJS. jQuery may not be needed as a module.
  } else if (typeof exports !== 'undefined') {
    var _ = require('underscore'), $;
    try { $ = require('jquery'); } catch(e) {}
    factory(root, exports, _, $);

  // Finally, as a browser global.
  } else {
    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));
  }

}(function(root, Backbone, _, $) {

  // Initial Setup
  // -------------

  // Save the previous value of the `Backbone` variable, so that it can be
  // restored later on, if `noConflict` is used.
  var previousBackbone = root.Backbone;

  // Create a local reference to a common array method we'll want to use later.
  var slice = Array.prototype.slice;

  // Current version of the library. Keep in sync with `package.json`.
  Backbone.VERSION = '1.2.3';

  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns
  // the `$` variable.
  Backbone.$ = $;

  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable
  // to its previous owner. Returns a reference to this Backbone object.
  Backbone.noConflict = function() {
    root.Backbone = previousBackbone;
    return this;
  };

  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option
  // will fake `"PATCH"`, `"PUT"` and `"DELETE"` requests via the `_method` parameter and
  // set a `X-Http-Method-Override` header.
  Backbone.emulateHTTP = false;

  // Turn on `emulateJSON` to support legacy servers that can't deal with direct
  // `application/json` requests ... this will encode the body as
  // `application/x-www-form-urlencoded` instead and will send the model in a
  // form param named `model`.
  Backbone.emulateJSON = false;

  // Proxy Backbone class methods to Underscore functions, wrapping the model's
  // `attributes` object or collection's `models` array behind the scenes.
  //
  // collection.filter(function(model) { return model.get('age') > 10 });
  // collection.each(this.addView);
  //
  // `Function#apply` can be slow so we use the method's arg count, if we know it.
  var addMethod = function(length, method, attribute) {
    switch (length) {
      case 1: return function() {
        return _[method](this[attribute]);
      };
      case 2: return function(value) {
        return _[method](this[attribute], value);
      };
      case 3: return function(iteratee, context) {
        return _[method](this[attribute], cb(iteratee, this), context);
      };
      case 4: return function(iteratee, defaultVal, context) {
        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);
      };
      default: return function() {
        var args = slice.call(arguments);
        args.unshift(this[attribute]);
        return _[method].apply(_, args);
      };
    }
  };
  var addUnderscoreMethods = function(Class, methods, attribute) {
    _.each(methods, function(length, method) {
      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);
    });
  };

  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.
  var cb = function(iteratee, instance) {
    if (_.isFunction(iteratee)) return iteratee;
    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);
    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };
    return iteratee;
  };
  var modelMatcher = function(attrs) {
    var matcher = _.matches(attrs);
    return function(model) {
      return matcher(model.attributes);
    };
  };

  // Backbone.Events
  // ---------------

  // A module that can be mixed in to *any object* in order to provide it with
  // a custom event channel. You may bind a callback to an event with `on` or
  // remove with `off`; `trigger`-ing an event fires all callbacks in
  // succession.
  //
  //     var object = {};
  //     _.extend(object, Backbone.Events);
  //     object.on('expand', function(){ alert('expanded'); });
  //     object.trigger('expand');
  //
  var Events = Backbone.Events = {};

  // Regular expression used to split event strings.
  var eventSplitter = /\s+/;

  // Iterates over the standard `event, callback` (as well as the fancy multiple
  // space-separated events `"change blur", callback` and jQuery-style event
  // maps `{event: callback}`).
  var eventsApi = function(iteratee, events, name, callback, opts) {
    var i = 0, names;
    if (name && typeof name === 'object') {
      // Handle event maps.
      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;
      for (names = _.keys(name); i < names.length ; i++) {
        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);
      }
    } else if (name && eventSplitter.test(name)) {
      // Handle space separated event names by delegating them individually.
      for (names = name.split(eventSplitter); i < names.length; i++) {
        events = iteratee(events, names[i], callback, opts);
      }
    } else {
      // Finally, standard events.
      events = iteratee(events, name, callback, opts);
    }
    return events;
  };

  // Bind an event to a `callback` function. Passing `"all"` will bind
  // the callback to all events fired.
  Events.on = function(name, callback, context) {
    return internalOn(this, name, callback, context);
  };

  // Guard the `listening` argument from the public API.
  var internalOn = function(obj, name, callback, context, listening) {
    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {
        context: context,
        ctx: obj,
        listening: listening
    });

    if (listening) {
      var listeners = obj._listeners || (obj._listeners = {});
      listeners[listening.id] = listening;
    }

    return obj;
  };

  // Inversion-of-control versions of `on`. Tell *this* object to listen to
  // an event in another object... keeping track of what it's listening to
  // for easier unbinding later.
  Events.listenTo =  function(obj, name, callback) {
    if (!obj) return this;
    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
    var listeningTo = this._listeningTo || (this._listeningTo = {});
    var listening = listeningTo[id];

    // This object is not listening to any other events on `obj` yet.
    // Setup the necessary references to track the listening callbacks.
    if (!listening) {
      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));
      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};
    }

    // Bind callbacks on obj, and keep track of them on listening.
    internalOn(obj, name, callback, this, listening);
    return this;
  };

  // The reducing API that adds a callback to the `events` object.
  var onApi = function(events, name, callback, options) {
    if (callback) {
      var handlers = events[name] || (events[name] = []);
      var context = options.context, ctx = options.ctx, listening = options.listening;
      if (listening) listening.count++;

      handlers.push({ callback: callback, context: context, ctx: context || ctx, listening: listening });
    }
    return events;
  };

  // Remove one or many callbacks. If `context` is null, removes all
  // callbacks with that function. If `callback` is null, removes all
  // callbacks for the event. If `name` is null, removes all bound
  // callbacks for all events.
  Events.off =  function(name, callback, context) {
    if (!this._events) return this;
    this._events = eventsApi(offApi, this._events, name, callback, {
        context: context,
        listeners: this._listeners
    });
    return this;
  };

  // Tell this object to stop listening to either specific events ... or
  // to every object it's currently listening to.
  Events.stopListening =  function(obj, name, callback) {
    var listeningTo = this._listeningTo;
    if (!listeningTo) return this;

    var ids = obj ? [obj._listenId] : _.keys(listeningTo);

    for (var i = 0; i < ids.length; i++) {
      var listening = listeningTo[ids[i]];

      // If listening doesn't exist, this object is not currently
      // listening to obj. Break out early.
      if (!listening) break;

      listening.obj.off(name, callback, this);
    }
    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;

    return this;
  };

  // The reducing API that removes a callback from the `events` object.
  var offApi = function(events, name, callback, options) {
    if (!events) return;

    var i = 0, listening;
    var context = options.context, listeners = options.listeners;

    // Delete all events listeners and "drop" events.
    if (!name && !callback && !context) {
      var ids = _.keys(listeners);
      for (; i < ids.length; i++) {
        listening = listeners[ids[i]];
        delete listeners[listening.id];
        delete listening.listeningTo[listening.objId];
      }
      return;
    }

    var names = name ? [name] : _.keys(events);
    for (; i < names.length; i++) {
      name = names[i];
      var handlers = events[name];

      // Bail out if there are no events stored.
      if (!handlers) break;

      // Replace events if there are any remaining.  Otherwise, clean up.
      var remaining = [];
      for (var j = 0; j < handlers.length; j++) {
        var handler = handlers[j];
        if (
          callback && callback !== handler.callback &&
            callback !== handler.callback._callback ||
              context && context !== handler.context
        ) {
          remaining.push(handler);
        } else {
          listening = handler.listening;
          if (listening && --listening.count === 0) {
            delete listeners[listening.id];
            delete listening.listeningTo[listening.objId];
          }
        }
      }

      // Update tail event if the list has any events.  Otherwise, clean up.
      if (remaining.length) {
        events[name] = remaining;
      } else {
        delete events[name];
      }
    }
    if (_.size(events)) return events;
  };

  // Bind an event to only be triggered a single time. After the first time
  // the callback is invoked, its listener will be removed. If multiple events
  // are passed in using the space-separated syntax, the handler will fire
  // once for each event, not once for a combination of all events.
  Events.once =  function(name, callback, context) {
    // Map the event into a `{event: once}` object.
    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));
    return this.on(events, void 0, context);
  };

  // Inversion-of-control versions of `once`.
  Events.listenToOnce =  function(obj, name, callback) {
    // Map the event into a `{event: once}` object.
    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));
    return this.listenTo(obj, events);
  };

  // Reduces the event callbacks into a map of `{event: onceWrapper}`.
  // `offer` unbinds the `onceWrapper` after it has been called.
  var onceMap = function(map, name, callback, offer) {
    if (callback) {
      var once = map[name] = _.once(function() {
        offer(name, once);
        callback.apply(this, arguments);
      });
      once._callback = callback;
    }
    return map;
  };

  // Trigger one or many events, firing all bound callbacks. Callbacks are
  // passed the same arguments as `trigger` is, apart from the event name
  // (unless you're listening on `"all"`, which will cause your callback to
  // receive the true name of the event as the first argument).
  Events.trigger =  function(name) {
    if (!this._events) return this;

    var length = Math.max(0, arguments.length - 1);
    var args = Array(length);
    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];

    eventsApi(triggerApi, this._events, name, void 0, args);
    return this;
  };

  // Handles triggering the appropriate event callbacks.
  var triggerApi = function(objEvents, name, cb, args) {
    if (objEvents) {
      var events = objEvents[name];
      var allEvents = objEvents.all;
      if (events && allEvents) allEvents = allEvents.slice();
      if (events) triggerEvents(events, args);
      if (allEvents) triggerEvents(allEvents, [name].concat(args));
    }
    return objEvents;
  };

  // A difficult-to-believe, but optimized internal dispatch function for
  // triggering events. Tries to keep the usual cases speedy (most internal
  // Backbone events have 3 arguments).
  var triggerEvents = function(events, args) {
    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];
    switch (args.length) {
      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;
      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;
      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;
      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;
      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;
    }
  };

  // Aliases for backwards compatibility.
  Events.bind   = Events.on;
  Events.unbind = Events.off;

  // Allow the `Backbone` object to serve as a global event bus, for folks who
  // want global "pubsub" in a convenient place.
  _.extend(Backbone, Events);

  // Backbone.Model
  // --------------

  // Backbone **Models** are the basic data object in the framework --
  // frequently representing a row in a table in a database on your server.
  // A discrete chunk of data and a bunch of useful, related methods for
  // performing computations and transformations on that data.

  // Create a new model with the specified attributes. A client id (`cid`)
  // is automatically generated and assigned for you.
  var Model = Backbone.Model = function(attributes, options) {
    var attrs = attributes || {};
    options || (options = {});
    this.cid = _.uniqueId(this.cidPrefix);
    this.attributes = {};
    if (options.collection) this.collection = options.collection;
    if (options.parse) attrs = this.parse(attrs, options) || {};
    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));
    this.set(attrs, options);
    this.changed = {};
    this.initialize.apply(this, arguments);
  };

  // Attach all inheritable methods to the Model prototype.
  _.extend(Model.prototype, Events, {

    // A hash of attributes whose current and previous value differ.
    changed: null,

    // The value returned during the last failed validation.
    validationError: null,

    // The default name for the JSON `id` attribute is `"id"`. MongoDB and
    // CouchDB users may want to set this to `"_id"`.
    idAttribute: 'id',

    // The prefix is used to create the client id which is used to identify models locally.
    // You may want to override this if you're experiencing name clashes with model ids.
    cidPrefix: 'c',

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // Return a copy of the model's `attributes` object.
    toJSON: function(options) {
      return _.clone(this.attributes);
    },

    // Proxy `Backbone.sync` by default -- but override this if you need
    // custom syncing semantics for *this* particular model.
    sync: function() {
      return Backbone.sync.apply(this, arguments);
    },

    // Get the value of an attribute.
    get: function(attr) {
      return this.attributes[attr];
    },

    // Get the HTML-escaped value of an attribute.
    escape: function(attr) {
      return _.escape(this.get(attr));
    },

    // Returns `true` if the attribute contains a value that is not null
    // or undefined.
    has: function(attr) {
      return this.get(attr) != null;
    },

    // Special-cased proxy to underscore's `_.matches` method.
    matches: function(attrs) {
      return !!_.iteratee(attrs, this)(this.attributes);
    },

    // Set a hash of model attributes on the object, firing `"change"`. This is
    // the core primitive operation of a model, updating the data and notifying
    // anyone who needs to know about the change in state. The heart of the beast.
    set: function(key, val, options) {
      if (key == null) return this;

      // Handle both `"key", value` and `{key: value}` -style arguments.
      var attrs;
      if (typeof key === 'object') {
        attrs = key;
        options = val;
      } else {
        (attrs = {})[key] = val;
      }

      options || (options = {});

      // Run validation.
      if (!this._validate(attrs, options)) return false;

      // Extract attributes and options.
      var unset      = options.unset;
      var silent     = options.silent;
      var changes    = [];
      var changing   = this._changing;
      this._changing = true;

      if (!changing) {
        this._previousAttributes = _.clone(this.attributes);
        this.changed = {};
      }

      var current = this.attributes;
      var changed = this.changed;
      var prev    = this._previousAttributes;

      // For each `set` attribute, update or delete the current value.
      for (var attr in attrs) {
        val = attrs[attr];
        if (!_.isEqual(current[attr], val)) changes.push(attr);
        if (!_.isEqual(prev[attr], val)) {
          changed[attr] = val;
        } else {
          delete changed[attr];
        }
        unset ? delete current[attr] : current[attr] = val;
      }

      // Update the `id`.
      this.id = this.get(this.idAttribute);

      // Trigger all relevant attribute changes.
      if (!silent) {
        if (changes.length) this._pending = options;
        for (var i = 0; i < changes.length; i++) {
          this.trigger('change:' + changes[i], this, current[changes[i]], options);
        }
      }

      // You might be wondering why there's a `while` loop here. Changes can
      // be recursively nested within `"change"` events.
      if (changing) return this;
      if (!silent) {
        while (this._pending) {
          options = this._pending;
          this._pending = false;
          this.trigger('change', this, options);
        }
      }
      this._pending = false;
      this._changing = false;
      return this;
    },

    // Remove an attribute from the model, firing `"change"`. `unset` is a noop
    // if the attribute doesn't exist.
    unset: function(attr, options) {
      return this.set(attr, void 0, _.extend({}, options, {unset: true}));
    },

    // Clear all attributes on the model, firing `"change"`.
    clear: function(options) {
      var attrs = {};
      for (var key in this.attributes) attrs[key] = void 0;
      return this.set(attrs, _.extend({}, options, {unset: true}));
    },

    // Determine if the model has changed since the last `"change"` event.
    // If you specify an attribute name, determine if that attribute has changed.
    hasChanged: function(attr) {
      if (attr == null) return !_.isEmpty(this.changed);
      return _.has(this.changed, attr);
    },

    // Return an object containing all the attributes that have changed, or
    // false if there are no changed attributes. Useful for determining what
    // parts of a view need to be updated and/or what attributes need to be
    // persisted to the server. Unset attributes will be set to undefined.
    // You can also pass an attributes object to diff against the model,
    // determining if there *would be* a change.
    changedAttributes: function(diff) {
      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
      var old = this._changing ? this._previousAttributes : this.attributes;
      var changed = {};
      for (var attr in diff) {
        var val = diff[attr];
        if (_.isEqual(old[attr], val)) continue;
        changed[attr] = val;
      }
      return _.size(changed) ? changed : false;
    },

    // Get the previous value of an attribute, recorded at the time the last
    // `"change"` event was fired.
    previous: function(attr) {
      if (attr == null || !this._previousAttributes) return null;
      return this._previousAttributes[attr];
    },

    // Get all of the attributes of the model at the time of the previous
    // `"change"` event.
    previousAttributes: function() {
      return _.clone(this._previousAttributes);
    },

    // Fetch the model from the server, merging the response with the model's
    // local attributes. Any changed attributes will trigger a "change" event.
    fetch: function(options) {
      options = _.extend({parse: true}, options);
      var model = this;
      var success = options.success;
      options.success = function(resp) {
        var serverAttrs = options.parse ? model.parse(resp, options) : resp;
        if (!model.set(serverAttrs, options)) return false;
        if (success) success.call(options.context, model, resp, options);
        model.trigger('sync', model, resp, options);
      };
      wrapError(this, options);
      return this.sync('read', this, options);
    },

    // Set a hash of model attributes, and sync the model to the server.
    // If the server returns an attributes hash that differs, the model's
    // state will be `set` again.
    save: function(key, val, options) {
      // Handle both `"key", value` and `{key: value}` -style arguments.
      var attrs;
      if (key == null || typeof key === 'object') {
        attrs = key;
        options = val;
      } else {
        (attrs = {})[key] = val;
      }

      options = _.extend({validate: true, parse: true}, options);
      var wait = options.wait;

      // If we're not waiting and attributes exist, save acts as
      // `set(attr).save(null, opts)` with validation. Otherwise, check if
      // the model will be valid when the attributes, if any, are set.
      if (attrs && !wait) {
        if (!this.set(attrs, options)) return false;
      } else {
        if (!this._validate(attrs, options)) return false;
      }

      // After a successful server-side save, the client is (optionally)
      // updated with the server-side state.
      var model = this;
      var success = options.success;
      var attributes = this.attributes;
      options.success = function(resp) {
        // Ensure attributes are restored during synchronous saves.
        model.attributes = attributes;
        var serverAttrs = options.parse ? model.parse(resp, options) : resp;
        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);
        if (serverAttrs && !model.set(serverAttrs, options)) return false;
        if (success) success.call(options.context, model, resp, options);
        model.trigger('sync', model, resp, options);
      };
      wrapError(this, options);

      // Set temporary attributes if `{wait: true}` to properly find new ids.
      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);

      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
      if (method === 'patch' && !options.attrs) options.attrs = attrs;
      var xhr = this.sync(method, this, options);

      // Restore attributes.
      this.attributes = attributes;

      return xhr;
    },

    // Destroy this model on the server if it was already persisted.
    // Optimistically removes the model from its collection, if it has one.
    // If `wait: true` is passed, waits for the server to respond before removal.
    destroy: function(options) {
      options = options ? _.clone(options) : {};
      var model = this;
      var success = options.success;
      var wait = options.wait;

      var destroy = function() {
        model.stopListening();
        model.trigger('destroy', model, model.collection, options);
      };

      options.success = function(resp) {
        if (wait) destroy();
        if (success) success.call(options.context, model, resp, options);
        if (!model.isNew()) model.trigger('sync', model, resp, options);
      };

      var xhr = false;
      if (this.isNew()) {
        _.defer(options.success);
      } else {
        wrapError(this, options);
        xhr = this.sync('delete', this, options);
      }
      if (!wait) destroy();
      return xhr;
    },

    // Default URL for the model's representation on the server -- if you're
    // using Backbone's restful methods, override this to change the endpoint
    // that will be called.
    url: function() {
      var base =
        _.result(this, 'urlRoot') ||
        _.result(this.collection, 'url') ||
        urlError();
      if (this.isNew()) return base;
      var id = this.get(this.idAttribute);
      return base.replace(/[^\/]$/, '$&/') + encodeURIComponent(id);
    },

    // **parse** converts a response into the hash of attributes to be `set` on
    // the model. The default implementation is just to pass the response along.
    parse: function(resp, options) {
      return resp;
    },

    // Create a new model with identical attributes to this one.
    clone: function() {
      return new this.constructor(this.attributes);
    },

    // A model is new if it has never been saved to the server, and lacks an id.
    isNew: function() {
      return !this.has(this.idAttribute);
    },

    // Check if the model is currently in a valid state.
    isValid: function(options) {
      return this._validate({}, _.defaults({validate: true}, options));
    },

    // Run validation against the next complete set of model attributes,
    // returning `true` if all is well. Otherwise, fire an `"invalid"` event.
    _validate: function(attrs, options) {
      if (!options.validate || !this.validate) return true;
      attrs = _.extend({}, this.attributes, attrs);
      var error = this.validationError = this.validate(attrs, options) || null;
      if (!error) return true;
      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));
      return false;
    }

  });

  // Underscore methods that we want to implement on the Model, mapped to the
  // number of arguments they take.
  var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,
      omit: 0, chain: 1, isEmpty: 1 };

  // Mix in each Underscore method as a proxy to `Model#attributes`.
  addUnderscoreMethods(Model, modelMethods, 'attributes');

  // Backbone.Collection
  // -------------------

  // If models tend to represent a single row of data, a Backbone Collection is
  // more analogous to a table full of data ... or a small slice or page of that
  // table, or a collection of rows that belong together for a particular reason
  // -- all of the messages in this particular folder, all of the documents
  // belonging to this particular author, and so on. Collections maintain
  // indexes of their models, both in order, and for lookup by `id`.

  // Create a new **Collection**, perhaps to contain a specific type of `model`.
  // If a `comparator` is specified, the Collection will maintain
  // its models in sort order, as they're added and removed.
  var Collection = Backbone.Collection = function(models, options) {
    options || (options = {});
    if (options.model) this.model = options.model;
    if (options.comparator !== void 0) this.comparator = options.comparator;
    this._reset();
    this.initialize.apply(this, arguments);
    if (models) this.reset(models, _.extend({silent: true}, options));
  };

  // Default options for `Collection#set`.
  var setOptions = {add: true, remove: true, merge: true};
  var addOptions = {add: true, remove: false};

  // Splices `insert` into `array` at index `at`.
  var splice = function(array, insert, at) {
    at = Math.min(Math.max(at, 0), array.length);
    var tail = Array(array.length - at);
    var length = insert.length;
    for (var i = 0; i < tail.length; i++) tail[i] = array[i + at];
    for (i = 0; i < length; i++) array[i + at] = insert[i];
    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];
  };

  // Define the Collection's inheritable methods.
  _.extend(Collection.prototype, Events, {

    // The default model for a collection is just a **Backbone.Model**.
    // This should be overridden in most cases.
    model: Model,

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // The JSON representation of a Collection is an array of the
    // models' attributes.
    toJSON: function(options) {
      return this.map(function(model) { return model.toJSON(options); });
    },

    // Proxy `Backbone.sync` by default.
    sync: function() {
      return Backbone.sync.apply(this, arguments);
    },

    // Add a model, or list of models to the set. `models` may be Backbone
    // Models or raw JavaScript objects to be converted to Models, or any
    // combination of the two.
    add: function(models, options) {
      return this.set(models, _.extend({merge: false}, options, addOptions));
    },

    // Remove a model, or a list of models from the set.
    remove: function(models, options) {
      options = _.extend({}, options);
      var singular = !_.isArray(models);
      models = singular ? [models] : _.clone(models);
      var removed = this._removeModels(models, options);
      if (!options.silent && removed) this.trigger('update', this, options);
      return singular ? removed[0] : removed;
    },

    // Update a collection by `set`-ing a new list of models, adding new ones,
    // removing models that are no longer present, and merging models that
    // already exist in the collection, as necessary. Similar to **Model#set**,
    // the core operation for updating the data contained by the collection.
    set: function(models, options) {
      if (models == null) return;

      options = _.defaults({}, options, setOptions);
      if (options.parse && !this._isModel(models)) models = this.parse(models, options);

      var singular = !_.isArray(models);
      models = singular ? [models] : models.slice();

      var at = options.at;
      if (at != null) at = +at;
      if (at < 0) at += this.length + 1;

      var set = [];
      var toAdd = [];
      var toRemove = [];
      var modelMap = {};

      var add = options.add;
      var merge = options.merge;
      var remove = options.remove;

      var sort = false;
      var sortable = this.comparator && (at == null) && options.sort !== false;
      var sortAttr = _.isString(this.comparator) ? this.comparator : null;

      // Turn bare objects into model references, and prevent invalid models
      // from being added.
      var model;
      for (var i = 0; i < models.length; i++) {
        model = models[i];

        // If a duplicate is found, prevent it from being added and
        // optionally merge it into the existing model.
        var existing = this.get(model);
        if (existing) {
          if (merge && model !== existing) {
            var attrs = this._isModel(model) ? model.attributes : model;
            if (options.parse) attrs = existing.parse(attrs, options);
            existing.set(attrs, options);
            if (sortable && !sort) sort = existing.hasChanged(sortAttr);
          }
          if (!modelMap[existing.cid]) {
            modelMap[existing.cid] = true;
            set.push(existing);
          }
          models[i] = existing;

        // If this is a new, valid model, push it to the `toAdd` list.
        } else if (add) {
          model = models[i] = this._prepareModel(model, options);
          if (model) {
            toAdd.push(model);
            this._addReference(model, options);
            modelMap[model.cid] = true;
            set.push(model);
          }
        }
      }

      // Remove stale models.
      if (remove) {
        for (i = 0; i < this.length; i++) {
          model = this.models[i];
          if (!modelMap[model.cid]) toRemove.push(model);
        }
        if (toRemove.length) this._removeModels(toRemove, options);
      }

      // See if sorting is needed, update `length` and splice in new models.
      var orderChanged = false;
      var replace = !sortable && add && remove;
      if (set.length && replace) {
        orderChanged = this.length != set.length || _.some(this.models, function(model, index) {
          return model !== set[index];
        });
        this.models.length = 0;
        splice(this.models, set, 0);
        this.length = this.models.length;
      } else if (toAdd.length) {
        if (sortable) sort = true;
        splice(this.models, toAdd, at == null ? this.length : at);
        this.length = this.models.length;
      }

      // Silently sort the collection if appropriate.
      if (sort) this.sort({silent: true});

      // Unless silenced, it's time to fire all appropriate add/sort events.
      if (!options.silent) {
        for (i = 0; i < toAdd.length; i++) {
          if (at != null) options.index = at + i;
          model = toAdd[i];
          model.trigger('add', model, this, options);
        }
        if (sort || orderChanged) this.trigger('sort', this, options);
        if (toAdd.length || toRemove.length) this.trigger('update', this, options);
      }

      // Return the added (or merged) model (or models).
      return singular ? models[0] : models;
    },

    // When you have more items than you want to add or remove individually,
    // you can reset the entire set with a new list of models, without firing
    // any granular `add` or `remove` events. Fires `reset` when finished.
    // Useful for bulk operations and optimizations.
    reset: function(models, options) {
      options = options ? _.clone(options) : {};
      for (var i = 0; i < this.models.length; i++) {
        this._removeReference(this.models[i], options);
      }
      options.previousModels = this.models;
      this._reset();
      models = this.add(models, _.extend({silent: true}, options));
      if (!options.silent) this.trigger('reset', this, options);
      return models;
    },

    // Add a model to the end of the collection.
    push: function(model, options) {
      return this.add(model, _.extend({at: this.length}, options));
    },

    // Remove a model from the end of the collection.
    pop: function(options) {
      var model = this.at(this.length - 1);
      return this.remove(model, options);
    },

    // Add a model to the beginning of the collection.
    unshift: function(model, options) {
      return this.add(model, _.extend({at: 0}, options));
    },

    // Remove a model from the beginning of the collection.
    shift: function(options) {
      var model = this.at(0);
      return this.remove(model, options);
    },

    // Slice out a sub-array of models from the collection.
    slice: function() {
      return slice.apply(this.models, arguments);
    },

    // Get a model from the set by id.
    get: function(obj) {
      if (obj == null) return void 0;
      var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);
      return this._byId[obj] || this._byId[id] || this._byId[obj.cid];
    },

    // Get the model at the given index.
    at: function(index) {
      if (index < 0) index += this.length;
      return this.models[index];
    },

    // Return models with matching attributes. Useful for simple cases of
    // `filter`.
    where: function(attrs, first) {
      return this[first ? 'find' : 'filter'](attrs);
    },

    // Return the first model with matching attributes. Useful for simple cases
    // of `find`.
    findWhere: function(attrs) {
      return this.where(attrs, true);
    },

    // Force the collection to re-sort itself. You don't need to call this under
    // normal circumstances, as the set will maintain sort order as each item
    // is added.
    sort: function(options) {
      var comparator = this.comparator;
      if (!comparator) throw new Error('Cannot sort a set without a comparator');
      options || (options = {});

      var length = comparator.length;
      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);

      // Run sort based on type of `comparator`.
      if (length === 1 || _.isString(comparator)) {
        this.models = this.sortBy(comparator);
      } else {
        this.models.sort(comparator);
      }
      if (!options.silent) this.trigger('sort', this, options);
      return this;
    },

    // Pluck an attribute from each model in the collection.
    pluck: function(attr) {
      return _.invoke(this.models, 'get', attr);
    },

    // Fetch the default set of models for this collection, resetting the
    // collection when they arrive. If `reset: true` is passed, the response
    // data will be passed through the `reset` method instead of `set`.
    fetch: function(options) {
      options = _.extend({parse: true}, options);
      var success = options.success;
      var collection = this;
      options.success = function(resp) {
        var method = options.reset ? 'reset' : 'set';
        collection[method](resp, options);
        if (success) success.call(options.context, collection, resp, options);
        collection.trigger('sync', collection, resp, options);
      };
      wrapError(this, options);
      return this.sync('read', this, options);
    },

    // Create a new instance of a model in this collection. Add the model to the
    // collection immediately, unless `wait: true` is passed, in which case we
    // wait for the server to agree.
    create: function(model, options) {
      options = options ? _.clone(options) : {};
      var wait = options.wait;
      model = this._prepareModel(model, options);
      if (!model) return false;
      if (!wait) this.add(model, options);
      var collection = this;
      var success = options.success;
      options.success = function(model, resp, callbackOpts) {
        if (wait) collection.add(model, callbackOpts);
        if (success) success.call(callbackOpts.context, model, resp, callbackOpts);
      };
      model.save(null, options);
      return model;
    },

    // **parse** converts a response into a list of models to be added to the
    // collection. The default implementation is just to pass it through.
    parse: function(resp, options) {
      return resp;
    },

    // Create a new collection with an identical list of models as this one.
    clone: function() {
      return new this.constructor(this.models, {
        model: this.model,
        comparator: this.comparator
      });
    },

    // Define how to uniquely identify models in the collection.
    modelId: function (attrs) {
      return attrs[this.model.prototype.idAttribute || 'id'];
    },

    // Private method to reset all internal state. Called when the collection
    // is first initialized or reset.
    _reset: function() {
      this.length = 0;
      this.models = [];
      this._byId  = {};
    },

    // Prepare a hash of attributes (or other model) to be added to this
    // collection.
    _prepareModel: function(attrs, options) {
      if (this._isModel(attrs)) {
        if (!attrs.collection) attrs.collection = this;
        return attrs;
      }
      options = options ? _.clone(options) : {};
      options.collection = this;
      var model = new this.model(attrs, options);
      if (!model.validationError) return model;
      this.trigger('invalid', this, model.validationError, options);
      return false;
    },

    // Internal method called by both remove and set.
    _removeModels: function(models, options) {
      var removed = [];
      for (var i = 0; i < models.length; i++) {
        var model = this.get(models[i]);
        if (!model) continue;

        var index = this.indexOf(model);
        this.models.splice(index, 1);
        this.length--;

        if (!options.silent) {
          options.index = index;
          model.trigger('remove', model, this, options);
        }

        removed.push(model);
        this._removeReference(model, options);
      }
      return removed.length ? removed : false;
    },

    // Method for checking whether an object should be considered a model for
    // the purposes of adding to the collection.
    _isModel: function (model) {
      return model instanceof Model;
    },

    // Internal method to create a model's ties to a collection.
    _addReference: function(model, options) {
      this._byId[model.cid] = model;
      var id = this.modelId(model.attributes);
      if (id != null) this._byId[id] = model;
      model.on('all', this._onModelEvent, this);
    },

    // Internal method to sever a model's ties to a collection.
    _removeReference: function(model, options) {
      delete this._byId[model.cid];
      var id = this.modelId(model.attributes);
      if (id != null) delete this._byId[id];
      if (this === model.collection) delete model.collection;
      model.off('all', this._onModelEvent, this);
    },

    // Internal method called every time a model in the set fires an event.
    // Sets need to update their indexes when models change ids. All other
    // events simply proxy through. "add" and "remove" events that originate
    // in other collections are ignored.
    _onModelEvent: function(event, model, collection, options) {
      if ((event === 'add' || event === 'remove') && collection !== this) return;
      if (event === 'destroy') this.remove(model, options);
      if (event === 'change') {
        var prevId = this.modelId(model.previousAttributes());
        var id = this.modelId(model.attributes);
        if (prevId !== id) {
          if (prevId != null) delete this._byId[prevId];
          if (id != null) this._byId[id] = model;
        }
      }
      this.trigger.apply(this, arguments);
    }

  });

  // Underscore methods that we want to implement on the Collection.
  // 90% of the core usefulness of Backbone Collections is actually implemented
  // right here:
  var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,
      foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,
      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,
      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,
      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,
      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,
      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,
      sortBy: 3, indexBy: 3};

  // Mix in each Underscore method as a proxy to `Collection#models`.
  addUnderscoreMethods(Collection, collectionMethods, 'models');

  // Backbone.View
  // -------------

  // Backbone Views are almost more convention than they are actual code. A View
  // is simply a JavaScript object that represents a logical chunk of UI in the
  // DOM. This might be a single item, an entire list, a sidebar or panel, or
  // even the surrounding frame which wraps your whole app. Defining a chunk of
  // UI as a **View** allows you to define your DOM events declaratively, without
  // having to worry about render order ... and makes it easy for the view to
  // react to specific changes in the state of your models.

  // Creating a Backbone.View creates its initial element outside of the DOM,
  // if an existing element is not provided...
  var View = Backbone.View = function(options) {
    this.cid = _.uniqueId('view');
    _.extend(this, _.pick(options, viewOptions));
    this._ensureElement();
    this.initialize.apply(this, arguments);
  };

  // Cached regex to split keys for `delegate`.
  var delegateEventSplitter = /^(\S+)\s*(.*)$/;

  // List of view options to be set as properties.
  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];

  // Set up all inheritable **Backbone.View** properties and methods.
  _.extend(View.prototype, Events, {

    // The default `tagName` of a View's element is `"div"`.
    tagName: 'div',

    // jQuery delegate for element lookup, scoped to DOM elements within the
    // current view. This should be preferred to global lookups where possible.
    $: function(selector) {
      return this.$el.find(selector);
    },

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // **render** is the core function that your view should override, in order
    // to populate its element (`this.el`), with the appropriate HTML. The
    // convention is for **render** to always return `this`.
    render: function() {
      return this;
    },

    // Remove this view by taking the element out of the DOM, and removing any
    // applicable Backbone.Events listeners.
    remove: function() {
      this._removeElement();
      this.stopListening();
      return this;
    },

    // Remove this view's element from the document and all event listeners
    // attached to it. Exposed for subclasses using an alternative DOM
    // manipulation API.
    _removeElement: function() {
      this.$el.remove();
    },

    // Change the view's element (`this.el` property) and re-delegate the
    // view's events on the new element.
    setElement: function(element) {
      this.undelegateEvents();
      this._setElement(element);
      this.delegateEvents();
      return this;
    },

    // Creates the `this.el` and `this.$el` references for this view using the
    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery
    // context or an element. Subclasses can override this to utilize an
    // alternative DOM manipulation API and are only required to set the
    // `this.el` property.
    _setElement: function(el) {
      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);
      this.el = this.$el[0];
    },

    // Set callbacks, where `this.events` is a hash of
    //
    // *{"event selector": "callback"}*
    //
    //     {
    //       'mousedown .title':  'edit',
    //       'click .button':     'save',
    //       'click .open':       function(e) { ... }
    //     }
    //
    // pairs. Callbacks will be bound to the view, with `this` set properly.
    // Uses event delegation for efficiency.
    // Omitting the selector binds the event to `this.el`.
    delegateEvents: function(events) {
      events || (events = _.result(this, 'events'));
      if (!events) return this;
      this.undelegateEvents();
      for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[method];
        if (!method) continue;
        var match = key.match(delegateEventSplitter);
        this.delegate(match[1], match[2], _.bind(method, this));
      }
      return this;
    },

    // Add a single event listener to the view's element (or a child element
    // using `selector`). This only works for delegate-able events: not `focus`,
    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.
    delegate: function(eventName, selector, listener) {
      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);
      return this;
    },

    // Clears all callbacks previously bound to the view by `delegateEvents`.
    // You usually don't need to use this, but may wish to if you have multiple
    // Backbone views attached to the same DOM element.
    undelegateEvents: function() {
      if (this.$el) this.$el.off('.delegateEvents' + this.cid);
      return this;
    },

    // A finer-grained `undelegateEvents` for removing a single delegated event.
    // `selector` and `listener` are both optional.
    undelegate: function(eventName, selector, listener) {
      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);
      return this;
    },

    // Produces a DOM element to be assigned to your view. Exposed for
    // subclasses using an alternative DOM manipulation API.
    _createElement: function(tagName) {
      return document.createElement(tagName);
    },

    // Ensure that the View has a DOM element to render into.
    // If `this.el` is a string, pass it through `$()`, take the first
    // matching element, and re-assign it to `el`. Otherwise, create
    // an element from the `id`, `className` and `tagName` properties.
    _ensureElement: function() {
      if (!this.el) {
        var attrs = _.extend({}, _.result(this, 'attributes'));
        if (this.id) attrs.id = _.result(this, 'id');
        if (this.className) attrs['class'] = _.result(this, 'className');
        this.setElement(this._createElement(_.result(this, 'tagName')));
        this._setAttributes(attrs);
      } else {
        this.setElement(_.result(this, 'el'));
      }
    },

    // Set attributes from a hash on this view's element.  Exposed for
    // subclasses using an alternative DOM manipulation API.
    _setAttributes: function(attributes) {
      this.$el.attr(attributes);
    }

  });

  // Backbone.sync
  // -------------

  // Override this function to change the manner in which Backbone persists
  // models to the server. You will be passed the type of request, and the
  // model in question. By default, makes a RESTful Ajax request
  // to the model's `url()`. Some possible customizations could be:
  //
  // * Use `setTimeout` to batch rapid-fire updates into a single request.
  // * Send up the models as XML instead of JSON.
  // * Persist models via WebSockets instead of Ajax.
  //
  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests
  // as `POST`, with a `_method` parameter containing the true HTTP method,
  // as well as all requests with the body as `application/x-www-form-urlencoded`
  // instead of `application/json` with the model in a param named `model`.
  // Useful when interfacing with server-side languages like **PHP** that make
  // it difficult to read the body of `PUT` requests.
  Backbone.sync = function(method, model, options) {
    var type = methodMap[method];

    // Default options, unless specified.
    _.defaults(options || (options = {}), {
      emulateHTTP: Backbone.emulateHTTP,
      emulateJSON: Backbone.emulateJSON
    });

    // Default JSON-request options.
    var params = {type: type, dataType: 'json'};

    // Ensure that we have a URL.
    if (!options.url) {
      params.url = _.result(model, 'url') || urlError();
    }

    // Ensure that we have the appropriate request data.
    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
      params.contentType = 'application/json';
      params.data = JSON.stringify(options.attrs || model.toJSON(options));
    }

    // For older servers, emulate JSON by encoding the request into an HTML-form.
    if (options.emulateJSON) {
      params.contentType = 'application/x-www-form-urlencoded';
      params.data = params.data ? {model: params.data} : {};
    }

    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`
    // And an `X-HTTP-Method-Override` header.
    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
      params.type = 'POST';
      if (options.emulateJSON) params.data._method = type;
      var beforeSend = options.beforeSend;
      options.beforeSend = function(xhr) {
        xhr.setRequestHeader('X-HTTP-Method-Override', type);
        if (beforeSend) return beforeSend.apply(this, arguments);
      };
    }

    // Don't process data on a non-GET request.
    if (params.type !== 'GET' && !options.emulateJSON) {
      params.processData = false;
    }

    // Pass along `textStatus` and `errorThrown` from jQuery.
    var error = options.error;
    options.error = function(xhr, textStatus, errorThrown) {
      options.textStatus = textStatus;
      options.errorThrown = errorThrown;
      if (error) error.call(options.context, xhr, textStatus, errorThrown);
    };

    // Make the request, allowing the user to override any Ajax options.
    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
    model.trigger('request', model, xhr, options);
    return xhr;
  };

  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.
  var methodMap = {
    'create': 'POST',
    'update': 'PUT',
    'patch':  'PATCH',
    'delete': 'DELETE',
    'read':   'GET'
  };

  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.
  // Override this if you'd like to use a different library.
  Backbone.ajax = function() {
    return Backbone.$.ajax.apply(Backbone.$, arguments);
  };

  // Backbone.Router
  // ---------------

  // Routers map faux-URLs to actions, and fire events when routes are
  // matched. Creating a new one sets its `routes` hash, if not set statically.
  var Router = Backbone.Router = function(options) {
    options || (options = {});
    if (options.routes) this.routes = options.routes;
    this._bindRoutes();
    this.initialize.apply(this, arguments);
  };

  // Cached regular expressions for matching named param parts and splatted
  // parts of route strings.
  var optionalParam = /\((.*?)\)/g;
  var namedParam    = /(\(\?)?:\w+/g;
  var splatParam    = /\*\w+/g;
  var escapeRegExp  = /[\-{}\[\]+?.,\\\^$|#\s]/g;

  // Set up all inheritable **Backbone.Router** properties and methods.
  _.extend(Router.prototype, Events, {

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // Manually bind a single named route to a callback. For example:
    //
    //     this.route('search/:query/p:num', 'search', function(query, num) {
    //       ...
    //     });
    //
    route: function(route, name, callback) {
      if (!_.isRegExp(route)) route = this._routeToRegExp(route);
      if (_.isFunction(name)) {
        callback = name;
        name = '';
      }
      if (!callback) callback = this[name];
      var router = this;
      Backbone.history.route(route, function(fragment) {
        var args = router._extractParameters(route, fragment);
        if (router.execute(callback, args, name) !== false) {
          router.trigger.apply(router, ['route:' + name].concat(args));
          router.trigger('route', name, args);
          Backbone.history.trigger('route', router, name, args);
        }
      });
      return this;
    },

    // Execute a route handler with the provided parameters.  This is an
    // excellent place to do pre-route setup or post-route cleanup.
    execute: function(callback, args, name) {
      if (callback) callback.apply(this, args);
    },

    // Simple proxy to `Backbone.history` to save a fragment into the history.
    navigate: function(fragment, options) {
      Backbone.history.navigate(fragment, options);
      return this;
    },

    // Bind all defined routes to `Backbone.history`. We have to reverse the
    // order of the routes here to support behavior where the most general
    // routes can be defined at the bottom of the route map.
    _bindRoutes: function() {
      if (!this.routes) return;
      this.routes = _.result(this, 'routes');
      var route, routes = _.keys(this.routes);
      while ((route = routes.pop()) != null) {
        this.route(route, this.routes[route]);
      }
    },

    // Convert a route string into a regular expression, suitable for matching
    // against the current location hash.
    _routeToRegExp: function(route) {
      route = route.replace(escapeRegExp, '\\$&')
                   .replace(optionalParam, '(?:$1)?')
                   .replace(namedParam, function(match, optional) {
                     return optional ? match : '([^/?]+)';
                   })
                   .replace(splatParam, '([^?]*?)');
      return new RegExp('^' + route + '(?:\\?([\\s\\S]*))?$');
    },

    // Given a route, and a URL fragment that it matches, return the array of
    // extracted decoded parameters. Empty or unmatched parameters will be
    // treated as `null` to normalize cross-browser behavior.
    _extractParameters: function(route, fragment) {
      var params = route.exec(fragment).slice(1);
      return _.map(params, function(param, i) {
        // Don't decode the search params.
        if (i === params.length - 1) return param || null;
        return param ? decodeURIComponent(param) : null;
      });
    }

  });

  // Backbone.History
  // ----------------

  // Handles cross-browser history management, based on either
  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or
  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)
  // and URL fragments. If the browser supports neither (old IE, natch),
  // falls back to polling.
  var History = Backbone.History = function() {
    this.handlers = [];
    this.checkUrl = _.bind(this.checkUrl, this);

    // Ensure that `History` can be used outside of the browser.
    if (typeof window !== 'undefined') {
      this.location = window.location;
      this.history = window.history;
    }
  };

  // Cached regex for stripping a leading hash/slash and trailing space.
  var routeStripper = /^[#\/]|\s+$/g;

  // Cached regex for stripping leading and trailing slashes.
  var rootStripper = /^\/+|\/+$/g;

  // Cached regex for stripping urls of hash.
  var pathStripper = /#.*$/;

  // Has the history handling already been started?
  History.started = false;

  // Set up all inheritable **Backbone.History** properties and methods.
  _.extend(History.prototype, Events, {

    // The default interval to poll for hash changes, if necessary, is
    // twenty times a second.
    interval: 50,

    // Are we at the app root?
    atRoot: function() {
      var path = this.location.pathname.replace(/[^\/]$/, '$&/');
      return path === this.root && !this.getSearch();
    },

    // Does the pathname match the root?
    matchRoot: function() {
      var path = this.decodeFragment(this.location.pathname);
      var root = path.slice(0, this.root.length - 1) + '/';
      return root === this.root;
    },

    // Unicode characters in `location.pathname` are percent encoded so they're
    // decoded for comparison. `%25` should not be decoded since it may be part
    // of an encoded parameter.
    decodeFragment: function(fragment) {
      return decodeURI(fragment.replace(/%25/g, '%2525'));
    },

    // In IE6, the hash fragment and search params are incorrect if the
    // fragment contains `?`.
    getSearch: function() {
      var match = this.location.href.replace(/#.*/, '').match(/\?.+/);
      return match ? match[0] : '';
    },

    // Gets the true hash value. Cannot use location.hash directly due to bug
    // in Firefox where location.hash will always be decoded.
    getHash: function(window) {
      var match = (window || this).location.href.match(/#(.*)$/);
      return match ? match[1] : '';
    },

    // Get the pathname and search params, without the root.
    getPath: function() {
      var path = this.decodeFragment(
        this.location.pathname + this.getSearch()
      ).slice(this.root.length - 1);
      return path.charAt(0) === '/' ? path.slice(1) : path;
    },

    // Get the cross-browser normalized URL fragment from the path or hash.
    getFragment: function(fragment) {
      if (fragment == null) {
        if (this._usePushState || !this._wantsHashChange) {
          fragment = this.getPath();
        } else {
          fragment = this.getHash();
        }
      }
      return fragment.replace(routeStripper, '');
    },

    // Start the hash change handling, returning `true` if the current URL matches
    // an existing route, and `false` otherwise.
    start: function(options) {
      if (History.started) throw new Error('Backbone.history has already been started');
      History.started = true;

      // Figure out the initial configuration. Do we need an iframe?
      // Is pushState desired ... is it available?
      this.options          = _.extend({root: '/'}, this.options, options);
      this.root             = this.options.root;
      this._wantsHashChange = this.options.hashChange !== false;
      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);
      this._useHashChange   = this._wantsHashChange && this._hasHashChange;
      this._wantsPushState  = !!this.options.pushState;
      this._hasPushState    = !!(this.history && this.history.pushState);
      this._usePushState    = this._wantsPushState && this._hasPushState;
      this.fragment         = this.getFragment();

      // Normalize root to always include a leading and trailing slash.
      this.root = ('/' + this.root + '/').replace(rootStripper, '/');

      // Transition from hashChange to pushState or vice versa if both are
      // requested.
      if (this._wantsHashChange && this._wantsPushState) {

        // If we've started off with a route from a `pushState`-enabled
        // browser, but we're currently in a browser that doesn't support it...
        if (!this._hasPushState && !this.atRoot()) {
          var root = this.root.slice(0, -1) || '/';
          this.location.replace(root + '#' + this.getPath());
          // Return immediately as browser will do redirect to new url
          return true;

        // Or if we've started out with a hash-based route, but we're currently
        // in a browser where it could be `pushState`-based instead...
        } else if (this._hasPushState && this.atRoot()) {
          this.navigate(this.getHash(), {replace: true});
        }

      }

      // Proxy an iframe to handle location events if the browser doesn't
      // support the `hashchange` event, HTML5 history, or the user wants
      // `hashChange` but not `pushState`.
      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {
        this.iframe = document.createElement('iframe');
        this.iframe.src = 'javascript:0';
        this.iframe.style.display = 'none';
        this.iframe.tabIndex = -1;
        var body = document.body;
        // Using `appendChild` will throw on IE < 9 if the document is not ready.
        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;
        iWindow.document.open();
        iWindow.document.close();
        iWindow.location.hash = '#' + this.fragment;
      }

      // Add a cross-platform `addEventListener` shim for older browsers.
      var addEventListener = window.addEventListener || function (eventName, listener) {
        return attachEvent('on' + eventName, listener);
      };

      // Depending on whether we're using pushState or hashes, and whether
      // 'onhashchange' is supported, determine how we check the URL state.
      if (this._usePushState) {
        addEventListener('popstate', this.checkUrl, false);
      } else if (this._useHashChange && !this.iframe) {
        addEventListener('hashchange', this.checkUrl, false);
      } else if (this._wantsHashChange) {
        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
      }

      if (!this.options.silent) return this.loadUrl();
    },

    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,
    // but possibly useful for unit testing Routers.
    stop: function() {
      // Add a cross-platform `removeEventListener` shim for older browsers.
      var removeEventListener = window.removeEventListener || function (eventName, listener) {
        return detachEvent('on' + eventName, listener);
      };

      // Remove window listeners.
      if (this._usePushState) {
        removeEventListener('popstate', this.checkUrl, false);
      } else if (this._useHashChange && !this.iframe) {
        removeEventListener('hashchange', this.checkUrl, false);
      }

      // Clean up the iframe if necessary.
      if (this.iframe) {
        document.body.removeChild(this.iframe);
        this.iframe = null;
      }

      // Some environments will throw when clearing an undefined interval.
      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);
      History.started = false;
    },

    // Add a route to be tested when the fragment changes. Routes added later
    // may override previous routes.
    route: function(route, callback) {
      this.handlers.unshift({route: route, callback: callback});
    },

    // Checks the current URL to see if it has changed, and if it has,
    // calls `loadUrl`, normalizing across the hidden iframe.
    checkUrl: function(e) {
      var current = this.getFragment();

      // If the user pressed the back button, the iframe's hash will have
      // changed and we should use that for comparison.
      if (current === this.fragment && this.iframe) {
        current = this.getHash(this.iframe.contentWindow);
      }

      if (current === this.fragment) return false;
      if (this.iframe) this.navigate(current);
      this.loadUrl();
    },

    // Attempt to load the current URL fragment. If a route succeeds with a
    // match, returns `true`. If no defined routes matches the fragment,
    // returns `false`.
    loadUrl: function(fragment) {
      // If the root doesn't match, no routes can match either.
      if (!this.matchRoot()) return false;
      fragment = this.fragment = this.getFragment(fragment);
      return _.some(this.handlers, function(handler) {
        if (handler.route.test(fragment)) {
          handler.callback(fragment);
          return true;
        }
      });
    },

    // Save a fragment into the hash history, or replace the URL state if the
    // 'replace' option is passed. You are responsible for properly URL-encoding
    // the fragment in advance.
    //
    // The options object can contain `trigger: true` if you wish to have the
    // route callback be fired (not usually desirable), or `replace: true`, if
    // you wish to modify the current URL without adding an entry to the history.
    navigate: function(fragment, options) {
      if (!History.started) return false;
      if (!options || options === true) options = {trigger: !!options};

      // Normalize the fragment.
      fragment = this.getFragment(fragment || '');

      // Don't include a trailing slash on the root.
      var root = this.root;
      if (fragment === '' || fragment.charAt(0) === '?') {
        root = root.slice(0, -1) || '/';
      }
      var url = root + fragment;

      // Strip the hash and decode for matching.
      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));

      if (this.fragment === fragment) return;
      this.fragment = fragment;

      // If pushState is available, we use it to set the fragment as a real URL.
      if (this._usePushState) {
        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);

      // If hash changes haven't been explicitly disabled, update the hash
      // fragment to store history.
      } else if (this._wantsHashChange) {
        this._updateHash(this.location, fragment, options.replace);
        if (this.iframe && (fragment !== this.getHash(this.iframe.contentWindow))) {
          var iWindow = this.iframe.contentWindow;

          // Opening and closing the iframe tricks IE7 and earlier to push a
          // history entry on hash-tag change.  When replace is true, we don't
          // want this.
          if (!options.replace) {
            iWindow.document.open();
            iWindow.document.close();
          }

          this._updateHash(iWindow.location, fragment, options.replace);
        }

      // If you've told us that you explicitly don't want fallback hashchange-
      // based history, then `navigate` becomes a page refresh.
      } else {
        return this.location.assign(url);
      }
      if (options.trigger) return this.loadUrl(fragment);
    },

    // Update the hash location, either replacing the current entry, or adding
    // a new one to the browser history.
    _updateHash: function(location, fragment, replace) {
      if (replace) {
        var href = location.href.replace(/(javascript:|#).*$/, '');
        location.replace(href + '#' + fragment);
      } else {
        // Some browsers require that `hash` contains a leading #.
        location.hash = '#' + fragment;
      }
    }

  });

  // Create the default Backbone.history.
  Backbone.history = new History;

  // Helpers
  // -------

  // Helper function to correctly set up the prototype chain for subclasses.
  // Similar to `goog.inherits`, but uses a hash of prototype properties and
  // class properties to be extended.
  var extend = function(protoProps, staticProps) {
    var parent = this;
    var child;

    // The constructor function for the new subclass is either defined by you
    // (the "constructor" property in your `extend` definition), or defaulted
    // by us to simply call the parent constructor.
    if (protoProps && _.has(protoProps, 'constructor')) {
      child = protoProps.constructor;
    } else {
      child = function(){ return parent.apply(this, arguments); };
    }

    // Add static properties to the constructor function, if supplied.
    _.extend(child, parent, staticProps);

    // Set the prototype chain to inherit from `parent`, without calling
    // `parent` constructor function.
    var Surrogate = function(){ this.constructor = child; };
    Surrogate.prototype = parent.prototype;
    child.prototype = new Surrogate;

    // Add prototype properties (instance properties) to the subclass,
    // if supplied.
    if (protoProps) _.extend(child.prototype, protoProps);

    // Set a convenience property in case the parent's prototype is needed
    // later.
    child.__super__ = parent.prototype;

    return child;
  };

  // Set up inheritance for the model, collection, router, view and history.
  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;

  // Throw an error when a URL is needed, and none is supplied.
  var urlError = function() {
    throw new Error('A "url" property or function must be specified');
  };

  // Wrap an optional error callback with a fallback error event.
  var wrapError = function(model, options) {
    var error = options.error;
    options.error = function(resp) {
      if (error) error.call(options.context, model, resp, options);
      model.trigger('error', model, resp, options);
    };
  };

  return Backbone;

}));

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"jquery":210,"underscore":284}],186:[function(require,module,exports){
// d3.tip
// Copyright (c) 2013 Justin Palmer
//
// Tooltips for d3.js SVG visualizations

(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module with d3 as a dependency.
    define(['d3'], factory)
  } else if (typeof module === 'object' && module.exports) {
    // CommonJS
    module.exports = function(d3) {
      d3.tip = factory(d3)
      return d3.tip
    }
  } else {
    // Browser global.
    root.d3.tip = factory(root.d3)
  }
}(this, function (d3) {

  // Public - contructs a new tooltip
  //
  // Returns a tip
  return function() {
    var direction = d3_tip_direction,
        offset    = d3_tip_offset,
        html      = d3_tip_html,
        node      = initNode(),
        svg       = null,
        point     = null,
        target    = null

    function tip(vis) {
      svg = getSVGNode(vis)
      point = svg.createSVGPoint()
      document.body.appendChild(node)
    }

    // Public - show the tooltip on the screen
    //
    // Returns a tip
    tip.show = function() {
      var args = Array.prototype.slice.call(arguments)
      if(args[args.length - 1] instanceof SVGElement) target = args.pop()

      var content = html.apply(this, args),
          poffset = offset.apply(this, args),
          dir     = direction.apply(this, args),
          nodel   = d3.select(node),
          i       = directions.length,
          coords,
          scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,
          scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft

      nodel.html(content)
        .style({ opacity: 1, 'pointer-events': 'all' })

      while(i--) nodel.classed(directions[i], false)
      coords = direction_callbacks.get(dir).apply(this)
      nodel.classed(dir, true).style({
        top: (coords.top +  poffset[0]) + scrollTop + 'px',
        left: (coords.left + poffset[1]) + scrollLeft + 'px'
      })

      return tip
    }

    // Public - hide the tooltip
    //
    // Returns a tip
    tip.hide = function() {
      var nodel = d3.select(node)
      nodel.style({ opacity: 0, 'pointer-events': 'none' })
      return tip
    }

    // Public: Proxy attr calls to the d3 tip container.  Sets or gets attribute value.
    //
    // n - name of the attribute
    // v - value of the attribute
    //
    // Returns tip or attribute value
    tip.attr = function(n, v) {
      if (arguments.length < 2 && typeof n === 'string') {
        return d3.select(node).attr(n)
      } else {
        var args =  Array.prototype.slice.call(arguments)
        d3.selection.prototype.attr.apply(d3.select(node), args)
      }

      return tip
    }

    // Public: Proxy style calls to the d3 tip container.  Sets or gets a style value.
    //
    // n - name of the property
    // v - value of the property
    //
    // Returns tip or style property value
    tip.style = function(n, v) {
      if (arguments.length < 2 && typeof n === 'string') {
        return d3.select(node).style(n)
      } else {
        var args =  Array.prototype.slice.call(arguments)
        d3.selection.prototype.style.apply(d3.select(node), args)
      }

      return tip
    }

    // Public: Set or get the direction of the tooltip
    //
    // v - One of n(north), s(south), e(east), or w(west), nw(northwest),
    //     sw(southwest), ne(northeast) or se(southeast)
    //
    // Returns tip or direction
    tip.direction = function(v) {
      if (!arguments.length) return direction
      direction = v == null ? v : d3.functor(v)

      return tip
    }

    // Public: Sets or gets the offset of the tip
    //
    // v - Array of [x, y] offset
    //
    // Returns offset or
    tip.offset = function(v) {
      if (!arguments.length) return offset
      offset = v == null ? v : d3.functor(v)

      return tip
    }

    // Public: sets or gets the html value of the tooltip
    //
    // v - String value of the tip
    //
    // Returns html value or tip
    tip.html = function(v) {
      if (!arguments.length) return html
      html = v == null ? v : d3.functor(v)

      return tip
    }

    function d3_tip_direction() { return 'n' }
    function d3_tip_offset() { return [0, 0] }
    function d3_tip_html() { return ' ' }

    var direction_callbacks = d3.map({
      n:  direction_n,
      s:  direction_s,
      e:  direction_e,
      w:  direction_w,
      nw: direction_nw,
      ne: direction_ne,
      sw: direction_sw,
      se: direction_se
    }),

    directions = direction_callbacks.keys()

    function direction_n() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.n.y - node.offsetHeight,
        left: bbox.n.x - node.offsetWidth / 2
      }
    }

    function direction_s() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.s.y,
        left: bbox.s.x - node.offsetWidth / 2
      }
    }

    function direction_e() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.e.y - node.offsetHeight / 2,
        left: bbox.e.x
      }
    }

    function direction_w() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.w.y - node.offsetHeight / 2,
        left: bbox.w.x - node.offsetWidth
      }
    }

    function direction_nw() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.nw.y - node.offsetHeight,
        left: bbox.nw.x - node.offsetWidth
      }
    }

    function direction_ne() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.ne.y - node.offsetHeight,
        left: bbox.ne.x
      }
    }

    function direction_sw() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.sw.y,
        left: bbox.sw.x - node.offsetWidth
      }
    }

    function direction_se() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.se.y,
        left: bbox.e.x
      }
    }

    function initNode() {
      var node = d3.select(document.createElement('div'))
      node.style({
        position: 'absolute',
        top: 0,
        opacity: 0,
        'pointer-events': 'none',
        'box-sizing': 'border-box'
      })

      return node.node()
    }

    function getSVGNode(el) {
      el = el.node()
      if(el.tagName.toLowerCase() === 'svg')
        return el

      return el.ownerSVGElement
    }

    // Private - gets the screen coordinates of a shape
    //
    // Given a shape on the screen, will return an SVGPoint for the directions
    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast), nw(northwest),
    // sw(southwest).
    //
    //    +-+-+
    //    |   |
    //    +   +
    //    |   |
    //    +-+-+
    //
    // Returns an Object {n, s, e, w, nw, sw, ne, se}
    function getScreenBBox() {
      var targetel   = target || d3.event.target;

      while ('undefined' === typeof targetel.getScreenCTM && 'undefined' === targetel.parentNode) {
          targetel = targetel.parentNode;
      }

      var bbox       = {},
          matrix     = targetel.getScreenCTM(),
          tbbox      = targetel.getBBox(),
          width      = tbbox.width,
          height     = tbbox.height,
          x          = tbbox.x,
          y          = tbbox.y

      point.x = x
      point.y = y
      bbox.nw = point.matrixTransform(matrix)
      point.x += width
      bbox.ne = point.matrixTransform(matrix)
      point.y += height
      bbox.se = point.matrixTransform(matrix)
      point.x -= width
      bbox.sw = point.matrixTransform(matrix)
      point.y -= height / 2
      bbox.w  = point.matrixTransform(matrix)
      point.x += width
      bbox.e = point.matrixTransform(matrix)
      point.x -= width / 2
      point.y -= height / 2
      bbox.n = point.matrixTransform(matrix)
      point.y += height
      bbox.s = point.matrixTransform(matrix)

      return bbox
    }

    return tip
  };

}));

},{}],187:[function(require,module,exports){

},{}],188:[function(require,module,exports){
var BindBase,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BindBase = (function(superClass) {
  extend(BindBase, superClass);

  function BindBase() {
    return BindBase.__super__.constructor.apply(this, arguments);
  }

  BindBase.prototype.updateAttrs = function(e) {
    e.stopPropagation();
    return this.view.model.set(Backbone.Syphon.serialize(this));
  };

  return BindBase;

})(Marionette.Behavior);

module.exports = BindBase;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvYmluZEJhc2UuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvYmluZEJhc2UuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQUEsUUFBQTtFQUFBOzs7QUFBTTs7Ozs7OztxQkFFSixXQUFBLEdBQWEsU0FBQyxDQUFEO0lBQ1gsQ0FBQyxDQUFDLGVBQUYsQ0FBQTtXQUNBLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQVosQ0FBZ0IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFoQixDQUEwQixJQUExQixDQUFoQjtFQUZXOzs7O0dBRlEsVUFBVSxDQUFDOztBQVFsQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],189:[function(require,module,exports){
var BindInputs,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BindInputs = (function(superClass) {
  extend(BindInputs, superClass);

  function BindInputs() {
    return BindInputs.__super__.constructor.apply(this, arguments);
  }

  BindInputs.prototype.events = {
    'input input': 'updateAttrs'
  };

  return BindInputs;

})(require('./bindBase'));

module.exports = BindInputs;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvYmluZElucHV0cy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fYmVoYXZpb3JzL2xpYi9iaW5kSW5wdXRzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBRUosTUFBQSxHQUNFO0lBQUEsYUFBQSxFQUFnQixhQUFoQjs7Ozs7R0FIcUIsT0FBQSxDQUFRLFlBQVI7O0FBT3pCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./bindBase":188}],190:[function(require,module,exports){
var CopyToClipboard,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

CopyToClipboard = (function(superClass) {
  extend(CopyToClipboard, superClass);

  function CopyToClipboard() {
    this.destroyClipboard = bind(this.destroyClipboard, this);
    return CopyToClipboard.__super__.constructor.apply(this, arguments);
  }

  CopyToClipboard.prototype.ui = {
    copyToClipboard: '[data-click=clipboard]'
  };

  CopyToClipboard.prototype.events = {
    'click @ui.copyToClipboard': 'copyToClipboard'
  };

  CopyToClipboard.prototype.copyToClipboard = function(e) {
    var text;
    e.preventDefault();
    text = this.options.text;
    this.clipboard = new Clipboard('[data-click=clipboard]', {
      text: function() {
        return text;
      }
    });
    this.clipboard.on('success', (function(_this) {
      return function() {
        _this.destroyClipboard();
        return _this.view.triggerMethod('clipboard:success');
      };
    })(this));
    return this.clipboard.on('error', (function(_this) {
      return function() {
        _this.destroyClipboard();
        return _this.view.triggerMethod('clipboard:error');
      };
    })(this));
  };

  CopyToClipboard.prototype.destroyClipboard = function() {
    return this.clipboard.destroy();
  };

  return CopyToClipboard;

})(Marionette.Behavior);

module.exports = CopyToClipboard;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvY29weVRvQ2xpcGJvYXJkLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2NvcHlUb0NsaXBib2FyZC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsSUFBQSxlQUFBO0VBQUE7Ozs7QUFBTTs7Ozs7Ozs7NEJBRUosRUFBQSxHQUNFO0lBQUEsZUFBQSxFQUFpQix3QkFBakI7Ozs0QkFFRixNQUFBLEdBQ0U7SUFBQSwyQkFBQSxFQUE2QixpQkFBN0I7Ozs0QkFFRixlQUFBLEdBQWlCLFNBQUMsQ0FBRDtBQUNmLFFBQUE7SUFBQSxDQUFDLENBQUMsY0FBRixDQUFBO0lBR0EsSUFBQSxHQUFPLElBQUMsQ0FBQSxPQUFPLENBQUM7SUFDaEIsSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLFNBQUosQ0FBYyx3QkFBZCxFQUF3QztNQUFFLElBQUEsRUFBTSxTQUFBO2VBQUc7TUFBSCxDQUFSO0tBQXhDO0lBR2IsSUFBQyxDQUFBLFNBQVMsQ0FBQyxFQUFYLENBQWMsU0FBZCxFQUF5QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFDdkIsS0FBQyxDQUFBLGdCQUFELENBQUE7ZUFDQSxLQUFDLENBQUEsSUFBSSxDQUFDLGFBQU4sQ0FBb0IsbUJBQXBCO01BRnVCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QjtXQUtBLElBQUMsQ0FBQSxTQUFTLENBQUMsRUFBWCxDQUFjLE9BQWQsRUFBdUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ3JCLEtBQUMsQ0FBQSxnQkFBRCxDQUFBO2VBQ0EsS0FBQyxDQUFBLElBQUksQ0FBQyxhQUFOLENBQW9CLGlCQUFwQjtNQUZxQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBdkI7RUFiZTs7NEJBa0JqQixnQkFBQSxHQUFrQixTQUFBO1dBQUcsSUFBQyxDQUFBLFNBQVMsQ0FBQyxPQUFYLENBQUE7RUFBSDs7OztHQTFCVSxVQUFVLENBQUM7O0FBOEJ6QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],191:[function(require,module,exports){
var DownloadFileBehavior, defaultOptions, destroyClickedElement,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

destroyClickedElement = function(e) {
  return $(e.currentTarget).remove();
};

defaultOptions = {
  filename: 'download.txt',
  type: 'text/plain',
  content: null
};

DownloadFileBehavior = (function(superClass) {
  extend(DownloadFileBehavior, superClass);

  function DownloadFileBehavior() {
    return DownloadFileBehavior.__super__.constructor.apply(this, arguments);
  }

  DownloadFileBehavior.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    return this.view.downloadFile = this.downloadFile;
  };

  DownloadFileBehavior.prototype.downloadFile = function(options) {
    var downloadLink, textFileAsBlob;
    if (options == null) {
      options = {};
    }
    options = _.extend(defaultOptions, options);
    textFileAsBlob = new Blob([options.content], {
      type: options.type
    });
    if (options.preview) {
      return window.open(window.URL.createObjectURL(textFileAsBlob), '_blank');
    }
    downloadLink = document.createElement('a');
    downloadLink.download = options.filename;
    downloadLink.innerHTML = 'Download File';
    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
    downloadLink.onclick = destroyClickedElement;
    downloadLink.style.display = 'none';
    document.body.appendChild(downloadLink);
    return downloadLink.click();
  };

  return DownloadFileBehavior;

})(Marionette.Behavior);

module.exports = DownloadFileBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvZG93bmxvYWRGaWxlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2Rvd25sb2FkRmlsZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsSUFBQSwyREFBQTtFQUFBOzs7QUFBQSxxQkFBQSxHQUF3QixTQUFDLENBQUQ7U0FBTyxDQUFBLENBQUUsQ0FBQyxDQUFDLGFBQUosQ0FBa0IsQ0FBQyxNQUFuQixDQUFBO0FBQVA7O0FBR3hCLGNBQUEsR0FDRTtFQUFBLFFBQUEsRUFBVSxjQUFWO0VBQ0EsSUFBQSxFQUFVLFlBRFY7RUFFQSxPQUFBLEVBQVUsSUFGVjs7O0FBTUk7Ozs7Ozs7aUNBRUosVUFBQSxHQUFZLFNBQUMsT0FBRDs7TUFBQyxVQUFROztXQUNuQixJQUFDLENBQUEsSUFBSSxDQUFDLFlBQU4sR0FBcUIsSUFBQyxDQUFBO0VBRFo7O2lDQUdaLFlBQUEsR0FBYyxTQUFDLE9BQUQ7QUFHWixRQUFBOztNQUhhLFVBQVE7O0lBR3JCLE9BQUEsR0FBVSxDQUFDLENBQUMsTUFBRixDQUFTLGNBQVQsRUFBeUIsT0FBekI7SUFHVixjQUFBLEdBQWlCLElBQUksSUFBSixDQUFTLENBQUUsT0FBTyxDQUFDLE9BQVYsQ0FBVCxFQUE4QjtNQUFFLElBQUEsRUFBTSxPQUFPLENBQUMsSUFBaEI7S0FBOUI7SUFHakIsSUFBMkUsT0FBTyxDQUFDLE9BQW5GO0FBQUEsYUFBTyxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBWCxDQUEyQixjQUEzQixDQUFaLEVBQXVELFFBQXZELEVBQVA7O0lBR0EsWUFBQSxHQUE4QixRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QjtJQUM5QixZQUFZLENBQUMsUUFBYixHQUE4QixPQUFPLENBQUM7SUFDdEMsWUFBWSxDQUFDLFNBQWIsR0FBOEI7SUFDOUIsWUFBWSxDQUFDLElBQWIsR0FBOEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFYLENBQTJCLGNBQTNCO0lBQzlCLFlBQVksQ0FBQyxPQUFiLEdBQThCO0lBQzlCLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBbkIsR0FBOEI7SUFHOUIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFkLENBQTBCLFlBQTFCO1dBQ0EsWUFBWSxDQUFDLEtBQWIsQ0FBQTtFQXJCWTs7OztHQUxtQixVQUFVLENBQUM7O0FBOEI5QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],192:[function(require,module,exports){
var FlashesBehavior, _sendFlash,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_sendFlash = function(type, obj) {
  return Backbone.Radio.channel('flash').trigger(type, obj);
};

FlashesBehavior = (function(superClass) {
  extend(FlashesBehavior, superClass);

  function FlashesBehavior() {
    return FlashesBehavior.__super__.constructor.apply(this, arguments);
  }

  FlashesBehavior.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.view._flashes = this.options;
    this.view.flashError = this.flashError;
    return this.view.flashSuccess = this.flashSuccess;
  };

  FlashesBehavior.prototype.flashError = function(obj) {
    if (obj == null) {
      obj = {};
    }
    return _sendFlash('error', this._flashes['error'] || obj);
  };

  FlashesBehavior.prototype.flashSuccess = function(obj) {
    if (obj == null) {
      obj = {};
    }
    return _sendFlash('success', this._flashes['success'] || obj);
  };

  return FlashesBehavior;

})(Marionette.Behavior);

module.exports = FlashesBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvZmxhc2hlcy5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fYmVoYXZpb3JzL2xpYi9mbGFzaGVzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLDJCQUFBO0VBQUE7OztBQUFBLFVBQUEsR0FBYSxTQUFDLElBQUQsRUFBTyxHQUFQO1NBQ1gsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLE9BQXZCLENBQStCLENBQUMsT0FBaEMsQ0FBd0MsSUFBeEMsRUFBOEMsR0FBOUM7QUFEVzs7QUFLUDs7Ozs7Ozs0QkFFSixVQUFBLEdBQVksU0FBQyxPQUFEOztNQUFDLFVBQVE7O0lBQ25CLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBTixHQUFzQixJQUFDLENBQUE7SUFDdkIsSUFBQyxDQUFBLElBQUksQ0FBQyxVQUFOLEdBQXNCLElBQUMsQ0FBQTtXQUN2QixJQUFDLENBQUEsSUFBSSxDQUFDLFlBQU4sR0FBc0IsSUFBQyxDQUFBO0VBSGI7OzRCQUtaLFVBQUEsR0FBWSxTQUFDLEdBQUQ7O01BQUMsTUFBSTs7V0FDZixVQUFBLENBQVcsT0FBWCxFQUFvQixJQUFDLENBQUEsUUFBUyxDQUFBLE9BQUEsQ0FBVixJQUFzQixHQUExQztFQURVOzs0QkFHWixZQUFBLEdBQWMsU0FBQyxHQUFEOztNQUFDLE1BQUk7O1dBQ2pCLFVBQUEsQ0FBVyxTQUFYLEVBQXNCLElBQUMsQ0FBQSxRQUFTLENBQUEsU0FBQSxDQUFWLElBQXdCLEdBQTlDO0VBRFk7Ozs7R0FWYyxVQUFVLENBQUM7O0FBZXpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],193:[function(require,module,exports){
var FormSerializeBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FormSerializeBehavior = (function(superClass) {
  extend(FormSerializeBehavior, superClass);

  function FormSerializeBehavior() {
    return FormSerializeBehavior.__super__.constructor.apply(this, arguments);
  }

  FormSerializeBehavior.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.view.getFormData = (function(_this) {
      return function(options) {
        return _this.getFormData(options);
      };
    })(this);
    return this.view.setFormData = (function(_this) {
      return function(options) {
        return _this.setFormData(options);
      };
    })(this);
  };

  FormSerializeBehavior.prototype.getFormData = function(options) {
    var data, key, val;
    if (options == null) {
      options = {};
    }
    if (!options.excludeFalsey) {
      return Backbone.Syphon.serialize(this);
    }
    data = Backbone.Syphon.serialize(this);
    for (key in data) {
      val = data[key];
      if (!val) {
        delete data[key];
      }
    }
    return data;
  };

  FormSerializeBehavior.prototype.setFormData = function(options) {
    return Backbone.Syphon.deserialize(this, this.model.attributes);
  };

  return FormSerializeBehavior;

})(Marionette.Behavior);

module.exports = FormSerializeBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvZm9ybVNlcmlhbGl6ZS5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fYmVoYXZpb3JzL2xpYi9mb3JtU2VyaWFsaXplLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLHFCQUFBO0VBQUE7OztBQUFNOzs7Ozs7O2tDQUVKLFVBQUEsR0FBWSxTQUFDLE9BQUQ7O01BQUMsVUFBUTs7SUFDbkIsSUFBQyxDQUFBLElBQUksQ0FBQyxXQUFOLEdBQW9CLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxPQUFEO2VBQWEsS0FBQyxDQUFBLFdBQUQsQ0FBYSxPQUFiO01BQWI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO1dBQ3BCLElBQUMsQ0FBQSxJQUFJLENBQUMsV0FBTixHQUFvQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsT0FBRDtlQUFhLEtBQUMsQ0FBQSxXQUFELENBQWEsT0FBYjtNQUFiO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTtFQUZWOztrQ0FJWixXQUFBLEdBQWEsU0FBQyxPQUFEO0FBQ1gsUUFBQTs7TUFEWSxVQUFROztJQUNwQixJQUFBLENBQTJDLE9BQU8sQ0FBQyxhQUFuRDtBQUFBLGFBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFoQixDQUEwQixJQUExQixFQUFQOztJQUdBLElBQUEsR0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQWhCLENBQTBCLElBQTFCO0FBRVAsU0FBQSxXQUFBOztNQUNFLElBQW9CLENBQUksR0FBeEI7UUFBQSxPQUFPLElBQUssQ0FBQSxHQUFBLEVBQVo7O0FBREY7QUFHQSxXQUFPO0VBVEk7O2tDQVdiLFdBQUEsR0FBYSxTQUFDLE9BQUQ7V0FDWCxRQUFRLENBQUMsTUFBTSxDQUFDLFdBQWhCLENBQTZCLElBQTdCLEVBQWdDLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBdkM7RUFEVzs7OztHQWpCcUIsVUFBVSxDQUFDOztBQXNCL0MsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],194:[function(require,module,exports){
var ModelEventsBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ModelEventsBehavior = (function(superClass) {
  extend(ModelEventsBehavior, superClass);

  function ModelEventsBehavior() {
    return ModelEventsBehavior.__super__.constructor.apply(this, arguments);
  }

  ModelEventsBehavior.prototype.modelEvents = {
    'request': 'onModelRequest',
    'sync': 'onModelSync',
    'error': 'onModelError'
  };

  ModelEventsBehavior.prototype.onModelRequest = function(model, status, options) {
    var base;
    return typeof (base = this.view).onRequest === "function" ? base.onRequest(model, status, options) : void 0;
  };

  ModelEventsBehavior.prototype.onModelSync = function(model, response, options) {
    var base;
    return typeof (base = this.view).onSync === "function" ? base.onSync(model, response, options) : void 0;
  };

  ModelEventsBehavior.prototype.onModelError = function(model, response, options) {
    var base;
    return typeof (base = this.view).onError === "function" ? base.onError(model, response, options) : void 0;
  };

  return ModelEventsBehavior;

})(Marionette.Behavior);

module.exports = ModelEventsBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvbW9kZWxFdmVudHMuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvbW9kZWxFdmVudHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsbUJBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7Z0NBRUosV0FBQSxHQUNFO0lBQUEsU0FBQSxFQUFZLGdCQUFaO0lBQ0EsTUFBQSxFQUFZLGFBRFo7SUFFQSxPQUFBLEVBQVksY0FGWjs7O2dDQUlGLGNBQUEsR0FBZ0IsU0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixPQUFoQjtBQUNkLFFBQUE7b0VBQUssQ0FBQyxVQUFXLE9BQU8sUUFBUTtFQURsQjs7Z0NBR2hCLFdBQUEsR0FBYSxTQUFDLEtBQUQsRUFBUSxRQUFSLEVBQWtCLE9BQWxCO0FBQ1gsUUFBQTtpRUFBSyxDQUFDLE9BQVEsT0FBTyxVQUFVO0VBRHBCOztnQ0FHYixZQUFBLEdBQWMsU0FBQyxLQUFELEVBQVEsUUFBUixFQUFrQixPQUFsQjtBQUNaLFFBQUE7a0VBQUssQ0FBQyxRQUFTLE9BQU8sVUFBVTtFQURwQjs7OztHQWJrQixVQUFVLENBQUM7O0FBa0I3QyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],195:[function(require,module,exports){
var SubmitButtonBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

SubmitButtonBehavior = (function(superClass) {
  extend(SubmitButtonBehavior, superClass);

  function SubmitButtonBehavior() {
    return SubmitButtonBehavior.__super__.constructor.apply(this, arguments);
  }

  SubmitButtonBehavior.prototype.ui = {
    submit: '[data-click=submit]'
  };

  SubmitButtonBehavior.prototype.events = {
    'click @ui.submit:not(.disabled)': 'onSubmitClick'
  };

  SubmitButtonBehavior.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.view.disableSubmit = (function(_this) {
      return function() {
        return _this.disableSubmit();
      };
    })(this);
    return this.view.enableSubmit = (function(_this) {
      return function() {
        return _this.enableSubmit();
      };
    })(this);
  };

  SubmitButtonBehavior.prototype.onSubmitClick = function(e) {
    var base;
    return typeof (base = this.view).onSubmit === "function" ? base.onSubmit(e) : void 0;
  };

  SubmitButtonBehavior.prototype.disableSubmit = function() {
    return this.ui.submit.addClass('disabled');
  };

  SubmitButtonBehavior.prototype.enableSubmit = function() {
    return this.ui.submit.removeClass('disabled');
  };

  return SubmitButtonBehavior;

})(Marionette.Behavior);

module.exports = SubmitButtonBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvc3VibWl0QnV0dG9uLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL3N1Ym1pdEJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsSUFBQSxvQkFBQTtFQUFBOzs7QUFBTTs7Ozs7OztpQ0FFSixFQUFBLEdBQ0U7SUFBQSxNQUFBLEVBQVEscUJBQVI7OztpQ0FFRixNQUFBLEdBQ0U7SUFBQSxpQ0FBQSxFQUFtQyxlQUFuQzs7O2lDQUVGLFVBQUEsR0FBWSxTQUFDLE9BQUQ7O01BQUMsVUFBUTs7SUFDbkIsSUFBQyxDQUFBLElBQUksQ0FBQyxhQUFOLEdBQXNCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxhQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7V0FDdEIsSUFBQyxDQUFBLElBQUksQ0FBQyxZQUFOLEdBQXNCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUFHLEtBQUMsQ0FBQSxZQUFELENBQUE7TUFBSDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUE7RUFGWjs7aUNBSVosYUFBQSxHQUFlLFNBQUMsQ0FBRDtBQUFPLFFBQUE7bUVBQUssQ0FBQyxTQUFVO0VBQXZCOztpQ0FDZixhQUFBLEdBQWUsU0FBQTtXQUFHLElBQUMsQ0FBQSxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEI7RUFBSDs7aUNBQ2YsWUFBQSxHQUFjLFNBQUE7V0FBSSxJQUFDLENBQUEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFYLENBQXVCLFVBQXZCO0VBQUo7Ozs7R0FkbUIsVUFBVSxDQUFDOztBQWtCOUMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],196:[function(require,module,exports){
var TooltipBehavior,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

TooltipBehavior = (function(superClass) {
  extend(TooltipBehavior, superClass);

  function TooltipBehavior() {
    return TooltipBehavior.__super__.constructor.apply(this, arguments);
  }

  TooltipBehavior.prototype.ui = {
    tooltips: '[data-toggle=tooltip]'
  };

  TooltipBehavior.prototype.initialize = function() {
    return this.view.clearTooltips = (function(_this) {
      return function() {
        return _this.clear();
      };
    })(this);
  };

  TooltipBehavior.prototype.clear = function() {
    this.ui.tooltips.tooltip('hide');
    return this.ui.tooltips.tooltip('dispose');
  };

  TooltipBehavior.prototype.onRender = function() {
    var ref;
    return (ref = this.ui.tooltips) != null ? ref.tooltip() : void 0;
  };

  TooltipBehavior.prototype.onBeforeDestroy = function() {
    return this.clear();
  };

  return TooltipBehavior;

})(Marionette.Behavior);

module.exports = TooltipBehavior;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvdG9vbHRpcHMuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvdG9vbHRpcHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsZUFBQTtFQUFBOzs7QUFBTTs7Ozs7Ozs0QkFFSixFQUFBLEdBQ0U7SUFBQSxRQUFBLEVBQVUsdUJBQVY7Ozs0QkFFRixVQUFBLEdBQVksU0FBQTtXQUVWLElBQUMsQ0FBQSxJQUFJLENBQUMsYUFBTixHQUFzQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7ZUFBRyxLQUFDLENBQUEsS0FBRCxDQUFBO01BQUg7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBO0VBRlo7OzRCQUlaLEtBQUEsR0FBTyxTQUFBO0lBQ0wsSUFBQyxDQUFBLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBYixDQUFxQixNQUFyQjtXQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQWIsQ0FBcUIsU0FBckI7RUFGSzs7NEJBSVAsUUFBQSxHQUFVLFNBQUE7QUFBRyxRQUFBO2lEQUFZLENBQUUsT0FBZCxDQUFBO0VBQUg7OzRCQUNWLGVBQUEsR0FBaUIsU0FBQTtXQUFHLElBQUMsQ0FBQSxLQUFELENBQUE7RUFBSDs7OztHQWRXLFVBQVUsQ0FBQzs7QUFrQnpDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],197:[function(require,module,exports){
Marionette.Decorator = require('./decorator');

Marionette.View.prototype.serializeModel = function() {
  if (!this.model) {
    return {};
  } else if (this.model.decorator) {
    return this.model.decorator.decorate(this.model);
  }
  return _.clone(this.model.attributes);
};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2VudGl0aWVzL2xpYi9jb25maWcuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2VudGl0aWVzL2xpYi9jb25maWcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLFVBQVUsQ0FBQyxTQUFYLEdBQXVCLE9BQUEsQ0FBUSxhQUFSOztBQU12QixVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUExQixHQUEyQyxTQUFBO0VBR3pDLElBQUcsQ0FBQyxJQUFJLENBQUMsS0FBVDtBQUNFLFdBQU8sR0FEVDtHQUFBLE1BS0ssSUFBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQWQ7QUFDSCxXQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQXJCLENBQThCLElBQUksQ0FBQyxLQUFuQyxFQURKOztBQUlMLFNBQU8sQ0FBQyxDQUFDLEtBQUYsQ0FBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQW5CO0FBWmtDIn0=

},{"./decorator":198}],198:[function(require,module,exports){
var BaseDecorator;

BaseDecorator = (function() {
  function BaseDecorator() {}

  BaseDecorator.decorate = function(model) {
    var data, func, i, len, ref;
    data = _.clone(model.attributes);
    ref = _.functions(this.prototype);
    for (i = 0, len = ref.length; i < len; i++) {
      func = ref[i];
      if (func === 'constructor') {
        continue;
      }
      data[func] = this.prototype[func].apply(model);
    }
    return data;
  };

  return BaseDecorator;

})();

module.exports = BaseDecorator;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2VudGl0aWVzL2xpYi9kZWNvcmF0b3IuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2VudGl0aWVzL2xpYi9kZWNvcmF0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLElBQUE7O0FBQU07OztFQUlKLGFBQUMsQ0FBQSxRQUFELEdBQVcsU0FBQyxLQUFEO0FBSVQsUUFBQTtJQUFBLElBQUEsR0FBTyxDQUFDLENBQUMsS0FBRixDQUFRLEtBQUssQ0FBQyxVQUFkO0FBSVA7QUFBQSxTQUFBLHFDQUFBOztNQUdFLElBQVksSUFBQSxLQUFRLGFBQXBCO0FBQUEsaUJBQUE7O01BR0EsSUFBSyxDQUFBLElBQUEsQ0FBTCxHQUFhLElBQUMsQ0FBQSxTQUFVLENBQUEsSUFBQSxDQUFLLENBQUMsS0FBakIsQ0FBdUIsS0FBdkI7QUFOZjtBQVNBLFdBQU87RUFqQkU7Ozs7OztBQXFCYixNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],199:[function(require,module,exports){
var FlashCollection,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FlashCollection = (function(superClass) {
  extend(FlashCollection, superClass);

  function FlashCollection() {
    return FlashCollection.__super__.constructor.apply(this, arguments);
  }

  FlashCollection.prototype.model = require('./model');

  return FlashCollection;

})(Backbone.Collection);

module.exports = FlashCollection;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi9jb2xsZWN0aW9uLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9mbGFzaC9saWIvY29sbGVjdGlvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsSUFBQSxlQUFBO0VBQUE7OztBQUFNOzs7Ozs7OzRCQUNKLEtBQUEsR0FBTyxPQUFBLENBQVEsU0FBUjs7OztHQURxQixRQUFRLENBQUM7O0FBS3ZDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{"./model":201}],200:[function(require,module,exports){
var FlashComponent, FlashList,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

require('./service');

FlashList = require('./views/flashList');

FlashComponent = (function(superClass) {
  extend(FlashComponent, superClass);

  function FlashComponent() {
    this.showListView = bind(this.showListView, this);
    return FlashComponent.__super__.constructor.apply(this, arguments);
  }

  FlashComponent.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    this.container = options.container;
    return Backbone.Radio.channel('flash').request('collection').then((function(_this) {
      return function(collection) {
        _this.collection = collection;
        return _this.collection.on('update', _this.showListView, _this);
      };
    })(this));
  };

  FlashComponent.prototype.radioEvents = {
    'flash add': 'add',
    'flash reset': 'reset',
    'flash error': 'error',
    'flash warning': 'warning',
    'flash success': 'success'
  };

  FlashComponent.prototype.add = function(options) {
    if (options == null) {
      options = {};
    }
    return this.collection.add(options);
  };

  FlashComponent.prototype.reset = function() {
    return this.collection.reset();
  };

  FlashComponent.prototype.error = function(options) {
    if (options == null) {
      options = {};
    }
    return this.collection.add(_.extend(options, {
      context: 'danger'
    }));
  };

  FlashComponent.prototype.warning = function(options) {
    if (options == null) {
      options = {};
    }
    return this.collection.add(_.extend(options, {
      context: 'warning'
    }));
  };

  FlashComponent.prototype.success = function(options) {
    if (options == null) {
      options = {};
    }
    return this.collection.add(_.extend(options, {
      context: 'success'
    }));
  };

  FlashComponent.prototype.showListView = function() {
    if (!this.rendered) {
      this.container.show(new FlashList({
        collection: this.collection
      }));
      return this.rendered = true;
    }
  };

  return FlashComponent;

})(Backbone.Marionette.Service);

module.exports = FlashComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi9jb21wb25lbnQuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi9jb21wb25lbnQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEseUJBQUE7RUFBQTs7OztBQUFBLE9BQUEsQ0FBUSxXQUFSOztBQUNBLFNBQUEsR0FBWSxPQUFBLENBQVEsbUJBQVI7O0FBUU47Ozs7Ozs7OzJCQUVKLFVBQUEsR0FBWSxTQUFDLE9BQUQ7O01BQUMsVUFBVTs7SUFDckIsSUFBQyxDQUFBLFNBQUQsR0FBYSxPQUFPLENBQUM7V0FDckIsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLE9BQXZCLENBQStCLENBQUMsT0FBaEMsQ0FBd0MsWUFBeEMsQ0FBcUQsQ0FBQyxJQUF0RCxDQUEyRCxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsVUFBRDtRQUN6RCxLQUFDLENBQUEsVUFBRCxHQUFjO2VBQ2QsS0FBQyxDQUFBLFVBQVUsQ0FBQyxFQUFaLENBQWUsUUFBZixFQUF5QixLQUFDLENBQUEsWUFBMUIsRUFBd0MsS0FBeEM7TUFGeUQ7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTNEO0VBRlU7OzJCQU1aLFdBQUEsR0FDRTtJQUFBLFdBQUEsRUFBa0IsS0FBbEI7SUFDQSxhQUFBLEVBQWtCLE9BRGxCO0lBRUEsYUFBQSxFQUFrQixPQUZsQjtJQUdBLGVBQUEsRUFBa0IsU0FIbEI7SUFJQSxlQUFBLEVBQWtCLFNBSmxCOzs7MkJBTUYsR0FBQSxHQUFLLFNBQUMsT0FBRDs7TUFBQyxVQUFVOztXQUNkLElBQUMsQ0FBQSxVQUFVLENBQUMsR0FBWixDQUFnQixPQUFoQjtFQURHOzsyQkFHTCxLQUFBLEdBQU8sU0FBQTtXQUNMLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBWixDQUFBO0VBREs7OzJCQUdQLEtBQUEsR0FBTyxTQUFDLE9BQUQ7O01BQUMsVUFBUTs7V0FDZCxJQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0IsQ0FBQyxDQUFDLE1BQUYsQ0FBVSxPQUFWLEVBQW1CO01BQUUsT0FBQSxFQUFVLFFBQVo7S0FBbkIsQ0FBaEI7RUFESzs7MkJBR1AsT0FBQSxHQUFTLFNBQUMsT0FBRDs7TUFBQyxVQUFROztXQUNoQixJQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0IsQ0FBQyxDQUFDLE1BQUYsQ0FBVSxPQUFWLEVBQW1CO01BQUUsT0FBQSxFQUFVLFNBQVo7S0FBbkIsQ0FBaEI7RUFETzs7MkJBR1QsT0FBQSxHQUFTLFNBQUMsT0FBRDs7TUFBQyxVQUFROztXQUNoQixJQUFDLENBQUEsVUFBVSxDQUFDLEdBQVosQ0FBZ0IsQ0FBQyxDQUFDLE1BQUYsQ0FBVSxPQUFWLEVBQW1CO01BQUUsT0FBQSxFQUFVLFNBQVo7S0FBbkIsQ0FBaEI7RUFETzs7MkJBR1QsWUFBQSxHQUFjLFNBQUE7SUFDWixJQUFBLENBQU8sSUFBQyxDQUFBLFFBQVI7TUFDRSxJQUFDLENBQUEsU0FBUyxDQUFDLElBQVgsQ0FBZ0IsSUFBSSxTQUFKLENBQWM7UUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLFVBQWY7T0FBZCxDQUFoQjthQUNBLElBQUMsQ0FBQSxRQUFELEdBQVksS0FGZDs7RUFEWTs7OztHQTlCYSxRQUFRLENBQUMsVUFBVSxDQUFDOztBQXFDakQsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./service":202,"./views/flashList":203}],201:[function(require,module,exports){
var FlashModel,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FlashModel = (function(superClass) {
  extend(FlashModel, superClass);

  function FlashModel() {
    return FlashModel.__super__.constructor.apply(this, arguments);
  }

  FlashModel.prototype.defaults = {
    timeout: 5000,
    dismissible: true,
    context: 'info'
  };

  FlashModel.prototype.dismiss = function() {
    return this.collection.remove(this);
  };

  return FlashModel;

})(Backbone.Model);

module.exports = FlashModel;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi9tb2RlbC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fZmxhc2gvbGliL21vZGVsLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBRUosUUFBQSxHQUNFO0lBQUEsT0FBQSxFQUFTLElBQVQ7SUFDQSxXQUFBLEVBQWEsSUFEYjtJQUVBLE9BQUEsRUFBUyxNQUZUOzs7dUJBV0YsT0FBQSxHQUFTLFNBQUE7V0FDUCxJQUFDLENBQUEsVUFBVSxDQUFDLE1BQVosQ0FBbUIsSUFBbkI7RUFETzs7OztHQWRjLFFBQVEsQ0FBQzs7QUFtQmxDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIn0=

},{}],202:[function(require,module,exports){
var FlashCollection, FlashService,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FlashCollection = require('./collection');

FlashService = (function(superClass) {
  extend(FlashService, superClass);

  function FlashService() {
    return FlashService.__super__.constructor.apply(this, arguments);
  }

  FlashService.prototype.radioRequests = {
    'flash collection': 'getCollection'
  };

  FlashService.prototype.alerts = null;

  FlashService.prototype.getCollection = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        _this.alerts || (_this.alerts = new FlashCollection());
        resolve(_this.alerts);
      };
    })(this));
  };

  return FlashService;

})(Backbone.Marionette.Service);

module.exports = new FlashService();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi9zZXJ2aWNlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9mbGFzaC9saWIvc2VydmljZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSw2QkFBQTtFQUFBOzs7QUFBQSxlQUFBLEdBQWtCLE9BQUEsQ0FBUSxjQUFSOztBQVFaOzs7Ozs7O3lCQUVKLGFBQUEsR0FDRTtJQUFBLGtCQUFBLEVBQW9CLGVBQXBCOzs7eUJBRUYsTUFBQSxHQUFROzt5QkFFUixhQUFBLEdBQWUsU0FBQTtBQUNiLFdBQU8sSUFBSSxPQUFKLENBQVksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLE9BQUQsRUFBUyxNQUFUO1FBQ2pCLEtBQUMsQ0FBQSxXQUFELEtBQUMsQ0FBQSxTQUFXLElBQUksZUFBSixDQUFBO1FBQ1osT0FBQSxDQUFRLEtBQUMsQ0FBQSxNQUFUO01BRmlCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFaO0VBRE07Ozs7R0FQVSxRQUFRLENBQUMsVUFBVSxDQUFDOztBQWUvQyxNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFJLFlBQUosQ0FBQSJ9

},{"./collection":199}],203:[function(require,module,exports){
var FlashChild, FlashList,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

FlashChild = (function(superClass) {
  extend(FlashChild, superClass);

  function FlashChild() {
    this.dismiss = bind(this.dismiss, this);
    return FlashChild.__super__.constructor.apply(this, arguments);
  }

  FlashChild.prototype.className = 'row';

  FlashChild.prototype.template = require('./templates/flash_child');

  FlashChild.prototype.attributes = {
    style: 'display:none;'
  };

  FlashChild.prototype.ui = {
    close: '[data-click=dismiss]'
  };

  FlashChild.prototype.events = {
    'click @ui.close': 'dismiss'
  };

  FlashChild.prototype.onShow = function() {
    var timeout;
    timeout = this.model.get('timeout');
    return setTimeout(this.dismiss, timeout);
  };

  FlashChild.prototype.onAttach = function() {
    return this.$el.fadeIn();
  };

  FlashChild.prototype.remove = function() {
    return this.$el.slideToggle((function(_this) {
      return function() {
        return Marionette.LayoutView.prototype.remove.call(_this);
      };
    })(this));
  };

  FlashChild.prototype.dismiss = function() {
    var ref;
    return (ref = this.model.collection) != null ? ref.remove(this.model) : void 0;
  };

  return FlashChild;

})(Marionette.LayoutView);

FlashList = (function(superClass) {
  extend(FlashList, superClass);

  function FlashList() {
    return FlashList.__super__.constructor.apply(this, arguments);
  }

  FlashList.prototype.className = 'container-fluid';

  FlashList.prototype.childView = FlashChild;

  return FlashList;

})(Marionette.CollectionView);

module.exports = FlashList;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi92aWV3cy9mbGFzaExpc3QuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2ZsYXNoL2xpYi92aWV3cy9mbGFzaExpc3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLElBQUEscUJBQUE7RUFBQTs7OztBQUFNOzs7Ozs7Ozt1QkFDSixTQUFBLEdBQVc7O3VCQUNYLFFBQUEsR0FBVSxPQUFBLENBQVEseUJBQVI7O3VCQUVWLFVBQUEsR0FDRTtJQUFBLEtBQUEsRUFBTyxlQUFQOzs7dUJBRUYsRUFBQSxHQUNFO0lBQUEsS0FBQSxFQUFPLHNCQUFQOzs7dUJBRUYsTUFBQSxHQUNFO0lBQUEsaUJBQUEsRUFBbUIsU0FBbkI7Ozt1QkFFRixNQUFBLEdBQVEsU0FBQTtBQUNOLFFBQUE7SUFBQSxPQUFBLEdBQVUsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsU0FBWDtXQUNWLFVBQUEsQ0FBWSxJQUFDLENBQUEsT0FBYixFQUFzQixPQUF0QjtFQUZNOzt1QkFJUixRQUFBLEdBQVUsU0FBQTtXQUNSLElBQUMsQ0FBQSxHQUFHLENBQUMsTUFBTCxDQUFBO0VBRFE7O3VCQUdWLE1BQUEsR0FBUSxTQUFBO1dBQ04sSUFBQyxDQUFBLEdBQUcsQ0FBQyxXQUFMLENBQWtCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtlQUNoQixVQUFVLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBdkMsQ0FBNEMsS0FBNUM7TUFEZ0I7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCO0VBRE07O3VCQUtSLE9BQUEsR0FBUyxTQUFBO0FBQ1AsUUFBQTtzREFBaUIsQ0FBRSxNQUFuQixDQUEyQixJQUFDLENBQUEsS0FBNUI7RUFETzs7OztHQXpCYyxVQUFVLENBQUM7O0FBOEI5Qjs7Ozs7OztzQkFDSixTQUFBLEdBQVc7O3NCQUNYLFNBQUEsR0FBVzs7OztHQUZXLFVBQVUsQ0FBQzs7QUFNbkMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/flash_child":204}],204:[function(require,module,exports){
var jade = require("jade/runtime");

module.exports = function template(locals) {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (context, dismissible, message, strong) {
buf.push("<div class=\"col-xs-12 text-center\"><div role=\"alert\"" + (jade.cls(['alert','alert-dismissible','fade','in',"alert-" + context], [null,null,null,null,true])) + ">");
if ( dismissible)
{
buf.push("<button type=\"button\" data-click=\"dismiss\" aria-label=\"Close\" class=\"close\"><span aria-hidden=\"true\"></span><span class=\"sr-only\">Close</span></button>");
}
if ( strong)
{
buf.push("<strong>" + (jade.escape(null == (jade_interp = strong + " ") ? "" : jade_interp)) + "</strong>");
}
if ( message)
{
buf.push(jade.escape(null == (jade_interp = message) ? "" : jade_interp));
}
buf.push("</div></div>");}.call(this,"context" in locals_for_with?locals_for_with.context:typeof context!=="undefined"?context:undefined,"dismissible" in locals_for_with?locals_for_with.dismissible:typeof dismissible!=="undefined"?dismissible:undefined,"message" in locals_for_with?locals_for_with.message:typeof message!=="undefined"?message:undefined,"strong" in locals_for_with?locals_for_with.strong:typeof strong!=="undefined"?strong:undefined));;return buf.join("");
};
},{"jade/runtime":209}],205:[function(require,module,exports){
var OverlayComponent, OverlayView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

OverlayView = (function(superClass) {
  extend(OverlayView, superClass);

  function OverlayView() {
    return OverlayView.__super__.constructor.apply(this, arguments);
  }

  OverlayView.prototype.template = false;

  OverlayView.prototype.className = 'overlay';

  OverlayView.prototype.events = {
    'click': 'onClick'
  };

  OverlayView.prototype.onClick = function() {
    return Backbone.Radio.channel('sidebar').trigger('hide');
  };

  return OverlayView;

})(Mn.LayoutView);

OverlayComponent = (function(superClass) {
  extend(OverlayComponent, superClass);

  function OverlayComponent() {
    return OverlayComponent.__super__.constructor.apply(this, arguments);
  }

  OverlayComponent.prototype.initialize = function(options) {
    if (options == null) {
      options = {};
    }
    return this.container = options.container;
  };

  OverlayComponent.prototype.radioEvents = {
    'overlay ready': 'onReady',
    'overlay show': 'showOverlay',
    'overlay hide': 'hideOverlay'
  };

  OverlayComponent.prototype.showOverlay = function() {
    return $('.overlay-region').addClass('active');
  };

  OverlayComponent.prototype.hideOverlay = function() {
    return $('.overlay-region').removeClass('active');
  };

  OverlayComponent.prototype.onReady = function() {
    if (!this.view) {
      this.view = new OverlayView();
      return this.container.show(this.view);
    }
  };

  return OverlayComponent;

})(Mn.Service);

module.exports = OverlayComponent;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX292ZXJsYXkvbGliL2NvbXBvbmVudC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fb3ZlcmxheS9saWIvY29tcG9uZW50LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLDZCQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3dCQUNKLFFBQUEsR0FBVTs7d0JBQ1YsU0FBQSxHQUFXOzt3QkFFWCxNQUFBLEdBQ0U7SUFBQSxPQUFBLEVBQVMsU0FBVDs7O3dCQUVGLE9BQUEsR0FBUyxTQUFBO1dBQ1AsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUM7RUFETzs7OztHQVBlLEVBQUUsQ0FBQzs7QUFZdkI7Ozs7Ozs7NkJBRUosVUFBQSxHQUFZLFNBQUMsT0FBRDs7TUFBQyxVQUFVOztXQUNyQixJQUFDLENBQUEsU0FBRCxHQUFjLE9BQU8sQ0FBQztFQURaOzs2QkFHWixXQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWtCLFNBQWxCO0lBQ0EsY0FBQSxFQUFrQixhQURsQjtJQUVBLGNBQUEsRUFBa0IsYUFGbEI7Ozs2QkFJRixXQUFBLEdBQWEsU0FBQTtXQUNYLENBQUEsQ0FBRSxpQkFBRixDQUFvQixDQUFDLFFBQXJCLENBQThCLFFBQTlCO0VBRFc7OzZCQUdiLFdBQUEsR0FBYSxTQUFBO1dBQ1gsQ0FBQSxDQUFFLGlCQUFGLENBQW9CLENBQUMsV0FBckIsQ0FBaUMsUUFBakM7RUFEVzs7NkJBR2IsT0FBQSxHQUFTLFNBQUE7SUFDUCxJQUFBLENBQU8sSUFBQyxDQUFBLElBQVI7TUFDRSxJQUFDLENBQUEsSUFBRCxHQUFRLElBQUksV0FBSixDQUFBO2FBQ1IsSUFBQyxDQUFBLFNBQVMsQ0FBQyxJQUFYLENBQWdCLElBQUMsQ0FBQSxJQUFqQixFQUZGOztFQURPOzs7O0dBaEJvQixFQUFFLENBQUM7O0FBdUJsQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],206:[function(require,module,exports){
var ModalRegion,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

ModalRegion = (function(superClass) {
  extend(ModalRegion, superClass);

  function ModalRegion() {
    return ModalRegion.__super__.constructor.apply(this, arguments);
  }

  ModalRegion.prototype.show = function(view, options) {
    if (options == null) {
      options = {};
    }
    view.on('hidden:modal', function() {
      return this.destroy();
    });
    return ModalRegion.__super__.show.call(this, view, options);
  };

  return ModalRegion;

})(Marionette.Region);

module.exports = ModalRegion;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX3JlZ2lvbnMvbGliL3JlZ2lvbnMvbW9kYWwuY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX3JlZ2lvbnMvbGliL3JlZ2lvbnMvbW9kYWwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLElBQUEsV0FBQTtFQUFBOzs7QUFBTTs7Ozs7Ozt3QkFFSixJQUFBLEdBQU0sU0FBQyxJQUFELEVBQU8sT0FBUDs7TUFBTyxVQUFVOztJQUNyQixJQUFJLENBQUMsRUFBTCxDQUFRLGNBQVIsRUFBd0IsU0FBQTthQUFHLElBQUMsQ0FBQSxPQUFELENBQUE7SUFBSCxDQUF4QjtXQUNBLHNDQUFNLElBQU4sRUFBWSxPQUFaO0VBRkk7Ozs7R0FGa0IsVUFBVSxDQUFDOztBQVFyQyxNQUFNLENBQUMsT0FBUCxHQUFpQiJ9

},{}],207:[function(require,module,exports){
var BaseRoute,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BaseRoute = (function(superClass) {
  extend(BaseRoute, superClass);

  function BaseRoute() {
    return BaseRoute.__super__.constructor.apply(this, arguments);
  }

  BaseRoute.prototype.breadcrumbs = [];

  BaseRoute.prototype.initialize = function(options) {
    this.options = options;
    this.container = options.container;
    this.on('before:enter', (function(_this) {
      return function() {
        return typeof _this.onBeforeEnter === "function" ? _this.onBeforeEnter(arguments) : void 0;
      };
    })(this));
    this.on('before:fetch', (function(_this) {
      return function() {
        return typeof _this.onBeforeFetch === "function" ? _this.onBeforeFetch(arguments) : void 0;
      };
    })(this));
    this.on('before:render', (function(_this) {
      return function() {
        return typeof _this.onBeforeRender === "function" ? _this.onBeforeRender(arguments) : void 0;
      };
    })(this));
    this.on('fetch', (function(_this) {
      return function() {
        return typeof _this.onFetch === "function" ? _this.onFetch(arguments) : void 0;
      };
    })(this));
    this.on('render', (function(_this) {
      return function() {
        return typeof _this.onRender === "function" ? _this.onRender(arguments) : void 0;
      };
    })(this));
    this.on('enter', (function(_this) {
      return function() {
        return typeof _this.onEnter === "function" ? _this.onEnter(arguments) : void 0;
      };
    })(this));
    return Backbone.Radio.channel('sidebar').trigger('hide');
  };

  BaseRoute.prototype._setPageTitle = function() {
    return document.title = _.result(this, 'title');
  };

  BaseRoute.prototype._updateBreadcrumbs = function() {
    var breadcrumbs;
    breadcrumbs = _.result(this, 'breadcrumbs');
    if (breadcrumbs) {
      return Backbone.Radio.channel('breadcrumb').trigger('set', breadcrumbs);
    }
  };

  BaseRoute.prototype.onFetch = function() {
    this._setPageTitle();
    return this._updateBreadcrumbs();
  };

  return BaseRoute;

})(Backbone.Routing.Route);

module.exports = BaseRoute;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX3JvdXRpbmcvbGliL3JvdXRlLmNvZmZlZSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9yb3V0aW5nL2xpYi9yb3V0ZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsSUFBQSxTQUFBO0VBQUE7OztBQUFNOzs7Ozs7O3NCQUVKLFdBQUEsR0FBYTs7c0JBRWIsVUFBQSxHQUFZLFNBQUMsT0FBRDtJQUdWLElBQUMsQ0FBQSxPQUFELEdBQVc7SUFHWCxJQUFDLENBQUEsU0FBRCxHQUFhLE9BQU8sQ0FBQztJQUdyQixJQUFDLENBQUEsRUFBRCxDQUFJLGNBQUosRUFBb0IsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBOzJEQUFHLEtBQUMsQ0FBQSxjQUFlO01BQW5CO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFwQjtJQUNBLElBQUMsQ0FBQSxFQUFELENBQUksY0FBSixFQUFvQixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7MkRBQUcsS0FBQyxDQUFBLGNBQWU7TUFBbkI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBCO0lBQ0EsSUFBQyxDQUFBLEVBQUQsQ0FBSSxlQUFKLEVBQXFCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTs0REFBRyxLQUFDLENBQUEsZUFBZ0I7TUFBcEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXJCO0lBQ0EsSUFBQyxDQUFBLEVBQUQsQ0FBSSxPQUFKLEVBQWEsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO3FEQUFHLEtBQUMsQ0FBQSxRQUFTO01BQWI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWI7SUFDQSxJQUFDLENBQUEsRUFBRCxDQUFJLFFBQUosRUFBYyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7c0RBQUcsS0FBQyxDQUFBLFNBQVU7TUFBZDtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBZDtJQUNBLElBQUMsQ0FBQSxFQUFELENBQUksT0FBSixFQUFhLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtxREFBRyxLQUFDLENBQUEsUUFBUztNQUFiO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFiO1dBR0EsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFNBQXZCLENBQWlDLENBQUMsT0FBbEMsQ0FBMEMsTUFBMUM7RUFqQlU7O3NCQW1CWixhQUFBLEdBQWUsU0FBQTtXQUNiLFFBQVEsQ0FBQyxLQUFULEdBQWlCLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBVCxFQUFZLE9BQVo7RUFESjs7c0JBR2Ysa0JBQUEsR0FBb0IsU0FBQTtBQUNsQixRQUFBO0lBQUEsV0FBQSxHQUFjLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBVCxFQUFZLGFBQVo7SUFDZCxJQUFvRSxXQUFwRTthQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixZQUF2QixDQUFvQyxDQUFDLE9BQXJDLENBQTZDLEtBQTdDLEVBQW9ELFdBQXBELEVBQUE7O0VBRmtCOztzQkFJcEIsT0FBQSxHQUFTLFNBQUE7SUFDUCxJQUFDLENBQUEsYUFBRCxDQUFBO1dBQ0EsSUFBQyxDQUFBLGtCQUFELENBQUE7RUFGTzs7OztHQTlCYSxRQUFRLENBQUMsT0FBTyxDQUFDOztBQW9DekMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],208:[function(require,module,exports){
var BaseRouter,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BaseRouter = (function(superClass) {
  extend(BaseRouter, superClass);

  function BaseRouter() {
    return BaseRouter.__super__.constructor.apply(this, arguments);
  }

  BaseRouter.prototype.initialize = function(options) {
    return this.container = options.container;
  };

  return BaseRouter;

})(Backbone.Routing.Router);

module.exports = BaseRouter;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX3JvdXRpbmcvbGliL3JvdXRlci5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fcm91dGluZy9saWIvcm91dGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBRUosVUFBQSxHQUFZLFNBQUMsT0FBRDtXQUFhLElBQUMsQ0FBQSxTQUFELEdBQWEsT0FBTyxDQUFDO0VBQWxDOzs7O0dBRlcsUUFBUSxDQUFDLE9BQU8sQ0FBQzs7QUFNMUMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{}],209:[function(require,module,exports){
(function (global){
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jade = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = function merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = merge(attrs, a[i]);
    }
    return attrs;
  }
  var ac = a['class'];
  var bc = b['class'];

  if (ac || bc) {
    ac = ac || [];
    bc = bc || [];
    if (!Array.isArray(ac)) ac = [ac];
    if (!Array.isArray(bc)) bc = [bc];
    a['class'] = ac.concat(bc).filter(nulls);
  }

  for (var key in b) {
    if (key != 'class') {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Filter null `val`s.
 *
 * @param {*} val
 * @return {Boolean}
 * @api private
 */

function nulls(val) {
  return val != null && val !== '';
}

/**
 * join array as classes.
 *
 * @param {*} val
 * @return {String}
 */
exports.joinClasses = joinClasses;
function joinClasses(val) {
  return (Array.isArray(val) ? val.map(joinClasses) :
    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
    [val]).filter(nulls).join(' ');
}

/**
 * Render the given classes.
 *
 * @param {Array} classes
 * @param {Array.<Boolean>} escaped
 * @return {String}
 */
exports.cls = function cls(classes, escaped) {
  var buf = [];
  for (var i = 0; i < classes.length; i++) {
    if (escaped && escaped[i]) {
      buf.push(exports.escape(joinClasses([classes[i]])));
    } else {
      buf.push(joinClasses(classes[i]));
    }
  }
  var text = joinClasses(buf);
  if (text.length) {
    return ' class="' + text + '"';
  } else {
    return '';
  }
};


exports.style = function (val) {
  if (val && typeof val === 'object') {
    return Object.keys(val).map(function (style) {
      return style + ':' + val[style];
    }).join(';');
  } else {
    return val;
  }
};
/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = function attr(key, val, escaped, terse) {
  if (key === 'style') {
    val = exports.style(val);
  }
  if ('boolean' == typeof val || null == val) {
    if (val) {
      return ' ' + (terse ? key : key + '="' + key + '"');
    } else {
      return '';
    }
  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
    if (JSON.stringify(val).indexOf('&') !== -1) {
      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
                   'will be escaped to `&amp;`');
    };
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will eliminate the double quotes around dates in ' +
                   'ISO form after 2.0.0');
    }
    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
  } else if (escaped) {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + exports.escape(val) + '"';
  } else {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + val + '"';
  }
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} escaped
 * @return {String}
 */
exports.attrs = function attrs(obj, terse){
  var buf = [];

  var keys = Object.keys(obj);

  if (keys.length) {
    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i]
        , val = obj[key];

      if ('class' == key) {
        if (val = joinClasses(val)) {
          buf.push(' ' + key + '="' + val + '"');
        }
      } else {
        buf.push(exports.attr(key, val, false, terse));
      }
    }
  }

  return buf.join('');
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var jade_encode_html_rules = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;'
};
var jade_match_html = /[&<>"]/g;

function jade_encode_char(c) {
  return jade_encode_html_rules[c] || c;
}

exports.escape = jade_escape;
function jade_escape(html){
  var result = String(html).replace(jade_match_html, jade_encode_char);
  if (result === '' + html) return html;
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the jade in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @api private
 */

exports.rethrow = function rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || require('fs').readFileSync(filename, 'utf8')
  } catch (ex) {
    rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Jade') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};

exports.DebugItem = function DebugItem(lineno, filename) {
  this.lineno = lineno;
  this.filename = filename;
}

},{"fs":2}],2:[function(require,module,exports){

},{}]},{},[1])(1)
});
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"fs":187}],210:[function(require,module,exports){
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

},{}],211:[function(require,module,exports){
'use strict';

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};
/* globals d3 */
/* eslint no-shadow: "off" */

exports.default = function (d3) {
  d3.jsonldVis = jsonldVis;
};

var _d = require('d3');

var _d2 = _interopRequireDefault(_d);

var _d3Tip = require('d3-tip');

var _d3Tip2 = _interopRequireDefault(_d3Tip);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

(0, _d3Tip2.default)(_d2.default);

function jsonldVis(jsonld, selector) {
  var config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

  if (!jsonld && !selector) return jsonldVis;

  var h = config.h || 600,
      w = config.w || 800,
      maxLabelWidth = config.maxLabelWidth || 250,
      transitionDuration = config.transitionDuration || 750,
      transitionEase = config.transitionEase || 'cubic-in-out',
      minRadius = config.minRadius || 5,
      scalingFactor = config.scalingFactor || 2,
      i = 0,
      tree = _d2.default.layout.tree().size([h, w]),
      diagonal = _d2.default.svg.diagonal().projection(function (d) {
    return [d.y, d.x];
  }),
      svg = _d2.default.select(selector).append('svg').attr('width', w).attr('height', h).append('g').attr('transform', 'translate(' + maxLabelWidth + ',0)'),
      tip = _d2.default.tip().direction(function (d) {
    return d.children || d._children ? 'w' : 'e';
  }).offset(function (d) {
    return d.children || d._children ? [0, -3] : [0, 3];
  }).attr('class', 'd3-tip').html(function (d) {
    return '<span>' + d.valueExtended + '</span>';
  });
  svg.call(tip);

  var root = jsonldTree(jsonld);
  root.x0 = h / 2;
  root.y0 = 0;
  root.children.forEach(collapse);

  function changeSVGWidth(newWidth) {
    if (w !== newWidth) _d2.default.select(selector + ' > svg').attr('width', newWidth);
  }

  function jsonldTree(source) {
    var tree = {};
    if ('@id' in source) {
      tree.isIdNode = true;
      tree.name = source['@id'];
      if (tree.name.length > maxLabelWidth / 9) {
        tree.valueExtended = tree.name;
        tree.name = '' + tree.valueExtended.slice(-Math.floor(maxLabelWidth / 9));
      }
    } else {
      tree.isIdNode = true;
      tree.isBlankNode = true;
      // random id, can replace with actual uuid generator if needed
      tree.name = '_:b' + Math.random().toString(10).slice(-7);
    }

    var children = [];
    Object.keys(source).forEach(function (key) {
      if (key === '@id' || key === '@context' || source[key] === null) return;
      var valueExtended = void 0,
          value = void 0;
      if (_typeof(source[key]) === 'object' && !Array.isArray(source[key])) {
        children.push({
          name: key,
          children: [jsonldTree(source[key])]
        });
      } else if (Array.isArray(source[key])) {
        children.push({
          name: key,
          children: source[key].map(function (item) {
            if ((typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object') return jsonldTree(item);
            return { name: item };
          })
        });
      } else {
        valueExtended = source[key];
        value = valueExtended;
        if (value.length > maxLabelWidth / 9) {
          value = value.slice(0, Math.floor(maxLabelWidth / 9)) + '';
          children.push({
            name: key,
            value: value,
            valueExtended: valueExtended
          });
        } else {
          children.push({
            name: key,
            value: value
          });
        }
      }
    });

    if (children.length) tree.children = children;
    return tree;
  }

  function update(source) {
    var nodes = tree.nodes(root).reverse(),
        links = tree.links(nodes);
    nodes.forEach(function (d) {
      return d.y = d.depth * maxLabelWidth;
    });
    var node = svg.selectAll('g.node').data(nodes, function (d) {
      return d.id || (d.id = ++i);
    }),
        nodeEnter = node.enter().append('g').attr('class', 'node').attr('transform', function () {
      return 'translate(' + source.y0 + ',' + source.x0 + ')';
    }).on('click', click);
    nodeEnter.append('circle').attr('r', 0).style('stroke-width', function (d) {
      return d.isIdNode ? '2px' : '1px';
    }).style('stroke', function (d) {
      return d.isIdNode ? '#F7CA18' : '#4ECDC4';
    }).style('fill', function (d) {
      if (d.isIdNode) return d._children ? '#F5D76E' : 'white';
      return d._children ? '#86E2D5' : 'white';
    }).on('mouseover', function (d) {
      if (d.valueExtended) tip.show(d);
    }).on('mouseout', tip.hide);
    nodeEnter.append('text').attr('x', function (d) {
      var spacing = computeRadius(d) + 5;
      return d.children || d._children ? -spacing : spacing;
    }).attr('dy', '4').attr('text-anchor', function (d) {
      return d.children || d._children ? 'end' : 'start';
    }).text(function (d) {
      return d.name + (d.value ? ': ' + d.value : '');
    }).style('fill-opacity', 0).on('mouseover', function (d) {
      if (d.valueExtended) tip.show(d);
    }).on('mouseout', tip.hide);
    var maxSpan = Math.max.apply(Math, nodes.map(function (d) {
      return d.y + maxLabelWidth;
    }));
    if (maxSpan + maxLabelWidth + 20 > w) {
      changeSVGWidth(maxSpan + maxLabelWidth);
      _d2.default.select(selector).node().scrollLeft = source.y0;
    }

    var nodeUpdate = node.transition().duration(transitionDuration).ease(transitionEase).attr('transform', function (d) {
      return 'translate(' + d.y + ',' + d.x + ')';
    });
    nodeUpdate.select('circle').attr('r', function (d) {
      return computeRadius(d);
    }).style('stroke-width', function (d) {
      return d.isIdNode ? '2px' : '1px';
    }).style('stroke', function (d) {
      return d.isIdNode ? '#F7CA18' : '#4ECDC4';
    }).style('fill', function (d) {
      if (d.isIdNode) return d._children ? '#F5D76E' : 'white';
      return d._children ? '#86E2D5' : 'white';
    });
    nodeUpdate.select('text').style('fill-opacity', 1);

    var nodeExit = node.exit().transition().duration(transitionDuration).ease(transitionEase).attr('transform', function () {
      return 'translate(' + source.y + ',' + source.x + ')';
    }).remove();
    nodeExit.select('circle').attr('r', 0);
    nodeExit.select('text').style('fill-opacity', 0);

    var link = svg.selectAll('path.link').data(links, function (d) {
      return d.target.id;
    });
    link.enter().insert('path', 'g').attr('class', 'link').attr('d', function () {
      var o = { x: source.x0, y: source.y0 };
      return diagonal({ source: o, target: o });
    });
    link.transition().duration(transitionDuration).ease(transitionEase).attr('d', diagonal);
    link.exit().transition().duration(transitionDuration).ease(transitionEase).attr('d', function () {
      var o = { x: source.x, y: source.y };
      return diagonal({ source: o, target: o });
    }).remove();

    nodes.forEach(function (d) {
      d.x0 = d.x;
      d.y0 = d.y;
    });
  }

  function computeRadius(d) {
    if (d.children || d._children) return minRadius + numEndNodes(d) / scalingFactor;
    return minRadius;
  }

  function numEndNodes(n) {
    var num = 0;
    if (n.children) n.children.forEach(function (c) {
      return num += numEndNodes(c);
    });else if (n._children) n._children.forEach(function (c) {
      return num += numEndNodes(c);
    });else num++;
    return num;
  }

  function click(d) {
    if (d.children) {
      d._children = d.children;
      d.children = null;
    } else {
      d.children = d._children;
      d._children = null;
    }
    update(d);

    // fast-forward blank nodes
    if (d.children) {
      d.children.forEach(function (child) {
        if (child.isBlankNode && child._children) click(child);
      });
    }
  }

  function collapse(d) {
    if (d.children) {
      d._children = d.children;
      d._children.forEach(collapse);
      d.children = null;
    }
  }
  update(root);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb25sZC12aXMuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImRlZmF1bHQiLCJkMyIsImpzb25sZFZpcyIsIl9kIiwicmVxdWlyZSIsIl9kMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZDNUaXAiLCJfZDNUaXAyIiwiX19lc01vZHVsZSIsImpzb25sZCIsInNlbGVjdG9yIiwiY29uZmlnIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaCIsInciLCJtYXhMYWJlbFdpZHRoIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwidHJhbnNpdGlvbkVhc2UiLCJtaW5SYWRpdXMiLCJzY2FsaW5nRmFjdG9yIiwiaSIsInRyZWUiLCJsYXlvdXQiLCJzaXplIiwiZGlhZ29uYWwiLCJzdmciLCJwcm9qZWN0aW9uIiwiZCIsInkiLCJ4Iiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsInRpcCIsImRpcmVjdGlvbiIsImNoaWxkcmVuIiwiX2NoaWxkcmVuIiwib2Zmc2V0IiwiaHRtbCIsInZhbHVlRXh0ZW5kZWQiLCJjYWxsIiwicm9vdCIsImpzb25sZFRyZWUiLCJ4MCIsInkwIiwiZm9yRWFjaCIsImNvbGxhcHNlIiwiY2hhbmdlU1ZHV2lkdGgiLCJuZXdXaWR0aCIsInNvdXJjZSIsImlzSWROb2RlIiwibmFtZSIsInNsaWNlIiwiTWF0aCIsImZsb29yIiwiaXNCbGFua05vZGUiLCJyYW5kb20iLCJ0b1N0cmluZyIsImtleXMiLCJrZXkiLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwibWFwIiwiaXRlbSIsInVwZGF0ZSIsIm5vZGVzIiwicmV2ZXJzZSIsImxpbmtzIiwiZGVwdGgiLCJub2RlIiwic2VsZWN0QWxsIiwiZGF0YSIsImlkIiwibm9kZUVudGVyIiwiZW50ZXIiLCJvbiIsImNsaWNrIiwic3R5bGUiLCJzaG93IiwiaGlkZSIsInNwYWNpbmciLCJjb21wdXRlUmFkaXVzIiwidGV4dCIsIm1heFNwYW4iLCJtYXgiLCJhcHBseSIsInNjcm9sbExlZnQiLCJub2RlVXBkYXRlIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiZWFzZSIsIm5vZGVFeGl0IiwiZXhpdCIsInJlbW92ZSIsImxpbmsiLCJ0YXJnZXQiLCJpbnNlcnQiLCJvIiwibnVtRW5kTm9kZXMiLCJuIiwibnVtIiwiYyIsImNoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUVBQSxPQUFPQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUMzQ0MsU0FBTztBQURvQyxDQUE3Qzs7QUFJQSxJQUFJQyxVQUFVLE9BQU9DLE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0MsU0FBT0EsT0FBT0MsUUFBZCxNQUEyQixRQUEzRCxHQUFzRSxVQUFVQyxHQUFWLEVBQWU7QUFBRSxnQkFBY0EsR0FBZCwwQ0FBY0EsR0FBZDtBQUFvQixDQUEzRyxHQUE4RyxVQUFVQSxHQUFWLEVBQWU7QUFBRSxTQUFPQSxPQUFPLE9BQU9GLE1BQVAsS0FBa0IsVUFBekIsSUFBdUNFLElBQUlDLFdBQUosS0FBb0JILE1BQTNELEdBQW9FLFFBQXBFLFVBQXNGRSxHQUF0RiwwQ0FBc0ZBLEdBQXRGLENBQVA7QUFBbUcsQ0FBaFA7QUFDQTtBQUNBOztBQUVBTCxRQUFRTyxPQUFSLEdBQWtCLFVBQVVDLEVBQVYsRUFBYztBQUM5QkEsS0FBR0MsU0FBSCxHQUFlQSxTQUFmO0FBQ0QsQ0FGRDs7QUFJQSxJQUFJQyxLQUFLQyxRQUFRLElBQVIsQ0FBVDs7QUFFQSxJQUFJQyxNQUFNQyx1QkFBdUJILEVBQXZCLENBQVY7O0FBRUEsSUFBSUksU0FBU0gsUUFBUSxRQUFSLENBQWI7O0FBRUEsSUFBSUksVUFBVUYsdUJBQXVCQyxNQUF2QixDQUFkOztBQUVBLFNBQVNELHNCQUFULENBQWdDUixHQUFoQyxFQUFxQztBQUFFLFNBQU9BLE9BQU9BLElBQUlXLFVBQVgsR0FBd0JYLEdBQXhCLEdBQThCLEVBQUVFLFNBQVNGLEdBQVgsRUFBckM7QUFBd0Q7O0FBRS9GLENBQUMsR0FBR1UsUUFBUVIsT0FBWixFQUFxQkssSUFBSUwsT0FBekI7O0FBRUEsU0FBU0UsU0FBVCxDQUFtQlEsTUFBbkIsRUFBMkJDLFFBQTNCLEVBQXFDO0FBQ25DLE1BQUlDLFNBQVNDLFVBQVVDLE1BQVYsSUFBb0IsQ0FBcEIsSUFBeUJELFVBQVUsQ0FBVixNQUFpQkUsU0FBMUMsR0FBc0QsRUFBdEQsR0FBMkRGLFVBQVUsQ0FBVixDQUF4RTs7QUFFQSxNQUFJLENBQUNILE1BQUQsSUFBVyxDQUFDQyxRQUFoQixFQUEwQixPQUFPVCxTQUFQOztBQUUxQixNQUFJYyxJQUFJSixPQUFPSSxDQUFQLElBQVksR0FBcEI7QUFBQSxNQUNJQyxJQUFJTCxPQUFPSyxDQUFQLElBQVksR0FEcEI7QUFBQSxNQUVJQyxnQkFBZ0JOLE9BQU9NLGFBQVAsSUFBd0IsR0FGNUM7QUFBQSxNQUdJQyxxQkFBcUJQLE9BQU9PLGtCQUFQLElBQTZCLEdBSHREO0FBQUEsTUFJSUMsaUJBQWlCUixPQUFPUSxjQUFQLElBQXlCLGNBSjlDO0FBQUEsTUFLSUMsWUFBWVQsT0FBT1MsU0FBUCxJQUFvQixDQUxwQztBQUFBLE1BTUlDLGdCQUFnQlYsT0FBT1UsYUFBUCxJQUF3QixDQU41QztBQUFBLE1BT0lDLElBQUksQ0FQUjtBQUFBLE1BUUlDLE9BQU9uQixJQUFJTCxPQUFKLENBQVl5QixNQUFaLENBQW1CRCxJQUFuQixHQUEwQkUsSUFBMUIsQ0FBK0IsQ0FBQ1YsQ0FBRCxFQUFJQyxDQUFKLENBQS9CLENBUlg7QUFBQSxNQVNJVSxXQUFXdEIsSUFBSUwsT0FBSixDQUFZNEIsR0FBWixDQUFnQkQsUUFBaEIsR0FBMkJFLFVBQTNCLENBQXNDLFVBQVVDLENBQVYsRUFBYTtBQUNoRSxXQUFPLENBQUNBLEVBQUVDLENBQUgsRUFBTUQsRUFBRUUsQ0FBUixDQUFQO0FBQ0QsR0FGYyxDQVRmO0FBQUEsTUFZSUosTUFBTXZCLElBQUlMLE9BQUosQ0FBWWlDLE1BQVosQ0FBbUJ0QixRQUFuQixFQUE2QnVCLE1BQTdCLENBQW9DLEtBQXBDLEVBQTJDQyxJQUEzQyxDQUFnRCxPQUFoRCxFQUF5RGxCLENBQXpELEVBQTREa0IsSUFBNUQsQ0FBaUUsUUFBakUsRUFBMkVuQixDQUEzRSxFQUE4RWtCLE1BQTlFLENBQXFGLEdBQXJGLEVBQTBGQyxJQUExRixDQUErRixXQUEvRixFQUE0RyxlQUFlakIsYUFBZixHQUErQixLQUEzSSxDQVpWO0FBQUEsTUFhSWtCLE1BQU0vQixJQUFJTCxPQUFKLENBQVlvQyxHQUFaLEdBQWtCQyxTQUFsQixDQUE0QixVQUFVUCxDQUFWLEVBQWE7QUFDakQsV0FBT0EsRUFBRVEsUUFBRixJQUFjUixFQUFFUyxTQUFoQixHQUE0QixHQUE1QixHQUFrQyxHQUF6QztBQUNELEdBRlMsRUFFUEMsTUFGTyxDQUVBLFVBQVVWLENBQVYsRUFBYTtBQUNyQixXQUFPQSxFQUFFUSxRQUFGLElBQWNSLEVBQUVTLFNBQWhCLEdBQTRCLENBQUMsQ0FBRCxFQUFJLENBQUMsQ0FBTCxDQUE1QixHQUFzQyxDQUFDLENBQUQsRUFBSSxDQUFKLENBQTdDO0FBQ0QsR0FKUyxFQUlQSixJQUpPLENBSUYsT0FKRSxFQUlPLFFBSlAsRUFJaUJNLElBSmpCLENBSXNCLFVBQVVYLENBQVYsRUFBYTtBQUMzQyxXQUFPLFdBQVdBLEVBQUVZLGFBQWIsR0FBNkIsU0FBcEM7QUFDRCxHQU5TLENBYlY7QUFvQkFkLE1BQUllLElBQUosQ0FBU1AsR0FBVDs7QUFFQSxNQUFJUSxPQUFPQyxXQUFXbkMsTUFBWCxDQUFYO0FBQ0FrQyxPQUFLRSxFQUFMLEdBQVU5QixJQUFJLENBQWQ7QUFDQTRCLE9BQUtHLEVBQUwsR0FBVSxDQUFWO0FBQ0FILE9BQUtOLFFBQUwsQ0FBY1UsT0FBZCxDQUFzQkMsUUFBdEI7O0FBRUEsV0FBU0MsY0FBVCxDQUF3QkMsUUFBeEIsRUFBa0M7QUFDaEMsUUFBSWxDLE1BQU1rQyxRQUFWLEVBQW9COUMsSUFBSUwsT0FBSixDQUFZaUMsTUFBWixDQUFtQnRCLFdBQVcsUUFBOUIsRUFBd0N3QixJQUF4QyxDQUE2QyxPQUE3QyxFQUFzRGdCLFFBQXREO0FBQ3JCOztBQUVELFdBQVNOLFVBQVQsQ0FBb0JPLE1BQXBCLEVBQTRCO0FBQzFCLFFBQUk1QixPQUFPLEVBQVg7QUFDQSxRQUFJLFNBQVM0QixNQUFiLEVBQXFCO0FBQ25CNUIsV0FBSzZCLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQTdCLFdBQUs4QixJQUFMLEdBQVlGLE9BQU8sS0FBUCxDQUFaO0FBQ0EsVUFBSTVCLEtBQUs4QixJQUFMLENBQVV4QyxNQUFWLEdBQW1CSSxnQkFBZ0IsQ0FBdkMsRUFBMEM7QUFDeENNLGFBQUtrQixhQUFMLEdBQXFCbEIsS0FBSzhCLElBQTFCO0FBQ0E5QixhQUFLOEIsSUFBTCxHQUFZLE1BQU05QixLQUFLa0IsYUFBTCxDQUFtQmEsS0FBbkIsQ0FBeUIsQ0FBQ0MsS0FBS0MsS0FBTCxDQUFXdkMsZ0JBQWdCLENBQTNCLENBQTFCLENBQWxCO0FBQ0Q7QUFDRixLQVBELE1BT087QUFDTE0sV0FBSzZCLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQTdCLFdBQUtrQyxXQUFMLEdBQW1CLElBQW5CO0FBQ0E7QUFDQWxDLFdBQUs4QixJQUFMLEdBQVksUUFBUUUsS0FBS0csTUFBTCxHQUFjQyxRQUFkLENBQXVCLEVBQXZCLEVBQTJCTCxLQUEzQixDQUFpQyxDQUFDLENBQWxDLENBQXBCO0FBQ0Q7O0FBRUQsUUFBSWpCLFdBQVcsRUFBZjtBQUNBL0MsV0FBT3NFLElBQVAsQ0FBWVQsTUFBWixFQUFvQkosT0FBcEIsQ0FBNEIsVUFBVWMsR0FBVixFQUFlO0FBQ3pDLFVBQUlBLFFBQVEsS0FBUixJQUFpQkEsUUFBUSxVQUF6QixJQUF1Q1YsT0FBT1UsR0FBUCxNQUFnQixJQUEzRCxFQUFpRTtBQUNqRSxVQUFJcEIsZ0JBQWdCLEtBQUssQ0FBekI7QUFBQSxVQUNJaEQsUUFBUSxLQUFLLENBRGpCO0FBRUEsVUFBSUMsUUFBUXlELE9BQU9VLEdBQVAsQ0FBUixNQUF5QixRQUF6QixJQUFxQyxDQUFDQyxNQUFNQyxPQUFOLENBQWNaLE9BQU9VLEdBQVAsQ0FBZCxDQUExQyxFQUFzRTtBQUNwRXhCLGlCQUFTMkIsSUFBVCxDQUFjO0FBQ1pYLGdCQUFNUSxHQURNO0FBRVp4QixvQkFBVSxDQUFDTyxXQUFXTyxPQUFPVSxHQUFQLENBQVgsQ0FBRDtBQUZFLFNBQWQ7QUFJRCxPQUxELE1BS08sSUFBSUMsTUFBTUMsT0FBTixDQUFjWixPQUFPVSxHQUFQLENBQWQsQ0FBSixFQUFnQztBQUNyQ3hCLGlCQUFTMkIsSUFBVCxDQUFjO0FBQ1pYLGdCQUFNUSxHQURNO0FBRVp4QixvQkFBVWMsT0FBT1UsR0FBUCxFQUFZSSxHQUFaLENBQWdCLFVBQVVDLElBQVYsRUFBZ0I7QUFDeEMsZ0JBQUksQ0FBQyxPQUFPQSxJQUFQLEtBQWdCLFdBQWhCLEdBQThCLFdBQTlCLEdBQTRDeEUsUUFBUXdFLElBQVIsQ0FBN0MsTUFBZ0UsUUFBcEUsRUFBOEUsT0FBT3RCLFdBQVdzQixJQUFYLENBQVA7QUFDOUUsbUJBQU8sRUFBRWIsTUFBTWEsSUFBUixFQUFQO0FBQ0QsV0FIUztBQUZFLFNBQWQ7QUFPRCxPQVJNLE1BUUE7QUFDTHpCLHdCQUFnQlUsT0FBT1UsR0FBUCxDQUFoQjtBQUNBcEUsZ0JBQVFnRCxhQUFSO0FBQ0EsWUFBSWhELE1BQU1vQixNQUFOLEdBQWVJLGdCQUFnQixDQUFuQyxFQUFzQztBQUNwQ3hCLGtCQUFRQSxNQUFNNkQsS0FBTixDQUFZLENBQVosRUFBZUMsS0FBS0MsS0FBTCxDQUFXdkMsZ0JBQWdCLENBQTNCLENBQWYsSUFBZ0QsR0FBeEQ7QUFDQW9CLG1CQUFTMkIsSUFBVCxDQUFjO0FBQ1pYLGtCQUFNUSxHQURNO0FBRVpwRSxtQkFBT0EsS0FGSztBQUdaZ0QsMkJBQWVBO0FBSEgsV0FBZDtBQUtELFNBUEQsTUFPTztBQUNMSixtQkFBUzJCLElBQVQsQ0FBYztBQUNaWCxrQkFBTVEsR0FETTtBQUVacEUsbUJBQU9BO0FBRkssV0FBZDtBQUlEO0FBQ0Y7QUFDRixLQWxDRDs7QUFvQ0EsUUFBSTRDLFNBQVN4QixNQUFiLEVBQXFCVSxLQUFLYyxRQUFMLEdBQWdCQSxRQUFoQjtBQUNyQixXQUFPZCxJQUFQO0FBQ0Q7O0FBRUQsV0FBUzRDLE1BQVQsQ0FBZ0JoQixNQUFoQixFQUF3QjtBQUN0QixRQUFJaUIsUUFBUTdDLEtBQUs2QyxLQUFMLENBQVd6QixJQUFYLEVBQWlCMEIsT0FBakIsRUFBWjtBQUFBLFFBQ0lDLFFBQVEvQyxLQUFLK0MsS0FBTCxDQUFXRixLQUFYLENBRFo7QUFFQUEsVUFBTXJCLE9BQU4sQ0FBYyxVQUFVbEIsQ0FBVixFQUFhO0FBQ3pCLGFBQU9BLEVBQUVDLENBQUYsR0FBTUQsRUFBRTBDLEtBQUYsR0FBVXRELGFBQXZCO0FBQ0QsS0FGRDtBQUdBLFFBQUl1RCxPQUFPN0MsSUFBSThDLFNBQUosQ0FBYyxRQUFkLEVBQXdCQyxJQUF4QixDQUE2Qk4sS0FBN0IsRUFBb0MsVUFBVXZDLENBQVYsRUFBYTtBQUMxRCxhQUFPQSxFQUFFOEMsRUFBRixLQUFTOUMsRUFBRThDLEVBQUYsR0FBTyxFQUFFckQsQ0FBbEIsQ0FBUDtBQUNELEtBRlUsQ0FBWDtBQUFBLFFBR0lzRCxZQUFZSixLQUFLSyxLQUFMLEdBQWE1QyxNQUFiLENBQW9CLEdBQXBCLEVBQXlCQyxJQUF6QixDQUE4QixPQUE5QixFQUF1QyxNQUF2QyxFQUErQ0EsSUFBL0MsQ0FBb0QsV0FBcEQsRUFBaUUsWUFBWTtBQUMzRixhQUFPLGVBQWVpQixPQUFPTCxFQUF0QixHQUEyQixHQUEzQixHQUFpQ0ssT0FBT04sRUFBeEMsR0FBNkMsR0FBcEQ7QUFDRCxLQUZlLEVBRWJpQyxFQUZhLENBRVYsT0FGVSxFQUVEQyxLQUZDLENBSGhCO0FBTUFILGNBQVUzQyxNQUFWLENBQWlCLFFBQWpCLEVBQTJCQyxJQUEzQixDQUFnQyxHQUFoQyxFQUFxQyxDQUFyQyxFQUF3QzhDLEtBQXhDLENBQThDLGNBQTlDLEVBQThELFVBQVVuRCxDQUFWLEVBQWE7QUFDekUsYUFBT0EsRUFBRXVCLFFBQUYsR0FBYSxLQUFiLEdBQXFCLEtBQTVCO0FBQ0QsS0FGRCxFQUVHNEIsS0FGSCxDQUVTLFFBRlQsRUFFbUIsVUFBVW5ELENBQVYsRUFBYTtBQUM5QixhQUFPQSxFQUFFdUIsUUFBRixHQUFhLFNBQWIsR0FBeUIsU0FBaEM7QUFDRCxLQUpELEVBSUc0QixLQUpILENBSVMsTUFKVCxFQUlpQixVQUFVbkQsQ0FBVixFQUFhO0FBQzVCLFVBQUlBLEVBQUV1QixRQUFOLEVBQWdCLE9BQU92QixFQUFFUyxTQUFGLEdBQWMsU0FBZCxHQUEwQixPQUFqQztBQUNoQixhQUFPVCxFQUFFUyxTQUFGLEdBQWMsU0FBZCxHQUEwQixPQUFqQztBQUNELEtBUEQsRUFPR3dDLEVBUEgsQ0FPTSxXQVBOLEVBT21CLFVBQVVqRCxDQUFWLEVBQWE7QUFDOUIsVUFBSUEsRUFBRVksYUFBTixFQUFxQk4sSUFBSThDLElBQUosQ0FBU3BELENBQVQ7QUFDdEIsS0FURCxFQVNHaUQsRUFUSCxDQVNNLFVBVE4sRUFTa0IzQyxJQUFJK0MsSUFUdEI7QUFVQU4sY0FBVTNDLE1BQVYsQ0FBaUIsTUFBakIsRUFBeUJDLElBQXpCLENBQThCLEdBQTlCLEVBQW1DLFVBQVVMLENBQVYsRUFBYTtBQUM5QyxVQUFJc0QsVUFBVUMsY0FBY3ZELENBQWQsSUFBbUIsQ0FBakM7QUFDQSxhQUFPQSxFQUFFUSxRQUFGLElBQWNSLEVBQUVTLFNBQWhCLEdBQTRCLENBQUM2QyxPQUE3QixHQUF1Q0EsT0FBOUM7QUFDRCxLQUhELEVBR0dqRCxJQUhILENBR1EsSUFIUixFQUdjLEdBSGQsRUFHbUJBLElBSG5CLENBR3dCLGFBSHhCLEVBR3VDLFVBQVVMLENBQVYsRUFBYTtBQUNsRCxhQUFPQSxFQUFFUSxRQUFGLElBQWNSLEVBQUVTLFNBQWhCLEdBQTRCLEtBQTVCLEdBQW9DLE9BQTNDO0FBQ0QsS0FMRCxFQUtHK0MsSUFMSCxDQUtRLFVBQVV4RCxDQUFWLEVBQWE7QUFDbkIsYUFBT0EsRUFBRXdCLElBQUYsSUFBVXhCLEVBQUVwQyxLQUFGLEdBQVUsT0FBT29DLEVBQUVwQyxLQUFuQixHQUEyQixFQUFyQyxDQUFQO0FBQ0QsS0FQRCxFQU9HdUYsS0FQSCxDQU9TLGNBUFQsRUFPeUIsQ0FQekIsRUFPNEJGLEVBUDVCLENBTytCLFdBUC9CLEVBTzRDLFVBQVVqRCxDQUFWLEVBQWE7QUFDdkQsVUFBSUEsRUFBRVksYUFBTixFQUFxQk4sSUFBSThDLElBQUosQ0FBU3BELENBQVQ7QUFDdEIsS0FURCxFQVNHaUQsRUFUSCxDQVNNLFVBVE4sRUFTa0IzQyxJQUFJK0MsSUFUdEI7QUFVQSxRQUFJSSxVQUFVL0IsS0FBS2dDLEdBQUwsQ0FBU0MsS0FBVCxDQUFlakMsSUFBZixFQUFxQmEsTUFBTUgsR0FBTixDQUFVLFVBQVVwQyxDQUFWLEVBQWE7QUFDeEQsYUFBT0EsRUFBRUMsQ0FBRixHQUFNYixhQUFiO0FBQ0QsS0FGa0MsQ0FBckIsQ0FBZDtBQUdBLFFBQUlxRSxVQUFVckUsYUFBVixHQUEwQixFQUExQixHQUErQkQsQ0FBbkMsRUFBc0M7QUFDcENpQyxxQkFBZXFDLFVBQVVyRSxhQUF6QjtBQUNBYixVQUFJTCxPQUFKLENBQVlpQyxNQUFaLENBQW1CdEIsUUFBbkIsRUFBNkI4RCxJQUE3QixHQUFvQ2lCLFVBQXBDLEdBQWlEdEMsT0FBT0wsRUFBeEQ7QUFDRDs7QUFFRCxRQUFJNEMsYUFBYWxCLEtBQUttQixVQUFMLEdBQWtCQyxRQUFsQixDQUEyQjFFLGtCQUEzQixFQUErQzJFLElBQS9DLENBQW9EMUUsY0FBcEQsRUFBb0VlLElBQXBFLENBQXlFLFdBQXpFLEVBQXNGLFVBQVVMLENBQVYsRUFBYTtBQUNsSCxhQUFPLGVBQWVBLEVBQUVDLENBQWpCLEdBQXFCLEdBQXJCLEdBQTJCRCxFQUFFRSxDQUE3QixHQUFpQyxHQUF4QztBQUNELEtBRmdCLENBQWpCO0FBR0EyRCxlQUFXMUQsTUFBWCxDQUFrQixRQUFsQixFQUE0QkUsSUFBNUIsQ0FBaUMsR0FBakMsRUFBc0MsVUFBVUwsQ0FBVixFQUFhO0FBQ2pELGFBQU91RCxjQUFjdkQsQ0FBZCxDQUFQO0FBQ0QsS0FGRCxFQUVHbUQsS0FGSCxDQUVTLGNBRlQsRUFFeUIsVUFBVW5ELENBQVYsRUFBYTtBQUNwQyxhQUFPQSxFQUFFdUIsUUFBRixHQUFhLEtBQWIsR0FBcUIsS0FBNUI7QUFDRCxLQUpELEVBSUc0QixLQUpILENBSVMsUUFKVCxFQUltQixVQUFVbkQsQ0FBVixFQUFhO0FBQzlCLGFBQU9BLEVBQUV1QixRQUFGLEdBQWEsU0FBYixHQUF5QixTQUFoQztBQUNELEtBTkQsRUFNRzRCLEtBTkgsQ0FNUyxNQU5ULEVBTWlCLFVBQVVuRCxDQUFWLEVBQWE7QUFDNUIsVUFBSUEsRUFBRXVCLFFBQU4sRUFBZ0IsT0FBT3ZCLEVBQUVTLFNBQUYsR0FBYyxTQUFkLEdBQTBCLE9BQWpDO0FBQ2hCLGFBQU9ULEVBQUVTLFNBQUYsR0FBYyxTQUFkLEdBQTBCLE9BQWpDO0FBQ0QsS0FURDtBQVVBb0QsZUFBVzFELE1BQVgsQ0FBa0IsTUFBbEIsRUFBMEJnRCxLQUExQixDQUFnQyxjQUFoQyxFQUFnRCxDQUFoRDs7QUFFQSxRQUFJYyxXQUFXdEIsS0FBS3VCLElBQUwsR0FBWUosVUFBWixHQUF5QkMsUUFBekIsQ0FBa0MxRSxrQkFBbEMsRUFBc0QyRSxJQUF0RCxDQUEyRDFFLGNBQTNELEVBQTJFZSxJQUEzRSxDQUFnRixXQUFoRixFQUE2RixZQUFZO0FBQ3RILGFBQU8sZUFBZWlCLE9BQU9yQixDQUF0QixHQUEwQixHQUExQixHQUFnQ3FCLE9BQU9wQixDQUF2QyxHQUEyQyxHQUFsRDtBQUNELEtBRmMsRUFFWmlFLE1BRlksRUFBZjtBQUdBRixhQUFTOUQsTUFBVCxDQUFnQixRQUFoQixFQUEwQkUsSUFBMUIsQ0FBK0IsR0FBL0IsRUFBb0MsQ0FBcEM7QUFDQTRELGFBQVM5RCxNQUFULENBQWdCLE1BQWhCLEVBQXdCZ0QsS0FBeEIsQ0FBOEIsY0FBOUIsRUFBOEMsQ0FBOUM7O0FBRUEsUUFBSWlCLE9BQU90RSxJQUFJOEMsU0FBSixDQUFjLFdBQWQsRUFBMkJDLElBQTNCLENBQWdDSixLQUFoQyxFQUF1QyxVQUFVekMsQ0FBVixFQUFhO0FBQzdELGFBQU9BLEVBQUVxRSxNQUFGLENBQVN2QixFQUFoQjtBQUNELEtBRlUsQ0FBWDtBQUdBc0IsU0FBS3BCLEtBQUwsR0FBYXNCLE1BQWIsQ0FBb0IsTUFBcEIsRUFBNEIsR0FBNUIsRUFBaUNqRSxJQUFqQyxDQUFzQyxPQUF0QyxFQUErQyxNQUEvQyxFQUF1REEsSUFBdkQsQ0FBNEQsR0FBNUQsRUFBaUUsWUFBWTtBQUMzRSxVQUFJa0UsSUFBSSxFQUFFckUsR0FBR29CLE9BQU9OLEVBQVosRUFBZ0JmLEdBQUdxQixPQUFPTCxFQUExQixFQUFSO0FBQ0EsYUFBT3BCLFNBQVMsRUFBRXlCLFFBQVFpRCxDQUFWLEVBQWFGLFFBQVFFLENBQXJCLEVBQVQsQ0FBUDtBQUNELEtBSEQ7QUFJQUgsU0FBS04sVUFBTCxHQUFrQkMsUUFBbEIsQ0FBMkIxRSxrQkFBM0IsRUFBK0MyRSxJQUEvQyxDQUFvRDFFLGNBQXBELEVBQW9FZSxJQUFwRSxDQUF5RSxHQUF6RSxFQUE4RVIsUUFBOUU7QUFDQXVFLFNBQUtGLElBQUwsR0FBWUosVUFBWixHQUF5QkMsUUFBekIsQ0FBa0MxRSxrQkFBbEMsRUFBc0QyRSxJQUF0RCxDQUEyRDFFLGNBQTNELEVBQTJFZSxJQUEzRSxDQUFnRixHQUFoRixFQUFxRixZQUFZO0FBQy9GLFVBQUlrRSxJQUFJLEVBQUVyRSxHQUFHb0IsT0FBT3BCLENBQVosRUFBZUQsR0FBR3FCLE9BQU9yQixDQUF6QixFQUFSO0FBQ0EsYUFBT0osU0FBUyxFQUFFeUIsUUFBUWlELENBQVYsRUFBYUYsUUFBUUUsQ0FBckIsRUFBVCxDQUFQO0FBQ0QsS0FIRCxFQUdHSixNQUhIOztBQUtBNUIsVUFBTXJCLE9BQU4sQ0FBYyxVQUFVbEIsQ0FBVixFQUFhO0FBQ3pCQSxRQUFFZ0IsRUFBRixHQUFPaEIsRUFBRUUsQ0FBVDtBQUNBRixRQUFFaUIsRUFBRixHQUFPakIsRUFBRUMsQ0FBVDtBQUNELEtBSEQ7QUFJRDs7QUFFRCxXQUFTc0QsYUFBVCxDQUF1QnZELENBQXZCLEVBQTBCO0FBQ3hCLFFBQUlBLEVBQUVRLFFBQUYsSUFBY1IsRUFBRVMsU0FBcEIsRUFBK0IsT0FBT2xCLFlBQVlpRixZQUFZeEUsQ0FBWixJQUFpQlIsYUFBcEM7QUFDL0IsV0FBT0QsU0FBUDtBQUNEOztBQUVELFdBQVNpRixXQUFULENBQXFCQyxDQUFyQixFQUF3QjtBQUN0QixRQUFJQyxNQUFNLENBQVY7QUFDQSxRQUFJRCxFQUFFakUsUUFBTixFQUFnQmlFLEVBQUVqRSxRQUFGLENBQVdVLE9BQVgsQ0FBbUIsVUFBVXlELENBQVYsRUFBYTtBQUM5QyxhQUFPRCxPQUFPRixZQUFZRyxDQUFaLENBQWQ7QUFDRCxLQUZlLEVBQWhCLEtBRVEsSUFBSUYsRUFBRWhFLFNBQU4sRUFBaUJnRSxFQUFFaEUsU0FBRixDQUFZUyxPQUFaLENBQW9CLFVBQVV5RCxDQUFWLEVBQWE7QUFDeEQsYUFBT0QsT0FBT0YsWUFBWUcsQ0FBWixDQUFkO0FBQ0QsS0FGd0IsRUFBakIsS0FFQUQ7QUFDUixXQUFPQSxHQUFQO0FBQ0Q7O0FBRUQsV0FBU3hCLEtBQVQsQ0FBZWxELENBQWYsRUFBa0I7QUFDaEIsUUFBSUEsRUFBRVEsUUFBTixFQUFnQjtBQUNkUixRQUFFUyxTQUFGLEdBQWNULEVBQUVRLFFBQWhCO0FBQ0FSLFFBQUVRLFFBQUYsR0FBYSxJQUFiO0FBQ0QsS0FIRCxNQUdPO0FBQ0xSLFFBQUVRLFFBQUYsR0FBYVIsRUFBRVMsU0FBZjtBQUNBVCxRQUFFUyxTQUFGLEdBQWMsSUFBZDtBQUNEO0FBQ0Q2QixXQUFPdEMsQ0FBUDs7QUFFQTtBQUNBLFFBQUlBLEVBQUVRLFFBQU4sRUFBZ0I7QUFDZFIsUUFBRVEsUUFBRixDQUFXVSxPQUFYLENBQW1CLFVBQVUwRCxLQUFWLEVBQWlCO0FBQ2xDLFlBQUlBLE1BQU1oRCxXQUFOLElBQXFCZ0QsTUFBTW5FLFNBQS9CLEVBQTBDeUMsTUFBTTBCLEtBQU47QUFDM0MsT0FGRDtBQUdEO0FBQ0Y7O0FBRUQsV0FBU3pELFFBQVQsQ0FBa0JuQixDQUFsQixFQUFxQjtBQUNuQixRQUFJQSxFQUFFUSxRQUFOLEVBQWdCO0FBQ2RSLFFBQUVTLFNBQUYsR0FBY1QsRUFBRVEsUUFBaEI7QUFDQVIsUUFBRVMsU0FBRixDQUFZUyxPQUFaLENBQW9CQyxRQUFwQjtBQUNBbkIsUUFBRVEsUUFBRixHQUFhLElBQWI7QUFDRDtBQUNGO0FBQ0Q4QixTQUFPeEIsSUFBUDtBQUNEIiwiZmlsZSI6Impzb25sZC12aXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuLyogZ2xvYmFscyBkMyAqL1xuLyogZXNsaW50IG5vLXNoYWRvdzogXCJvZmZcIiAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoZDMpIHtcbiAgZDMuanNvbmxkVmlzID0ganNvbmxkVmlzO1xufTtcblxudmFyIF9kID0gcmVxdWlyZSgnZDMnKTtcblxudmFyIF9kMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2QpO1xuXG52YXIgX2QzVGlwID0gcmVxdWlyZSgnZDMtdGlwJyk7XG5cbnZhciBfZDNUaXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZDNUaXApO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4oMCwgX2QzVGlwMi5kZWZhdWx0KShfZDIuZGVmYXVsdCk7XG5cbmZ1bmN0aW9uIGpzb25sZFZpcyhqc29ubGQsIHNlbGVjdG9yKSB7XG4gIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuICBpZiAoIWpzb25sZCAmJiAhc2VsZWN0b3IpIHJldHVybiBqc29ubGRWaXM7XG5cbiAgdmFyIGggPSBjb25maWcuaCB8fCA2MDAsXG4gICAgICB3ID0gY29uZmlnLncgfHwgODAwLFxuICAgICAgbWF4TGFiZWxXaWR0aCA9IGNvbmZpZy5tYXhMYWJlbFdpZHRoIHx8IDI1MCxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IGNvbmZpZy50cmFuc2l0aW9uRHVyYXRpb24gfHwgNzUwLFxuICAgICAgdHJhbnNpdGlvbkVhc2UgPSBjb25maWcudHJhbnNpdGlvbkVhc2UgfHwgJ2N1YmljLWluLW91dCcsXG4gICAgICBtaW5SYWRpdXMgPSBjb25maWcubWluUmFkaXVzIHx8IDUsXG4gICAgICBzY2FsaW5nRmFjdG9yID0gY29uZmlnLnNjYWxpbmdGYWN0b3IgfHwgMixcbiAgICAgIGkgPSAwLFxuICAgICAgdHJlZSA9IF9kMi5kZWZhdWx0LmxheW91dC50cmVlKCkuc2l6ZShbaCwgd10pLFxuICAgICAgZGlhZ29uYWwgPSBfZDIuZGVmYXVsdC5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIFtkLnksIGQueF07XG4gIH0pLFxuICAgICAgc3ZnID0gX2QyLmRlZmF1bHQuc2VsZWN0KHNlbGVjdG9yKS5hcHBlbmQoJ3N2ZycpLmF0dHIoJ3dpZHRoJywgdykuYXR0cignaGVpZ2h0JywgaCkuYXBwZW5kKCdnJykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWF4TGFiZWxXaWR0aCArICcsMCknKSxcbiAgICAgIHRpcCA9IF9kMi5kZWZhdWx0LnRpcCgpLmRpcmVjdGlvbihmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gJ3cnIDogJ2UnO1xuICB9KS5vZmZzZXQoZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IFswLCAtM10gOiBbMCwgM107XG4gIH0pLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gJzxzcGFuPicgKyBkLnZhbHVlRXh0ZW5kZWQgKyAnPC9zcGFuPic7XG4gIH0pO1xuICBzdmcuY2FsbCh0aXApO1xuXG4gIHZhciByb290ID0ganNvbmxkVHJlZShqc29ubGQpO1xuICByb290LngwID0gaCAvIDI7XG4gIHJvb3QueTAgPSAwO1xuICByb290LmNoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xuXG4gIGZ1bmN0aW9uIGNoYW5nZVNWR1dpZHRoKG5ld1dpZHRoKSB7XG4gICAgaWYgKHcgIT09IG5ld1dpZHRoKSBfZDIuZGVmYXVsdC5zZWxlY3Qoc2VsZWN0b3IgKyAnID4gc3ZnJykuYXR0cignd2lkdGgnLCBuZXdXaWR0aCk7XG4gIH1cblxuICBmdW5jdGlvbiBqc29ubGRUcmVlKHNvdXJjZSkge1xuICAgIHZhciB0cmVlID0ge307XG4gICAgaWYgKCdAaWQnIGluIHNvdXJjZSkge1xuICAgICAgdHJlZS5pc0lkTm9kZSA9IHRydWU7XG4gICAgICB0cmVlLm5hbWUgPSBzb3VyY2VbJ0BpZCddO1xuICAgICAgaWYgKHRyZWUubmFtZS5sZW5ndGggPiBtYXhMYWJlbFdpZHRoIC8gOSkge1xuICAgICAgICB0cmVlLnZhbHVlRXh0ZW5kZWQgPSB0cmVlLm5hbWU7XG4gICAgICAgIHRyZWUubmFtZSA9ICfigKYnICsgdHJlZS52YWx1ZUV4dGVuZGVkLnNsaWNlKC1NYXRoLmZsb29yKG1heExhYmVsV2lkdGggLyA5KSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWUuaXNJZE5vZGUgPSB0cnVlO1xuICAgICAgdHJlZS5pc0JsYW5rTm9kZSA9IHRydWU7XG4gICAgICAvLyByYW5kb20gaWQsIGNhbiByZXBsYWNlIHdpdGggYWN0dWFsIHV1aWQgZ2VuZXJhdG9yIGlmIG5lZWRlZFxuICAgICAgdHJlZS5uYW1lID0gJ186YicgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDEwKS5zbGljZSgtNyk7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChrZXkgPT09ICdAaWQnIHx8IGtleSA9PT0gJ0Bjb250ZXh0JyB8fCBzb3VyY2Vba2V5XSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgdmFyIHZhbHVlRXh0ZW5kZWQgPSB2b2lkIDAsXG4gICAgICAgICAgdmFsdWUgPSB2b2lkIDA7XG4gICAgICBpZiAoX3R5cGVvZihzb3VyY2Vba2V5XSkgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHNvdXJjZVtrZXldKSkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgY2hpbGRyZW46IFtqc29ubGRUcmVlKHNvdXJjZVtrZXldKV1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlW2tleV0pKSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgICBjaGlsZHJlbjogc291cmNlW2tleV0ubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpdGVtKSkgPT09ICdvYmplY3QnKSByZXR1cm4ganNvbmxkVHJlZShpdGVtKTtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IGl0ZW0gfTtcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlRXh0ZW5kZWQgPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZUV4dGVuZGVkO1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gbWF4TGFiZWxXaWR0aCAvIDkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIE1hdGguZmxvb3IobWF4TGFiZWxXaWR0aCAvIDkpKSArICfigKYnO1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdmFsdWVFeHRlbmRlZDogdmFsdWVFeHRlbmRlZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHRyZWUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICByZXR1cm4gdHJlZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UpIHtcbiAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKSxcbiAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC55ID0gZC5kZXB0aCAqIG1heExhYmVsV2lkdGg7XG4gICAgfSk7XG4gICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKCdnLm5vZGUnKS5kYXRhKG5vZGVzLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpO1xuICAgIH0pLFxuICAgICAgICBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbm9kZScpLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBzb3VyY2UueTAgKyAnLCcgKyBzb3VyY2UueDAgKyAnKSc7XG4gICAgfSkub24oJ2NsaWNrJywgY2xpY2spO1xuICAgIG5vZGVFbnRlci5hcHBlbmQoJ2NpcmNsZScpLmF0dHIoJ3InLCAwKS5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmlzSWROb2RlID8gJzJweCcgOiAnMXB4JztcbiAgICB9KS5zdHlsZSgnc3Ryb2tlJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmlzSWROb2RlID8gJyNGN0NBMTgnIDogJyM0RUNEQzQnO1xuICAgIH0pLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLmlzSWROb2RlKSByZXR1cm4gZC5fY2hpbGRyZW4gPyAnI0Y1RDc2RScgOiAnd2hpdGUnO1xuICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gJyM4NkUyRDUnIDogJ3doaXRlJztcbiAgICB9KS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLnZhbHVlRXh0ZW5kZWQpIHRpcC5zaG93KGQpO1xuICAgIH0pLm9uKCdtb3VzZW91dCcsIHRpcC5oaWRlKTtcbiAgICBub2RlRW50ZXIuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YXIgc3BhY2luZyA9IGNvbXB1dGVSYWRpdXMoZCkgKyA1O1xuICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtc3BhY2luZyA6IHNwYWNpbmc7XG4gICAgfSkuYXR0cignZHknLCAnNCcpLmF0dHIoJ3RleHQtYW5jaG9yJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gJ2VuZCcgOiAnc3RhcnQnO1xuICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLm5hbWUgKyAoZC52YWx1ZSA/ICc6ICcgKyBkLnZhbHVlIDogJycpO1xuICAgIH0pLnN0eWxlKCdmaWxsLW9wYWNpdHknLCAwKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLnZhbHVlRXh0ZW5kZWQpIHRpcC5zaG93KGQpO1xuICAgIH0pLm9uKCdtb3VzZW91dCcsIHRpcC5oaWRlKTtcbiAgICB2YXIgbWF4U3BhbiA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIG5vZGVzLm1hcChmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGQueSArIG1heExhYmVsV2lkdGg7XG4gICAgfSkpO1xuICAgIGlmIChtYXhTcGFuICsgbWF4TGFiZWxXaWR0aCArIDIwID4gdykge1xuICAgICAgY2hhbmdlU1ZHV2lkdGgobWF4U3BhbiArIG1heExhYmVsV2lkdGgpO1xuICAgICAgX2QyLmRlZmF1bHQuc2VsZWN0KHNlbGVjdG9yKS5ub2RlKCkuc2Nyb2xsTGVmdCA9IHNvdXJjZS55MDtcbiAgICB9XG5cbiAgICB2YXIgbm9kZVVwZGF0ZSA9IG5vZGUudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRyYW5zaXRpb25EdXJhdGlvbikuZWFzZSh0cmFuc2l0aW9uRWFzZSkuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnkgKyAnLCcgKyBkLnggKyAnKSc7XG4gICAgfSk7XG4gICAgbm9kZVVwZGF0ZS5zZWxlY3QoJ2NpcmNsZScpLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGNvbXB1dGVSYWRpdXMoZCk7XG4gICAgfSkuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC5pc0lkTm9kZSA/ICcycHgnIDogJzFweCc7XG4gICAgfSkuc3R5bGUoJ3N0cm9rZScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC5pc0lkTm9kZSA/ICcjRjdDQTE4JyA6ICcjNEVDREM0JztcbiAgICB9KS5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICBpZiAoZC5pc0lkTm9kZSkgcmV0dXJuIGQuX2NoaWxkcmVuID8gJyNGNUQ3NkUnIDogJ3doaXRlJztcbiAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/ICcjODZFMkQ1JyA6ICd3aGl0ZSc7XG4gICAgfSk7XG4gICAgbm9kZVVwZGF0ZS5zZWxlY3QoJ3RleHQnKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMSk7XG5cbiAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKS5lYXNlKHRyYW5zaXRpb25FYXNlKS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgc291cmNlLnkgKyAnLCcgKyBzb3VyY2UueCArICcpJztcbiAgICB9KS5yZW1vdmUoKTtcbiAgICBub2RlRXhpdC5zZWxlY3QoJ2NpcmNsZScpLmF0dHIoJ3InLCAwKTtcbiAgICBub2RlRXhpdC5zZWxlY3QoJ3RleHQnKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMCk7XG5cbiAgICB2YXIgbGluayA9IHN2Zy5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmRhdGEobGlua3MsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgfSk7XG4gICAgbGluay5lbnRlcigpLmluc2VydCgncGF0aCcsICdnJykuYXR0cignY2xhc3MnLCAnbGluaycpLmF0dHIoJ2QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbyA9IHsgeDogc291cmNlLngwLCB5OiBzb3VyY2UueTAgfTtcbiAgICAgIHJldHVybiBkaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xuICAgIH0pO1xuICAgIGxpbmsudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRyYW5zaXRpb25EdXJhdGlvbikuZWFzZSh0cmFuc2l0aW9uRWFzZSkuYXR0cignZCcsIGRpYWdvbmFsKTtcbiAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKS5lYXNlKHRyYW5zaXRpb25FYXNlKS5hdHRyKCdkJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54LCB5OiBzb3VyY2UueSB9O1xuICAgICAgcmV0dXJuIGRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XG4gICAgfSkucmVtb3ZlKCk7XG5cbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBkLngwID0gZC54O1xuICAgICAgZC55MCA9IGQueTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVSYWRpdXMoZCkge1xuICAgIGlmIChkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuKSByZXR1cm4gbWluUmFkaXVzICsgbnVtRW5kTm9kZXMoZCkgLyBzY2FsaW5nRmFjdG9yO1xuICAgIHJldHVybiBtaW5SYWRpdXM7XG4gIH1cblxuICBmdW5jdGlvbiBudW1FbmROb2RlcyhuKSB7XG4gICAgdmFyIG51bSA9IDA7XG4gICAgaWYgKG4uY2hpbGRyZW4pIG4uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgcmV0dXJuIG51bSArPSBudW1FbmROb2RlcyhjKTtcbiAgICB9KTtlbHNlIGlmIChuLl9jaGlsZHJlbikgbi5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgcmV0dXJuIG51bSArPSBudW1FbmROb2RlcyhjKTtcbiAgICB9KTtlbHNlIG51bSsrO1xuICAgIHJldHVybiBudW07XG4gIH1cblxuICBmdW5jdGlvbiBjbGljayhkKSB7XG4gICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIHVwZGF0ZShkKTtcblxuICAgIC8vIGZhc3QtZm9yd2FyZCBibGFuayBub2Rlc1xuICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICBkLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5pc0JsYW5rTm9kZSAmJiBjaGlsZC5fY2hpbGRyZW4pIGNsaWNrKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcbiAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xuICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XG4gICAgICBkLmNoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgdXBkYXRlKHJvb3QpO1xufSJdfQ==
},{"d3":212,"d3-tip":186}],212:[function(require,module,exports){
!function() {
  var d3 = {
    version: "3.5.17"
  };
  var d3_arraySlice = [].slice, d3_array = function(list) {
    return d3_arraySlice.call(list);
  };
  var d3_document = this.document;
  function d3_documentElement(node) {
    return node && (node.ownerDocument || node.document || node).documentElement;
  }
  function d3_window(node) {
    return node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView);
  }
  if (d3_document) {
    try {
      d3_array(d3_document.documentElement.childNodes)[0].nodeType;
    } catch (e) {
      d3_array = function(list) {
        var i = list.length, array = new Array(i);
        while (i--) array[i] = list[i];
        return array;
      };
    }
  }
  if (!Date.now) Date.now = function() {
    return +new Date();
  };
  if (d3_document) {
    try {
      d3_document.createElement("DIV").style.setProperty("opacity", 0, "");
    } catch (error) {
      var d3_element_prototype = this.Element.prototype, d3_element_setAttribute = d3_element_prototype.setAttribute, d3_element_setAttributeNS = d3_element_prototype.setAttributeNS, d3_style_prototype = this.CSSStyleDeclaration.prototype, d3_style_setProperty = d3_style_prototype.setProperty;
      d3_element_prototype.setAttribute = function(name, value) {
        d3_element_setAttribute.call(this, name, value + "");
      };
      d3_element_prototype.setAttributeNS = function(space, local, value) {
        d3_element_setAttributeNS.call(this, space, local, value + "");
      };
      d3_style_prototype.setProperty = function(name, value, priority) {
        d3_style_setProperty.call(this, name, value + "", priority);
      };
    }
  }
  d3.ascending = d3_ascending;
  function d3_ascending(a, b) {
    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
  }
  d3.descending = function(a, b) {
    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
  };
  d3.min = function(array, f) {
    var i = -1, n = array.length, a, b;
    if (arguments.length === 1) {
      while (++i < n) if ((b = array[i]) != null && b >= b) {
        a = b;
        break;
      }
      while (++i < n) if ((b = array[i]) != null && a > b) a = b;
    } else {
      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {
        a = b;
        break;
      }
      while (++i < n) if ((b = f.call(array, array[i], i)) != null && a > b) a = b;
    }
    return a;
  };
  d3.max = function(array, f) {
    var i = -1, n = array.length, a, b;
    if (arguments.length === 1) {
      while (++i < n) if ((b = array[i]) != null && b >= b) {
        a = b;
        break;
      }
      while (++i < n) if ((b = array[i]) != null && b > a) a = b;
    } else {
      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {
        a = b;
        break;
      }
      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b > a) a = b;
    }
    return a;
  };
  d3.extent = function(array, f) {
    var i = -1, n = array.length, a, b, c;
    if (arguments.length === 1) {
      while (++i < n) if ((b = array[i]) != null && b >= b) {
        a = c = b;
        break;
      }
      while (++i < n) if ((b = array[i]) != null) {
        if (a > b) a = b;
        if (c < b) c = b;
      }
    } else {
      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {
        a = c = b;
        break;
      }
      while (++i < n) if ((b = f.call(array, array[i], i)) != null) {
        if (a > b) a = b;
        if (c < b) c = b;
      }
    }
    return [ a, c ];
  };
  function d3_number(x) {
    return x === null ? NaN : +x;
  }
  function d3_numeric(x) {
    return !isNaN(x);
  }
  d3.sum = function(array, f) {
    var s = 0, n = array.length, a, i = -1;
    if (arguments.length === 1) {
      while (++i < n) if (d3_numeric(a = +array[i])) s += a;
    } else {
      while (++i < n) if (d3_numeric(a = +f.call(array, array[i], i))) s += a;
    }
    return s;
  };
  d3.mean = function(array, f) {
    var s = 0, n = array.length, a, i = -1, j = n;
    if (arguments.length === 1) {
      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) s += a; else --j;
    } else {
      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) s += a; else --j;
    }
    if (j) return s / j;
  };
  d3.quantile = function(values, p) {
    var H = (values.length - 1) * p + 1, h = Math.floor(H), v = +values[h - 1], e = H - h;
    return e ? v + e * (values[h] - v) : v;
  };
  d3.median = function(array, f) {
    var numbers = [], n = array.length, a, i = -1;
    if (arguments.length === 1) {
      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) numbers.push(a);
    } else {
      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) numbers.push(a);
    }
    if (numbers.length) return d3.quantile(numbers.sort(d3_ascending), .5);
  };
  d3.variance = function(array, f) {
    var n = array.length, m = 0, a, d, s = 0, i = -1, j = 0;
    if (arguments.length === 1) {
      while (++i < n) {
        if (d3_numeric(a = d3_number(array[i]))) {
          d = a - m;
          m += d / ++j;
          s += d * (a - m);
        }
      }
    } else {
      while (++i < n) {
        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) {
          d = a - m;
          m += d / ++j;
          s += d * (a - m);
        }
      }
    }
    if (j > 1) return s / (j - 1);
  };
  d3.deviation = function() {
    var v = d3.variance.apply(this, arguments);
    return v ? Math.sqrt(v) : v;
  };
  function d3_bisector(compare) {
    return {
      left: function(a, x, lo, hi) {
        if (arguments.length < 3) lo = 0;
        if (arguments.length < 4) hi = a.length;
        while (lo < hi) {
          var mid = lo + hi >>> 1;
          if (compare(a[mid], x) < 0) lo = mid + 1; else hi = mid;
        }
        return lo;
      },
      right: function(a, x, lo, hi) {
        if (arguments.length < 3) lo = 0;
        if (arguments.length < 4) hi = a.length;
        while (lo < hi) {
          var mid = lo + hi >>> 1;
          if (compare(a[mid], x) > 0) hi = mid; else lo = mid + 1;
        }
        return lo;
      }
    };
  }
  var d3_bisect = d3_bisector(d3_ascending);
  d3.bisectLeft = d3_bisect.left;
  d3.bisect = d3.bisectRight = d3_bisect.right;
  d3.bisector = function(f) {
    return d3_bisector(f.length === 1 ? function(d, x) {
      return d3_ascending(f(d), x);
    } : f);
  };
  d3.shuffle = function(array, i0, i1) {
    if ((m = arguments.length) < 3) {
      i1 = array.length;
      if (m < 2) i0 = 0;
    }
    var m = i1 - i0, t, i;
    while (m) {
      i = Math.random() * m-- | 0;
      t = array[m + i0], array[m + i0] = array[i + i0], array[i + i0] = t;
    }
    return array;
  };
  d3.permute = function(array, indexes) {
    var i = indexes.length, permutes = new Array(i);
    while (i--) permutes[i] = array[indexes[i]];
    return permutes;
  };
  d3.pairs = function(array) {
    var i = 0, n = array.length - 1, p0, p1 = array[0], pairs = new Array(n < 0 ? 0 : n);
    while (i < n) pairs[i] = [ p0 = p1, p1 = array[++i] ];
    return pairs;
  };
  d3.transpose = function(matrix) {
    if (!(n = matrix.length)) return [];
    for (var i = -1, m = d3.min(matrix, d3_transposeLength), transpose = new Array(m); ++i < m; ) {
      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n; ) {
        row[j] = matrix[j][i];
      }
    }
    return transpose;
  };
  function d3_transposeLength(d) {
    return d.length;
  }
  d3.zip = function() {
    return d3.transpose(arguments);
  };
  d3.keys = function(map) {
    var keys = [];
    for (var key in map) keys.push(key);
    return keys;
  };
  d3.values = function(map) {
    var values = [];
    for (var key in map) values.push(map[key]);
    return values;
  };
  d3.entries = function(map) {
    var entries = [];
    for (var key in map) entries.push({
      key: key,
      value: map[key]
    });
    return entries;
  };
  d3.merge = function(arrays) {
    var n = arrays.length, m, i = -1, j = 0, merged, array;
    while (++i < n) j += arrays[i].length;
    merged = new Array(j);
    while (--n >= 0) {
      array = arrays[n];
      m = array.length;
      while (--m >= 0) {
        merged[--j] = array[m];
      }
    }
    return merged;
  };
  var abs = Math.abs;
  d3.range = function(start, stop, step) {
    if (arguments.length < 3) {
      step = 1;
      if (arguments.length < 2) {
        stop = start;
        start = 0;
      }
    }
    if ((stop - start) / step === Infinity) throw new Error("infinite range");
    var range = [], k = d3_range_integerScale(abs(step)), i = -1, j;
    start *= k, stop *= k, step *= k;
    if (step < 0) while ((j = start + step * ++i) > stop) range.push(j / k); else while ((j = start + step * ++i) < stop) range.push(j / k);
    return range;
  };
  function d3_range_integerScale(x) {
    var k = 1;
    while (x * k % 1) k *= 10;
    return k;
  }
  function d3_class(ctor, properties) {
    for (var key in properties) {
      Object.defineProperty(ctor.prototype, key, {
        value: properties[key],
        enumerable: false
      });
    }
  }
  d3.map = function(object, f) {
    var map = new d3_Map();
    if (object instanceof d3_Map) {
      object.forEach(function(key, value) {
        map.set(key, value);
      });
    } else if (Array.isArray(object)) {
      var i = -1, n = object.length, o;
      if (arguments.length === 1) while (++i < n) map.set(i, object[i]); else while (++i < n) map.set(f.call(object, o = object[i], i), o);
    } else {
      for (var key in object) map.set(key, object[key]);
    }
    return map;
  };
  function d3_Map() {
    this._ = Object.create(null);
  }
  var d3_map_proto = "__proto__", d3_map_zero = "\x00";
  d3_class(d3_Map, {
    has: d3_map_has,
    get: function(key) {
      return this._[d3_map_escape(key)];
    },
    set: function(key, value) {
      return this._[d3_map_escape(key)] = value;
    },
    remove: d3_map_remove,
    keys: d3_map_keys,
    values: function() {
      var values = [];
      for (var key in this._) values.push(this._[key]);
      return values;
    },
    entries: function() {
      var entries = [];
      for (var key in this._) entries.push({
        key: d3_map_unescape(key),
        value: this._[key]
      });
      return entries;
    },
    size: d3_map_size,
    empty: d3_map_empty,
    forEach: function(f) {
      for (var key in this._) f.call(this, d3_map_unescape(key), this._[key]);
    }
  });
  function d3_map_escape(key) {
    return (key += "") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key;
  }
  function d3_map_unescape(key) {
    return (key += "")[0] === d3_map_zero ? key.slice(1) : key;
  }
  function d3_map_has(key) {
    return d3_map_escape(key) in this._;
  }
  function d3_map_remove(key) {
    return (key = d3_map_escape(key)) in this._ && delete this._[key];
  }
  function d3_map_keys() {
    var keys = [];
    for (var key in this._) keys.push(d3_map_unescape(key));
    return keys;
  }
  function d3_map_size() {
    var size = 0;
    for (var key in this._) ++size;
    return size;
  }
  function d3_map_empty() {
    for (var key in this._) return false;
    return true;
  }
  d3.nest = function() {
    var nest = {}, keys = [], sortKeys = [], sortValues, rollup;
    function map(mapType, array, depth) {
      if (depth >= keys.length) return rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;
      var i = -1, n = array.length, key = keys[depth++], keyValue, object, setter, valuesByKey = new d3_Map(), values;
      while (++i < n) {
        if (values = valuesByKey.get(keyValue = key(object = array[i]))) {
          values.push(object);
        } else {
          valuesByKey.set(keyValue, [ object ]);
        }
      }
      if (mapType) {
        object = mapType();
        setter = function(keyValue, values) {
          object.set(keyValue, map(mapType, values, depth));
        };
      } else {
        object = {};
        setter = function(keyValue, values) {
          object[keyValue] = map(mapType, values, depth);
        };
      }
      valuesByKey.forEach(setter);
      return object;
    }
    function entries(map, depth) {
      if (depth >= keys.length) return map;
      var array = [], sortKey = sortKeys[depth++];
      map.forEach(function(key, keyMap) {
        array.push({
          key: key,
          values: entries(keyMap, depth)
        });
      });
      return sortKey ? array.sort(function(a, b) {
        return sortKey(a.key, b.key);
      }) : array;
    }
    nest.map = function(array, mapType) {
      return map(mapType, array, 0);
    };
    nest.entries = function(array) {
      return entries(map(d3.map, array, 0), 0);
    };
    nest.key = function(d) {
      keys.push(d);
      return nest;
    };
    nest.sortKeys = function(order) {
      sortKeys[keys.length - 1] = order;
      return nest;
    };
    nest.sortValues = function(order) {
      sortValues = order;
      return nest;
    };
    nest.rollup = function(f) {
      rollup = f;
      return nest;
    };
    return nest;
  };
  d3.set = function(array) {
    var set = new d3_Set();
    if (array) for (var i = 0, n = array.length; i < n; ++i) set.add(array[i]);
    return set;
  };
  function d3_Set() {
    this._ = Object.create(null);
  }
  d3_class(d3_Set, {
    has: d3_map_has,
    add: function(key) {
      this._[d3_map_escape(key += "")] = true;
      return key;
    },
    remove: d3_map_remove,
    values: d3_map_keys,
    size: d3_map_size,
    empty: d3_map_empty,
    forEach: function(f) {
      for (var key in this._) f.call(this, d3_map_unescape(key));
    }
  });
  d3.behavior = {};
  function d3_identity(d) {
    return d;
  }
  d3.rebind = function(target, source) {
    var i = 1, n = arguments.length, method;
    while (++i < n) target[method = arguments[i]] = d3_rebind(target, source, source[method]);
    return target;
  };
  function d3_rebind(target, source, method) {
    return function() {
      var value = method.apply(source, arguments);
      return value === source ? target : value;
    };
  }
  function d3_vendorSymbol(object, name) {
    if (name in object) return name;
    name = name.charAt(0).toUpperCase() + name.slice(1);
    for (var i = 0, n = d3_vendorPrefixes.length; i < n; ++i) {
      var prefixName = d3_vendorPrefixes[i] + name;
      if (prefixName in object) return prefixName;
    }
  }
  var d3_vendorPrefixes = [ "webkit", "ms", "moz", "Moz", "o", "O" ];
  function d3_noop() {}
  d3.dispatch = function() {
    var dispatch = new d3_dispatch(), i = -1, n = arguments.length;
    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
    return dispatch;
  };
  function d3_dispatch() {}
  d3_dispatch.prototype.on = function(type, listener) {
    var i = type.indexOf("."), name = "";
    if (i >= 0) {
      name = type.slice(i + 1);
      type = type.slice(0, i);
    }
    if (type) return arguments.length < 2 ? this[type].on(name) : this[type].on(name, listener);
    if (arguments.length === 2) {
      if (listener == null) for (type in this) {
        if (this.hasOwnProperty(type)) this[type].on(name, null);
      }
      return this;
    }
  };
  function d3_dispatch_event(dispatch) {
    var listeners = [], listenerByName = new d3_Map();
    function event() {
      var z = listeners, i = -1, n = z.length, l;
      while (++i < n) if (l = z[i].on) l.apply(this, arguments);
      return dispatch;
    }
    event.on = function(name, listener) {
      var l = listenerByName.get(name), i;
      if (arguments.length < 2) return l && l.on;
      if (l) {
        l.on = null;
        listeners = listeners.slice(0, i = listeners.indexOf(l)).concat(listeners.slice(i + 1));
        listenerByName.remove(name);
      }
      if (listener) listeners.push(listenerByName.set(name, {
        on: listener
      }));
      return dispatch;
    };
    return event;
  }
  d3.event = null;
  function d3_eventPreventDefault() {
    d3.event.preventDefault();
  }
  function d3_eventSource() {
    var e = d3.event, s;
    while (s = e.sourceEvent) e = s;
    return e;
  }
  function d3_eventDispatch(target) {
    var dispatch = new d3_dispatch(), i = 0, n = arguments.length;
    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
    dispatch.of = function(thiz, argumentz) {
      return function(e1) {
        try {
          var e0 = e1.sourceEvent = d3.event;
          e1.target = target;
          d3.event = e1;
          dispatch[e1.type].apply(thiz, argumentz);
        } finally {
          d3.event = e0;
        }
      };
    };
    return dispatch;
  }
  d3.requote = function(s) {
    return s.replace(d3_requote_re, "\\$&");
  };
  var d3_requote_re = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
  var d3_subclass = {}.__proto__ ? function(object, prototype) {
    object.__proto__ = prototype;
  } : function(object, prototype) {
    for (var property in prototype) object[property] = prototype[property];
  };
  function d3_selection(groups) {
    d3_subclass(groups, d3_selectionPrototype);
    return groups;
  }
  var d3_select = function(s, n) {
    return n.querySelector(s);
  }, d3_selectAll = function(s, n) {
    return n.querySelectorAll(s);
  }, d3_selectMatches = function(n, s) {
    var d3_selectMatcher = n.matches || n[d3_vendorSymbol(n, "matchesSelector")];
    d3_selectMatches = function(n, s) {
      return d3_selectMatcher.call(n, s);
    };
    return d3_selectMatches(n, s);
  };
  if (typeof Sizzle === "function") {
    d3_select = function(s, n) {
      return Sizzle(s, n)[0] || null;
    };
    d3_selectAll = Sizzle;
    d3_selectMatches = Sizzle.matchesSelector;
  }
  d3.selection = function() {
    return d3.select(d3_document.documentElement);
  };
  var d3_selectionPrototype = d3.selection.prototype = [];
  d3_selectionPrototype.select = function(selector) {
    var subgroups = [], subgroup, subnode, group, node;
    selector = d3_selection_selector(selector);
    for (var j = -1, m = this.length; ++j < m; ) {
      subgroups.push(subgroup = []);
      subgroup.parentNode = (group = this[j]).parentNode;
      for (var i = -1, n = group.length; ++i < n; ) {
        if (node = group[i]) {
          subgroup.push(subnode = selector.call(node, node.__data__, i, j));
          if (subnode && "__data__" in node) subnode.__data__ = node.__data__;
        } else {
          subgroup.push(null);
        }
      }
    }
    return d3_selection(subgroups);
  };
  function d3_selection_selector(selector) {
    return typeof selector === "function" ? selector : function() {
      return d3_select(selector, this);
    };
  }
  d3_selectionPrototype.selectAll = function(selector) {
    var subgroups = [], subgroup, node;
    selector = d3_selection_selectorAll(selector);
    for (var j = -1, m = this.length; ++j < m; ) {
      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {
        if (node = group[i]) {
          subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i, j)));
          subgroup.parentNode = node;
        }
      }
    }
    return d3_selection(subgroups);
  };
  function d3_selection_selectorAll(selector) {
    return typeof selector === "function" ? selector : function() {
      return d3_selectAll(selector, this);
    };
  }
  var d3_nsXhtml = "http://www.w3.org/1999/xhtml";
  var d3_nsPrefix = {
    svg: "http://www.w3.org/2000/svg",
    xhtml: d3_nsXhtml,
    xlink: "http://www.w3.org/1999/xlink",
    xml: "http://www.w3.org/XML/1998/namespace",
    xmlns: "http://www.w3.org/2000/xmlns/"
  };
  d3.ns = {
    prefix: d3_nsPrefix,
    qualify: function(name) {
      var i = name.indexOf(":"), prefix = name;
      if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);
      return d3_nsPrefix.hasOwnProperty(prefix) ? {
        space: d3_nsPrefix[prefix],
        local: name
      } : name;
    }
  };
  d3_selectionPrototype.attr = function(name, value) {
    if (arguments.length < 2) {
      if (typeof name === "string") {
        var node = this.node();
        name = d3.ns.qualify(name);
        return name.local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name);
      }
      for (value in name) this.each(d3_selection_attr(value, name[value]));
      return this;
    }
    return this.each(d3_selection_attr(name, value));
  };
  function d3_selection_attr(name, value) {
    name = d3.ns.qualify(name);
    function attrNull() {
      this.removeAttribute(name);
    }
    function attrNullNS() {
      this.removeAttributeNS(name.space, name.local);
    }
    function attrConstant() {
      this.setAttribute(name, value);
    }
    function attrConstantNS() {
      this.setAttributeNS(name.space, name.local, value);
    }
    function attrFunction() {
      var x = value.apply(this, arguments);
      if (x == null) this.removeAttribute(name); else this.setAttribute(name, x);
    }
    function attrFunctionNS() {
      var x = value.apply(this, arguments);
      if (x == null) this.removeAttributeNS(name.space, name.local); else this.setAttributeNS(name.space, name.local, x);
    }
    return value == null ? name.local ? attrNullNS : attrNull : typeof value === "function" ? name.local ? attrFunctionNS : attrFunction : name.local ? attrConstantNS : attrConstant;
  }
  function d3_collapse(s) {
    return s.trim().replace(/\s+/g, " ");
  }
  d3_selectionPrototype.classed = function(name, value) {
    if (arguments.length < 2) {
      if (typeof name === "string") {
        var node = this.node(), n = (name = d3_selection_classes(name)).length, i = -1;
        if (value = node.classList) {
          while (++i < n) if (!value.contains(name[i])) return false;
        } else {
          value = node.getAttribute("class");
          while (++i < n) if (!d3_selection_classedRe(name[i]).test(value)) return false;
        }
        return true;
      }
      for (value in name) this.each(d3_selection_classed(value, name[value]));
      return this;
    }
    return this.each(d3_selection_classed(name, value));
  };
  function d3_selection_classedRe(name) {
    return new RegExp("(?:^|\\s+)" + d3.requote(name) + "(?:\\s+|$)", "g");
  }
  function d3_selection_classes(name) {
    return (name + "").trim().split(/^|\s+/);
  }
  function d3_selection_classed(name, value) {
    name = d3_selection_classes(name).map(d3_selection_classedName);
    var n = name.length;
    function classedConstant() {
      var i = -1;
      while (++i < n) name[i](this, value);
    }
    function classedFunction() {
      var i = -1, x = value.apply(this, arguments);
      while (++i < n) name[i](this, x);
    }
    return typeof value === "function" ? classedFunction : classedConstant;
  }
  function d3_selection_classedName(name) {
    var re = d3_selection_classedRe(name);
    return function(node, value) {
      if (c = node.classList) return value ? c.add(name) : c.remove(name);
      var c = node.getAttribute("class") || "";
      if (value) {
        re.lastIndex = 0;
        if (!re.test(c)) node.setAttribute("class", d3_collapse(c + " " + name));
      } else {
        node.setAttribute("class", d3_collapse(c.replace(re, " ")));
      }
    };
  }
  d3_selectionPrototype.style = function(name, value, priority) {
    var n = arguments.length;
    if (n < 3) {
      if (typeof name !== "string") {
        if (n < 2) value = "";
        for (priority in name) this.each(d3_selection_style(priority, name[priority], value));
        return this;
      }
      if (n < 2) {
        var node = this.node();
        return d3_window(node).getComputedStyle(node, null).getPropertyValue(name);
      }
      priority = "";
    }
    return this.each(d3_selection_style(name, value, priority));
  };
  function d3_selection_style(name, value, priority) {
    function styleNull() {
      this.style.removeProperty(name);
    }
    function styleConstant() {
      this.style.setProperty(name, value, priority);
    }
    function styleFunction() {
      var x = value.apply(this, arguments);
      if (x == null) this.style.removeProperty(name); else this.style.setProperty(name, x, priority);
    }
    return value == null ? styleNull : typeof value === "function" ? styleFunction : styleConstant;
  }
  d3_selectionPrototype.property = function(name, value) {
    if (arguments.length < 2) {
      if (typeof name === "string") return this.node()[name];
      for (value in name) this.each(d3_selection_property(value, name[value]));
      return this;
    }
    return this.each(d3_selection_property(name, value));
  };
  function d3_selection_property(name, value) {
    function propertyNull() {
      delete this[name];
    }
    function propertyConstant() {
      this[name] = value;
    }
    function propertyFunction() {
      var x = value.apply(this, arguments);
      if (x == null) delete this[name]; else this[name] = x;
    }
    return value == null ? propertyNull : typeof value === "function" ? propertyFunction : propertyConstant;
  }
  d3_selectionPrototype.text = function(value) {
    return arguments.length ? this.each(typeof value === "function" ? function() {
      var v = value.apply(this, arguments);
      this.textContent = v == null ? "" : v;
    } : value == null ? function() {
      this.textContent = "";
    } : function() {
      this.textContent = value;
    }) : this.node().textContent;
  };
  d3_selectionPrototype.html = function(value) {
    return arguments.length ? this.each(typeof value === "function" ? function() {
      var v = value.apply(this, arguments);
      this.innerHTML = v == null ? "" : v;
    } : value == null ? function() {
      this.innerHTML = "";
    } : function() {
      this.innerHTML = value;
    }) : this.node().innerHTML;
  };
  d3_selectionPrototype.append = function(name) {
    name = d3_selection_creator(name);
    return this.select(function() {
      return this.appendChild(name.apply(this, arguments));
    });
  };
  function d3_selection_creator(name) {
    function create() {
      var document = this.ownerDocument, namespace = this.namespaceURI;
      return namespace === d3_nsXhtml && document.documentElement.namespaceURI === d3_nsXhtml ? document.createElement(name) : document.createElementNS(namespace, name);
    }
    function createNS() {
      return this.ownerDocument.createElementNS(name.space, name.local);
    }
    return typeof name === "function" ? name : (name = d3.ns.qualify(name)).local ? createNS : create;
  }
  d3_selectionPrototype.insert = function(name, before) {
    name = d3_selection_creator(name);
    before = d3_selection_selector(before);
    return this.select(function() {
      return this.insertBefore(name.apply(this, arguments), before.apply(this, arguments) || null);
    });
  };
  d3_selectionPrototype.remove = function() {
    return this.each(d3_selectionRemove);
  };
  function d3_selectionRemove() {
    var parent = this.parentNode;
    if (parent) parent.removeChild(this);
  }
  d3_selectionPrototype.data = function(value, key) {
    var i = -1, n = this.length, group, node;
    if (!arguments.length) {
      value = new Array(n = (group = this[0]).length);
      while (++i < n) {
        if (node = group[i]) {
          value[i] = node.__data__;
        }
      }
      return value;
    }
    function bind(group, groupData) {
      var i, n = group.length, m = groupData.length, n0 = Math.min(n, m), updateNodes = new Array(m), enterNodes = new Array(m), exitNodes = new Array(n), node, nodeData;
      if (key) {
        var nodeByKeyValue = new d3_Map(), keyValues = new Array(n), keyValue;
        for (i = -1; ++i < n; ) {
          if (node = group[i]) {
            if (nodeByKeyValue.has(keyValue = key.call(node, node.__data__, i))) {
              exitNodes[i] = node;
            } else {
              nodeByKeyValue.set(keyValue, node);
            }
            keyValues[i] = keyValue;
          }
        }
        for (i = -1; ++i < m; ) {
          if (!(node = nodeByKeyValue.get(keyValue = key.call(groupData, nodeData = groupData[i], i)))) {
            enterNodes[i] = d3_selection_dataNode(nodeData);
          } else if (node !== true) {
            updateNodes[i] = node;
            node.__data__ = nodeData;
          }
          nodeByKeyValue.set(keyValue, true);
        }
        for (i = -1; ++i < n; ) {
          if (i in keyValues && nodeByKeyValue.get(keyValues[i]) !== true) {
            exitNodes[i] = group[i];
          }
        }
      } else {
        for (i = -1; ++i < n0; ) {
          node = group[i];
          nodeData = groupData[i];
          if (node) {
            node.__data__ = nodeData;
            updateNodes[i] = node;
          } else {
            enterNodes[i] = d3_selection_dataNode(nodeData);
          }
        }
        for (;i < m; ++i) {
          enterNodes[i] = d3_selection_dataNode(groupData[i]);
        }
        for (;i < n; ++i) {
          exitNodes[i] = group[i];
        }
      }
      enterNodes.update = updateNodes;
      enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode;
      enter.push(enterNodes);
      update.push(updateNodes);
      exit.push(exitNodes);
    }
    var enter = d3_selection_enter([]), update = d3_selection([]), exit = d3_selection([]);
    if (typeof value === "function") {
      while (++i < n) {
        bind(group = this[i], value.call(group, group.parentNode.__data__, i));
      }
    } else {
      while (++i < n) {
        bind(group = this[i], value);
      }
    }
    update.enter = function() {
      return enter;
    };
    update.exit = function() {
      return exit;
    };
    return update;
  };
  function d3_selection_dataNode(data) {
    return {
      __data__: data
    };
  }
  d3_selectionPrototype.datum = function(value) {
    return arguments.length ? this.property("__data__", value) : this.property("__data__");
  };
  d3_selectionPrototype.filter = function(filter) {
    var subgroups = [], subgroup, group, node;
    if (typeof filter !== "function") filter = d3_selection_filter(filter);
    for (var j = 0, m = this.length; j < m; j++) {
      subgroups.push(subgroup = []);
      subgroup.parentNode = (group = this[j]).parentNode;
      for (var i = 0, n = group.length; i < n; i++) {
        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {
          subgroup.push(node);
        }
      }
    }
    return d3_selection(subgroups);
  };
  function d3_selection_filter(selector) {
    return function() {
      return d3_selectMatches(this, selector);
    };
  }
  d3_selectionPrototype.order = function() {
    for (var j = -1, m = this.length; ++j < m; ) {
      for (var group = this[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {
        if (node = group[i]) {
          if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);
          next = node;
        }
      }
    }
    return this;
  };
  d3_selectionPrototype.sort = function(comparator) {
    comparator = d3_selection_sortComparator.apply(this, arguments);
    for (var j = -1, m = this.length; ++j < m; ) this[j].sort(comparator);
    return this.order();
  };
  function d3_selection_sortComparator(comparator) {
    if (!arguments.length) comparator = d3_ascending;
    return function(a, b) {
      return a && b ? comparator(a.__data__, b.__data__) : !a - !b;
    };
  }
  d3_selectionPrototype.each = function(callback) {
    return d3_selection_each(this, function(node, i, j) {
      callback.call(node, node.__data__, i, j);
    });
  };
  function d3_selection_each(groups, callback) {
    for (var j = 0, m = groups.length; j < m; j++) {
      for (var group = groups[j], i = 0, n = group.length, node; i < n; i++) {
        if (node = group[i]) callback(node, i, j);
      }
    }
    return groups;
  }
  d3_selectionPrototype.call = function(callback) {
    var args = d3_array(arguments);
    callback.apply(args[0] = this, args);
    return this;
  };
  d3_selectionPrototype.empty = function() {
    return !this.node();
  };
  d3_selectionPrototype.node = function() {
    for (var j = 0, m = this.length; j < m; j++) {
      for (var group = this[j], i = 0, n = group.length; i < n; i++) {
        var node = group[i];
        if (node) return node;
      }
    }
    return null;
  };
  d3_selectionPrototype.size = function() {
    var n = 0;
    d3_selection_each(this, function() {
      ++n;
    });
    return n;
  };
  function d3_selection_enter(selection) {
    d3_subclass(selection, d3_selection_enterPrototype);
    return selection;
  }
  var d3_selection_enterPrototype = [];
  d3.selection.enter = d3_selection_enter;
  d3.selection.enter.prototype = d3_selection_enterPrototype;
  d3_selection_enterPrototype.append = d3_selectionPrototype.append;
  d3_selection_enterPrototype.empty = d3_selectionPrototype.empty;
  d3_selection_enterPrototype.node = d3_selectionPrototype.node;
  d3_selection_enterPrototype.call = d3_selectionPrototype.call;
  d3_selection_enterPrototype.size = d3_selectionPrototype.size;
  d3_selection_enterPrototype.select = function(selector) {
    var subgroups = [], subgroup, subnode, upgroup, group, node;
    for (var j = -1, m = this.length; ++j < m; ) {
      upgroup = (group = this[j]).update;
      subgroups.push(subgroup = []);
      subgroup.parentNode = group.parentNode;
      for (var i = -1, n = group.length; ++i < n; ) {
        if (node = group[i]) {
          subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i, j));
          subnode.__data__ = node.__data__;
        } else {
          subgroup.push(null);
        }
      }
    }
    return d3_selection(subgroups);
  };
  d3_selection_enterPrototype.insert = function(name, before) {
    if (arguments.length < 2) before = d3_selection_enterInsertBefore(this);
    return d3_selectionPrototype.insert.call(this, name, before);
  };
  function d3_selection_enterInsertBefore(enter) {
    var i0, j0;
    return function(d, i, j) {
      var group = enter[j].update, n = group.length, node;
      if (j != j0) j0 = j, i0 = 0;
      if (i >= i0) i0 = i + 1;
      while (!(node = group[i0]) && ++i0 < n) ;
      return node;
    };
  }
  d3.select = function(node) {
    var group;
    if (typeof node === "string") {
      group = [ d3_select(node, d3_document) ];
      group.parentNode = d3_document.documentElement;
    } else {
      group = [ node ];
      group.parentNode = d3_documentElement(node);
    }
    return d3_selection([ group ]);
  };
  d3.selectAll = function(nodes) {
    var group;
    if (typeof nodes === "string") {
      group = d3_array(d3_selectAll(nodes, d3_document));
      group.parentNode = d3_document.documentElement;
    } else {
      group = d3_array(nodes);
      group.parentNode = null;
    }
    return d3_selection([ group ]);
  };
  d3_selectionPrototype.on = function(type, listener, capture) {
    var n = arguments.length;
    if (n < 3) {
      if (typeof type !== "string") {
        if (n < 2) listener = false;
        for (capture in type) this.each(d3_selection_on(capture, type[capture], listener));
        return this;
      }
      if (n < 2) return (n = this.node()["__on" + type]) && n._;
      capture = false;
    }
    return this.each(d3_selection_on(type, listener, capture));
  };
  function d3_selection_on(type, listener, capture) {
    var name = "__on" + type, i = type.indexOf("."), wrap = d3_selection_onListener;
    if (i > 0) type = type.slice(0, i);
    var filter = d3_selection_onFilters.get(type);
    if (filter) type = filter, wrap = d3_selection_onFilter;
    function onRemove() {
      var l = this[name];
      if (l) {
        this.removeEventListener(type, l, l.$);
        delete this[name];
      }
    }
    function onAdd() {
      var l = wrap(listener, d3_array(arguments));
      onRemove.call(this);
      this.addEventListener(type, this[name] = l, l.$ = capture);
      l._ = listener;
    }
    function removeAll() {
      var re = new RegExp("^__on([^.]+)" + d3.requote(type) + "$"), match;
      for (var name in this) {
        if (match = name.match(re)) {
          var l = this[name];
          this.removeEventListener(match[1], l, l.$);
          delete this[name];
        }
      }
    }
    return i ? listener ? onAdd : onRemove : listener ? d3_noop : removeAll;
  }
  var d3_selection_onFilters = d3.map({
    mouseenter: "mouseover",
    mouseleave: "mouseout"
  });
  if (d3_document) {
    d3_selection_onFilters.forEach(function(k) {
      if ("on" + k in d3_document) d3_selection_onFilters.remove(k);
    });
  }
  function d3_selection_onListener(listener, argumentz) {
    return function(e) {
      var o = d3.event;
      d3.event = e;
      argumentz[0] = this.__data__;
      try {
        listener.apply(this, argumentz);
      } finally {
        d3.event = o;
      }
    };
  }
  function d3_selection_onFilter(listener, argumentz) {
    var l = d3_selection_onListener(listener, argumentz);
    return function(e) {
      var target = this, related = e.relatedTarget;
      if (!related || related !== target && !(related.compareDocumentPosition(target) & 8)) {
        l.call(target, e);
      }
    };
  }
  var d3_event_dragSelect, d3_event_dragId = 0;
  function d3_event_dragSuppress(node) {
    var name = ".dragsuppress-" + ++d3_event_dragId, click = "click" + name, w = d3.select(d3_window(node)).on("touchmove" + name, d3_eventPreventDefault).on("dragstart" + name, d3_eventPreventDefault).on("selectstart" + name, d3_eventPreventDefault);
    if (d3_event_dragSelect == null) {
      d3_event_dragSelect = "onselectstart" in node ? false : d3_vendorSymbol(node.style, "userSelect");
    }
    if (d3_event_dragSelect) {
      var style = d3_documentElement(node).style, select = style[d3_event_dragSelect];
      style[d3_event_dragSelect] = "none";
    }
    return function(suppressClick) {
      w.on(name, null);
      if (d3_event_dragSelect) style[d3_event_dragSelect] = select;
      if (suppressClick) {
        var off = function() {
          w.on(click, null);
        };
        w.on(click, function() {
          d3_eventPreventDefault();
          off();
        }, true);
        setTimeout(off, 0);
      }
    };
  }
  d3.mouse = function(container) {
    return d3_mousePoint(container, d3_eventSource());
  };
  var d3_mouse_bug44083 = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
  function d3_mousePoint(container, e) {
    if (e.changedTouches) e = e.changedTouches[0];
    var svg = container.ownerSVGElement || container;
    if (svg.createSVGPoint) {
      var point = svg.createSVGPoint();
      if (d3_mouse_bug44083 < 0) {
        var window = d3_window(container);
        if (window.scrollX || window.scrollY) {
          svg = d3.select("body").append("svg").style({
            position: "absolute",
            top: 0,
            left: 0,
            margin: 0,
            padding: 0,
            border: "none"
          }, "important");
          var ctm = svg[0][0].getScreenCTM();
          d3_mouse_bug44083 = !(ctm.f || ctm.e);
          svg.remove();
        }
      }
      if (d3_mouse_bug44083) point.x = e.pageX, point.y = e.pageY; else point.x = e.clientX, 
      point.y = e.clientY;
      point = point.matrixTransform(container.getScreenCTM().inverse());
      return [ point.x, point.y ];
    }
    var rect = container.getBoundingClientRect();
    return [ e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop ];
  }
  d3.touch = function(container, touches, identifier) {
    if (arguments.length < 3) identifier = touches, touches = d3_eventSource().changedTouches;
    if (touches) for (var i = 0, n = touches.length, touch; i < n; ++i) {
      if ((touch = touches[i]).identifier === identifier) {
        return d3_mousePoint(container, touch);
      }
    }
  };
  d3.behavior.drag = function() {
    var event = d3_eventDispatch(drag, "drag", "dragstart", "dragend"), origin = null, mousedown = dragstart(d3_noop, d3.mouse, d3_window, "mousemove", "mouseup"), touchstart = dragstart(d3_behavior_dragTouchId, d3.touch, d3_identity, "touchmove", "touchend");
    function drag() {
      this.on("mousedown.drag", mousedown).on("touchstart.drag", touchstart);
    }
    function dragstart(id, position, subject, move, end) {
      return function() {
        var that = this, target = d3.event.target.correspondingElement || d3.event.target, parent = that.parentNode, dispatch = event.of(that, arguments), dragged = 0, dragId = id(), dragName = ".drag" + (dragId == null ? "" : "-" + dragId), dragOffset, dragSubject = d3.select(subject(target)).on(move + dragName, moved).on(end + dragName, ended), dragRestore = d3_event_dragSuppress(target), position0 = position(parent, dragId);
        if (origin) {
          dragOffset = origin.apply(that, arguments);
          dragOffset = [ dragOffset.x - position0[0], dragOffset.y - position0[1] ];
        } else {
          dragOffset = [ 0, 0 ];
        }
        dispatch({
          type: "dragstart"
        });
        function moved() {
          var position1 = position(parent, dragId), dx, dy;
          if (!position1) return;
          dx = position1[0] - position0[0];
          dy = position1[1] - position0[1];
          dragged |= dx | dy;
          position0 = position1;
          dispatch({
            type: "drag",
            x: position1[0] + dragOffset[0],
            y: position1[1] + dragOffset[1],
            dx: dx,
            dy: dy
          });
        }
        function ended() {
          if (!position(parent, dragId)) return;
          dragSubject.on(move + dragName, null).on(end + dragName, null);
          dragRestore(dragged);
          dispatch({
            type: "dragend"
          });
        }
      };
    }
    drag.origin = function(x) {
      if (!arguments.length) return origin;
      origin = x;
      return drag;
    };
    return d3.rebind(drag, event, "on");
  };
  function d3_behavior_dragTouchId() {
    return d3.event.changedTouches[0].identifier;
  }
  d3.touches = function(container, touches) {
    if (arguments.length < 2) touches = d3_eventSource().touches;
    return touches ? d3_array(touches).map(function(touch) {
      var point = d3_mousePoint(container, touch);
      point.identifier = touch.identifier;
      return point;
    }) : [];
  };
  var  = 1e-6, 2 =  * ,  = Math.PI,  = 2 * ,  =  - , half =  / 2, d3_radians =  / 180, d3_degrees = 180 / ;
  function d3_sgn(x) {
    return x > 0 ? 1 : x < 0 ? -1 : 0;
  }
  function d3_cross2d(a, b, c) {
    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);
  }
  function d3_acos(x) {
    return x > 1 ? 0 : x < -1 ?  : Math.acos(x);
  }
  function d3_asin(x) {
    return x > 1 ? half : x < -1 ? -half : Math.asin(x);
  }
  function d3_sinh(x) {
    return ((x = Math.exp(x)) - 1 / x) / 2;
  }
  function d3_cosh(x) {
    return ((x = Math.exp(x)) + 1 / x) / 2;
  }
  function d3_tanh(x) {
    return ((x = Math.exp(2 * x)) - 1) / (x + 1);
  }
  function d3_haversin(x) {
    return (x = Math.sin(x / 2)) * x;
  }
  var  = Math.SQRT2, 2 = 2, 4 = 4;
  d3.interpolateZoom = function(p0, p1) {
    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2], dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, i, S;
    if (d2 < 2) {
      S = Math.log(w1 / w0) / ;
      i = function(t) {
        return [ ux0 + t * dx, uy0 + t * dy, w0 * Math.exp( * t * S) ];
      };
    } else {
      var d1 = Math.sqrt(d2), b0 = (w1 * w1 - w0 * w0 + 4 * d2) / (2 * w0 * 2 * d1), b1 = (w1 * w1 - w0 * w0 - 4 * d2) / (2 * w1 * 2 * d1), r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0), r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
      S = (r1 - r0) / ;
      i = function(t) {
        var s = t * S, coshr0 = d3_cosh(r0), u = w0 / (2 * d1) * (coshr0 * d3_tanh( * s + r0) - d3_sinh(r0));
        return [ ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh( * s + r0) ];
      };
    }
    i.duration = S * 1e3;
    return i;
  };
  d3.behavior.zoom = function() {
    var view = {
      x: 0,
      y: 0,
      k: 1
    }, translate0, center0, center, size = [ 960, 500 ], scaleExtent = d3_behavior_zoomInfinity, duration = 250, zooming = 0, mousedown = "mousedown.zoom", mousemove = "mousemove.zoom", mouseup = "mouseup.zoom", mousewheelTimer, touchstart = "touchstart.zoom", touchtime, event = d3_eventDispatch(zoom, "zoomstart", "zoom", "zoomend"), x0, x1, y0, y1;
    if (!d3_behavior_zoomWheel) {
      d3_behavior_zoomWheel = "onwheel" in d3_document ? (d3_behavior_zoomDelta = function() {
        return -d3.event.deltaY * (d3.event.deltaMode ? 120 : 1);
      }, "wheel") : "onmousewheel" in d3_document ? (d3_behavior_zoomDelta = function() {
        return d3.event.wheelDelta;
      }, "mousewheel") : (d3_behavior_zoomDelta = function() {
        return -d3.event.detail;
      }, "MozMousePixelScroll");
    }
    function zoom(g) {
      g.on(mousedown, mousedowned).on(d3_behavior_zoomWheel + ".zoom", mousewheeled).on("dblclick.zoom", dblclicked).on(touchstart, touchstarted);
    }
    zoom.event = function(g) {
      g.each(function() {
        var dispatch = event.of(this, arguments), view1 = view;
        if (d3_transitionInheritId) {
          d3.select(this).transition().each("start.zoom", function() {
            view = this.__chart__ || {
              x: 0,
              y: 0,
              k: 1
            };
            zoomstarted(dispatch);
          }).tween("zoom:zoom", function() {
            var dx = size[0], dy = size[1], cx = center0 ? center0[0] : dx / 2, cy = center0 ? center0[1] : dy / 2, i = d3.interpolateZoom([ (cx - view.x) / view.k, (cy - view.y) / view.k, dx / view.k ], [ (cx - view1.x) / view1.k, (cy - view1.y) / view1.k, dx / view1.k ]);
            return function(t) {
              var l = i(t), k = dx / l[2];
              this.__chart__ = view = {
                x: cx - l[0] * k,
                y: cy - l[1] * k,
                k: k
              };
              zoomed(dispatch);
            };
          }).each("interrupt.zoom", function() {
            zoomended(dispatch);
          }).each("end.zoom", function() {
            zoomended(dispatch);
          });
        } else {
          this.__chart__ = view;
          zoomstarted(dispatch);
          zoomed(dispatch);
          zoomended(dispatch);
        }
      });
    };
    zoom.translate = function(_) {
      if (!arguments.length) return [ view.x, view.y ];
      view = {
        x: +_[0],
        y: +_[1],
        k: view.k
      };
      rescale();
      return zoom;
    };
    zoom.scale = function(_) {
      if (!arguments.length) return view.k;
      view = {
        x: view.x,
        y: view.y,
        k: null
      };
      scaleTo(+_);
      rescale();
      return zoom;
    };
    zoom.scaleExtent = function(_) {
      if (!arguments.length) return scaleExtent;
      scaleExtent = _ == null ? d3_behavior_zoomInfinity : [ +_[0], +_[1] ];
      return zoom;
    };
    zoom.center = function(_) {
      if (!arguments.length) return center;
      center = _ && [ +_[0], +_[1] ];
      return zoom;
    };
    zoom.size = function(_) {
      if (!arguments.length) return size;
      size = _ && [ +_[0], +_[1] ];
      return zoom;
    };
    zoom.duration = function(_) {
      if (!arguments.length) return duration;
      duration = +_;
      return zoom;
    };
    zoom.x = function(z) {
      if (!arguments.length) return x1;
      x1 = z;
      x0 = z.copy();
      view = {
        x: 0,
        y: 0,
        k: 1
      };
      return zoom;
    };
    zoom.y = function(z) {
      if (!arguments.length) return y1;
      y1 = z;
      y0 = z.copy();
      view = {
        x: 0,
        y: 0,
        k: 1
      };
      return zoom;
    };
    function location(p) {
      return [ (p[0] - view.x) / view.k, (p[1] - view.y) / view.k ];
    }
    function point(l) {
      return [ l[0] * view.k + view.x, l[1] * view.k + view.y ];
    }
    function scaleTo(s) {
      view.k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], s));
    }
    function translateTo(p, l) {
      l = point(l);
      view.x += p[0] - l[0];
      view.y += p[1] - l[1];
    }
    function zoomTo(that, p, l, k) {
      that.__chart__ = {
        x: view.x,
        y: view.y,
        k: view.k
      };
      scaleTo(Math.pow(2, k));
      translateTo(center0 = p, l);
      that = d3.select(that);
      if (duration > 0) that = that.transition().duration(duration);
      that.call(zoom.event);
    }
    function rescale() {
      if (x1) x1.domain(x0.range().map(function(x) {
        return (x - view.x) / view.k;
      }).map(x0.invert));
      if (y1) y1.domain(y0.range().map(function(y) {
        return (y - view.y) / view.k;
      }).map(y0.invert));
    }
    function zoomstarted(dispatch) {
      if (!zooming++) dispatch({
        type: "zoomstart"
      });
    }
    function zoomed(dispatch) {
      rescale();
      dispatch({
        type: "zoom",
        scale: view.k,
        translate: [ view.x, view.y ]
      });
    }
    function zoomended(dispatch) {
      if (!--zooming) dispatch({
        type: "zoomend"
      }), center0 = null;
    }
    function mousedowned() {
      var that = this, dispatch = event.of(that, arguments), dragged = 0, subject = d3.select(d3_window(that)).on(mousemove, moved).on(mouseup, ended), location0 = location(d3.mouse(that)), dragRestore = d3_event_dragSuppress(that);
      d3_selection_interrupt.call(that);
      zoomstarted(dispatch);
      function moved() {
        dragged = 1;
        translateTo(d3.mouse(that), location0);
        zoomed(dispatch);
      }
      function ended() {
        subject.on(mousemove, null).on(mouseup, null);
        dragRestore(dragged);
        zoomended(dispatch);
      }
    }
    function touchstarted() {
      var that = this, dispatch = event.of(that, arguments), locations0 = {}, distance0 = 0, scale0, zoomName = ".zoom-" + d3.event.changedTouches[0].identifier, touchmove = "touchmove" + zoomName, touchend = "touchend" + zoomName, targets = [], subject = d3.select(that), dragRestore = d3_event_dragSuppress(that);
      started();
      zoomstarted(dispatch);
      subject.on(mousedown, null).on(touchstart, started);
      function relocate() {
        var touches = d3.touches(that);
        scale0 = view.k;
        touches.forEach(function(t) {
          if (t.identifier in locations0) locations0[t.identifier] = location(t);
        });
        return touches;
      }
      function started() {
        var target = d3.event.target;
        d3.select(target).on(touchmove, moved).on(touchend, ended);
        targets.push(target);
        var changed = d3.event.changedTouches;
        for (var i = 0, n = changed.length; i < n; ++i) {
          locations0[changed[i].identifier] = null;
        }
        var touches = relocate(), now = Date.now();
        if (touches.length === 1) {
          if (now - touchtime < 500) {
            var p = touches[0];
            zoomTo(that, p, locations0[p.identifier], Math.floor(Math.log(view.k) / Math.LN2) + 1);
            d3_eventPreventDefault();
          }
          touchtime = now;
        } else if (touches.length > 1) {
          var p = touches[0], q = touches[1], dx = p[0] - q[0], dy = p[1] - q[1];
          distance0 = dx * dx + dy * dy;
        }
      }
      function moved() {
        var touches = d3.touches(that), p0, l0, p1, l1;
        d3_selection_interrupt.call(that);
        for (var i = 0, n = touches.length; i < n; ++i, l1 = null) {
          p1 = touches[i];
          if (l1 = locations0[p1.identifier]) {
            if (l0) break;
            p0 = p1, l0 = l1;
          }
        }
        if (l1) {
          var distance1 = (distance1 = p1[0] - p0[0]) * distance1 + (distance1 = p1[1] - p0[1]) * distance1, scale1 = distance0 && Math.sqrt(distance1 / distance0);
          p0 = [ (p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2 ];
          l0 = [ (l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2 ];
          scaleTo(scale1 * scale0);
        }
        touchtime = null;
        translateTo(p0, l0);
        zoomed(dispatch);
      }
      function ended() {
        if (d3.event.touches.length) {
          var changed = d3.event.changedTouches;
          for (var i = 0, n = changed.length; i < n; ++i) {
            delete locations0[changed[i].identifier];
          }
          for (var identifier in locations0) {
            return void relocate();
          }
        }
        d3.selectAll(targets).on(zoomName, null);
        subject.on(mousedown, mousedowned).on(touchstart, touchstarted);
        dragRestore();
        zoomended(dispatch);
      }
    }
    function mousewheeled() {
      var dispatch = event.of(this, arguments);
      if (mousewheelTimer) clearTimeout(mousewheelTimer); else d3_selection_interrupt.call(this), 
      translate0 = location(center0 = center || d3.mouse(this)), zoomstarted(dispatch);
      mousewheelTimer = setTimeout(function() {
        mousewheelTimer = null;
        zoomended(dispatch);
      }, 50);
      d3_eventPreventDefault();
      scaleTo(Math.pow(2, d3_behavior_zoomDelta() * .002) * view.k);
      translateTo(center0, translate0);
      zoomed(dispatch);
    }
    function dblclicked() {
      var p = d3.mouse(this), k = Math.log(view.k) / Math.LN2;
      zoomTo(this, p, location(p), d3.event.shiftKey ? Math.ceil(k) - 1 : Math.floor(k) + 1);
    }
    return d3.rebind(zoom, event, "on");
  };
  var d3_behavior_zoomInfinity = [ 0, Infinity ], d3_behavior_zoomDelta, d3_behavior_zoomWheel;
  d3.color = d3_color;
  function d3_color() {}
  d3_color.prototype.toString = function() {
    return this.rgb() + "";
  };
  d3.hsl = d3_hsl;
  function d3_hsl(h, s, l) {
    return this instanceof d3_hsl ? void (this.h = +h, this.s = +s, this.l = +l) : arguments.length < 2 ? h instanceof d3_hsl ? new d3_hsl(h.h, h.s, h.l) : d3_rgb_parse("" + h, d3_rgb_hsl, d3_hsl) : new d3_hsl(h, s, l);
  }
  var d3_hslPrototype = d3_hsl.prototype = new d3_color();
  d3_hslPrototype.brighter = function(k) {
    k = Math.pow(.7, arguments.length ? k : 1);
    return new d3_hsl(this.h, this.s, this.l / k);
  };
  d3_hslPrototype.darker = function(k) {
    k = Math.pow(.7, arguments.length ? k : 1);
    return new d3_hsl(this.h, this.s, k * this.l);
  };
  d3_hslPrototype.rgb = function() {
    return d3_hsl_rgb(this.h, this.s, this.l);
  };
  function d3_hsl_rgb(h, s, l) {
    var m1, m2;
    h = isNaN(h) ? 0 : (h %= 360) < 0 ? h + 360 : h;
    s = isNaN(s) ? 0 : s < 0 ? 0 : s > 1 ? 1 : s;
    l = l < 0 ? 0 : l > 1 ? 1 : l;
    m2 = l <= .5 ? l * (1 + s) : l + s - l * s;
    m1 = 2 * l - m2;
    function v(h) {
      if (h > 360) h -= 360; else if (h < 0) h += 360;
      if (h < 60) return m1 + (m2 - m1) * h / 60;
      if (h < 180) return m2;
      if (h < 240) return m1 + (m2 - m1) * (240 - h) / 60;
      return m1;
    }
    function vv(h) {
      return Math.round(v(h) * 255);
    }
    return new d3_rgb(vv(h + 120), vv(h), vv(h - 120));
  }
  d3.hcl = d3_hcl;
  function d3_hcl(h, c, l) {
    return this instanceof d3_hcl ? void (this.h = +h, this.c = +c, this.l = +l) : arguments.length < 2 ? h instanceof d3_hcl ? new d3_hcl(h.h, h.c, h.l) : h instanceof d3_lab ? d3_lab_hcl(h.l, h.a, h.b) : d3_lab_hcl((h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : new d3_hcl(h, c, l);
  }
  var d3_hclPrototype = d3_hcl.prototype = new d3_color();
  d3_hclPrototype.brighter = function(k) {
    return new d3_hcl(this.h, this.c, Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)));
  };
  d3_hclPrototype.darker = function(k) {
    return new d3_hcl(this.h, this.c, Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)));
  };
  d3_hclPrototype.rgb = function() {
    return d3_hcl_lab(this.h, this.c, this.l).rgb();
  };
  function d3_hcl_lab(h, c, l) {
    if (isNaN(h)) h = 0;
    if (isNaN(c)) c = 0;
    return new d3_lab(l, Math.cos(h *= d3_radians) * c, Math.sin(h) * c);
  }
  d3.lab = d3_lab;
  function d3_lab(l, a, b) {
    return this instanceof d3_lab ? void (this.l = +l, this.a = +a, this.b = +b) : arguments.length < 2 ? l instanceof d3_lab ? new d3_lab(l.l, l.a, l.b) : l instanceof d3_hcl ? d3_hcl_lab(l.h, l.c, l.l) : d3_rgb_lab((l = d3_rgb(l)).r, l.g, l.b) : new d3_lab(l, a, b);
  }
  var d3_lab_K = 18;
  var d3_lab_X = .95047, d3_lab_Y = 1, d3_lab_Z = 1.08883;
  var d3_labPrototype = d3_lab.prototype = new d3_color();
  d3_labPrototype.brighter = function(k) {
    return new d3_lab(Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);
  };
  d3_labPrototype.darker = function(k) {
    return new d3_lab(Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);
  };
  d3_labPrototype.rgb = function() {
    return d3_lab_rgb(this.l, this.a, this.b);
  };
  function d3_lab_rgb(l, a, b) {
    var y = (l + 16) / 116, x = y + a / 500, z = y - b / 200;
    x = d3_lab_xyz(x) * d3_lab_X;
    y = d3_lab_xyz(y) * d3_lab_Y;
    z = d3_lab_xyz(z) * d3_lab_Z;
    return new d3_rgb(d3_xyz_rgb(3.2404542 * x - 1.5371385 * y - .4985314 * z), d3_xyz_rgb(-.969266 * x + 1.8760108 * y + .041556 * z), d3_xyz_rgb(.0556434 * x - .2040259 * y + 1.0572252 * z));
  }
  function d3_lab_hcl(l, a, b) {
    return l > 0 ? new d3_hcl(Math.atan2(b, a) * d3_degrees, Math.sqrt(a * a + b * b), l) : new d3_hcl(NaN, NaN, l);
  }
  function d3_lab_xyz(x) {
    return x > .206893034 ? x * x * x : (x - 4 / 29) / 7.787037;
  }
  function d3_xyz_lab(x) {
    return x > .008856 ? Math.pow(x, 1 / 3) : 7.787037 * x + 4 / 29;
  }
  function d3_xyz_rgb(r) {
    return Math.round(255 * (r <= .00304 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055));
  }
  d3.rgb = d3_rgb;
  function d3_rgb(r, g, b) {
    return this instanceof d3_rgb ? void (this.r = ~~r, this.g = ~~g, this.b = ~~b) : arguments.length < 2 ? r instanceof d3_rgb ? new d3_rgb(r.r, r.g, r.b) : d3_rgb_parse("" + r, d3_rgb, d3_hsl_rgb) : new d3_rgb(r, g, b);
  }
  function d3_rgbNumber(value) {
    return new d3_rgb(value >> 16, value >> 8 & 255, value & 255);
  }
  function d3_rgbString(value) {
    return d3_rgbNumber(value) + "";
  }
  var d3_rgbPrototype = d3_rgb.prototype = new d3_color();
  d3_rgbPrototype.brighter = function(k) {
    k = Math.pow(.7, arguments.length ? k : 1);
    var r = this.r, g = this.g, b = this.b, i = 30;
    if (!r && !g && !b) return new d3_rgb(i, i, i);
    if (r && r < i) r = i;
    if (g && g < i) g = i;
    if (b && b < i) b = i;
    return new d3_rgb(Math.min(255, r / k), Math.min(255, g / k), Math.min(255, b / k));
  };
  d3_rgbPrototype.darker = function(k) {
    k = Math.pow(.7, arguments.length ? k : 1);
    return new d3_rgb(k * this.r, k * this.g, k * this.b);
  };
  d3_rgbPrototype.hsl = function() {
    return d3_rgb_hsl(this.r, this.g, this.b);
  };
  d3_rgbPrototype.toString = function() {
    return "#" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b);
  };
  function d3_rgb_hex(v) {
    return v < 16 ? "0" + Math.max(0, v).toString(16) : Math.min(255, v).toString(16);
  }
  function d3_rgb_parse(format, rgb, hsl) {
    var r = 0, g = 0, b = 0, m1, m2, color;
    m1 = /([a-z]+)\((.*)\)/.exec(format = format.toLowerCase());
    if (m1) {
      m2 = m1[2].split(",");
      switch (m1[1]) {
       case "hsl":
        {
          return hsl(parseFloat(m2[0]), parseFloat(m2[1]) / 100, parseFloat(m2[2]) / 100);
        }

       case "rgb":
        {
          return rgb(d3_rgb_parseNumber(m2[0]), d3_rgb_parseNumber(m2[1]), d3_rgb_parseNumber(m2[2]));
        }
      }
    }
    if (color = d3_rgb_names.get(format)) {
      return rgb(color.r, color.g, color.b);
    }
    if (format != null && format.charAt(0) === "#" && !isNaN(color = parseInt(format.slice(1), 16))) {
      if (format.length === 4) {
        r = (color & 3840) >> 4;
        r = r >> 4 | r;
        g = color & 240;
        g = g >> 4 | g;
        b = color & 15;
        b = b << 4 | b;
      } else if (format.length === 7) {
        r = (color & 16711680) >> 16;
        g = (color & 65280) >> 8;
        b = color & 255;
      }
    }
    return rgb(r, g, b);
  }
  function d3_rgb_hsl(r, g, b) {
    var min = Math.min(r /= 255, g /= 255, b /= 255), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / 2;
    if (d) {
      s = l < .5 ? d / (max + min) : d / (2 - max - min);
      if (r == max) h = (g - b) / d + (g < b ? 6 : 0); else if (g == max) h = (b - r) / d + 2; else h = (r - g) / d + 4;
      h *= 60;
    } else {
      h = NaN;
      s = l > 0 && l < 1 ? 0 : h;
    }
    return new d3_hsl(h, s, l);
  }
  function d3_rgb_lab(r, g, b) {
    r = d3_rgb_xyz(r);
    g = d3_rgb_xyz(g);
    b = d3_rgb_xyz(b);
    var x = d3_xyz_lab((.4124564 * r + .3575761 * g + .1804375 * b) / d3_lab_X), y = d3_xyz_lab((.2126729 * r + .7151522 * g + .072175 * b) / d3_lab_Y), z = d3_xyz_lab((.0193339 * r + .119192 * g + .9503041 * b) / d3_lab_Z);
    return d3_lab(116 * y - 16, 500 * (x - y), 200 * (y - z));
  }
  function d3_rgb_xyz(r) {
    return (r /= 255) <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4);
  }
  function d3_rgb_parseNumber(c) {
    var f = parseFloat(c);
    return c.charAt(c.length - 1) === "%" ? Math.round(f * 2.55) : f;
  }
  var d3_rgb_names = d3.map({
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    rebeccapurple: 6697881,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
  });
  d3_rgb_names.forEach(function(key, value) {
    d3_rgb_names.set(key, d3_rgbNumber(value));
  });
  function d3_functor(v) {
    return typeof v === "function" ? v : function() {
      return v;
    };
  }
  d3.functor = d3_functor;
  d3.xhr = d3_xhrType(d3_identity);
  function d3_xhrType(response) {
    return function(url, mimeType, callback) {
      if (arguments.length === 2 && typeof mimeType === "function") callback = mimeType, 
      mimeType = null;
      return d3_xhr(url, mimeType, response, callback);
    };
  }
  function d3_xhr(url, mimeType, response, callback) {
    var xhr = {}, dispatch = d3.dispatch("beforesend", "progress", "load", "error"), headers = {}, request = new XMLHttpRequest(), responseType = null;
    if (this.XDomainRequest && !("withCredentials" in request) && /^(http(s)?:)?\/\//.test(url)) request = new XDomainRequest();
    "onload" in request ? request.onload = request.onerror = respond : request.onreadystatechange = function() {
      request.readyState > 3 && respond();
    };
    function respond() {
      var status = request.status, result;
      if (!status && d3_xhrHasResponse(request) || status >= 200 && status < 300 || status === 304) {
        try {
          result = response.call(xhr, request);
        } catch (e) {
          dispatch.error.call(xhr, e);
          return;
        }
        dispatch.load.call(xhr, result);
      } else {
        dispatch.error.call(xhr, request);
      }
    }
    request.onprogress = function(event) {
      var o = d3.event;
      d3.event = event;
      try {
        dispatch.progress.call(xhr, request);
      } finally {
        d3.event = o;
      }
    };
    xhr.header = function(name, value) {
      name = (name + "").toLowerCase();
      if (arguments.length < 2) return headers[name];
      if (value == null) delete headers[name]; else headers[name] = value + "";
      return xhr;
    };
    xhr.mimeType = function(value) {
      if (!arguments.length) return mimeType;
      mimeType = value == null ? null : value + "";
      return xhr;
    };
    xhr.responseType = function(value) {
      if (!arguments.length) return responseType;
      responseType = value;
      return xhr;
    };
    xhr.response = function(value) {
      response = value;
      return xhr;
    };
    [ "get", "post" ].forEach(function(method) {
      xhr[method] = function() {
        return xhr.send.apply(xhr, [ method ].concat(d3_array(arguments)));
      };
    });
    xhr.send = function(method, data, callback) {
      if (arguments.length === 2 && typeof data === "function") callback = data, data = null;
      request.open(method, url, true);
      if (mimeType != null && !("accept" in headers)) headers["accept"] = mimeType + ",*/*";
      if (request.setRequestHeader) for (var name in headers) request.setRequestHeader(name, headers[name]);
      if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);
      if (responseType != null) request.responseType = responseType;
      if (callback != null) xhr.on("error", callback).on("load", function(request) {
        callback(null, request);
      });
      dispatch.beforesend.call(xhr, request);
      request.send(data == null ? null : data);
      return xhr;
    };
    xhr.abort = function() {
      request.abort();
      return xhr;
    };
    d3.rebind(xhr, dispatch, "on");
    return callback == null ? xhr : xhr.get(d3_xhr_fixCallback(callback));
  }
  function d3_xhr_fixCallback(callback) {
    return callback.length === 1 ? function(error, request) {
      callback(error == null ? request : null);
    } : callback;
  }
  function d3_xhrHasResponse(request) {
    var type = request.responseType;
    return type && type !== "text" ? request.response : request.responseText;
  }
  d3.dsv = function(delimiter, mimeType) {
    var reFormat = new RegExp('["' + delimiter + "\n]"), delimiterCode = delimiter.charCodeAt(0);
    function dsv(url, row, callback) {
      if (arguments.length < 3) callback = row, row = null;
      var xhr = d3_xhr(url, mimeType, row == null ? response : typedResponse(row), callback);
      xhr.row = function(_) {
        return arguments.length ? xhr.response((row = _) == null ? response : typedResponse(_)) : row;
      };
      return xhr;
    }
    function response(request) {
      return dsv.parse(request.responseText);
    }
    function typedResponse(f) {
      return function(request) {
        return dsv.parse(request.responseText, f);
      };
    }
    dsv.parse = function(text, f) {
      var o;
      return dsv.parseRows(text, function(row, i) {
        if (o) return o(row, i - 1);
        var a = new Function("d", "return {" + row.map(function(name, i) {
          return JSON.stringify(name) + ": d[" + i + "]";
        }).join(",") + "}");
        o = f ? function(row, i) {
          return f(a(row), i);
        } : a;
      });
    };
    dsv.parseRows = function(text, f) {
      var EOL = {}, EOF = {}, rows = [], N = text.length, I = 0, n = 0, t, eol;
      function token() {
        if (I >= N) return EOF;
        if (eol) return eol = false, EOL;
        var j = I;
        if (text.charCodeAt(j) === 34) {
          var i = j;
          while (i++ < N) {
            if (text.charCodeAt(i) === 34) {
              if (text.charCodeAt(i + 1) !== 34) break;
              ++i;
            }
          }
          I = i + 2;
          var c = text.charCodeAt(i + 1);
          if (c === 13) {
            eol = true;
            if (text.charCodeAt(i + 2) === 10) ++I;
          } else if (c === 10) {
            eol = true;
          }
          return text.slice(j + 1, i).replace(/""/g, '"');
        }
        while (I < N) {
          var c = text.charCodeAt(I++), k = 1;
          if (c === 10) eol = true; else if (c === 13) {
            eol = true;
            if (text.charCodeAt(I) === 10) ++I, ++k;
          } else if (c !== delimiterCode) continue;
          return text.slice(j, I - k);
        }
        return text.slice(j);
      }
      while ((t = token()) !== EOF) {
        var a = [];
        while (t !== EOL && t !== EOF) {
          a.push(t);
          t = token();
        }
        if (f && (a = f(a, n++)) == null) continue;
        rows.push(a);
      }
      return rows;
    };
    dsv.format = function(rows) {
      if (Array.isArray(rows[0])) return dsv.formatRows(rows);
      var fieldSet = new d3_Set(), fields = [];
      rows.forEach(function(row) {
        for (var field in row) {
          if (!fieldSet.has(field)) {
            fields.push(fieldSet.add(field));
          }
        }
      });
      return [ fields.map(formatValue).join(delimiter) ].concat(rows.map(function(row) {
        return fields.map(function(field) {
          return formatValue(row[field]);
        }).join(delimiter);
      })).join("\n");
    };
    dsv.formatRows = function(rows) {
      return rows.map(formatRow).join("\n");
    };
    function formatRow(row) {
      return row.map(formatValue).join(delimiter);
    }
    function formatValue(text) {
      return reFormat.test(text) ? '"' + text.replace(/\"/g, '""') + '"' : text;
    }
    return dsv;
  };
  d3.csv = d3.dsv(",", "text/csv");
  d3.tsv = d3.dsv("	", "text/tab-separated-values");
  var d3_timer_queueHead, d3_timer_queueTail, d3_timer_interval, d3_timer_timeout, d3_timer_frame = this[d3_vendorSymbol(this, "requestAnimationFrame")] || function(callback) {
    setTimeout(callback, 17);
  };
  d3.timer = function() {
    d3_timer.apply(this, arguments);
  };
  function d3_timer(callback, delay, then) {
    var n = arguments.length;
    if (n < 2) delay = 0;
    if (n < 3) then = Date.now();
    var time = then + delay, timer = {
      c: callback,
      t: time,
      n: null
    };
    if (d3_timer_queueTail) d3_timer_queueTail.n = timer; else d3_timer_queueHead = timer;
    d3_timer_queueTail = timer;
    if (!d3_timer_interval) {
      d3_timer_timeout = clearTimeout(d3_timer_timeout);
      d3_timer_interval = 1;
      d3_timer_frame(d3_timer_step);
    }
    return timer;
  }
  function d3_timer_step() {
    var now = d3_timer_mark(), delay = d3_timer_sweep() - now;
    if (delay > 24) {
      if (isFinite(delay)) {
        clearTimeout(d3_timer_timeout);
        d3_timer_timeout = setTimeout(d3_timer_step, delay);
      }
      d3_timer_interval = 0;
    } else {
      d3_timer_interval = 1;
      d3_timer_frame(d3_timer_step);
    }
  }
  d3.timer.flush = function() {
    d3_timer_mark();
    d3_timer_sweep();
  };
  function d3_timer_mark() {
    var now = Date.now(), timer = d3_timer_queueHead;
    while (timer) {
      if (now >= timer.t && timer.c(now - timer.t)) timer.c = null;
      timer = timer.n;
    }
    return now;
  }
  function d3_timer_sweep() {
    var t0, t1 = d3_timer_queueHead, time = Infinity;
    while (t1) {
      if (t1.c) {
        if (t1.t < time) time = t1.t;
        t1 = (t0 = t1).n;
      } else {
        t1 = t0 ? t0.n = t1.n : d3_timer_queueHead = t1.n;
      }
    }
    d3_timer_queueTail = t0;
    return time;
  }
  function d3_format_precision(x, p) {
    return p - (x ? Math.ceil(Math.log(x) / Math.LN10) : 1);
  }
  d3.round = function(x, n) {
    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);
  };
  var d3_formatPrefixes = [ "y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y" ].map(d3_formatPrefix);
  d3.formatPrefix = function(value, precision) {
    var i = 0;
    if (value = +value) {
      if (value < 0) value *= -1;
      if (precision) value = d3.round(value, d3_format_precision(value, precision));
      i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);
      i = Math.max(-24, Math.min(24, Math.floor((i - 1) / 3) * 3));
    }
    return d3_formatPrefixes[8 + i / 3];
  };
  function d3_formatPrefix(d, i) {
    var k = Math.pow(10, abs(8 - i) * 3);
    return {
      scale: i > 8 ? function(d) {
        return d / k;
      } : function(d) {
        return d * k;
      },
      symbol: d
    };
  }
  function d3_locale_numberFormat(locale) {
    var locale_decimal = locale.decimal, locale_thousands = locale.thousands, locale_grouping = locale.grouping, locale_currency = locale.currency, formatGroup = locale_grouping && locale_thousands ? function(value, width) {
      var i = value.length, t = [], j = 0, g = locale_grouping[0], length = 0;
      while (i > 0 && g > 0) {
        if (length + g + 1 > width) g = Math.max(1, width - length);
        t.push(value.substring(i -= g, i + g));
        if ((length += g + 1) > width) break;
        g = locale_grouping[j = (j + 1) % locale_grouping.length];
      }
      return t.reverse().join(locale_thousands);
    } : d3_identity;
    return function(specifier) {
      var match = d3_format_re.exec(specifier), fill = match[1] || " ", align = match[2] || ">", sign = match[3] || "-", symbol = match[4] || "", zfill = match[5], width = +match[6], comma = match[7], precision = match[8], type = match[9], scale = 1, prefix = "", suffix = "", integer = false, exponent = true;
      if (precision) precision = +precision.substring(1);
      if (zfill || fill === "0" && align === "=") {
        zfill = fill = "0";
        align = "=";
      }
      switch (type) {
       case "n":
        comma = true;
        type = "g";
        break;

       case "%":
        scale = 100;
        suffix = "%";
        type = "f";
        break;

       case "p":
        scale = 100;
        suffix = "%";
        type = "r";
        break;

       case "b":
       case "o":
       case "x":
       case "X":
        if (symbol === "#") prefix = "0" + type.toLowerCase();

       case "c":
        exponent = false;

       case "d":
        integer = true;
        precision = 0;
        break;

       case "s":
        scale = -1;
        type = "r";
        break;
      }
      if (symbol === "$") prefix = locale_currency[0], suffix = locale_currency[1];
      if (type == "r" && !precision) type = "g";
      if (precision != null) {
        if (type == "g") precision = Math.max(1, Math.min(21, precision)); else if (type == "e" || type == "f") precision = Math.max(0, Math.min(20, precision));
      }
      type = d3_format_types.get(type) || d3_format_typeDefault;
      var zcomma = zfill && comma;
      return function(value) {
        var fullSuffix = suffix;
        if (integer && value % 1) return "";
        var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, "-") : sign === "-" ? "" : sign;
        if (scale < 0) {
          var unit = d3.formatPrefix(value, precision);
          value = unit.scale(value);
          fullSuffix = unit.symbol + suffix;
        } else {
          value *= scale;
        }
        value = type(value, precision);
        var i = value.lastIndexOf("."), before, after;
        if (i < 0) {
          var j = exponent ? value.lastIndexOf("e") : -1;
          if (j < 0) before = value, after = ""; else before = value.substring(0, j), after = value.substring(j);
        } else {
          before = value.substring(0, i);
          after = locale_decimal + value.substring(i + 1);
        }
        if (!zfill && comma) before = formatGroup(before, Infinity);
        var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length), padding = length < width ? new Array(length = width - length + 1).join(fill) : "";
        if (zcomma) before = formatGroup(padding + before, padding.length ? width - after.length : Infinity);
        negative += prefix;
        value = before + after;
        return (align === "<" ? negative + value + padding : align === ">" ? padding + negative + value : align === "^" ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;
      };
    };
  }
  var d3_format_re = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;
  var d3_format_types = d3.map({
    b: function(x) {
      return x.toString(2);
    },
    c: function(x) {
      return String.fromCharCode(x);
    },
    o: function(x) {
      return x.toString(8);
    },
    x: function(x) {
      return x.toString(16);
    },
    X: function(x) {
      return x.toString(16).toUpperCase();
    },
    g: function(x, p) {
      return x.toPrecision(p);
    },
    e: function(x, p) {
      return x.toExponential(p);
    },
    f: function(x, p) {
      return x.toFixed(p);
    },
    r: function(x, p) {
      return (x = d3.round(x, d3_format_precision(x, p))).toFixed(Math.max(0, Math.min(20, d3_format_precision(x * (1 + 1e-15), p))));
    }
  });
  function d3_format_typeDefault(x) {
    return x + "";
  }
  var d3_time = d3.time = {}, d3_date = Date;
  function d3_date_utc() {
    this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]);
  }
  d3_date_utc.prototype = {
    getDate: function() {
      return this._.getUTCDate();
    },
    getDay: function() {
      return this._.getUTCDay();
    },
    getFullYear: function() {
      return this._.getUTCFullYear();
    },
    getHours: function() {
      return this._.getUTCHours();
    },
    getMilliseconds: function() {
      return this._.getUTCMilliseconds();
    },
    getMinutes: function() {
      return this._.getUTCMinutes();
    },
    getMonth: function() {
      return this._.getUTCMonth();
    },
    getSeconds: function() {
      return this._.getUTCSeconds();
    },
    getTime: function() {
      return this._.getTime();
    },
    getTimezoneOffset: function() {
      return 0;
    },
    valueOf: function() {
      return this._.valueOf();
    },
    setDate: function() {
      d3_time_prototype.setUTCDate.apply(this._, arguments);
    },
    setDay: function() {
      d3_time_prototype.setUTCDay.apply(this._, arguments);
    },
    setFullYear: function() {
      d3_time_prototype.setUTCFullYear.apply(this._, arguments);
    },
    setHours: function() {
      d3_time_prototype.setUTCHours.apply(this._, arguments);
    },
    setMilliseconds: function() {
      d3_time_prototype.setUTCMilliseconds.apply(this._, arguments);
    },
    setMinutes: function() {
      d3_time_prototype.setUTCMinutes.apply(this._, arguments);
    },
    setMonth: function() {
      d3_time_prototype.setUTCMonth.apply(this._, arguments);
    },
    setSeconds: function() {
      d3_time_prototype.setUTCSeconds.apply(this._, arguments);
    },
    setTime: function() {
      d3_time_prototype.setTime.apply(this._, arguments);
    }
  };
  var d3_time_prototype = Date.prototype;
  function d3_time_interval(local, step, number) {
    function round(date) {
      var d0 = local(date), d1 = offset(d0, 1);
      return date - d0 < d1 - date ? d0 : d1;
    }
    function ceil(date) {
      step(date = local(new d3_date(date - 1)), 1);
      return date;
    }
    function offset(date, k) {
      step(date = new d3_date(+date), k);
      return date;
    }
    function range(t0, t1, dt) {
      var time = ceil(t0), times = [];
      if (dt > 1) {
        while (time < t1) {
          if (!(number(time) % dt)) times.push(new Date(+time));
          step(time, 1);
        }
      } else {
        while (time < t1) times.push(new Date(+time)), step(time, 1);
      }
      return times;
    }
    function range_utc(t0, t1, dt) {
      try {
        d3_date = d3_date_utc;
        var utc = new d3_date_utc();
        utc._ = t0;
        return range(utc, t1, dt);
      } finally {
        d3_date = Date;
      }
    }
    local.floor = local;
    local.round = round;
    local.ceil = ceil;
    local.offset = offset;
    local.range = range;
    var utc = local.utc = d3_time_interval_utc(local);
    utc.floor = utc;
    utc.round = d3_time_interval_utc(round);
    utc.ceil = d3_time_interval_utc(ceil);
    utc.offset = d3_time_interval_utc(offset);
    utc.range = range_utc;
    return local;
  }
  function d3_time_interval_utc(method) {
    return function(date, k) {
      try {
        d3_date = d3_date_utc;
        var utc = new d3_date_utc();
        utc._ = date;
        return method(utc, k)._;
      } finally {
        d3_date = Date;
      }
    };
  }
  d3_time.year = d3_time_interval(function(date) {
    date = d3_time.day(date);
    date.setMonth(0, 1);
    return date;
  }, function(date, offset) {
    date.setFullYear(date.getFullYear() + offset);
  }, function(date) {
    return date.getFullYear();
  });
  d3_time.years = d3_time.year.range;
  d3_time.years.utc = d3_time.year.utc.range;
  d3_time.day = d3_time_interval(function(date) {
    var day = new d3_date(2e3, 0);
    day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());
    return day;
  }, function(date, offset) {
    date.setDate(date.getDate() + offset);
  }, function(date) {
    return date.getDate() - 1;
  });
  d3_time.days = d3_time.day.range;
  d3_time.days.utc = d3_time.day.utc.range;
  d3_time.dayOfYear = function(date) {
    var year = d3_time.year(date);
    return Math.floor((date - year - (date.getTimezoneOffset() - year.getTimezoneOffset()) * 6e4) / 864e5);
  };
  [ "sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday" ].forEach(function(day, i) {
    i = 7 - i;
    var interval = d3_time[day] = d3_time_interval(function(date) {
      (date = d3_time.day(date)).setDate(date.getDate() - (date.getDay() + i) % 7);
      return date;
    }, function(date, offset) {
      date.setDate(date.getDate() + Math.floor(offset) * 7);
    }, function(date) {
      var day = d3_time.year(date).getDay();
      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7) - (day !== i);
    });
    d3_time[day + "s"] = interval.range;
    d3_time[day + "s"].utc = interval.utc.range;
    d3_time[day + "OfYear"] = function(date) {
      var day = d3_time.year(date).getDay();
      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7);
    };
  });
  d3_time.week = d3_time.sunday;
  d3_time.weeks = d3_time.sunday.range;
  d3_time.weeks.utc = d3_time.sunday.utc.range;
  d3_time.weekOfYear = d3_time.sundayOfYear;
  function d3_locale_timeFormat(locale) {
    var locale_dateTime = locale.dateTime, locale_date = locale.date, locale_time = locale.time, locale_periods = locale.periods, locale_days = locale.days, locale_shortDays = locale.shortDays, locale_months = locale.months, locale_shortMonths = locale.shortMonths;
    function d3_time_format(template) {
      var n = template.length;
      function format(date) {
        var string = [], i = -1, j = 0, c, p, f;
        while (++i < n) {
          if (template.charCodeAt(i) === 37) {
            string.push(template.slice(j, i));
            if ((p = d3_time_formatPads[c = template.charAt(++i)]) != null) c = template.charAt(++i);
            if (f = d3_time_formats[c]) c = f(date, p == null ? c === "e" ? " " : "0" : p);
            string.push(c);
            j = i + 1;
          }
        }
        string.push(template.slice(j, i));
        return string.join("");
      }
      format.parse = function(string) {
        var d = {
          y: 1900,
          m: 0,
          d: 1,
          H: 0,
          M: 0,
          S: 0,
          L: 0,
          Z: null
        }, i = d3_time_parse(d, template, string, 0);
        if (i != string.length) return null;
        if ("p" in d) d.H = d.H % 12 + d.p * 12;
        var localZ = d.Z != null && d3_date !== d3_date_utc, date = new (localZ ? d3_date_utc : d3_date)();
        if ("j" in d) date.setFullYear(d.y, 0, d.j); else if ("W" in d || "U" in d) {
          if (!("w" in d)) d.w = "W" in d ? 1 : 0;
          date.setFullYear(d.y, 0, 1);
          date.setFullYear(d.y, 0, "W" in d ? (d.w + 6) % 7 + d.W * 7 - (date.getDay() + 5) % 7 : d.w + d.U * 7 - (date.getDay() + 6) % 7);
        } else date.setFullYear(d.y, d.m, d.d);
        date.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L);
        return localZ ? date._ : date;
      };
      format.toString = function() {
        return template;
      };
      return format;
    }
    function d3_time_parse(date, template, string, j) {
      var c, p, t, i = 0, n = template.length, m = string.length;
      while (i < n) {
        if (j >= m) return -1;
        c = template.charCodeAt(i++);
        if (c === 37) {
          t = template.charAt(i++);
          p = d3_time_parsers[t in d3_time_formatPads ? template.charAt(i++) : t];
          if (!p || (j = p(date, string, j)) < 0) return -1;
        } else if (c != string.charCodeAt(j++)) {
          return -1;
        }
      }
      return j;
    }
    d3_time_format.utc = function(template) {
      var local = d3_time_format(template);
      function format(date) {
        try {
          d3_date = d3_date_utc;
          var utc = new d3_date();
          utc._ = date;
          return local(utc);
        } finally {
          d3_date = Date;
        }
      }
      format.parse = function(string) {
        try {
          d3_date = d3_date_utc;
          var date = local.parse(string);
          return date && date._;
        } finally {
          d3_date = Date;
        }
      };
      format.toString = local.toString;
      return format;
    };
    d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti;
    var d3_time_periodLookup = d3.map(), d3_time_dayRe = d3_time_formatRe(locale_days), d3_time_dayLookup = d3_time_formatLookup(locale_days), d3_time_dayAbbrevRe = d3_time_formatRe(locale_shortDays), d3_time_dayAbbrevLookup = d3_time_formatLookup(locale_shortDays), d3_time_monthRe = d3_time_formatRe(locale_months), d3_time_monthLookup = d3_time_formatLookup(locale_months), d3_time_monthAbbrevRe = d3_time_formatRe(locale_shortMonths), d3_time_monthAbbrevLookup = d3_time_formatLookup(locale_shortMonths);
    locale_periods.forEach(function(p, i) {
      d3_time_periodLookup.set(p.toLowerCase(), i);
    });
    var d3_time_formats = {
      a: function(d) {
        return locale_shortDays[d.getDay()];
      },
      A: function(d) {
        return locale_days[d.getDay()];
      },
      b: function(d) {
        return locale_shortMonths[d.getMonth()];
      },
      B: function(d) {
        return locale_months[d.getMonth()];
      },
      c: d3_time_format(locale_dateTime),
      d: function(d, p) {
        return d3_time_formatPad(d.getDate(), p, 2);
      },
      e: function(d, p) {
        return d3_time_formatPad(d.getDate(), p, 2);
      },
      H: function(d, p) {
        return d3_time_formatPad(d.getHours(), p, 2);
      },
      I: function(d, p) {
        return d3_time_formatPad(d.getHours() % 12 || 12, p, 2);
      },
      j: function(d, p) {
        return d3_time_formatPad(1 + d3_time.dayOfYear(d), p, 3);
      },
      L: function(d, p) {
        return d3_time_formatPad(d.getMilliseconds(), p, 3);
      },
      m: function(d, p) {
        return d3_time_formatPad(d.getMonth() + 1, p, 2);
      },
      M: function(d, p) {
        return d3_time_formatPad(d.getMinutes(), p, 2);
      },
      p: function(d) {
        return locale_periods[+(d.getHours() >= 12)];
      },
      S: function(d, p) {
        return d3_time_formatPad(d.getSeconds(), p, 2);
      },
      U: function(d, p) {
        return d3_time_formatPad(d3_time.sundayOfYear(d), p, 2);
      },
      w: function(d) {
        return d.getDay();
      },
      W: function(d, p) {
        return d3_time_formatPad(d3_time.mondayOfYear(d), p, 2);
      },
      x: d3_time_format(locale_date),
      X: d3_time_format(locale_time),
      y: function(d, p) {
        return d3_time_formatPad(d.getFullYear() % 100, p, 2);
      },
      Y: function(d, p) {
        return d3_time_formatPad(d.getFullYear() % 1e4, p, 4);
      },
      Z: d3_time_zone,
      "%": function() {
        return "%";
      }
    };
    var d3_time_parsers = {
      a: d3_time_parseWeekdayAbbrev,
      A: d3_time_parseWeekday,
      b: d3_time_parseMonthAbbrev,
      B: d3_time_parseMonth,
      c: d3_time_parseLocaleFull,
      d: d3_time_parseDay,
      e: d3_time_parseDay,
      H: d3_time_parseHour24,
      I: d3_time_parseHour24,
      j: d3_time_parseDayOfYear,
      L: d3_time_parseMilliseconds,
      m: d3_time_parseMonthNumber,
      M: d3_time_parseMinutes,
      p: d3_time_parseAmPm,
      S: d3_time_parseSeconds,
      U: d3_time_parseWeekNumberSunday,
      w: d3_time_parseWeekdayNumber,
      W: d3_time_parseWeekNumberMonday,
      x: d3_time_parseLocaleDate,
      X: d3_time_parseLocaleTime,
      y: d3_time_parseYear,
      Y: d3_time_parseFullYear,
      Z: d3_time_parseZone,
      "%": d3_time_parseLiteralPercent
    };
    function d3_time_parseWeekdayAbbrev(date, string, i) {
      d3_time_dayAbbrevRe.lastIndex = 0;
      var n = d3_time_dayAbbrevRe.exec(string.slice(i));
      return n ? (date.w = d3_time_dayAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;
    }
    function d3_time_parseWeekday(date, string, i) {
      d3_time_dayRe.lastIndex = 0;
      var n = d3_time_dayRe.exec(string.slice(i));
      return n ? (date.w = d3_time_dayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;
    }
    function d3_time_parseMonthAbbrev(date, string, i) {
      d3_time_monthAbbrevRe.lastIndex = 0;
      var n = d3_time_monthAbbrevRe.exec(string.slice(i));
      return n ? (date.m = d3_time_monthAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;
    }
    function d3_time_parseMonth(date, string, i) {
      d3_time_monthRe.lastIndex = 0;
      var n = d3_time_monthRe.exec(string.slice(i));
      return n ? (date.m = d3_time_monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;
    }
    function d3_time_parseLocaleFull(date, string, i) {
      return d3_time_parse(date, d3_time_formats.c.toString(), string, i);
    }
    function d3_time_parseLocaleDate(date, string, i) {
      return d3_time_parse(date, d3_time_formats.x.toString(), string, i);
    }
    function d3_time_parseLocaleTime(date, string, i) {
      return d3_time_parse(date, d3_time_formats.X.toString(), string, i);
    }
    function d3_time_parseAmPm(date, string, i) {
      var n = d3_time_periodLookup.get(string.slice(i, i += 2).toLowerCase());
      return n == null ? -1 : (date.p = n, i);
    }
    return d3_time_format;
  }
  var d3_time_formatPads = {
    "-": "",
    _: " ",
    "0": "0"
  }, d3_time_numberRe = /^\s*\d+/, d3_time_percentRe = /^%/;
  function d3_time_formatPad(value, fill, width) {
    var sign = value < 0 ? "-" : "", string = (sign ? -value : value) + "", length = string.length;
    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);
  }
  function d3_time_formatRe(names) {
    return new RegExp("^(?:" + names.map(d3.requote).join("|") + ")", "i");
  }
  function d3_time_formatLookup(names) {
    var map = new d3_Map(), i = -1, n = names.length;
    while (++i < n) map.set(names[i].toLowerCase(), i);
    return map;
  }
  function d3_time_parseWeekdayNumber(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 1));
    return n ? (date.w = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseWeekNumberSunday(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i));
    return n ? (date.U = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseWeekNumberMonday(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i));
    return n ? (date.W = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseFullYear(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 4));
    return n ? (date.y = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseYear(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.y = d3_time_expandYear(+n[0]), i + n[0].length) : -1;
  }
  function d3_time_parseZone(date, string, i) {
    return /^[+-]\d{4}$/.test(string = string.slice(i, i + 5)) ? (date.Z = -string, 
    i + 5) : -1;
  }
  function d3_time_expandYear(d) {
    return d + (d > 68 ? 1900 : 2e3);
  }
  function d3_time_parseMonthNumber(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.m = n[0] - 1, i + n[0].length) : -1;
  }
  function d3_time_parseDay(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.d = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseDayOfYear(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 3));
    return n ? (date.j = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseHour24(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.H = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseMinutes(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.M = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseSeconds(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
    return n ? (date.S = +n[0], i + n[0].length) : -1;
  }
  function d3_time_parseMilliseconds(date, string, i) {
    d3_time_numberRe.lastIndex = 0;
    var n = d3_time_numberRe.exec(string.slice(i, i + 3));
    return n ? (date.L = +n[0], i + n[0].length) : -1;
  }
  function d3_time_zone(d) {
    var z = d.getTimezoneOffset(), zs = z > 0 ? "-" : "+", zh = abs(z) / 60 | 0, zm = abs(z) % 60;
    return zs + d3_time_formatPad(zh, "0", 2) + d3_time_formatPad(zm, "0", 2);
  }
  function d3_time_parseLiteralPercent(date, string, i) {
    d3_time_percentRe.lastIndex = 0;
    var n = d3_time_percentRe.exec(string.slice(i, i + 1));
    return n ? i + n[0].length : -1;
  }
  function d3_time_formatMulti(formats) {
    var n = formats.length, i = -1;
    while (++i < n) formats[i][0] = this(formats[i][0]);
    return function(date) {
      var i = 0, f = formats[i];
      while (!f[1](date)) f = formats[++i];
      return f[0](date);
    };
  }
  d3.locale = function(locale) {
    return {
      numberFormat: d3_locale_numberFormat(locale),
      timeFormat: d3_locale_timeFormat(locale)
    };
  };
  var d3_locale_enUS = d3.locale({
    decimal: ".",
    thousands: ",",
    grouping: [ 3 ],
    currency: [ "$", "" ],
    dateTime: "%a %b %e %X %Y",
    date: "%m/%d/%Y",
    time: "%H:%M:%S",
    periods: [ "AM", "PM" ],
    days: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
    shortDays: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
    months: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
    shortMonths: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ]
  });
  d3.format = d3_locale_enUS.numberFormat;
  d3.geo = {};
  function d3_adder() {}
  d3_adder.prototype = {
    s: 0,
    t: 0,
    add: function(y) {
      d3_adderSum(y, this.t, d3_adderTemp);
      d3_adderSum(d3_adderTemp.s, this.s, this);
      if (this.s) this.t += d3_adderTemp.t; else this.s = d3_adderTemp.t;
    },
    reset: function() {
      this.s = this.t = 0;
    },
    valueOf: function() {
      return this.s;
    }
  };
  var d3_adderTemp = new d3_adder();
  function d3_adderSum(a, b, o) {
    var x = o.s = a + b, bv = x - a, av = x - bv;
    o.t = a - av + (b - bv);
  }
  d3.geo.stream = function(object, listener) {
    if (object && d3_geo_streamObjectType.hasOwnProperty(object.type)) {
      d3_geo_streamObjectType[object.type](object, listener);
    } else {
      d3_geo_streamGeometry(object, listener);
    }
  };
  function d3_geo_streamGeometry(geometry, listener) {
    if (geometry && d3_geo_streamGeometryType.hasOwnProperty(geometry.type)) {
      d3_geo_streamGeometryType[geometry.type](geometry, listener);
    }
  }
  var d3_geo_streamObjectType = {
    Feature: function(feature, listener) {
      d3_geo_streamGeometry(feature.geometry, listener);
    },
    FeatureCollection: function(object, listener) {
      var features = object.features, i = -1, n = features.length;
      while (++i < n) d3_geo_streamGeometry(features[i].geometry, listener);
    }
  };
  var d3_geo_streamGeometryType = {
    Sphere: function(object, listener) {
      listener.sphere();
    },
    Point: function(object, listener) {
      object = object.coordinates;
      listener.point(object[0], object[1], object[2]);
    },
    MultiPoint: function(object, listener) {
      var coordinates = object.coordinates, i = -1, n = coordinates.length;
      while (++i < n) object = coordinates[i], listener.point(object[0], object[1], object[2]);
    },
    LineString: function(object, listener) {
      d3_geo_streamLine(object.coordinates, listener, 0);
    },
    MultiLineString: function(object, listener) {
      var coordinates = object.coordinates, i = -1, n = coordinates.length;
      while (++i < n) d3_geo_streamLine(coordinates[i], listener, 0);
    },
    Polygon: function(object, listener) {
      d3_geo_streamPolygon(object.coordinates, listener);
    },
    MultiPolygon: function(object, listener) {
      var coordinates = object.coordinates, i = -1, n = coordinates.length;
      while (++i < n) d3_geo_streamPolygon(coordinates[i], listener);
    },
    GeometryCollection: function(object, listener) {
      var geometries = object.geometries, i = -1, n = geometries.length;
      while (++i < n) d3_geo_streamGeometry(geometries[i], listener);
    }
  };
  function d3_geo_streamLine(coordinates, listener, closed) {
    var i = -1, n = coordinates.length - closed, coordinate;
    listener.lineStart();
    while (++i < n) coordinate = coordinates[i], listener.point(coordinate[0], coordinate[1], coordinate[2]);
    listener.lineEnd();
  }
  function d3_geo_streamPolygon(coordinates, listener) {
    var i = -1, n = coordinates.length;
    listener.polygonStart();
    while (++i < n) d3_geo_streamLine(coordinates[i], listener, 1);
    listener.polygonEnd();
  }
  d3.geo.area = function(object) {
    d3_geo_areaSum = 0;
    d3.geo.stream(object, d3_geo_area);
    return d3_geo_areaSum;
  };
  var d3_geo_areaSum, d3_geo_areaRingSum = new d3_adder();
  var d3_geo_area = {
    sphere: function() {
      d3_geo_areaSum += 4 * ;
    },
    point: d3_noop,
    lineStart: d3_noop,
    lineEnd: d3_noop,
    polygonStart: function() {
      d3_geo_areaRingSum.reset();
      d3_geo_area.lineStart = d3_geo_areaRingStart;
    },
    polygonEnd: function() {
      var area = 2 * d3_geo_areaRingSum;
      d3_geo_areaSum += area < 0 ? 4 *  + area : area;
      d3_geo_area.lineStart = d3_geo_area.lineEnd = d3_geo_area.point = d3_noop;
    }
  };
  function d3_geo_areaRingStart() {
    var 00, 00, 0, cos0, sin0;
    d3_geo_area.point = function(, ) {
      d3_geo_area.point = nextPoint;
      0 = (00 = ) * d3_radians, cos0 = Math.cos( = (00 = ) * d3_radians / 2 +  / 4), 
      sin0 = Math.sin();
    };
    function nextPoint(, ) {
       *= d3_radians;
       =  * d3_radians / 2 +  / 4;
      var d =  - 0, sd = d >= 0 ? 1 : -1, ad = sd * d, cos = Math.cos(), sin = Math.sin(), k = sin0 * sin, u = cos0 * cos + k * Math.cos(ad), v = k * sd * Math.sin(ad);
      d3_geo_areaRingSum.add(Math.atan2(v, u));
      0 = , cos0 = cos, sin0 = sin;
    }
    d3_geo_area.lineEnd = function() {
      nextPoint(00, 00);
    };
  }
  function d3_geo_cartesian(spherical) {
    var  = spherical[0],  = spherical[1], cos = Math.cos();
    return [ cos * Math.cos(), cos * Math.sin(), Math.sin() ];
  }
  function d3_geo_cartesianDot(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function d3_geo_cartesianCross(a, b) {
    return [ a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0] ];
  }
  function d3_geo_cartesianAdd(a, b) {
    a[0] += b[0];
    a[1] += b[1];
    a[2] += b[2];
  }
  function d3_geo_cartesianScale(vector, k) {
    return [ vector[0] * k, vector[1] * k, vector[2] * k ];
  }
  function d3_geo_cartesianNormalize(d) {
    var l = Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);
    d[0] /= l;
    d[1] /= l;
    d[2] /= l;
  }
  function d3_geo_spherical(cartesian) {
    return [ Math.atan2(cartesian[1], cartesian[0]), d3_asin(cartesian[2]) ];
  }
  function d3_geo_sphericalEqual(a, b) {
    return abs(a[0] - b[0]) <  && abs(a[1] - b[1]) < ;
  }
  d3.geo.bounds = function() {
    var 0, 0, 1, 1, _, __, __, p0, dSum, ranges, range;
    var bound = {
      point: point,
      lineStart: lineStart,
      lineEnd: lineEnd,
      polygonStart: function() {
        bound.point = ringPoint;
        bound.lineStart = ringStart;
        bound.lineEnd = ringEnd;
        dSum = 0;
        d3_geo_area.polygonStart();
      },
      polygonEnd: function() {
        d3_geo_area.polygonEnd();
        bound.point = point;
        bound.lineStart = lineStart;
        bound.lineEnd = lineEnd;
        if (d3_geo_areaRingSum < 0) 0 = -(1 = 180), 0 = -(1 = 90); else if (dSum > ) 1 = 90; else if (dSum < -) 0 = -90;
        range[0] = 0, range[1] = 1;
      }
    };
    function point(, ) {
      ranges.push(range = [ 0 = , 1 =  ]);
      if ( < 0) 0 = ;
      if ( > 1) 1 = ;
    }
    function linePoint(, ) {
      var p = d3_geo_cartesian([  * d3_radians,  * d3_radians ]);
      if (p0) {
        var normal = d3_geo_cartesianCross(p0, p), equatorial = [ normal[1], -normal[0], 0 ], inflection = d3_geo_cartesianCross(equatorial, normal);
        d3_geo_cartesianNormalize(inflection);
        inflection = d3_geo_spherical(inflection);
        var d =  - _, s = d > 0 ? 1 : -1, i = inflection[0] * d3_degrees * s, antimeridian = abs(d) > 180;
        if (antimeridian ^ (s * _ < i && i < s * )) {
          var i = inflection[1] * d3_degrees;
          if (i > 1) 1 = i;
        } else if (i = (i + 360) % 360 - 180, antimeridian ^ (s * _ < i && i < s * )) {
          var i = -inflection[1] * d3_degrees;
          if (i < 0) 0 = i;
        } else {
          if ( < 0) 0 = ;
          if ( > 1) 1 = ;
        }
        if (antimeridian) {
          if ( < _) {
            if (angle(0, ) > angle(0, 1)) 1 = ;
          } else {
            if (angle(, 1) > angle(0, 1)) 0 = ;
          }
        } else {
          if (1 >= 0) {
            if ( < 0) 0 = ;
            if ( > 1) 1 = ;
          } else {
            if ( > _) {
              if (angle(0, ) > angle(0, 1)) 1 = ;
            } else {
              if (angle(, 1) > angle(0, 1)) 0 = ;
            }
          }
        }
      } else {
        point(, );
      }
      p0 = p, _ = ;
    }
    function lineStart() {
      bound.point = linePoint;
    }
    function lineEnd() {
      range[0] = 0, range[1] = 1;
      bound.point = point;
      p0 = null;
    }
    function ringPoint(, ) {
      if (p0) {
        var d =  - _;
        dSum += abs(d) > 180 ? d + (d > 0 ? 360 : -360) : d;
      } else __ = , __ = ;
      d3_geo_area.point(, );
      linePoint(, );
    }
    function ringStart() {
      d3_geo_area.lineStart();
    }
    function ringEnd() {
      ringPoint(__, __);
      d3_geo_area.lineEnd();
      if (abs(dSum) > ) 0 = -(1 = 180);
      range[0] = 0, range[1] = 1;
      p0 = null;
    }
    function angle(0, 1) {
      return (1 -= 0) < 0 ? 1 + 360 : 1;
    }
    function compareRanges(a, b) {
      return a[0] - b[0];
    }
    function withinRange(x, range) {
      return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;
    }
    return function(feature) {
      1 = 1 = -(0 = 0 = Infinity);
      ranges = [];
      d3.geo.stream(feature, bound);
      var n = ranges.length;
      if (n) {
        ranges.sort(compareRanges);
        for (var i = 1, a = ranges[0], b, merged = [ a ]; i < n; ++i) {
          b = ranges[i];
          if (withinRange(b[0], a) || withinRange(b[1], a)) {
            if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];
            if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];
          } else {
            merged.push(a = b);
          }
        }
        var best = -Infinity, d;
        for (var n = merged.length - 1, i = 0, a = merged[n], b; i <= n; a = b, ++i) {
          b = merged[i];
          if ((d = angle(a[1], b[0])) > best) best = d, 0 = b[0], 1 = a[1];
        }
      }
      ranges = range = null;
      return 0 === Infinity || 0 === Infinity ? [ [ NaN, NaN ], [ NaN, NaN ] ] : [ [ 0, 0 ], [ 1, 1 ] ];
    };
  }();
  d3.geo.centroid = function(object) {
    d3_geo_centroidW0 = d3_geo_centroidW1 = d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;
    d3.geo.stream(object, d3_geo_centroid);
    var x = d3_geo_centroidX2, y = d3_geo_centroidY2, z = d3_geo_centroidZ2, m = x * x + y * y + z * z;
    if (m < 2) {
      x = d3_geo_centroidX1, y = d3_geo_centroidY1, z = d3_geo_centroidZ1;
      if (d3_geo_centroidW1 < ) x = d3_geo_centroidX0, y = d3_geo_centroidY0, z = d3_geo_centroidZ0;
      m = x * x + y * y + z * z;
      if (m < 2) return [ NaN, NaN ];
    }
    return [ Math.atan2(y, x) * d3_degrees, d3_asin(z / Math.sqrt(m)) * d3_degrees ];
  };
  var d3_geo_centroidW0, d3_geo_centroidW1, d3_geo_centroidX0, d3_geo_centroidY0, d3_geo_centroidZ0, d3_geo_centroidX1, d3_geo_centroidY1, d3_geo_centroidZ1, d3_geo_centroidX2, d3_geo_centroidY2, d3_geo_centroidZ2;
  var d3_geo_centroid = {
    sphere: d3_noop,
    point: d3_geo_centroidPoint,
    lineStart: d3_geo_centroidLineStart,
    lineEnd: d3_geo_centroidLineEnd,
    polygonStart: function() {
      d3_geo_centroid.lineStart = d3_geo_centroidRingStart;
    },
    polygonEnd: function() {
      d3_geo_centroid.lineStart = d3_geo_centroidLineStart;
    }
  };
  function d3_geo_centroidPoint(, ) {
     *= d3_radians;
    var cos = Math.cos( *= d3_radians);
    d3_geo_centroidPointXYZ(cos * Math.cos(), cos * Math.sin(), Math.sin());
  }
  function d3_geo_centroidPointXYZ(x, y, z) {
    ++d3_geo_centroidW0;
    d3_geo_centroidX0 += (x - d3_geo_centroidX0) / d3_geo_centroidW0;
    d3_geo_centroidY0 += (y - d3_geo_centroidY0) / d3_geo_centroidW0;
    d3_geo_centroidZ0 += (z - d3_geo_centroidZ0) / d3_geo_centroidW0;
  }
  function d3_geo_centroidLineStart() {
    var x0, y0, z0;
    d3_geo_centroid.point = function(, ) {
       *= d3_radians;
      var cos = Math.cos( *= d3_radians);
      x0 = cos * Math.cos();
      y0 = cos * Math.sin();
      z0 = Math.sin();
      d3_geo_centroid.point = nextPoint;
      d3_geo_centroidPointXYZ(x0, y0, z0);
    };
    function nextPoint(, ) {
       *= d3_radians;
      var cos = Math.cos( *= d3_radians), x = cos * Math.cos(), y = cos * Math.sin(), z = Math.sin(), w = Math.atan2(Math.sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);
      d3_geo_centroidW1 += w;
      d3_geo_centroidX1 += w * (x0 + (x0 = x));
      d3_geo_centroidY1 += w * (y0 + (y0 = y));
      d3_geo_centroidZ1 += w * (z0 + (z0 = z));
      d3_geo_centroidPointXYZ(x0, y0, z0);
    }
  }
  function d3_geo_centroidLineEnd() {
    d3_geo_centroid.point = d3_geo_centroidPoint;
  }
  function d3_geo_centroidRingStart() {
    var 00, 00, x0, y0, z0;
    d3_geo_centroid.point = function(, ) {
      00 = , 00 = ;
      d3_geo_centroid.point = nextPoint;
       *= d3_radians;
      var cos = Math.cos( *= d3_radians);
      x0 = cos * Math.cos();
      y0 = cos * Math.sin();
      z0 = Math.sin();
      d3_geo_centroidPointXYZ(x0, y0, z0);
    };
    d3_geo_centroid.lineEnd = function() {
      nextPoint(00, 00);
      d3_geo_centroid.lineEnd = d3_geo_centroidLineEnd;
      d3_geo_centroid.point = d3_geo_centroidPoint;
    };
    function nextPoint(, ) {
       *= d3_radians;
      var cos = Math.cos( *= d3_radians), x = cos * Math.cos(), y = cos * Math.sin(), z = Math.sin(), cx = y0 * z - z0 * y, cy = z0 * x - x0 * z, cz = x0 * y - y0 * x, m = Math.sqrt(cx * cx + cy * cy + cz * cz), u = x0 * x + y0 * y + z0 * z, v = m && -d3_acos(u) / m, w = Math.atan2(m, u);
      d3_geo_centroidX2 += v * cx;
      d3_geo_centroidY2 += v * cy;
      d3_geo_centroidZ2 += v * cz;
      d3_geo_centroidW1 += w;
      d3_geo_centroidX1 += w * (x0 + (x0 = x));
      d3_geo_centroidY1 += w * (y0 + (y0 = y));
      d3_geo_centroidZ1 += w * (z0 + (z0 = z));
      d3_geo_centroidPointXYZ(x0, y0, z0);
    }
  }
  function d3_geo_compose(a, b) {
    function compose(x, y) {
      return x = a(x, y), b(x[0], x[1]);
    }
    if (a.invert && b.invert) compose.invert = function(x, y) {
      return x = b.invert(x, y), x && a.invert(x[0], x[1]);
    };
    return compose;
  }
  function d3_true() {
    return true;
  }
  function d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener) {
    var subject = [], clip = [];
    segments.forEach(function(segment) {
      if ((n = segment.length - 1) <= 0) return;
      var n, p0 = segment[0], p1 = segment[n];
      if (d3_geo_sphericalEqual(p0, p1)) {
        listener.lineStart();
        for (var i = 0; i < n; ++i) listener.point((p0 = segment[i])[0], p0[1]);
        listener.lineEnd();
        return;
      }
      var a = new d3_geo_clipPolygonIntersection(p0, segment, null, true), b = new d3_geo_clipPolygonIntersection(p0, null, a, false);
      a.o = b;
      subject.push(a);
      clip.push(b);
      a = new d3_geo_clipPolygonIntersection(p1, segment, null, false);
      b = new d3_geo_clipPolygonIntersection(p1, null, a, true);
      a.o = b;
      subject.push(a);
      clip.push(b);
    });
    clip.sort(compare);
    d3_geo_clipPolygonLinkCircular(subject);
    d3_geo_clipPolygonLinkCircular(clip);
    if (!subject.length) return;
    for (var i = 0, entry = clipStartInside, n = clip.length; i < n; ++i) {
      clip[i].e = entry = !entry;
    }
    var start = subject[0], points, point;
    while (1) {
      var current = start, isSubject = true;
      while (current.v) if ((current = current.n) === start) return;
      points = current.z;
      listener.lineStart();
      do {
        current.v = current.o.v = true;
        if (current.e) {
          if (isSubject) {
            for (var i = 0, n = points.length; i < n; ++i) listener.point((point = points[i])[0], point[1]);
          } else {
            interpolate(current.x, current.n.x, 1, listener);
          }
          current = current.n;
        } else {
          if (isSubject) {
            points = current.p.z;
            for (var i = points.length - 1; i >= 0; --i) listener.point((point = points[i])[0], point[1]);
          } else {
            interpolate(current.x, current.p.x, -1, listener);
          }
          current = current.p;
        }
        current = current.o;
        points = current.z;
        isSubject = !isSubject;
      } while (!current.v);
      listener.lineEnd();
    }
  }
  function d3_geo_clipPolygonLinkCircular(array) {
    if (!(n = array.length)) return;
    var n, i = 0, a = array[0], b;
    while (++i < n) {
      a.n = b = array[i];
      b.p = a;
      a = b;
    }
    a.n = b = array[0];
    b.p = a;
  }
  function d3_geo_clipPolygonIntersection(point, points, other, entry) {
    this.x = point;
    this.z = points;
    this.o = other;
    this.e = entry;
    this.v = false;
    this.n = this.p = null;
  }
  function d3_geo_clip(pointVisible, clipLine, interpolate, clipStart) {
    return function(rotate, listener) {
      var line = clipLine(listener), rotatedClipStart = rotate.invert(clipStart[0], clipStart[1]);
      var clip = {
        point: point,
        lineStart: lineStart,
        lineEnd: lineEnd,
        polygonStart: function() {
          clip.point = pointRing;
          clip.lineStart = ringStart;
          clip.lineEnd = ringEnd;
          segments = [];
          polygon = [];
        },
        polygonEnd: function() {
          clip.point = point;
          clip.lineStart = lineStart;
          clip.lineEnd = lineEnd;
          segments = d3.merge(segments);
          var clipStartInside = d3_geo_pointInPolygon(rotatedClipStart, polygon);
          if (segments.length) {
            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;
            d3_geo_clipPolygon(segments, d3_geo_clipSort, clipStartInside, interpolate, listener);
          } else if (clipStartInside) {
            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;
            listener.lineStart();
            interpolate(null, null, 1, listener);
            listener.lineEnd();
          }
          if (polygonStarted) listener.polygonEnd(), polygonStarted = false;
          segments = polygon = null;
        },
        sphere: function() {
          listener.polygonStart();
          listener.lineStart();
          interpolate(null, null, 1, listener);
          listener.lineEnd();
          listener.polygonEnd();
        }
      };
      function point(, ) {
        var point = rotate(, );
        if (pointVisible( = point[0],  = point[1])) listener.point(, );
      }
      function pointLine(, ) {
        var point = rotate(, );
        line.point(point[0], point[1]);
      }
      function lineStart() {
        clip.point = pointLine;
        line.lineStart();
      }
      function lineEnd() {
        clip.point = point;
        line.lineEnd();
      }
      var segments;
      var buffer = d3_geo_clipBufferListener(), ringListener = clipLine(buffer), polygonStarted = false, polygon, ring;
      function pointRing(, ) {
        ring.push([ ,  ]);
        var point = rotate(, );
        ringListener.point(point[0], point[1]);
      }
      function ringStart() {
        ringListener.lineStart();
        ring = [];
      }
      function ringEnd() {
        pointRing(ring[0][0], ring[0][1]);
        ringListener.lineEnd();
        var clean = ringListener.clean(), ringSegments = buffer.buffer(), segment, n = ringSegments.length;
        ring.pop();
        polygon.push(ring);
        ring = null;
        if (!n) return;
        if (clean & 1) {
          segment = ringSegments[0];
          var n = segment.length - 1, i = -1, point;
          if (n > 0) {
            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;
            listener.lineStart();
            while (++i < n) listener.point((point = segment[i])[0], point[1]);
            listener.lineEnd();
          }
          return;
        }
        if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));
        segments.push(ringSegments.filter(d3_geo_clipSegmentLength1));
      }
      return clip;
    };
  }
  function d3_geo_clipSegmentLength1(segment) {
    return segment.length > 1;
  }
  function d3_geo_clipBufferListener() {
    var lines = [], line;
    return {
      lineStart: function() {
        lines.push(line = []);
      },
      point: function(, ) {
        line.push([ ,  ]);
      },
      lineEnd: d3_noop,
      buffer: function() {
        var buffer = lines;
        lines = [];
        line = null;
        return buffer;
      },
      rejoin: function() {
        if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));
      }
    };
  }
  function d3_geo_clipSort(a, b) {
    return ((a = a.x)[0] < 0 ? a[1] - half -  : half - a[1]) - ((b = b.x)[0] < 0 ? b[1] - half -  : half - b[1]);
  }
  var d3_geo_clipAntimeridian = d3_geo_clip(d3_true, d3_geo_clipAntimeridianLine, d3_geo_clipAntimeridianInterpolate, [ -, - / 2 ]);
  function d3_geo_clipAntimeridianLine(listener) {
    var 0 = NaN, 0 = NaN, s0 = NaN, clean;
    return {
      lineStart: function() {
        listener.lineStart();
        clean = 1;
      },
      point: function(1, 1) {
        var s1 = 1 > 0 ?  : -, d = abs(1 - 0);
        if (abs(d - ) < ) {
          listener.point(0, 0 = (0 + 1) / 2 > 0 ? half : -half);
          listener.point(s0, 0);
          listener.lineEnd();
          listener.lineStart();
          listener.point(s1, 0);
          listener.point(1, 0);
          clean = 0;
        } else if (s0 !== s1 && d >= ) {
          if (abs(0 - s0) < ) 0 -= s0 * ;
          if (abs(1 - s1) < ) 1 -= s1 * ;
          0 = d3_geo_clipAntimeridianIntersect(0, 0, 1, 1);
          listener.point(s0, 0);
          listener.lineEnd();
          listener.lineStart();
          listener.point(s1, 0);
          clean = 0;
        }
        listener.point(0 = 1, 0 = 1);
        s0 = s1;
      },
      lineEnd: function() {
        listener.lineEnd();
        0 = 0 = NaN;
      },
      clean: function() {
        return 2 - clean;
      }
    };
  }
  function d3_geo_clipAntimeridianIntersect(0, 0, 1, 1) {
    var cos0, cos1, sin0_1 = Math.sin(0 - 1);
    return abs(sin0_1) >  ? Math.atan((Math.sin(0) * (cos1 = Math.cos(1)) * Math.sin(1) - Math.sin(1) * (cos0 = Math.cos(0)) * Math.sin(0)) / (cos0 * cos1 * sin0_1)) : (0 + 1) / 2;
  }
  function d3_geo_clipAntimeridianInterpolate(from, to, direction, listener) {
    var ;
    if (from == null) {
       = direction * half;
      listener.point(-, );
      listener.point(0, );
      listener.point(, );
      listener.point(, 0);
      listener.point(, -);
      listener.point(0, -);
      listener.point(-, -);
      listener.point(-, 0);
      listener.point(-, );
    } else if (abs(from[0] - to[0]) > ) {
      var s = from[0] < to[0] ?  : -;
       = direction * s / 2;
      listener.point(-s, );
      listener.point(0, );
      listener.point(s, );
    } else {
      listener.point(to[0], to[1]);
    }
  }
  function d3_geo_pointInPolygon(point, polygon) {
    var meridian = point[0], parallel = point[1], meridianNormal = [ Math.sin(meridian), -Math.cos(meridian), 0 ], polarAngle = 0, winding = 0;
    d3_geo_areaRingSum.reset();
    for (var i = 0, n = polygon.length; i < n; ++i) {
      var ring = polygon[i], m = ring.length;
      if (!m) continue;
      var point0 = ring[0], 0 = point0[0], 0 = point0[1] / 2 +  / 4, sin0 = Math.sin(0), cos0 = Math.cos(0), j = 1;
      while (true) {
        if (j === m) j = 0;
        point = ring[j];
        var  = point[0],  = point[1] / 2 +  / 4, sin = Math.sin(), cos = Math.cos(), d =  - 0, sd = d >= 0 ? 1 : -1, ad = sd * d, antimeridian = ad > , k = sin0 * sin;
        d3_geo_areaRingSum.add(Math.atan2(k * sd * Math.sin(ad), cos0 * cos + k * Math.cos(ad)));
        polarAngle += antimeridian ? d + sd *  : d;
        if (antimeridian ^ 0 >= meridian ^  >= meridian) {
          var arc = d3_geo_cartesianCross(d3_geo_cartesian(point0), d3_geo_cartesian(point));
          d3_geo_cartesianNormalize(arc);
          var intersection = d3_geo_cartesianCross(meridianNormal, arc);
          d3_geo_cartesianNormalize(intersection);
          var arc = (antimeridian ^ d >= 0 ? -1 : 1) * d3_asin(intersection[2]);
          if (parallel > arc || parallel === arc && (arc[0] || arc[1])) {
            winding += antimeridian ^ d >= 0 ? 1 : -1;
          }
        }
        if (!j++) break;
        0 = , sin0 = sin, cos0 = cos, point0 = point;
      }
    }
    return (polarAngle < - || polarAngle <  && d3_geo_areaRingSum < -) ^ winding & 1;
  }
  function d3_geo_clipCircle(radius) {
    var cr = Math.cos(radius), smallRadius = cr > 0, notHemisphere = abs(cr) > , interpolate = d3_geo_circleInterpolate(radius, 6 * d3_radians);
    return d3_geo_clip(visible, clipLine, interpolate, smallRadius ? [ 0, -radius ] : [ -, radius -  ]);
    function visible(, ) {
      return Math.cos() * Math.cos() > cr;
    }
    function clipLine(listener) {
      var point0, c0, v0, v00, clean;
      return {
        lineStart: function() {
          v00 = v0 = false;
          clean = 1;
        },
        point: function(, ) {
          var point1 = [ ,  ], point2, v = visible(, ), c = smallRadius ? v ? 0 : code(, ) : v ? code( + ( < 0 ?  : -), ) : 0;
          if (!point0 && (v00 = v0 = v)) listener.lineStart();
          if (v !== v0) {
            point2 = intersect(point0, point1);
            if (d3_geo_sphericalEqual(point0, point2) || d3_geo_sphericalEqual(point1, point2)) {
              point1[0] += ;
              point1[1] += ;
              v = visible(point1[0], point1[1]);
            }
          }
          if (v !== v0) {
            clean = 0;
            if (v) {
              listener.lineStart();
              point2 = intersect(point1, point0);
              listener.point(point2[0], point2[1]);
            } else {
              point2 = intersect(point0, point1);
              listener.point(point2[0], point2[1]);
              listener.lineEnd();
            }
            point0 = point2;
          } else if (notHemisphere && point0 && smallRadius ^ v) {
            var t;
            if (!(c & c0) && (t = intersect(point1, point0, true))) {
              clean = 0;
              if (smallRadius) {
                listener.lineStart();
                listener.point(t[0][0], t[0][1]);
                listener.point(t[1][0], t[1][1]);
                listener.lineEnd();
              } else {
                listener.point(t[1][0], t[1][1]);
                listener.lineEnd();
                listener.lineStart();
                listener.point(t[0][0], t[0][1]);
              }
            }
          }
          if (v && (!point0 || !d3_geo_sphericalEqual(point0, point1))) {
            listener.point(point1[0], point1[1]);
          }
          point0 = point1, v0 = v, c0 = c;
        },
        lineEnd: function() {
          if (v0) listener.lineEnd();
          point0 = null;
        },
        clean: function() {
          return clean | (v00 && v0) << 1;
        }
      };
    }
    function intersect(a, b, two) {
      var pa = d3_geo_cartesian(a), pb = d3_geo_cartesian(b);
      var n1 = [ 1, 0, 0 ], n2 = d3_geo_cartesianCross(pa, pb), n2n2 = d3_geo_cartesianDot(n2, n2), n1n2 = n2[0], determinant = n2n2 - n1n2 * n1n2;
      if (!determinant) return !two && a;
      var c1 = cr * n2n2 / determinant, c2 = -cr * n1n2 / determinant, n1xn2 = d3_geo_cartesianCross(n1, n2), A = d3_geo_cartesianScale(n1, c1), B = d3_geo_cartesianScale(n2, c2);
      d3_geo_cartesianAdd(A, B);
      var u = n1xn2, w = d3_geo_cartesianDot(A, u), uu = d3_geo_cartesianDot(u, u), t2 = w * w - uu * (d3_geo_cartesianDot(A, A) - 1);
      if (t2 < 0) return;
      var t = Math.sqrt(t2), q = d3_geo_cartesianScale(u, (-w - t) / uu);
      d3_geo_cartesianAdd(q, A);
      q = d3_geo_spherical(q);
      if (!two) return q;
      var 0 = a[0], 1 = b[0], 0 = a[1], 1 = b[1], z;
      if (1 < 0) z = 0, 0 = 1, 1 = z;
      var  = 1 - 0, polar = abs( - ) < , meridian = polar ||  < ;
      if (!polar && 1 < 0) z = 0, 0 = 1, 1 = z;
      if (meridian ? polar ? 0 + 1 > 0 ^ q[1] < (abs(q[0] - 0) <  ? 0 : 1) : 0 <= q[1] && q[1] <= 1 :  >  ^ (0 <= q[0] && q[0] <= 1)) {
        var q1 = d3_geo_cartesianScale(u, (-w + t) / uu);
        d3_geo_cartesianAdd(q1, A);
        return [ q, d3_geo_spherical(q1) ];
      }
    }
    function code(, ) {
      var r = smallRadius ? radius :  - radius, code = 0;
      if ( < -r) code |= 1; else if ( > r) code |= 2;
      if ( < -r) code |= 4; else if ( > r) code |= 8;
      return code;
    }
  }
  function d3_geom_clipLine(x0, y0, x1, y1) {
    return function(line) {
      var a = line.a, b = line.b, ax = a.x, ay = a.y, bx = b.x, by = b.y, t0 = 0, t1 = 1, dx = bx - ax, dy = by - ay, r;
      r = x0 - ax;
      if (!dx && r > 0) return;
      r /= dx;
      if (dx < 0) {
        if (r < t0) return;
        if (r < t1) t1 = r;
      } else if (dx > 0) {
        if (r > t1) return;
        if (r > t0) t0 = r;
      }
      r = x1 - ax;
      if (!dx && r < 0) return;
      r /= dx;
      if (dx < 0) {
        if (r > t1) return;
        if (r > t0) t0 = r;
      } else if (dx > 0) {
        if (r < t0) return;
        if (r < t1) t1 = r;
      }
      r = y0 - ay;
      if (!dy && r > 0) return;
      r /= dy;
      if (dy < 0) {
        if (r < t0) return;
        if (r < t1) t1 = r;
      } else if (dy > 0) {
        if (r > t1) return;
        if (r > t0) t0 = r;
      }
      r = y1 - ay;
      if (!dy && r < 0) return;
      r /= dy;
      if (dy < 0) {
        if (r > t1) return;
        if (r > t0) t0 = r;
      } else if (dy > 0) {
        if (r < t0) return;
        if (r < t1) t1 = r;
      }
      if (t0 > 0) line.a = {
        x: ax + t0 * dx,
        y: ay + t0 * dy
      };
      if (t1 < 1) line.b = {
        x: ax + t1 * dx,
        y: ay + t1 * dy
      };
      return line;
    };
  }
  var d3_geo_clipExtentMAX = 1e9;
  d3.geo.clipExtent = function() {
    var x0, y0, x1, y1, stream, clip, clipExtent = {
      stream: function(output) {
        if (stream) stream.valid = false;
        stream = clip(output);
        stream.valid = true;
        return stream;
      },
      extent: function(_) {
        if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];
        clip = d3_geo_clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]);
        if (stream) stream.valid = false, stream = null;
        return clipExtent;
      }
    };
    return clipExtent.extent([ [ 0, 0 ], [ 960, 500 ] ]);
  };
  function d3_geo_clipExtent(x0, y0, x1, y1) {
    return function(listener) {
      var listener_ = listener, bufferListener = d3_geo_clipBufferListener(), clipLine = d3_geom_clipLine(x0, y0, x1, y1), segments, polygon, ring;
      var clip = {
        point: point,
        lineStart: lineStart,
        lineEnd: lineEnd,
        polygonStart: function() {
          listener = bufferListener;
          segments = [];
          polygon = [];
          clean = true;
        },
        polygonEnd: function() {
          listener = listener_;
          segments = d3.merge(segments);
          var clipStartInside = insidePolygon([ x0, y1 ]), inside = clean && clipStartInside, visible = segments.length;
          if (inside || visible) {
            listener.polygonStart();
            if (inside) {
              listener.lineStart();
              interpolate(null, null, 1, listener);
              listener.lineEnd();
            }
            if (visible) {
              d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener);
            }
            listener.polygonEnd();
          }
          segments = polygon = ring = null;
        }
      };
      function insidePolygon(p) {
        var wn = 0, n = polygon.length, y = p[1];
        for (var i = 0; i < n; ++i) {
          for (var j = 1, v = polygon[i], m = v.length, a = v[0], b; j < m; ++j) {
            b = v[j];
            if (a[1] <= y) {
              if (b[1] > y && d3_cross2d(a, b, p) > 0) ++wn;
            } else {
              if (b[1] <= y && d3_cross2d(a, b, p) < 0) --wn;
            }
            a = b;
          }
        }
        return wn !== 0;
      }
      function interpolate(from, to, direction, listener) {
        var a = 0, a1 = 0;
        if (from == null || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoints(from, to) < 0 ^ direction > 0) {
          do {
            listener.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);
          } while ((a = (a + direction + 4) % 4) !== a1);
        } else {
          listener.point(to[0], to[1]);
        }
      }
      function pointVisible(x, y) {
        return x0 <= x && x <= x1 && y0 <= y && y <= y1;
      }
      function point(x, y) {
        if (pointVisible(x, y)) listener.point(x, y);
      }
      var x__, y__, v__, x_, y_, v_, first, clean;
      function lineStart() {
        clip.point = linePoint;
        if (polygon) polygon.push(ring = []);
        first = true;
        v_ = false;
        x_ = y_ = NaN;
      }
      function lineEnd() {
        if (segments) {
          linePoint(x__, y__);
          if (v__ && v_) bufferListener.rejoin();
          segments.push(bufferListener.buffer());
        }
        clip.point = point;
        if (v_) listener.lineEnd();
      }
      function linePoint(x, y) {
        x = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, x));
        y = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, y));
        var v = pointVisible(x, y);
        if (polygon) ring.push([ x, y ]);
        if (first) {
          x__ = x, y__ = y, v__ = v;
          first = false;
          if (v) {
            listener.lineStart();
            listener.point(x, y);
          }
        } else {
          if (v && v_) listener.point(x, y); else {
            var l = {
              a: {
                x: x_,
                y: y_
              },
              b: {
                x: x,
                y: y
              }
            };
            if (clipLine(l)) {
              if (!v_) {
                listener.lineStart();
                listener.point(l.a.x, l.a.y);
              }
              listener.point(l.b.x, l.b.y);
              if (!v) listener.lineEnd();
              clean = false;
            } else if (v) {
              listener.lineStart();
              listener.point(x, y);
              clean = false;
            }
          }
        }
        x_ = x, y_ = y, v_ = v;
      }
      return clip;
    };
    function corner(p, direction) {
      return abs(p[0] - x0) <  ? direction > 0 ? 0 : 3 : abs(p[0] - x1) <  ? direction > 0 ? 2 : 1 : abs(p[1] - y0) <  ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2;
    }
    function compare(a, b) {
      return comparePoints(a.x, b.x);
    }
    function comparePoints(a, b) {
      var ca = corner(a, 1), cb = corner(b, 1);
      return ca !== cb ? ca - cb : ca === 0 ? b[1] - a[1] : ca === 1 ? a[0] - b[0] : ca === 2 ? a[1] - b[1] : b[0] - a[0];
    }
  }
  function d3_geo_conic(projectAt) {
    var 0 = 0, 1 =  / 3, m = d3_geo_projectionMutator(projectAt), p = m(0, 1);
    p.parallels = function(_) {
      if (!arguments.length) return [ 0 /  * 180, 1 /  * 180 ];
      return m(0 = _[0] *  / 180, 1 = _[1] *  / 180);
    };
    return p;
  }
  function d3_geo_conicEqualArea(0, 1) {
    var sin0 = Math.sin(0), n = (sin0 + Math.sin(1)) / 2, C = 1 + sin0 * (2 * n - sin0), 0 = Math.sqrt(C) / n;
    function forward(, ) {
      var  = Math.sqrt(C - 2 * n * Math.sin()) / n;
      return [  * Math.sin( *= n), 0 -  * Math.cos() ];
    }
    forward.invert = function(x, y) {
      var 0_y = 0 - y;
      return [ Math.atan2(x, 0_y) / n, d3_asin((C - (x * x + 0_y * 0_y) * n * n) / (2 * n)) ];
    };
    return forward;
  }
  (d3.geo.conicEqualArea = function() {
    return d3_geo_conic(d3_geo_conicEqualArea);
  }).raw = d3_geo_conicEqualArea;
  d3.geo.albers = function() {
    return d3.geo.conicEqualArea().rotate([ 96, 0 ]).center([ -.6, 38.7 ]).parallels([ 29.5, 45.5 ]).scale(1070);
  };
  d3.geo.albersUsa = function() {
    var lower48 = d3.geo.albers();
    var alaska = d3.geo.conicEqualArea().rotate([ 154, 0 ]).center([ -2, 58.5 ]).parallels([ 55, 65 ]);
    var hawaii = d3.geo.conicEqualArea().rotate([ 157, 0 ]).center([ -3, 19.9 ]).parallels([ 8, 18 ]);
    var point, pointStream = {
      point: function(x, y) {
        point = [ x, y ];
      }
    }, lower48Point, alaskaPoint, hawaiiPoint;
    function albersUsa(coordinates) {
      var x = coordinates[0], y = coordinates[1];
      point = null;
      (lower48Point(x, y), point) || (alaskaPoint(x, y), point) || hawaiiPoint(x, y);
      return point;
    }
    albersUsa.invert = function(coordinates) {
      var k = lower48.scale(), t = lower48.translate(), x = (coordinates[0] - t[0]) / k, y = (coordinates[1] - t[1]) / k;
      return (y >= .12 && y < .234 && x >= -.425 && x < -.214 ? alaska : y >= .166 && y < .234 && x >= -.214 && x < -.115 ? hawaii : lower48).invert(coordinates);
    };
    albersUsa.stream = function(stream) {
      var lower48Stream = lower48.stream(stream), alaskaStream = alaska.stream(stream), hawaiiStream = hawaii.stream(stream);
      return {
        point: function(x, y) {
          lower48Stream.point(x, y);
          alaskaStream.point(x, y);
          hawaiiStream.point(x, y);
        },
        sphere: function() {
          lower48Stream.sphere();
          alaskaStream.sphere();
          hawaiiStream.sphere();
        },
        lineStart: function() {
          lower48Stream.lineStart();
          alaskaStream.lineStart();
          hawaiiStream.lineStart();
        },
        lineEnd: function() {
          lower48Stream.lineEnd();
          alaskaStream.lineEnd();
          hawaiiStream.lineEnd();
        },
        polygonStart: function() {
          lower48Stream.polygonStart();
          alaskaStream.polygonStart();
          hawaiiStream.polygonStart();
        },
        polygonEnd: function() {
          lower48Stream.polygonEnd();
          alaskaStream.polygonEnd();
          hawaiiStream.polygonEnd();
        }
      };
    };
    albersUsa.precision = function(_) {
      if (!arguments.length) return lower48.precision();
      lower48.precision(_);
      alaska.precision(_);
      hawaii.precision(_);
      return albersUsa;
    };
    albersUsa.scale = function(_) {
      if (!arguments.length) return lower48.scale();
      lower48.scale(_);
      alaska.scale(_ * .35);
      hawaii.scale(_);
      return albersUsa.translate(lower48.translate());
    };
    albersUsa.translate = function(_) {
      if (!arguments.length) return lower48.translate();
      var k = lower48.scale(), x = +_[0], y = +_[1];
      lower48Point = lower48.translate(_).clipExtent([ [ x - .455 * k, y - .238 * k ], [ x + .455 * k, y + .238 * k ] ]).stream(pointStream).point;
      alaskaPoint = alaska.translate([ x - .307 * k, y + .201 * k ]).clipExtent([ [ x - .425 * k + , y + .12 * k +  ], [ x - .214 * k - , y + .234 * k -  ] ]).stream(pointStream).point;
      hawaiiPoint = hawaii.translate([ x - .205 * k, y + .212 * k ]).clipExtent([ [ x - .214 * k + , y + .166 * k +  ], [ x - .115 * k - , y + .234 * k -  ] ]).stream(pointStream).point;
      return albersUsa;
    };
    return albersUsa.scale(1070);
  };
  var d3_geo_pathAreaSum, d3_geo_pathAreaPolygon, d3_geo_pathArea = {
    point: d3_noop,
    lineStart: d3_noop,
    lineEnd: d3_noop,
    polygonStart: function() {
      d3_geo_pathAreaPolygon = 0;
      d3_geo_pathArea.lineStart = d3_geo_pathAreaRingStart;
    },
    polygonEnd: function() {
      d3_geo_pathArea.lineStart = d3_geo_pathArea.lineEnd = d3_geo_pathArea.point = d3_noop;
      d3_geo_pathAreaSum += abs(d3_geo_pathAreaPolygon / 2);
    }
  };
  function d3_geo_pathAreaRingStart() {
    var x00, y00, x0, y0;
    d3_geo_pathArea.point = function(x, y) {
      d3_geo_pathArea.point = nextPoint;
      x00 = x0 = x, y00 = y0 = y;
    };
    function nextPoint(x, y) {
      d3_geo_pathAreaPolygon += y0 * x - x0 * y;
      x0 = x, y0 = y;
    }
    d3_geo_pathArea.lineEnd = function() {
      nextPoint(x00, y00);
    };
  }
  var d3_geo_pathBoundsX0, d3_geo_pathBoundsY0, d3_geo_pathBoundsX1, d3_geo_pathBoundsY1;
  var d3_geo_pathBounds = {
    point: d3_geo_pathBoundsPoint,
    lineStart: d3_noop,
    lineEnd: d3_noop,
    polygonStart: d3_noop,
    polygonEnd: d3_noop
  };
  function d3_geo_pathBoundsPoint(x, y) {
    if (x < d3_geo_pathBoundsX0) d3_geo_pathBoundsX0 = x;
    if (x > d3_geo_pathBoundsX1) d3_geo_pathBoundsX1 = x;
    if (y < d3_geo_pathBoundsY0) d3_geo_pathBoundsY0 = y;
    if (y > d3_geo_pathBoundsY1) d3_geo_pathBoundsY1 = y;
  }
  function d3_geo_pathBuffer() {
    var pointCircle = d3_geo_pathBufferCircle(4.5), buffer = [];
    var stream = {
      point: point,
      lineStart: function() {
        stream.point = pointLineStart;
      },
      lineEnd: lineEnd,
      polygonStart: function() {
        stream.lineEnd = lineEndPolygon;
      },
      polygonEnd: function() {
        stream.lineEnd = lineEnd;
        stream.point = point;
      },
      pointRadius: function(_) {
        pointCircle = d3_geo_pathBufferCircle(_);
        return stream;
      },
      result: function() {
        if (buffer.length) {
          var result = buffer.join("");
          buffer = [];
          return result;
        }
      }
    };
    function point(x, y) {
      buffer.push("M", x, ",", y, pointCircle);
    }
    function pointLineStart(x, y) {
      buffer.push("M", x, ",", y);
      stream.point = pointLine;
    }
    function pointLine(x, y) {
      buffer.push("L", x, ",", y);
    }
    function lineEnd() {
      stream.point = point;
    }
    function lineEndPolygon() {
      buffer.push("Z");
    }
    return stream;
  }
  function d3_geo_pathBufferCircle(radius) {
    return "m0," + radius + "a" + radius + "," + radius + " 0 1,1 0," + -2 * radius + "a" + radius + "," + radius + " 0 1,1 0," + 2 * radius + "z";
  }
  var d3_geo_pathCentroid = {
    point: d3_geo_pathCentroidPoint,
    lineStart: d3_geo_pathCentroidLineStart,
    lineEnd: d3_geo_pathCentroidLineEnd,
    polygonStart: function() {
      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidRingStart;
    },
    polygonEnd: function() {
      d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;
      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidLineStart;
      d3_geo_pathCentroid.lineEnd = d3_geo_pathCentroidLineEnd;
    }
  };
  function d3_geo_pathCentroidPoint(x, y) {
    d3_geo_centroidX0 += x;
    d3_geo_centroidY0 += y;
    ++d3_geo_centroidZ0;
  }
  function d3_geo_pathCentroidLineStart() {
    var x0, y0;
    d3_geo_pathCentroid.point = function(x, y) {
      d3_geo_pathCentroid.point = nextPoint;
      d3_geo_pathCentroidPoint(x0 = x, y0 = y);
    };
    function nextPoint(x, y) {
      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);
      d3_geo_centroidX1 += z * (x0 + x) / 2;
      d3_geo_centroidY1 += z * (y0 + y) / 2;
      d3_geo_centroidZ1 += z;
      d3_geo_pathCentroidPoint(x0 = x, y0 = y);
    }
  }
  function d3_geo_pathCentroidLineEnd() {
    d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;
  }
  function d3_geo_pathCentroidRingStart() {
    var x00, y00, x0, y0;
    d3_geo_pathCentroid.point = function(x, y) {
      d3_geo_pathCentroid.point = nextPoint;
      d3_geo_pathCentroidPoint(x00 = x0 = x, y00 = y0 = y);
    };
    function nextPoint(x, y) {
      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);
      d3_geo_centroidX1 += z * (x0 + x) / 2;
      d3_geo_centroidY1 += z * (y0 + y) / 2;
      d3_geo_centroidZ1 += z;
      z = y0 * x - x0 * y;
      d3_geo_centroidX2 += z * (x0 + x);
      d3_geo_centroidY2 += z * (y0 + y);
      d3_geo_centroidZ2 += z * 3;
      d3_geo_pathCentroidPoint(x0 = x, y0 = y);
    }
    d3_geo_pathCentroid.lineEnd = function() {
      nextPoint(x00, y00);
    };
  }
  function d3_geo_pathContext(context) {
    var pointRadius = 4.5;
    var stream = {
      point: point,
      lineStart: function() {
        stream.point = pointLineStart;
      },
      lineEnd: lineEnd,
      polygonStart: function() {
        stream.lineEnd = lineEndPolygon;
      },
      polygonEnd: function() {
        stream.lineEnd = lineEnd;
        stream.point = point;
      },
      pointRadius: function(_) {
        pointRadius = _;
        return stream;
      },
      result: d3_noop
    };
    function point(x, y) {
      context.moveTo(x + pointRadius, y);
      context.arc(x, y, pointRadius, 0, );
    }
    function pointLineStart(x, y) {
      context.moveTo(x, y);
      stream.point = pointLine;
    }
    function pointLine(x, y) {
      context.lineTo(x, y);
    }
    function lineEnd() {
      stream.point = point;
    }
    function lineEndPolygon() {
      context.closePath();
    }
    return stream;
  }
  function d3_geo_resample(project) {
    var 2 = .5, cosMinDistance = Math.cos(30 * d3_radians), maxDepth = 16;
    function resample(stream) {
      return (maxDepth ? resampleRecursive : resampleNone)(stream);
    }
    function resampleNone(stream) {
      return d3_geo_transformPoint(stream, function(x, y) {
        x = project(x, y);
        stream.point(x[0], x[1]);
      });
    }
    function resampleRecursive(stream) {
      var 00, 00, x00, y00, a00, b00, c00, 0, x0, y0, a0, b0, c0;
      var resample = {
        point: point,
        lineStart: lineStart,
        lineEnd: lineEnd,
        polygonStart: function() {
          stream.polygonStart();
          resample.lineStart = ringStart;
        },
        polygonEnd: function() {
          stream.polygonEnd();
          resample.lineStart = lineStart;
        }
      };
      function point(x, y) {
        x = project(x, y);
        stream.point(x[0], x[1]);
      }
      function lineStart() {
        x0 = NaN;
        resample.point = linePoint;
        stream.lineStart();
      }
      function linePoint(, ) {
        var c = d3_geo_cartesian([ ,  ]), p = project(, );
        resampleLineTo(x0, y0, 0, a0, b0, c0, x0 = p[0], y0 = p[1], 0 = , a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);
        stream.point(x0, y0);
      }
      function lineEnd() {
        resample.point = point;
        stream.lineEnd();
      }
      function ringStart() {
        lineStart();
        resample.point = ringPoint;
        resample.lineEnd = ringEnd;
      }
      function ringPoint(, ) {
        linePoint(00 = , 00 = ), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;
        resample.point = linePoint;
      }
      function ringEnd() {
        resampleLineTo(x0, y0, 0, a0, b0, c0, x00, y00, 00, a00, b00, c00, maxDepth, stream);
        resample.lineEnd = lineEnd;
        lineEnd();
      }
      return resample;
    }
    function resampleLineTo(x0, y0, 0, a0, b0, c0, x1, y1, 1, a1, b1, c1, depth, stream) {
      var dx = x1 - x0, dy = y1 - y0, d2 = dx * dx + dy * dy;
      if (d2 > 4 * 2 && depth--) {
        var a = a0 + a1, b = b0 + b1, c = c0 + c1, m = Math.sqrt(a * a + b * b + c * c), 2 = Math.asin(c /= m), 2 = abs(abs(c) - 1) <  || abs(0 - 1) <  ? (0 + 1) / 2 : Math.atan2(b, a), p = project(2, 2), x2 = p[0], y2 = p[1], dx2 = x2 - x0, dy2 = y2 - y0, dz = dy * dx2 - dx * dy2;
        if (dz * dz / d2 > 2 || abs((dx * dx2 + dy * dy2) / d2 - .5) > .3 || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) {
          resampleLineTo(x0, y0, 0, a0, b0, c0, x2, y2, 2, a /= m, b /= m, c, depth, stream);
          stream.point(x2, y2);
          resampleLineTo(x2, y2, 2, a, b, c, x1, y1, 1, a1, b1, c1, depth, stream);
        }
      }
    }
    resample.precision = function(_) {
      if (!arguments.length) return Math.sqrt(2);
      maxDepth = (2 = _ * _) > 0 && 16;
      return resample;
    };
    return resample;
  }
  d3.geo.path = function() {
    var pointRadius = 4.5, projection, context, projectStream, contextStream, cacheStream;
    function path(object) {
      if (object) {
        if (typeof pointRadius === "function") contextStream.pointRadius(+pointRadius.apply(this, arguments));
        if (!cacheStream || !cacheStream.valid) cacheStream = projectStream(contextStream);
        d3.geo.stream(object, cacheStream);
      }
      return contextStream.result();
    }
    path.area = function(object) {
      d3_geo_pathAreaSum = 0;
      d3.geo.stream(object, projectStream(d3_geo_pathArea));
      return d3_geo_pathAreaSum;
    };
    path.centroid = function(object) {
      d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;
      d3.geo.stream(object, projectStream(d3_geo_pathCentroid));
      return d3_geo_centroidZ2 ? [ d3_geo_centroidX2 / d3_geo_centroidZ2, d3_geo_centroidY2 / d3_geo_centroidZ2 ] : d3_geo_centroidZ1 ? [ d3_geo_centroidX1 / d3_geo_centroidZ1, d3_geo_centroidY1 / d3_geo_centroidZ1 ] : d3_geo_centroidZ0 ? [ d3_geo_centroidX0 / d3_geo_centroidZ0, d3_geo_centroidY0 / d3_geo_centroidZ0 ] : [ NaN, NaN ];
    };
    path.bounds = function(object) {
      d3_geo_pathBoundsX1 = d3_geo_pathBoundsY1 = -(d3_geo_pathBoundsX0 = d3_geo_pathBoundsY0 = Infinity);
      d3.geo.stream(object, projectStream(d3_geo_pathBounds));
      return [ [ d3_geo_pathBoundsX0, d3_geo_pathBoundsY0 ], [ d3_geo_pathBoundsX1, d3_geo_pathBoundsY1 ] ];
    };
    path.projection = function(_) {
      if (!arguments.length) return projection;
      projectStream = (projection = _) ? _.stream || d3_geo_pathProjectStream(_) : d3_identity;
      return reset();
    };
    path.context = function(_) {
      if (!arguments.length) return context;
      contextStream = (context = _) == null ? new d3_geo_pathBuffer() : new d3_geo_pathContext(_);
      if (typeof pointRadius !== "function") contextStream.pointRadius(pointRadius);
      return reset();
    };
    path.pointRadius = function(_) {
      if (!arguments.length) return pointRadius;
      pointRadius = typeof _ === "function" ? _ : (contextStream.pointRadius(+_), +_);
      return path;
    };
    function reset() {
      cacheStream = null;
      return path;
    }
    return path.projection(d3.geo.albersUsa()).context(null);
  };
  function d3_geo_pathProjectStream(project) {
    var resample = d3_geo_resample(function(x, y) {
      return project([ x * d3_degrees, y * d3_degrees ]);
    });
    return function(stream) {
      return d3_geo_projectionRadians(resample(stream));
    };
  }
  d3.geo.transform = function(methods) {
    return {
      stream: function(stream) {
        var transform = new d3_geo_transform(stream);
        for (var k in methods) transform[k] = methods[k];
        return transform;
      }
    };
  };
  function d3_geo_transform(stream) {
    this.stream = stream;
  }
  d3_geo_transform.prototype = {
    point: function(x, y) {
      this.stream.point(x, y);
    },
    sphere: function() {
      this.stream.sphere();
    },
    lineStart: function() {
      this.stream.lineStart();
    },
    lineEnd: function() {
      this.stream.lineEnd();
    },
    polygonStart: function() {
      this.stream.polygonStart();
    },
    polygonEnd: function() {
      this.stream.polygonEnd();
    }
  };
  function d3_geo_transformPoint(stream, point) {
    return {
      point: point,
      sphere: function() {
        stream.sphere();
      },
      lineStart: function() {
        stream.lineStart();
      },
      lineEnd: function() {
        stream.lineEnd();
      },
      polygonStart: function() {
        stream.polygonStart();
      },
      polygonEnd: function() {
        stream.polygonEnd();
      }
    };
  }
  d3.geo.projection = d3_geo_projection;
  d3.geo.projectionMutator = d3_geo_projectionMutator;
  function d3_geo_projection(project) {
    return d3_geo_projectionMutator(function() {
      return project;
    })();
  }
  function d3_geo_projectionMutator(projectAt) {
    var project, rotate, projectRotate, projectResample = d3_geo_resample(function(x, y) {
      x = project(x, y);
      return [ x[0] * k + x, y - x[1] * k ];
    }), k = 150, x = 480, y = 250,  = 0,  = 0,  = 0,  = 0,  = 0, x, y, preclip = d3_geo_clipAntimeridian, postclip = d3_identity, clipAngle = null, clipExtent = null, stream;
    function projection(point) {
      point = projectRotate(point[0] * d3_radians, point[1] * d3_radians);
      return [ point[0] * k + x, y - point[1] * k ];
    }
    function invert(point) {
      point = projectRotate.invert((point[0] - x) / k, (y - point[1]) / k);
      return point && [ point[0] * d3_degrees, point[1] * d3_degrees ];
    }
    projection.stream = function(output) {
      if (stream) stream.valid = false;
      stream = d3_geo_projectionRadians(preclip(rotate, projectResample(postclip(output))));
      stream.valid = true;
      return stream;
    };
    projection.clipAngle = function(_) {
      if (!arguments.length) return clipAngle;
      preclip = _ == null ? (clipAngle = _, d3_geo_clipAntimeridian) : d3_geo_clipCircle((clipAngle = +_) * d3_radians);
      return invalidate();
    };
    projection.clipExtent = function(_) {
      if (!arguments.length) return clipExtent;
      clipExtent = _;
      postclip = _ ? d3_geo_clipExtent(_[0][0], _[0][1], _[1][0], _[1][1]) : d3_identity;
      return invalidate();
    };
    projection.scale = function(_) {
      if (!arguments.length) return k;
      k = +_;
      return reset();
    };
    projection.translate = function(_) {
      if (!arguments.length) return [ x, y ];
      x = +_[0];
      y = +_[1];
      return reset();
    };
    projection.center = function(_) {
      if (!arguments.length) return [  * d3_degrees,  * d3_degrees ];
       = _[0] % 360 * d3_radians;
       = _[1] % 360 * d3_radians;
      return reset();
    };
    projection.rotate = function(_) {
      if (!arguments.length) return [  * d3_degrees,  * d3_degrees,  * d3_degrees ];
       = _[0] % 360 * d3_radians;
       = _[1] % 360 * d3_radians;
       = _.length > 2 ? _[2] % 360 * d3_radians : 0;
      return reset();
    };
    d3.rebind(projection, projectResample, "precision");
    function reset() {
      projectRotate = d3_geo_compose(rotate = d3_geo_rotation(, , ), project);
      var center = project(, );
      x = x - center[0] * k;
      y = y + center[1] * k;
      return invalidate();
    }
    function invalidate() {
      if (stream) stream.valid = false, stream = null;
      return projection;
    }
    return function() {
      project = projectAt.apply(this, arguments);
      projection.invert = project.invert && invert;
      return reset();
    };
  }
  function d3_geo_projectionRadians(stream) {
    return d3_geo_transformPoint(stream, function(x, y) {
      stream.point(x * d3_radians, y * d3_radians);
    });
  }
  function d3_geo_equirectangular(, ) {
    return [ ,  ];
  }
  (d3.geo.equirectangular = function() {
    return d3_geo_projection(d3_geo_equirectangular);
  }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular;
  d3.geo.rotation = function(rotate) {
    rotate = d3_geo_rotation(rotate[0] % 360 * d3_radians, rotate[1] * d3_radians, rotate.length > 2 ? rotate[2] * d3_radians : 0);
    function forward(coordinates) {
      coordinates = rotate(coordinates[0] * d3_radians, coordinates[1] * d3_radians);
      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;
    }
    forward.invert = function(coordinates) {
      coordinates = rotate.invert(coordinates[0] * d3_radians, coordinates[1] * d3_radians);
      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;
    };
    return forward;
  };
  function d3_geo_identityRotation(, ) {
    return [  >  ?  -  :  < - ?  +  : ,  ];
  }
  d3_geo_identityRotation.invert = d3_geo_equirectangular;
  function d3_geo_rotation(, , ) {
    return  ?  ||  ? d3_geo_compose(d3_geo_rotation(), d3_geo_rotation(, )) : d3_geo_rotation() :  ||  ? d3_geo_rotation(, ) : d3_geo_identityRotation;
  }
  function d3_geo_forwardRotation() {
    return function(, ) {
      return  += , [  >  ?  -  :  < - ?  +  : ,  ];
    };
  }
  function d3_geo_rotation() {
    var rotation = d3_geo_forwardRotation();
    rotation.invert = d3_geo_forwardRotation(-);
    return rotation;
  }
  function d3_geo_rotation(, ) {
    var cos = Math.cos(), sin = Math.sin(), cos = Math.cos(), sin = Math.sin();
    function rotation(, ) {
      var cos = Math.cos(), x = Math.cos() * cos, y = Math.sin() * cos, z = Math.sin(), k = z * cos + x * sin;
      return [ Math.atan2(y * cos - k * sin, x * cos - z * sin), d3_asin(k * cos + y * sin) ];
    }
    rotation.invert = function(, ) {
      var cos = Math.cos(), x = Math.cos() * cos, y = Math.sin() * cos, z = Math.sin(), k = z * cos - y * sin;
      return [ Math.atan2(y * cos + z * sin, x * cos + k * sin), d3_asin(k * cos - x * sin) ];
    };
    return rotation;
  }
  d3.geo.circle = function() {
    var origin = [ 0, 0 ], angle, precision = 6, interpolate;
    function circle() {
      var center = typeof origin === "function" ? origin.apply(this, arguments) : origin, rotate = d3_geo_rotation(-center[0] * d3_radians, -center[1] * d3_radians, 0).invert, ring = [];
      interpolate(null, null, 1, {
        point: function(x, y) {
          ring.push(x = rotate(x, y));
          x[0] *= d3_degrees, x[1] *= d3_degrees;
        }
      });
      return {
        type: "Polygon",
        coordinates: [ ring ]
      };
    }
    circle.origin = function(x) {
      if (!arguments.length) return origin;
      origin = x;
      return circle;
    };
    circle.angle = function(x) {
      if (!arguments.length) return angle;
      interpolate = d3_geo_circleInterpolate((angle = +x) * d3_radians, precision * d3_radians);
      return circle;
    };
    circle.precision = function(_) {
      if (!arguments.length) return precision;
      interpolate = d3_geo_circleInterpolate(angle * d3_radians, (precision = +_) * d3_radians);
      return circle;
    };
    return circle.angle(90);
  };
  function d3_geo_circleInterpolate(radius, precision) {
    var cr = Math.cos(radius), sr = Math.sin(radius);
    return function(from, to, direction, listener) {
      var step = direction * precision;
      if (from != null) {
        from = d3_geo_circleAngle(cr, from);
        to = d3_geo_circleAngle(cr, to);
        if (direction > 0 ? from < to : from > to) from += direction * ;
      } else {
        from = radius + direction * ;
        to = radius - .5 * step;
      }
      for (var point, t = from; direction > 0 ? t > to : t < to; t -= step) {
        listener.point((point = d3_geo_spherical([ cr, -sr * Math.cos(t), -sr * Math.sin(t) ]))[0], point[1]);
      }
    };
  }
  function d3_geo_circleAngle(cr, point) {
    var a = d3_geo_cartesian(point);
    a[0] -= cr;
    d3_geo_cartesianNormalize(a);
    var angle = d3_acos(-a[1]);
    return ((-a[2] < 0 ? -angle : angle) + 2 * Math.PI - ) % (2 * Math.PI);
  }
  d3.geo.distance = function(a, b) {
    var  = (b[0] - a[0]) * d3_radians, 0 = a[1] * d3_radians, 1 = b[1] * d3_radians, sin = Math.sin(), cos = Math.cos(), sin0 = Math.sin(0), cos0 = Math.cos(0), sin1 = Math.sin(1), cos1 = Math.cos(1), t;
    return Math.atan2(Math.sqrt((t = cos1 * sin) * t + (t = cos0 * sin1 - sin0 * cos1 * cos) * t), sin0 * sin1 + cos0 * cos1 * cos);
  };
  d3.geo.graticule = function() {
    var x1, x0, X1, X0, y1, y0, Y1, Y0, dx = 10, dy = dx, DX = 90, DY = 360, x, y, X, Y, precision = 2.5;
    function graticule() {
      return {
        type: "MultiLineString",
        coordinates: lines()
      };
    }
    function lines() {
      return d3.range(Math.ceil(X0 / DX) * DX, X1, DX).map(X).concat(d3.range(Math.ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(d3.range(Math.ceil(x0 / dx) * dx, x1, dx).filter(function(x) {
        return abs(x % DX) > ;
      }).map(x)).concat(d3.range(Math.ceil(y0 / dy) * dy, y1, dy).filter(function(y) {
        return abs(y % DY) > ;
      }).map(y));
    }
    graticule.lines = function() {
      return lines().map(function(coordinates) {
        return {
          type: "LineString",
          coordinates: coordinates
        };
      });
    };
    graticule.outline = function() {
      return {
        type: "Polygon",
        coordinates: [ X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1)) ]
      };
    };
    graticule.extent = function(_) {
      if (!arguments.length) return graticule.minorExtent();
      return graticule.majorExtent(_).minorExtent(_);
    };
    graticule.majorExtent = function(_) {
      if (!arguments.length) return [ [ X0, Y0 ], [ X1, Y1 ] ];
      X0 = +_[0][0], X1 = +_[1][0];
      Y0 = +_[0][1], Y1 = +_[1][1];
      if (X0 > X1) _ = X0, X0 = X1, X1 = _;
      if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;
      return graticule.precision(precision);
    };
    graticule.minorExtent = function(_) {
      if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];
      x0 = +_[0][0], x1 = +_[1][0];
      y0 = +_[0][1], y1 = +_[1][1];
      if (x0 > x1) _ = x0, x0 = x1, x1 = _;
      if (y0 > y1) _ = y0, y0 = y1, y1 = _;
      return graticule.precision(precision);
    };
    graticule.step = function(_) {
      if (!arguments.length) return graticule.minorStep();
      return graticule.majorStep(_).minorStep(_);
    };
    graticule.majorStep = function(_) {
      if (!arguments.length) return [ DX, DY ];
      DX = +_[0], DY = +_[1];
      return graticule;
    };
    graticule.minorStep = function(_) {
      if (!arguments.length) return [ dx, dy ];
      dx = +_[0], dy = +_[1];
      return graticule;
    };
    graticule.precision = function(_) {
      if (!arguments.length) return precision;
      precision = +_;
      x = d3_geo_graticuleX(y0, y1, 90);
      y = d3_geo_graticuleY(x0, x1, precision);
      X = d3_geo_graticuleX(Y0, Y1, 90);
      Y = d3_geo_graticuleY(X0, X1, precision);
      return graticule;
    };
    return graticule.majorExtent([ [ -180, -90 +  ], [ 180, 90 -  ] ]).minorExtent([ [ -180, -80 -  ], [ 180, 80 +  ] ]);
  };
  function d3_geo_graticuleX(y0, y1, dy) {
    var y = d3.range(y0, y1 - , dy).concat(y1);
    return function(x) {
      return y.map(function(y) {
        return [ x, y ];
      });
    };
  }
  function d3_geo_graticuleY(x0, x1, dx) {
    var x = d3.range(x0, x1 - , dx).concat(x1);
    return function(y) {
      return x.map(function(x) {
        return [ x, y ];
      });
    };
  }
  function d3_source(d) {
    return d.source;
  }
  function d3_target(d) {
    return d.target;
  }
  d3.geo.greatArc = function() {
    var source = d3_source, source_, target = d3_target, target_;
    function greatArc() {
      return {
        type: "LineString",
        coordinates: [ source_ || source.apply(this, arguments), target_ || target.apply(this, arguments) ]
      };
    }
    greatArc.distance = function() {
      return d3.geo.distance(source_ || source.apply(this, arguments), target_ || target.apply(this, arguments));
    };
    greatArc.source = function(_) {
      if (!arguments.length) return source;
      source = _, source_ = typeof _ === "function" ? null : _;
      return greatArc;
    };
    greatArc.target = function(_) {
      if (!arguments.length) return target;
      target = _, target_ = typeof _ === "function" ? null : _;
      return greatArc;
    };
    greatArc.precision = function() {
      return arguments.length ? greatArc : 0;
    };
    return greatArc;
  };
  d3.geo.interpolate = function(source, target) {
    return d3_geo_interpolate(source[0] * d3_radians, source[1] * d3_radians, target[0] * d3_radians, target[1] * d3_radians);
  };
  function d3_geo_interpolate(x0, y0, x1, y1) {
    var cy0 = Math.cos(y0), sy0 = Math.sin(y0), cy1 = Math.cos(y1), sy1 = Math.sin(y1), kx0 = cy0 * Math.cos(x0), ky0 = cy0 * Math.sin(x0), kx1 = cy1 * Math.cos(x1), ky1 = cy1 * Math.sin(x1), d = 2 * Math.asin(Math.sqrt(d3_haversin(y1 - y0) + cy0 * cy1 * d3_haversin(x1 - x0))), k = 1 / Math.sin(d);
    var interpolate = d ? function(t) {
      var B = Math.sin(t *= d) * k, A = Math.sin(d - t) * k, x = A * kx0 + B * kx1, y = A * ky0 + B * ky1, z = A * sy0 + B * sy1;
      return [ Math.atan2(y, x) * d3_degrees, Math.atan2(z, Math.sqrt(x * x + y * y)) * d3_degrees ];
    } : function() {
      return [ x0 * d3_degrees, y0 * d3_degrees ];
    };
    interpolate.distance = d;
    return interpolate;
  }
  d3.geo.length = function(object) {
    d3_geo_lengthSum = 0;
    d3.geo.stream(object, d3_geo_length);
    return d3_geo_lengthSum;
  };
  var d3_geo_lengthSum;
  var d3_geo_length = {
    sphere: d3_noop,
    point: d3_noop,
    lineStart: d3_geo_lengthLineStart,
    lineEnd: d3_noop,
    polygonStart: d3_noop,
    polygonEnd: d3_noop
  };
  function d3_geo_lengthLineStart() {
    var 0, sin0, cos0;
    d3_geo_length.point = function(, ) {
      0 =  * d3_radians, sin0 = Math.sin( *= d3_radians), cos0 = Math.cos();
      d3_geo_length.point = nextPoint;
    };
    d3_geo_length.lineEnd = function() {
      d3_geo_length.point = d3_geo_length.lineEnd = d3_noop;
    };
    function nextPoint(, ) {
      var sin = Math.sin( *= d3_radians), cos = Math.cos(), t = abs(( *= d3_radians) - 0), cos = Math.cos(t);
      d3_geo_lengthSum += Math.atan2(Math.sqrt((t = cos * Math.sin(t)) * t + (t = cos0 * sin - sin0 * cos * cos) * t), sin0 * sin + cos0 * cos * cos);
      0 = , sin0 = sin, cos0 = cos;
    }
  }
  function d3_geo_azimuthal(scale, angle) {
    function azimuthal(, ) {
      var cos = Math.cos(), cos = Math.cos(), k = scale(cos * cos);
      return [ k * cos * Math.sin(), k * Math.sin() ];
    }
    azimuthal.invert = function(x, y) {
      var  = Math.sqrt(x * x + y * y), c = angle(), sinc = Math.sin(c), cosc = Math.cos(c);
      return [ Math.atan2(x * sinc,  * cosc), Math.asin( && y * sinc / ) ];
    };
    return azimuthal;
  }
  var d3_geo_azimuthalEqualArea = d3_geo_azimuthal(function(coscos) {
    return Math.sqrt(2 / (1 + coscos));
  }, function() {
    return 2 * Math.asin( / 2);
  });
  (d3.geo.azimuthalEqualArea = function() {
    return d3_geo_projection(d3_geo_azimuthalEqualArea);
  }).raw = d3_geo_azimuthalEqualArea;
  var d3_geo_azimuthalEquidistant = d3_geo_azimuthal(function(coscos) {
    var c = Math.acos(coscos);
    return c && c / Math.sin(c);
  }, d3_identity);
  (d3.geo.azimuthalEquidistant = function() {
    return d3_geo_projection(d3_geo_azimuthalEquidistant);
  }).raw = d3_geo_azimuthalEquidistant;
  function d3_geo_conicConformal(0, 1) {
    var cos0 = Math.cos(0), t = function() {
      return Math.tan( / 4 +  / 2);
    }, n = 0 === 1 ? Math.sin(0) : Math.log(cos0 / Math.cos(1)) / Math.log(t(1) / t(0)), F = cos0 * Math.pow(t(0), n) / n;
    if (!n) return d3_geo_mercator;
    function forward(, ) {
      if (F > 0) {
        if ( < -half + )  = -half + ;
      } else {
        if ( > half - )  = half - ;
      }
      var  = F / Math.pow(t(), n);
      return [  * Math.sin(n * ), F -  * Math.cos(n * ) ];
    }
    forward.invert = function(x, y) {
      var 0_y = F - y,  = d3_sgn(n) * Math.sqrt(x * x + 0_y * 0_y);
      return [ Math.atan2(x, 0_y) / n, 2 * Math.atan(Math.pow(F / , 1 / n)) - half ];
    };
    return forward;
  }
  (d3.geo.conicConformal = function() {
    return d3_geo_conic(d3_geo_conicConformal);
  }).raw = d3_geo_conicConformal;
  function d3_geo_conicEquidistant(0, 1) {
    var cos0 = Math.cos(0), n = 0 === 1 ? Math.sin(0) : (cos0 - Math.cos(1)) / (1 - 0), G = cos0 / n + 0;
    if (abs(n) < ) return d3_geo_equirectangular;
    function forward(, ) {
      var  = G - ;
      return [  * Math.sin(n * ), G -  * Math.cos(n * ) ];
    }
    forward.invert = function(x, y) {
      var 0_y = G - y;
      return [ Math.atan2(x, 0_y) / n, G - d3_sgn(n) * Math.sqrt(x * x + 0_y * 0_y) ];
    };
    return forward;
  }
  (d3.geo.conicEquidistant = function() {
    return d3_geo_conic(d3_geo_conicEquidistant);
  }).raw = d3_geo_conicEquidistant;
  var d3_geo_gnomonic = d3_geo_azimuthal(function(coscos) {
    return 1 / coscos;
  }, Math.atan);
  (d3.geo.gnomonic = function() {
    return d3_geo_projection(d3_geo_gnomonic);
  }).raw = d3_geo_gnomonic;
  function d3_geo_mercator(, ) {
    return [ , Math.log(Math.tan( / 4 +  / 2)) ];
  }
  d3_geo_mercator.invert = function(x, y) {
    return [ x, 2 * Math.atan(Math.exp(y)) - half ];
  };
  function d3_geo_mercatorProjection(project) {
    var m = d3_geo_projection(project), scale = m.scale, translate = m.translate, clipExtent = m.clipExtent, clipAuto;
    m.scale = function() {
      var v = scale.apply(m, arguments);
      return v === m ? clipAuto ? m.clipExtent(null) : m : v;
    };
    m.translate = function() {
      var v = translate.apply(m, arguments);
      return v === m ? clipAuto ? m.clipExtent(null) : m : v;
    };
    m.clipExtent = function(_) {
      var v = clipExtent.apply(m, arguments);
      if (v === m) {
        if (clipAuto = _ == null) {
          var k =  * scale(), t = translate();
          clipExtent([ [ t[0] - k, t[1] - k ], [ t[0] + k, t[1] + k ] ]);
        }
      } else if (clipAuto) {
        v = null;
      }
      return v;
    };
    return m.clipExtent(null);
  }
  (d3.geo.mercator = function() {
    return d3_geo_mercatorProjection(d3_geo_mercator);
  }).raw = d3_geo_mercator;
  var d3_geo_orthographic = d3_geo_azimuthal(function() {
    return 1;
  }, Math.asin);
  (d3.geo.orthographic = function() {
    return d3_geo_projection(d3_geo_orthographic);
  }).raw = d3_geo_orthographic;
  var d3_geo_stereographic = d3_geo_azimuthal(function(coscos) {
    return 1 / (1 + coscos);
  }, function() {
    return 2 * Math.atan();
  });
  (d3.geo.stereographic = function() {
    return d3_geo_projection(d3_geo_stereographic);
  }).raw = d3_geo_stereographic;
  function d3_geo_transverseMercator(, ) {
    return [ Math.log(Math.tan( / 4 +  / 2)), - ];
  }
  d3_geo_transverseMercator.invert = function(x, y) {
    return [ -y, 2 * Math.atan(Math.exp(x)) - half ];
  };
  (d3.geo.transverseMercator = function() {
    var projection = d3_geo_mercatorProjection(d3_geo_transverseMercator), center = projection.center, rotate = projection.rotate;
    projection.center = function(_) {
      return _ ? center([ -_[1], _[0] ]) : (_ = center(), [ _[1], -_[0] ]);
    };
    projection.rotate = function(_) {
      return _ ? rotate([ _[0], _[1], _.length > 2 ? _[2] + 90 : 90 ]) : (_ = rotate(), 
      [ _[0], _[1], _[2] - 90 ]);
    };
    return rotate([ 0, 0, 90 ]);
  }).raw = d3_geo_transverseMercator;
  d3.geom = {};
  function d3_geom_pointX(d) {
    return d[0];
  }
  function d3_geom_pointY(d) {
    return d[1];
  }
  d3.geom.hull = function(vertices) {
    var x = d3_geom_pointX, y = d3_geom_pointY;
    if (arguments.length) return hull(vertices);
    function hull(data) {
      if (data.length < 3) return [];
      var fx = d3_functor(x), fy = d3_functor(y), i, n = data.length, points = [], flippedPoints = [];
      for (i = 0; i < n; i++) {
        points.push([ +fx.call(this, data[i], i), +fy.call(this, data[i], i), i ]);
      }
      points.sort(d3_geom_hullOrder);
      for (i = 0; i < n; i++) flippedPoints.push([ points[i][0], -points[i][1] ]);
      var upper = d3_geom_hullUpper(points), lower = d3_geom_hullUpper(flippedPoints);
      var skipLeft = lower[0] === upper[0], skipRight = lower[lower.length - 1] === upper[upper.length - 1], polygon = [];
      for (i = upper.length - 1; i >= 0; --i) polygon.push(data[points[upper[i]][2]]);
      for (i = +skipLeft; i < lower.length - skipRight; ++i) polygon.push(data[points[lower[i]][2]]);
      return polygon;
    }
    hull.x = function(_) {
      return arguments.length ? (x = _, hull) : x;
    };
    hull.y = function(_) {
      return arguments.length ? (y = _, hull) : y;
    };
    return hull;
  };
  function d3_geom_hullUpper(points) {
    var n = points.length, hull = [ 0, 1 ], hs = 2;
    for (var i = 2; i < n; i++) {
      while (hs > 1 && d3_cross2d(points[hull[hs - 2]], points[hull[hs - 1]], points[i]) <= 0) --hs;
      hull[hs++] = i;
    }
    return hull.slice(0, hs);
  }
  function d3_geom_hullOrder(a, b) {
    return a[0] - b[0] || a[1] - b[1];
  }
  d3.geom.polygon = function(coordinates) {
    d3_subclass(coordinates, d3_geom_polygonPrototype);
    return coordinates;
  };
  var d3_geom_polygonPrototype = d3.geom.polygon.prototype = [];
  d3_geom_polygonPrototype.area = function() {
    var i = -1, n = this.length, a, b = this[n - 1], area = 0;
    while (++i < n) {
      a = b;
      b = this[i];
      area += a[1] * b[0] - a[0] * b[1];
    }
    return area * .5;
  };
  d3_geom_polygonPrototype.centroid = function(k) {
    var i = -1, n = this.length, x = 0, y = 0, a, b = this[n - 1], c;
    if (!arguments.length) k = -1 / (6 * this.area());
    while (++i < n) {
      a = b;
      b = this[i];
      c = a[0] * b[1] - b[0] * a[1];
      x += (a[0] + b[0]) * c;
      y += (a[1] + b[1]) * c;
    }
    return [ x * k, y * k ];
  };
  d3_geom_polygonPrototype.clip = function(subject) {
    var input, closed = d3_geom_polygonClosed(subject), i = -1, n = this.length - d3_geom_polygonClosed(this), j, m, a = this[n - 1], b, c, d;
    while (++i < n) {
      input = subject.slice();
      subject.length = 0;
      b = this[i];
      c = input[(m = input.length - closed) - 1];
      j = -1;
      while (++j < m) {
        d = input[j];
        if (d3_geom_polygonInside(d, a, b)) {
          if (!d3_geom_polygonInside(c, a, b)) {
            subject.push(d3_geom_polygonIntersect(c, d, a, b));
          }
          subject.push(d);
        } else if (d3_geom_polygonInside(c, a, b)) {
          subject.push(d3_geom_polygonIntersect(c, d, a, b));
        }
        c = d;
      }
      if (closed) subject.push(subject[0]);
      a = b;
    }
    return subject;
  };
  function d3_geom_polygonInside(p, a, b) {
    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0]);
  }
  function d3_geom_polygonIntersect(c, d, a, b) {
    var x1 = c[0], x3 = a[0], x21 = d[0] - x1, x43 = b[0] - x3, y1 = c[1], y3 = a[1], y21 = d[1] - y1, y43 = b[1] - y3, ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);
    return [ x1 + ua * x21, y1 + ua * y21 ];
  }
  function d3_geom_polygonClosed(coordinates) {
    var a = coordinates[0], b = coordinates[coordinates.length - 1];
    return !(a[0] - b[0] || a[1] - b[1]);
  }
  var d3_geom_voronoiEdges, d3_geom_voronoiCells, d3_geom_voronoiBeaches, d3_geom_voronoiBeachPool = [], d3_geom_voronoiFirstCircle, d3_geom_voronoiCircles, d3_geom_voronoiCirclePool = [];
  function d3_geom_voronoiBeach() {
    d3_geom_voronoiRedBlackNode(this);
    this.edge = this.site = this.circle = null;
  }
  function d3_geom_voronoiCreateBeach(site) {
    var beach = d3_geom_voronoiBeachPool.pop() || new d3_geom_voronoiBeach();
    beach.site = site;
    return beach;
  }
  function d3_geom_voronoiDetachBeach(beach) {
    d3_geom_voronoiDetachCircle(beach);
    d3_geom_voronoiBeaches.remove(beach);
    d3_geom_voronoiBeachPool.push(beach);
    d3_geom_voronoiRedBlackNode(beach);
  }
  function d3_geom_voronoiRemoveBeach(beach) {
    var circle = beach.circle, x = circle.x, y = circle.cy, vertex = {
      x: x,
      y: y
    }, previous = beach.P, next = beach.N, disappearing = [ beach ];
    d3_geom_voronoiDetachBeach(beach);
    var lArc = previous;
    while (lArc.circle && abs(x - lArc.circle.x) <  && abs(y - lArc.circle.cy) < ) {
      previous = lArc.P;
      disappearing.unshift(lArc);
      d3_geom_voronoiDetachBeach(lArc);
      lArc = previous;
    }
    disappearing.unshift(lArc);
    d3_geom_voronoiDetachCircle(lArc);
    var rArc = next;
    while (rArc.circle && abs(x - rArc.circle.x) <  && abs(y - rArc.circle.cy) < ) {
      next = rArc.N;
      disappearing.push(rArc);
      d3_geom_voronoiDetachBeach(rArc);
      rArc = next;
    }
    disappearing.push(rArc);
    d3_geom_voronoiDetachCircle(rArc);
    var nArcs = disappearing.length, iArc;
    for (iArc = 1; iArc < nArcs; ++iArc) {
      rArc = disappearing[iArc];
      lArc = disappearing[iArc - 1];
      d3_geom_voronoiSetEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);
    }
    lArc = disappearing[0];
    rArc = disappearing[nArcs - 1];
    rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, rArc.site, null, vertex);
    d3_geom_voronoiAttachCircle(lArc);
    d3_geom_voronoiAttachCircle(rArc);
  }
  function d3_geom_voronoiAddBeach(site) {
    var x = site.x, directrix = site.y, lArc, rArc, dxl, dxr, node = d3_geom_voronoiBeaches._;
    while (node) {
      dxl = d3_geom_voronoiLeftBreakPoint(node, directrix) - x;
      if (dxl > ) node = node.L; else {
        dxr = x - d3_geom_voronoiRightBreakPoint(node, directrix);
        if (dxr > ) {
          if (!node.R) {
            lArc = node;
            break;
          }
          node = node.R;
        } else {
          if (dxl > -) {
            lArc = node.P;
            rArc = node;
          } else if (dxr > -) {
            lArc = node;
            rArc = node.N;
          } else {
            lArc = rArc = node;
          }
          break;
        }
      }
    }
    var newArc = d3_geom_voronoiCreateBeach(site);
    d3_geom_voronoiBeaches.insert(lArc, newArc);
    if (!lArc && !rArc) return;
    if (lArc === rArc) {
      d3_geom_voronoiDetachCircle(lArc);
      rArc = d3_geom_voronoiCreateBeach(lArc.site);
      d3_geom_voronoiBeaches.insert(newArc, rArc);
      newArc.edge = rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);
      d3_geom_voronoiAttachCircle(lArc);
      d3_geom_voronoiAttachCircle(rArc);
      return;
    }
    if (!rArc) {
      newArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);
      return;
    }
    d3_geom_voronoiDetachCircle(lArc);
    d3_geom_voronoiDetachCircle(rArc);
    var lSite = lArc.site, ax = lSite.x, ay = lSite.y, bx = site.x - ax, by = site.y - ay, rSite = rArc.site, cx = rSite.x - ax, cy = rSite.y - ay, d = 2 * (bx * cy - by * cx), hb = bx * bx + by * by, hc = cx * cx + cy * cy, vertex = {
      x: (cy * hb - by * hc) / d + ax,
      y: (bx * hc - cx * hb) / d + ay
    };
    d3_geom_voronoiSetEdgeEnd(rArc.edge, lSite, rSite, vertex);
    newArc.edge = d3_geom_voronoiCreateEdge(lSite, site, null, vertex);
    rArc.edge = d3_geom_voronoiCreateEdge(site, rSite, null, vertex);
    d3_geom_voronoiAttachCircle(lArc);
    d3_geom_voronoiAttachCircle(rArc);
  }
  function d3_geom_voronoiLeftBreakPoint(arc, directrix) {
    var site = arc.site, rfocx = site.x, rfocy = site.y, pby2 = rfocy - directrix;
    if (!pby2) return rfocx;
    var lArc = arc.P;
    if (!lArc) return -Infinity;
    site = lArc.site;
    var lfocx = site.x, lfocy = site.y, plby2 = lfocy - directrix;
    if (!plby2) return lfocx;
    var hl = lfocx - rfocx, aby2 = 1 / pby2 - 1 / plby2, b = hl / plby2;
    if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;
    return (rfocx + lfocx) / 2;
  }
  function d3_geom_voronoiRightBreakPoint(arc, directrix) {
    var rArc = arc.N;
    if (rArc) return d3_geom_voronoiLeftBreakPoint(rArc, directrix);
    var site = arc.site;
    return site.y === directrix ? site.x : Infinity;
  }
  function d3_geom_voronoiCell(site) {
    this.site = site;
    this.edges = [];
  }
  d3_geom_voronoiCell.prototype.prepare = function() {
    var halfEdges = this.edges, iHalfEdge = halfEdges.length, edge;
    while (iHalfEdge--) {
      edge = halfEdges[iHalfEdge].edge;
      if (!edge.b || !edge.a) halfEdges.splice(iHalfEdge, 1);
    }
    halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);
    return halfEdges.length;
  };
  function d3_geom_voronoiCloseCells(extent) {
    var x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], x2, y2, x3, y3, cells = d3_geom_voronoiCells, iCell = cells.length, cell, iHalfEdge, halfEdges, nHalfEdges, start, end;
    while (iCell--) {
      cell = cells[iCell];
      if (!cell || !cell.prepare()) continue;
      halfEdges = cell.edges;
      nHalfEdges = halfEdges.length;
      iHalfEdge = 0;
      while (iHalfEdge < nHalfEdges) {
        end = halfEdges[iHalfEdge].end(), x3 = end.x, y3 = end.y;
        start = halfEdges[++iHalfEdge % nHalfEdges].start(), x2 = start.x, y2 = start.y;
        if (abs(x3 - x2) >  || abs(y3 - y2) > ) {
          halfEdges.splice(iHalfEdge, 0, new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site, end, abs(x3 - x0) <  && y1 - y3 >  ? {
            x: x0,
            y: abs(x2 - x0) <  ? y2 : y1
          } : abs(y3 - y1) <  && x1 - x3 >  ? {
            x: abs(y2 - y1) <  ? x2 : x1,
            y: y1
          } : abs(x3 - x1) <  && y3 - y0 >  ? {
            x: x1,
            y: abs(x2 - x1) <  ? y2 : y0
          } : abs(y3 - y0) <  && x3 - x0 >  ? {
            x: abs(y2 - y0) <  ? x2 : x0,
            y: y0
          } : null), cell.site, null));
          ++nHalfEdges;
        }
      }
    }
  }
  function d3_geom_voronoiHalfEdgeOrder(a, b) {
    return b.angle - a.angle;
  }
  function d3_geom_voronoiCircle() {
    d3_geom_voronoiRedBlackNode(this);
    this.x = this.y = this.arc = this.site = this.cy = null;
  }
  function d3_geom_voronoiAttachCircle(arc) {
    var lArc = arc.P, rArc = arc.N;
    if (!lArc || !rArc) return;
    var lSite = lArc.site, cSite = arc.site, rSite = rArc.site;
    if (lSite === rSite) return;
    var bx = cSite.x, by = cSite.y, ax = lSite.x - bx, ay = lSite.y - by, cx = rSite.x - bx, cy = rSite.y - by;
    var d = 2 * (ax * cy - ay * cx);
    if (d >= -2) return;
    var ha = ax * ax + ay * ay, hc = cx * cx + cy * cy, x = (cy * ha - ay * hc) / d, y = (ax * hc - cx * ha) / d, cy = y + by;
    var circle = d3_geom_voronoiCirclePool.pop() || new d3_geom_voronoiCircle();
    circle.arc = arc;
    circle.site = cSite;
    circle.x = x + bx;
    circle.y = cy + Math.sqrt(x * x + y * y);
    circle.cy = cy;
    arc.circle = circle;
    var before = null, node = d3_geom_voronoiCircles._;
    while (node) {
      if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {
        if (node.L) node = node.L; else {
          before = node.P;
          break;
        }
      } else {
        if (node.R) node = node.R; else {
          before = node;
          break;
        }
      }
    }
    d3_geom_voronoiCircles.insert(before, circle);
    if (!before) d3_geom_voronoiFirstCircle = circle;
  }
  function d3_geom_voronoiDetachCircle(arc) {
    var circle = arc.circle;
    if (circle) {
      if (!circle.P) d3_geom_voronoiFirstCircle = circle.N;
      d3_geom_voronoiCircles.remove(circle);
      d3_geom_voronoiCirclePool.push(circle);
      d3_geom_voronoiRedBlackNode(circle);
      arc.circle = null;
    }
  }
  function d3_geom_voronoiClipEdges(extent) {
    var edges = d3_geom_voronoiEdges, clip = d3_geom_clipLine(extent[0][0], extent[0][1], extent[1][0], extent[1][1]), i = edges.length, e;
    while (i--) {
      e = edges[i];
      if (!d3_geom_voronoiConnectEdge(e, extent) || !clip(e) || abs(e.a.x - e.b.x) <  && abs(e.a.y - e.b.y) < ) {
        e.a = e.b = null;
        edges.splice(i, 1);
      }
    }
  }
  function d3_geom_voronoiConnectEdge(edge, extent) {
    var vb = edge.b;
    if (vb) return true;
    var va = edge.a, x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], lSite = edge.l, rSite = edge.r, lx = lSite.x, ly = lSite.y, rx = rSite.x, ry = rSite.y, fx = (lx + rx) / 2, fy = (ly + ry) / 2, fm, fb;
    if (ry === ly) {
      if (fx < x0 || fx >= x1) return;
      if (lx > rx) {
        if (!va) va = {
          x: fx,
          y: y0
        }; else if (va.y >= y1) return;
        vb = {
          x: fx,
          y: y1
        };
      } else {
        if (!va) va = {
          x: fx,
          y: y1
        }; else if (va.y < y0) return;
        vb = {
          x: fx,
          y: y0
        };
      }
    } else {
      fm = (lx - rx) / (ry - ly);
      fb = fy - fm * fx;
      if (fm < -1 || fm > 1) {
        if (lx > rx) {
          if (!va) va = {
            x: (y0 - fb) / fm,
            y: y0
          }; else if (va.y >= y1) return;
          vb = {
            x: (y1 - fb) / fm,
            y: y1
          };
        } else {
          if (!va) va = {
            x: (y1 - fb) / fm,
            y: y1
          }; else if (va.y < y0) return;
          vb = {
            x: (y0 - fb) / fm,
            y: y0
          };
        }
      } else {
        if (ly < ry) {
          if (!va) va = {
            x: x0,
            y: fm * x0 + fb
          }; else if (va.x >= x1) return;
          vb = {
            x: x1,
            y: fm * x1 + fb
          };
        } else {
          if (!va) va = {
            x: x1,
            y: fm * x1 + fb
          }; else if (va.x < x0) return;
          vb = {
            x: x0,
            y: fm * x0 + fb
          };
        }
      }
    }
    edge.a = va;
    edge.b = vb;
    return true;
  }
  function d3_geom_voronoiEdge(lSite, rSite) {
    this.l = lSite;
    this.r = rSite;
    this.a = this.b = null;
  }
  function d3_geom_voronoiCreateEdge(lSite, rSite, va, vb) {
    var edge = new d3_geom_voronoiEdge(lSite, rSite);
    d3_geom_voronoiEdges.push(edge);
    if (va) d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, va);
    if (vb) d3_geom_voronoiSetEdgeEnd(edge, rSite, lSite, vb);
    d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, lSite, rSite));
    d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, rSite, lSite));
    return edge;
  }
  function d3_geom_voronoiCreateBorderEdge(lSite, va, vb) {
    var edge = new d3_geom_voronoiEdge(lSite, null);
    edge.a = va;
    edge.b = vb;
    d3_geom_voronoiEdges.push(edge);
    return edge;
  }
  function d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, vertex) {
    if (!edge.a && !edge.b) {
      edge.a = vertex;
      edge.l = lSite;
      edge.r = rSite;
    } else if (edge.l === rSite) {
      edge.b = vertex;
    } else {
      edge.a = vertex;
    }
  }
  function d3_geom_voronoiHalfEdge(edge, lSite, rSite) {
    var va = edge.a, vb = edge.b;
    this.edge = edge;
    this.site = lSite;
    this.angle = rSite ? Math.atan2(rSite.y - lSite.y, rSite.x - lSite.x) : edge.l === lSite ? Math.atan2(vb.x - va.x, va.y - vb.y) : Math.atan2(va.x - vb.x, vb.y - va.y);
  }
  d3_geom_voronoiHalfEdge.prototype = {
    start: function() {
      return this.edge.l === this.site ? this.edge.a : this.edge.b;
    },
    end: function() {
      return this.edge.l === this.site ? this.edge.b : this.edge.a;
    }
  };
  function d3_geom_voronoiRedBlackTree() {
    this._ = null;
  }
  function d3_geom_voronoiRedBlackNode(node) {
    node.U = node.C = node.L = node.R = node.P = node.N = null;
  }
  d3_geom_voronoiRedBlackTree.prototype = {
    insert: function(after, node) {
      var parent, grandpa, uncle;
      if (after) {
        node.P = after;
        node.N = after.N;
        if (after.N) after.N.P = node;
        after.N = node;
        if (after.R) {
          after = after.R;
          while (after.L) after = after.L;
          after.L = node;
        } else {
          after.R = node;
        }
        parent = after;
      } else if (this._) {
        after = d3_geom_voronoiRedBlackFirst(this._);
        node.P = null;
        node.N = after;
        after.P = after.L = node;
        parent = after;
      } else {
        node.P = node.N = null;
        this._ = node;
        parent = null;
      }
      node.L = node.R = null;
      node.U = parent;
      node.C = true;
      after = node;
      while (parent && parent.C) {
        grandpa = parent.U;
        if (parent === grandpa.L) {
          uncle = grandpa.R;
          if (uncle && uncle.C) {
            parent.C = uncle.C = false;
            grandpa.C = true;
            after = grandpa;
          } else {
            if (after === parent.R) {
              d3_geom_voronoiRedBlackRotateLeft(this, parent);
              after = parent;
              parent = after.U;
            }
            parent.C = false;
            grandpa.C = true;
            d3_geom_voronoiRedBlackRotateRight(this, grandpa);
          }
        } else {
          uncle = grandpa.L;
          if (uncle && uncle.C) {
            parent.C = uncle.C = false;
            grandpa.C = true;
            after = grandpa;
          } else {
            if (after === parent.L) {
              d3_geom_voronoiRedBlackRotateRight(this, parent);
              after = parent;
              parent = after.U;
            }
            parent.C = false;
            grandpa.C = true;
            d3_geom_voronoiRedBlackRotateLeft(this, grandpa);
          }
        }
        parent = after.U;
      }
      this._.C = false;
    },
    remove: function(node) {
      if (node.N) node.N.P = node.P;
      if (node.P) node.P.N = node.N;
      node.N = node.P = null;
      var parent = node.U, sibling, left = node.L, right = node.R, next, red;
      if (!left) next = right; else if (!right) next = left; else next = d3_geom_voronoiRedBlackFirst(right);
      if (parent) {
        if (parent.L === node) parent.L = next; else parent.R = next;
      } else {
        this._ = next;
      }
      if (left && right) {
        red = next.C;
        next.C = node.C;
        next.L = left;
        left.U = next;
        if (next !== right) {
          parent = next.U;
          next.U = node.U;
          node = next.R;
          parent.L = node;
          next.R = right;
          right.U = next;
        } else {
          next.U = parent;
          parent = next;
          node = next.R;
        }
      } else {
        red = node.C;
        node = next;
      }
      if (node) node.U = parent;
      if (red) return;
      if (node && node.C) {
        node.C = false;
        return;
      }
      do {
        if (node === this._) break;
        if (node === parent.L) {
          sibling = parent.R;
          if (sibling.C) {
            sibling.C = false;
            parent.C = true;
            d3_geom_voronoiRedBlackRotateLeft(this, parent);
            sibling = parent.R;
          }
          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
            if (!sibling.R || !sibling.R.C) {
              sibling.L.C = false;
              sibling.C = true;
              d3_geom_voronoiRedBlackRotateRight(this, sibling);
              sibling = parent.R;
            }
            sibling.C = parent.C;
            parent.C = sibling.R.C = false;
            d3_geom_voronoiRedBlackRotateLeft(this, parent);
            node = this._;
            break;
          }
        } else {
          sibling = parent.L;
          if (sibling.C) {
            sibling.C = false;
            parent.C = true;
            d3_geom_voronoiRedBlackRotateRight(this, parent);
            sibling = parent.L;
          }
          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
            if (!sibling.L || !sibling.L.C) {
              sibling.R.C = false;
              sibling.C = true;
              d3_geom_voronoiRedBlackRotateLeft(this, sibling);
              sibling = parent.L;
            }
            sibling.C = parent.C;
            parent.C = sibling.L.C = false;
            d3_geom_voronoiRedBlackRotateRight(this, parent);
            node = this._;
            break;
          }
        }
        sibling.C = true;
        node = parent;
        parent = parent.U;
      } while (!node.C);
      if (node) node.C = false;
    }
  };
  function d3_geom_voronoiRedBlackRotateLeft(tree, node) {
    var p = node, q = node.R, parent = p.U;
    if (parent) {
      if (parent.L === p) parent.L = q; else parent.R = q;
    } else {
      tree._ = q;
    }
    q.U = parent;
    p.U = q;
    p.R = q.L;
    if (p.R) p.R.U = p;
    q.L = p;
  }
  function d3_geom_voronoiRedBlackRotateRight(tree, node) {
    var p = node, q = node.L, parent = p.U;
    if (parent) {
      if (parent.L === p) parent.L = q; else parent.R = q;
    } else {
      tree._ = q;
    }
    q.U = parent;
    p.U = q;
    p.L = q.R;
    if (p.L) p.L.U = p;
    q.R = p;
  }
  function d3_geom_voronoiRedBlackFirst(node) {
    while (node.L) node = node.L;
    return node;
  }
  function d3_geom_voronoi(sites, bbox) {
    var site = sites.sort(d3_geom_voronoiVertexOrder).pop(), x0, y0, circle;
    d3_geom_voronoiEdges = [];
    d3_geom_voronoiCells = new Array(sites.length);
    d3_geom_voronoiBeaches = new d3_geom_voronoiRedBlackTree();
    d3_geom_voronoiCircles = new d3_geom_voronoiRedBlackTree();
    while (true) {
      circle = d3_geom_voronoiFirstCircle;
      if (site && (!circle || site.y < circle.y || site.y === circle.y && site.x < circle.x)) {
        if (site.x !== x0 || site.y !== y0) {
          d3_geom_voronoiCells[site.i] = new d3_geom_voronoiCell(site);
          d3_geom_voronoiAddBeach(site);
          x0 = site.x, y0 = site.y;
        }
        site = sites.pop();
      } else if (circle) {
        d3_geom_voronoiRemoveBeach(circle.arc);
      } else {
        break;
      }
    }
    if (bbox) d3_geom_voronoiClipEdges(bbox), d3_geom_voronoiCloseCells(bbox);
    var diagram = {
      cells: d3_geom_voronoiCells,
      edges: d3_geom_voronoiEdges
    };
    d3_geom_voronoiBeaches = d3_geom_voronoiCircles = d3_geom_voronoiEdges = d3_geom_voronoiCells = null;
    return diagram;
  }
  function d3_geom_voronoiVertexOrder(a, b) {
    return b.y - a.y || b.x - a.x;
  }
  d3.geom.voronoi = function(points) {
    var x = d3_geom_pointX, y = d3_geom_pointY, fx = x, fy = y, clipExtent = d3_geom_voronoiClipExtent;
    if (points) return voronoi(points);
    function voronoi(data) {
      var polygons = new Array(data.length), x0 = clipExtent[0][0], y0 = clipExtent[0][1], x1 = clipExtent[1][0], y1 = clipExtent[1][1];
      d3_geom_voronoi(sites(data), clipExtent).cells.forEach(function(cell, i) {
        var edges = cell.edges, site = cell.site, polygon = polygons[i] = edges.length ? edges.map(function(e) {
          var s = e.start();
          return [ s.x, s.y ];
        }) : site.x >= x0 && site.x <= x1 && site.y >= y0 && site.y <= y1 ? [ [ x0, y1 ], [ x1, y1 ], [ x1, y0 ], [ x0, y0 ] ] : [];
        polygon.point = data[i];
      });
      return polygons;
    }
    function sites(data) {
      return data.map(function(d, i) {
        return {
          x: Math.round(fx(d, i) / ) * ,
          y: Math.round(fy(d, i) / ) * ,
          i: i
        };
      });
    }
    voronoi.links = function(data) {
      return d3_geom_voronoi(sites(data)).edges.filter(function(edge) {
        return edge.l && edge.r;
      }).map(function(edge) {
        return {
          source: data[edge.l.i],
          target: data[edge.r.i]
        };
      });
    };
    voronoi.triangles = function(data) {
      var triangles = [];
      d3_geom_voronoi(sites(data)).cells.forEach(function(cell, i) {
        var site = cell.site, edges = cell.edges.sort(d3_geom_voronoiHalfEdgeOrder), j = -1, m = edges.length, e0, s0, e1 = edges[m - 1].edge, s1 = e1.l === site ? e1.r : e1.l;
        while (++j < m) {
          e0 = e1;
          s0 = s1;
          e1 = edges[j].edge;
          s1 = e1.l === site ? e1.r : e1.l;
          if (i < s0.i && i < s1.i && d3_geom_voronoiTriangleArea(site, s0, s1) < 0) {
            triangles.push([ data[i], data[s0.i], data[s1.i] ]);
          }
        }
      });
      return triangles;
    };
    voronoi.x = function(_) {
      return arguments.length ? (fx = d3_functor(x = _), voronoi) : x;
    };
    voronoi.y = function(_) {
      return arguments.length ? (fy = d3_functor(y = _), voronoi) : y;
    };
    voronoi.clipExtent = function(_) {
      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent;
      clipExtent = _ == null ? d3_geom_voronoiClipExtent : _;
      return voronoi;
    };
    voronoi.size = function(_) {
      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent && clipExtent[1];
      return voronoi.clipExtent(_ && [ [ 0, 0 ], _ ]);
    };
    return voronoi;
  };
  var d3_geom_voronoiClipExtent = [ [ -1e6, -1e6 ], [ 1e6, 1e6 ] ];
  function d3_geom_voronoiTriangleArea(a, b, c) {
    return (a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y);
  }
  d3.geom.delaunay = function(vertices) {
    return d3.geom.voronoi().triangles(vertices);
  };
  d3.geom.quadtree = function(points, x1, y1, x2, y2) {
    var x = d3_geom_pointX, y = d3_geom_pointY, compat;
    if (compat = arguments.length) {
      x = d3_geom_quadtreeCompatX;
      y = d3_geom_quadtreeCompatY;
      if (compat === 3) {
        y2 = y1;
        x2 = x1;
        y1 = x1 = 0;
      }
      return quadtree(points);
    }
    function quadtree(data) {
      var d, fx = d3_functor(x), fy = d3_functor(y), xs, ys, i, n, x1_, y1_, x2_, y2_;
      if (x1 != null) {
        x1_ = x1, y1_ = y1, x2_ = x2, y2_ = y2;
      } else {
        x2_ = y2_ = -(x1_ = y1_ = Infinity);
        xs = [], ys = [];
        n = data.length;
        if (compat) for (i = 0; i < n; ++i) {
          d = data[i];
          if (d.x < x1_) x1_ = d.x;
          if (d.y < y1_) y1_ = d.y;
          if (d.x > x2_) x2_ = d.x;
          if (d.y > y2_) y2_ = d.y;
          xs.push(d.x);
          ys.push(d.y);
        } else for (i = 0; i < n; ++i) {
          var x_ = +fx(d = data[i], i), y_ = +fy(d, i);
          if (x_ < x1_) x1_ = x_;
          if (y_ < y1_) y1_ = y_;
          if (x_ > x2_) x2_ = x_;
          if (y_ > y2_) y2_ = y_;
          xs.push(x_);
          ys.push(y_);
        }
      }
      var dx = x2_ - x1_, dy = y2_ - y1_;
      if (dx > dy) y2_ = y1_ + dx; else x2_ = x1_ + dy;
      function insert(n, d, x, y, x1, y1, x2, y2) {
        if (isNaN(x) || isNaN(y)) return;
        if (n.leaf) {
          var nx = n.x, ny = n.y;
          if (nx != null) {
            if (abs(nx - x) + abs(ny - y) < .01) {
              insertChild(n, d, x, y, x1, y1, x2, y2);
            } else {
              var nPoint = n.point;
              n.x = n.y = n.point = null;
              insertChild(n, nPoint, nx, ny, x1, y1, x2, y2);
              insertChild(n, d, x, y, x1, y1, x2, y2);
            }
          } else {
            n.x = x, n.y = y, n.point = d;
          }
        } else {
          insertChild(n, d, x, y, x1, y1, x2, y2);
        }
      }
      function insertChild(n, d, x, y, x1, y1, x2, y2) {
        var xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym, i = below << 1 | right;
        n.leaf = false;
        n = n.nodes[i] || (n.nodes[i] = d3_geom_quadtreeNode());
        if (right) x1 = xm; else x2 = xm;
        if (below) y1 = ym; else y2 = ym;
        insert(n, d, x, y, x1, y1, x2, y2);
      }
      var root = d3_geom_quadtreeNode();
      root.add = function(d) {
        insert(root, d, +fx(d, ++i), +fy(d, i), x1_, y1_, x2_, y2_);
      };
      root.visit = function(f) {
        d3_geom_quadtreeVisit(f, root, x1_, y1_, x2_, y2_);
      };
      root.find = function(point) {
        return d3_geom_quadtreeFind(root, point[0], point[1], x1_, y1_, x2_, y2_);
      };
      i = -1;
      if (x1 == null) {
        while (++i < n) {
          insert(root, data[i], xs[i], ys[i], x1_, y1_, x2_, y2_);
        }
        --i;
      } else data.forEach(root.add);
      xs = ys = data = d = null;
      return root;
    }
    quadtree.x = function(_) {
      return arguments.length ? (x = _, quadtree) : x;
    };
    quadtree.y = function(_) {
      return arguments.length ? (y = _, quadtree) : y;
    };
    quadtree.extent = function(_) {
      if (!arguments.length) return x1 == null ? null : [ [ x1, y1 ], [ x2, y2 ] ];
      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = +_[0][0], y1 = +_[0][1], x2 = +_[1][0], 
      y2 = +_[1][1];
      return quadtree;
    };
    quadtree.size = function(_) {
      if (!arguments.length) return x1 == null ? null : [ x2 - x1, y2 - y1 ];
      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = y1 = 0, x2 = +_[0], y2 = +_[1];
      return quadtree;
    };
    return quadtree;
  };
  function d3_geom_quadtreeCompatX(d) {
    return d.x;
  }
  function d3_geom_quadtreeCompatY(d) {
    return d.y;
  }
  function d3_geom_quadtreeNode() {
    return {
      leaf: true,
      nodes: [],
      point: null,
      x: null,
      y: null
    };
  }
  function d3_geom_quadtreeVisit(f, node, x1, y1, x2, y2) {
    if (!f(node, x1, y1, x2, y2)) {
      var sx = (x1 + x2) * .5, sy = (y1 + y2) * .5, children = node.nodes;
      if (children[0]) d3_geom_quadtreeVisit(f, children[0], x1, y1, sx, sy);
      if (children[1]) d3_geom_quadtreeVisit(f, children[1], sx, y1, x2, sy);
      if (children[2]) d3_geom_quadtreeVisit(f, children[2], x1, sy, sx, y2);
      if (children[3]) d3_geom_quadtreeVisit(f, children[3], sx, sy, x2, y2);
    }
  }
  function d3_geom_quadtreeFind(root, x, y, x0, y0, x3, y3) {
    var minDistance2 = Infinity, closestPoint;
    (function find(node, x1, y1, x2, y2) {
      if (x1 > x3 || y1 > y3 || x2 < x0 || y2 < y0) return;
      if (point = node.point) {
        var point, dx = x - node.x, dy = y - node.y, distance2 = dx * dx + dy * dy;
        if (distance2 < minDistance2) {
          var distance = Math.sqrt(minDistance2 = distance2);
          x0 = x - distance, y0 = y - distance;
          x3 = x + distance, y3 = y + distance;
          closestPoint = point;
        }
      }
      var children = node.nodes, xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym;
      for (var i = below << 1 | right, j = i + 4; i < j; ++i) {
        if (node = children[i & 3]) switch (i & 3) {
         case 0:
          find(node, x1, y1, xm, ym);
          break;

         case 1:
          find(node, xm, y1, x2, ym);
          break;

         case 2:
          find(node, x1, ym, xm, y2);
          break;

         case 3:
          find(node, xm, ym, x2, y2);
          break;
        }
      }
    })(root, x0, y0, x3, y3);
    return closestPoint;
  }
  d3.interpolateRgb = d3_interpolateRgb;
  function d3_interpolateRgb(a, b) {
    a = d3.rgb(a);
    b = d3.rgb(b);
    var ar = a.r, ag = a.g, ab = a.b, br = b.r - ar, bg = b.g - ag, bb = b.b - ab;
    return function(t) {
      return "#" + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t));
    };
  }
  d3.interpolateObject = d3_interpolateObject;
  function d3_interpolateObject(a, b) {
    var i = {}, c = {}, k;
    for (k in a) {
      if (k in b) {
        i[k] = d3_interpolate(a[k], b[k]);
      } else {
        c[k] = a[k];
      }
    }
    for (k in b) {
      if (!(k in a)) {
        c[k] = b[k];
      }
    }
    return function(t) {
      for (k in i) c[k] = i[k](t);
      return c;
    };
  }
  d3.interpolateNumber = d3_interpolateNumber;
  function d3_interpolateNumber(a, b) {
    a = +a, b = +b;
    return function(t) {
      return a * (1 - t) + b * t;
    };
  }
  d3.interpolateString = d3_interpolateString;
  function d3_interpolateString(a, b) {
    var bi = d3_interpolate_numberA.lastIndex = d3_interpolate_numberB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];
    a = a + "", b = b + "";
    while ((am = d3_interpolate_numberA.exec(a)) && (bm = d3_interpolate_numberB.exec(b))) {
      if ((bs = bm.index) > bi) {
        bs = b.slice(bi, bs);
        if (s[i]) s[i] += bs; else s[++i] = bs;
      }
      if ((am = am[0]) === (bm = bm[0])) {
        if (s[i]) s[i] += bm; else s[++i] = bm;
      } else {
        s[++i] = null;
        q.push({
          i: i,
          x: d3_interpolateNumber(am, bm)
        });
      }
      bi = d3_interpolate_numberB.lastIndex;
    }
    if (bi < b.length) {
      bs = b.slice(bi);
      if (s[i]) s[i] += bs; else s[++i] = bs;
    }
    return s.length < 2 ? q[0] ? (b = q[0].x, function(t) {
      return b(t) + "";
    }) : function() {
      return b;
    } : (b = q.length, function(t) {
      for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);
      return s.join("");
    });
  }
  var d3_interpolate_numberA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, d3_interpolate_numberB = new RegExp(d3_interpolate_numberA.source, "g");
  d3.interpolate = d3_interpolate;
  function d3_interpolate(a, b) {
    var i = d3.interpolators.length, f;
    while (--i >= 0 && !(f = d3.interpolators[i](a, b))) ;
    return f;
  }
  d3.interpolators = [ function(a, b) {
    var t = typeof b;
    return (t === "string" ? d3_rgb_names.has(b.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(b) ? d3_interpolateRgb : d3_interpolateString : b instanceof d3_color ? d3_interpolateRgb : Array.isArray(b) ? d3_interpolateArray : t === "object" && isNaN(b) ? d3_interpolateObject : d3_interpolateNumber)(a, b);
  } ];
  d3.interpolateArray = d3_interpolateArray;
  function d3_interpolateArray(a, b) {
    var x = [], c = [], na = a.length, nb = b.length, n0 = Math.min(a.length, b.length), i;
    for (i = 0; i < n0; ++i) x.push(d3_interpolate(a[i], b[i]));
    for (;i < na; ++i) c[i] = a[i];
    for (;i < nb; ++i) c[i] = b[i];
    return function(t) {
      for (i = 0; i < n0; ++i) c[i] = x[i](t);
      return c;
    };
  }
  var d3_ease_default = function() {
    return d3_identity;
  };
  var d3_ease = d3.map({
    linear: d3_ease_default,
    poly: d3_ease_poly,
    quad: function() {
      return d3_ease_quad;
    },
    cubic: function() {
      return d3_ease_cubic;
    },
    sin: function() {
      return d3_ease_sin;
    },
    exp: function() {
      return d3_ease_exp;
    },
    circle: function() {
      return d3_ease_circle;
    },
    elastic: d3_ease_elastic,
    back: d3_ease_back,
    bounce: function() {
      return d3_ease_bounce;
    }
  });
  var d3_ease_mode = d3.map({
    "in": d3_identity,
    out: d3_ease_reverse,
    "in-out": d3_ease_reflect,
    "out-in": function(f) {
      return d3_ease_reflect(d3_ease_reverse(f));
    }
  });
  d3.ease = function(name) {
    var i = name.indexOf("-"), t = i >= 0 ? name.slice(0, i) : name, m = i >= 0 ? name.slice(i + 1) : "in";
    t = d3_ease.get(t) || d3_ease_default;
    m = d3_ease_mode.get(m) || d3_identity;
    return d3_ease_clamp(m(t.apply(null, d3_arraySlice.call(arguments, 1))));
  };
  function d3_ease_clamp(f) {
    return function(t) {
      return t <= 0 ? 0 : t >= 1 ? 1 : f(t);
    };
  }
  function d3_ease_reverse(f) {
    return function(t) {
      return 1 - f(1 - t);
    };
  }
  function d3_ease_reflect(f) {
    return function(t) {
      return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));
    };
  }
  function d3_ease_quad(t) {
    return t * t;
  }
  function d3_ease_cubic(t) {
    return t * t * t;
  }
  function d3_ease_cubicInOut(t) {
    if (t <= 0) return 0;
    if (t >= 1) return 1;
    var t2 = t * t, t3 = t2 * t;
    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);
  }
  function d3_ease_poly(e) {
    return function(t) {
      return Math.pow(t, e);
    };
  }
  function d3_ease_sin(t) {
    return 1 - Math.cos(t * half);
  }
  function d3_ease_exp(t) {
    return Math.pow(2, 10 * (t - 1));
  }
  function d3_ease_circle(t) {
    return 1 - Math.sqrt(1 - t * t);
  }
  function d3_ease_elastic(a, p) {
    var s;
    if (arguments.length < 2) p = .45;
    if (arguments.length) s = p /  * Math.asin(1 / a); else a = 1, s = p / 4;
    return function(t) {
      return 1 + a * Math.pow(2, -10 * t) * Math.sin((t - s) *  / p);
    };
  }
  function d3_ease_back(s) {
    if (!s) s = 1.70158;
    return function(t) {
      return t * t * ((s + 1) * t - s);
    };
  }
  function d3_ease_bounce(t) {
    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;
  }
  d3.interpolateHcl = d3_interpolateHcl;
  function d3_interpolateHcl(a, b) {
    a = d3.hcl(a);
    b = d3.hcl(b);
    var ah = a.h, ac = a.c, al = a.l, bh = b.h - ah, bc = b.c - ac, bl = b.l - al;
    if (isNaN(bc)) bc = 0, ac = isNaN(ac) ? b.c : ac;
    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;
    return function(t) {
      return d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + "";
    };
  }
  d3.interpolateHsl = d3_interpolateHsl;
  function d3_interpolateHsl(a, b) {
    a = d3.hsl(a);
    b = d3.hsl(b);
    var ah = a.h, as = a.s, al = a.l, bh = b.h - ah, bs = b.s - as, bl = b.l - al;
    if (isNaN(bs)) bs = 0, as = isNaN(as) ? b.s : as;
    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;
    return function(t) {
      return d3_hsl_rgb(ah + bh * t, as + bs * t, al + bl * t) + "";
    };
  }
  d3.interpolateLab = d3_interpolateLab;
  function d3_interpolateLab(a, b) {
    a = d3.lab(a);
    b = d3.lab(b);
    var al = a.l, aa = a.a, ab = a.b, bl = b.l - al, ba = b.a - aa, bb = b.b - ab;
    return function(t) {
      return d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + "";
    };
  }
  d3.interpolateRound = d3_interpolateRound;
  function d3_interpolateRound(a, b) {
    b -= a;
    return function(t) {
      return Math.round(a + b * t);
    };
  }
  d3.transform = function(string) {
    var g = d3_document.createElementNS(d3.ns.prefix.svg, "g");
    return (d3.transform = function(string) {
      if (string != null) {
        g.setAttribute("transform", string);
        var t = g.transform.baseVal.consolidate();
      }
      return new d3_transform(t ? t.matrix : d3_transformIdentity);
    })(string);
  };
  function d3_transform(m) {
    var r0 = [ m.a, m.b ], r1 = [ m.c, m.d ], kx = d3_transformNormalize(r0), kz = d3_transformDot(r0, r1), ky = d3_transformNormalize(d3_transformCombine(r1, r0, -kz)) || 0;
    if (r0[0] * r1[1] < r1[0] * r0[1]) {
      r0[0] *= -1;
      r0[1] *= -1;
      kx *= -1;
      kz *= -1;
    }
    this.rotate = (kx ? Math.atan2(r0[1], r0[0]) : Math.atan2(-r1[0], r1[1])) * d3_degrees;
    this.translate = [ m.e, m.f ];
    this.scale = [ kx, ky ];
    this.skew = ky ? Math.atan2(kz, ky) * d3_degrees : 0;
  }
  d3_transform.prototype.toString = function() {
    return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")";
  };
  function d3_transformDot(a, b) {
    return a[0] * b[0] + a[1] * b[1];
  }
  function d3_transformNormalize(a) {
    var k = Math.sqrt(d3_transformDot(a, a));
    if (k) {
      a[0] /= k;
      a[1] /= k;
    }
    return k;
  }
  function d3_transformCombine(a, b, k) {
    a[0] += k * b[0];
    a[1] += k * b[1];
    return a;
  }
  var d3_transformIdentity = {
    a: 1,
    b: 0,
    c: 0,
    d: 1,
    e: 0,
    f: 0
  };
  d3.interpolateTransform = d3_interpolateTransform;
  function d3_interpolateTransformPop(s) {
    return s.length ? s.pop() + "," : "";
  }
  function d3_interpolateTranslate(ta, tb, s, q) {
    if (ta[0] !== tb[0] || ta[1] !== tb[1]) {
      var i = s.push("translate(", null, ",", null, ")");
      q.push({
        i: i - 4,
        x: d3_interpolateNumber(ta[0], tb[0])
      }, {
        i: i - 2,
        x: d3_interpolateNumber(ta[1], tb[1])
      });
    } else if (tb[0] || tb[1]) {
      s.push("translate(" + tb + ")");
    }
  }
  function d3_interpolateRotate(ra, rb, s, q) {
    if (ra !== rb) {
      if (ra - rb > 180) rb += 360; else if (rb - ra > 180) ra += 360;
      q.push({
        i: s.push(d3_interpolateTransformPop(s) + "rotate(", null, ")") - 2,
        x: d3_interpolateNumber(ra, rb)
      });
    } else if (rb) {
      s.push(d3_interpolateTransformPop(s) + "rotate(" + rb + ")");
    }
  }
  function d3_interpolateSkew(wa, wb, s, q) {
    if (wa !== wb) {
      q.push({
        i: s.push(d3_interpolateTransformPop(s) + "skewX(", null, ")") - 2,
        x: d3_interpolateNumber(wa, wb)
      });
    } else if (wb) {
      s.push(d3_interpolateTransformPop(s) + "skewX(" + wb + ")");
    }
  }
  function d3_interpolateScale(ka, kb, s, q) {
    if (ka[0] !== kb[0] || ka[1] !== kb[1]) {
      var i = s.push(d3_interpolateTransformPop(s) + "scale(", null, ",", null, ")");
      q.push({
        i: i - 4,
        x: d3_interpolateNumber(ka[0], kb[0])
      }, {
        i: i - 2,
        x: d3_interpolateNumber(ka[1], kb[1])
      });
    } else if (kb[0] !== 1 || kb[1] !== 1) {
      s.push(d3_interpolateTransformPop(s) + "scale(" + kb + ")");
    }
  }
  function d3_interpolateTransform(a, b) {
    var s = [], q = [];
    a = d3.transform(a), b = d3.transform(b);
    d3_interpolateTranslate(a.translate, b.translate, s, q);
    d3_interpolateRotate(a.rotate, b.rotate, s, q);
    d3_interpolateSkew(a.skew, b.skew, s, q);
    d3_interpolateScale(a.scale, b.scale, s, q);
    a = b = null;
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n) s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  }
  function d3_uninterpolateNumber(a, b) {
    b = (b -= a = +a) || 1 / b;
    return function(x) {
      return (x - a) / b;
    };
  }
  function d3_uninterpolateClamp(a, b) {
    b = (b -= a = +a) || 1 / b;
    return function(x) {
      return Math.max(0, Math.min(1, (x - a) / b));
    };
  }
  d3.layout = {};
  d3.layout.bundle = function() {
    return function(links) {
      var paths = [], i = -1, n = links.length;
      while (++i < n) paths.push(d3_layout_bundlePath(links[i]));
      return paths;
    };
  };
  function d3_layout_bundlePath(link) {
    var start = link.source, end = link.target, lca = d3_layout_bundleLeastCommonAncestor(start, end), points = [ start ];
    while (start !== lca) {
      start = start.parent;
      points.push(start);
    }
    var k = points.length;
    while (end !== lca) {
      points.splice(k, 0, end);
      end = end.parent;
    }
    return points;
  }
  function d3_layout_bundleAncestors(node) {
    var ancestors = [], parent = node.parent;
    while (parent != null) {
      ancestors.push(node);
      node = parent;
      parent = parent.parent;
    }
    ancestors.push(node);
    return ancestors;
  }
  function d3_layout_bundleLeastCommonAncestor(a, b) {
    if (a === b) return a;
    var aNodes = d3_layout_bundleAncestors(a), bNodes = d3_layout_bundleAncestors(b), aNode = aNodes.pop(), bNode = bNodes.pop(), sharedNode = null;
    while (aNode === bNode) {
      sharedNode = aNode;
      aNode = aNodes.pop();
      bNode = bNodes.pop();
    }
    return sharedNode;
  }
  d3.layout.chord = function() {
    var chord = {}, chords, groups, matrix, n, padding = 0, sortGroups, sortSubgroups, sortChords;
    function relayout() {
      var subgroups = {}, groupSums = [], groupIndex = d3.range(n), subgroupIndex = [], k, x, x0, i, j;
      chords = [];
      groups = [];
      k = 0, i = -1;
      while (++i < n) {
        x = 0, j = -1;
        while (++j < n) {
          x += matrix[i][j];
        }
        groupSums.push(x);
        subgroupIndex.push(d3.range(n));
        k += x;
      }
      if (sortGroups) {
        groupIndex.sort(function(a, b) {
          return sortGroups(groupSums[a], groupSums[b]);
        });
      }
      if (sortSubgroups) {
        subgroupIndex.forEach(function(d, i) {
          d.sort(function(a, b) {
            return sortSubgroups(matrix[i][a], matrix[i][b]);
          });
        });
      }
      k = ( - padding * n) / k;
      x = 0, i = -1;
      while (++i < n) {
        x0 = x, j = -1;
        while (++j < n) {
          var di = groupIndex[i], dj = subgroupIndex[di][j], v = matrix[di][dj], a0 = x, a1 = x += v * k;
          subgroups[di + "-" + dj] = {
            index: di,
            subindex: dj,
            startAngle: a0,
            endAngle: a1,
            value: v
          };
        }
        groups[di] = {
          index: di,
          startAngle: x0,
          endAngle: x,
          value: groupSums[di]
        };
        x += padding;
      }
      i = -1;
      while (++i < n) {
        j = i - 1;
        while (++j < n) {
          var source = subgroups[i + "-" + j], target = subgroups[j + "-" + i];
          if (source.value || target.value) {
            chords.push(source.value < target.value ? {
              source: target,
              target: source
            } : {
              source: source,
              target: target
            });
          }
        }
      }
      if (sortChords) resort();
    }
    function resort() {
      chords.sort(function(a, b) {
        return sortChords((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2);
      });
    }
    chord.matrix = function(x) {
      if (!arguments.length) return matrix;
      n = (matrix = x) && matrix.length;
      chords = groups = null;
      return chord;
    };
    chord.padding = function(x) {
      if (!arguments.length) return padding;
      padding = x;
      chords = groups = null;
      return chord;
    };
    chord.sortGroups = function(x) {
      if (!arguments.length) return sortGroups;
      sortGroups = x;
      chords = groups = null;
      return chord;
    };
    chord.sortSubgroups = function(x) {
      if (!arguments.length) return sortSubgroups;
      sortSubgroups = x;
      chords = null;
      return chord;
    };
    chord.sortChords = function(x) {
      if (!arguments.length) return sortChords;
      sortChords = x;
      if (chords) resort();
      return chord;
    };
    chord.chords = function() {
      if (!chords) relayout();
      return chords;
    };
    chord.groups = function() {
      if (!groups) relayout();
      return groups;
    };
    return chord;
  };
  d3.layout.force = function() {
    var force = {}, event = d3.dispatch("start", "tick", "end"), timer, size = [ 1, 1 ], drag, alpha, friction = .9, linkDistance = d3_layout_forceLinkDistance, linkStrength = d3_layout_forceLinkStrength, charge = -30, chargeDistance2 = d3_layout_forceChargeDistance2, gravity = .1, theta2 = .64, nodes = [], links = [], distances, strengths, charges;
    function repulse(node) {
      return function(quad, x1, _, x2) {
        if (quad.point !== node) {
          var dx = quad.cx - node.x, dy = quad.cy - node.y, dw = x2 - x1, dn = dx * dx + dy * dy;
          if (dw * dw / theta2 < dn) {
            if (dn < chargeDistance2) {
              var k = quad.charge / dn;
              node.px -= dx * k;
              node.py -= dy * k;
            }
            return true;
          }
          if (quad.point && dn && dn < chargeDistance2) {
            var k = quad.pointCharge / dn;
            node.px -= dx * k;
            node.py -= dy * k;
          }
        }
        return !quad.charge;
      };
    }
    force.tick = function() {
      if ((alpha *= .99) < .005) {
        timer = null;
        event.end({
          type: "end",
          alpha: alpha = 0
        });
        return true;
      }
      var n = nodes.length, m = links.length, q, i, o, s, t, l, k, x, y;
      for (i = 0; i < m; ++i) {
        o = links[i];
        s = o.source;
        t = o.target;
        x = t.x - s.x;
        y = t.y - s.y;
        if (l = x * x + y * y) {
          l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l;
          x *= l;
          y *= l;
          t.x -= x * (k = s.weight + t.weight ? s.weight / (s.weight + t.weight) : .5);
          t.y -= y * k;
          s.x += x * (k = 1 - k);
          s.y += y * k;
        }
      }
      if (k = alpha * gravity) {
        x = size[0] / 2;
        y = size[1] / 2;
        i = -1;
        if (k) while (++i < n) {
          o = nodes[i];
          o.x += (x - o.x) * k;
          o.y += (y - o.y) * k;
        }
      }
      if (charge) {
        d3_layout_forceAccumulate(q = d3.geom.quadtree(nodes), alpha, charges);
        i = -1;
        while (++i < n) {
          if (!(o = nodes[i]).fixed) {
            q.visit(repulse(o));
          }
        }
      }
      i = -1;
      while (++i < n) {
        o = nodes[i];
        if (o.fixed) {
          o.x = o.px;
          o.y = o.py;
        } else {
          o.x -= (o.px - (o.px = o.x)) * friction;
          o.y -= (o.py - (o.py = o.y)) * friction;
        }
      }
      event.tick({
        type: "tick",
        alpha: alpha
      });
    };
    force.nodes = function(x) {
      if (!arguments.length) return nodes;
      nodes = x;
      return force;
    };
    force.links = function(x) {
      if (!arguments.length) return links;
      links = x;
      return force;
    };
    force.size = function(x) {
      if (!arguments.length) return size;
      size = x;
      return force;
    };
    force.linkDistance = function(x) {
      if (!arguments.length) return linkDistance;
      linkDistance = typeof x === "function" ? x : +x;
      return force;
    };
    force.distance = force.linkDistance;
    force.linkStrength = function(x) {
      if (!arguments.length) return linkStrength;
      linkStrength = typeof x === "function" ? x : +x;
      return force;
    };
    force.friction = function(x) {
      if (!arguments.length) return friction;
      friction = +x;
      return force;
    };
    force.charge = function(x) {
      if (!arguments.length) return charge;
      charge = typeof x === "function" ? x : +x;
      return force;
    };
    force.chargeDistance = function(x) {
      if (!arguments.length) return Math.sqrt(chargeDistance2);
      chargeDistance2 = x * x;
      return force;
    };
    force.gravity = function(x) {
      if (!arguments.length) return gravity;
      gravity = +x;
      return force;
    };
    force.theta = function(x) {
      if (!arguments.length) return Math.sqrt(theta2);
      theta2 = x * x;
      return force;
    };
    force.alpha = function(x) {
      if (!arguments.length) return alpha;
      x = +x;
      if (alpha) {
        if (x > 0) {
          alpha = x;
        } else {
          timer.c = null, timer.t = NaN, timer = null;
          event.end({
            type: "end",
            alpha: alpha = 0
          });
        }
      } else if (x > 0) {
        event.start({
          type: "start",
          alpha: alpha = x
        });
        timer = d3_timer(force.tick);
      }
      return force;
    };
    force.start = function() {
      var i, n = nodes.length, m = links.length, w = size[0], h = size[1], neighbors, o;
      for (i = 0; i < n; ++i) {
        (o = nodes[i]).index = i;
        o.weight = 0;
      }
      for (i = 0; i < m; ++i) {
        o = links[i];
        if (typeof o.source == "number") o.source = nodes[o.source];
        if (typeof o.target == "number") o.target = nodes[o.target];
        ++o.source.weight;
        ++o.target.weight;
      }
      for (i = 0; i < n; ++i) {
        o = nodes[i];
        if (isNaN(o.x)) o.x = position("x", w);
        if (isNaN(o.y)) o.y = position("y", h);
        if (isNaN(o.px)) o.px = o.x;
        if (isNaN(o.py)) o.py = o.y;
      }
      distances = [];
      if (typeof linkDistance === "function") for (i = 0; i < m; ++i) distances[i] = +linkDistance.call(this, links[i], i); else for (i = 0; i < m; ++i) distances[i] = linkDistance;
      strengths = [];
      if (typeof linkStrength === "function") for (i = 0; i < m; ++i) strengths[i] = +linkStrength.call(this, links[i], i); else for (i = 0; i < m; ++i) strengths[i] = linkStrength;
      charges = [];
      if (typeof charge === "function") for (i = 0; i < n; ++i) charges[i] = +charge.call(this, nodes[i], i); else for (i = 0; i < n; ++i) charges[i] = charge;
      function position(dimension, size) {
        if (!neighbors) {
          neighbors = new Array(n);
          for (j = 0; j < n; ++j) {
            neighbors[j] = [];
          }
          for (j = 0; j < m; ++j) {
            var o = links[j];
            neighbors[o.source.index].push(o.target);
            neighbors[o.target.index].push(o.source);
          }
        }
        var candidates = neighbors[i], j = -1, l = candidates.length, x;
        while (++j < l) if (!isNaN(x = candidates[j][dimension])) return x;
        return Math.random() * size;
      }
      return force.resume();
    };
    force.resume = function() {
      return force.alpha(.1);
    };
    force.stop = function() {
      return force.alpha(0);
    };
    force.drag = function() {
      if (!drag) drag = d3.behavior.drag().origin(d3_identity).on("dragstart.force", d3_layout_forceDragstart).on("drag.force", dragmove).on("dragend.force", d3_layout_forceDragend);
      if (!arguments.length) return drag;
      this.on("mouseover.force", d3_layout_forceMouseover).on("mouseout.force", d3_layout_forceMouseout).call(drag);
    };
    function dragmove(d) {
      d.px = d3.event.x, d.py = d3.event.y;
      force.resume();
    }
    return d3.rebind(force, event, "on");
  };
  function d3_layout_forceDragstart(d) {
    d.fixed |= 2;
  }
  function d3_layout_forceDragend(d) {
    d.fixed &= ~6;
  }
  function d3_layout_forceMouseover(d) {
    d.fixed |= 4;
    d.px = d.x, d.py = d.y;
  }
  function d3_layout_forceMouseout(d) {
    d.fixed &= ~4;
  }
  function d3_layout_forceAccumulate(quad, alpha, charges) {
    var cx = 0, cy = 0;
    quad.charge = 0;
    if (!quad.leaf) {
      var nodes = quad.nodes, n = nodes.length, i = -1, c;
      while (++i < n) {
        c = nodes[i];
        if (c == null) continue;
        d3_layout_forceAccumulate(c, alpha, charges);
        quad.charge += c.charge;
        cx += c.charge * c.cx;
        cy += c.charge * c.cy;
      }
    }
    if (quad.point) {
      if (!quad.leaf) {
        quad.point.x += Math.random() - .5;
        quad.point.y += Math.random() - .5;
      }
      var k = alpha * charges[quad.point.index];
      quad.charge += quad.pointCharge = k;
      cx += k * quad.point.x;
      cy += k * quad.point.y;
    }
    quad.cx = cx / quad.charge;
    quad.cy = cy / quad.charge;
  }
  var d3_layout_forceLinkDistance = 20, d3_layout_forceLinkStrength = 1, d3_layout_forceChargeDistance2 = Infinity;
  d3.layout.hierarchy = function() {
    var sort = d3_layout_hierarchySort, children = d3_layout_hierarchyChildren, value = d3_layout_hierarchyValue;
    function hierarchy(root) {
      var stack = [ root ], nodes = [], node;
      root.depth = 0;
      while ((node = stack.pop()) != null) {
        nodes.push(node);
        if ((childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {
          var n, childs, child;
          while (--n >= 0) {
            stack.push(child = childs[n]);
            child.parent = node;
            child.depth = node.depth + 1;
          }
          if (value) node.value = 0;
          node.children = childs;
        } else {
          if (value) node.value = +value.call(hierarchy, node, node.depth) || 0;
          delete node.children;
        }
      }
      d3_layout_hierarchyVisitAfter(root, function(node) {
        var childs, parent;
        if (sort && (childs = node.children)) childs.sort(sort);
        if (value && (parent = node.parent)) parent.value += node.value;
      });
      return nodes;
    }
    hierarchy.sort = function(x) {
      if (!arguments.length) return sort;
      sort = x;
      return hierarchy;
    };
    hierarchy.children = function(x) {
      if (!arguments.length) return children;
      children = x;
      return hierarchy;
    };
    hierarchy.value = function(x) {
      if (!arguments.length) return value;
      value = x;
      return hierarchy;
    };
    hierarchy.revalue = function(root) {
      if (value) {
        d3_layout_hierarchyVisitBefore(root, function(node) {
          if (node.children) node.value = 0;
        });
        d3_layout_hierarchyVisitAfter(root, function(node) {
          var parent;
          if (!node.children) node.value = +value.call(hierarchy, node, node.depth) || 0;
          if (parent = node.parent) parent.value += node.value;
        });
      }
      return root;
    };
    return hierarchy;
  };
  function d3_layout_hierarchyRebind(object, hierarchy) {
    d3.rebind(object, hierarchy, "sort", "children", "value");
    object.nodes = object;
    object.links = d3_layout_hierarchyLinks;
    return object;
  }
  function d3_layout_hierarchyVisitBefore(node, callback) {
    var nodes = [ node ];
    while ((node = nodes.pop()) != null) {
      callback(node);
      if ((children = node.children) && (n = children.length)) {
        var n, children;
        while (--n >= 0) nodes.push(children[n]);
      }
    }
  }
  function d3_layout_hierarchyVisitAfter(node, callback) {
    var nodes = [ node ], nodes2 = [];
    while ((node = nodes.pop()) != null) {
      nodes2.push(node);
      if ((children = node.children) && (n = children.length)) {
        var i = -1, n, children;
        while (++i < n) nodes.push(children[i]);
      }
    }
    while ((node = nodes2.pop()) != null) {
      callback(node);
    }
  }
  function d3_layout_hierarchyChildren(d) {
    return d.children;
  }
  function d3_layout_hierarchyValue(d) {
    return d.value;
  }
  function d3_layout_hierarchySort(a, b) {
    return b.value - a.value;
  }
  function d3_layout_hierarchyLinks(nodes) {
    return d3.merge(nodes.map(function(parent) {
      return (parent.children || []).map(function(child) {
        return {
          source: parent,
          target: child
        };
      });
    }));
  }
  d3.layout.partition = function() {
    var hierarchy = d3.layout.hierarchy(), size = [ 1, 1 ];
    function position(node, x, dx, dy) {
      var children = node.children;
      node.x = x;
      node.y = node.depth * dy;
      node.dx = dx;
      node.dy = dy;
      if (children && (n = children.length)) {
        var i = -1, n, c, d;
        dx = node.value ? dx / node.value : 0;
        while (++i < n) {
          position(c = children[i], x, d = c.value * dx, dy);
          x += d;
        }
      }
    }
    function depth(node) {
      var children = node.children, d = 0;
      if (children && (n = children.length)) {
        var i = -1, n;
        while (++i < n) d = Math.max(d, depth(children[i]));
      }
      return 1 + d;
    }
    function partition(d, i) {
      var nodes = hierarchy.call(this, d, i);
      position(nodes[0], 0, size[0], size[1] / depth(nodes[0]));
      return nodes;
    }
    partition.size = function(x) {
      if (!arguments.length) return size;
      size = x;
      return partition;
    };
    return d3_layout_hierarchyRebind(partition, hierarchy);
  };
  d3.layout.pie = function() {
    var value = Number, sort = d3_layout_pieSortByValue, startAngle = 0, endAngle = , padAngle = 0;
    function pie(data) {
      var n = data.length, values = data.map(function(d, i) {
        return +value.call(pie, d, i);
      }), a = +(typeof startAngle === "function" ? startAngle.apply(this, arguments) : startAngle), da = (typeof endAngle === "function" ? endAngle.apply(this, arguments) : endAngle) - a, p = Math.min(Math.abs(da) / n, +(typeof padAngle === "function" ? padAngle.apply(this, arguments) : padAngle)), pa = p * (da < 0 ? -1 : 1), sum = d3.sum(values), k = sum ? (da - n * pa) / sum : 0, index = d3.range(n), arcs = [], v;
      if (sort != null) index.sort(sort === d3_layout_pieSortByValue ? function(i, j) {
        return values[j] - values[i];
      } : function(i, j) {
        return sort(data[i], data[j]);
      });
      index.forEach(function(i) {
        arcs[i] = {
          data: data[i],
          value: v = values[i],
          startAngle: a,
          endAngle: a += v * k + pa,
          padAngle: p
        };
      });
      return arcs;
    }
    pie.value = function(_) {
      if (!arguments.length) return value;
      value = _;
      return pie;
    };
    pie.sort = function(_) {
      if (!arguments.length) return sort;
      sort = _;
      return pie;
    };
    pie.startAngle = function(_) {
      if (!arguments.length) return startAngle;
      startAngle = _;
      return pie;
    };
    pie.endAngle = function(_) {
      if (!arguments.length) return endAngle;
      endAngle = _;
      return pie;
    };
    pie.padAngle = function(_) {
      if (!arguments.length) return padAngle;
      padAngle = _;
      return pie;
    };
    return pie;
  };
  var d3_layout_pieSortByValue = {};
  d3.layout.stack = function() {
    var values = d3_identity, order = d3_layout_stackOrderDefault, offset = d3_layout_stackOffsetZero, out = d3_layout_stackOut, x = d3_layout_stackX, y = d3_layout_stackY;
    function stack(data, index) {
      if (!(n = data.length)) return data;
      var series = data.map(function(d, i) {
        return values.call(stack, d, i);
      });
      var points = series.map(function(d) {
        return d.map(function(v, i) {
          return [ x.call(stack, v, i), y.call(stack, v, i) ];
        });
      });
      var orders = order.call(stack, points, index);
      series = d3.permute(series, orders);
      points = d3.permute(points, orders);
      var offsets = offset.call(stack, points, index);
      var m = series[0].length, n, i, j, o;
      for (j = 0; j < m; ++j) {
        out.call(stack, series[0][j], o = offsets[j], points[0][j][1]);
        for (i = 1; i < n; ++i) {
          out.call(stack, series[i][j], o += points[i - 1][j][1], points[i][j][1]);
        }
      }
      return data;
    }
    stack.values = function(x) {
      if (!arguments.length) return values;
      values = x;
      return stack;
    };
    stack.order = function(x) {
      if (!arguments.length) return order;
      order = typeof x === "function" ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault;
      return stack;
    };
    stack.offset = function(x) {
      if (!arguments.length) return offset;
      offset = typeof x === "function" ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero;
      return stack;
    };
    stack.x = function(z) {
      if (!arguments.length) return x;
      x = z;
      return stack;
    };
    stack.y = function(z) {
      if (!arguments.length) return y;
      y = z;
      return stack;
    };
    stack.out = function(z) {
      if (!arguments.length) return out;
      out = z;
      return stack;
    };
    return stack;
  };
  function d3_layout_stackX(d) {
    return d.x;
  }
  function d3_layout_stackY(d) {
    return d.y;
  }
  function d3_layout_stackOut(d, y0, y) {
    d.y0 = y0;
    d.y = y;
  }
  var d3_layout_stackOrders = d3.map({
    "inside-out": function(data) {
      var n = data.length, i, j, max = data.map(d3_layout_stackMaxIndex), sums = data.map(d3_layout_stackReduceSum), index = d3.range(n).sort(function(a, b) {
        return max[a] - max[b];
      }), top = 0, bottom = 0, tops = [], bottoms = [];
      for (i = 0; i < n; ++i) {
        j = index[i];
        if (top < bottom) {
          top += sums[j];
          tops.push(j);
        } else {
          bottom += sums[j];
          bottoms.push(j);
        }
      }
      return bottoms.reverse().concat(tops);
    },
    reverse: function(data) {
      return d3.range(data.length).reverse();
    },
    "default": d3_layout_stackOrderDefault
  });
  var d3_layout_stackOffsets = d3.map({
    silhouette: function(data) {
      var n = data.length, m = data[0].length, sums = [], max = 0, i, j, o, y0 = [];
      for (j = 0; j < m; ++j) {
        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];
        if (o > max) max = o;
        sums.push(o);
      }
      for (j = 0; j < m; ++j) {
        y0[j] = (max - sums[j]) / 2;
      }
      return y0;
    },
    wiggle: function(data) {
      var n = data.length, x = data[0], m = x.length, i, j, k, s1, s2, s3, dx, o, o0, y0 = [];
      y0[0] = o = o0 = 0;
      for (j = 1; j < m; ++j) {
        for (i = 0, s1 = 0; i < n; ++i) s1 += data[i][j][1];
        for (i = 0, s2 = 0, dx = x[j][0] - x[j - 1][0]; i < n; ++i) {
          for (k = 0, s3 = (data[i][j][1] - data[i][j - 1][1]) / (2 * dx); k < i; ++k) {
            s3 += (data[k][j][1] - data[k][j - 1][1]) / dx;
          }
          s2 += s3 * data[i][j][1];
        }
        y0[j] = o -= s1 ? s2 / s1 * dx : 0;
        if (o < o0) o0 = o;
      }
      for (j = 0; j < m; ++j) y0[j] -= o0;
      return y0;
    },
    expand: function(data) {
      var n = data.length, m = data[0].length, k = 1 / n, i, j, o, y0 = [];
      for (j = 0; j < m; ++j) {
        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];
        if (o) for (i = 0; i < n; i++) data[i][j][1] /= o; else for (i = 0; i < n; i++) data[i][j][1] = k;
      }
      for (j = 0; j < m; ++j) y0[j] = 0;
      return y0;
    },
    zero: d3_layout_stackOffsetZero
  });
  function d3_layout_stackOrderDefault(data) {
    return d3.range(data.length);
  }
  function d3_layout_stackOffsetZero(data) {
    var j = -1, m = data[0].length, y0 = [];
    while (++j < m) y0[j] = 0;
    return y0;
  }
  function d3_layout_stackMaxIndex(array) {
    var i = 1, j = 0, v = array[0][1], k, n = array.length;
    for (;i < n; ++i) {
      if ((k = array[i][1]) > v) {
        j = i;
        v = k;
      }
    }
    return j;
  }
  function d3_layout_stackReduceSum(d) {
    return d.reduce(d3_layout_stackSum, 0);
  }
  function d3_layout_stackSum(p, d) {
    return p + d[1];
  }
  d3.layout.histogram = function() {
    var frequency = true, valuer = Number, ranger = d3_layout_histogramRange, binner = d3_layout_histogramBinSturges;
    function histogram(data, i) {
      var bins = [], values = data.map(valuer, this), range = ranger.call(this, values, i), thresholds = binner.call(this, range, values, i), bin, i = -1, n = values.length, m = thresholds.length - 1, k = frequency ? 1 : 1 / n, x;
      while (++i < m) {
        bin = bins[i] = [];
        bin.dx = thresholds[i + 1] - (bin.x = thresholds[i]);
        bin.y = 0;
      }
      if (m > 0) {
        i = -1;
        while (++i < n) {
          x = values[i];
          if (x >= range[0] && x <= range[1]) {
            bin = bins[d3.bisect(thresholds, x, 1, m) - 1];
            bin.y += k;
            bin.push(data[i]);
          }
        }
      }
      return bins;
    }
    histogram.value = function(x) {
      if (!arguments.length) return valuer;
      valuer = x;
      return histogram;
    };
    histogram.range = function(x) {
      if (!arguments.length) return ranger;
      ranger = d3_functor(x);
      return histogram;
    };
    histogram.bins = function(x) {
      if (!arguments.length) return binner;
      binner = typeof x === "number" ? function(range) {
        return d3_layout_histogramBinFixed(range, x);
      } : d3_functor(x);
      return histogram;
    };
    histogram.frequency = function(x) {
      if (!arguments.length) return frequency;
      frequency = !!x;
      return histogram;
    };
    return histogram;
  };
  function d3_layout_histogramBinSturges(range, values) {
    return d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + 1));
  }
  function d3_layout_histogramBinFixed(range, n) {
    var x = -1, b = +range[0], m = (range[1] - b) / n, f = [];
    while (++x <= n) f[x] = m * x + b;
    return f;
  }
  function d3_layout_histogramRange(values) {
    return [ d3.min(values), d3.max(values) ];
  }
  d3.layout.pack = function() {
    var hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort), padding = 0, size = [ 1, 1 ], radius;
    function pack(d, i) {
      var nodes = hierarchy.call(this, d, i), root = nodes[0], w = size[0], h = size[1], r = radius == null ? Math.sqrt : typeof radius === "function" ? radius : function() {
        return radius;
      };
      root.x = root.y = 0;
      d3_layout_hierarchyVisitAfter(root, function(d) {
        d.r = +r(d.value);
      });
      d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);
      if (padding) {
        var dr = padding * (radius ? 1 : Math.max(2 * root.r / w, 2 * root.r / h)) / 2;
        d3_layout_hierarchyVisitAfter(root, function(d) {
          d.r += dr;
        });
        d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);
        d3_layout_hierarchyVisitAfter(root, function(d) {
          d.r -= dr;
        });
      }
      d3_layout_packTransform(root, w / 2, h / 2, radius ? 1 : 1 / Math.max(2 * root.r / w, 2 * root.r / h));
      return nodes;
    }
    pack.size = function(_) {
      if (!arguments.length) return size;
      size = _;
      return pack;
    };
    pack.radius = function(_) {
      if (!arguments.length) return radius;
      radius = _ == null || typeof _ === "function" ? _ : +_;
      return pack;
    };
    pack.padding = function(_) {
      if (!arguments.length) return padding;
      padding = +_;
      return pack;
    };
    return d3_layout_hierarchyRebind(pack, hierarchy);
  };
  function d3_layout_packSort(a, b) {
    return a.value - b.value;
  }
  function d3_layout_packInsert(a, b) {
    var c = a._pack_next;
    a._pack_next = b;
    b._pack_prev = a;
    b._pack_next = c;
    c._pack_prev = b;
  }
  function d3_layout_packSplice(a, b) {
    a._pack_next = b;
    b._pack_prev = a;
  }
  function d3_layout_packIntersects(a, b) {
    var dx = b.x - a.x, dy = b.y - a.y, dr = a.r + b.r;
    return .999 * dr * dr > dx * dx + dy * dy;
  }
  function d3_layout_packSiblings(node) {
    if (!(nodes = node.children) || !(n = nodes.length)) return;
    var nodes, xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, a, b, c, i, j, k, n;
    function bound(node) {
      xMin = Math.min(node.x - node.r, xMin);
      xMax = Math.max(node.x + node.r, xMax);
      yMin = Math.min(node.y - node.r, yMin);
      yMax = Math.max(node.y + node.r, yMax);
    }
    nodes.forEach(d3_layout_packLink);
    a = nodes[0];
    a.x = -a.r;
    a.y = 0;
    bound(a);
    if (n > 1) {
      b = nodes[1];
      b.x = b.r;
      b.y = 0;
      bound(b);
      if (n > 2) {
        c = nodes[2];
        d3_layout_packPlace(a, b, c);
        bound(c);
        d3_layout_packInsert(a, c);
        a._pack_prev = c;
        d3_layout_packInsert(c, b);
        b = a._pack_next;
        for (i = 3; i < n; i++) {
          d3_layout_packPlace(a, b, c = nodes[i]);
          var isect = 0, s1 = 1, s2 = 1;
          for (j = b._pack_next; j !== b; j = j._pack_next, s1++) {
            if (d3_layout_packIntersects(j, c)) {
              isect = 1;
              break;
            }
          }
          if (isect == 1) {
            for (k = a._pack_prev; k !== j._pack_prev; k = k._pack_prev, s2++) {
              if (d3_layout_packIntersects(k, c)) {
                break;
              }
            }
          }
          if (isect) {
            if (s1 < s2 || s1 == s2 && b.r < a.r) d3_layout_packSplice(a, b = j); else d3_layout_packSplice(a = k, b);
            i--;
          } else {
            d3_layout_packInsert(a, c);
            b = c;
            bound(c);
          }
        }
      }
    }
    var cx = (xMin + xMax) / 2, cy = (yMin + yMax) / 2, cr = 0;
    for (i = 0; i < n; i++) {
      c = nodes[i];
      c.x -= cx;
      c.y -= cy;
      cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));
    }
    node.r = cr;
    nodes.forEach(d3_layout_packUnlink);
  }
  function d3_layout_packLink(node) {
    node._pack_next = node._pack_prev = node;
  }
  function d3_layout_packUnlink(node) {
    delete node._pack_next;
    delete node._pack_prev;
  }
  function d3_layout_packTransform(node, x, y, k) {
    var children = node.children;
    node.x = x += k * node.x;
    node.y = y += k * node.y;
    node.r *= k;
    if (children) {
      var i = -1, n = children.length;
      while (++i < n) d3_layout_packTransform(children[i], x, y, k);
    }
  }
  function d3_layout_packPlace(a, b, c) {
    var db = a.r + c.r, dx = b.x - a.x, dy = b.y - a.y;
    if (db && (dx || dy)) {
      var da = b.r + c.r, dc = dx * dx + dy * dy;
      da *= da;
      db *= db;
      var x = .5 + (db - da) / (2 * dc), y = Math.sqrt(Math.max(0, 2 * da * (db + dc) - (db -= dc) * db - da * da)) / (2 * dc);
      c.x = a.x + x * dx + y * dy;
      c.y = a.y + x * dy - y * dx;
    } else {
      c.x = a.x + db;
      c.y = a.y;
    }
  }
  d3.layout.tree = function() {
    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = null;
    function tree(d, i) {
      var nodes = hierarchy.call(this, d, i), root0 = nodes[0], root1 = wrapTree(root0);
      d3_layout_hierarchyVisitAfter(root1, firstWalk), root1.parent.m = -root1.z;
      d3_layout_hierarchyVisitBefore(root1, secondWalk);
      if (nodeSize) d3_layout_hierarchyVisitBefore(root0, sizeNode); else {
        var left = root0, right = root0, bottom = root0;
        d3_layout_hierarchyVisitBefore(root0, function(node) {
          if (node.x < left.x) left = node;
          if (node.x > right.x) right = node;
          if (node.depth > bottom.depth) bottom = node;
        });
        var tx = separation(left, right) / 2 - left.x, kx = size[0] / (right.x + separation(right, left) / 2 + tx), ky = size[1] / (bottom.depth || 1);
        d3_layout_hierarchyVisitBefore(root0, function(node) {
          node.x = (node.x + tx) * kx;
          node.y = node.depth * ky;
        });
      }
      return nodes;
    }
    function wrapTree(root0) {
      var root1 = {
        A: null,
        children: [ root0 ]
      }, queue = [ root1 ], node1;
      while ((node1 = queue.pop()) != null) {
        for (var children = node1.children, child, i = 0, n = children.length; i < n; ++i) {
          queue.push((children[i] = child = {
            _: children[i],
            parent: node1,
            children: (child = children[i].children) && child.slice() || [],
            A: null,
            a: null,
            z: 0,
            m: 0,
            c: 0,
            s: 0,
            t: null,
            i: i
          }).a = child);
        }
      }
      return root1.children[0];
    }
    function firstWalk(v) {
      var children = v.children, siblings = v.parent.children, w = v.i ? siblings[v.i - 1] : null;
      if (children.length) {
        d3_layout_treeShift(v);
        var midpoint = (children[0].z + children[children.length - 1].z) / 2;
        if (w) {
          v.z = w.z + separation(v._, w._);
          v.m = v.z - midpoint;
        } else {
          v.z = midpoint;
        }
      } else if (w) {
        v.z = w.z + separation(v._, w._);
      }
      v.parent.A = apportion(v, w, v.parent.A || siblings[0]);
    }
    function secondWalk(v) {
      v._.x = v.z + v.parent.m;
      v.m += v.parent.m;
    }
    function apportion(v, w, ancestor) {
      if (w) {
        var vip = v, vop = v, vim = w, vom = vip.parent.children[0], sip = vip.m, sop = vop.m, sim = vim.m, som = vom.m, shift;
        while (vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim && vip) {
          vom = d3_layout_treeLeft(vom);
          vop = d3_layout_treeRight(vop);
          vop.a = v;
          shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);
          if (shift > 0) {
            d3_layout_treeMove(d3_layout_treeAncestor(vim, v, ancestor), v, shift);
            sip += shift;
            sop += shift;
          }
          sim += vim.m;
          sip += vip.m;
          som += vom.m;
          sop += vop.m;
        }
        if (vim && !d3_layout_treeRight(vop)) {
          vop.t = vim;
          vop.m += sim - sop;
        }
        if (vip && !d3_layout_treeLeft(vom)) {
          vom.t = vip;
          vom.m += sip - som;
          ancestor = v;
        }
      }
      return ancestor;
    }
    function sizeNode(node) {
      node.x *= size[0];
      node.y = node.depth * size[1];
    }
    tree.separation = function(x) {
      if (!arguments.length) return separation;
      separation = x;
      return tree;
    };
    tree.size = function(x) {
      if (!arguments.length) return nodeSize ? null : size;
      nodeSize = (size = x) == null ? sizeNode : null;
      return tree;
    };
    tree.nodeSize = function(x) {
      if (!arguments.length) return nodeSize ? size : null;
      nodeSize = (size = x) == null ? null : sizeNode;
      return tree;
    };
    return d3_layout_hierarchyRebind(tree, hierarchy);
  };
  function d3_layout_treeSeparation(a, b) {
    return a.parent == b.parent ? 1 : 2;
  }
  function d3_layout_treeLeft(v) {
    var children = v.children;
    return children.length ? children[0] : v.t;
  }
  function d3_layout_treeRight(v) {
    var children = v.children, n;
    return (n = children.length) ? children[n - 1] : v.t;
  }
  function d3_layout_treeMove(wm, wp, shift) {
    var change = shift / (wp.i - wm.i);
    wp.c -= change;
    wp.s += shift;
    wm.c += change;
    wp.z += shift;
    wp.m += shift;
  }
  function d3_layout_treeShift(v) {
    var shift = 0, change = 0, children = v.children, i = children.length, w;
    while (--i >= 0) {
      w = children[i];
      w.z += shift;
      w.m += shift;
      shift += w.s + (change += w.c);
    }
  }
  function d3_layout_treeAncestor(vim, v, ancestor) {
    return vim.a.parent === v.parent ? vim.a : ancestor;
  }
  d3.layout.cluster = function() {
    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = false;
    function cluster(d, i) {
      var nodes = hierarchy.call(this, d, i), root = nodes[0], previousNode, x = 0;
      d3_layout_hierarchyVisitAfter(root, function(node) {
        var children = node.children;
        if (children && children.length) {
          node.x = d3_layout_clusterX(children);
          node.y = d3_layout_clusterY(children);
        } else {
          node.x = previousNode ? x += separation(node, previousNode) : 0;
          node.y = 0;
          previousNode = node;
        }
      });
      var left = d3_layout_clusterLeft(root), right = d3_layout_clusterRight(root), x0 = left.x - separation(left, right) / 2, x1 = right.x + separation(right, left) / 2;
      d3_layout_hierarchyVisitAfter(root, nodeSize ? function(node) {
        node.x = (node.x - root.x) * size[0];
        node.y = (root.y - node.y) * size[1];
      } : function(node) {
        node.x = (node.x - x0) / (x1 - x0) * size[0];
        node.y = (1 - (root.y ? node.y / root.y : 1)) * size[1];
      });
      return nodes;
    }
    cluster.separation = function(x) {
      if (!arguments.length) return separation;
      separation = x;
      return cluster;
    };
    cluster.size = function(x) {
      if (!arguments.length) return nodeSize ? null : size;
      nodeSize = (size = x) == null;
      return cluster;
    };
    cluster.nodeSize = function(x) {
      if (!arguments.length) return nodeSize ? size : null;
      nodeSize = (size = x) != null;
      return cluster;
    };
    return d3_layout_hierarchyRebind(cluster, hierarchy);
  };
  function d3_layout_clusterY(children) {
    return 1 + d3.max(children, function(child) {
      return child.y;
    });
  }
  function d3_layout_clusterX(children) {
    return children.reduce(function(x, child) {
      return x + child.x;
    }, 0) / children.length;
  }
  function d3_layout_clusterLeft(node) {
    var children = node.children;
    return children && children.length ? d3_layout_clusterLeft(children[0]) : node;
  }
  function d3_layout_clusterRight(node) {
    var children = node.children, n;
    return children && (n = children.length) ? d3_layout_clusterRight(children[n - 1]) : node;
  }
  d3.layout.treemap = function() {
    var hierarchy = d3.layout.hierarchy(), round = Math.round, size = [ 1, 1 ], padding = null, pad = d3_layout_treemapPadNull, sticky = false, stickies, mode = "squarify", ratio = .5 * (1 + Math.sqrt(5));
    function scale(children, k) {
      var i = -1, n = children.length, child, area;
      while (++i < n) {
        area = (child = children[i]).value * (k < 0 ? 0 : k);
        child.area = isNaN(area) || area <= 0 ? 0 : area;
      }
    }
    function squarify(node) {
      var children = node.children;
      if (children && children.length) {
        var rect = pad(node), row = [], remaining = children.slice(), child, best = Infinity, score, u = mode === "slice" ? rect.dx : mode === "dice" ? rect.dy : mode === "slice-dice" ? node.depth & 1 ? rect.dy : rect.dx : Math.min(rect.dx, rect.dy), n;
        scale(remaining, rect.dx * rect.dy / node.value);
        row.area = 0;
        while ((n = remaining.length) > 0) {
          row.push(child = remaining[n - 1]);
          row.area += child.area;
          if (mode !== "squarify" || (score = worst(row, u)) <= best) {
            remaining.pop();
            best = score;
          } else {
            row.area -= row.pop().area;
            position(row, u, rect, false);
            u = Math.min(rect.dx, rect.dy);
            row.length = row.area = 0;
            best = Infinity;
          }
        }
        if (row.length) {
          position(row, u, rect, true);
          row.length = row.area = 0;
        }
        children.forEach(squarify);
      }
    }
    function stickify(node) {
      var children = node.children;
      if (children && children.length) {
        var rect = pad(node), remaining = children.slice(), child, row = [];
        scale(remaining, rect.dx * rect.dy / node.value);
        row.area = 0;
        while (child = remaining.pop()) {
          row.push(child);
          row.area += child.area;
          if (child.z != null) {
            position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length);
            row.length = row.area = 0;
          }
        }
        children.forEach(stickify);
      }
    }
    function worst(row, u) {
      var s = row.area, r, rmax = 0, rmin = Infinity, i = -1, n = row.length;
      while (++i < n) {
        if (!(r = row[i].area)) continue;
        if (r < rmin) rmin = r;
        if (r > rmax) rmax = r;
      }
      s *= s;
      u *= u;
      return s ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : Infinity;
    }
    function position(row, u, rect, flush) {
      var i = -1, n = row.length, x = rect.x, y = rect.y, v = u ? round(row.area / u) : 0, o;
      if (u == rect.dx) {
        if (flush || v > rect.dy) v = rect.dy;
        while (++i < n) {
          o = row[i];
          o.x = x;
          o.y = y;
          o.dy = v;
          x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : 0);
        }
        o.z = true;
        o.dx += rect.x + rect.dx - x;
        rect.y += v;
        rect.dy -= v;
      } else {
        if (flush || v > rect.dx) v = rect.dx;
        while (++i < n) {
          o = row[i];
          o.x = x;
          o.y = y;
          o.dx = v;
          y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : 0);
        }
        o.z = false;
        o.dy += rect.y + rect.dy - y;
        rect.x += v;
        rect.dx -= v;
      }
    }
    function treemap(d) {
      var nodes = stickies || hierarchy(d), root = nodes[0];
      root.x = root.y = 0;
      if (root.value) root.dx = size[0], root.dy = size[1]; else root.dx = root.dy = 0;
      if (stickies) hierarchy.revalue(root);
      scale([ root ], root.dx * root.dy / root.value);
      (stickies ? stickify : squarify)(root);
      if (sticky) stickies = nodes;
      return nodes;
    }
    treemap.size = function(x) {
      if (!arguments.length) return size;
      size = x;
      return treemap;
    };
    treemap.padding = function(x) {
      if (!arguments.length) return padding;
      function padFunction(node) {
        var p = x.call(treemap, node, node.depth);
        return p == null ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, typeof p === "number" ? [ p, p, p, p ] : p);
      }
      function padConstant(node) {
        return d3_layout_treemapPad(node, x);
      }
      var type;
      pad = (padding = x) == null ? d3_layout_treemapPadNull : (type = typeof x) === "function" ? padFunction : type === "number" ? (x = [ x, x, x, x ], 
      padConstant) : padConstant;
      return treemap;
    };
    treemap.round = function(x) {
      if (!arguments.length) return round != Number;
      round = x ? Math.round : Number;
      return treemap;
    };
    treemap.sticky = function(x) {
      if (!arguments.length) return sticky;
      sticky = x;
      stickies = null;
      return treemap;
    };
    treemap.ratio = function(x) {
      if (!arguments.length) return ratio;
      ratio = x;
      return treemap;
    };
    treemap.mode = function(x) {
      if (!arguments.length) return mode;
      mode = x + "";
      return treemap;
    };
    return d3_layout_hierarchyRebind(treemap, hierarchy);
  };
  function d3_layout_treemapPadNull(node) {
    return {
      x: node.x,
      y: node.y,
      dx: node.dx,
      dy: node.dy
    };
  }
  function d3_layout_treemapPad(node, padding) {
    var x = node.x + padding[3], y = node.y + padding[0], dx = node.dx - padding[1] - padding[3], dy = node.dy - padding[0] - padding[2];
    if (dx < 0) {
      x += dx / 2;
      dx = 0;
    }
    if (dy < 0) {
      y += dy / 2;
      dy = 0;
    }
    return {
      x: x,
      y: y,
      dx: dx,
      dy: dy
    };
  }
  d3.random = {
    normal: function(, ) {
      var n = arguments.length;
      if (n < 2)  = 1;
      if (n < 1)  = 0;
      return function() {
        var x, y, r;
        do {
          x = Math.random() * 2 - 1;
          y = Math.random() * 2 - 1;
          r = x * x + y * y;
        } while (!r || r > 1);
        return  +  * x * Math.sqrt(-2 * Math.log(r) / r);
      };
    },
    logNormal: function() {
      var random = d3.random.normal.apply(d3, arguments);
      return function() {
        return Math.exp(random());
      };
    },
    bates: function(m) {
      var random = d3.random.irwinHall(m);
      return function() {
        return random() / m;
      };
    },
    irwinHall: function(m) {
      return function() {
        for (var s = 0, j = 0; j < m; j++) s += Math.random();
        return s;
      };
    }
  };
  d3.scale = {};
  function d3_scaleExtent(domain) {
    var start = domain[0], stop = domain[domain.length - 1];
    return start < stop ? [ start, stop ] : [ stop, start ];
  }
  function d3_scaleRange(scale) {
    return scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());
  }
  function d3_scale_bilinear(domain, range, uninterpolate, interpolate) {
    var u = uninterpolate(domain[0], domain[1]), i = interpolate(range[0], range[1]);
    return function(x) {
      return i(u(x));
    };
  }
  function d3_scale_nice(domain, nice) {
    var i0 = 0, i1 = domain.length - 1, x0 = domain[i0], x1 = domain[i1], dx;
    if (x1 < x0) {
      dx = i0, i0 = i1, i1 = dx;
      dx = x0, x0 = x1, x1 = dx;
    }
    domain[i0] = nice.floor(x0);
    domain[i1] = nice.ceil(x1);
    return domain;
  }
  function d3_scale_niceStep(step) {
    return step ? {
      floor: function(x) {
        return Math.floor(x / step) * step;
      },
      ceil: function(x) {
        return Math.ceil(x / step) * step;
      }
    } : d3_scale_niceIdentity;
  }
  var d3_scale_niceIdentity = {
    floor: d3_identity,
    ceil: d3_identity
  };
  function d3_scale_polylinear(domain, range, uninterpolate, interpolate) {
    var u = [], i = [], j = 0, k = Math.min(domain.length, range.length) - 1;
    if (domain[k] < domain[0]) {
      domain = domain.slice().reverse();
      range = range.slice().reverse();
    }
    while (++j <= k) {
      u.push(uninterpolate(domain[j - 1], domain[j]));
      i.push(interpolate(range[j - 1], range[j]));
    }
    return function(x) {
      var j = d3.bisect(domain, x, 1, k) - 1;
      return i[j](u[j](x));
    };
  }
  d3.scale.linear = function() {
    return d3_scale_linear([ 0, 1 ], [ 0, 1 ], d3_interpolate, false);
  };
  function d3_scale_linear(domain, range, interpolate, clamp) {
    var output, input;
    function rescale() {
      var linear = Math.min(domain.length, range.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear, uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;
      output = linear(domain, range, uninterpolate, interpolate);
      input = linear(range, domain, uninterpolate, d3_interpolate);
      return scale;
    }
    function scale(x) {
      return output(x);
    }
    scale.invert = function(y) {
      return input(y);
    };
    scale.domain = function(x) {
      if (!arguments.length) return domain;
      domain = x.map(Number);
      return rescale();
    };
    scale.range = function(x) {
      if (!arguments.length) return range;
      range = x;
      return rescale();
    };
    scale.rangeRound = function(x) {
      return scale.range(x).interpolate(d3_interpolateRound);
    };
    scale.clamp = function(x) {
      if (!arguments.length) return clamp;
      clamp = x;
      return rescale();
    };
    scale.interpolate = function(x) {
      if (!arguments.length) return interpolate;
      interpolate = x;
      return rescale();
    };
    scale.ticks = function(m) {
      return d3_scale_linearTicks(domain, m);
    };
    scale.tickFormat = function(m, format) {
      return d3_scale_linearTickFormat(domain, m, format);
    };
    scale.nice = function(m) {
      d3_scale_linearNice(domain, m);
      return rescale();
    };
    scale.copy = function() {
      return d3_scale_linear(domain, range, interpolate, clamp);
    };
    return rescale();
  }
  function d3_scale_linearRebind(scale, linear) {
    return d3.rebind(scale, linear, "range", "rangeRound", "interpolate", "clamp");
  }
  function d3_scale_linearNice(domain, m) {
    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));
    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));
    return domain;
  }
  function d3_scale_linearTickRange(domain, m) {
    if (m == null) m = 10;
    var extent = d3_scaleExtent(domain), span = extent[1] - extent[0], step = Math.pow(10, Math.floor(Math.log(span / m) / Math.LN10)), err = m / span * step;
    if (err <= .15) step *= 10; else if (err <= .35) step *= 5; else if (err <= .75) step *= 2;
    extent[0] = Math.ceil(extent[0] / step) * step;
    extent[1] = Math.floor(extent[1] / step) * step + step * .5;
    extent[2] = step;
    return extent;
  }
  function d3_scale_linearTicks(domain, m) {
    return d3.range.apply(d3, d3_scale_linearTickRange(domain, m));
  }
  function d3_scale_linearTickFormat(domain, m, format) {
    var range = d3_scale_linearTickRange(domain, m);
    if (format) {
      var match = d3_format_re.exec(format);
      match.shift();
      if (match[8] === "s") {
        var prefix = d3.formatPrefix(Math.max(abs(range[0]), abs(range[1])));
        if (!match[7]) match[7] = "." + d3_scale_linearPrecision(prefix.scale(range[2]));
        match[8] = "f";
        format = d3.format(match.join(""));
        return function(d) {
          return format(prefix.scale(d)) + prefix.symbol;
        };
      }
      if (!match[7]) match[7] = "." + d3_scale_linearFormatPrecision(match[8], range);
      format = match.join("");
    } else {
      format = ",." + d3_scale_linearPrecision(range[2]) + "f";
    }
    return d3.format(format);
  }
  var d3_scale_linearFormatSignificant = {
    s: 1,
    g: 1,
    p: 1,
    r: 1,
    e: 1
  };
  function d3_scale_linearPrecision(value) {
    return -Math.floor(Math.log(value) / Math.LN10 + .01);
  }
  function d3_scale_linearFormatPrecision(type, range) {
    var p = d3_scale_linearPrecision(range[2]);
    return type in d3_scale_linearFormatSignificant ? Math.abs(p - d3_scale_linearPrecision(Math.max(abs(range[0]), abs(range[1])))) + +(type !== "e") : p - (type === "%") * 2;
  }
  d3.scale.log = function() {
    return d3_scale_log(d3.scale.linear().domain([ 0, 1 ]), 10, true, [ 1, 10 ]);
  };
  function d3_scale_log(linear, base, positive, domain) {
    function log(x) {
      return (positive ? Math.log(x < 0 ? 0 : x) : -Math.log(x > 0 ? 0 : -x)) / Math.log(base);
    }
    function pow(x) {
      return positive ? Math.pow(base, x) : -Math.pow(base, -x);
    }
    function scale(x) {
      return linear(log(x));
    }
    scale.invert = function(x) {
      return pow(linear.invert(x));
    };
    scale.domain = function(x) {
      if (!arguments.length) return domain;
      positive = x[0] >= 0;
      linear.domain((domain = x.map(Number)).map(log));
      return scale;
    };
    scale.base = function(_) {
      if (!arguments.length) return base;
      base = +_;
      linear.domain(domain.map(log));
      return scale;
    };
    scale.nice = function() {
      var niced = d3_scale_nice(domain.map(log), positive ? Math : d3_scale_logNiceNegative);
      linear.domain(niced);
      domain = niced.map(pow);
      return scale;
    };
    scale.ticks = function() {
      var extent = d3_scaleExtent(domain), ticks = [], u = extent[0], v = extent[1], i = Math.floor(log(u)), j = Math.ceil(log(v)), n = base % 1 ? 2 : base;
      if (isFinite(j - i)) {
        if (positive) {
          for (;i < j; i++) for (var k = 1; k < n; k++) ticks.push(pow(i) * k);
          ticks.push(pow(i));
        } else {
          ticks.push(pow(i));
          for (;i++ < j; ) for (var k = n - 1; k > 0; k--) ticks.push(pow(i) * k);
        }
        for (i = 0; ticks[i] < u; i++) {}
        for (j = ticks.length; ticks[j - 1] > v; j--) {}
        ticks = ticks.slice(i, j);
      }
      return ticks;
    };
    scale.tickFormat = function(n, format) {
      if (!arguments.length) return d3_scale_logFormat;
      if (arguments.length < 2) format = d3_scale_logFormat; else if (typeof format !== "function") format = d3.format(format);
      var k = Math.max(1, base * n / scale.ticks().length);
      return function(d) {
        var i = d / pow(Math.round(log(d)));
        if (i * base < base - .5) i *= base;
        return i <= k ? format(d) : "";
      };
    };
    scale.copy = function() {
      return d3_scale_log(linear.copy(), base, positive, domain);
    };
    return d3_scale_linearRebind(scale, linear);
  }
  var d3_scale_logFormat = d3.format(".0e"), d3_scale_logNiceNegative = {
    floor: function(x) {
      return -Math.ceil(-x);
    },
    ceil: function(x) {
      return -Math.floor(-x);
    }
  };
  d3.scale.pow = function() {
    return d3_scale_pow(d3.scale.linear(), 1, [ 0, 1 ]);
  };
  function d3_scale_pow(linear, exponent, domain) {
    var powp = d3_scale_powPow(exponent), powb = d3_scale_powPow(1 / exponent);
    function scale(x) {
      return linear(powp(x));
    }
    scale.invert = function(x) {
      return powb(linear.invert(x));
    };
    scale.domain = function(x) {
      if (!arguments.length) return domain;
      linear.domain((domain = x.map(Number)).map(powp));
      return scale;
    };
    scale.ticks = function(m) {
      return d3_scale_linearTicks(domain, m);
    };
    scale.tickFormat = function(m, format) {
      return d3_scale_linearTickFormat(domain, m, format);
    };
    scale.nice = function(m) {
      return scale.domain(d3_scale_linearNice(domain, m));
    };
    scale.exponent = function(x) {
      if (!arguments.length) return exponent;
      powp = d3_scale_powPow(exponent = x);
      powb = d3_scale_powPow(1 / exponent);
      linear.domain(domain.map(powp));
      return scale;
    };
    scale.copy = function() {
      return d3_scale_pow(linear.copy(), exponent, domain);
    };
    return d3_scale_linearRebind(scale, linear);
  }
  function d3_scale_powPow(e) {
    return function(x) {
      return x < 0 ? -Math.pow(-x, e) : Math.pow(x, e);
    };
  }
  d3.scale.sqrt = function() {
    return d3.scale.pow().exponent(.5);
  };
  d3.scale.ordinal = function() {
    return d3_scale_ordinal([], {
      t: "range",
      a: [ [] ]
    });
  };
  function d3_scale_ordinal(domain, ranger) {
    var index, range, rangeBand;
    function scale(x) {
      return range[((index.get(x) || (ranger.t === "range" ? index.set(x, domain.push(x)) : NaN)) - 1) % range.length];
    }
    function steps(start, step) {
      return d3.range(domain.length).map(function(i) {
        return start + step * i;
      });
    }
    scale.domain = function(x) {
      if (!arguments.length) return domain;
      domain = [];
      index = new d3_Map();
      var i = -1, n = x.length, xi;
      while (++i < n) if (!index.has(xi = x[i])) index.set(xi, domain.push(xi));
      return scale[ranger.t].apply(scale, ranger.a);
    };
    scale.range = function(x) {
      if (!arguments.length) return range;
      range = x;
      rangeBand = 0;
      ranger = {
        t: "range",
        a: arguments
      };
      return scale;
    };
    scale.rangePoints = function(x, padding) {
      if (arguments.length < 2) padding = 0;
      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = (start + stop) / 2, 
      0) : (stop - start) / (domain.length - 1 + padding);
      range = steps(start + step * padding / 2, step);
      rangeBand = 0;
      ranger = {
        t: "rangePoints",
        a: arguments
      };
      return scale;
    };
    scale.rangeRoundPoints = function(x, padding) {
      if (arguments.length < 2) padding = 0;
      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = stop = Math.round((start + stop) / 2), 
      0) : (stop - start) / (domain.length - 1 + padding) | 0;
      range = steps(start + Math.round(step * padding / 2 + (stop - start - (domain.length - 1 + padding) * step) / 2), step);
      rangeBand = 0;
      ranger = {
        t: "rangeRoundPoints",
        a: arguments
      };
      return scale;
    };
    scale.rangeBands = function(x, padding, outerPadding) {
      if (arguments.length < 2) padding = 0;
      if (arguments.length < 3) outerPadding = padding;
      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = (stop - start) / (domain.length - padding + 2 * outerPadding);
      range = steps(start + step * outerPadding, step);
      if (reverse) range.reverse();
      rangeBand = step * (1 - padding);
      ranger = {
        t: "rangeBands",
        a: arguments
      };
      return scale;
    };
    scale.rangeRoundBands = function(x, padding, outerPadding) {
      if (arguments.length < 2) padding = 0;
      if (arguments.length < 3) outerPadding = padding;
      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = Math.floor((stop - start) / (domain.length - padding + 2 * outerPadding));
      range = steps(start + Math.round((stop - start - (domain.length - padding) * step) / 2), step);
      if (reverse) range.reverse();
      rangeBand = Math.round(step * (1 - padding));
      ranger = {
        t: "rangeRoundBands",
        a: arguments
      };
      return scale;
    };
    scale.rangeBand = function() {
      return rangeBand;
    };
    scale.rangeExtent = function() {
      return d3_scaleExtent(ranger.a[0]);
    };
    scale.copy = function() {
      return d3_scale_ordinal(domain, ranger);
    };
    return scale.domain(domain);
  }
  d3.scale.category10 = function() {
    return d3.scale.ordinal().range(d3_category10);
  };
  d3.scale.category20 = function() {
    return d3.scale.ordinal().range(d3_category20);
  };
  d3.scale.category20b = function() {
    return d3.scale.ordinal().range(d3_category20b);
  };
  d3.scale.category20c = function() {
    return d3.scale.ordinal().range(d3_category20c);
  };
  var d3_category10 = [ 2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175 ].map(d3_rgbString);
  var d3_category20 = [ 2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725 ].map(d3_rgbString);
  var d3_category20b = [ 3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654 ].map(d3_rgbString);
  var d3_category20c = [ 3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081 ].map(d3_rgbString);
  d3.scale.quantile = function() {
    return d3_scale_quantile([], []);
  };
  function d3_scale_quantile(domain, range) {
    var thresholds;
    function rescale() {
      var k = 0, q = range.length;
      thresholds = [];
      while (++k < q) thresholds[k - 1] = d3.quantile(domain, k / q);
      return scale;
    }
    function scale(x) {
      if (!isNaN(x = +x)) return range[d3.bisect(thresholds, x)];
    }
    scale.domain = function(x) {
      if (!arguments.length) return domain;
      domain = x.map(d3_number).filter(d3_numeric).sort(d3_ascending);
      return rescale();
    };
    scale.range = function(x) {
      if (!arguments.length) return range;
      range = x;
      return rescale();
    };
    scale.quantiles = function() {
      return thresholds;
    };
    scale.invertExtent = function(y) {
      y = range.indexOf(y);
      return y < 0 ? [ NaN, NaN ] : [ y > 0 ? thresholds[y - 1] : domain[0], y < thresholds.length ? thresholds[y] : domain[domain.length - 1] ];
    };
    scale.copy = function() {
      return d3_scale_quantile(domain, range);
    };
    return rescale();
  }
  d3.scale.quantize = function() {
    return d3_scale_quantize(0, 1, [ 0, 1 ]);
  };
  function d3_scale_quantize(x0, x1, range) {
    var kx, i;
    function scale(x) {
      return range[Math.max(0, Math.min(i, Math.floor(kx * (x - x0))))];
    }
    function rescale() {
      kx = range.length / (x1 - x0);
      i = range.length - 1;
      return scale;
    }
    scale.domain = function(x) {
      if (!arguments.length) return [ x0, x1 ];
      x0 = +x[0];
      x1 = +x[x.length - 1];
      return rescale();
    };
    scale.range = function(x) {
      if (!arguments.length) return range;
      range = x;
      return rescale();
    };
    scale.invertExtent = function(y) {
      y = range.indexOf(y);
      y = y < 0 ? NaN : y / kx + x0;
      return [ y, y + 1 / kx ];
    };
    scale.copy = function() {
      return d3_scale_quantize(x0, x1, range);
    };
    return rescale();
  }
  d3.scale.threshold = function() {
    return d3_scale_threshold([ .5 ], [ 0, 1 ]);
  };
  function d3_scale_threshold(domain, range) {
    function scale(x) {
      if (x <= x) return range[d3.bisect(domain, x)];
    }
    scale.domain = function(_) {
      if (!arguments.length) return domain;
      domain = _;
      return scale;
    };
    scale.range = function(_) {
      if (!arguments.length) return range;
      range = _;
      return scale;
    };
    scale.invertExtent = function(y) {
      y = range.indexOf(y);
      return [ domain[y - 1], domain[y] ];
    };
    scale.copy = function() {
      return d3_scale_threshold(domain, range);
    };
    return scale;
  }
  d3.scale.identity = function() {
    return d3_scale_identity([ 0, 1 ]);
  };
  function d3_scale_identity(domain) {
    function identity(x) {
      return +x;
    }
    identity.invert = identity;
    identity.domain = identity.range = function(x) {
      if (!arguments.length) return domain;
      domain = x.map(identity);
      return identity;
    };
    identity.ticks = function(m) {
      return d3_scale_linearTicks(domain, m);
    };
    identity.tickFormat = function(m, format) {
      return d3_scale_linearTickFormat(domain, m, format);
    };
    identity.copy = function() {
      return d3_scale_identity(domain);
    };
    return identity;
  }
  d3.svg = {};
  function d3_zero() {
    return 0;
  }
  d3.svg.arc = function() {
    var innerRadius = d3_svg_arcInnerRadius, outerRadius = d3_svg_arcOuterRadius, cornerRadius = d3_zero, padRadius = d3_svg_arcAuto, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle, padAngle = d3_svg_arcPadAngle;
    function arc() {
      var r0 = Math.max(0, +innerRadius.apply(this, arguments)), r1 = Math.max(0, +outerRadius.apply(this, arguments)), a0 = startAngle.apply(this, arguments) - half, a1 = endAngle.apply(this, arguments) - half, da = Math.abs(a1 - a0), cw = a0 > a1 ? 0 : 1;
      if (r1 < r0) rc = r1, r1 = r0, r0 = rc;
      if (da >= ) return circleSegment(r1, cw) + (r0 ? circleSegment(r0, 1 - cw) : "") + "Z";
      var rc, cr, rp, ap, p0 = 0, p1 = 0, x0, y0, x1, y1, x2, y2, x3, y3, path = [];
      if (ap = (+padAngle.apply(this, arguments) || 0) / 2) {
        rp = padRadius === d3_svg_arcAuto ? Math.sqrt(r0 * r0 + r1 * r1) : +padRadius.apply(this, arguments);
        if (!cw) p1 *= -1;
        if (r1) p1 = d3_asin(rp / r1 * Math.sin(ap));
        if (r0) p0 = d3_asin(rp / r0 * Math.sin(ap));
      }
      if (r1) {
        x0 = r1 * Math.cos(a0 + p1);
        y0 = r1 * Math.sin(a0 + p1);
        x1 = r1 * Math.cos(a1 - p1);
        y1 = r1 * Math.sin(a1 - p1);
        var l1 = Math.abs(a1 - a0 - 2 * p1) <=  ? 0 : 1;
        if (p1 && d3_svg_arcSweep(x0, y0, x1, y1) === cw ^ l1) {
          var h1 = (a0 + a1) / 2;
          x0 = r1 * Math.cos(h1);
          y0 = r1 * Math.sin(h1);
          x1 = y1 = null;
        }
      } else {
        x0 = y0 = 0;
      }
      if (r0) {
        x2 = r0 * Math.cos(a1 - p0);
        y2 = r0 * Math.sin(a1 - p0);
        x3 = r0 * Math.cos(a0 + p0);
        y3 = r0 * Math.sin(a0 + p0);
        var l0 = Math.abs(a0 - a1 + 2 * p0) <=  ? 0 : 1;
        if (p0 && d3_svg_arcSweep(x2, y2, x3, y3) === 1 - cw ^ l0) {
          var h0 = (a0 + a1) / 2;
          x2 = r0 * Math.cos(h0);
          y2 = r0 * Math.sin(h0);
          x3 = y3 = null;
        }
      } else {
        x2 = y2 = 0;
      }
      if (da >  && (rc = Math.min(Math.abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments))) > .001) {
        cr = r0 < r1 ^ cw ? 0 : 1;
        var rc1 = rc, rc0 = rc;
        if (da < ) {
          var oc = x3 == null ? [ x2, y2 ] : x1 == null ? [ x0, y0 ] : d3_geom_polygonIntersect([ x0, y0 ], [ x3, y3 ], [ x1, y1 ], [ x2, y2 ]), ax = x0 - oc[0], ay = y0 - oc[1], bx = x1 - oc[0], by = y1 - oc[1], kc = 1 / Math.sin(Math.acos((ax * bx + ay * by) / (Math.sqrt(ax * ax + ay * ay) * Math.sqrt(bx * bx + by * by))) / 2), lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);
          rc0 = Math.min(rc, (r0 - lc) / (kc - 1));
          rc1 = Math.min(rc, (r1 - lc) / (kc + 1));
        }
        if (x1 != null) {
          var t30 = d3_svg_arcCornerTangents(x3 == null ? [ x2, y2 ] : [ x3, y3 ], [ x0, y0 ], r1, rc1, cw), t12 = d3_svg_arcCornerTangents([ x1, y1 ], [ x2, y2 ], r1, rc1, cw);
          if (rc === rc1) {
            path.push("M", t30[0], "A", rc1, ",", rc1, " 0 0,", cr, " ", t30[1], "A", r1, ",", r1, " 0 ", 1 - cw ^ d3_svg_arcSweep(t30[1][0], t30[1][1], t12[1][0], t12[1][1]), ",", cw, " ", t12[1], "A", rc1, ",", rc1, " 0 0,", cr, " ", t12[0]);
          } else {
            path.push("M", t30[0], "A", rc1, ",", rc1, " 0 1,", cr, " ", t12[0]);
          }
        } else {
          path.push("M", x0, ",", y0);
        }
        if (x3 != null) {
          var t03 = d3_svg_arcCornerTangents([ x0, y0 ], [ x3, y3 ], r0, -rc0, cw), t21 = d3_svg_arcCornerTangents([ x2, y2 ], x1 == null ? [ x0, y0 ] : [ x1, y1 ], r0, -rc0, cw);
          if (rc === rc0) {
            path.push("L", t21[0], "A", rc0, ",", rc0, " 0 0,", cr, " ", t21[1], "A", r0, ",", r0, " 0 ", cw ^ d3_svg_arcSweep(t21[1][0], t21[1][1], t03[1][0], t03[1][1]), ",", 1 - cw, " ", t03[1], "A", rc0, ",", rc0, " 0 0,", cr, " ", t03[0]);
          } else {
            path.push("L", t21[0], "A", rc0, ",", rc0, " 0 0,", cr, " ", t03[0]);
          }
        } else {
          path.push("L", x2, ",", y2);
        }
      } else {
        path.push("M", x0, ",", y0);
        if (x1 != null) path.push("A", r1, ",", r1, " 0 ", l1, ",", cw, " ", x1, ",", y1);
        path.push("L", x2, ",", y2);
        if (x3 != null) path.push("A", r0, ",", r0, " 0 ", l0, ",", 1 - cw, " ", x3, ",", y3);
      }
      path.push("Z");
      return path.join("");
    }
    function circleSegment(r1, cw) {
      return "M0," + r1 + "A" + r1 + "," + r1 + " 0 1," + cw + " 0," + -r1 + "A" + r1 + "," + r1 + " 0 1," + cw + " 0," + r1;
    }
    arc.innerRadius = function(v) {
      if (!arguments.length) return innerRadius;
      innerRadius = d3_functor(v);
      return arc;
    };
    arc.outerRadius = function(v) {
      if (!arguments.length) return outerRadius;
      outerRadius = d3_functor(v);
      return arc;
    };
    arc.cornerRadius = function(v) {
      if (!arguments.length) return cornerRadius;
      cornerRadius = d3_functor(v);
      return arc;
    };
    arc.padRadius = function(v) {
      if (!arguments.length) return padRadius;
      padRadius = v == d3_svg_arcAuto ? d3_svg_arcAuto : d3_functor(v);
      return arc;
    };
    arc.startAngle = function(v) {
      if (!arguments.length) return startAngle;
      startAngle = d3_functor(v);
      return arc;
    };
    arc.endAngle = function(v) {
      if (!arguments.length) return endAngle;
      endAngle = d3_functor(v);
      return arc;
    };
    arc.padAngle = function(v) {
      if (!arguments.length) return padAngle;
      padAngle = d3_functor(v);
      return arc;
    };
    arc.centroid = function() {
      var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2, a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - half;
      return [ Math.cos(a) * r, Math.sin(a) * r ];
    };
    return arc;
  };
  var d3_svg_arcAuto = "auto";
  function d3_svg_arcInnerRadius(d) {
    return d.innerRadius;
  }
  function d3_svg_arcOuterRadius(d) {
    return d.outerRadius;
  }
  function d3_svg_arcStartAngle(d) {
    return d.startAngle;
  }
  function d3_svg_arcEndAngle(d) {
    return d.endAngle;
  }
  function d3_svg_arcPadAngle(d) {
    return d && d.padAngle;
  }
  function d3_svg_arcSweep(x0, y0, x1, y1) {
    return (x0 - x1) * y0 - (y0 - y1) * x0 > 0 ? 0 : 1;
  }
  function d3_svg_arcCornerTangents(p0, p1, r1, rc, cw) {
    var x01 = p0[0] - p1[0], y01 = p0[1] - p1[1], lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01), ox = lo * y01, oy = -lo * x01, x1 = p0[0] + ox, y1 = p0[1] + oy, x2 = p1[0] + ox, y2 = p1[1] + oy, x3 = (x1 + x2) / 2, y3 = (y1 + y2) / 2, dx = x2 - x1, dy = y2 - y1, d2 = dx * dx + dy * dy, r = r1 - rc, D = x1 * y2 - x2 * y1, d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D)), cx0 = (D * dy - dx * d) / d2, cy0 = (-D * dx - dy * d) / d2, cx1 = (D * dy + dx * d) / d2, cy1 = (-D * dx + dy * d) / d2, dx0 = cx0 - x3, dy0 = cy0 - y3, dx1 = cx1 - x3, dy1 = cy1 - y3;
    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;
    return [ [ cx0 - ox, cy0 - oy ], [ cx0 * r1 / r, cy0 * r1 / r ] ];
  }
  function d3_svg_line(projection) {
    var x = d3_geom_pointX, y = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, tension = .7;
    function line(data) {
      var segments = [], points = [], i = -1, n = data.length, d, fx = d3_functor(x), fy = d3_functor(y);
      function segment() {
        segments.push("M", interpolate(projection(points), tension));
      }
      while (++i < n) {
        if (defined.call(this, d = data[i], i)) {
          points.push([ +fx.call(this, d, i), +fy.call(this, d, i) ]);
        } else if (points.length) {
          segment();
          points = [];
        }
      }
      if (points.length) segment();
      return segments.length ? segments.join("") : null;
    }
    line.x = function(_) {
      if (!arguments.length) return x;
      x = _;
      return line;
    };
    line.y = function(_) {
      if (!arguments.length) return y;
      y = _;
      return line;
    };
    line.defined = function(_) {
      if (!arguments.length) return defined;
      defined = _;
      return line;
    };
    line.interpolate = function(_) {
      if (!arguments.length) return interpolateKey;
      if (typeof _ === "function") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;
      return line;
    };
    line.tension = function(_) {
      if (!arguments.length) return tension;
      tension = _;
      return line;
    };
    return line;
  }
  d3.svg.line = function() {
    return d3_svg_line(d3_identity);
  };
  var d3_svg_lineInterpolators = d3.map({
    linear: d3_svg_lineLinear,
    "linear-closed": d3_svg_lineLinearClosed,
    step: d3_svg_lineStep,
    "step-before": d3_svg_lineStepBefore,
    "step-after": d3_svg_lineStepAfter,
    basis: d3_svg_lineBasis,
    "basis-open": d3_svg_lineBasisOpen,
    "basis-closed": d3_svg_lineBasisClosed,
    bundle: d3_svg_lineBundle,
    cardinal: d3_svg_lineCardinal,
    "cardinal-open": d3_svg_lineCardinalOpen,
    "cardinal-closed": d3_svg_lineCardinalClosed,
    monotone: d3_svg_lineMonotone
  });
  d3_svg_lineInterpolators.forEach(function(key, value) {
    value.key = key;
    value.closed = /-closed$/.test(key);
  });
  function d3_svg_lineLinear(points) {
    return points.length > 1 ? points.join("L") : points + "Z";
  }
  function d3_svg_lineLinearClosed(points) {
    return points.join("L") + "Z";
  }
  function d3_svg_lineStep(points) {
    var i = 0, n = points.length, p = points[0], path = [ p[0], ",", p[1] ];
    while (++i < n) path.push("H", (p[0] + (p = points[i])[0]) / 2, "V", p[1]);
    if (n > 1) path.push("H", p[0]);
    return path.join("");
  }
  function d3_svg_lineStepBefore(points) {
    var i = 0, n = points.length, p = points[0], path = [ p[0], ",", p[1] ];
    while (++i < n) path.push("V", (p = points[i])[1], "H", p[0]);
    return path.join("");
  }
  function d3_svg_lineStepAfter(points) {
    var i = 0, n = points.length, p = points[0], path = [ p[0], ",", p[1] ];
    while (++i < n) path.push("H", (p = points[i])[0], "V", p[1]);
    return path.join("");
  }
  function d3_svg_lineCardinalOpen(points, tension) {
    return points.length < 4 ? d3_svg_lineLinear(points) : points[1] + d3_svg_lineHermite(points.slice(1, -1), d3_svg_lineCardinalTangents(points, tension));
  }
  function d3_svg_lineCardinalClosed(points, tension) {
    return points.length < 3 ? d3_svg_lineLinearClosed(points) : points[0] + d3_svg_lineHermite((points.push(points[0]), 
    points), d3_svg_lineCardinalTangents([ points[points.length - 2] ].concat(points, [ points[1] ]), tension));
  }
  function d3_svg_lineCardinal(points, tension) {
    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension));
  }
  function d3_svg_lineHermite(points, tangents) {
    if (tangents.length < 1 || points.length != tangents.length && points.length != tangents.length + 2) {
      return d3_svg_lineLinear(points);
    }
    var quad = points.length != tangents.length, path = "", p0 = points[0], p = points[1], t0 = tangents[0], t = t0, pi = 1;
    if (quad) {
      path += "Q" + (p[0] - t0[0] * 2 / 3) + "," + (p[1] - t0[1] * 2 / 3) + "," + p[0] + "," + p[1];
      p0 = points[1];
      pi = 2;
    }
    if (tangents.length > 1) {
      t = tangents[1];
      p = points[pi];
      pi++;
      path += "C" + (p0[0] + t0[0]) + "," + (p0[1] + t0[1]) + "," + (p[0] - t[0]) + "," + (p[1] - t[1]) + "," + p[0] + "," + p[1];
      for (var i = 2; i < tangents.length; i++, pi++) {
        p = points[pi];
        t = tangents[i];
        path += "S" + (p[0] - t[0]) + "," + (p[1] - t[1]) + "," + p[0] + "," + p[1];
      }
    }
    if (quad) {
      var lp = points[pi];
      path += "Q" + (p[0] + t[0] * 2 / 3) + "," + (p[1] + t[1] * 2 / 3) + "," + lp[0] + "," + lp[1];
    }
    return path;
  }
  function d3_svg_lineCardinalTangents(points, tension) {
    var tangents = [], a = (1 - tension) / 2, p0, p1 = points[0], p2 = points[1], i = 1, n = points.length;
    while (++i < n) {
      p0 = p1;
      p1 = p2;
      p2 = points[i];
      tangents.push([ a * (p2[0] - p0[0]), a * (p2[1] - p0[1]) ]);
    }
    return tangents;
  }
  function d3_svg_lineBasis(points) {
    if (points.length < 3) return d3_svg_lineLinear(points);
    var i = 1, n = points.length, pi = points[0], x0 = pi[0], y0 = pi[1], px = [ x0, x0, x0, (pi = points[1])[0] ], py = [ y0, y0, y0, pi[1] ], path = [ x0, ",", y0, "L", d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];
    points.push(points[n - 1]);
    while (++i <= n) {
      pi = points[i];
      px.shift();
      px.push(pi[0]);
      py.shift();
      py.push(pi[1]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    points.pop();
    path.push("L", pi);
    return path.join("");
  }
  function d3_svg_lineBasisOpen(points) {
    if (points.length < 4) return d3_svg_lineLinear(points);
    var path = [], i = -1, n = points.length, pi, px = [ 0 ], py = [ 0 ];
    while (++i < 3) {
      pi = points[i];
      px.push(pi[0]);
      py.push(pi[1]);
    }
    path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + "," + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py));
    --i;
    while (++i < n) {
      pi = points[i];
      px.shift();
      px.push(pi[0]);
      py.shift();
      py.push(pi[1]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    return path.join("");
  }
  function d3_svg_lineBasisClosed(points) {
    var path, i = -1, n = points.length, m = n + 4, pi, px = [], py = [];
    while (++i < 4) {
      pi = points[i % n];
      px.push(pi[0]);
      py.push(pi[1]);
    }
    path = [ d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];
    --i;
    while (++i < m) {
      pi = points[i % n];
      px.shift();
      px.push(pi[0]);
      py.shift();
      py.push(pi[1]);
      d3_svg_lineBasisBezier(path, px, py);
    }
    return path.join("");
  }
  function d3_svg_lineBundle(points, tension) {
    var n = points.length - 1;
    if (n) {
      var x0 = points[0][0], y0 = points[0][1], dx = points[n][0] - x0, dy = points[n][1] - y0, i = -1, p, t;
      while (++i <= n) {
        p = points[i];
        t = i / n;
        p[0] = tension * p[0] + (1 - tension) * (x0 + t * dx);
        p[1] = tension * p[1] + (1 - tension) * (y0 + t * dy);
      }
    }
    return d3_svg_lineBasis(points);
  }
  function d3_svg_lineDot4(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
  }
  var d3_svg_lineBasisBezier1 = [ 0, 2 / 3, 1 / 3, 0 ], d3_svg_lineBasisBezier2 = [ 0, 1 / 3, 2 / 3, 0 ], d3_svg_lineBasisBezier3 = [ 0, 1 / 6, 2 / 3, 1 / 6 ];
  function d3_svg_lineBasisBezier(path, x, y) {
    path.push("C", d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, y));
  }
  function d3_svg_lineSlope(p0, p1) {
    return (p1[1] - p0[1]) / (p1[0] - p0[0]);
  }
  function d3_svg_lineFiniteDifferences(points) {
    var i = 0, j = points.length - 1, m = [], p0 = points[0], p1 = points[1], d = m[0] = d3_svg_lineSlope(p0, p1);
    while (++i < j) {
      m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + 1]))) / 2;
    }
    m[i] = d;
    return m;
  }
  function d3_svg_lineMonotoneTangents(points) {
    var tangents = [], d, a, b, s, m = d3_svg_lineFiniteDifferences(points), i = -1, j = points.length - 1;
    while (++i < j) {
      d = d3_svg_lineSlope(points[i], points[i + 1]);
      if (abs(d) < ) {
        m[i] = m[i + 1] = 0;
      } else {
        a = m[i] / d;
        b = m[i + 1] / d;
        s = a * a + b * b;
        if (s > 9) {
          s = d * 3 / Math.sqrt(s);
          m[i] = s * a;
          m[i + 1] = s * b;
        }
      }
    }
    i = -1;
    while (++i <= j) {
      s = (points[Math.min(j, i + 1)][0] - points[Math.max(0, i - 1)][0]) / (6 * (1 + m[i] * m[i]));
      tangents.push([ s || 0, m[i] * s || 0 ]);
    }
    return tangents;
  }
  function d3_svg_lineMonotone(points) {
    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineMonotoneTangents(points));
  }
  d3.svg.line.radial = function() {
    var line = d3_svg_line(d3_svg_lineRadial);
    line.radius = line.x, delete line.x;
    line.angle = line.y, delete line.y;
    return line;
  };
  function d3_svg_lineRadial(points) {
    var point, i = -1, n = points.length, r, a;
    while (++i < n) {
      point = points[i];
      r = point[0];
      a = point[1] - half;
      point[0] = r * Math.cos(a);
      point[1] = r * Math.sin(a);
    }
    return points;
  }
  function d3_svg_area(projection) {
    var x0 = d3_geom_pointX, x1 = d3_geom_pointX, y0 = 0, y1 = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, interpolateReverse = interpolate, L = "L", tension = .7;
    function area(data) {
      var segments = [], points0 = [], points1 = [], i = -1, n = data.length, d, fx0 = d3_functor(x0), fy0 = d3_functor(y0), fx1 = x0 === x1 ? function() {
        return x;
      } : d3_functor(x1), fy1 = y0 === y1 ? function() {
        return y;
      } : d3_functor(y1), x, y;
      function segment() {
        segments.push("M", interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), "Z");
      }
      while (++i < n) {
        if (defined.call(this, d = data[i], i)) {
          points0.push([ x = +fx0.call(this, d, i), y = +fy0.call(this, d, i) ]);
          points1.push([ +fx1.call(this, d, i), +fy1.call(this, d, i) ]);
        } else if (points0.length) {
          segment();
          points0 = [];
          points1 = [];
        }
      }
      if (points0.length) segment();
      return segments.length ? segments.join("") : null;
    }
    area.x = function(_) {
      if (!arguments.length) return x1;
      x0 = x1 = _;
      return area;
    };
    area.x0 = function(_) {
      if (!arguments.length) return x0;
      x0 = _;
      return area;
    };
    area.x1 = function(_) {
      if (!arguments.length) return x1;
      x1 = _;
      return area;
    };
    area.y = function(_) {
      if (!arguments.length) return y1;
      y0 = y1 = _;
      return area;
    };
    area.y0 = function(_) {
      if (!arguments.length) return y0;
      y0 = _;
      return area;
    };
    area.y1 = function(_) {
      if (!arguments.length) return y1;
      y1 = _;
      return area;
    };
    area.defined = function(_) {
      if (!arguments.length) return defined;
      defined = _;
      return area;
    };
    area.interpolate = function(_) {
      if (!arguments.length) return interpolateKey;
      if (typeof _ === "function") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;
      interpolateReverse = interpolate.reverse || interpolate;
      L = interpolate.closed ? "M" : "L";
      return area;
    };
    area.tension = function(_) {
      if (!arguments.length) return tension;
      tension = _;
      return area;
    };
    return area;
  }
  d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter;
  d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore;
  d3.svg.area = function() {
    return d3_svg_area(d3_identity);
  };
  d3.svg.area.radial = function() {
    var area = d3_svg_area(d3_svg_lineRadial);
    area.radius = area.x, delete area.x;
    area.innerRadius = area.x0, delete area.x0;
    area.outerRadius = area.x1, delete area.x1;
    area.angle = area.y, delete area.y;
    area.startAngle = area.y0, delete area.y0;
    area.endAngle = area.y1, delete area.y1;
    return area;
  };
  d3.svg.chord = function() {
    var source = d3_source, target = d3_target, radius = d3_svg_chordRadius, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle;
    function chord(d, i) {
      var s = subgroup(this, source, d, i), t = subgroup(this, target, d, i);
      return "M" + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (equals(s, t) ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + "Z";
    }
    function subgroup(self, f, d, i) {
      var subgroup = f.call(self, d, i), r = radius.call(self, subgroup, i), a0 = startAngle.call(self, subgroup, i) - half, a1 = endAngle.call(self, subgroup, i) - half;
      return {
        r: r,
        a0: a0,
        a1: a1,
        p0: [ r * Math.cos(a0), r * Math.sin(a0) ],
        p1: [ r * Math.cos(a1), r * Math.sin(a1) ]
      };
    }
    function equals(a, b) {
      return a.a0 == b.a0 && a.a1 == b.a1;
    }
    function arc(r, p, a) {
      return "A" + r + "," + r + " 0 " + +(a > ) + ",1 " + p;
    }
    function curve(r0, p0, r1, p1) {
      return "Q 0,0 " + p1;
    }
    chord.radius = function(v) {
      if (!arguments.length) return radius;
      radius = d3_functor(v);
      return chord;
    };
    chord.source = function(v) {
      if (!arguments.length) return source;
      source = d3_functor(v);
      return chord;
    };
    chord.target = function(v) {
      if (!arguments.length) return target;
      target = d3_functor(v);
      return chord;
    };
    chord.startAngle = function(v) {
      if (!arguments.length) return startAngle;
      startAngle = d3_functor(v);
      return chord;
    };
    chord.endAngle = function(v) {
      if (!arguments.length) return endAngle;
      endAngle = d3_functor(v);
      return chord;
    };
    return chord;
  };
  function d3_svg_chordRadius(d) {
    return d.radius;
  }
  d3.svg.diagonal = function() {
    var source = d3_source, target = d3_target, projection = d3_svg_diagonalProjection;
    function diagonal(d, i) {
      var p0 = source.call(this, d, i), p3 = target.call(this, d, i), m = (p0.y + p3.y) / 2, p = [ p0, {
        x: p0.x,
        y: m
      }, {
        x: p3.x,
        y: m
      }, p3 ];
      p = p.map(projection);
      return "M" + p[0] + "C" + p[1] + " " + p[2] + " " + p[3];
    }
    diagonal.source = function(x) {
      if (!arguments.length) return source;
      source = d3_functor(x);
      return diagonal;
    };
    diagonal.target = function(x) {
      if (!arguments.length) return target;
      target = d3_functor(x);
      return diagonal;
    };
    diagonal.projection = function(x) {
      if (!arguments.length) return projection;
      projection = x;
      return diagonal;
    };
    return diagonal;
  };
  function d3_svg_diagonalProjection(d) {
    return [ d.x, d.y ];
  }
  d3.svg.diagonal.radial = function() {
    var diagonal = d3.svg.diagonal(), projection = d3_svg_diagonalProjection, projection_ = diagonal.projection;
    diagonal.projection = function(x) {
      return arguments.length ? projection_(d3_svg_diagonalRadialProjection(projection = x)) : projection;
    };
    return diagonal;
  };
  function d3_svg_diagonalRadialProjection(projection) {
    return function() {
      var d = projection.apply(this, arguments), r = d[0], a = d[1] - half;
      return [ r * Math.cos(a), r * Math.sin(a) ];
    };
  }
  d3.svg.symbol = function() {
    var type = d3_svg_symbolType, size = d3_svg_symbolSize;
    function symbol(d, i) {
      return (d3_svg_symbols.get(type.call(this, d, i)) || d3_svg_symbolCircle)(size.call(this, d, i));
    }
    symbol.type = function(x) {
      if (!arguments.length) return type;
      type = d3_functor(x);
      return symbol;
    };
    symbol.size = function(x) {
      if (!arguments.length) return size;
      size = d3_functor(x);
      return symbol;
    };
    return symbol;
  };
  function d3_svg_symbolSize() {
    return 64;
  }
  function d3_svg_symbolType() {
    return "circle";
  }
  function d3_svg_symbolCircle(size) {
    var r = Math.sqrt(size / );
    return "M0," + r + "A" + r + "," + r + " 0 1,1 0," + -r + "A" + r + "," + r + " 0 1,1 0," + r + "Z";
  }
  var d3_svg_symbols = d3.map({
    circle: d3_svg_symbolCircle,
    cross: function(size) {
      var r = Math.sqrt(size / 5) / 2;
      return "M" + -3 * r + "," + -r + "H" + -r + "V" + -3 * r + "H" + r + "V" + -r + "H" + 3 * r + "V" + r + "H" + r + "V" + 3 * r + "H" + -r + "V" + r + "H" + -3 * r + "Z";
    },
    diamond: function(size) {
      var ry = Math.sqrt(size / (2 * d3_svg_symbolTan30)), rx = ry * d3_svg_symbolTan30;
      return "M0," + -ry + "L" + rx + ",0" + " 0," + ry + " " + -rx + ",0" + "Z";
    },
    square: function(size) {
      var r = Math.sqrt(size) / 2;
      return "M" + -r + "," + -r + "L" + r + "," + -r + " " + r + "," + r + " " + -r + "," + r + "Z";
    },
    "triangle-down": function(size) {
      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;
      return "M0," + ry + "L" + rx + "," + -ry + " " + -rx + "," + -ry + "Z";
    },
    "triangle-up": function(size) {
      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;
      return "M0," + -ry + "L" + rx + "," + ry + " " + -rx + "," + ry + "Z";
    }
  });
  d3.svg.symbolTypes = d3_svg_symbols.keys();
  var d3_svg_symbolSqrt3 = Math.sqrt(3), d3_svg_symbolTan30 = Math.tan(30 * d3_radians);
  d3_selectionPrototype.transition = function(name) {
    var id = d3_transitionInheritId || ++d3_transitionId, ns = d3_transitionNamespace(name), subgroups = [], subgroup, node, transition = d3_transitionInherit || {
      time: Date.now(),
      ease: d3_ease_cubicInOut,
      delay: 0,
      duration: 250
    };
    for (var j = -1, m = this.length; ++j < m; ) {
      subgroups.push(subgroup = []);
      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {
        if (node = group[i]) d3_transitionNode(node, i, ns, id, transition);
        subgroup.push(node);
      }
    }
    return d3_transition(subgroups, ns, id);
  };
  d3_selectionPrototype.interrupt = function(name) {
    return this.each(name == null ? d3_selection_interrupt : d3_selection_interruptNS(d3_transitionNamespace(name)));
  };
  var d3_selection_interrupt = d3_selection_interruptNS(d3_transitionNamespace());
  function d3_selection_interruptNS(ns) {
    return function() {
      var lock, activeId, active;
      if ((lock = this[ns]) && (active = lock[activeId = lock.active])) {
        active.timer.c = null;
        active.timer.t = NaN;
        if (--lock.count) delete lock[activeId]; else delete this[ns];
        lock.active += .5;
        active.event && active.event.interrupt.call(this, this.__data__, active.index);
      }
    };
  }
  function d3_transition(groups, ns, id) {
    d3_subclass(groups, d3_transitionPrototype);
    groups.namespace = ns;
    groups.id = id;
    return groups;
  }
  var d3_transitionPrototype = [], d3_transitionId = 0, d3_transitionInheritId, d3_transitionInherit;
  d3_transitionPrototype.call = d3_selectionPrototype.call;
  d3_transitionPrototype.empty = d3_selectionPrototype.empty;
  d3_transitionPrototype.node = d3_selectionPrototype.node;
  d3_transitionPrototype.size = d3_selectionPrototype.size;
  d3.transition = function(selection, name) {
    return selection && selection.transition ? d3_transitionInheritId ? selection.transition(name) : selection : d3.selection().transition(selection);
  };
  d3.transition.prototype = d3_transitionPrototype;
  d3_transitionPrototype.select = function(selector) {
    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnode, node;
    selector = d3_selection_selector(selector);
    for (var j = -1, m = this.length; ++j < m; ) {
      subgroups.push(subgroup = []);
      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {
        if ((node = group[i]) && (subnode = selector.call(node, node.__data__, i, j))) {
          if ("__data__" in node) subnode.__data__ = node.__data__;
          d3_transitionNode(subnode, i, ns, id, node[ns][id]);
          subgroup.push(subnode);
        } else {
          subgroup.push(null);
        }
      }
    }
    return d3_transition(subgroups, ns, id);
  };
  d3_transitionPrototype.selectAll = function(selector) {
    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnodes, node, subnode, transition;
    selector = d3_selection_selectorAll(selector);
    for (var j = -1, m = this.length; ++j < m; ) {
      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {
        if (node = group[i]) {
          transition = node[ns][id];
          subnodes = selector.call(node, node.__data__, i, j);
          subgroups.push(subgroup = []);
          for (var k = -1, o = subnodes.length; ++k < o; ) {
            if (subnode = subnodes[k]) d3_transitionNode(subnode, k, ns, id, transition);
            subgroup.push(subnode);
          }
        }
      }
    }
    return d3_transition(subgroups, ns, id);
  };
  d3_transitionPrototype.filter = function(filter) {
    var subgroups = [], subgroup, group, node;
    if (typeof filter !== "function") filter = d3_selection_filter(filter);
    for (var j = 0, m = this.length; j < m; j++) {
      subgroups.push(subgroup = []);
      for (var group = this[j], i = 0, n = group.length; i < n; i++) {
        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {
          subgroup.push(node);
        }
      }
    }
    return d3_transition(subgroups, this.namespace, this.id);
  };
  d3_transitionPrototype.tween = function(name, tween) {
    var id = this.id, ns = this.namespace;
    if (arguments.length < 2) return this.node()[ns][id].tween.get(name);
    return d3_selection_each(this, tween == null ? function(node) {
      node[ns][id].tween.remove(name);
    } : function(node) {
      node[ns][id].tween.set(name, tween);
    });
  };
  function d3_transition_tween(groups, name, value, tween) {
    var id = groups.id, ns = groups.namespace;
    return d3_selection_each(groups, typeof value === "function" ? function(node, i, j) {
      node[ns][id].tween.set(name, tween(value.call(node, node.__data__, i, j)));
    } : (value = tween(value), function(node) {
      node[ns][id].tween.set(name, value);
    }));
  }
  d3_transitionPrototype.attr = function(nameNS, value) {
    if (arguments.length < 2) {
      for (value in nameNS) this.attr(value, nameNS[value]);
      return this;
    }
    var interpolate = nameNS == "transform" ? d3_interpolateTransform : d3_interpolate, name = d3.ns.qualify(nameNS);
    function attrNull() {
      this.removeAttribute(name);
    }
    function attrNullNS() {
      this.removeAttributeNS(name.space, name.local);
    }
    function attrTween(b) {
      return b == null ? attrNull : (b += "", function() {
        var a = this.getAttribute(name), i;
        return a !== b && (i = interpolate(a, b), function(t) {
          this.setAttribute(name, i(t));
        });
      });
    }
    function attrTweenNS(b) {
      return b == null ? attrNullNS : (b += "", function() {
        var a = this.getAttributeNS(name.space, name.local), i;
        return a !== b && (i = interpolate(a, b), function(t) {
          this.setAttributeNS(name.space, name.local, i(t));
        });
      });
    }
    return d3_transition_tween(this, "attr." + nameNS, value, name.local ? attrTweenNS : attrTween);
  };
  d3_transitionPrototype.attrTween = function(nameNS, tween) {
    var name = d3.ns.qualify(nameNS);
    function attrTween(d, i) {
      var f = tween.call(this, d, i, this.getAttribute(name));
      return f && function(t) {
        this.setAttribute(name, f(t));
      };
    }
    function attrTweenNS(d, i) {
      var f = tween.call(this, d, i, this.getAttributeNS(name.space, name.local));
      return f && function(t) {
        this.setAttributeNS(name.space, name.local, f(t));
      };
    }
    return this.tween("attr." + nameNS, name.local ? attrTweenNS : attrTween);
  };
  d3_transitionPrototype.style = function(name, value, priority) {
    var n = arguments.length;
    if (n < 3) {
      if (typeof name !== "string") {
        if (n < 2) value = "";
        for (priority in name) this.style(priority, name[priority], value);
        return this;
      }
      priority = "";
    }
    function styleNull() {
      this.style.removeProperty(name);
    }
    function styleString(b) {
      return b == null ? styleNull : (b += "", function() {
        var a = d3_window(this).getComputedStyle(this, null).getPropertyValue(name), i;
        return a !== b && (i = d3_interpolate(a, b), function(t) {
          this.style.setProperty(name, i(t), priority);
        });
      });
    }
    return d3_transition_tween(this, "style." + name, value, styleString);
  };
  d3_transitionPrototype.styleTween = function(name, tween, priority) {
    if (arguments.length < 3) priority = "";
    function styleTween(d, i) {
      var f = tween.call(this, d, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(name));
      return f && function(t) {
        this.style.setProperty(name, f(t), priority);
      };
    }
    return this.tween("style." + name, styleTween);
  };
  d3_transitionPrototype.text = function(value) {
    return d3_transition_tween(this, "text", value, d3_transition_text);
  };
  function d3_transition_text(b) {
    if (b == null) b = "";
    return function() {
      this.textContent = b;
    };
  }
  d3_transitionPrototype.remove = function() {
    var ns = this.namespace;
    return this.each("end.transition", function() {
      var p;
      if (this[ns].count < 2 && (p = this.parentNode)) p.removeChild(this);
    });
  };
  d3_transitionPrototype.ease = function(value) {
    var id = this.id, ns = this.namespace;
    if (arguments.length < 1) return this.node()[ns][id].ease;
    if (typeof value !== "function") value = d3.ease.apply(d3, arguments);
    return d3_selection_each(this, function(node) {
      node[ns][id].ease = value;
    });
  };
  d3_transitionPrototype.delay = function(value) {
    var id = this.id, ns = this.namespace;
    if (arguments.length < 1) return this.node()[ns][id].delay;
    return d3_selection_each(this, typeof value === "function" ? function(node, i, j) {
      node[ns][id].delay = +value.call(node, node.__data__, i, j);
    } : (value = +value, function(node) {
      node[ns][id].delay = value;
    }));
  };
  d3_transitionPrototype.duration = function(value) {
    var id = this.id, ns = this.namespace;
    if (arguments.length < 1) return this.node()[ns][id].duration;
    return d3_selection_each(this, typeof value === "function" ? function(node, i, j) {
      node[ns][id].duration = Math.max(1, value.call(node, node.__data__, i, j));
    } : (value = Math.max(1, value), function(node) {
      node[ns][id].duration = value;
    }));
  };
  d3_transitionPrototype.each = function(type, listener) {
    var id = this.id, ns = this.namespace;
    if (arguments.length < 2) {
      var inherit = d3_transitionInherit, inheritId = d3_transitionInheritId;
      try {
        d3_transitionInheritId = id;
        d3_selection_each(this, function(node, i, j) {
          d3_transitionInherit = node[ns][id];
          type.call(node, node.__data__, i, j);
        });
      } finally {
        d3_transitionInherit = inherit;
        d3_transitionInheritId = inheritId;
      }
    } else {
      d3_selection_each(this, function(node) {
        var transition = node[ns][id];
        (transition.event || (transition.event = d3.dispatch("start", "end", "interrupt"))).on(type, listener);
      });
    }
    return this;
  };
  d3_transitionPrototype.transition = function() {
    var id0 = this.id, id1 = ++d3_transitionId, ns = this.namespace, subgroups = [], subgroup, group, node, transition;
    for (var j = 0, m = this.length; j < m; j++) {
      subgroups.push(subgroup = []);
      for (var group = this[j], i = 0, n = group.length; i < n; i++) {
        if (node = group[i]) {
          transition = node[ns][id0];
          d3_transitionNode(node, i, ns, id1, {
            time: transition.time,
            ease: transition.ease,
            delay: transition.delay + transition.duration,
            duration: transition.duration
          });
        }
        subgroup.push(node);
      }
    }
    return d3_transition(subgroups, ns, id1);
  };
  function d3_transitionNamespace(name) {
    return name == null ? "__transition__" : "__transition_" + name + "__";
  }
  function d3_transitionNode(node, i, ns, id, inherit) {
    var lock = node[ns] || (node[ns] = {
      active: 0,
      count: 0
    }), transition = lock[id], time, timer, duration, ease, tweens;
    function schedule(elapsed) {
      var delay = transition.delay;
      timer.t = delay + time;
      if (delay <= elapsed) return start(elapsed - delay);
      timer.c = start;
    }
    function start(elapsed) {
      var activeId = lock.active, active = lock[activeId];
      if (active) {
        active.timer.c = null;
        active.timer.t = NaN;
        --lock.count;
        delete lock[activeId];
        active.event && active.event.interrupt.call(node, node.__data__, active.index);
      }
      for (var cancelId in lock) {
        if (+cancelId < id) {
          var cancel = lock[cancelId];
          cancel.timer.c = null;
          cancel.timer.t = NaN;
          --lock.count;
          delete lock[cancelId];
        }
      }
      timer.c = tick;
      d3_timer(function() {
        if (timer.c && tick(elapsed || 1)) {
          timer.c = null;
          timer.t = NaN;
        }
        return 1;
      }, 0, time);
      lock.active = id;
      transition.event && transition.event.start.call(node, node.__data__, i);
      tweens = [];
      transition.tween.forEach(function(key, value) {
        if (value = value.call(node, node.__data__, i)) {
          tweens.push(value);
        }
      });
      ease = transition.ease;
      duration = transition.duration;
    }
    function tick(elapsed) {
      var t = elapsed / duration, e = ease(t), n = tweens.length;
      while (n > 0) {
        tweens[--n].call(node, e);
      }
      if (t >= 1) {
        transition.event && transition.event.end.call(node, node.__data__, i);
        if (--lock.count) delete lock[id]; else delete node[ns];
        return 1;
      }
    }
    if (!transition) {
      time = inherit.time;
      timer = d3_timer(schedule, 0, time);
      transition = lock[id] = {
        tween: new d3_Map(),
        time: time,
        timer: timer,
        delay: inherit.delay,
        duration: inherit.duration,
        ease: inherit.ease,
        index: i
      };
      inherit = null;
      ++lock.count;
    }
  }
  d3.svg.axis = function() {
    var scale = d3.scale.linear(), orient = d3_svg_axisDefaultOrient, innerTickSize = 6, outerTickSize = 6, tickPadding = 3, tickArguments_ = [ 10 ], tickValues = null, tickFormat_;
    function axis(g) {
      g.each(function() {
        var g = d3.select(this);
        var scale0 = this.__chart__ || scale, scale1 = this.__chart__ = scale.copy();
        var ticks = tickValues == null ? scale1.ticks ? scale1.ticks.apply(scale1, tickArguments_) : scale1.domain() : tickValues, tickFormat = tickFormat_ == null ? scale1.tickFormat ? scale1.tickFormat.apply(scale1, tickArguments_) : d3_identity : tickFormat_, tick = g.selectAll(".tick").data(ticks, scale1), tickEnter = tick.enter().insert("g", ".domain").attr("class", "tick").style("opacity", ), tickExit = d3.transition(tick.exit()).style("opacity", ).remove(), tickUpdate = d3.transition(tick.order()).style("opacity", 1), tickSpacing = Math.max(innerTickSize, 0) + tickPadding, tickTransform;
        var range = d3_scaleRange(scale1), path = g.selectAll(".domain").data([ 0 ]), pathUpdate = (path.enter().append("path").attr("class", "domain"), 
        d3.transition(path));
        tickEnter.append("line");
        tickEnter.append("text");
        var lineEnter = tickEnter.select("line"), lineUpdate = tickUpdate.select("line"), text = tick.select("text").text(tickFormat), textEnter = tickEnter.select("text"), textUpdate = tickUpdate.select("text"), sign = orient === "top" || orient === "left" ? -1 : 1, x1, x2, y1, y2;
        if (orient === "bottom" || orient === "top") {
          tickTransform = d3_svg_axisX, x1 = "x", y1 = "y", x2 = "x2", y2 = "y2";
          text.attr("dy", sign < 0 ? "0em" : ".71em").style("text-anchor", "middle");
          pathUpdate.attr("d", "M" + range[0] + "," + sign * outerTickSize + "V0H" + range[1] + "V" + sign * outerTickSize);
        } else {
          tickTransform = d3_svg_axisY, x1 = "y", y1 = "x", x2 = "y2", y2 = "x2";
          text.attr("dy", ".32em").style("text-anchor", sign < 0 ? "end" : "start");
          pathUpdate.attr("d", "M" + sign * outerTickSize + "," + range[0] + "H0V" + range[1] + "H" + sign * outerTickSize);
        }
        lineEnter.attr(y2, sign * innerTickSize);
        textEnter.attr(y1, sign * tickSpacing);
        lineUpdate.attr(x2, 0).attr(y2, sign * innerTickSize);
        textUpdate.attr(x1, 0).attr(y1, sign * tickSpacing);
        if (scale1.rangeBand) {
          var x = scale1, dx = x.rangeBand() / 2;
          scale0 = scale1 = function(d) {
            return x(d) + dx;
          };
        } else if (scale0.rangeBand) {
          scale0 = scale1;
        } else {
          tickExit.call(tickTransform, scale1, scale0);
        }
        tickEnter.call(tickTransform, scale0, scale1);
        tickUpdate.call(tickTransform, scale1, scale1);
      });
    }
    axis.scale = function(x) {
      if (!arguments.length) return scale;
      scale = x;
      return axis;
    };
    axis.orient = function(x) {
      if (!arguments.length) return orient;
      orient = x in d3_svg_axisOrients ? x + "" : d3_svg_axisDefaultOrient;
      return axis;
    };
    axis.ticks = function() {
      if (!arguments.length) return tickArguments_;
      tickArguments_ = d3_array(arguments);
      return axis;
    };
    axis.tickValues = function(x) {
      if (!arguments.length) return tickValues;
      tickValues = x;
      return axis;
    };
    axis.tickFormat = function(x) {
      if (!arguments.length) return tickFormat_;
      tickFormat_ = x;
      return axis;
    };
    axis.tickSize = function(x) {
      var n = arguments.length;
      if (!n) return innerTickSize;
      innerTickSize = +x;
      outerTickSize = +arguments[n - 1];
      return axis;
    };
    axis.innerTickSize = function(x) {
      if (!arguments.length) return innerTickSize;
      innerTickSize = +x;
      return axis;
    };
    axis.outerTickSize = function(x) {
      if (!arguments.length) return outerTickSize;
      outerTickSize = +x;
      return axis;
    };
    axis.tickPadding = function(x) {
      if (!arguments.length) return tickPadding;
      tickPadding = +x;
      return axis;
    };
    axis.tickSubdivide = function() {
      return arguments.length && axis;
    };
    return axis;
  };
  var d3_svg_axisDefaultOrient = "bottom", d3_svg_axisOrients = {
    top: 1,
    right: 1,
    bottom: 1,
    left: 1
  };
  function d3_svg_axisX(selection, x0, x1) {
    selection.attr("transform", function(d) {
      var v0 = x0(d);
      return "translate(" + (isFinite(v0) ? v0 : x1(d)) + ",0)";
    });
  }
  function d3_svg_axisY(selection, y0, y1) {
    selection.attr("transform", function(d) {
      var v0 = y0(d);
      return "translate(0," + (isFinite(v0) ? v0 : y1(d)) + ")";
    });
  }
  d3.svg.brush = function() {
    var event = d3_eventDispatch(brush, "brushstart", "brush", "brushend"), x = null, y = null, xExtent = [ 0, 0 ], yExtent = [ 0, 0 ], xExtentDomain, yExtentDomain, xClamp = true, yClamp = true, resizes = d3_svg_brushResizes[0];
    function brush(g) {
      g.each(function() {
        var g = d3.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", brushstart).on("touchstart.brush", brushstart);
        var background = g.selectAll(".background").data([ 0 ]);
        background.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair");
        g.selectAll(".extent").data([ 0 ]).enter().append("rect").attr("class", "extent").style("cursor", "move");
        var resize = g.selectAll(".resize").data(resizes, d3_identity);
        resize.exit().remove();
        resize.enter().append("g").attr("class", function(d) {
          return "resize " + d;
        }).style("cursor", function(d) {
          return d3_svg_brushCursor[d];
        }).append("rect").attr("x", function(d) {
          return /[ew]$/.test(d) ? -3 : null;
        }).attr("y", function(d) {
          return /^[ns]/.test(d) ? -3 : null;
        }).attr("width", 6).attr("height", 6).style("visibility", "hidden");
        resize.style("display", brush.empty() ? "none" : null);
        var gUpdate = d3.transition(g), backgroundUpdate = d3.transition(background), range;
        if (x) {
          range = d3_scaleRange(x);
          backgroundUpdate.attr("x", range[0]).attr("width", range[1] - range[0]);
          redrawX(gUpdate);
        }
        if (y) {
          range = d3_scaleRange(y);
          backgroundUpdate.attr("y", range[0]).attr("height", range[1] - range[0]);
          redrawY(gUpdate);
        }
        redraw(gUpdate);
      });
    }
    brush.event = function(g) {
      g.each(function() {
        var event_ = event.of(this, arguments), extent1 = {
          x: xExtent,
          y: yExtent,
          i: xExtentDomain,
          j: yExtentDomain
        }, extent0 = this.__chart__ || extent1;
        this.__chart__ = extent1;
        if (d3_transitionInheritId) {
          d3.select(this).transition().each("start.brush", function() {
            xExtentDomain = extent0.i;
            yExtentDomain = extent0.j;
            xExtent = extent0.x;
            yExtent = extent0.y;
            event_({
              type: "brushstart"
            });
          }).tween("brush:brush", function() {
            var xi = d3_interpolateArray(xExtent, extent1.x), yi = d3_interpolateArray(yExtent, extent1.y);
            xExtentDomain = yExtentDomain = null;
            return function(t) {
              xExtent = extent1.x = xi(t);
              yExtent = extent1.y = yi(t);
              event_({
                type: "brush",
                mode: "resize"
              });
            };
          }).each("end.brush", function() {
            xExtentDomain = extent1.i;
            yExtentDomain = extent1.j;
            event_({
              type: "brush",
              mode: "resize"
            });
            event_({
              type: "brushend"
            });
          });
        } else {
          event_({
            type: "brushstart"
          });
          event_({
            type: "brush",
            mode: "resize"
          });
          event_({
            type: "brushend"
          });
        }
      });
    };
    function redraw(g) {
      g.selectAll(".resize").attr("transform", function(d) {
        return "translate(" + xExtent[+/e$/.test(d)] + "," + yExtent[+/^s/.test(d)] + ")";
      });
    }
    function redrawX(g) {
      g.select(".extent").attr("x", xExtent[0]);
      g.selectAll(".extent,.n>rect,.s>rect").attr("width", xExtent[1] - xExtent[0]);
    }
    function redrawY(g) {
      g.select(".extent").attr("y", yExtent[0]);
      g.selectAll(".extent,.e>rect,.w>rect").attr("height", yExtent[1] - yExtent[0]);
    }
    function brushstart() {
      var target = this, eventTarget = d3.select(d3.event.target), event_ = event.of(target, arguments), g = d3.select(target), resizing = eventTarget.datum(), resizingX = !/^(n|s)$/.test(resizing) && x, resizingY = !/^(e|w)$/.test(resizing) && y, dragging = eventTarget.classed("extent"), dragRestore = d3_event_dragSuppress(target), center, origin = d3.mouse(target), offset;
      var w = d3.select(d3_window(target)).on("keydown.brush", keydown).on("keyup.brush", keyup);
      if (d3.event.changedTouches) {
        w.on("touchmove.brush", brushmove).on("touchend.brush", brushend);
      } else {
        w.on("mousemove.brush", brushmove).on("mouseup.brush", brushend);
      }
      g.interrupt().selectAll("*").interrupt();
      if (dragging) {
        origin[0] = xExtent[0] - origin[0];
        origin[1] = yExtent[0] - origin[1];
      } else if (resizing) {
        var ex = +/w$/.test(resizing), ey = +/^n/.test(resizing);
        offset = [ xExtent[1 - ex] - origin[0], yExtent[1 - ey] - origin[1] ];
        origin[0] = xExtent[ex];
        origin[1] = yExtent[ey];
      } else if (d3.event.altKey) center = origin.slice();
      g.style("pointer-events", "none").selectAll(".resize").style("display", null);
      d3.select("body").style("cursor", eventTarget.style("cursor"));
      event_({
        type: "brushstart"
      });
      brushmove();
      function keydown() {
        if (d3.event.keyCode == 32) {
          if (!dragging) {
            center = null;
            origin[0] -= xExtent[1];
            origin[1] -= yExtent[1];
            dragging = 2;
          }
          d3_eventPreventDefault();
        }
      }
      function keyup() {
        if (d3.event.keyCode == 32 && dragging == 2) {
          origin[0] += xExtent[1];
          origin[1] += yExtent[1];
          dragging = 0;
          d3_eventPreventDefault();
        }
      }
      function brushmove() {
        var point = d3.mouse(target), moved = false;
        if (offset) {
          point[0] += offset[0];
          point[1] += offset[1];
        }
        if (!dragging) {
          if (d3.event.altKey) {
            if (!center) center = [ (xExtent[0] + xExtent[1]) / 2, (yExtent[0] + yExtent[1]) / 2 ];
            origin[0] = xExtent[+(point[0] < center[0])];
            origin[1] = yExtent[+(point[1] < center[1])];
          } else center = null;
        }
        if (resizingX && move1(point, x, 0)) {
          redrawX(g);
          moved = true;
        }
        if (resizingY && move1(point, y, 1)) {
          redrawY(g);
          moved = true;
        }
        if (moved) {
          redraw(g);
          event_({
            type: "brush",
            mode: dragging ? "move" : "resize"
          });
        }
      }
      function move1(point, scale, i) {
        var range = d3_scaleRange(scale), r0 = range[0], r1 = range[1], position = origin[i], extent = i ? yExtent : xExtent, size = extent[1] - extent[0], min, max;
        if (dragging) {
          r0 -= position;
          r1 -= size + position;
        }
        min = (i ? yClamp : xClamp) ? Math.max(r0, Math.min(r1, point[i])) : point[i];
        if (dragging) {
          max = (min += position) + size;
        } else {
          if (center) position = Math.max(r0, Math.min(r1, 2 * center[i] - min));
          if (position < min) {
            max = min;
            min = position;
          } else {
            max = position;
          }
        }
        if (extent[0] != min || extent[1] != max) {
          if (i) yExtentDomain = null; else xExtentDomain = null;
          extent[0] = min;
          extent[1] = max;
          return true;
        }
      }
      function brushend() {
        brushmove();
        g.style("pointer-events", "all").selectAll(".resize").style("display", brush.empty() ? "none" : null);
        d3.select("body").style("cursor", null);
        w.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null);
        dragRestore();
        event_({
          type: "brushend"
        });
      }
    }
    brush.x = function(z) {
      if (!arguments.length) return x;
      x = z;
      resizes = d3_svg_brushResizes[!x << 1 | !y];
      return brush;
    };
    brush.y = function(z) {
      if (!arguments.length) return y;
      y = z;
      resizes = d3_svg_brushResizes[!x << 1 | !y];
      return brush;
    };
    brush.clamp = function(z) {
      if (!arguments.length) return x && y ? [ xClamp, yClamp ] : x ? xClamp : y ? yClamp : null;
      if (x && y) xClamp = !!z[0], yClamp = !!z[1]; else if (x) xClamp = !!z; else if (y) yClamp = !!z;
      return brush;
    };
    brush.extent = function(z) {
      var x0, x1, y0, y1, t;
      if (!arguments.length) {
        if (x) {
          if (xExtentDomain) {
            x0 = xExtentDomain[0], x1 = xExtentDomain[1];
          } else {
            x0 = xExtent[0], x1 = xExtent[1];
            if (x.invert) x0 = x.invert(x0), x1 = x.invert(x1);
            if (x1 < x0) t = x0, x0 = x1, x1 = t;
          }
        }
        if (y) {
          if (yExtentDomain) {
            y0 = yExtentDomain[0], y1 = yExtentDomain[1];
          } else {
            y0 = yExtent[0], y1 = yExtent[1];
            if (y.invert) y0 = y.invert(y0), y1 = y.invert(y1);
            if (y1 < y0) t = y0, y0 = y1, y1 = t;
          }
        }
        return x && y ? [ [ x0, y0 ], [ x1, y1 ] ] : x ? [ x0, x1 ] : y && [ y0, y1 ];
      }
      if (x) {
        x0 = z[0], x1 = z[1];
        if (y) x0 = x0[0], x1 = x1[0];
        xExtentDomain = [ x0, x1 ];
        if (x.invert) x0 = x(x0), x1 = x(x1);
        if (x1 < x0) t = x0, x0 = x1, x1 = t;
        if (x0 != xExtent[0] || x1 != xExtent[1]) xExtent = [ x0, x1 ];
      }
      if (y) {
        y0 = z[0], y1 = z[1];
        if (x) y0 = y0[1], y1 = y1[1];
        yExtentDomain = [ y0, y1 ];
        if (y.invert) y0 = y(y0), y1 = y(y1);
        if (y1 < y0) t = y0, y0 = y1, y1 = t;
        if (y0 != yExtent[0] || y1 != yExtent[1]) yExtent = [ y0, y1 ];
      }
      return brush;
    };
    brush.clear = function() {
      if (!brush.empty()) {
        xExtent = [ 0, 0 ], yExtent = [ 0, 0 ];
        xExtentDomain = yExtentDomain = null;
      }
      return brush;
    };
    brush.empty = function() {
      return !!x && xExtent[0] == xExtent[1] || !!y && yExtent[0] == yExtent[1];
    };
    return d3.rebind(brush, event, "on");
  };
  var d3_svg_brushCursor = {
    n: "ns-resize",
    e: "ew-resize",
    s: "ns-resize",
    w: "ew-resize",
    nw: "nwse-resize",
    ne: "nesw-resize",
    se: "nwse-resize",
    sw: "nesw-resize"
  };
  var d3_svg_brushResizes = [ [ "n", "e", "s", "w", "nw", "ne", "se", "sw" ], [ "e", "w" ], [ "n", "s" ], [] ];
  var d3_time_format = d3_time.format = d3_locale_enUS.timeFormat;
  var d3_time_formatUtc = d3_time_format.utc;
  var d3_time_formatIso = d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");
  d3_time_format.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? d3_time_formatIsoNative : d3_time_formatIso;
  function d3_time_formatIsoNative(date) {
    return date.toISOString();
  }
  d3_time_formatIsoNative.parse = function(string) {
    var date = new Date(string);
    return isNaN(date) ? null : date;
  };
  d3_time_formatIsoNative.toString = d3_time_formatIso.toString;
  d3_time.second = d3_time_interval(function(date) {
    return new d3_date(Math.floor(date / 1e3) * 1e3);
  }, function(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * 1e3);
  }, function(date) {
    return date.getSeconds();
  });
  d3_time.seconds = d3_time.second.range;
  d3_time.seconds.utc = d3_time.second.utc.range;
  d3_time.minute = d3_time_interval(function(date) {
    return new d3_date(Math.floor(date / 6e4) * 6e4);
  }, function(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * 6e4);
  }, function(date) {
    return date.getMinutes();
  });
  d3_time.minutes = d3_time.minute.range;
  d3_time.minutes.utc = d3_time.minute.utc.range;
  d3_time.hour = d3_time_interval(function(date) {
    var timezone = date.getTimezoneOffset() / 60;
    return new d3_date((Math.floor(date / 36e5 - timezone) + timezone) * 36e5);
  }, function(date, offset) {
    date.setTime(date.getTime() + Math.floor(offset) * 36e5);
  }, function(date) {
    return date.getHours();
  });
  d3_time.hours = d3_time.hour.range;
  d3_time.hours.utc = d3_time.hour.utc.range;
  d3_time.month = d3_time_interval(function(date) {
    date = d3_time.day(date);
    date.setDate(1);
    return date;
  }, function(date, offset) {
    date.setMonth(date.getMonth() + offset);
  }, function(date) {
    return date.getMonth();
  });
  d3_time.months = d3_time.month.range;
  d3_time.months.utc = d3_time.month.utc.range;
  function d3_time_scale(linear, methods, format) {
    function scale(x) {
      return linear(x);
    }
    scale.invert = function(x) {
      return d3_time_scaleDate(linear.invert(x));
    };
    scale.domain = function(x) {
      if (!arguments.length) return linear.domain().map(d3_time_scaleDate);
      linear.domain(x);
      return scale;
    };
    function tickMethod(extent, count) {
      var span = extent[1] - extent[0], target = span / count, i = d3.bisect(d3_time_scaleSteps, target);
      return i == d3_time_scaleSteps.length ? [ methods.year, d3_scale_linearTickRange(extent.map(function(d) {
        return d / 31536e6;
      }), count)[2] ] : !i ? [ d3_time_scaleMilliseconds, d3_scale_linearTickRange(extent, count)[2] ] : methods[target / d3_time_scaleSteps[i - 1] < d3_time_scaleSteps[i] / target ? i - 1 : i];
    }
    scale.nice = function(interval, skip) {
      var domain = scale.domain(), extent = d3_scaleExtent(domain), method = interval == null ? tickMethod(extent, 10) : typeof interval === "number" && tickMethod(extent, interval);
      if (method) interval = method[0], skip = method[1];
      function skipped(date) {
        return !isNaN(date) && !interval.range(date, d3_time_scaleDate(+date + 1), skip).length;
      }
      return scale.domain(d3_scale_nice(domain, skip > 1 ? {
        floor: function(date) {
          while (skipped(date = interval.floor(date))) date = d3_time_scaleDate(date - 1);
          return date;
        },
        ceil: function(date) {
          while (skipped(date = interval.ceil(date))) date = d3_time_scaleDate(+date + 1);
          return date;
        }
      } : interval));
    };
    scale.ticks = function(interval, skip) {
      var extent = d3_scaleExtent(scale.domain()), method = interval == null ? tickMethod(extent, 10) : typeof interval === "number" ? tickMethod(extent, interval) : !interval.range && [ {
        range: interval
      }, skip ];
      if (method) interval = method[0], skip = method[1];
      return interval.range(extent[0], d3_time_scaleDate(+extent[1] + 1), skip < 1 ? 1 : skip);
    };
    scale.tickFormat = function() {
      return format;
    };
    scale.copy = function() {
      return d3_time_scale(linear.copy(), methods, format);
    };
    return d3_scale_linearRebind(scale, linear);
  }
  function d3_time_scaleDate(t) {
    return new Date(t);
  }
  var d3_time_scaleSteps = [ 1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6 ];
  var d3_time_scaleLocalMethods = [ [ d3_time.second, 1 ], [ d3_time.second, 5 ], [ d3_time.second, 15 ], [ d3_time.second, 30 ], [ d3_time.minute, 1 ], [ d3_time.minute, 5 ], [ d3_time.minute, 15 ], [ d3_time.minute, 30 ], [ d3_time.hour, 1 ], [ d3_time.hour, 3 ], [ d3_time.hour, 6 ], [ d3_time.hour, 12 ], [ d3_time.day, 1 ], [ d3_time.day, 2 ], [ d3_time.week, 1 ], [ d3_time.month, 1 ], [ d3_time.month, 3 ], [ d3_time.year, 1 ] ];
  var d3_time_scaleLocalFormat = d3_time_format.multi([ [ ".%L", function(d) {
    return d.getMilliseconds();
  } ], [ ":%S", function(d) {
    return d.getSeconds();
  } ], [ "%I:%M", function(d) {
    return d.getMinutes();
  } ], [ "%I %p", function(d) {
    return d.getHours();
  } ], [ "%a %d", function(d) {
    return d.getDay() && d.getDate() != 1;
  } ], [ "%b %d", function(d) {
    return d.getDate() != 1;
  } ], [ "%B", function(d) {
    return d.getMonth();
  } ], [ "%Y", d3_true ] ]);
  var d3_time_scaleMilliseconds = {
    range: function(start, stop, step) {
      return d3.range(Math.ceil(start / step) * step, +stop, step).map(d3_time_scaleDate);
    },
    floor: d3_identity,
    ceil: d3_identity
  };
  d3_time_scaleLocalMethods.year = d3_time.year;
  d3_time.scale = function() {
    return d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat);
  };
  var d3_time_scaleUtcMethods = d3_time_scaleLocalMethods.map(function(m) {
    return [ m[0].utc, m[1] ];
  });
  var d3_time_scaleUtcFormat = d3_time_formatUtc.multi([ [ ".%L", function(d) {
    return d.getUTCMilliseconds();
  } ], [ ":%S", function(d) {
    return d.getUTCSeconds();
  } ], [ "%I:%M", function(d) {
    return d.getUTCMinutes();
  } ], [ "%I %p", function(d) {
    return d.getUTCHours();
  } ], [ "%a %d", function(d) {
    return d.getUTCDay() && d.getUTCDate() != 1;
  } ], [ "%b %d", function(d) {
    return d.getUTCDate() != 1;
  } ], [ "%B", function(d) {
    return d.getUTCMonth();
  } ], [ "%Y", d3_true ] ]);
  d3_time_scaleUtcMethods.year = d3_time.year.utc;
  d3_time.scale.utc = function() {
    return d3_time_scale(d3.scale.linear(), d3_time_scaleUtcMethods, d3_time_scaleUtcFormat);
  };
  d3.text = d3_xhrType(function(request) {
    return request.responseText;
  });
  d3.json = function(url, callback) {
    return d3_xhr(url, "application/json", d3_json, callback);
  };
  function d3_json(request) {
    return JSON.parse(request.responseText);
  }
  d3.html = function(url, callback) {
    return d3_xhr(url, "text/html", d3_html, callback);
  };
  function d3_html(request) {
    var range = d3_document.createRange();
    range.selectNode(d3_document.body);
    return range.createContextualFragment(request.responseText);
  }
  d3.xml = d3_xhrType(function(request) {
    return request.responseXML;
  });
  if (typeof define === "function" && define.amd) this.d3 = d3, define(d3); else if (typeof module === "object" && module.exports) module.exports = d3; else this.d3 = d3;
}();
},{}],213:[function(require,module,exports){
(function(window) {
    var re = {
        not_string: /[^s]/,
        number: /[diefg]/,
        json: /[j]/,
        not_json: /[^j]/,
        text: /^[^\x25]+/,
        modulo: /^\x25{2}/,
        placeholder: /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,
        key: /^([a-z_][a-z_\d]*)/i,
        key_access: /^\.([a-z_][a-z_\d]*)/i,
        index_access: /^\[(\d+)\]/,
        sign: /^[\+\-]/
    }

    function sprintf() {
        var key = arguments[0], cache = sprintf.cache
        if (!(cache[key] && cache.hasOwnProperty(key))) {
            cache[key] = sprintf.parse(key)
        }
        return sprintf.format.call(null, cache[key], arguments)
    }

    sprintf.format = function(parse_tree, argv) {
        var cursor = 1, tree_length = parse_tree.length, node_type = "", arg, output = [], i, k, match, pad, pad_character, pad_length, is_positive = true, sign = ""
        for (i = 0; i < tree_length; i++) {
            node_type = get_type(parse_tree[i])
            if (node_type === "string") {
                output[output.length] = parse_tree[i]
            }
            else if (node_type === "array") {
                match = parse_tree[i] // convenience purposes only
                if (match[2]) { // keyword argument
                    arg = argv[cursor]
                    for (k = 0; k < match[2].length; k++) {
                        if (!arg.hasOwnProperty(match[2][k])) {
                            throw new Error(sprintf("[sprintf] property '%s' does not exist", match[2][k]))
                        }
                        arg = arg[match[2][k]]
                    }
                }
                else if (match[1]) { // positional argument (explicit)
                    arg = argv[match[1]]
                }
                else { // positional argument (implicit)
                    arg = argv[cursor++]
                }

                if (get_type(arg) == "function") {
                    arg = arg()
                }

                if (re.not_string.test(match[8]) && re.not_json.test(match[8]) && (get_type(arg) != "number" && isNaN(arg))) {
                    throw new TypeError(sprintf("[sprintf] expecting number but found %s", get_type(arg)))
                }

                if (re.number.test(match[8])) {
                    is_positive = arg >= 0
                }

                switch (match[8]) {
                    case "b":
                        arg = arg.toString(2)
                    break
                    case "c":
                        arg = String.fromCharCode(arg)
                    break
                    case "d":
                    case "i":
                        arg = parseInt(arg, 10)
                    break
                    case "j":
                        arg = JSON.stringify(arg, null, match[6] ? parseInt(match[6]) : 0)
                    break
                    case "e":
                        arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential()
                    break
                    case "f":
                        arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg)
                    break
                    case "g":
                        arg = match[7] ? parseFloat(arg).toPrecision(match[7]) : parseFloat(arg)
                    break
                    case "o":
                        arg = arg.toString(8)
                    break
                    case "s":
                        arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg)
                    break
                    case "u":
                        arg = arg >>> 0
                    break
                    case "x":
                        arg = arg.toString(16)
                    break
                    case "X":
                        arg = arg.toString(16).toUpperCase()
                    break
                }
                if (re.json.test(match[8])) {
                    output[output.length] = arg
                }
                else {
                    if (re.number.test(match[8]) && (!is_positive || match[3])) {
                        sign = is_positive ? "+" : "-"
                        arg = arg.toString().replace(re.sign, "")
                    }
                    else {
                        sign = ""
                    }
                    pad_character = match[4] ? match[4] === "0" ? "0" : match[4].charAt(1) : " "
                    pad_length = match[6] - (sign + arg).length
                    pad = match[6] ? (pad_length > 0 ? str_repeat(pad_character, pad_length) : "") : ""
                    output[output.length] = match[5] ? sign + arg + pad : (pad_character === "0" ? sign + pad + arg : pad + sign + arg)
                }
            }
        }
        return output.join("")
    }

    sprintf.cache = {}

    sprintf.parse = function(fmt) {
        var _fmt = fmt, match = [], parse_tree = [], arg_names = 0
        while (_fmt) {
            if ((match = re.text.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = match[0]
            }
            else if ((match = re.modulo.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = "%"
            }
            else if ((match = re.placeholder.exec(_fmt)) !== null) {
                if (match[2]) {
                    arg_names |= 1
                    var field_list = [], replacement_field = match[2], field_match = []
                    if ((field_match = re.key.exec(replacement_field)) !== null) {
                        field_list[field_list.length] = field_match[1]
                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== "") {
                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1]
                            }
                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1]
                            }
                            else {
                                throw new SyntaxError("[sprintf] failed to parse named argument key")
                            }
                        }
                    }
                    else {
                        throw new SyntaxError("[sprintf] failed to parse named argument key")
                    }
                    match[2] = field_list
                }
                else {
                    arg_names |= 2
                }
                if (arg_names === 3) {
                    throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")
                }
                parse_tree[parse_tree.length] = match
            }
            else {
                throw new SyntaxError("[sprintf] unexpected placeholder")
            }
            _fmt = _fmt.substring(match[0].length)
        }
        return parse_tree
    }

    var vsprintf = function(fmt, argv, _argv) {
        _argv = (argv || []).slice(0)
        _argv.splice(0, 0, fmt)
        return sprintf.apply(null, _argv)
    }

    /**
     * helpers
     */
    function get_type(variable) {
        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase()
    }

    function str_repeat(input, multiplier) {
        return Array(multiplier + 1).join(input)
    }

    /**
     * export to either browser or node.js
     */
    if (typeof exports !== "undefined") {
        exports.sprintf = sprintf
        exports.vsprintf = vsprintf
    }
    else {
        window.sprintf = sprintf
        window.vsprintf = vsprintf

        if (typeof define === "function" && define.amd) {
            define(function() {
                return {
                    sprintf: sprintf,
                    vsprintf: vsprintf
                }
            })
        }
    }
})(typeof window === "undefined" ? this : window);

},{}],214:[function(require,module,exports){
var trim = require('./trim');
var decap = require('./decapitalize');

module.exports = function camelize(str, decapitalize) {
  str = trim(str).replace(/[-_\s]+(.)?/g, function(match, c) {
    return c ? c.toUpperCase() : '';
  });

  if (decapitalize === true) {
    return decap(str);
  } else {
    return str;
  }
};

},{"./decapitalize":223,"./trim":276}],215:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function capitalize(str, lowercaseRest) {
  str = makeString(str);
  var remainingChars = !lowercaseRest ? str.slice(1) : str.slice(1).toLowerCase();

  return str.charAt(0).toUpperCase() + remainingChars;
};

},{"./helper/makeString":233}],216:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function chars(str) {
  return makeString(str).split('');
};

},{"./helper/makeString":233}],217:[function(require,module,exports){
module.exports = function chop(str, step) {
  if (str == null) return [];
  str = String(str);
  step = ~~step;
  return step > 0 ? str.match(new RegExp('.{1,' + step + '}', 'g')) : [str];
};

},{}],218:[function(require,module,exports){
var capitalize = require('./capitalize');
var camelize = require('./camelize');
var makeString = require('./helper/makeString');

module.exports = function classify(str) {
  str = makeString(str);
  return capitalize(camelize(str.replace(/[\W_]/g, ' ')).replace(/\s/g, ''));
};

},{"./camelize":214,"./capitalize":215,"./helper/makeString":233}],219:[function(require,module,exports){
var trim = require('./trim');

module.exports = function clean(str) {
  return trim(str).replace(/\s\s+/g, ' ');
};

},{"./trim":276}],220:[function(require,module,exports){

var makeString = require('./helper/makeString');

var from  = '',
  to    = 'aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz';

from += from.toUpperCase();
to += to.toUpperCase();

to = to.split('');

// for tokens requireing multitoken output
from += '';
to.push('ss');


module.exports = function cleanDiacritics(str) {
  return makeString(str).replace(/.{1}/g, function(c){
    var index = from.indexOf(c);
    return index === -1 ? c : to[index];
  });
};

},{"./helper/makeString":233}],221:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function(str, substr) {
  str = makeString(str);
  substr = makeString(substr);

  if (str.length === 0 || substr.length === 0) return 0;
  
  return str.split(substr).length - 1;
};

},{"./helper/makeString":233}],222:[function(require,module,exports){
var trim = require('./trim');

module.exports = function dasherize(str) {
  return trim(str).replace(/([A-Z])/g, '-$1').replace(/[-_\s]+/g, '-').toLowerCase();
};

},{"./trim":276}],223:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function decapitalize(str) {
  str = makeString(str);
  return str.charAt(0).toLowerCase() + str.slice(1);
};

},{"./helper/makeString":233}],224:[function(require,module,exports){
var makeString = require('./helper/makeString');

function getIndent(str) {
  var matches = str.match(/^[\s\\t]*/gm);
  var indent = matches[0].length;
  
  for (var i = 1; i < matches.length; i++) {
    indent = Math.min(matches[i].length, indent);
  }

  return indent;
}

module.exports = function dedent(str, pattern) {
  str = makeString(str);
  var indent = getIndent(str);
  var reg;

  if (indent === 0) return str;

  if (typeof pattern === 'string') {
    reg = new RegExp('^' + pattern, 'gm');
  } else {
    reg = new RegExp('^[ \\t]{' + indent + '}', 'gm');
  }

  return str.replace(reg, '');
};

},{"./helper/makeString":233}],225:[function(require,module,exports){
var makeString = require('./helper/makeString');
var toPositive = require('./helper/toPositive');

module.exports = function endsWith(str, ends, position) {
  str = makeString(str);
  ends = '' + ends;
  if (typeof position == 'undefined') {
    position = str.length - ends.length;
  } else {
    position = Math.min(toPositive(position), str.length) - ends.length;
  }
  return position >= 0 && str.indexOf(ends, position) === position;
};

},{"./helper/makeString":233,"./helper/toPositive":235}],226:[function(require,module,exports){
var makeString = require('./helper/makeString');
var escapeChars = require('./helper/escapeChars');

var regexString = '[';
for(var key in escapeChars) {
  regexString += key;
}
regexString += ']';

var regex = new RegExp( regexString, 'g');

module.exports = function escapeHTML(str) {

  return makeString(str).replace(regex, function(m) {
    return '&' + escapeChars[m] + ';';
  });
};

},{"./helper/escapeChars":230,"./helper/makeString":233}],227:[function(require,module,exports){
module.exports = function() {
  var result = {};

  for (var prop in this) {
    if (!this.hasOwnProperty(prop) || prop.match(/^(?:include|contains|reverse|join|map|wrap)$/)) continue;
    result[prop] = this[prop];
  }

  return result;
};

},{}],228:[function(require,module,exports){
var makeString = require('./makeString');

module.exports = function adjacent(str, direction) {
  str = makeString(str);
  if (str.length === 0) {
    return '';
  }
  return str.slice(0, -1) + String.fromCharCode(str.charCodeAt(str.length - 1) + direction);
};

},{"./makeString":233}],229:[function(require,module,exports){
var escapeRegExp = require('./escapeRegExp');

module.exports = function defaultToWhiteSpace(characters) {
  if (characters == null)
    return '\\s';
  else if (characters.source)
    return characters.source;
  else
    return '[' + escapeRegExp(characters) + ']';
};

},{"./escapeRegExp":231}],230:[function(require,module,exports){
/* We're explicitly defining the list of entities we want to escape.
nbsp is an HTML entity, but we don't want to escape all space characters in a string, hence its omission in this map.

*/
var escapeChars = {
  '' : 'cent',
  '' : 'pound',
  '' : 'yen',
  '': 'euro',
  '' :'copy',
  '' : 'reg',
  '<' : 'lt',
  '>' : 'gt',
  '"' : 'quot',
  '&' : 'amp',
  '\'' : '#39'
};

module.exports = escapeChars;

},{}],231:[function(require,module,exports){
var makeString = require('./makeString');

module.exports = function escapeRegExp(str) {
  return makeString(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
};

},{"./makeString":233}],232:[function(require,module,exports){
/*
We're explicitly defining the list of entities that might see in escape HTML strings
*/
var htmlEntities = {
  nbsp: ' ',
  cent: '',
  pound: '',
  yen: '',
  euro: '',
  copy: '',
  reg: '',
  lt: '<',
  gt: '>',
  quot: '"',
  amp: '&',
  apos: '\''
};

module.exports = htmlEntities;

},{}],233:[function(require,module,exports){
/**
 * Ensure some object is a coerced to a string
 **/
module.exports = function makeString(object) {
  if (object == null) return '';
  return '' + object;
};

},{}],234:[function(require,module,exports){
module.exports = function strRepeat(str, qty){
  if (qty < 1) return '';
  var result = '';
  while (qty > 0) {
    if (qty & 1) result += str;
    qty >>= 1, str += str;
  }
  return result;
};

},{}],235:[function(require,module,exports){
module.exports = function toPositive(number) {
  return number < 0 ? 0 : (+number || 0);
};

},{}],236:[function(require,module,exports){
var capitalize = require('./capitalize');
var underscored = require('./underscored');
var trim = require('./trim');

module.exports = function humanize(str) {
  return capitalize(trim(underscored(str).replace(/_id$/, '').replace(/_/g, ' ')));
};

},{"./capitalize":215,"./trim":276,"./underscored":278}],237:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function include(str, needle) {
  if (needle === '') return true;
  return makeString(str).indexOf(needle) !== -1;
};

},{"./helper/makeString":233}],238:[function(require,module,exports){
/*
* Underscore.string
* (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
* Underscore.string is freely distributable under the terms of the MIT license.
* Documentation: https://github.com/epeli/underscore.string
* Some code is borrowed from MooTools and Alexandru Marasteanu.
* Version '3.3.4'
* @preserve
*/

'use strict';

function s(value) {
  /* jshint validthis: true */
  if (!(this instanceof s)) return new s(value);
  this._wrapped = value;
}

s.VERSION = '3.3.4';

s.isBlank          = require('./isBlank');
s.stripTags        = require('./stripTags');
s.capitalize       = require('./capitalize');
s.decapitalize     = require('./decapitalize');
s.chop             = require('./chop');
s.trim             = require('./trim');
s.clean            = require('./clean');
s.cleanDiacritics  = require('./cleanDiacritics');
s.count            = require('./count');
s.chars            = require('./chars');
s.swapCase         = require('./swapCase');
s.escapeHTML       = require('./escapeHTML');
s.unescapeHTML     = require('./unescapeHTML');
s.splice           = require('./splice');
s.insert           = require('./insert');
s.replaceAll       = require('./replaceAll');
s.include          = require('./include');
s.join             = require('./join');
s.lines            = require('./lines');
s.dedent           = require('./dedent');
s.reverse          = require('./reverse');
s.startsWith       = require('./startsWith');
s.endsWith         = require('./endsWith');
s.pred             = require('./pred');
s.succ             = require('./succ');
s.titleize         = require('./titleize');
s.camelize         = require('./camelize');
s.underscored      = require('./underscored');
s.dasherize        = require('./dasherize');
s.classify         = require('./classify');
s.humanize         = require('./humanize');
s.ltrim            = require('./ltrim');
s.rtrim            = require('./rtrim');
s.truncate         = require('./truncate');
s.prune            = require('./prune');
s.words            = require('./words');
s.pad              = require('./pad');
s.lpad             = require('./lpad');
s.rpad             = require('./rpad');
s.lrpad            = require('./lrpad');
s.sprintf          = require('./sprintf');
s.vsprintf         = require('./vsprintf');
s.toNumber         = require('./toNumber');
s.numberFormat     = require('./numberFormat');
s.strRight         = require('./strRight');
s.strRightBack     = require('./strRightBack');
s.strLeft          = require('./strLeft');
s.strLeftBack      = require('./strLeftBack');
s.toSentence       = require('./toSentence');
s.toSentenceSerial = require('./toSentenceSerial');
s.slugify          = require('./slugify');
s.surround         = require('./surround');
s.quote            = require('./quote');
s.unquote          = require('./unquote');
s.repeat           = require('./repeat');
s.naturalCmp       = require('./naturalCmp');
s.levenshtein      = require('./levenshtein');
s.toBoolean        = require('./toBoolean');
s.exports          = require('./exports');
s.escapeRegExp     = require('./helper/escapeRegExp');
s.wrap             = require('./wrap');
s.map              = require('./map');

// Aliases
s.strip     = s.trim;
s.lstrip    = s.ltrim;
s.rstrip    = s.rtrim;
s.center    = s.lrpad;
s.rjust     = s.lpad;
s.ljust     = s.rpad;
s.contains  = s.include;
s.q         = s.quote;
s.toBool    = s.toBoolean;
s.camelcase = s.camelize;
s.mapChars  = s.map;


// Implement chaining
s.prototype = {
  value: function value() {
    return this._wrapped;
  }
};

function fn2method(key, fn) {
  if (typeof fn !== 'function') return;
  s.prototype[key] = function() {
    var args = [this._wrapped].concat(Array.prototype.slice.call(arguments));
    var res = fn.apply(null, args);
    // if the result is non-string stop the chain and return the value
    return typeof res === 'string' ? new s(res) : res;
  };
}

// Copy functions to instance methods for chaining
for (var key in s) fn2method(key, s[key]);

fn2method('tap', function tap(string, fn) {
  return fn(string);
});

function prototype2method(methodName) {
  fn2method(methodName, function(context) {
    var args = Array.prototype.slice.call(arguments, 1);
    return String.prototype[methodName].apply(context, args);
  });
}

var prototypeMethods = [
  'toUpperCase',
  'toLowerCase',
  'split',
  'replace',
  'slice',
  'substring',
  'substr',
  'concat'
];

for (var method in prototypeMethods) prototype2method(prototypeMethods[method]);


module.exports = s;

},{"./camelize":214,"./capitalize":215,"./chars":216,"./chop":217,"./classify":218,"./clean":219,"./cleanDiacritics":220,"./count":221,"./dasherize":222,"./decapitalize":223,"./dedent":224,"./endsWith":225,"./escapeHTML":226,"./exports":227,"./helper/escapeRegExp":231,"./humanize":236,"./include":237,"./insert":239,"./isBlank":240,"./join":241,"./levenshtein":242,"./lines":243,"./lpad":244,"./lrpad":245,"./ltrim":246,"./map":247,"./naturalCmp":248,"./numberFormat":249,"./pad":250,"./pred":251,"./prune":252,"./quote":253,"./repeat":254,"./replaceAll":255,"./reverse":256,"./rpad":257,"./rtrim":258,"./slugify":259,"./splice":260,"./sprintf":261,"./startsWith":262,"./strLeft":263,"./strLeftBack":264,"./strRight":265,"./strRightBack":266,"./stripTags":267,"./succ":268,"./surround":269,"./swapCase":270,"./titleize":271,"./toBoolean":272,"./toNumber":273,"./toSentence":274,"./toSentenceSerial":275,"./trim":276,"./truncate":277,"./underscored":278,"./unescapeHTML":279,"./unquote":280,"./vsprintf":281,"./words":282,"./wrap":283}],239:[function(require,module,exports){
var splice = require('./splice');

module.exports = function insert(str, i, substr) {
  return splice(str, i, 0, substr);
};

},{"./splice":260}],240:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function isBlank(str) {
  return (/^\s*$/).test(makeString(str));
};

},{"./helper/makeString":233}],241:[function(require,module,exports){
var makeString = require('./helper/makeString');
var slice = [].slice;

module.exports = function join() {
  var args = slice.call(arguments),
    separator = args.shift();

  return args.join(makeString(separator));
};

},{"./helper/makeString":233}],242:[function(require,module,exports){
var makeString = require('./helper/makeString');

/**
 * Based on the implementation here: https://github.com/hiddentao/fast-levenshtein
 */
module.exports = function levenshtein(str1, str2) {
  'use strict';
  str1 = makeString(str1);
  str2 = makeString(str2);

  // Short cut cases  
  if (str1 === str2) return 0;
  if (!str1 || !str2) return Math.max(str1.length, str2.length);

  // two rows
  var prevRow = new Array(str2.length + 1);

  // initialise previous row
  for (var i = 0; i < prevRow.length; ++i) {
    prevRow[i] = i;
  }

  // calculate current row distance from previous row
  for (i = 0; i < str1.length; ++i) {
    var nextCol = i + 1;

    for (var j = 0; j < str2.length; ++j) {
      var curCol = nextCol;

      // substution
      nextCol = prevRow[j] + ( (str1.charAt(i) === str2.charAt(j)) ? 0 : 1 );
      // insertion
      var tmp = curCol + 1;
      if (nextCol > tmp) {
        nextCol = tmp;
      }
      // deletion
      tmp = prevRow[j + 1] + 1;
      if (nextCol > tmp) {
        nextCol = tmp;
      }

      // copy current col value into previous (in preparation for next iteration)
      prevRow[j] = curCol;
    }

    // copy last col value into previous (in preparation for next iteration)
    prevRow[j] = nextCol;
  }

  return nextCol;
};

},{"./helper/makeString":233}],243:[function(require,module,exports){
module.exports = function lines(str) {
  if (str == null) return [];
  return String(str).split(/\r\n?|\n/);
};

},{}],244:[function(require,module,exports){
var pad = require('./pad');

module.exports = function lpad(str, length, padStr) {
  return pad(str, length, padStr);
};

},{"./pad":250}],245:[function(require,module,exports){
var pad = require('./pad');

module.exports = function lrpad(str, length, padStr) {
  return pad(str, length, padStr, 'both');
};

},{"./pad":250}],246:[function(require,module,exports){
var makeString = require('./helper/makeString');
var defaultToWhiteSpace = require('./helper/defaultToWhiteSpace');
var nativeTrimLeft = String.prototype.trimLeft;

module.exports = function ltrim(str, characters) {
  str = makeString(str);
  if (!characters && nativeTrimLeft) return nativeTrimLeft.call(str);
  characters = defaultToWhiteSpace(characters);
  return str.replace(new RegExp('^' + characters + '+'), '');
};

},{"./helper/defaultToWhiteSpace":229,"./helper/makeString":233}],247:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function(str, callback) {
  str = makeString(str);

  if (str.length === 0 || typeof callback !== 'function') return str;

  return str.replace(/./g, callback);
};

},{"./helper/makeString":233}],248:[function(require,module,exports){
module.exports = function naturalCmp(str1, str2) {
  if (str1 == str2) return 0;
  if (!str1) return -1;
  if (!str2) return 1;

  var cmpRegex = /(\.\d+|\d+|\D+)/g,
    tokens1 = String(str1).match(cmpRegex),
    tokens2 = String(str2).match(cmpRegex),
    count = Math.min(tokens1.length, tokens2.length);

  for (var i = 0; i < count; i++) {
    var a = tokens1[i],
      b = tokens2[i];

    if (a !== b) {
      var num1 = +a;
      var num2 = +b;
      if (num1 === num1 && num2 === num2) {
        return num1 > num2 ? 1 : -1;
      }
      return a < b ? -1 : 1;
    }
  }

  if (tokens1.length != tokens2.length)
    return tokens1.length - tokens2.length;

  return str1 < str2 ? -1 : 1;
};

},{}],249:[function(require,module,exports){
module.exports = function numberFormat(number, dec, dsep, tsep) {
  if (isNaN(number) || number == null) return '';

  number = number.toFixed(~~dec);
  tsep = typeof tsep == 'string' ? tsep : ',';

  var parts = number.split('.'),
    fnums = parts[0],
    decimals = parts[1] ? (dsep || '.') + parts[1] : '';

  return fnums.replace(/(\d)(?=(?:\d{3})+$)/g, '$1' + tsep) + decimals;
};

},{}],250:[function(require,module,exports){
var makeString = require('./helper/makeString');
var strRepeat = require('./helper/strRepeat');

module.exports = function pad(str, length, padStr, type) {
  str = makeString(str);
  length = ~~length;

  var padlen = 0;

  if (!padStr)
    padStr = ' ';
  else if (padStr.length > 1)
    padStr = padStr.charAt(0);

  switch (type) {
  case 'right':
    padlen = length - str.length;
    return str + strRepeat(padStr, padlen);
  case 'both':
    padlen = length - str.length;
    return strRepeat(padStr, Math.ceil(padlen / 2)) + str + strRepeat(padStr, Math.floor(padlen / 2));
  default: // 'left'
    padlen = length - str.length;
    return strRepeat(padStr, padlen) + str;
  }
};

},{"./helper/makeString":233,"./helper/strRepeat":234}],251:[function(require,module,exports){
var adjacent = require('./helper/adjacent');

module.exports = function succ(str) {
  return adjacent(str, -1);
};

},{"./helper/adjacent":228}],252:[function(require,module,exports){
/**
 * _s.prune: a more elegant version of truncate
 * prune extra chars, never leaving a half-chopped word.
 * @author github.com/rwz
 */
var makeString = require('./helper/makeString');
var rtrim = require('./rtrim');

module.exports = function prune(str, length, pruneStr) {
  str = makeString(str);
  length = ~~length;
  pruneStr = pruneStr != null ? String(pruneStr) : '...';

  if (str.length <= length) return str;

  var tmpl = function(c) {
      return c.toUpperCase() !== c.toLowerCase() ? 'A' : ' ';
    },
    template = str.slice(0, length + 1).replace(/.(?=\W*\w*$)/g, tmpl); // 'Hello, world' -> 'HellAA AAAAA'

  if (template.slice(template.length - 2).match(/\w\w/))
    template = template.replace(/\s*\S+$/, '');
  else
    template = rtrim(template.slice(0, template.length - 1));

  return (template + pruneStr).length > str.length ? str : str.slice(0, template.length) + pruneStr;
};

},{"./helper/makeString":233,"./rtrim":258}],253:[function(require,module,exports){
var surround = require('./surround');

module.exports = function quote(str, quoteChar) {
  return surround(str, quoteChar || '"');
};

},{"./surround":269}],254:[function(require,module,exports){
var makeString = require('./helper/makeString');
var strRepeat = require('./helper/strRepeat');

module.exports = function repeat(str, qty, separator) {
  str = makeString(str);

  qty = ~~qty;

  // using faster implementation if separator is not needed;
  if (separator == null) return strRepeat(str, qty);

  // this one is about 300x slower in Google Chrome
  /*eslint no-empty: 0*/
  for (var repeat = []; qty > 0; repeat[--qty] = str) {}
  return repeat.join(separator);
};

},{"./helper/makeString":233,"./helper/strRepeat":234}],255:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function replaceAll(str, find, replace, ignorecase) {
  var flags = (ignorecase === true)?'gi':'g';
  var reg = new RegExp(find, flags);

  return makeString(str).replace(reg, replace);
};

},{"./helper/makeString":233}],256:[function(require,module,exports){
var chars = require('./chars');

module.exports = function reverse(str) {
  return chars(str).reverse().join('');
};

},{"./chars":216}],257:[function(require,module,exports){
var pad = require('./pad');

module.exports = function rpad(str, length, padStr) {
  return pad(str, length, padStr, 'right');
};

},{"./pad":250}],258:[function(require,module,exports){
var makeString = require('./helper/makeString');
var defaultToWhiteSpace = require('./helper/defaultToWhiteSpace');
var nativeTrimRight = String.prototype.trimRight;

module.exports = function rtrim(str, characters) {
  str = makeString(str);
  if (!characters && nativeTrimRight) return nativeTrimRight.call(str);
  characters = defaultToWhiteSpace(characters);
  return str.replace(new RegExp(characters + '+$'), '');
};

},{"./helper/defaultToWhiteSpace":229,"./helper/makeString":233}],259:[function(require,module,exports){
var trim = require('./trim');
var dasherize = require('./dasherize');
var cleanDiacritics = require('./cleanDiacritics');

module.exports = function slugify(str) {
  return trim(dasherize(cleanDiacritics(str).replace(/[^\w\s-]/g, '-').toLowerCase()), '-');
};

},{"./cleanDiacritics":220,"./dasherize":222,"./trim":276}],260:[function(require,module,exports){
var chars = require('./chars');

module.exports = function splice(str, i, howmany, substr) {
  var arr = chars(str);
  arr.splice(~~i, ~~howmany, substr);
  return arr.join('');
};

},{"./chars":216}],261:[function(require,module,exports){
var deprecate = require('util-deprecate');

module.exports = deprecate(require('sprintf-js').sprintf,
  'sprintf() will be removed in the next major release, use the sprintf-js package instead.');

},{"sprintf-js":213,"util-deprecate":285}],262:[function(require,module,exports){
var makeString = require('./helper/makeString');
var toPositive = require('./helper/toPositive');

module.exports = function startsWith(str, starts, position) {
  str = makeString(str);
  starts = '' + starts;
  position = position == null ? 0 : Math.min(toPositive(position), str.length);
  return str.lastIndexOf(starts, position) === position;
};

},{"./helper/makeString":233,"./helper/toPositive":235}],263:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function strLeft(str, sep) {
  str = makeString(str);
  sep = makeString(sep);
  var pos = !sep ? -1 : str.indexOf(sep);
  return~ pos ? str.slice(0, pos) : str;
};

},{"./helper/makeString":233}],264:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function strLeftBack(str, sep) {
  str = makeString(str);
  sep = makeString(sep);
  var pos = str.lastIndexOf(sep);
  return~ pos ? str.slice(0, pos) : str;
};

},{"./helper/makeString":233}],265:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function strRight(str, sep) {
  str = makeString(str);
  sep = makeString(sep);
  var pos = !sep ? -1 : str.indexOf(sep);
  return~ pos ? str.slice(pos + sep.length, str.length) : str;
};

},{"./helper/makeString":233}],266:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function strRightBack(str, sep) {
  str = makeString(str);
  sep = makeString(sep);
  var pos = !sep ? -1 : str.lastIndexOf(sep);
  return~ pos ? str.slice(pos + sep.length, str.length) : str;
};

},{"./helper/makeString":233}],267:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function stripTags(str) {
  return makeString(str).replace(/<\/?[^>]+>/g, '');
};

},{"./helper/makeString":233}],268:[function(require,module,exports){
var adjacent = require('./helper/adjacent');

module.exports = function succ(str) {
  return adjacent(str, 1);
};

},{"./helper/adjacent":228}],269:[function(require,module,exports){
module.exports = function surround(str, wrapper) {
  return [wrapper, str, wrapper].join('');
};

},{}],270:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function swapCase(str) {
  return makeString(str).replace(/\S/g, function(c) {
    return c === c.toUpperCase() ? c.toLowerCase() : c.toUpperCase();
  });
};

},{"./helper/makeString":233}],271:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function titleize(str) {
  return makeString(str).toLowerCase().replace(/(?:^|\s|-)\S/g, function(c) {
    return c.toUpperCase();
  });
};

},{"./helper/makeString":233}],272:[function(require,module,exports){
var trim = require('./trim');

function boolMatch(s, matchers) {
  var i, matcher, down = s.toLowerCase();
  matchers = [].concat(matchers);
  for (i = 0; i < matchers.length; i += 1) {
    matcher = matchers[i];
    if (!matcher) continue;
    if (matcher.test && matcher.test(s)) return true;
    if (matcher.toLowerCase() === down) return true;
  }
}

module.exports = function toBoolean(str, trueValues, falseValues) {
  if (typeof str === 'number') str = '' + str;
  if (typeof str !== 'string') return !!str;
  str = trim(str);
  if (boolMatch(str, trueValues || ['true', '1'])) return true;
  if (boolMatch(str, falseValues || ['false', '0'])) return false;
};

},{"./trim":276}],273:[function(require,module,exports){
module.exports = function toNumber(num, precision) {
  if (num == null) return 0;
  var factor = Math.pow(10, isFinite(precision) ? precision : 0);
  return Math.round(num * factor) / factor;
};

},{}],274:[function(require,module,exports){
var rtrim = require('./rtrim');

module.exports = function toSentence(array, separator, lastSeparator, serial) {
  separator = separator || ', ';
  lastSeparator = lastSeparator || ' and ';
  var a = array.slice(),
    lastMember = a.pop();

  if (array.length > 2 && serial) lastSeparator = rtrim(separator) + lastSeparator;

  return a.length ? a.join(separator) + lastSeparator + lastMember : lastMember;
};

},{"./rtrim":258}],275:[function(require,module,exports){
var toSentence = require('./toSentence');

module.exports = function toSentenceSerial(array, sep, lastSep) {
  return toSentence(array, sep, lastSep, true);
};

},{"./toSentence":274}],276:[function(require,module,exports){
var makeString = require('./helper/makeString');
var defaultToWhiteSpace = require('./helper/defaultToWhiteSpace');
var nativeTrim = String.prototype.trim;

module.exports = function trim(str, characters) {
  str = makeString(str);
  if (!characters && nativeTrim) return nativeTrim.call(str);
  characters = defaultToWhiteSpace(characters);
  return str.replace(new RegExp('^' + characters + '+|' + characters + '+$', 'g'), '');
};

},{"./helper/defaultToWhiteSpace":229,"./helper/makeString":233}],277:[function(require,module,exports){
var makeString = require('./helper/makeString');

module.exports = function truncate(str, length, truncateStr) {
  str = makeString(str);
  truncateStr = truncateStr || '...';
  length = ~~length;
  return str.length > length ? str.slice(0, length) + truncateStr : str;
};

},{"./helper/makeString":233}],278:[function(require,module,exports){
var trim = require('./trim');

module.exports = function underscored(str) {
  return trim(str).replace(/([a-z\d])([A-Z]+)/g, '$1_$2').replace(/[-\s]+/g, '_').toLowerCase();
};

},{"./trim":276}],279:[function(require,module,exports){
var makeString = require('./helper/makeString');
var htmlEntities = require('./helper/htmlEntities');

module.exports = function unescapeHTML(str) {
  return makeString(str).replace(/\&([^;]+);/g, function(entity, entityCode) {
    var match;

    if (entityCode in htmlEntities) {
      return htmlEntities[entityCode];
    /*eslint no-cond-assign: 0*/
    } else if (match = entityCode.match(/^#x([\da-fA-F]+)$/)) {
      return String.fromCharCode(parseInt(match[1], 16));
    /*eslint no-cond-assign: 0*/
    } else if (match = entityCode.match(/^#(\d+)$/)) {
      return String.fromCharCode(~~match[1]);
    } else {
      return entity;
    }
  });
};

},{"./helper/htmlEntities":232,"./helper/makeString":233}],280:[function(require,module,exports){
module.exports = function unquote(str, quoteChar) {
  quoteChar = quoteChar || '"';
  if (str[0] === quoteChar && str[str.length - 1] === quoteChar)
    return str.slice(1, str.length - 1);
  else return str;
};

},{}],281:[function(require,module,exports){
var deprecate = require('util-deprecate');

module.exports = deprecate(require('sprintf-js').vsprintf,
  'vsprintf() will be removed in the next major release, use the sprintf-js package instead.');

},{"sprintf-js":213,"util-deprecate":285}],282:[function(require,module,exports){
var isBlank = require('./isBlank');
var trim = require('./trim');

module.exports = function words(str, delimiter) {
  if (isBlank(str)) return [];
  return trim(str, delimiter).split(delimiter || /\s+/);
};

},{"./isBlank":240,"./trim":276}],283:[function(require,module,exports){
// Wrap
// wraps a string by a certain width

var makeString = require('./helper/makeString');

module.exports = function wrap(str, options){
  str = makeString(str);
  
  options = options || {};
  
  var width = options.width || 75;
  var seperator = options.seperator || '\n';
  var cut = options.cut || false;
  var preserveSpaces = options.preserveSpaces || false;
  var trailingSpaces = options.trailingSpaces || false;
  
  var result;
  
  if(width <= 0){
    return str;
  }
  
  else if(!cut){
  
    var words = str.split(' ');
    var current_column = 0;
    result = '';
  
    while(words.length > 0){
      
      // if adding a space and the next word would cause this line to be longer than width...
      if(1 + words[0].length + current_column > width){
        //start a new line if this line is not already empty
        if(current_column > 0){
          // add a space at the end of the line is preserveSpaces is true
          if (preserveSpaces){
            result += ' ';
            current_column++;
          }
          // fill the rest of the line with spaces if trailingSpaces option is true
          else if(trailingSpaces){
            while(current_column < width){
              result += ' ';
              current_column++;
            }            
          }
          //start new line
          result += seperator;
          current_column = 0;
        }
      }
  
      // if not at the begining of the line, add a space in front of the word
      if(current_column > 0){
        result += ' ';
        current_column++;
      }
  
      // tack on the next word, update current column, a pop words array
      result += words[0];
      current_column += words[0].length;
      words.shift();
  
    }
  
    // fill the rest of the line with spaces if trailingSpaces option is true
    if(trailingSpaces){
      while(current_column < width){
        result += ' ';
        current_column++;
      }            
    }
  
    return result;
  
  }
  
  else {
  
    var index = 0;
    result = '';
  
    // walk through each character and add seperators where appropriate
    while(index < str.length){
      if(index % width == 0 && index > 0){
        result += seperator;
      }
      result += str.charAt(index);
      index++;
    }
  
    // fill the rest of the line with spaces if trailingSpaces option is true
    if(trailingSpaces){
      while(index % width > 0){
        result += ' ';
        index++;
      }            
    }
    
    return result;
  }
};

},{"./helper/makeString":233}],284:[function(require,module,exports){
//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

(function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `exports` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var
    push             = ArrayProto.push,
    slice            = ArrayProto.slice,
    toString         = ObjProto.toString,
    hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind,
    nativeCreate       = Object.create;

  // Naked function reference for surrogate-prototype-swapping.
  var Ctor = function(){};

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for the old `require()` API. If we're in
  // the browser, add `_` as a global object.
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root._ = _;
  }

  // Current version.
  _.VERSION = '1.8.3';

  // Internal function that returns an efficient (for current engines) version
  // of the passed-in callback, to be repeatedly applied in other Underscore
  // functions.
  var optimizeCb = function(func, context, argCount) {
    if (context === void 0) return func;
    switch (argCount == null ? 3 : argCount) {
      case 1: return function(value) {
        return func.call(context, value);
      };
      case 2: return function(value, other) {
        return func.call(context, value, other);
      };
      case 3: return function(value, index, collection) {
        return func.call(context, value, index, collection);
      };
      case 4: return function(accumulator, value, index, collection) {
        return func.call(context, accumulator, value, index, collection);
      };
    }
    return function() {
      return func.apply(context, arguments);
    };
  };

  // A mostly-internal function to generate callbacks that can be applied
  // to each element in a collection, returning the desired result  either
  // identity, an arbitrary callback, a property matcher, or a property accessor.
  var cb = function(value, context, argCount) {
    if (value == null) return _.identity;
    if (_.isFunction(value)) return optimizeCb(value, context, argCount);
    if (_.isObject(value)) return _.matcher(value);
    return _.property(value);
  };
  _.iteratee = function(value, context) {
    return cb(value, context, Infinity);
  };

  // An internal function for creating assigner functions.
  var createAssigner = function(keysFunc, undefinedOnly) {
    return function(obj) {
      var length = arguments.length;
      if (length < 2 || obj == null) return obj;
      for (var index = 1; index < length; index++) {
        var source = arguments[index],
            keys = keysFunc(source),
            l = keys.length;
        for (var i = 0; i < l; i++) {
          var key = keys[i];
          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];
        }
      }
      return obj;
    };
  };

  // An internal function for creating a new object that inherits from another.
  var baseCreate = function(prototype) {
    if (!_.isObject(prototype)) return {};
    if (nativeCreate) return nativeCreate(prototype);
    Ctor.prototype = prototype;
    var result = new Ctor;
    Ctor.prototype = null;
    return result;
  };

  var property = function(key) {
    return function(obj) {
      return obj == null ? void 0 : obj[key];
    };
  };

  // Helper for collection methods to determine whether a collection
  // should be iterated as an array or as an object
  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
  var getLength = property('length');
  var isArrayLike = function(collection) {
    var length = getLength(collection);
    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
  };

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles raw objects in addition to array-likes. Treats all
  // sparse array-likes as if they were dense.
  _.each = _.forEach = function(obj, iteratee, context) {
    iteratee = optimizeCb(iteratee, context);
    var i, length;
    if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
        iteratee(obj[i], i, obj);
      }
    } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
        iteratee(obj[keys[i]], keys[i], obj);
      }
    }
    return obj;
  };

  // Return the results of applying the iteratee to each element.
  _.map = _.collect = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length,
        results = Array(length);
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      results[index] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Create a reducing function iterating left or right.
  function createReduce(dir) {
    // Optimized iterator function as using arguments.length
    // in the main function will deoptimize the, see #1991.
    function iterator(obj, iteratee, memo, keys, index, length) {
      for (; index >= 0 && index < length; index += dir) {
        var currentKey = keys ? keys[index] : index;
        memo = iteratee(memo, obj[currentKey], currentKey, obj);
      }
      return memo;
    }

    return function(obj, iteratee, memo, context) {
      iteratee = optimizeCb(iteratee, context, 4);
      var keys = !isArrayLike(obj) && _.keys(obj),
          length = (keys || obj).length,
          index = dir > 0 ? 0 : length - 1;
      // Determine the initial value if none is provided.
      if (arguments.length < 3) {
        memo = obj[keys ? keys[index] : index];
        index += dir;
      }
      return iterator(obj, iteratee, memo, keys, index, length);
    };
  }

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`.
  _.reduce = _.foldl = _.inject = createReduce(1);

  // The right-associative version of reduce, also known as `foldr`.
  _.reduceRight = _.foldr = createReduce(-1);

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, predicate, context) {
    var key;
    if (isArrayLike(obj)) {
      key = _.findIndex(obj, predicate, context);
    } else {
      key = _.findKey(obj, predicate, context);
    }
    if (key !== void 0 && key !== -1) return obj[key];
  };

  // Return all the elements that pass a truth test.
  // Aliased as `select`.
  _.filter = _.select = function(obj, predicate, context) {
    var results = [];
    predicate = cb(predicate, context);
    _.each(obj, function(value, index, list) {
      if (predicate(value, index, list)) results.push(value);
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, predicate, context) {
    return _.filter(obj, _.negate(cb(predicate)), context);
  };

  // Determine whether all of the elements match a truth test.
  // Aliased as `all`.
  _.every = _.all = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (!predicate(obj[currentKey], currentKey, obj)) return false;
    }
    return true;
  };

  // Determine if at least one element in the object matches a truth test.
  // Aliased as `any`.
  _.some = _.any = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (predicate(obj[currentKey], currentKey, obj)) return true;
    }
    return false;
  };

  // Determine if the array or object contains a given item (using `===`).
  // Aliased as `includes` and `include`.
  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {
    if (!isArrayLike(obj)) obj = _.values(obj);
    if (typeof fromIndex != 'number' || guard) fromIndex = 0;
    return _.indexOf(obj, item, fromIndex) >= 0;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    var isFunc = _.isFunction(method);
    return _.map(obj, function(value) {
      var func = isFunc ? method : value[method];
      return func == null ? func : func.apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, _.property(key));
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // containing specific `key:value` pairs.
  _.where = function(obj, attrs) {
    return _.filter(obj, _.matcher(attrs));
  };

  // Convenience version of a common use case of `find`: getting the first object
  // containing specific `key:value` pairs.
  _.findWhere = function(obj, attrs) {
    return _.find(obj, _.matcher(attrs));
  };

  // Return the maximum element (or element-based computation).
  _.max = function(obj, iteratee, context) {
    var result = -Infinity, lastComputed = -Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value > result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iteratee, context) {
    var result = Infinity, lastComputed = Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value < result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed < lastComputed || computed === Infinity && result === Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Shuffle a collection, using the modern version of the
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).
  _.shuffle = function(obj) {
    var set = isArrayLike(obj) ? obj : _.values(obj);
    var length = set.length;
    var shuffled = Array(length);
    for (var index = 0, rand; index < length; index++) {
      rand = _.random(0, index);
      if (rand !== index) shuffled[index] = shuffled[rand];
      shuffled[rand] = set[index];
    }
    return shuffled;
  };

  // Sample **n** random values from a collection.
  // If **n** is not specified, returns a single random element.
  // The internal `guard` argument allows it to work with `map`.
  _.sample = function(obj, n, guard) {
    if (n == null || guard) {
      if (!isArrayLike(obj)) obj = _.values(obj);
      return obj[_.random(obj.length - 1)];
    }
    return _.shuffle(obj).slice(0, Math.max(0, n));
  };

  // Sort the object's values by a criterion produced by an iteratee.
  _.sortBy = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value: value,
        index: index,
        criteria: iteratee(value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index - right.index;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function(behavior) {
    return function(obj, iteratee, context) {
      var result = {};
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index) {
        var key = iteratee(value, index, obj);
        behavior(result, value, key);
      });
      return result;
    };
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key].push(value); else result[key] = [value];
  });

  // Indexes the object's values by a criterion, similar to `groupBy`, but for
  // when you know that your index values will be unique.
  _.indexBy = group(function(result, value, key) {
    result[key] = value;
  });

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key]++; else result[key] = 1;
  });

  // Safely create a real, live array from anything iterable.
  _.toArray = function(obj) {
    if (!obj) return [];
    if (_.isArray(obj)) return slice.call(obj);
    if (isArrayLike(obj)) return _.map(obj, _.identity);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    if (obj == null) return 0;
    return isArrayLike(obj) ? obj.length : _.keys(obj).length;
  };

  // Split a collection into two arrays: one whose elements all satisfy the given
  // predicate, and one whose elements all do not satisfy the predicate.
  _.partition = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var pass = [], fail = [];
    _.each(obj, function(value, key, obj) {
      (predicate(value, key, obj) ? pass : fail).push(value);
    });
    return [pass, fail];
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[0];
    return _.initial(array, array.length - n);
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array.
  _.last = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[array.length - 1];
    return _.rest(array, Math.max(0, array.length - n));
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array.
  _.rest = _.tail = _.drop = function(array, n, guard) {
    return slice.call(array, n == null || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, _.identity);
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function(input, shallow, strict, startIndex) {
    var output = [], idx = 0;
    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {
      var value = input[i];
      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
        //flatten current level of array or arguments object
        if (!shallow) value = flatten(value, shallow, strict);
        var j = 0, len = value.length;
        output.length += len;
        while (j < len) {
          output[idx++] = value[j++];
        }
      } else if (!strict) {
        output[idx++] = value;
      }
    }
    return output;
  };

  // Flatten out an array, either recursively (by default), or just one level.
  _.flatten = function(array, shallow) {
    return flatten(array, shallow, false);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iteratee, context) {
    if (!_.isBoolean(isSorted)) {
      context = iteratee;
      iteratee = isSorted;
      isSorted = false;
    }
    if (iteratee != null) iteratee = cb(iteratee, context);
    var result = [];
    var seen = [];
    for (var i = 0, length = getLength(array); i < length; i++) {
      var value = array[i],
          computed = iteratee ? iteratee(value, i, array) : value;
      if (isSorted) {
        if (!i || seen !== computed) result.push(value);
        seen = computed;
      } else if (iteratee) {
        if (!_.contains(seen, computed)) {
          seen.push(computed);
          result.push(value);
        }
      } else if (!_.contains(result, value)) {
        result.push(value);
      }
    }
    return result;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(flatten(arguments, true, true));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function(array) {
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = getLength(array); i < length; i++) {
      var item = array[i];
      if (_.contains(result, item)) continue;
      for (var j = 1; j < argsLength; j++) {
        if (!_.contains(arguments[j], item)) break;
      }
      if (j === argsLength) result.push(item);
    }
    return result;
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = flatten(arguments, true, true, 1);
    return _.filter(array, function(value){
      return !_.contains(rest, value);
    });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    return _.unzip(arguments);
  };

  // Complement of _.zip. Unzip accepts an array of arrays and groups
  // each array's elements on shared indices
  _.unzip = function(array) {
    var length = array && _.max(array, getLength).length || 0;
    var result = Array(length);

    for (var index = 0; index < length; index++) {
      result[index] = _.pluck(array, index);
    }
    return result;
  };

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function(list, values) {
    var result = {};
    for (var i = 0, length = getLength(list); i < length; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // Generator function to create the findIndex and findLastIndex functions
  function createPredicateIndexFinder(dir) {
    return function(array, predicate, context) {
      predicate = cb(predicate, context);
      var length = getLength(array);
      var index = dir > 0 ? 0 : length - 1;
      for (; index >= 0 && index < length; index += dir) {
        if (predicate(array[index], index, array)) return index;
      }
      return -1;
    };
  }

  // Returns the first index on an array-like that passes a predicate test
  _.findIndex = createPredicateIndexFinder(1);
  _.findLastIndex = createPredicateIndexFinder(-1);

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iteratee, context) {
    iteratee = cb(iteratee, context, 1);
    var value = iteratee(obj);
    var low = 0, high = getLength(array);
    while (low < high) {
      var mid = Math.floor((low + high) / 2);
      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
    }
    return low;
  };

  // Generator function to create the indexOf and lastIndexOf functions
  function createIndexFinder(dir, predicateFind, sortedIndex) {
    return function(array, item, idx) {
      var i = 0, length = getLength(array);
      if (typeof idx == 'number') {
        if (dir > 0) {
            i = idx >= 0 ? idx : Math.max(idx + length, i);
        } else {
            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
        }
      } else if (sortedIndex && idx && length) {
        idx = sortedIndex(array, item);
        return array[idx] === item ? idx : -1;
      }
      if (item !== item) {
        idx = predicateFind(slice.call(array, i, length), _.isNaN);
        return idx >= 0 ? idx + i : -1;
      }
      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
        if (array[idx] === item) return idx;
      }
      return -1;
    };
  }

  // Return the position of the first occurrence of an item in an array,
  // or -1 if the item is not included in the array.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (stop == null) {
      stop = start || 0;
      start = 0;
    }
    step = step || 1;

    var length = Math.max(Math.ceil((stop - start) / step), 0);
    var range = Array(length);

    for (var idx = 0; idx < length; idx++, start += step) {
      range[idx] = start;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Determines whether to execute a function as a constructor
  // or a normal function with the provided arguments
  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {
    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
    var self = baseCreate(sourceFunc.prototype);
    var result = sourceFunc.apply(self, args);
    if (_.isObject(result)) return result;
    return self;
  };

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
  // available.
  _.bind = function(func, context) {
    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
    var args = slice.call(arguments, 2);
    var bound = function() {
      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));
    };
    return bound;
  };

  // Partially apply a function by creating a version that has had some of its
  // arguments pre-filled, without changing its dynamic `this` context. _ acts
  // as a placeholder, allowing any combination of arguments to be pre-filled.
  _.partial = function(func) {
    var boundArgs = slice.call(arguments, 1);
    var bound = function() {
      var position = 0, length = boundArgs.length;
      var args = Array(length);
      for (var i = 0; i < length; i++) {
        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];
      }
      while (position < arguments.length) args.push(arguments[position++]);
      return executeBound(func, bound, this, this, args);
    };
    return bound;
  };

  // Bind a number of an object's methods to that object. Remaining arguments
  // are the method names to be bound. Useful for ensuring that all callbacks
  // defined on an object belong to it.
  _.bindAll = function(obj) {
    var i, length = arguments.length, key;
    if (length <= 1) throw new Error('bindAll must be passed function names');
    for (i = 1; i < length; i++) {
      key = arguments[i];
      obj[key] = _.bind(obj[key], obj);
    }
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memoize = function(key) {
      var cache = memoize.cache;
      var address = '' + (hasher ? hasher.apply(this, arguments) : key);
      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
      return cache[address];
    };
    memoize.cache = {};
    return memoize;
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){
      return func.apply(null, args);
    }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = _.partial(_.delay, _, 1);

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time. Normally, the throttled function will run
  // as much as it can, without ever going more than once per `wait` duration;
  // but if you'd like to disable the execution on the leading edge, pass
  // `{leading: false}`. To disable execution on the trailing edge, ditto.
  _.throttle = function(func, wait, options) {
    var context, args, result;
    var timeout = null;
    var previous = 0;
    if (!options) options = {};
    var later = function() {
      previous = options.leading === false ? 0 : _.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };
    return function() {
      var now = _.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, args, context, timestamp, result;

    var later = function() {
      var last = _.now() - timestamp;

      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        if (!immediate) {
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        }
      }
    };

    return function() {
      context = this;
      args = arguments;
      timestamp = _.now();
      var callNow = immediate && !timeout;
      if (!timeout) timeout = setTimeout(later, wait);
      if (callNow) {
        result = func.apply(context, args);
        context = args = null;
      }

      return result;
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return _.partial(wrapper, func);
  };

  // Returns a negated version of the passed-in predicate.
  _.negate = function(predicate) {
    return function() {
      return !predicate.apply(this, arguments);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var args = arguments;
    var start = args.length - 1;
    return function() {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) result = args[i].call(this, result);
      return result;
    };
  };

  // Returns a function that will only be executed on and after the Nth call.
  _.after = function(times, func) {
    return function() {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Returns a function that will only be executed up to (but not including) the Nth call.
  _.before = function(times, func) {
    var memo;
    return function() {
      if (--times > 0) {
        memo = func.apply(this, arguments);
      }
      if (times <= 1) func = null;
      return memo;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = _.partial(_.before, 2);

  // Object Functions
  // ----------------

  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

  function collectNonEnumProps(obj, keys) {
    var nonEnumIdx = nonEnumerableProps.length;
    var constructor = obj.constructor;
    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;

    // Constructor is a special case.
    var prop = 'constructor';
    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

    while (nonEnumIdx--) {
      prop = nonEnumerableProps[nonEnumIdx];
      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
        keys.push(prop);
      }
    }
  }

  // Retrieve the names of an object's own properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = function(obj) {
    if (!_.isObject(obj)) return [];
    if (nativeKeys) return nativeKeys(obj);
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve all the property names of an object.
  _.allKeys = function(obj) {
    if (!_.isObject(obj)) return [];
    var keys = [];
    for (var key in obj) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var values = Array(length);
    for (var i = 0; i < length; i++) {
      values[i] = obj[keys[i]];
    }
    return values;
  };

  // Returns the results of applying the iteratee to each element of the object
  // In contrast to _.map it returns an object
  _.mapObject = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys =  _.keys(obj),
          length = keys.length,
          results = {},
          currentKey;
      for (var index = 0; index < length; index++) {
        currentKey = keys[index];
        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
      }
      return results;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var pairs = Array(length);
    for (var i = 0; i < length; i++) {
      pairs[i] = [keys[i], obj[keys[i]]];
    }
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function(obj) {
    var result = {};
    var keys = _.keys(obj);
    for (var i = 0, length = keys.length; i < length; i++) {
      result[obj[keys[i]]] = keys[i];
    }
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = createAssigner(_.allKeys);

  // Assigns a given object with all the own properties in the passed-in object(s)
  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
  _.extendOwn = _.assign = createAssigner(_.keys);

  // Returns the first key on an object that passes a predicate test
  _.findKey = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = _.keys(obj), key;
    for (var i = 0, length = keys.length; i < length; i++) {
      key = keys[i];
      if (predicate(obj[key], key, obj)) return key;
    }
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(object, oiteratee, context) {
    var result = {}, obj = object, iteratee, keys;
    if (obj == null) return result;
    if (_.isFunction(oiteratee)) {
      keys = _.allKeys(obj);
      iteratee = optimizeCb(oiteratee, context);
    } else {
      keys = flatten(arguments, false, false, 1);
      iteratee = function(value, key, obj) { return key in obj; };
      obj = Object(obj);
    }
    for (var i = 0, length = keys.length; i < length; i++) {
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
    }
    return result;
  };

   // Return a copy of the object without the blacklisted properties.
  _.omit = function(obj, iteratee, context) {
    if (_.isFunction(iteratee)) {
      iteratee = _.negate(iteratee);
    } else {
      var keys = _.map(flatten(arguments, false, false, 1), String);
      iteratee = function(value, key) {
        return !_.contains(keys, key);
      };
    }
    return _.pick(obj, iteratee, context);
  };

  // Fill in a given object with default properties.
  _.defaults = createAssigner(_.allKeys, true);

  // Creates an object that inherits from the given prototype object.
  // If additional properties are provided then they will be added to the
  // created object.
  _.create = function(prototype, props) {
    var result = baseCreate(prototype);
    if (props) _.extendOwn(result, props);
    return result;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Returns whether an object has a given set of `key:value` pairs.
  _.isMatch = function(object, attrs) {
    var keys = _.keys(attrs), length = keys.length;
    if (object == null) return !length;
    var obj = Object(object);
    for (var i = 0; i < length; i++) {
      var key = keys[i];
      if (attrs[key] !== obj[key] || !(key in obj)) return false;
    }
    return true;
  };


  // Internal recursive comparison function for `isEqual`.
  var eq = function(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
    if (a === b) return a !== 0 || 1 / a === 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className !== toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, regular expressions, dates, and booleans are compared by value.
      case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return '' + a === '' + b;
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive.
        // Object(NaN) is equivalent to NaN
        if (+a !== +a) return +b !== +b;
        // An `egal` comparison is performed for other numeric values.
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a === +b;
    }

    var areArrays = className === '[object Array]';
    if (!areArrays) {
      if (typeof a != 'object' || typeof b != 'object') return false;

      // Objects with different constructors are not equivalent, but `Object`s or `Array`s
      // from different frames are.
      var aCtor = a.constructor, bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
                               _.isFunction(bCtor) && bCtor instanceof bCtor)
                          && ('constructor' in a && 'constructor' in b)) {
        return false;
      }
    }
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

    // Initializing stack of traversed objects.
    // It's done here since we only need them for objects and arrays comparison.
    aStack = aStack || [];
    bStack = bStack || [];
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] === a) return bStack[length] === b;
    }

    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);

    // Recursively compare objects and arrays.
    if (areArrays) {
      // Compare array lengths to determine if a deep comparison is necessary.
      length = a.length;
      if (length !== b.length) return false;
      // Deep compare the contents, ignoring non-numeric properties.
      while (length--) {
        if (!eq(a[length], b[length], aStack, bStack)) return false;
      }
    } else {
      // Deep compare objects.
      var keys = _.keys(a), key;
      length = keys.length;
      // Ensure that both objects contain the same number of properties before comparing deep equality.
      if (_.keys(b).length !== length) return false;
      while (length--) {
        // Deep compare each member
        key = keys[length];
        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return true;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
    return _.keys(obj).length === 0;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) === '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.
  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) === '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE < 9), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return _.has(obj, 'callee');
    };
  }

  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
  // IE 11 (#1621), and in Safari 8 (#1929).
  if (typeof /./ != 'function' && typeof Int8Array != 'object') {
    _.isFunction = function(obj) {
      return typeof obj == 'function' || false;
    };
  }

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return isFinite(obj) && !isNaN(parseFloat(obj));
  };

  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
  _.isNaN = function(obj) {
    return _.isNumber(obj) && obj !== +obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function(obj, key) {
    return obj != null && hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iteratees.
  _.identity = function(value) {
    return value;
  };

  // Predicate-generating functions. Often useful outside of Underscore.
  _.constant = function(value) {
    return function() {
      return value;
    };
  };

  _.noop = function(){};

  _.property = property;

  // Generates a function for a given object that returns a given property.
  _.propertyOf = function(obj) {
    return obj == null ? function(){} : function(key) {
      return obj[key];
    };
  };

  // Returns a predicate for checking whether an object has a given set of
  // `key:value` pairs.
  _.matcher = _.matches = function(attrs) {
    attrs = _.extendOwn({}, attrs);
    return function(obj) {
      return _.isMatch(obj, attrs);
    };
  };

  // Run a function **n** times.
  _.times = function(n, iteratee, context) {
    var accum = Array(Math.max(0, n));
    iteratee = optimizeCb(iteratee, context, 1);
    for (var i = 0; i < n; i++) accum[i] = iteratee(i);
    return accum;
  };

  // Return a random integer between min and max (inclusive).
  _.random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + Math.floor(Math.random() * (max - min + 1));
  };

  // A (possibly faster) way to get the current timestamp as an integer.
  _.now = Date.now || function() {
    return new Date().getTime();
  };

   // List of HTML entities for escaping.
  var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '`': '&#x60;'
  };
  var unescapeMap = _.invert(escapeMap);

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  var createEscaper = function(map) {
    var escaper = function(match) {
      return map[match];
    };
    // Regexes for identifying a key that needs to be escaped
    var source = '(?:' + _.keys(map).join('|') + ')';
    var testRegexp = RegExp(source);
    var replaceRegexp = RegExp(source, 'g');
    return function(string) {
      string = string == null ? '' : '' + string;
      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
    };
  };
  _.escape = createEscaper(escapeMap);
  _.unescape = createEscaper(unescapeMap);

  // If the value of the named `property` is a function then invoke it with the
  // `object` as context; otherwise, return it.
  _.result = function(object, property, fallback) {
    var value = object == null ? void 0 : object[property];
    if (value === void 0) {
      value = fallback;
    }
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = ++idCounter + '';
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'":      "'",
    '\\':     '\\',
    '\r':     'r',
    '\n':     'n',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escaper = /\\|'|\r|\n|\u2028|\u2029/g;

  var escapeChar = function(match) {
    return '\\' + escapes[match];
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  // NB: `oldSettings` only exists for backwards compatibility.
  _.template = function(text, settings, oldSettings) {
    if (!settings && oldSettings) settings = oldSettings;
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = RegExp([
      (settings.escape || noMatch).source,
      (settings.interpolate || noMatch).source,
      (settings.evaluate || noMatch).source
    ].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset).replace(escaper, escapeChar);
      index = offset + match.length;

      if (escape) {
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
      } else if (interpolate) {
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
      } else if (evaluate) {
        source += "';\n" + evaluate + "\n__p+='";
      }

      // Adobe VMs need the match returned to produce the correct offest.
      return match;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," +
      "print=function(){__p+=__j.call(arguments,'');};\n" +
      source + 'return __p;\n';

    try {
      var render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled source as a convenience for precompilation.
    var argument = settings.variable || 'obj';
    template.source = 'function(' + argument + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function. Start chaining a wrapped Underscore object.
  _.chain = function(obj) {
    var instance = _(obj);
    instance._chain = true;
    return instance;
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var result = function(instance, obj) {
    return instance._chain ? _(obj).chain() : obj;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function(obj) {
    _.each(_.functions(obj), function(name) {
      var func = _[name] = obj[name];
      _.prototype[name] = function() {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return result(this, func.apply(_, args));
      };
    });
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
      return result(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  _.each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      return result(this, method.apply(this._wrapped, arguments));
    };
  });

  // Extracts the result from a wrapped and chained object.
  _.prototype.value = function() {
    return this._wrapped;
  };

  // Provide unwrapping proxy for some methods used in engine operations
  // such as arithmetic and JSON stringification.
  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

  _.prototype.toString = function() {
    return '' + this._wrapped;
  };

  // AMD registration happens at the end for compatibility with AMD loaders
  // that may not enforce next-turn semantics on modules. Even though general
  // practice for AMD registration is to be anonymous, underscore registers
  // as a named module because, like jQuery, it is a base library that is
  // popular enough to be bundled in a third party lib, but not be part of
  // an AMD load request. Those cases could generate an error when an
  // anonymous define() is called outside of a loader request.
  if (typeof define === 'function' && define.amd) {
    define('underscore', [], function() {
      return _;
    });
  }
}.call(this));

},{}],285:[function(require,module,exports){
(function (global){

/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],286:[function(require,module,exports){
var JsonViewer,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

JsonViewer = (function(superClass) {
  extend(JsonViewer, superClass);

  function JsonViewer() {
    return JsonViewer.__super__.constructor.apply(this, arguments);
  }

  JsonViewer.prototype.className = 'json-viewer';

  JsonViewer.prototype.template = require('./templates/json_viewer');

  JsonViewer.prototype.serializeData = function() {
    return {
      json: JSON.stringify(this.model.toJSON(), null, 2).split("\n")
    };
  };

  return JsonViewer;

})(Marionette.LayoutView);

module.exports = JsonViewer;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwL2NvZmZlZS9tb2R1bGVzL2xpYi92aWV3cy9qc29uX3ZpZXdlci9pbmRleC5jb2ZmZWUiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhcHAvY29mZmVlL21vZHVsZXMvbGliL3ZpZXdzL2pzb25fdmlld2VyL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxJQUFBLFVBQUE7RUFBQTs7O0FBQU07Ozs7Ozs7dUJBQ0osU0FBQSxHQUFXOzt1QkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHlCQUFSOzt1QkFFVixhQUFBLEdBQWUsU0FBQTtBQUNiLFdBQU87TUFBRSxJQUFBLEVBQU0sSUFBSSxDQUFDLFNBQUwsQ0FBZSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsQ0FBQSxDQUFmLEVBQWdDLElBQWhDLEVBQXNDLENBQXRDLENBQXdDLENBQUMsS0FBekMsQ0FBK0MsSUFBL0MsQ0FBUjs7RUFETTs7OztHQUpRLFVBQVUsQ0FBQzs7QUFTcEMsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/json_viewer":130}],287:[function(require,module,exports){
var NavChild, NavList, NavView,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

NavChild = (function(superClass) {
  extend(NavChild, superClass);

  function NavChild() {
    return NavChild.__super__.constructor.apply(this, arguments);
  }

  NavChild.prototype.tagName = 'li';

  NavChild.prototype.className = 'nav-item';

  NavChild.prototype.template = require('./templates/nav_child');

  NavChild.prototype.behaviors = {
    SelectableChild: {}
  };

  NavChild.prototype.className = function() {
    var css;
    css = 'nav-item';
    if (this.model.get('active')) {
      css += ' active';
    }
    if (this.model.get('dropdown')) {
      css += ' dropdown';
    }
    return css;
  };

  NavChild.prototype.onRender = function() {
    if (this.model.get('active')) {
      return this.triggerMethod('selected');
    }
  };

  NavChild.prototype.onClick = function(e) {
    if (this.model.get('href')) {
      return;
    }
    if (this.model.get('dropdown')) {
      return;
    }
    if (this.$el.hasClass('active')) {
      return;
    }
    if (e != null) {
      e.preventDefault();
    }
    this.triggerMethod('selected');
    return this.$el.addClass('active').siblings().removeClass('active');
  };

  return NavChild;

})(Mn.LayoutView);

NavList = (function(superClass) {
  extend(NavList, superClass);

  function NavList() {
    return NavList.__super__.constructor.apply(this, arguments);
  }

  NavList.prototype.tagName = 'ul';

  NavList.prototype.childView = NavChild;

  NavList.prototype.className = function() {
    var css;
    css = 'nav';
    if (this.options.stacked) {
      return css += ' nav-pills nav-stacked';
    }
    if (this.options.pills) {
      return css += ' nav-pills';
    }
    return css += ' nav-tabs';
  };

  NavList.prototype.childEvents = {
    'selected': 'onChildSelected'
  };

  NavList.prototype.onChildSelected = function(view) {
    this.trigger('nav:change', view);
    return this.trigger(view.model.get('trigger'));
  };

  return NavList;

})(Mn.CollectionView);

NavView = (function(superClass) {
  extend(NavView, superClass);

  function NavView() {
    this._getActiveNav = bind(this._getActiveNav, this);
    return NavView.__super__.constructor.apply(this, arguments);
  }

  NavView.prototype.template = require('./templates/nav');

  NavView.prototype.regions = {
    navRegion: '[data-region=nav]',
    contentRegion: '[data-region=content]'
  };

  NavView.prototype.behaviors = function() {
    if (this.navOptions.stateful) {
      return {
        ViewState: {
          key: this.navOptions.stateful
        }
      };
    }
    return {};
  };

  NavView.prototype.navItems = [
    {
      icon: 'fa-times',
      text: 'Default Nav',
      trigger: 'default'
    }
  ];

  NavView.prototype.navOptions = {};

  NavView.prototype.navEvents = {};

  NavView.prototype.initialize = function() {
    var trigger;
    this.navOptions = _.result(this, 'navOptions') || {};
    this.navItems = _.result(this, 'navItems');
    trigger = this._getActiveNav();
    if (!trigger) {
      return;
    }
    return _.map(this.navItems, function(item) {
      if (item.trigger === trigger) {
        return item.active = true;
      }
      return item.active = false;
    });
  };

  NavView.prototype.templateHelpers = function() {
    return {
      stacked: this.navOptions.stacked || null
    };
  };

  NavView.prototype._getActiveNav = function() {
    var ref, state;
    if (this.navOptions.stateful) {
      state = this.getState();
      if (state) {
        return state;
      }
    }
    return ((ref = _.findWhere(this.navItems, {
      "default": true
    })) != null ? ref.trigger : void 0) || null;
  };

  NavView.prototype._setActiveNav = function(navChildView) {
    this.activeNav = navChildView;
    if (!this.navOptions.stateful) {
      return;
    }
    return this.setState(navChildView.model.get('trigger'));
  };

  NavView.prototype.triggerActiveNav = function() {
    var ref;
    return (ref = this.activeNav) != null ? ref.trigger('selected') : void 0;
  };

  NavView.prototype.showNavView = function() {
    this.navCollection = new Backbone.Collection(this.navItems);
    this.navList = new NavList(_.extend(this.navOptions, {
      collection: this.navCollection
    }));
    this.navList.on('nav:change', (function(_this) {
      return function(navChildView) {
        return _this._setActiveNav(navChildView);
      };
    })(this));
    Mn.bindEntityEvents(this, this.navList, _.result(this, 'navEvents'));
    return this.navRegion.show(this.navList);
  };

  NavView.prototype.onRender = function() {
    return this.showNavView();
  };

  return NavView;

})(Mn.LayoutView);

module.exports = NavView;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwL2NvZmZlZS9tb2R1bGVzL2xpYi92aWV3cy9uYXYvaW5kZXguY29mZmVlIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwL2NvZmZlZS9tb2R1bGVzL2xpYi92aWV3cy9uYXYvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsMEJBQUE7RUFBQTs7OztBQUFNOzs7Ozs7O3FCQUNKLE9BQUEsR0FBUzs7cUJBQ1QsU0FBQSxHQUFXOztxQkFDWCxRQUFBLEdBQVUsT0FBQSxDQUFRLHVCQUFSOztxQkFFVixTQUFBLEdBQ0U7SUFBQSxlQUFBLEVBQWlCLEVBQWpCOzs7cUJBRUYsU0FBQSxHQUFXLFNBQUE7QUFDVCxRQUFBO0lBQUEsR0FBQSxHQUFNO0lBQ04sSUFBb0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsUUFBWCxDQUFwQjtNQUFBLEdBQUEsSUFBTyxVQUFQOztJQUNBLElBQXNCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLFVBQVgsQ0FBdEI7TUFBQSxHQUFBLElBQU8sWUFBUDs7QUFDQSxXQUFPO0VBSkU7O3FCQU1YLFFBQUEsR0FBVSxTQUFBO0lBQ1IsSUFBOEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsUUFBWCxDQUE5QjthQUFBLElBQUMsQ0FBQSxhQUFELENBQWUsVUFBZixFQUFBOztFQURROztxQkFHVixPQUFBLEdBQVMsU0FBQyxDQUFEO0lBQ1AsSUFBVSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxNQUFYLENBQVY7QUFBQSxhQUFBOztJQUNBLElBQVUsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsVUFBWCxDQUFWO0FBQUEsYUFBQTs7SUFDQSxJQUFVLElBQUMsQ0FBQSxHQUFHLENBQUMsUUFBTCxDQUFjLFFBQWQsQ0FBVjtBQUFBLGFBQUE7OztNQUNBLENBQUMsQ0FBRSxjQUFILENBQUE7O0lBQ0EsSUFBQyxDQUFBLGFBQUQsQ0FBZSxVQUFmO1dBQ0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxRQUFMLENBQWMsUUFBZCxDQUF1QixDQUFDLFFBQXhCLENBQUEsQ0FBa0MsQ0FBQyxXQUFuQyxDQUErQyxRQUEvQztFQU5POzs7O0dBakJZLEVBQUUsQ0FBQzs7QUEyQnBCOzs7Ozs7O29CQUNKLE9BQUEsR0FBUzs7b0JBQ1QsU0FBQSxHQUFXOztvQkFFWCxTQUFBLEdBQVcsU0FBQTtBQUNULFFBQUE7SUFBQSxHQUFBLEdBQU07SUFDTixJQUEyQyxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQXBEO0FBQUEsYUFBTyxHQUFBLElBQU8seUJBQWQ7O0lBQ0EsSUFBMkMsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFwRDtBQUFBLGFBQU8sR0FBQSxJQUFPLGFBQWQ7O0FBQ0EsV0FBTyxHQUFBLElBQU87RUFKTDs7b0JBTVgsV0FBQSxHQUNFO0lBQUEsVUFBQSxFQUFZLGlCQUFaOzs7b0JBRUYsZUFBQSxHQUFpQixTQUFDLElBQUQ7SUFDZixJQUFDLENBQUEsT0FBRCxDQUFTLFlBQVQsRUFBdUIsSUFBdkI7QUFDQSxXQUFPLElBQUMsQ0FBQSxPQUFELENBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFYLENBQWUsU0FBZixDQUFUO0VBRlE7Ozs7R0FiRyxFQUFFLENBQUM7O0FBbUJuQjs7Ozs7Ozs7b0JBQ0osUUFBQSxHQUFVLE9BQUEsQ0FBUSxpQkFBUjs7b0JBRVYsT0FBQSxHQUNFO0lBQUEsU0FBQSxFQUFnQixtQkFBaEI7SUFDQSxhQUFBLEVBQWdCLHVCQURoQjs7O29CQUlGLFNBQUEsR0FBVyxTQUFBO0lBQ1QsSUFBdUQsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUFuRTtBQUFBLGFBQU87UUFBRSxTQUFBLEVBQVc7VUFBRSxHQUFBLEVBQUssSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUFuQjtTQUFiO1FBQVA7O0FBQ0EsV0FBTztFQUZFOztvQkFLWCxRQUFBLEdBQVU7SUFBQztNQUFFLElBQUEsRUFBTSxVQUFSO01BQW9CLElBQUEsRUFBTSxhQUExQjtNQUF5QyxPQUFBLEVBQVMsU0FBbEQ7S0FBRDs7O29CQUlWLFVBQUEsR0FBWTs7b0JBR1osU0FBQSxHQUFXOztvQkFFWCxVQUFBLEdBQVksU0FBQTtBQUNWLFFBQUE7SUFBQSxJQUFDLENBQUEsVUFBRCxHQUFjLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBVCxFQUFZLFlBQVosQ0FBQSxJQUE2QjtJQUMzQyxJQUFDLENBQUEsUUFBRCxHQUFjLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBVCxFQUFZLFVBQVo7SUFHZCxPQUFBLEdBQVUsSUFBQyxDQUFBLGFBQUQsQ0FBQTtJQUNWLElBQUEsQ0FBYyxPQUFkO0FBQUEsYUFBQTs7V0FDQSxDQUFDLENBQUMsR0FBRixDQUFNLElBQUMsQ0FBQSxRQUFQLEVBQWlCLFNBQUMsSUFBRDtNQUNiLElBQTZCLElBQUksQ0FBQyxPQUFMLEtBQWdCLE9BQTdDO0FBQUEsZUFBTyxJQUFJLENBQUMsTUFBTCxHQUFjLEtBQXJCOztBQUNBLGFBQU8sSUFBSSxDQUFDLE1BQUwsR0FBYztJQUZSLENBQWpCO0VBUFU7O29CQVlaLGVBQUEsR0FBaUIsU0FBQTtBQUNmLFdBQU87TUFBRSxPQUFBLEVBQVMsSUFBQyxDQUFBLFVBQVUsQ0FBQyxPQUFaLElBQXVCLElBQWxDOztFQURROztvQkFJakIsYUFBQSxHQUFlLFNBQUE7QUFDYixRQUFBO0lBQUEsSUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLFFBQWY7TUFDRSxLQUFBLEdBQVEsSUFBQyxDQUFBLFFBQUQsQ0FBQTtNQUNSLElBQWdCLEtBQWhCO0FBQUEsZUFBTyxNQUFQO09BRkY7O0FBSUE7O3FCQUFnRCxDQUFFLGlCQUEzQyxJQUFzRDtFQUxoRDs7b0JBUWYsYUFBQSxHQUFlLFNBQUMsWUFBRDtJQUNiLElBQUMsQ0FBQSxTQUFELEdBQWE7SUFDYixJQUFBLENBQWMsSUFBQyxDQUFBLFVBQVUsQ0FBQyxRQUExQjtBQUFBLGFBQUE7O0FBQ0EsV0FBTyxJQUFDLENBQUEsUUFBRCxDQUFVLFlBQVksQ0FBQyxLQUFLLENBQUMsR0FBbkIsQ0FBdUIsU0FBdkIsQ0FBVjtFQUhNOztvQkFLZixnQkFBQSxHQUFrQixTQUFBO0FBQ2hCLFFBQUE7K0NBQVUsQ0FBRSxPQUFaLENBQW9CLFVBQXBCO0VBRGdCOztvQkFHbEIsV0FBQSxHQUFhLFNBQUE7SUFFWCxJQUFDLENBQUEsYUFBRCxHQUFpQixJQUFJLFFBQVEsQ0FBQyxVQUFiLENBQXdCLElBQUMsQ0FBQSxRQUF6QjtJQUdqQixJQUFDLENBQUEsT0FBRCxHQUFXLElBQUksT0FBSixDQUFhLENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBQyxDQUFBLFVBQVYsRUFBc0I7TUFBRSxVQUFBLEVBQVksSUFBQyxDQUFBLGFBQWY7S0FBdEIsQ0FBYjtJQUNYLElBQUMsQ0FBQSxPQUFPLENBQUMsRUFBVCxDQUFZLFlBQVosRUFBMEIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFlBQUQ7ZUFBa0IsS0FBQyxDQUFBLGFBQUQsQ0FBZSxZQUFmO01BQWxCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUExQjtJQUNBLEVBQUUsQ0FBQyxnQkFBSCxDQUFxQixJQUFyQixFQUF3QixJQUFDLENBQUEsT0FBekIsRUFBa0MsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFULEVBQVksV0FBWixDQUFsQztXQUNBLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixJQUFDLENBQUEsT0FBakI7RUFSVzs7b0JBVWIsUUFBQSxHQUFVLFNBQUE7V0FDUixJQUFDLENBQUEsV0FBRCxDQUFBO0VBRFE7Ozs7R0FoRVUsRUFBRSxDQUFDOztBQXFFekIsTUFBTSxDQUFDLE9BQVAsR0FBaUIifQ==

},{"./templates/nav":131,"./templates/nav_child":132}]},{},[32])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYXBwLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYXBwbGljYXRpb24vdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL2NhbmNlbEJ1dHRvbi5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9jbGlja2FibGVSZWxhdGlvbnMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9iZWhhdmlvcnMvY29uZmlybWF0aW9ucy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9pbmRleC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9rZXlib2FyZENvbnRyb2xzLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL3NlbGVjdGFibGVDaGlsZC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2JlaGF2aW9ycy9zb3J0YWJsZUNoaWxkLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvYmVoYXZpb3JzL3NvcnRhYmxlTGlzdC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9jb21wb25lbnQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2JyZWFkY3J1bWIvdmlld3MvYnJlYWRjcnVtYkxpc3QuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2JyZWFkY3J1bWIvdmlld3MvdGVtcGxhdGVzL2JyZWFkY3J1bWJfY2hpbGQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9jb25maXJtL2NvbXBvbmVudC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvY29uZmlybS92aWV3cy9jb25maXJtVmlldy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvY29uZmlybS92aWV3cy90ZW1wbGF0ZXMvY29uZmlybV92aWV3LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvaGVhZGVyL2NvbXBvbmVudC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvaGVhZGVyL3ZpZXdzL2xheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvaGVhZGVyL3ZpZXdzL3RlbXBsYXRlcy9oZWFkZXIuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9sb2FkaW5nL2NvbXBvbmVudC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvbG9hZGluZy92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL2xvYWRpbmcvdmlld3MvdGVtcGxhdGVzL2xvYWRpbmcuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9tb2RhbC9hYnN0cmFjdC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbXBvbmVudHMvbW9kYWwvY29tcG9uZW50LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvY29tcG9uZW50cy9tb2RhbC9tb2RhbF90ZW1wbGF0ZS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb21wb25lbnRzL21vZGFsL3ZpZXcuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvY29ycy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbmZpZy9pbmRleC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbmZpZy9qd3QuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9jb25maWcvbWFyaW9uZXR0ZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL2NvbmZpZy93aW5kb3cuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tYW5pZmVzdC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvYWJzdHJhY3RfcnVsZS9lbnRpdGllcy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvYmFzZS9kZXhpZUZhY3RvcnkuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2Jhc2Uvdmlld3MvdXBsb2FkL3RlbXBsYXRlcy91cGxvYWQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9iYXNlL3ZpZXdzL3VwbG9hZC91cGxvYWQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFwb2ludC9lbnRpdGllcy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXBvaW50L2ZhY3RvcnkuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL2ZhY2V0Rm9ybS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvZmFjZXRfdmlld3MvZmFjZXRMaXN0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9mYWNldF92aWV3cy9mYWNldFZpZXdlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvZmFjZXRfdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9mYWNldF92aWV3cy90ZW1wbGF0ZXMvZmFjZXRfY2hpbGQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9mYWNldF92aWV3cy90ZW1wbGF0ZXMvZmFjZXRfZm9ybS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL3RlbXBsYXRlcy9mYWNldF9saXN0X2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL2ZhY2V0X3ZpZXdzL3RlbXBsYXRlcy9mYWNldF92aWV3ZXIuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy9yb3V0ZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvdmlld2VyX3J1bGVfdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2NvbmZpZy92aWV3ZXJfcnVsZV92aWV3cy90ZW1wbGF0ZXMvbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jb25maWcvdmlld2VyX3J1bGVfdmlld3MvdGVtcGxhdGVzL3J1bGVfZm9ybS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvY29uZmlnL3ZpZXdzL2xheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9jcmVhdG9yLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2Rlc3Ryb3kvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJveS92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZGVzdHJveS92aWV3cy90ZW1wbGF0ZXMvbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9kZXN0cnVjdG9yLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2VkaXQvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZWRpdC92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZWRpdC92aWV3cy90ZW1wbGF0ZXMvbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9lbnRpdGllcy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9leHBvcnQvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZXhwb3J0L3ZpZXdzL2xheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9leHBvcnQvdmlld3MvdGVtcGxhdGVzL2V4cG9ydC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvZmFjdG9yeS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9pbXBvcnRlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS9yb3V0ZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9hY3Rpb25Gb3JtLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL2FwcGx5UnVsZXMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvY29uc3RyYWludEZvcm0uY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkZvcm0uY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvbkxpc3QuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvZGVmaW5pdGlvblZpZXdlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy9leHBvcnRGb3JtLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL2ltcG9ydEZvcm0uY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3Jlc2V0UnVsZXMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUZvcm0uY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZUxpc3QuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvcnVsZVZpZXdlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvYWN0aW9uX2Zvcm0uamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9hY3Rpb25fdHlwZV9jbG9uZS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2FjdGlvbl90eXBlX2ZpbHRlci5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2FjdGlvbl90eXBlX2luZGV4X2Zyb21fcmVnZXhfbWF0Y2guamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9hY3Rpb25fdHlwZV9pbmRleF9mcm9tX3NwbGl0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvYWN0aW9uX3R5cGVfbGl0ZXJhbC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2FjdGlvbl90eXBlX3JlcGxhY2UuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9hcHBseV9ydWxlcy5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2NvbnN0cmFpbnRfZm9ybS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2RlZmluaXRpb25fY2hpbGQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9kZWZpbml0aW9uX2VtcHR5LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvZGVmaW5pdGlvbl9mb3JtLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvZGVmaW5pdGlvbl9saXN0X2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2RlZmluaXRpb25fdmlld2VyLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvZXhwb3J0X2Zvcm0uamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9pbXBvcnRfZm9ybS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL29udG9sb2d5X2F0dHJpYnV0ZV9zZWxlY3Rvci5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL3Jlc2V0X3J1bGVzLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvcnVsZV9jaGlsZC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQva25vd2xlZGdlX2NhcHR1cmUvdmlld3MvdGVtcGxhdGVzL3J1bGVfZW1wdHkuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9ydWxlX2Zvcm0uamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3RlbXBsYXRlcy9ydWxlX2xpc3RfbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9rbm93bGVkZ2VfY2FwdHVyZS92aWV3cy90ZW1wbGF0ZXMvcnVsZV92aWV3ZXIuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2xpc3Qvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy90ZW1wbGF0ZXMvZGF0YXNldF9jaGlsZC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy90ZW1wbGF0ZXMvZGF0YXNldF9lbXB0eS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbGlzdC92aWV3cy90ZW1wbGF0ZXMvZGF0YXNldF9saXN0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9saXN0L3ZpZXdzL3RlbXBsYXRlcy9kYXRhc2V0X3Nob3cuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L2xpc3Qvdmlld3MvdGVtcGxhdGVzL2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3JvdXRlLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L25ldy92aWV3cy9hcmNoaXZlRm9ybS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9uZXcvdmlld3MvanNvbkZvcm0uY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL2xheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9uZXcvdmlld3MvcmRmRm9ybS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9uZXcvdmlld3MvdGVtcGxhdGVzL2FyY2hpdmVfZm9ybS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvbmV3L3ZpZXdzL3RlbXBsYXRlcy9qc29uX2Zvcm0uamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L25ldy92aWV3cy90ZW1wbGF0ZXMvbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9uZXcvdmlld3MvdGVtcGxhdGVzL3JkZl9mb3JtLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGF0YXNldC9yb3V0ZXIuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2VhcmNoL3JvdXRlLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9kYXRhc2V0L3Nob3cvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2hvdy92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2RhdGFzZXQvc2hvdy92aWV3cy90ZW1wbGF0ZXMvbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZGIvc2VydmljZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvZmFjZXQvZW50aXRpZXMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2ZhY2V0L2ZhY3RvcnkuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL2tub3dsZWRnZV9ydWxlL2VudGl0aWVzLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9rbm93bGVkZ2VfcnVsZS9mYWN0b3J5LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9saWIvdmlld3MvanNvbl92aWV3ZXIvdGVtcGxhdGVzL2pzb25fdmlld2VyLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbGliL3ZpZXdzL25hdi90ZW1wbGF0ZXMvbmF2LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbGliL3ZpZXdzL25hdi90ZW1wbGF0ZXMvbmF2X2NoaWxkLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi9mYWN0b3J5LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9tYWluL3JvdXRlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi9zZXR0aW5ncy9yb3V0ZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi9zZXR0aW5ncy92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vc2V0dGluZ3Mvdmlld3MvdGVtcGxhdGVzL2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL21haW4vd2VsY29tZS9yb3V0ZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi93ZWxjb21lL3ZpZXdzL2xheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvbWFpbi93ZWxjb21lL3ZpZXdzL3RlbXBsYXRlcy9sYXlvdXQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9lbnRpdGllcy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvZmFjdG9yeS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvaW1wb3J0ZXIuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2xpc3Qvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L2xpc3Qvdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9saXN0L3ZpZXdzL3RlbXBsYXRlcy9hdHRyaWJ1dGVfY2hpbGQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9saXN0L3ZpZXdzL3RlbXBsYXRlcy9hdHRyaWJ1dGVfbGF5b3V0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvbGlzdC92aWV3cy90ZW1wbGF0ZXMvb250b2xvZ3lfZW1wdHkuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9saXN0L3ZpZXdzL3RlbXBsYXRlcy9vbnRvbG9neV9saXN0LmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvbmV3L3JvdXRlLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9uZXcvdmlld3MvbGF5b3V0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9vbnRvbG9neS9uZXcvdmlld3MvdGVtcGxhdGVzL2xheW91dC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL29udG9sb2d5L25ldy92aWV3cy90ZW1wbGF0ZXMvdXBsb2FkLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvb250b2xvZ3kvcm91dGVyLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZW50aXRpZXMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9jc3ZWaWV3ZXIuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9lbmdpbmUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9ncmFwaC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL2hlYWRlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL2l0ZW1EZXRhaWwuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9sYXlvdXQuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9yZWNvcmRMaXN0LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvcmVjb3JkTGlzdExheW91dC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3JlY29yZFZpZXdlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3N0bFZpZXdlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RhYmxlLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvdGVtcGxhdGVzL2Nzdi5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy90ZW1wbGF0ZXMvZGV0YWlsLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RlbXBsYXRlcy9ncmFwaC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy90ZW1wbGF0ZXMvaGVhZGVyLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RlbXBsYXRlcy9sYXlvdXQuamFkZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvdGVtcGxhdGVzL3JlY29yZF9saXN0X2NoaWxkLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RlbXBsYXRlcy9yZWNvcmRfdmlld2VyLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RlbXBsYXRlcy9zdGxfdmlld2VyLmphZGUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL3RlbXBsYXRlcy90YWJsZS5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vYXBwL2NvZmZlZS9tb2R1bGVzL3NlYXJjaC9mYWN0b3J5LmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL2FwcC9jb2ZmZWUvbW9kdWxlcy92aWV3ZXJfcnVsZS9lbnRpdGllcy5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9hcHAvY29mZmVlL21vZHVsZXMvdmlld2VyX3J1bGUvZmFjdG9yeS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvYmFja2JvbmUuYmFieXNpdHRlci9saWIvYmFja2JvbmUuYmFieXNpdHRlci5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9iYWNrYm9uZS5tYXJpb25ldHRlL2xpYi9jb3JlL2JhY2tib25lLm1hcmlvbmV0dGUuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvYmFja2JvbmUud3JlcXIvbGliL2JhY2tib25lLndyZXFyLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2JhY2tib25lL2JhY2tib25lLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2QzLXRpcC9pbmRleC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9lbXB0eS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2JpbmRCYXNlLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2JpbmRJbnB1dHMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvY29weVRvQ2xpcGJvYXJkLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2Rvd25sb2FkRmlsZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fYmVoYXZpb3JzL2xpYi9mbGFzaGVzLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL2Zvcm1TZXJpYWxpemUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvbW9kZWxFdmVudHMuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX2JlaGF2aW9ycy9saWIvc3VibWl0QnV0dG9uLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9iZWhhdmlvcnMvbGliL3Rvb2x0aXBzLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9lbnRpdGllcy9saWIvY29uZmlnLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9lbnRpdGllcy9saWIvZGVjb3JhdG9yLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9mbGFzaC9saWIvY29sbGVjdGlvbi5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fZmxhc2gvbGliL2NvbXBvbmVudC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fZmxhc2gvbGliL21vZGVsLmNvZmZlZSIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9obl9mbGFzaC9saWIvc2VydmljZS5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fZmxhc2gvbGliL3ZpZXdzL2ZsYXNoTGlzdC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fZmxhc2gvbGliL3ZpZXdzL3RlbXBsYXRlcy9mbGFzaF9jaGlsZC5qYWRlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX292ZXJsYXkvbGliL2NvbXBvbmVudC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fcmVnaW9ucy9saWIvcmVnaW9ucy9tb2RhbC5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvaG5fcm91dGluZy9saWIvcm91dGUuY29mZmVlIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2huX3JvdXRpbmcvbGliL3JvdXRlci5jb2ZmZWUiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvamFkZS9ydW50aW1lLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9qc29ubGQtdmlzL2Rpc3QvanNvbmxkLXZpcy5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9qc29ubGQtdmlzL25vZGVfbW9kdWxlcy9kMy9kMy5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy9zcHJpbnRmLWpzL3NyYy9zcHJpbnRmLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2NhbWVsaXplLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2NhcGl0YWxpemUuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvY2hhcnMuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvY2hvcC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9jbGFzc2lmeS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9jbGVhbi5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9jbGVhbkRpYWNyaXRpY3MuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvY291bnQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvZGFzaGVyaXplLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2RlY2FwaXRhbGl6ZS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9kZWRlbnQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvZW5kc1dpdGguanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvZXNjYXBlSFRNTC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9leHBvcnRzLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2hlbHBlci9hZGphY2VudC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9oZWxwZXIvZGVmYXVsdFRvV2hpdGVTcGFjZS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9oZWxwZXIvZXNjYXBlQ2hhcnMuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvaGVscGVyL2VzY2FwZVJlZ0V4cC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9oZWxwZXIvaHRtbEVudGl0aWVzLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2hlbHBlci9tYWtlU3RyaW5nLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2hlbHBlci9zdHJSZXBlYXQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvaGVscGVyL3RvUG9zaXRpdmUuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvaHVtYW5pemUuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvaW5jbHVkZS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9pbmRleC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9pbnNlcnQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvaXNCbGFuay5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9qb2luLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2xldmVuc2h0ZWluLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2xpbmVzLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2xwYWQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvbHJwYWQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvbHRyaW0uanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvbWFwLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL25hdHVyYWxDbXAuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvbnVtYmVyRm9ybWF0LmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3BhZC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9wcmVkLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3BydW5lLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3F1b3RlLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3JlcGVhdC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9yZXBsYWNlQWxsLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3JldmVyc2UuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvcnBhZC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9ydHJpbS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9zbHVnaWZ5LmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3NwbGljZS5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9zcHJpbnRmLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3N0YXJ0c1dpdGguanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvc3RyTGVmdC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9zdHJMZWZ0QmFjay5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9zdHJSaWdodC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9zdHJSaWdodEJhY2suanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvc3RyaXBUYWdzLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3N1Y2MuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvc3Vycm91bmQuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvc3dhcENhc2UuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvdGl0bGVpemUuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvdG9Cb29sZWFuLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3RvTnVtYmVyLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3RvU2VudGVuY2UuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvdG9TZW50ZW5jZVNlcmlhbC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy90cmltLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3RydW5jYXRlLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3VuZGVyc2NvcmVkLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3VuZXNjYXBlSFRNTC5qcyIsIi9Vc2Vycy9hZWtzY28vZ2l0aHViL21hZ2VsbGFuL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy91bnF1b3RlLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3ZzcHJpbnRmLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3dvcmRzLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL3dyYXAuanMiLCIvVXNlcnMvYWVrc2NvL2dpdGh1Yi9tYWdlbGxhbi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzIiwiL1VzZXJzL2Fla3Njby9naXRodWIvbWFnZWxsYW4vbm9kZV9tb2R1bGVzL3V0aWwtZGVwcmVjYXRlL2Jyb3dzZXIuanMiLCJhcHAvY29mZmVlL21vZHVsZXMvbGliL3ZpZXdzL2pzb25fdmlld2VyL2luZGV4LmNvZmZlZSIsImFwcC9jb2ZmZWUvbW9kdWxlcy9saWIvdmlld3MvbmF2L2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9RQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbFJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4N0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25iQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4MkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFRBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzEvUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDajFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIEFwcGxpY2F0aW9uLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQXBwbGljYXRpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQXBwbGljYXRpb24sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEFwcGxpY2F0aW9uKCkge1xuICAgIHJldHVybiBBcHBsaWNhdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFwcGxpY2F0aW9uLnByb3RvdHlwZS5yYWRpb0V2ZW50cyA9IHtcbiAgICAnZGIgcmVhZHknOiAnb25SZWFkeScsXG4gICAgJ2FwcCByZWRpcmVjdCc6ICdyZWRpcmVjdFRvJ1xuICB9O1xuXG4gIEFwcGxpY2F0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnaGVhZGVyJykudHJpZ2dlcigncmVzZXQnKTtcbiAgICBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcigncmVhZHknKTtcbiAgICBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdicmVhZGNydW1iJykudHJpZ2dlcigncmVhZHknKTtcbiAgICBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdvdmVybGF5JykudHJpZ2dlcigncmVhZHknKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBBcHBsaWNhdGlvbi5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdvbnRvbG9neScpLnJlcXVlc3QoJ2Vuc3VyZTpidW5kbGVkJykudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ2hpZGUnKTtcbiAgICAgICAgcmV0dXJuIEJhY2tib25lLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpW1wiY2F0Y2hcIl0oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBGRVRDSElORyBPTlRPTE9HSUVTJyk7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgQXBwbGljYXRpb24ucHJvdG90eXBlLnJlZGlyZWN0VG8gPSBmdW5jdGlvbihyb3V0ZSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHJvdXRlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBBcHBsaWNhdGlvbjtcblxufSkoTWFyaW9uZXR0ZS5TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcHBsaWNhdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5aGNIQXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5aGNIQXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVZEJMRWxCUVVFc1YwRkJRVHRGUVVGQk96czdRVUZCVFRzN096czdPenQzUWtGRlNpeFhRVUZCTEVkQlEwVTdTVUZCUVN4VlFVRkJMRVZCUVdkQ0xGTkJRV2hDTzBsQlEwRXNZMEZCUVN4RlFVRm5RaXhaUVVSb1FqczdPM2RDUVVsR0xGVkJRVUVzUjBGQldTeFRRVUZCTzBsQlIxWXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZGQlFYWkNMRU5CUVdkRExFTkJRVU1zVDBGQmFrTXNRMEZCZVVNc1QwRkJla003U1VGSFFTeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzVTBGQmRrSXNRMEZCYVVNc1EwRkJReXhQUVVGc1F5eERRVUV3UXl4UFFVRXhRenRKUVVkQkxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhaUVVGMlFpeERRVUZ2UXl4RFFVRkRMRTlCUVhKRExFTkJRVFpETEU5QlFUZERPMGxCUTBFc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRk5CUVhaQ0xFTkJRV2xETEVOQlFVTXNUMEZCYkVNc1EwRkJNRU1zVDBGQk1VTTdRVUZEUVN4WFFVRlBPMFZCV0VjN08zZENRV2RDV2l4UFFVRkJMRWRCUVZNc1UwRkJRVHRYUVVWUUxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhWUVVGMlFpeERRVUZyUXl4RFFVRkRMRTlCUVc1RExFTkJRVEpETEdkQ1FVRXpReXhEUVVOQkxFTkJRVU1zU1VGRVJDeERRVU5OTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHRSUVVkS0xGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhUUVVGMlFpeERRVUZwUXl4RFFVRkRMRTlCUVd4RExFTkJRVEJETEUxQlFURkRPMlZCUjBFc1VVRkJVU3hEUVVGRExFOUJRVThzUTBGQlF5eExRVUZxUWl4RFFVRkJPMDFCVGtrN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlJFNHNRMEZUUVN4RlFVRkRMRXRCUVVRc1JVRlVRU3hEUVZOUExFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4SFFVRkVPMUZCUjB3c1QwRkJUeXhEUVVGRExFZEJRVklzUTBGQldTd3lRa0ZCV2p0bFFVTkJMRTlCUVU4c1EwRkJReXhIUVVGU0xFTkJRVmtzUjBGQldqdE5RVXBMTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVZSUU8wVkJSazg3TzNkQ1FXOUNWQ3hWUVVGQkxFZEJRVmtzVTBGQlF5eExRVUZFTzBsQlExWXNUVUZCVFN4RFFVRkRMRkZCUVZBc1IwRkJhMEk3UVVGRGJFSXNWMEZCVHp0RlFVWkhPenM3TzBkQk0wTlpMRlZCUVZVc1EwRkJRenM3UVVGcFJISkRMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIEFwcGxpY2F0aW9uTGF5b3V0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQXBwbGljYXRpb25MYXlvdXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQXBwbGljYXRpb25MYXlvdXQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEFwcGxpY2F0aW9uTGF5b3V0KCkge1xuICAgIHJldHVybiBBcHBsaWNhdGlvbkxheW91dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFwcGxpY2F0aW9uTGF5b3V0LnByb3RvdHlwZS5lbCA9ICdib2R5JztcblxuICBBcHBsaWNhdGlvbkxheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSBmYWxzZTtcblxuICBBcHBsaWNhdGlvbkxheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBoZWFkZXI6ICdbYXBwLXJlZ2lvbj1oZWFkZXJdJyxcbiAgICBicmVhZGNydW1iOiAnW2FwcC1yZWdpb249YnJlYWRjcnVtYl0nLFxuICAgIG92ZXJsYXk6ICdbYXBwLXJlZ2lvbj1vdmVybGF5XScsXG4gICAgbG9hZGluZzogJ1thcHAtcmVnaW9uPWxvYWRpbmddJyxcbiAgICBmbGFzaDogJ1thcHAtcmVnaW9uPWZsYXNoXScsXG4gICAgbW9kYWw6IHtcbiAgICAgIHNlbGVjdG9yOiAnW2FwcC1yZWdpb249bW9kYWxdJyxcbiAgICAgIHJlZ2lvbkNsYXNzOiByZXF1aXJlKCdobl9yZWdpb25zL2xpYi9yZWdpb25zL21vZGFsJylcbiAgICB9LFxuICAgIG1haW46ICdbYXBwLXJlZ2lvbj1tYWluXSdcbiAgfTtcblxuICByZXR1cm4gQXBwbGljYXRpb25MYXlvdXQ7XG5cbn0pKE1hcmlvbmV0dGUuTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEFwcGxpY2F0aW9uTGF5b3V0KCkucmVuZGVyKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWhjSEJzYVdOaGRHbHZiaTkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzloY0hCc2FXTmhkR2x2Ymk5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVbEJMRWxCUVVFc2FVSkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3T0VKQlEwb3NSVUZCUVN4SFFVRkpPenM0UWtGRlNpeFJRVUZCTEVkQlFWVTdPemhDUVVWV0xFOUJRVUVzUjBGRFJUdEpRVUZCTEUxQlFVRXNSVUZCV1N4eFFrRkJXanRKUVVOQkxGVkJRVUVzUlVGQldTeDVRa0ZFV2p0SlFVVkJMRTlCUVVFc1JVRkJXU3h6UWtGR1dqdEpRVWRCTEU5QlFVRXNSVUZCV1N4elFrRklXanRKUVVsQkxFdEJRVUVzUlVGQldTeHZRa0ZLV2p0SlFVMUJMRXRCUVVFc1JVRkRSVHROUVVGQkxGRkJRVUVzUlVGQll5eHZRa0ZCWkR0TlFVTkJMRmRCUVVFc1JVRkJZeXhQUVVGQkxFTkJRVkVzT0VKQlFWSXNRMEZFWkR0TFFWQkdPMGxCVlVFc1NVRkJRU3hGUVVGVkxHMUNRVlpXT3pzN096dEhRVTQwUWl4VlFVRlZMRU5CUVVNN08wRkJjVUl6UXl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpeEpRVUZKTEdsQ1FVRktMRU5CUVVFc1EwRkJkVUlzUTBGQlF5eE5RVUY0UWl4RFFVRkJJbjA9XG4iLCJ2YXIgQ2FuY2VsQnV0dG9uQmVoYXZpb3IsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5DYW5jZWxCdXR0b25CZWhhdmlvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDYW5jZWxCdXR0b25CZWhhdmlvciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQ2FuY2VsQnV0dG9uQmVoYXZpb3IoKSB7XG4gICAgcmV0dXJuIENhbmNlbEJ1dHRvbkJlaGF2aW9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQ2FuY2VsQnV0dG9uQmVoYXZpb3IucHJvdG90eXBlLnVpID0ge1xuICAgIGNhbmNlbDogJ1tkYXRhLWNsaWNrPWNhbmNlbF0nXG4gIH07XG5cbiAgQ2FuY2VsQnV0dG9uQmVoYXZpb3IucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2xpY2sgQHVpLmNhbmNlbDpub3QoLmRpc2FibGVkKSc6ICdvbkNhbmNlbENsaWNrJ1xuICB9O1xuXG4gIENhbmNlbEJ1dHRvbkJlaGF2aW9yLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgdGhpcy52aWV3LmRpc2FibGVDYW5jZWwgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmRpc2FibGVDYW5jZWwoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMudmlldy5lbmFibGVDYW5jZWwgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmVuYWJsZUNhbmNlbCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgfTtcblxuICBDYW5jZWxCdXR0b25CZWhhdmlvci5wcm90b3R5cGUub25DYW5jZWxDbGljayA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgYmFzZTtcbiAgICByZXR1cm4gdHlwZW9mIChiYXNlID0gdGhpcy52aWV3KS5vbkNhbmNlbCA9PT0gXCJmdW5jdGlvblwiID8gYmFzZS5vbkNhbmNlbChlKSA6IHZvaWQgMDtcbiAgfTtcblxuICBDYW5jZWxCdXR0b25CZWhhdmlvci5wcm90b3R5cGUuZGlzYWJsZUNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnVpLmNhbmNlbC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgfTtcblxuICBDYW5jZWxCdXR0b25CZWhhdmlvci5wcm90b3R5cGUuZW5hYmxlQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudWkuY2FuY2VsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICB9O1xuXG4gIHJldHVybiBDYW5jZWxCdXR0b25CZWhhdmlvcjtcblxufSkoTW4uQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbEJ1dHRvbkJlaGF2aW9yO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlpWldoaGRtbHZjbk12WTJGdVkyVnNRblYwZEc5dUxtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2WW1Wb1lYWnBiM0p6TDJOaGJtTmxiRUoxZEhSdmJpNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlJVRXNTVUZCUVN4dlFrRkJRVHRGUVVGQk96czdRVUZCVFRzN096czdPenRwUTBGRlNpeEZRVUZCTEVkQlEwVTdTVUZCUVN4TlFVRkJMRVZCUVZFc2NVSkJRVkk3T3p0cFEwRkZSaXhOUVVGQkxFZEJRMFU3U1VGQlFTeHBRMEZCUVN4RlFVRnRReXhsUVVGdVF6czdPMmxEUVVWR0xGVkJRVUVzUjBGQldTeFRRVUZETEU5QlFVUTdPMDFCUVVNc1ZVRkJVVHM3U1VGRGJrSXNTVUZCUXl4RFFVRkJMRWxCUVVrc1EwRkJReXhoUVVGT0xFZEJRWE5DTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHRsUVVGSExFdEJRVU1zUTBGQlFTeGhRVUZFTEVOQlFVRTdUVUZCU0R0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUU3VjBGRGRFSXNTVUZCUXl4RFFVRkJMRWxCUVVrc1EwRkJReXhaUVVGT0xFZEJRWE5DTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHRsUVVGSExFdEJRVU1zUTBGQlFTeFpRVUZFTEVOQlFVRTdUVUZCU0R0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUU3UlVGR1dqczdhVU5CU1Zvc1lVRkJRU3hIUVVGbExGTkJRVU1zUTBGQlJEdEJRVUZQTEZGQlFVRTdiVVZCUVVzc1EwRkJReXhUUVVGVk8wVkJRWFpDT3p0cFEwRkRaaXhoUVVGQkxFZEJRV1VzVTBGQlFUdFhRVUZITEVsQlFVTXNRMEZCUVN4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVmdzUTBGQmIwSXNWVUZCY0VJN1JVRkJTRHM3YVVOQlEyWXNXVUZCUVN4SFFVRmpMRk5CUVVFN1YwRkJTU3hKUVVGRExFTkJRVUVzUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4WFFVRllMRU5CUVhWQ0xGVkJRWFpDTzBWQlFVbzdPenM3UjBGa2JVSXNSVUZCUlN4RFFVRkRPenRCUVd0Q2RFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIENsaWNrYWJsZVJlbGF0aW9ucyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNsaWNrYWJsZVJlbGF0aW9ucyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDbGlja2FibGVSZWxhdGlvbnMsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENsaWNrYWJsZVJlbGF0aW9ucygpIHtcbiAgICByZXR1cm4gQ2xpY2thYmxlUmVsYXRpb25zLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQ2xpY2thYmxlUmVsYXRpb25zLnByb3RvdHlwZS51aSA9IHtcbiAgICBzaG93UmVsYXRpb246ICdbZGF0YS1yZWxhdGlvbl0nXG4gIH07XG5cbiAgQ2xpY2thYmxlUmVsYXRpb25zLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrIEB1aS5zaG93UmVsYXRpb24nOiAnc2hvd1JlbGF0aW9uJ1xuICB9O1xuXG4gIENsaWNrYWJsZVJlbGF0aW9ucy5wcm90b3R5cGUuc2hvd1JlbGF0aW9uID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciByZWxhdGVkSWQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJlbGF0ZWRJZCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCdyZWxhdGlvbicpO1xuICAgIHJldHVybiB0aGlzLnZpZXcudHJpZ2dlcignc2hvdzpyZWxhdGlvbicsIHJlbGF0ZWRJZCk7XG4gIH07XG5cbiAgcmV0dXJuIENsaWNrYWJsZVJlbGF0aW9ucztcblxufSkoTWFyaW9uZXR0ZS5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2xpY2thYmxlUmVsYXRpb25zO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlpWldoaGRtbHZjbk12WTJ4cFkydGhZbXhsVW1Wc1lYUnBiMjV6TG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyRndjQzlqYjJabVpXVXZZbVZvWVhacGIzSnpMMk5zYVdOcllXSnNaVkpsYkdGMGFXOXVjeTVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRMEVzU1VGQlFTeHJRa0ZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3pzclFrRkZTaXhGUVVGQkxFZEJRMFU3U1VGQlFTeFpRVUZCTEVWQlFXTXNhVUpCUVdRN096c3JRa0ZGUml4TlFVRkJMRWRCUTBVN1NVRkJRU3gzUWtGQlFTeEZRVUV3UWl4alFVRXhRanM3T3l0Q1FVVkdMRmxCUVVFc1IwRkJZeXhUUVVGRExFTkJRVVE3UVVGRFdpeFJRVUZCTzBsQlFVRXNRMEZCUXl4RFFVRkRMR05CUVVZc1EwRkJRVHRKUVVOQkxGTkJRVUVzUjBGQldTeERRVUZCTEVOQlFVVXNRMEZCUXl4RFFVRkRMR0ZCUVVvc1EwRkJhMElzUTBGQlF5eEpRVUZ1UWl4RFFVRjNRaXhWUVVGNFFqdFhRVU5hTEVsQlFVTXNRMEZCUVN4SlFVRkpMRU5CUVVNc1QwRkJUaXhEUVVGakxHVkJRV1FzUlVGQkswSXNVMEZCTDBJN1JVRklXVHM3T3p0SFFWSnBRaXhWUVVGVkxFTkJRVU03TzBGQlpUVkRMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIENvbmZpcm1hdGlvbnNCZWhhdmlvcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNvbmZpcm1hdGlvbnNCZWhhdmlvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDb25maXJtYXRpb25zQmVoYXZpb3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENvbmZpcm1hdGlvbnNCZWhhdmlvcigpIHtcbiAgICByZXR1cm4gQ29uZmlybWF0aW9uc0JlaGF2aW9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQ29uZmlybWF0aW9uc0JlaGF2aW9yLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrIEB1aS5jb25maXJtYXRpb25UcmlnZ2VyJzogJ3Nob3dDb25maXJtYXRpb24nXG4gIH07XG5cbiAgQ29uZmlybWF0aW9uc0JlaGF2aW9yLnByb3RvdHlwZS5zaG93Q29uZmlybWF0aW9uID0gZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2NvbmZpcm0nKS5yZXF1ZXN0KCdzaG93JywgdGhpcy5vcHRpb25zKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbmZpcm1WaWV3KSB7XG4gICAgICAgIGNvbmZpcm1WaWV3Lm9uKCdjb25maXJtZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMudmlldy50cmlnZ2VyTWV0aG9kKCdjb25maXJtZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb25maXJtVmlldy5vbignZGVuaWVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnZpZXcudHJpZ2dlck1ldGhvZCgnZGVuaWVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbmZpcm1hdGlvbnNCZWhhdmlvcjtcblxufSkoTWFyaW9uZXR0ZS5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uZmlybWF0aW9uc0JlaGF2aW9yO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlpWldoaGRtbHZjbk12WTI5dVptbHliV0YwYVc5dWN5NWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDJKbGFHRjJhVzl5Y3k5amIyNW1hWEp0WVhScGIyNXpMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkpRU3hKUVVGQkxIRkNRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3TzJ0RFFVbEtMRTFCUVVFc1IwRkRSVHRKUVVGQkxDdENRVUZCTEVWQlFXbERMR3RDUVVGcVF6czdPMnREUVVsR0xHZENRVUZCTEVkQlFXdENMRk5CUVVNc1EwRkJSRHRKUVVOb1FpeERRVUZETEVOQlFVTXNaVUZCUml4RFFVRkJPMWRCUTBFc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRk5CUVhaQ0xFTkJRV2xETEVOQlFVTXNUMEZCYkVNc1EwRkJNRU1zVFVGQk1VTXNSVUZCYTBRc1NVRkJReXhEUVVGQkxFOUJRVzVFTEVOQlFUSkVMRU5CUVVNc1NVRkJOVVFzUTBGQmFVVXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExGZEJRVVE3VVVGREwwUXNWMEZCVnl4RFFVRkRMRVZCUVZvc1EwRkJaU3hYUVVGbUxFVkJRVFJDTEZOQlFVRTdhVUpCUVVjc1MwRkJReXhEUVVGQkxFbEJRVWtzUTBGQlF5eGhRVUZPTEVOQlFXOUNMRmRCUVhCQ08xRkJRVWdzUTBGQk5VSTdaVUZEUVN4WFFVRlhMRU5CUVVNc1JVRkJXaXhEUVVGbExGRkJRV1lzUlVGQk5FSXNVMEZCUVR0cFFrRkJSeXhMUVVGRExFTkJRVUVzU1VGQlNTeERRVUZETEdGQlFVNHNRMEZCYjBJc1VVRkJjRUk3VVVGQlNDeERRVUUxUWp0TlFVWXJSRHRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCYWtVN1JVRkdaMEk3T3pzN1IwRlVaMElzVlVGQlZTeERRVUZET3p0QlFXbENMME1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBCaW5kSW5wdXRzOiByZXF1aXJlKCdobl9iZWhhdmlvcnMvbGliL2JpbmRJbnB1dHMnKSxcbiAgQ2FuY2VsQnV0dG9uOiByZXF1aXJlKCcuL2NhbmNlbEJ1dHRvbicpLFxuICBDbGlja2FibGVSZWxhdGlvbnM6IHJlcXVpcmUoJy4vY2xpY2thYmxlUmVsYXRpb25zJyksXG4gIENvbmZpcm1hdGlvbnM6IHJlcXVpcmUoJy4vY29uZmlybWF0aW9ucycpLFxuICBDb3B5VG9DbGlwYm9hcmQ6IHJlcXVpcmUoJ2huX2JlaGF2aW9ycy9saWIvY29weVRvQ2xpcGJvYXJkJyksXG4gIERvd25sb2FkRmlsZTogcmVxdWlyZSgnaG5fYmVoYXZpb3JzL2xpYi9kb3dubG9hZEZpbGUnKSxcbiAgRmxhc2hlczogcmVxdWlyZSgnaG5fYmVoYXZpb3JzL2xpYi9mbGFzaGVzJyksXG4gIEZvcm1TZXJpYWxpemU6IHJlcXVpcmUoJ2huX2JlaGF2aW9ycy9saWIvZm9ybVNlcmlhbGl6ZScpLFxuICBLZXlib2FyZENvbnRyb2xzOiByZXF1aXJlKCcuL2tleWJvYXJkQ29udHJvbHMnKSxcbiAgTW9kZWxFdmVudHM6IHJlcXVpcmUoJ2huX2JlaGF2aW9ycy9saWIvbW9kZWxFdmVudHMnKSxcbiAgU2VsZWN0YWJsZUNoaWxkOiByZXF1aXJlKCcuL3NlbGVjdGFibGVDaGlsZCcpLFxuICBTb3J0YWJsZUNoaWxkOiByZXF1aXJlKCcuL3NvcnRhYmxlQ2hpbGQnKSxcbiAgU29ydGFibGVMaXN0OiByZXF1aXJlKCcuL3NvcnRhYmxlTGlzdCcpLFxuICBTdWJtaXRCdXR0b246IHJlcXVpcmUoJ2huX2JlaGF2aW9ycy9saWIvc3VibWl0QnV0dG9uJyksXG4gIFRvb2x0aXBzOiByZXF1aXJlKCdobl9iZWhhdmlvcnMvbGliL3Rvb2x0aXBzJylcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWlaV2hoZG1sdmNuTXZhVzVrWlhndVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlpWldoaGRtbHZjbk12YVc1a1pYZ3VZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVVkJMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRMFU3UlVGQlFTeFZRVUZCTEVWQlFXOUNMRTlCUVVFc1EwRkJVU3cyUWtGQlVpeERRVUZ3UWp0RlFVTkJMRmxCUVVFc1JVRkJiMElzVDBGQlFTeERRVUZSTEdkQ1FVRlNMRU5CUkhCQ08wVkJSVUVzYTBKQlFVRXNSVUZCYjBJc1QwRkJRU3hEUVVGUkxITkNRVUZTTEVOQlJuQkNPMFZCUjBFc1lVRkJRU3hGUVVGdlFpeFBRVUZCTEVOQlFWRXNhVUpCUVZJc1EwRkljRUk3UlVGSlFTeGxRVUZCTEVWQlFXOUNMRTlCUVVFc1EwRkJVU3hyUTBGQlVpeERRVXB3UWp0RlFVdEJMRmxCUVVFc1JVRkJiMElzVDBGQlFTeERRVUZSTEN0Q1FVRlNMRU5CVEhCQ08wVkJUVUVzVDBGQlFTeEZRVUZ2UWl4UFFVRkJMRU5CUVZFc01FSkJRVklzUTBGT2NFSTdSVUZQUVN4aFFVRkJMRVZCUVc5Q0xFOUJRVUVzUTBGQlVTeG5RMEZCVWl4RFFWQndRanRGUVZGQkxHZENRVUZCTEVWQlFXOUNMRTlCUVVFc1EwRkJVU3h2UWtGQlVpeERRVkp3UWp0RlFWTkJMRmRCUVVFc1JVRkJiMElzVDBGQlFTeERRVUZSTERoQ1FVRlNMRU5CVkhCQ08wVkJWVUVzWlVGQlFTeEZRVUZ2UWl4UFFVRkJMRU5CUVZFc2JVSkJRVklzUTBGV2NFSTdSVUZYUVN4aFFVRkJMRVZCUVc5Q0xFOUJRVUVzUTBGQlVTeHBRa0ZCVWl4RFFWaHdRanRGUVZsQkxGbEJRVUVzUlVGQmIwSXNUMEZCUVN4RFFVRlJMR2RDUVVGU0xFTkJXbkJDTzBWQllVRXNXVUZCUVN4RlFVRnZRaXhQUVVGQkxFTkJRVkVzSzBKQlFWSXNRMEZpY0VJN1JVRmpRU3hSUVVGQkxFVkJRVzlDTEU5QlFVRXNRMEZCVVN3eVFrRkJVaXhEUVdSd1FpSjlcbiIsInZhciBLZXlib2FyZENvbnRyb2xzLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbktleWJvYXJkQ29udHJvbHMgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoS2V5Ym9hcmRDb250cm9scywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gS2V5Ym9hcmRDb250cm9scygpIHtcbiAgICB0aGlzLmtleUFjdGlvbiA9IGJpbmQodGhpcy5rZXlBY3Rpb24sIHRoaXMpO1xuICAgIHJldHVybiBLZXlib2FyZENvbnRyb2xzLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgS2V5Ym9hcmRDb250cm9scy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmtleUV2ZW50cyA9IHRoaXMub3B0aW9ucy5rZXlFdmVudHM7XG4gIH07XG5cbiAgS2V5Ym9hcmRDb250cm9scy5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICByZXR1cm4gdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gIH07XG5cbiAgS2V5Ym9hcmRDb250cm9scy5wcm90b3R5cGUub25CZWZvcmVSZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gIH07XG5cbiAgS2V5Ym9hcmRDb250cm9scy5wcm90b3R5cGUua2V5QWN0aW9uID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBrZXlDb2RlO1xuICAgIGNvbnNvbGUubG9nKCdrZXlBY3Rpb24nKTtcbiAgICBrZXlDb2RlID0gZS5rZXlDb2RlO1xuICAgIGlmICghdGhpcy5rZXlFdmVudHNba2V5Q29kZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMudmlldy50cmlnZ2VyTWV0aG9kKHRoaXMua2V5RXZlbnRzW2tleUNvZGVdLCBlKTtcbiAgfTtcblxuICBLZXlib2FyZENvbnRyb2xzLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCB0aGlzLmtleUFjdGlvbik7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2ZsYXNoJykudHJpZ2dlcignYWRkJywge1xuICAgICAgY29udGV4dDogJ2luZm8nLFxuICAgICAgdGltZW91dDogMTUwMCxcbiAgICAgIG1lc3NhZ2U6ICdLZXlib2FyZCBjb250cm9scyBlbmFibGVkJ1xuICAgIH0pO1xuICB9O1xuXG4gIEtleWJvYXJkQ29udHJvbHMucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKGRvY3VtZW50KS5vZmYoJ2tleWRvd24nLCB0aGlzLmtleUFjdGlvbik7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2ZsYXNoJykudHJpZ2dlcignYWRkJywge1xuICAgICAgY29udGV4dDogJ2luZm8nLFxuICAgICAgdGltZW91dDogMTUwMCxcbiAgICAgIG1lc3NhZ2U6ICdLZXlib2FyZCBjb250cm9scyBkaXNhYmxlZCdcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gS2V5Ym9hcmRDb250cm9scztcblxufSkoTW4uQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEtleWJvYXJkQ29udHJvbHM7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWlaV2hoZG1sdmNuTXZhMlY1WW05aGNtUkRiMjUwY205c2N5NWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDJKbGFHRjJhVzl5Y3k5clpYbGliMkZ5WkVOdmJuUnliMnh6TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZGUVN4SlFVRkJMR2RDUVVGQk8wVkJRVUU3T3pzN1FVRkJUVHM3T3pzN096czdOa0pCUlVvc1ZVRkJRU3hIUVVGWkxGTkJRVUU3VjBGRFZpeEpRVUZETEVOQlFVRXNVMEZCUkN4SFFVRmhMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU03UlVGRVdqczdOa0pCUjFvc1VVRkJRU3hIUVVGVkxGTkJRVUU3U1VGRFVpeEpRVUZETEVOQlFVRXNiVUpCUVVRc1EwRkJRVHRYUVVOQkxFbEJRVU1zUTBGQlFTeG5Ra0ZCUkN4RFFVRkJPMFZCUmxFN096WkNRVWxXTEdOQlFVRXNSMEZCWjBJc1UwRkJRVHRYUVVOa0xFbEJRVU1zUTBGQlFTeHRRa0ZCUkN4RFFVRkJPMFZCUkdNN096WkNRVWRvUWl4VFFVRkJMRWRCUVZjc1UwRkJReXhEUVVGRU8wRkJSVlFzVVVGQlFUdEpRVUZCTEU5QlFVOHNRMEZCUXl4SFFVRlNMRU5CUVZrc1YwRkJXanRKUVVkQkxFOUJRVUVzUjBGQlZTeERRVUZETEVOQlFVTTdTVUZKV2l4SlFVRkJMRU5CUVdNc1NVRkJReXhEUVVGQkxGTkJRVlVzUTBGQlFTeFBRVUZCTEVOQlFYcENPMEZCUVVFc1lVRkJRVHM3U1VGSFFTeERRVUZETEVOQlFVTXNZMEZCUml4RFFVRkJPMGxCUTBFc1EwRkJReXhEUVVGRExHVkJRVVlzUTBGQlFUdEJRVWxCTEZkQlFVOHNTVUZCUXl4RFFVRkJMRWxCUVVrc1EwRkJReXhoUVVGT0xFTkJRVzlDTEVsQlFVTXNRMEZCUVN4VFFVRlZMRU5CUVVFc1QwRkJRU3hEUVVFdlFpeEZRVUY1UXl4RFFVRjZRenRGUVdwQ1JUczdOa0pCYlVKWUxHZENRVUZCTEVkQlFXdENMRk5CUVVFN1NVRkRhRUlzUTBGQlFTeERRVUZGTEZGQlFVWXNRMEZCVnl4RFFVRkRMRVZCUVZvc1EwRkJaU3hUUVVGbUxFVkJRVEJDTEVsQlFVTXNRMEZCUVN4VFFVRXpRanRYUVVOQkxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhQUVVGMlFpeERRVUVyUWl4RFFVRkRMRTlCUVdoRExFTkJRWGRETEV0QlFYaERMRVZCUVN0RE8wMUJRVVVzVDBGQlFTeEZRVUZUTEUxQlFWZzdUVUZCYlVJc1QwRkJRU3hGUVVGVExFbEJRVFZDTzAxQlFXdERMRTlCUVVFc1JVRkJVeXd5UWtGQk0wTTdTMEZCTDBNN1JVRkdaMEk3T3paQ1FVbHNRaXh0UWtGQlFTeEhRVUZ4UWl4VFFVRkJPMGxCUTI1Q0xFTkJRVUVzUTBGQlJTeFJRVUZHTEVOQlFWY3NRMEZCUXl4SFFVRmFMRU5CUVdkQ0xGTkJRV2hDTEVWQlFUSkNMRWxCUVVNc1EwRkJRU3hUUVVFMVFqdFhRVU5CTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhEUVVGMVFpeFBRVUYyUWl4RFFVRXJRaXhEUVVGRExFOUJRV2hETEVOQlFYZERMRXRCUVhoRExFVkJRU3RETzAxQlFVVXNUMEZCUVN4RlFVRlRMRTFCUVZnN1RVRkJiVUlzVDBGQlFTeEZRVUZUTEVsQlFUVkNPMDFCUVd0RExFOUJRVUVzUlVGQlV5dzBRa0ZCTTBNN1MwRkJMME03UlVGR2JVSTdPenM3UjBGdVExRXNSVUZCUlN4RFFVRkRPenRCUVhsRGJFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIFNlbGVjdGFibGVDaGlsZCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblNlbGVjdGFibGVDaGlsZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChTZWxlY3RhYmxlQ2hpbGQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFNlbGVjdGFibGVDaGlsZCgpIHtcbiAgICByZXR1cm4gU2VsZWN0YWJsZUNoaWxkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgU2VsZWN0YWJsZUNoaWxkLnByb3RvdHlwZS5jc3MgPSB7XG4gICAgYWN0aXZlOiAnYWN0aXZlJ1xuICB9O1xuXG4gIFNlbGVjdGFibGVDaGlsZC5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayc6ICdvbkNsaWNrJ1xuICB9O1xuXG4gIFNlbGVjdGFibGVDaGlsZC5wcm90b3R5cGUubW9kZWxFdmVudHMgPSB7XG4gICAgJ3NlbGVjdGVkJzogJ29uQ2xpY2snXG4gIH07XG5cbiAgU2VsZWN0YWJsZUNoaWxkLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5vcHRpb25zLnNldEFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy52aWV3Lm1vZGVsLmNvbGxlY3Rpb24uX2FjdGl2ZU1vZGVsID09PSB0aGlzLnZpZXcubW9kZWwuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLiRlbC50cmlnZ2VyKCdjbGljaycpO1xuICAgIH1cbiAgfTtcblxuICBTZWxlY3RhYmxlQ2hpbGQucHJvdG90eXBlLm9uU2VsZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zZXRBY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy52aWV3Lm1vZGVsLmNvbGxlY3Rpb24uX3NldEFjdGl2ZU1vZGVsKHRoaXMudmlldy5tb2RlbC5pZCk7XG4gICAgcmV0dXJuIHRoaXMudmlldy5tb2RlbC5jb2xsZWN0aW9uLnRyaWdnZXIoJ3NlbGVjdGVkOm1vZGVsJywgdGhpcy52aWV3Lm1vZGVsKTtcbiAgfTtcblxuICBTZWxlY3RhYmxlQ2hpbGQucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKHRoaXMudmlldy5vbkNsaWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy52aWV3Lm9uQ2xpY2soZSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5vcHRpb25zLmRvdWJsZUNsaWNrKSB7XG4gICAgICBpZiAoZSAhPSBudWxsKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuJGVsLmhhc0NsYXNzKHRoaXMuY3NzLmFjdGl2ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGUgIT0gbnVsbCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICB0aGlzLnZpZXcudHJpZ2dlck1ldGhvZCgnc2VsZWN0ZWQnKTtcbiAgICByZXR1cm4gdGhpcy4kZWwuYWRkQ2xhc3ModGhpcy5jc3MuYWN0aXZlKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKHRoaXMuY3NzLmFjdGl2ZSk7XG4gIH07XG5cbiAgcmV0dXJuIFNlbGVjdGFibGVDaGlsZDtcblxufSkoTWFyaW9uZXR0ZS5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU2VsZWN0YWJsZUNoaWxkO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlpWldoaGRtbHZjbk12YzJWc1pXTjBZV0pzWlVOb2FXeGtMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlltVm9ZWFpwYjNKekwzTmxiR1ZqZEdGaWJHVkRhR2xzWkM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUTBFc1NVRkJRU3hsUVVGQk8wVkJRVUU3T3p0QlFVRk5PenM3T3pzN096UkNRVVZLTEVkQlFVRXNSMEZEUlR0SlFVRkJMRTFCUVVFc1JVRkJVU3hSUVVGU096czdORUpCUlVZc1RVRkJRU3hIUVVORk8wbEJRVUVzVDBGQlFTeEZRVUZWTEZOQlFWWTdPenMwUWtGRlJpeFhRVUZCTEVkQlEwVTdTVUZCUVN4VlFVRkJMRVZCUVZrc1UwRkJXanM3T3pSQ1FVZEdMRkZCUVVFc1IwRkJWU3hUUVVGQk8wbEJRMUlzU1VGQlFTeERRVUZqTEVsQlFVTXNRMEZCUVN4UFFVRlBMRU5CUVVNc1UwRkJka0k3UVVGQlFTeGhRVUZCT3p0SlFVTkJMRWxCUVhsQ0xFbEJRVU1zUTBGQlFTeEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRlZCUVZVc1EwRkJReXhaUVVGMlFpeExRVUYxUXl4SlFVRkRMRU5CUVVFc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEZRVUUxUlR0aFFVRkJMRWxCUVVNc1EwRkJRU3hIUVVGSExFTkJRVU1zVDBGQlRDeERRVUZoTEU5QlFXSXNSVUZCUVRzN1JVRkdVVHM3TkVKQlMxWXNWVUZCUVN4SFFVRlpMRk5CUVVFN1NVRkRWaXhKUVVGQkxFTkJRV01zU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4VFFVRjJRanRCUVVGQkxHRkJRVUU3TzBsQlEwRXNTVUZCUXl4RFFVRkJMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVlVGQlZTeERRVUZETEdWQlFYWkNMRU5CUVhWRExFbEJRVU1zUTBGQlFTeEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRVZCUVc1RU8xZEJRMEVzU1VGQlF5eERRVUZCTEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1ZVRkJWU3hEUVVGRExFOUJRWFpDTEVOQlFTdENMR2RDUVVFdlFpeEZRVUZwUkN4SlFVRkRMRU5CUVVFc1NVRkJTU3hEUVVGRExFdEJRWFpFTzBWQlNGVTdPelJDUVUxYUxFOUJRVUVzUjBGQlV5eFRRVUZETEVOQlFVUTdTVUZGVUN4SlFVRXlRaXhKUVVGRExFTkJRVUVzU1VGQlNTeERRVUZETEU5QlFXcERPMEZCUVVFc1lVRkJUeXhKUVVGRExFTkJRVUVzU1VGQlNTeERRVUZETEU5QlFVNHNRMEZCWXl4RFFVRmtMRVZCUVZBN08wbEJSMEVzU1VGQlFTeERRVUV5UWl4SlFVRkRMRU5CUVVFc1QwRkJUeXhEUVVGRExGZEJRWEJET3p0UlFVRkJMRU5CUVVNc1EwRkJSU3hqUVVGSUxFTkJRVUU3VDBGQlFUczdTVUZIUVN4SlFVRlZMRWxCUVVNc1EwRkJRU3hIUVVGSExFTkJRVU1zVVVGQlRDeERRVUZqTEVsQlFVTXNRMEZCUVN4SFFVRkhMRU5CUVVNc1RVRkJia0lzUTBGQlZqdEJRVUZCTEdGQlFVRTdPenROUVVkQkxFTkJRVU1zUTBGQlJTeGpRVUZJTEVOQlFVRTdPMGxCUTBFc1NVRkJReXhEUVVGQkxFbEJRVWtzUTBGQlF5eGhRVUZPTEVOQlFXOUNMRlZCUVhCQ08xZEJRMEVzU1VGQlF5eERRVUZCTEVkQlFVY3NRMEZCUXl4UlFVRk1MRU5CUVdNc1NVRkJReXhEUVVGQkxFZEJRVWNzUTBGQlF5eE5RVUZ1UWl4RFFVRXdRaXhEUVVGRExGRkJRVE5DTEVOQlFVRXNRMEZCY1VNc1EwRkJReXhYUVVGMFF5eERRVUZyUkN4SlFVRkRMRU5CUVVFc1IwRkJSeXhEUVVGRExFMUJRWFpFTzBWQllrODdPenM3UjBGMlFtMUNMRlZCUVZVc1EwRkJRenM3UVVGM1EzcERMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIFNvcnRhYmxlQ2hpbGQsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Tb3J0YWJsZUNoaWxkID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFNvcnRhYmxlQ2hpbGQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFNvcnRhYmxlQ2hpbGQoKSB7XG4gICAgcmV0dXJuIFNvcnRhYmxlQ2hpbGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTb3J0YWJsZUNoaWxkLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ3NvcnRlZCc6ICdvblNvcnRlZCdcbiAgfTtcblxuICBTb3J0YWJsZUNoaWxkLnByb3RvdHlwZS5vblNvcnRlZCA9IGZ1bmN0aW9uKGUsIG9yZGVyKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5tb2RlbC5zZXQoJ29yZGVyJywgb3JkZXIpO1xuICB9O1xuXG4gIHJldHVybiBTb3J0YWJsZUNoaWxkO1xuXG59KShNbi5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gU29ydGFibGVDaGlsZDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5aVpXaGhkbWx2Y25NdmMyOXlkR0ZpYkdWRGFHbHNaQzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwySmxhR0YyYVc5eWN5OXpiM0owWVdKc1pVTm9hV3hrTG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZIUVN4SlFVRkJMR0ZCUVVFN1JVRkJRVHM3TzBGQlFVMDdPenM3T3pzN01FSkJSVW9zVFVGQlFTeEhRVU5GTzBsQlFVRXNVVUZCUVN4RlFVRlZMRlZCUVZZN096c3dRa0ZGUml4UlFVRkJMRWRCUVZVc1UwRkJReXhEUVVGRUxFVkJRVWtzUzBGQlNqdFhRVU5TTEVsQlFVTXNRMEZCUVN4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVm9zUTBGQlowSXNUMEZCYUVJc1JVRkJlVUlzUzBGQmVrSTdSVUZFVVRzN096dEhRVXhuUWl4RlFVRkZMRU5CUVVNN08wRkJWUzlDTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBTb3J0YWJsZUxpc3QsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuU29ydGFibGVMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFNvcnRhYmxlTGlzdCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gU29ydGFibGVMaXN0KCkge1xuICAgIHRoaXMucmVvcmRlckNvbGxlY3Rpb24gPSBiaW5kKHRoaXMucmVvcmRlckNvbGxlY3Rpb24sIHRoaXMpO1xuICAgIHJldHVybiBTb3J0YWJsZUxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTb3J0YWJsZUxpc3QucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnJlb3JkZXJDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5yZW9yZGVyQ29sbGVjdGlvbigpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgfTtcblxuICBTb3J0YWJsZUxpc3QucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFNvcnRhYmxlLmNyZWF0ZSh0aGlzLnZpZXcuZWwsIHtcbiAgICAgIGhhbmRsZTogdGhpcy5vcHRpb25zLmhhbmRsZSB8fCAnLnNvcnRhYmxlJyxcbiAgICAgIGFuaW1hdGlvbjogdGhpcy5vcHRpb25zLmFuaW1hdGlvbiB8fCAyNTAsXG4gICAgICBvbkVuZDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJlb3JkZXJDb2xsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKVxuICAgIH0pO1xuICB9O1xuXG4gIFNvcnRhYmxlTGlzdC5wcm90b3R5cGUucmVvcmRlckNvbGxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwsIGksIGxlbiwgb3JkZXIsIHJlZiwgcmVzdWx0cztcbiAgICBvcmRlciA9IDE7XG4gICAgcmVmID0gdGhpcy52aWV3LiRlbFswXS5jaGlsZHJlbjtcbiAgICByZXN1bHRzID0gW107XG4gICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBlbCA9IHJlZltpXTtcbiAgICAgICQoZWwpLnRyaWdnZXIoJ3NvcnRlZCcsIG9yZGVyKTtcbiAgICAgIHJlc3VsdHMucHVzaChvcmRlcisrKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgcmV0dXJuIFNvcnRhYmxlTGlzdDtcblxufSkoTW4uQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNvcnRhYmxlTGlzdDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5aVpXaGhkbWx2Y25NdmMyOXlkR0ZpYkdWTWFYTjBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlltVm9ZWFpwYjNKekwzTnZjblJoWW14bFRHbHpkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJSMEVzU1VGQlFTeFpRVUZCTzBWQlFVRTdPenM3UVVGQlRUczdPenM3T3pzN2VVSkJTVW9zVlVGQlFTeEhRVUZaTEZOQlFVRTdWMEZEVml4SlFVRkRMRU5CUVVFc1NVRkJTU3hEUVVGRExHbENRVUZPTEVkQlFUQkNMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVUZITEV0QlFVTXNRMEZCUVN4cFFrRkJSQ3hEUVVGQk8wMUJRVWc3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJPMFZCUkdoQ096dDVRa0ZIV2l4UlFVRkJMRWRCUVZVc1UwRkJRVHRYUVVkU0xGRkJRVkVzUTBGQlF5eE5RVUZVTEVOQlFXZENMRWxCUVVNc1EwRkJRU3hKUVVGSkxFTkJRVU1zUlVGQmRFSXNSVUZEUlR0TlFVRkJMRTFCUVVFc1JVRkJZeXhKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEUxQlFWUXNTVUZCYlVJc1YwRkJha003VFVGRFFTeFRRVUZCTEVWQlFXTXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhUUVVGVUxFbEJRWE5DTEVkQlJIQkRPMDFCUlVFc1MwRkJRU3hGUVVGUExFTkJRVUVzVTBGQlFTeExRVUZCTzJWQlFVRXNVMEZCUXl4RFFVRkVPMmxDUVVGUExFdEJRVU1zUTBGQlFTeHBRa0ZCUkN4RFFVRkJPMUZCUVZBN1RVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlJsQTdTMEZFUmp0RlFVaFJPenQ1UWtGVlZpeHBRa0ZCUVN4SFFVRnRRaXhUUVVGQk8wRkJSMnBDTEZGQlFVRTdTVUZCUVN4TFFVRkJMRWRCUVZFN1FVRkRVanRCUVVGQk8xTkJRVUVzY1VOQlFVRTdPMDFCUTBVc1EwRkJRU3hEUVVGRkxFVkJRVVlzUTBGQlN5eERRVUZETEU5QlFVNHNRMEZCWXl4UlFVRmtMRVZCUVhWQ0xFdEJRWFpDTzIxQ1FVTkJMRXRCUVVFN1FVRkdSanM3UlVGS2FVSTdPenM3UjBGcVFrMHNSVUZCUlN4RFFVRkRPenRCUVRKQ09VSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEJyZWFkY3J1bWJDb21wb25lbnQsIEJyZWFkY3J1bWJMaXN0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQnJlYWRjcnVtYkxpc3QgPSByZXF1aXJlKCcuL3ZpZXdzL2JyZWFkY3J1bWJMaXN0Jyk7XG5cbkJyZWFkY3J1bWJDb21wb25lbnQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQnJlYWRjcnVtYkNvbXBvbmVudCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQnJlYWRjcnVtYkNvbXBvbmVudCgpIHtcbiAgICByZXR1cm4gQnJlYWRjcnVtYkNvbXBvbmVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEJyZWFkY3J1bWJDb21wb25lbnQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb24gPSBuZXcgQmFja2JvbmUuQ29sbGVjdGlvbigpO1xuICB9O1xuXG4gIEJyZWFkY3J1bWJDb21wb25lbnQucHJvdG90eXBlLnJhZGlvRXZlbnRzID0ge1xuICAgICdicmVhZGNydW1iIHJlYWR5JzogJ29uUmVhZHknLFxuICAgICdicmVhZGNydW1iIHNldCc6ICdzZXQnXG4gIH07XG5cbiAgQnJlYWRjcnVtYkNvbXBvbmVudC5wcm90b3R5cGUub25SZWFkeSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0KFtcbiAgICAgIHtcbiAgICAgICAgdGV4dDogJ0xvYWRpbmcuLi4nXG4gICAgICB9XG4gICAgXSk7XG4gICAgcmV0dXJuIHRoaXMuc2hvd1ZpZXcoKTtcbiAgfTtcblxuICBCcmVhZGNydW1iQ29tcG9uZW50LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihtb2RlbHMpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uLnNldChtb2RlbHMpO1xuICB9O1xuXG4gIEJyZWFkY3J1bWJDb21wb25lbnQucHJvdG90eXBlLnNob3dWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnNob3duKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBCcmVhZGNydW1iTGlzdCh7XG4gICAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIHRoaXMuc2hvd24gPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQnJlYWRjcnVtYkNvbXBvbmVudDtcblxufSkoTW4uU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQnJlYWRjcnVtYkNvbXBvbmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwySnlaV0ZrWTNKMWJXSXZZMjl0Y0c5dVpXNTBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlkyOXRjRzl1Wlc1MGN5OWljbVZoWkdOeWRXMWlMMk52YlhCdmJtVnVkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTeHRRMEZCUVR0RlFVRkJPenM3UVVGQlFTeGpRVUZCTEVkQlFXbENMRTlCUVVFc1EwRkJVU3gzUWtGQlVqczdRVUZKV0RzN096czdPenRuUTBGRlNpeFZRVUZCTEVkQlFWa3NVMEZCUXl4UFFVRkVPenROUVVGRExGVkJRVlU3TzBsQlEzSkNMRWxCUVVNc1EwRkJRU3hUUVVGRUxFZEJRV01zVDBGQlR5eERRVUZETzFkQlEzUkNMRWxCUVVNc1EwRkJRU3hWUVVGRUxFZEJRV01zU1VGQlNTeFJRVUZSTEVOQlFVTXNWVUZCWWl4RFFVRkJPMFZCUmtvN08yZERRVWxhTEZkQlFVRXNSMEZEUlR0SlFVRkJMR3RDUVVGQkxFVkJRVzlDTEZOQlFYQkNPMGxCUTBFc1owSkJRVUVzUlVGQmIwSXNTMEZFY0VJN096dG5RMEZIUml4UFFVRkJMRWRCUVZNc1UwRkJRVHRKUVVOUUxFbEJRVU1zUTBGQlFTeEhRVUZFTEVOQlFVczdUVUZCUXp0UlFVRkRMRWxCUVVFc1JVRkJUU3haUVVGUU8wOUJRVVE3UzBGQlREdFhRVU5CTEVsQlFVTXNRMEZCUVN4UlFVRkVMRU5CUVVFN1JVRkdUenM3WjBOQlNWUXNSMEZCUVN4SFFVRkxMRk5CUVVNc1RVRkJSRHRYUVVOSUxFbEJRVU1zUTBGQlFTeFZRVUZWTEVOQlFVTXNSMEZCV2l4RFFVRm5RaXhOUVVGb1FqdEZRVVJIT3p0blEwRkhUQ3hSUVVGQkxFZEJRVlVzVTBGQlFUdEpRVU5TTEVsQlFVRXNRMEZCVHl4SlFVRkRMRU5CUVVFc1MwRkJVanROUVVORkxFbEJRVU1zUTBGQlFTeFRRVUZUTEVOQlFVTXNTVUZCV0N4RFFVRm5RaXhKUVVGSkxHTkJRVW9zUTBGQmJVSTdVVUZCUlN4VlFVRkJMRVZCUVZrc1NVRkJReXhEUVVGQkxGVkJRV1k3VDBGQmJrSXNRMEZCYUVJN1lVRkRRU3hKUVVGRExFTkJRVUVzUzBGQlJDeEhRVUZUTEV0QlJsZzdPMFZCUkZFN096czdSMEZxUW5OQ0xFVkJRVVVzUTBGQlF6czdRVUYzUW5KRExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgQnJlYWRjcnVtYkNoaWxkLCBCcmVhZGNydW1iTGlzdCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkJyZWFkY3J1bWJDaGlsZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChCcmVhZGNydW1iQ2hpbGQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEJyZWFkY3J1bWJDaGlsZCgpIHtcbiAgICByZXR1cm4gQnJlYWRjcnVtYkNoaWxkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQnJlYWRjcnVtYkNoaWxkLnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICBCcmVhZGNydW1iQ2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvYnJlYWRjcnVtYl9jaGlsZCcpO1xuXG4gIEJyZWFkY3J1bWJDaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNzcztcbiAgICBjc3MgPSAnYnJlYWRjcnVtYi1pdGVtJztcbiAgICBpZiAoIXRoaXMubW9kZWwuZ2V0KCdocmVmJykpIHtcbiAgICAgIHJldHVybiBjc3MgKyAnIGFjdGl2ZSc7XG4gICAgfVxuICAgIHJldHVybiBjc3M7XG4gIH07XG5cbiAgcmV0dXJuIEJyZWFkY3J1bWJDaGlsZDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbkJyZWFkY3J1bWJMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEJyZWFkY3J1bWJMaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBCcmVhZGNydW1iTGlzdCgpIHtcbiAgICByZXR1cm4gQnJlYWRjcnVtYkxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBCcmVhZGNydW1iTGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2JyZWFkY3J1bWIgbWItMCBiZy1saWdodCc7XG5cbiAgQnJlYWRjcnVtYkxpc3QucHJvdG90eXBlLnRhZ05hbWUgPSAnb2wnO1xuXG4gIEJyZWFkY3J1bWJMaXN0LnByb3RvdHlwZS5jaGlsZFZpZXcgPSBCcmVhZGNydW1iQ2hpbGQ7XG5cbiAgQnJlYWRjcnVtYkxpc3QucHJvdG90eXBlLmF0dHJpYnV0ZXMgPSB7XG4gICAgcm9sZTogJ25hdmlnYXRpb24nXG4gIH07XG5cbiAgcmV0dXJuIEJyZWFkY3J1bWJMaXN0O1xuXG59KShNbi5Db2xsZWN0aW9uVmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQnJlYWRjcnVtYkxpc3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMkp5WldGa1kzSjFiV0l2ZG1sbGQzTXZZbkpsWVdSamNuVnRZa3hwYzNRdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjIxd2IyNWxiblJ6TDJKeVpXRmtZM0oxYldJdmRtbGxkM012WW5KbFlXUmpjblZ0WWt4cGMzUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVTkJMRWxCUVVFc0swSkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3TkVKQlEwb3NUMEZCUVN4SFFVRlRPenMwUWtGRFZDeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMRGhDUVVGU096czBRa0ZGVml4VFFVRkJMRWRCUVZjc1UwRkJRVHRCUVVOVUxGRkJRVUU3U1VGQlFTeEhRVUZCTEVkQlFVMDdTVUZEVGl4SlFVRkJMRU5CUVRoQ0xFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTFCUVZnc1EwRkJPVUk3UVVGQlFTeGhRVUZQTEVkQlFVRXNSMEZCVFN4VlFVRmlPenRCUVVOQkxGZEJRVTg3UlVGSVJUczdPenRIUVVwcFFpeEZRVUZGTEVOQlFVTTdPMEZCVnpOQ096czdPenM3T3pKQ1FVTktMRk5CUVVFc1IwRkJWenM3TWtKQlExZ3NUMEZCUVN4SFFVRlRPenN5UWtGRFZDeFRRVUZCTEVkQlFWYzdPekpDUVVWWUxGVkJRVUVzUjBGRFJUdEpRVUZCTEVsQlFVRXNSVUZCVFN4WlFVRk9PenM3T3p0SFFVNTVRaXhGUVVGRkxFTkJRVU03TzBGQlZXaERMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoaHJlZiwgdGV4dCkge1xuaWYgKCBocmVmKVxue1xuYnVmLnB1c2goXCI8YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgaHJlZiwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gdGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9hPlwiKTtcbn1cbmVsc2VcbntcbmJ1Zi5wdXNoKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gdGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKTtcbn19LmNhbGwodGhpcyxcImhyZWZcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmhyZWY6dHlwZW9mIGhyZWYhPT1cInVuZGVmaW5lZFwiP2hyZWY6dW5kZWZpbmVkLFwidGV4dFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudGV4dDp0eXBlb2YgdGV4dCE9PVwidW5kZWZpbmVkXCI/dGV4dDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgQ29uZmlybUNvbXBvbmVudCwgQ29uZmlybVZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Db25maXJtVmlldyA9IHJlcXVpcmUoJy4vdmlld3MvY29uZmlybVZpZXcnKTtcblxuQ29uZmlybUNvbXBvbmVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDb25maXJtQ29tcG9uZW50LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBDb25maXJtQ29tcG9uZW50KCkge1xuICAgIHJldHVybiBDb25maXJtQ29tcG9uZW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQ29uZmlybUNvbXBvbmVudC5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnY29uZmlybSBzaG93JzogJ2NvbmZpcm0nXG4gIH07XG5cbiAgQ29uZmlybUNvbXBvbmVudC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGNvbmZpcm1WaWV3O1xuICAgICAgICBjb25maXJtVmlldyA9IG5ldyBDb25maXJtVmlldyhvcHRpb25zKTtcbiAgICAgICAgY29uZmlybVZpZXcub24oJ2RlbmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpcm1WaWV3Lm9uKCdjb25maXJtZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuaGlkZU1vZGFsKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBfdGhpcy5zaG93TW9kYWwoY29uZmlybVZpZXcsIHtcbiAgICAgICAgICBzaXplOiBvcHRpb25zLnNpemVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKGNvbmZpcm1WaWV3KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBDb25maXJtQ29tcG9uZW50O1xuXG59KShyZXF1aXJlKCcuLi9tb2RhbC9hYnN0cmFjdCcpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb25maXJtQ29tcG9uZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjIxd2IyNWxiblJ6TDJOdmJtWnBjbTB2WTI5dGNHOXVaVzUwTG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyRndjQzlqYjJabVpXVXZZMjl0Y0c5dVpXNTBjeTlqYjI1bWFYSnRMMk52YlhCdmJtVnVkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTdzJRa0ZCUVR0RlFVRkJPenM3UVVGQlFTeFhRVUZCTEVkQlFXTXNUMEZCUVN4RFFVRlJMSEZDUVVGU096dEJRVTlTT3pzN096czdPelpDUVVWS0xHRkJRVUVzUjBGRFJUdEpRVUZCTEdOQlFVRXNSVUZCWjBJc1UwRkJhRUk3T3pzMlFrRkZSaXhQUVVGQkxFZEJRVk1zVTBGQlF5eFBRVUZFT3p0TlFVRkRMRlZCUVZFN08wRkJRMmhDTEZkQlFVOHNTVUZCU1N4UFFVRktMRU5CUVZrc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEU5QlFVUXNSVUZCVlN4TlFVRldPMEZCUTJwQ0xGbEJRVUU3VVVGQlFTeFhRVUZCTEVkQlFXTXNTVUZCU1N4WFFVRktMRU5CUVdkQ0xFOUJRV2hDTzFGQlIyUXNWMEZCVnl4RFFVRkRMRVZCUVZvc1EwRkJaU3hSUVVGbUxFVkJRVFJDTEZOQlFVRTdhVUpCUVVjc1MwRkJReXhEUVVGQkxGTkJRVVFzUTBGQlFUdFJRVUZJTEVOQlFUVkNPMUZCUTBFc1YwRkJWeXhEUVVGRExFVkJRVm9zUTBGQlpTeFhRVUZtTEVWQlFUUkNMRk5CUVVFN2FVSkJRVWNzUzBGQlF5eERRVUZCTEZOQlFVUXNRMEZCUVR0UlFVRklMRU5CUVRWQ08xRkJTVUVzUzBGQlF5eERRVUZCTEZOQlFVUXNRMEZCVnl4WFFVRllMRVZCUVhkQ08xVkJRVVVzU1VGQlFTeEZRVUZOTEU5QlFVOHNRMEZCUXl4SlFVRm9RanRUUVVGNFFqdGxRVWRCTEU5QlFVRXNRMEZCVVN4WFFVRlNPMDFCV21sQ08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRmFPMFZCUkVFN096czdSMEZNYjBJc1QwRkJRU3hEUVVGUkxHMUNRVUZTT3p0QlFYTkNMMElzVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBDb25maXJtVmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNvbmZpcm1WaWV3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKENvbmZpcm1WaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBDb25maXJtVmlldygpIHtcbiAgICByZXR1cm4gQ29uZmlybVZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBDb25maXJtVmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRlbnQnO1xuXG4gIENvbmZpcm1WaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2NvbmZpcm1fdmlldycpO1xuXG4gIENvbmZpcm1WaWV3LnByb3RvdHlwZS51aSA9IHtcbiAgICBkZW55OiAnW2RhdGEtY2xpY2s9ZGVueV0nLFxuICAgIGNvbmZpcm06ICdbZGF0YS1jbGljaz1jb25maXJtXSdcbiAgfTtcblxuICBDb25maXJtVmlldy5wcm90b3R5cGUudHJpZ2dlcnMgPSB7XG4gICAgJ2NsaWNrIEB1aS5kZW55JzogJ2RlbmllZCcsXG4gICAgJ2NsaWNrIEB1aS5jb25maXJtJzogJ2NvbmZpcm1lZCdcbiAgfTtcblxuICBDb25maXJtVmlldy5wcm90b3R5cGUuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbWVzc2FnZTogJ0FyZSB5b3Ugc3VyZT8nLFxuICAgIG1lc3NhZ2VDc3M6ICcnLFxuICAgIGRlbnlJY29uOiAnZmEtdGltZXMnLFxuICAgIGRlbnlUZXh0OiAnQ2FuY2VsJyxcbiAgICBkZW55Q3NzOiAnYnRuLXNlY29uZGFyeScsXG4gICAgY29uZmlybUljb246ICdmYS1jaGVjaycsXG4gICAgY29uZmlybVRleHQ6ICdDb25maXJtJyxcbiAgICBjb25maXJtQ3NzOiAnYnRuLXN1Y2Nlc3MnXG4gIH07XG5cbiAgQ29uZmlybVZpZXcucHJvdG90eXBlLnNlcmlhbGl6ZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy5leHRlbmQodGhpcy5kZWZhdWx0T3B0aW9ucywgdGhpcy5vcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gQ29uZmlybVZpZXc7XG5cbn0pKE1hcmlvbmV0dGUuTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uZmlybVZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMk52Ym1acGNtMHZkbWxsZDNNdlkyOXVabWx5YlZacFpYY3VZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwyTnZibVpwY20wdmRtbGxkM012WTI5dVptbHliVlpwWlhjdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVV0QkxFbEJRVUVzVjBGQlFUdEZRVUZCT3pzN1FVRkJUVHM3T3pzN096dDNRa0ZEU2l4VFFVRkJMRWRCUVZjN08zZENRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc01FSkJRVkk3TzNkQ1FVVldMRVZCUVVFc1IwRkRSVHRKUVVGQkxFbEJRVUVzUlVGQlZTeHRRa0ZCVmp0SlFVTkJMRTlCUVVFc1JVRkJWU3h6UWtGRVZqczdPM2RDUVVkR0xGRkJRVUVzUjBGRFJUdEpRVUZCTEdkQ1FVRkJMRVZCUVhOQ0xGRkJRWFJDTzBsQlEwRXNiVUpCUVVFc1JVRkJjMElzVjBGRWRFSTdPenQzUWtGSFJpeGpRVUZCTEVkQlEwVTdTVUZCUVN4UFFVRkJMRVZCUVdNc1pVRkJaRHRKUVVOQkxGVkJRVUVzUlVGQll5eEZRVVJrTzBsQlIwRXNVVUZCUVN4RlFVRmpMRlZCU0dRN1NVRkpRU3hSUVVGQkxFVkJRV01zVVVGS1pEdEpRVXRCTEU5QlFVRXNSVUZCWXl4bFFVeGtPMGxCVDBFc1YwRkJRU3hGUVVGakxGVkJVR1E3U1VGUlFTeFhRVUZCTEVWQlFXTXNVMEZTWkR0SlFWTkJMRlZCUVVFc1JVRkJZeXhoUVZSa096czdkMEpCVjBZc1lVRkJRU3hIUVVGbExGTkJRVUU3UVVGRFlpeFhRVUZQTEVOQlFVTXNRMEZCUXl4TlFVRkdMRU5CUVZNc1NVRkJReXhEUVVGQkxHTkJRVllzUlVGQk1FSXNTVUZCUXl4RFFVRkJMRTlCUVROQ08wVkJSRTA3T3pzN1IwRjRRbE1zVlVGQlZTeERRVUZET3p0QlFUWkNja01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGNvbmZpcm1Dc3MsIGNvbmZpcm1JY29uLCBjb25maXJtVGV4dCwgZGVueUNzcywgZGVueUljb24sIGRlbnlUZXh0LCBtZXNzYWdlLCBtZXNzYWdlQ3NzKSB7XG5qYWRlX21peGluc1tcImNvbmZpcm1CdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCJcIiArIChqYWRlLmF0dHIoXCJkYXRhLWNsaWNrXCIsIG9wdHMuY2xpY2ssIHRydWUsIGZhbHNlKSkgKyAoamFkZS5jbHMoWydidG4nLCd3LTEwMCcsb3B0cy5jc3NdLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcIm1vZGFsLWJvZHlcXFwiPjxwXCIgKyAoamFkZS5jbHMoWydsZWFkJywnbWItMCcsbWVzc2FnZUNzc10sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPlwiICsgKCgoamFkZV9pbnRlcnAgPSBtZXNzYWdlKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI8L3A+PC9kaXY+PGRpdiBjbGFzcz1cXFwibW9kYWwtZm9vdGVyXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj5cIik7XG5qYWRlX21peGluc1tcImNvbmZpcm1CdXR0b25cIl0oeyBjbGljazogJ2RlbnknLCBjc3M6IGRlbnlDc3MsIGljb246IGRlbnlJY29uLCB0ZXh0OiBkZW55VGV4dCB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY29uZmlybUJ1dHRvblwiXSh7IGNsaWNrOiAnY29uZmlybScsIGNzczogY29uZmlybUNzcywgaWNvbjogY29uZmlybUljb24sIHRleHQ6IGNvbmZpcm1UZXh0IH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJjb25maXJtQ3NzXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb25maXJtQ3NzOnR5cGVvZiBjb25maXJtQ3NzIT09XCJ1bmRlZmluZWRcIj9jb25maXJtQ3NzOnVuZGVmaW5lZCxcImNvbmZpcm1JY29uXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb25maXJtSWNvbjp0eXBlb2YgY29uZmlybUljb24hPT1cInVuZGVmaW5lZFwiP2NvbmZpcm1JY29uOnVuZGVmaW5lZCxcImNvbmZpcm1UZXh0XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb25maXJtVGV4dDp0eXBlb2YgY29uZmlybVRleHQhPT1cInVuZGVmaW5lZFwiP2NvbmZpcm1UZXh0OnVuZGVmaW5lZCxcImRlbnlDc3NcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmRlbnlDc3M6dHlwZW9mIGRlbnlDc3MhPT1cInVuZGVmaW5lZFwiP2RlbnlDc3M6dW5kZWZpbmVkLFwiZGVueUljb25cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmRlbnlJY29uOnR5cGVvZiBkZW55SWNvbiE9PVwidW5kZWZpbmVkXCI/ZGVueUljb246dW5kZWZpbmVkLFwiZGVueVRleHRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmRlbnlUZXh0OnR5cGVvZiBkZW55VGV4dCE9PVwidW5kZWZpbmVkXCI/ZGVueVRleHQ6dW5kZWZpbmVkLFwibWVzc2FnZVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubWVzc2FnZTp0eXBlb2YgbWVzc2FnZSE9PVwidW5kZWZpbmVkXCI/bWVzc2FnZTp1bmRlZmluZWQsXCJtZXNzYWdlQ3NzXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5tZXNzYWdlQ3NzOnR5cGVvZiBtZXNzYWdlQ3NzIT09XCJ1bmRlZmluZWRcIj9tZXNzYWdlQ3NzOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBIZWFkZXJTZXJ2aWNlLCBMYXlvdXRWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0Jyk7XG5cbkhlYWRlclNlcnZpY2UgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoSGVhZGVyU2VydmljZSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gSGVhZGVyU2VydmljZSgpIHtcbiAgICByZXR1cm4gSGVhZGVyU2VydmljZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEhlYWRlclNlcnZpY2UucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIgPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyO1xuICB9O1xuXG4gIEhlYWRlclNlcnZpY2UucHJvdG90eXBlLnJhZGlvRXZlbnRzID0ge1xuICAgICdoZWFkZXIgcmVzZXQnOiAncmVzZXQnXG4gIH07XG5cbiAgSGVhZGVyU2VydmljZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIuc2hvdyhuZXcgTGF5b3V0VmlldygpKTtcbiAgfTtcblxuICByZXR1cm4gSGVhZGVyU2VydmljZTtcblxufSkoTWFyaW9uZXR0ZS5TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBIZWFkZXJTZXJ2aWNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjIxd2IyNWxiblJ6TDJobFlXUmxjaTlqYjIxd2IyNWxiblF1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMmhsWVdSbGNpOWpiMjF3YjI1bGJuUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc2VVSkJRVUU3UlVGQlFUczdPMEZCUVVFc1ZVRkJRU3hIUVVGaExFOUJRVUVzUTBGQlVTeG5Ra0ZCVWpzN1FVRk5VRHM3T3pzN096c3dRa0ZGU2l4VlFVRkJMRWRCUVZrc1UwRkJRVHRYUVVOV0xFbEJRVU1zUTBGQlFTeFRRVUZFTEVkQlFXRXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJRenRGUVVSYU96c3dRa0ZIV2l4WFFVRkJMRWRCUTBVN1NVRkJRU3hqUVVGQkxFVkJRV2RDTEU5QlFXaENPenM3TUVKQlJVWXNTMEZCUVN4SFFVRlBMRk5CUVVFN1YwRkRUQ3hKUVVGRExFTkJRVUVzVTBGQlV5eERRVUZETEVsQlFWZ3NRMEZCWjBJc1NVRkJTU3hWUVVGS0xFTkJRVUVzUTBGQmFFSTdSVUZFU3pzN096dEhRVkp0UWl4VlFVRlZMRU5CUVVNN08wRkJZWFpETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBIZWFkZXJWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuSGVhZGVyVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChIZWFkZXJWaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBIZWFkZXJWaWV3KCkge1xuICAgIHJldHVybiBIZWFkZXJWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgSGVhZGVyVmlldy5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9oZWFkZXInKTtcblxuICBIZWFkZXJWaWV3LnByb3RvdHlwZS50YWdOYW1lID0gJ25hdic7XG5cbiAgSGVhZGVyVmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ25hdmJhciBuYXZiYXItZXhwYW5kLWxnIG5hdmJhci1saWdodCBiZy1saWdodCBuYXZiYXItc3RhdGljLXRvcCc7XG5cbiAgcmV0dXJuIEhlYWRlclZpZXc7XG5cbn0pKE1hcmlvbmV0dGUuTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gSGVhZGVyVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwyaGxZV1JsY2k5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwyaGxZV1JsY2k5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVMUJMRWxCUVVFc1ZVRkJRVHRGUVVGQk96czdRVUZCVFRzN096czdPenQxUWtGRFNpeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMRzlDUVVGU096dDFRa0ZEVml4UFFVRkJMRWRCUVZNN08zVkNRVU5VTEZOQlFVRXNSMEZCVnpzN096dEhRVWhaTEZWQlFWVXNRMEZCUXpzN1FVRlBjRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcIm5hdkl0ZW1CcmVha1wiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24oKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJuYXYtaXRlbVxcXCI+PGEgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj58PC9hPjwvbGk+XCIpO1xufTtcbmphZGVfbWl4aW5zW1wibmF2SXRlbVwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcIm5hdkl0ZW1CcmVha1wiXSgpO1xuYnVmLnB1c2goXCI8bGkgY2xhc3M9XFxcIm5hdi1pdGVtXFxcIj48YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgb3B0cy5ocmVmLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcIm5hdi1saW5rXFxcIj48aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy50ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2E+PC9saT5cIik7XG59O1xuYnVmLnB1c2goXCI8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwibmF2YmFyLWJyYW5kXFxcIj48aW1nIHNyYz1cXFwiaW1nL2JyYW5kL21hZ2VsbGFuL21hZ2VsbGFuLTEzLnBuZ1xcXCIgaGVpZ2h0PVxcXCI0MFxcXCIvPjwvYT48dWwgY2xhc3M9XFxcIm5hdiBuYXZiYXItbmF2IHB1bGwtbGVmdCBwbC0xXFxcIj5cIik7XG5qYWRlX21peGluc1tcIm5hdkl0ZW1cIl0oeyBocmVmOiAnI2RhdGFzZXRzJywgaWNvbjogJ2ZhLWZvbGRlci1vcGVuLW8nLCB0ZXh0OiAnQXJjaGl2ZXMnIH0pO1xuamFkZV9taXhpbnNbXCJuYXZJdGVtXCJdKHsgaHJlZjogJyNvbnRvbG9naWVzJywgaWNvbjogJ2ZhLWxpc3QtYWx0JywgdGV4dDogJ09udG9sb2dpZXMnIH0pO1xuamFkZV9taXhpbnNbXCJuYXZJdGVtXCJdKHsgaHJlZjogJyNzZXR0aW5ncycsIGljb246ICdmYS1jb2cnLCB0ZXh0OiAnU2V0dGluZ3MnIH0pO1xuamFkZV9taXhpbnNbXCJuYXZJdGVtQnJlYWtcIl0oKTtcbmJ1Zi5wdXNoKFwiPC91bD5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIExvYWRpbmdDb21wb25lbnQsIExvYWRpbmdWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTG9hZGluZ1ZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5Mb2FkaW5nQ29tcG9uZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKExvYWRpbmdDb21wb25lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIExvYWRpbmdDb21wb25lbnQoKSB7XG4gICAgcmV0dXJuIExvYWRpbmdDb21wb25lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBMb2FkaW5nQ29tcG9uZW50LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gIH07XG5cbiAgTG9hZGluZ0NvbXBvbmVudC5wcm90b3R5cGUucmFkaW9FdmVudHMgPSB7XG4gICAgJ2xvYWRpbmcgcmVhZHknOiAnb25SZWFkeScsXG4gICAgJ2xvYWRpbmcgc2hvdyc6ICdzaG93TG9hZGluZycsXG4gICAgJ2xvYWRpbmcgaGlkZSc6ICdoaWRlTG9hZGluZydcbiAgfTtcblxuICBMb2FkaW5nQ29tcG9uZW50LnByb3RvdHlwZS5zaG93TG9hZGluZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PSBudWxsKSB7XG4gICAgICBtZXNzYWdlID0gJ0xPQURJTkcnO1xuICAgIH1cbiAgICAkKCcubG9hZGluZy1yZWdpb24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgcmV0dXJuIHRoaXMudmlldy51cGRhdGVNZXNzYWdlKG1lc3NhZ2UpO1xuICB9O1xuXG4gIExvYWRpbmdDb21wb25lbnQucHJvdG90eXBlLmhpZGVMb2FkaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICQoJy5sb2FkaW5nLXJlZ2lvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgfTtcblxuICBMb2FkaW5nQ29tcG9uZW50LnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnZpZXcpIHtcbiAgICAgIHRoaXMudmlldyA9IG5ldyBMb2FkaW5nVmlldygpO1xuICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3codGhpcy52aWV3KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIExvYWRpbmdDb21wb25lbnQ7XG5cbn0pKE1uLlNlcnZpY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IExvYWRpbmdDb21wb25lbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMnh2WVdScGJtY3ZZMjl0Y0c5dVpXNTBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlkyOXRjRzl1Wlc1MGN5OXNiMkZrYVc1bkwyTnZiWEJ2Ym1WdWRDNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNTVUZCUVN3MlFrRkJRVHRGUVVGQk96czdRVUZCUVN4WFFVRkJMRWRCUVdNc1QwRkJRU3hEUVVGUkxHZENRVUZTT3p0QlFVbFNPenM3T3pzN096WkNRVVZLTEZWQlFVRXNSMEZCV1N4VFFVRkRMRTlCUVVRN08wMUJRVU1zVlVGQlZUczdWMEZEY2tJc1NVRkJReXhEUVVGQkxGTkJRVVFzUjBGQll5eFBRVUZQTEVOQlFVTTdSVUZFV2pzN05rSkJSMW9zVjBGQlFTeEhRVU5GTzBsQlFVRXNaVUZCUVN4RlFVRnJRaXhUUVVGc1FqdEpRVU5CTEdOQlFVRXNSVUZCYTBJc1lVRkViRUk3U1VGRlFTeGpRVUZCTEVWQlFXdENMR0ZCUm14Q096czdOa0pCU1VZc1YwRkJRU3hIUVVGaExGTkJRVU1zVDBGQlJEczdUVUZCUXl4VlFVRlJPenRKUVVOd1FpeERRVUZCTEVOQlFVVXNhVUpCUVVZc1EwRkJiMElzUTBGQlF5eFJRVUZ5UWl4RFFVRTRRaXhSUVVFNVFqdFhRVU5CTEVsQlFVTXNRMEZCUVN4SlFVRkpMRU5CUVVNc1lVRkJUaXhEUVVGdlFpeFBRVUZ3UWp0RlFVWlhPenMyUWtGSllpeFhRVUZCTEVkQlFXRXNVMEZCUVR0WFFVTllMRU5CUVVFc1EwRkJSU3hwUWtGQlJpeERRVUZ2UWl4RFFVRkRMRmRCUVhKQ0xFTkJRV2xETEZGQlFXcERPMFZCUkZjN096WkNRVWRpTEU5QlFVRXNSMEZCVXl4VFFVRkJPMGxCUTFBc1NVRkJRU3hEUVVGUExFbEJRVU1zUTBGQlFTeEpRVUZTTzAxQlEwVXNTVUZCUXl4RFFVRkJMRWxCUVVRc1IwRkJVU3hKUVVGSkxGZEJRVW9zUTBGQlFUdGhRVU5TTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZETEVOQlFVRXNTVUZCYWtJc1JVRkdSanM3UlVGRVR6czdPenRIUVdwQ2IwSXNSVUZCUlN4RFFVRkRPenRCUVhkQ2JFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIExvYWRpbmdWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTG9hZGluZ1ZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTG9hZGluZ1ZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIExvYWRpbmdWaWV3KCkge1xuICAgIHJldHVybiBMb2FkaW5nVmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIExvYWRpbmdWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2xvYWRpbmcnKTtcblxuICBMb2FkaW5nVmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xvYWRpbmctdmlldyc7XG5cbiAgTG9hZGluZ1ZpZXcucHJvdG90eXBlLnVpID0ge1xuICAgIG1lc3NhZ2U6ICdbZGF0YS1kaXNwbGF5PW1lc3NhZ2VdJ1xuICB9O1xuXG4gIExvYWRpbmdWaWV3LnByb3RvdHlwZS51cGRhdGVNZXNzYWdlID0gZnVuY3Rpb24obXNnKSB7XG4gICAgcmV0dXJuIHRoaXMudWkubWVzc2FnZS50ZXh0KG1zZyk7XG4gIH07XG5cbiAgcmV0dXJuIExvYWRpbmdWaWV3O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBMb2FkaW5nVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwyeHZZV1JwYm1jdmRtbGxkM012YkdGNWIzVjBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlkyOXRjRzl1Wlc1MGN5OXNiMkZrYVc1bkwzWnBaWGR6TDJ4aGVXOTFkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRMEVzU1VGQlFTeFhRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3TzNkQ1FVTktMRkZCUVVFc1IwRkJWU3hQUVVGQkxFTkJRVkVzY1VKQlFWSTdPM2RDUVVOV0xGTkJRVUVzUjBGQlZ6czdkMEpCUlZnc1JVRkJRU3hIUVVORk8wbEJRVUVzVDBGQlFTeEZRVUZUTEhkQ1FVRlVPenM3ZDBKQlJVWXNZVUZCUVN4SFFVRmxMRk5CUVVNc1IwRkJSRHRYUVVOaUxFbEJRVU1zUTBGQlFTeEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVZvc1EwRkJhVUlzUjBGQmFrSTdSVUZFWVRzN096dEhRVkJUTEVWQlFVVXNRMEZCUXpzN1FVRlpOMElzVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1zcGluIGZhLXNwaW5uZXJcXFwiPjwvaT48cCBkYXRhLWRpc3BsYXk9XFxcIm1lc3NhZ2VcXFwiIGNsYXNzPVxcXCJtZXNzYWdlXFxcIj5MT0FESU5HPC9wPlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgQWJzdHJhY3RNb2RhbENvbXBvbmVudCwgTW9kYWxWaWV3LCBoaWRlTW9kYWxPbkhhc2hDaGFuZ2UsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Nb2RhbFZpZXcgPSByZXF1aXJlKCcuL3ZpZXcnKTtcblxuaGlkZU1vZGFsT25IYXNoQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3cubW9kYWxXaW5kb3cuaGlkZU1vZGFsKCk7XG59O1xuXG5BYnN0cmFjdE1vZGFsQ29tcG9uZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEFic3RyYWN0TW9kYWxDb21wb25lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEFic3RyYWN0TW9kYWxDb21wb25lbnQoKSB7XG4gICAgcmV0dXJuIEFic3RyYWN0TW9kYWxDb21wb25lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBBYnN0cmFjdE1vZGFsQ29tcG9uZW50LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gIH07XG5cbiAgQWJzdHJhY3RNb2RhbENvbXBvbmVudC5wcm90b3R5cGUuaGlkZU1vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kYWxWaWV3LmhpZGVNb2RhbCgpO1xuICB9O1xuXG4gIEFic3RyYWN0TW9kYWxDb21wb25lbnQucHJvdG90eXBlLnNob3dNb2RhbCA9IGZ1bmN0aW9uKGNvbnRlbnRWaWV3LCBtb2RhbFZpZXdPcHRpb25zKSB7XG4gICAgaWYgKG1vZGFsVmlld09wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgbW9kYWxWaWV3T3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLm1vZGFsVmlldyA9IG5ldyBNb2RhbFZpZXcobW9kYWxWaWV3T3B0aW9ucyk7XG4gICAgdGhpcy5tb2RhbFZpZXcub24oJ3Nob3cnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgX3RoaXMubW9kYWxWaWV3LmNvbnRlbnRSZWdpb24uc2hvdyhjb250ZW50Vmlldyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgaGlkZU1vZGFsT25IYXNoQ2hhbmdlKTtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5tb2RhbFdpbmRvdyA9IF90aGlzLm1vZGFsVmlldztcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHRoaXMubW9kYWxWaWV3Lm9uKCdkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhpZGVNb2RhbE9uSGFzaENoYW5nZSk7XG4gICAgICByZXR1cm4gZGVsZXRlIHdpbmRvdy5tb2RhbFdpbmRvdztcbiAgICB9KTtcbiAgICB0aGlzLm1vZGFsVmlldy5vbignaGlkZGVuOm1vZGFsJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgX3RoaXMub25Nb2RhbEhpZGRlbiA9PT0gXCJmdW5jdGlvblwiID8gX3RoaXMub25Nb2RhbEhpZGRlbigpIDogdm9pZCAwO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3codGhpcy5tb2RhbFZpZXcpO1xuICB9O1xuXG4gIHJldHVybiBBYnN0cmFjdE1vZGFsQ29tcG9uZW50O1xuXG59KShNYXJpb25ldHRlLlNlcnZpY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFic3RyYWN0TW9kYWxDb21wb25lbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMjF2WkdGc0wyRmljM1J5WVdOMExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2WTI5dGNHOXVaVzUwY3k5dGIyUmhiQzloWW5OMGNtRmpkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTeDNSRUZCUVR0RlFVRkJPenM3UVVGQlFTeFRRVUZCTEVkQlFWa3NUMEZCUVN4RFFVRlJMRkZCUVZJN08wRkJTMW9zY1VKQlFVRXNSMEZCZDBJc1UwRkJRVHRUUVVGSExFMUJRVTBzUTBGQlF5eFhRVUZYTEVOQlFVTXNVMEZCYmtJc1EwRkJRVHRCUVVGSU96dEJRVWRzUWpzN096czdPenR0UTBGRlNpeFZRVUZCTEVkQlFWa3NVMEZCUXl4UFFVRkVPenROUVVGRExGVkJRVlU3TzFkQlEzSkNMRWxCUVVNc1EwRkJRU3hUUVVGRUxFZEJRV0VzVDBGQlR5eERRVUZETzBWQlJGZzdPMjFEUVVkYUxGTkJRVUVzUjBGQlZ5eFRRVUZCTzFkQlExUXNTVUZCUXl4RFFVRkJMRk5CUVZNc1EwRkJReXhUUVVGWUxFTkJRVUU3UlVGRVV6czdiVU5CUjFnc1UwRkJRU3hIUVVGWExGTkJRVU1zVjBGQlJDeEZRVUZqTEdkQ1FVRmtPenROUVVGakxHMUNRVUZwUWpzN1NVRkhkRU1zU1VGQlF5eERRVUZCTEZOQlFVUXNSMEZCWVN4SlFVRkpMRk5CUVVvc1EwRkJZeXhuUWtGQlpEdEpRVWRpTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1JVRkJXQ3hEUVVGakxFMUJRV1FzUlVGQmMwSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk8xRkJRM0JDTEV0QlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRWHBDTEVOQlFTdENMRmRCUVM5Q08xRkJRMEVzVFVGQlRTeERRVUZETEdkQ1FVRlFMRU5CUVhkQ0xGbEJRWGhDTEVWQlFYTkRMSEZDUVVGMFF6dGxRVU5CTEUxQlFVMHNRMEZCUXl4WFFVRlFMRWRCUVhGQ0xFdEJRVU1zUTBGQlFUdE5RVWhHTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGMFFqdEpRVTFCTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1JVRkJXQ3hEUVVGakxGTkJRV1FzUlVGQmVVSXNVMEZCUVR0TlFVTjJRaXhOUVVGTkxFTkJRVU1zYlVKQlFWQXNRMEZCTWtJc1dVRkJNMElzUlVGQmVVTXNjVUpCUVhwRE8yRkJRMEVzVDBGQlR5eE5RVUZOTEVOQlFVTTdTVUZHVXl4RFFVRjZRanRKUVV0QkxFbEJRVU1zUTBGQlFTeFRRVUZUTEVOQlFVTXNSVUZCV0N4RFFVRmpMR05CUVdRc1JVRkJPRUlzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkJPekpFUVVGSExFdEJRVU1zUTBGQlFUdE5RVUZLTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVFNVFqdFhRVWRCTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZETEVOQlFVRXNVMEZCYWtJN1JVRndRazg3T3pzN1IwRlNkMElzVlVGQlZTeERRVUZET3p0QlFXZERhRVFzVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBNb2RhbENvbXBvbmVudCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbk1vZGFsQ29tcG9uZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE1vZGFsQ29tcG9uZW50LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBNb2RhbENvbXBvbmVudCgpIHtcbiAgICByZXR1cm4gTW9kYWxDb21wb25lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBNb2RhbENvbXBvbmVudC5wcm90b3R5cGUucmFkaW9FdmVudHMgPSB7XG4gICAgJ21vZGFsIHNob3cnOiAnc2hvd1ZpZXdQcm94eSdcbiAgfTtcblxuICBNb2RhbENvbXBvbmVudC5wcm90b3R5cGUuc2hvd1ZpZXdQcm94eSA9IGZ1bmN0aW9uKHZpZXcsIG1vZGFsVmlld09wdGlvbnMpIHtcbiAgICBpZiAobW9kYWxWaWV3T3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBtb2RhbFZpZXdPcHRpb25zID0ge307XG4gICAgfVxuICAgIHZpZXcub24oJ2hpZGUnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuc2hvd01vZGFsKHZpZXcsIG1vZGFsVmlld09wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBNb2RhbENvbXBvbmVudDtcblxufSkocmVxdWlyZSgnLi9hYnN0cmFjdCcpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RhbENvbXBvbmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyMXdiMjVsYm5SekwyMXZaR0ZzTDJOdmJYQnZibVZ1ZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMk52YlhCdmJtVnVkSE12Ylc5a1lXd3ZZMjl0Y0c5dVpXNTBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxHTkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3TWtKQlJVb3NWMEZCUVN4SFFVTkZPMGxCUVVFc1dVRkJRU3hGUVVGakxHVkJRV1E3T3pzeVFrRkZSaXhoUVVGQkxFZEJRV1VzVTBGQlF5eEpRVUZFTEVWQlFVOHNaMEpCUVZBN08wMUJRVThzYlVKQlFXbENPenRKUVVOeVF5eEpRVUZKTEVOQlFVTXNSVUZCVEN4RFFVRlJMRTFCUVZJc1JVRkJaMElzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkJPMlZCUVVjc1MwRkJReXhEUVVGQkxGTkJRVVFzUTBGQlFUdE5RVUZJTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGb1FqdFhRVU5CTEVsQlFVTXNRMEZCUVN4VFFVRkVMRU5CUVZjc1NVRkJXQ3hGUVVGcFFpeG5Ra0ZCYWtJN1JVRkdZVHM3T3p0SFFVeFpMRTlCUVVFc1EwRkJVU3haUVVGU096dEJRVmMzUWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKG1vZGFsQ3NzKSB7XG5idWYucHVzaChcIjxkaXYgcm9sZT1cXFwiZG9jdW1lbnRcXFwiIGRhdGEtcmVnaW9uPVxcXCJtb2RhbC1jb250ZW50XFxcIlwiICsgKGphZGUuY2xzKFttb2RhbENzc10sIFt0cnVlXSkpICsgXCI+PC9kaXY+XCIpO30uY2FsbCh0aGlzLFwibW9kYWxDc3NcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm1vZGFsQ3NzOnR5cGVvZiBtb2RhbENzcyE9PVwidW5kZWZpbmVkXCI/bW9kYWxDc3M6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIE1vZGFsVmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbk1vZGFsVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChNb2RhbFZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsVmlldygpIHtcbiAgICByZXR1cm4gTW9kYWxWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgTW9kYWxWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vbW9kYWxfdGVtcGxhdGUnKTtcblxuICBNb2RhbFZpZXcucHJvdG90eXBlLmF0dHJpYnV0ZXMgPSB7XG4gICAgcm9sZTogJ2RpYWxvZycsXG4gICAgdGFiaW5kZXg6ICctMSdcbiAgfTtcblxuICBNb2RhbFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdtb2RhbCBmYWRlJztcblxuICBNb2RhbFZpZXcucHJvdG90eXBlLnRlbXBsYXRlSGVscGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjc3MsIHNpemU7XG4gICAgc2l6ZSA9IHRoaXMub3B0aW9ucy5zaXplIHx8ICcnO1xuICAgIGNzcyA9ICdtb2RhbC1kaWFsb2cnO1xuICAgIGlmIChzaXplID09PSAnc21hbGwnKSB7XG4gICAgICBjc3MgKz0gJyBtb2RhbC1zbSc7XG4gICAgfVxuICAgIGlmIChzaXplID09PSAnbGFyZ2UnKSB7XG4gICAgICBjc3MgKz0gJyBtb2RhbC1sZyc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBtb2RhbENzczogY3NzXG4gICAgfTtcbiAgfTtcblxuICBNb2RhbFZpZXcucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgY29udGVudFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1tb2RhbC1jb250ZW50XSdcbiAgfTtcblxuICBNb2RhbFZpZXcucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnc2hvdy5icy5tb2RhbCc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlck1ldGhvZCgnc2hvdzptb2RhbCcpO1xuICAgIH0sXG4gICAgJ3Nob3duLmJzLm1vZGFsJzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmlnZ2VyTWV0aG9kKCdzaG93bjptb2RhbCcpO1xuICAgIH0sXG4gICAgJ2hpZGUuYnMubW9kYWwnOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJNZXRob2QoJ2hpZGU6bW9kYWwnKTtcbiAgICB9LFxuICAgICdoaWRkZW4uYnMubW9kYWwnOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJNZXRob2QoJ2hpZGRlbjptb2RhbCcpO1xuICAgIH0sXG4gICAgJ2xvYWRlZC5icy5tb2RhbCc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlck1ldGhvZCgnbG9hZGVkOm1vZGFsJyk7XG4gICAgfVxuICB9O1xuXG4gIE1vZGFsVmlldy5wcm90b3R5cGUub25TaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVsLm1vZGFsKHRoaXMub3B0aW9ucy5tb2RhbE9wdGlvbnMgfHwge30pO1xuICB9O1xuXG4gIE1vZGFsVmlldy5wcm90b3R5cGUuaGlkZU1vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVsLm1vZGFsKCdoaWRlJyk7XG4gIH07XG5cbiAgcmV0dXJuIE1vZGFsVmlldztcblxufSkoTWFyaW9uZXR0ZS5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RhbFZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMjF2WkdGc0wzWnBaWGN1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjF3YjI1bGJuUnpMMjF2WkdGc0wzWnBaWGN1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVWxCTEVsQlFVRXNVMEZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3p0elFrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEd0Q1FVRlNPenR6UWtGRlZpeFZRVUZCTEVkQlEwVTdTVUZCUVN4SlFVRkJMRVZCUVZVc1VVRkJWanRKUVVOQkxGRkJRVUVzUlVGQlZTeEpRVVJXT3pzN2MwSkJSMFlzVTBGQlFTeEhRVUZYT3p0elFrRkhXQ3hsUVVGQkxFZEJRV2xDTEZOQlFVRTdRVUZEWml4UlFVRkJPMGxCUVVFc1NVRkJRU3hIUVVGUExFbEJRVU1zUTBGQlFTeFBRVUZQTEVOQlFVTXNTVUZCVkN4SlFVRnBRanRKUVVONFFpeEhRVUZCTEVkQlFVMDdTVUZEVGl4SlFVRnpRaXhKUVVGQkxFdEJRVkVzVDBGQk9VSTdUVUZCUVN4SFFVRkJMRWxCUVU4c1dVRkJVRHM3U1VGRFFTeEpRVUZ6UWl4SlFVRkJMRXRCUVZFc1QwRkJPVUk3VFVGQlFTeEhRVUZCTEVsQlFVOHNXVUZCVURzN1FVRkRRU3hYUVVGUE8wMUJRVVVzVVVGQlFTeEZRVUZWTEVkQlFWbzdPMFZCVEZFN08zTkNRVTlxUWl4UFFVRkJMRWRCUTBVN1NVRkJRU3hoUVVGQkxFVkJRV1VzTmtKQlFXWTdPenR6UWtGRlJpeE5RVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVc5Q0xGTkJRVUU3WVVGQlJ5eEpRVUZETEVOQlFVRXNZVUZCUkN4RFFVRmxMRmxCUVdZN1NVRkJTQ3hEUVVGd1FqdEpRVU5CTEdkQ1FVRkJMRVZCUVc5Q0xGTkJRVUU3WVVGQlJ5eEpRVUZETEVOQlFVRXNZVUZCUkN4RFFVRmxMR0ZCUVdZN1NVRkJTQ3hEUVVSd1FqdEpRVVZCTEdWQlFVRXNSVUZCYjBJc1UwRkJRVHRoUVVGSExFbEJRVU1zUTBGQlFTeGhRVUZFTEVOQlFXVXNXVUZCWmp0SlFVRklMRU5CUm5CQ08wbEJSMEVzYVVKQlFVRXNSVUZCYjBJc1UwRkJRVHRoUVVGSExFbEJRVU1zUTBGQlFTeGhRVUZFTEVOQlFXVXNZMEZCWmp0SlFVRklMRU5CU0hCQ08wbEJTVUVzYVVKQlFVRXNSVUZCYjBJc1UwRkJRVHRoUVVGSExFbEJRVU1zUTBGQlFTeGhRVUZFTEVOQlFXVXNZMEZCWmp0SlFVRklMRU5CU25CQ096czdjMEpCVFVZc1RVRkJRU3hIUVVGUkxGTkJRVUU3VjBGRFRpeEpRVUZETEVOQlFVRXNSMEZCUnl4RFFVRkRMRXRCUVV3c1EwRkJXU3hKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEZsQlFWUXNTVUZCZVVJc1JVRkJja003UlVGRVRUczdjMEpCUjFJc1UwRkJRU3hIUVVGWExGTkJRVUU3VjBGRFZDeEpRVUZETEVOQlFVRXNSMEZCUnl4RFFVRkRMRXRCUVV3c1EwRkJWeXhOUVVGWU8wVkJSRk03T3pzN1IwRTVRbGNzVlVGQlZTeERRVUZET3p0QlFXMURia01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBjcm9zc0RvbWFpblJvb3QsIHByb3hpZWRTeW5jO1xuXG5jcm9zc0RvbWFpblJvb3QgPSAnaHR0cDovLzE5Mi4xNjguMzMuMzM6MzAwMCc7XG5cbnByb3hpZWRTeW5jID0gQmFja2JvbmUuc3luYztcblxuQmFja2JvbmUuc3luYyA9IChmdW5jdGlvbihfdGhpcykge1xuICByZXR1cm4gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnVybCkge1xuICAgICAgb3B0aW9ucy51cmwgPSBjcm9zc0RvbWFpblJvb3QgKyBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnVybC5zdWJzdHJpbmcoMCwgNikgIT09IGNyb3NzRG9tYWluUm9vdC5zdWJzdHJpbmcoMCwgNikpIHtcbiAgICAgIG9wdGlvbnMudXJsID0gY3Jvc3NEb21haW5Sb290ICsgb3B0aW9ucy51cmw7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5jcm9zc0RvbWFpbikge1xuICAgICAgb3B0aW9ucy5jcm9zc0RvbWFpbiA9IHRydWU7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy54aHJGaWVsZHMpIHtcbiAgICAgIG9wdGlvbnMueGhyRmllbGRzID0ge1xuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwcm94aWVkU3luYyhtZXRob2QsIG1vZGVsLCBvcHRpb25zKTtcbiAgfTtcbn0pKHRoaXMpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjI1bWFXY3ZZMjl5Y3k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMk52Ym1acFp5OWpiM0p6TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZEUVN4SlFVRkJPenRCUVVGQkxHVkJRVUVzUjBGQmEwSTdPMEZCUld4Q0xGZEJRVUVzUjBGQll5eFJRVUZSTEVOQlFVTTdPMEZCUlhaQ0xGRkJRVkVzUTBGQlF5eEpRVUZVTEVkQlFXZENMRU5CUVVFc1UwRkJRU3hMUVVGQk8xTkJRVUVzVTBGQlF5eE5RVUZFTEVWQlFWTXNTMEZCVkN4RlFVRm5RaXhQUVVGb1FqczdUVUZCWjBJc1ZVRkJWVHM3U1VGRmVFTXNTVUZCUnl4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGYU8wMUJRMFVzVDBGQlR5eERRVUZETEVkQlFWSXNSMEZCWXl4bFFVRkJMRWRCUVd0Q0xFTkJRVU1zUTBGQlF5eE5RVUZHTEVOQlFWTXNTMEZCVkN4RlFVRm5RaXhMUVVGb1FpeERRVUZzUWl4SlFVRTBReXhSUVVGQkxFTkJRVUVzUlVGRU5VUTdTMEZCUVN4TlFVZExMRWxCUVVjc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZhTEVOQlFYTkNMRU5CUVhSQ0xFVkJRWGxDTEVOQlFYcENMRU5CUVVFc1MwRkJLMElzWlVGQlpTeERRVUZETEZOQlFXaENMRU5CUVRCQ0xFTkJRVEZDTEVWQlFUWkNMRU5CUVRkQ0xFTkJRV3hETzAxQlEwZ3NUMEZCVHl4RFFVRkRMRWRCUVZJc1IwRkJZeXhsUVVGQkxFZEJRV3RDTEU5QlFVOHNRMEZCUXl4SlFVUnlRenM3U1VGSFRDeEpRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRmRCUVZvN1RVRkRSU3hQUVVGUExFTkJRVU1zVjBGQlVpeEhRVUZ6UWl4TFFVUjRRanM3U1VGSFFTeEpRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRk5CUVZvN1RVRkRSU3hQUVVGUExFTkJRVU1zVTBGQlVpeEhRVUZ2UWp0UlFVRkZMR1ZCUVVFc1JVRkJhVUlzU1VGQmJrSTdVVUZFZEVJN08wRkJSMEVzVjBGQlR5eFhRVUZCTEVOQlFWa3NUVUZCV2l4RlFVRnZRaXhMUVVGd1FpeEZRVUV5UWl4UFFVRXpRanRGUVdSUE8wRkJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVNKOVxuIiwicmVxdWlyZSgnLi9qd3QnKTtcblxucmVxdWlyZSgnLi9jb3JzJyk7XG5cbnJlcXVpcmUoJy4vbWFyaW9uZXR0ZScpO1xuXG5yZXF1aXJlKCcuL3dpbmRvdycpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjI1bWFXY3ZhVzVrWlhndVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjI1bWFXY3ZhVzVrWlhndVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVOQkxFOUJRVUVzUTBGQlVTeFBRVUZTT3p0QlFVTkJMRTlCUVVFc1EwRkJVU3hSUVVGU096dEJRVU5CTEU5QlFVRXNRMEZCVVN4alFVRlNPenRCUVVOQkxFOUJRVUVzUTBGQlVTeFZRVUZTSW4wPVxuIiwiJC5hamF4U2V0dXAoe1xuICBiZWZvcmVTZW5kOiBmdW5jdGlvbih4aHIpIHtcbiAgICB2YXIgdG9rZW47XG4gICAgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0pXVCAnICsgdG9rZW4pO1xuICAgIH1cbiAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOWpiMjVtYVdjdmFuZDBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdlkyOXVabWxuTDJwM2RDNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlEwRXNRMEZCUXl4RFFVRkRMRk5CUVVZc1EwRkRSVHRGUVVGQkxGVkJRVUVzUlVGQldTeFRRVUZETEVkQlFVUTdRVUZEVml4UlFVRkJPMGxCUVVFc1MwRkJRU3hIUVVGUkxGbEJRVmtzUTBGQlF5eFBRVUZpTEVOQlFYRkNMRTlCUVhKQ08wbEJRMUlzU1VGQmVVUXNTMEZCZWtRN1RVRkJRU3hIUVVGSExFTkJRVU1zWjBKQlFVb3NRMEZCY1VJc1pVRkJja0lzUlVGQmMwTXNUVUZCUVN4SFFVRlRMRXRCUVM5RExFVkJRVUU3TzBWQlJsVXNRMEZCV2p0RFFVUkdJbjA9XG4iLCJNYXJpb25ldHRlLkJlaGF2aW9ycy5iZWhhdmlvcnNMb29rdXAgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJlcXVpcmUoJy4uL2JlaGF2aW9ycycpO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5amIyNW1hV2N2YldGeWFXOXVaWFIwWlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMk52Ym1acFp5OXRZWEpwYjI1bGRIUmxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hWUVVGVkxFTkJRVU1zVTBGQlV5eERRVUZETEdWQlFYSkNMRWRCUVhWRExGTkJRVUU3VTBGQlJ5eFBRVUZCTEVOQlFWRXNZMEZCVWp0QlFVRklJbjA9XG4iLCJ3aW5kb3cuX3MgPSByZXF1aXJlKCd1bmRlcnNjb3JlLnN0cmluZycpO1xuXG53aW5kb3cuUmFkaW8gPSBCYWNrYm9uZS5SYWRpbztcblxuaWYgKHdpbmRvdy5nbG9iYWwpIHtcbiAgd2luZG93Lmdsb2JhbC5CYWNrYm9uZSA9IEJhY2tib25lO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzlqYjI1bWFXY3ZkMmx1Wkc5M0xtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2WTI5dVptbG5MM2RwYm1SdmR5NWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlIwRXNUVUZCVFN4RFFVRkRMRVZCUVZBc1IwRkJXU3hQUVVGQkxFTkJRVkVzYlVKQlFWSTdPMEZCUjFvc1RVRkJUU3hEUVVGRExFdEJRVkFzUjBGQlpTeFJRVUZSTEVOQlFVTTdPMEZCUjNoQ0xFbEJRVWNzVFVGQlRTeERRVUZETEUxQlFWWTdSVUZEUlN4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRV1FzUjBGQmVVSXNVMEZFTTBJaWZRPT1cbiIsInZhciBBcHAsIEFwcExheW91dCwgQnJlYWRjcnVtYkNvbXBvbmVudCwgQ29uZmlybUNvbXBvbmVudCwgRGF0YXNldFJvdXRlciwgRGV4aWVTZXJ2aWNlLCBGbGFzaENvbXBvbmVudCwgSGVhZGVyQ29tcG9uZW50LCBMb2FkaW5nQ29tcG9uZW50LCBNYWluUm91dGVyLCBNb2RhbENvbXBvbmVudCwgT250b2xvZ3lSb3V0ZXIsIE92ZXJsYXlDb21wb25lbnQsIGRleGllQ29uZmlndXJhdGlvbjtcblxucmVxdWlyZSgnLi9jb25maWcnKTtcblxuQXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcblxuQXBwTGF5b3V0ID0gcmVxdWlyZSgnLi9hcHBsaWNhdGlvbi92aWV3cy9sYXlvdXQnKTtcblxucmVxdWlyZSgnaG5fZW50aXRpZXMvbGliL2NvbmZpZycpO1xuXG5EZXhpZVNlcnZpY2UgPSByZXF1aXJlKCcuL21vZHVsZXMvZGIvc2VydmljZScpO1xuXG5IZWFkZXJDb21wb25lbnQgPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvaGVhZGVyL2NvbXBvbmVudCcpO1xuXG5uZXcgSGVhZGVyQ29tcG9uZW50KHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQuaGVhZGVyXG59KTtcblxuQnJlYWRjcnVtYkNvbXBvbmVudCA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9icmVhZGNydW1iL2NvbXBvbmVudCcpO1xuXG5uZXcgQnJlYWRjcnVtYkNvbXBvbmVudCh7XG4gIGNvbnRhaW5lcjogQXBwTGF5b3V0LmJyZWFkY3J1bWJcbn0pO1xuXG5Nb2RhbENvbXBvbmVudCA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9tb2RhbC9jb21wb25lbnQnKTtcblxubmV3IE1vZGFsQ29tcG9uZW50KHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQubW9kYWxcbn0pO1xuXG5Db25maXJtQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL2NvbmZpcm0vY29tcG9uZW50Jyk7XG5cbm5ldyBDb25maXJtQ29tcG9uZW50KHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQubW9kYWxcbn0pO1xuXG5Mb2FkaW5nQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL2xvYWRpbmcvY29tcG9uZW50Jyk7XG5cbm5ldyBMb2FkaW5nQ29tcG9uZW50KHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQubG9hZGluZ1xufSk7XG5cbk92ZXJsYXlDb21wb25lbnQgPSByZXF1aXJlKCdobl9vdmVybGF5L2xpYi9jb21wb25lbnQnKTtcblxuRmxhc2hDb21wb25lbnQgPSByZXF1aXJlKCdobl9mbGFzaC9saWIvY29tcG9uZW50Jyk7XG5cbm5ldyBPdmVybGF5Q29tcG9uZW50KHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQub3ZlcmxheVxufSk7XG5cbm5ldyBGbGFzaENvbXBvbmVudCh7XG4gIGNvbnRhaW5lcjogQXBwTGF5b3V0LmZsYXNoXG59KTtcblxucmVxdWlyZSgnLi9tb2R1bGVzL3NlYXJjaC9mYWN0b3J5Jyk7XG5cbnJlcXVpcmUoJy4vbW9kdWxlcy9kYXRhcG9pbnQvZmFjdG9yeScpO1xuXG5yZXF1aXJlKCcuL21vZHVsZXMvZmFjZXQvZmFjdG9yeScpO1xuXG5yZXF1aXJlKCcuL21vZHVsZXMva25vd2xlZGdlX3J1bGUvZmFjdG9yeScpO1xuXG5yZXF1aXJlKCcuL21vZHVsZXMvdmlld2VyX3J1bGUvZmFjdG9yeScpO1xuXG5EYXRhc2V0Um91dGVyID0gcmVxdWlyZSgnLi9tb2R1bGVzL2RhdGFzZXQvcm91dGVyJyk7XG5cbk1haW5Sb3V0ZXIgPSByZXF1aXJlKCcuL21vZHVsZXMvbWFpbi9yb3V0ZXInKTtcblxuT250b2xvZ3lSb3V0ZXIgPSByZXF1aXJlKCcuL21vZHVsZXMvb250b2xvZ3kvcm91dGVyJyk7XG5cbm5ldyBEYXRhc2V0Um91dGVyKHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQubWFpblxufSk7XG5cbm5ldyBNYWluUm91dGVyKHtcbiAgY29udGFpbmVyOiBBcHBMYXlvdXQubWFpblxufSk7XG5cbm5ldyBPbnRvbG9neVJvdXRlcih7XG4gIGNvbnRhaW5lcjogQXBwTGF5b3V0Lm1haW5cbn0pO1xuXG5kZXhpZUNvbmZpZ3VyYXRpb24gPSB7XG4gIGRiOiAnZGV4aWVfZGF0YWJhc2VfYWxwaGFfMTInLFxuICBzY2hlbWE6IFtcbiAgICB7XG4gICAgICBuYW1lOiAnZmFjZXRzJyxcbiAgICAgIGF0dHJzOiAnaWQsIGRhdGFzZXRfaWQsIGxhYmVsJ1xuICAgIH0sIHtcbiAgICAgIG5hbWU6ICdkYXRhc2V0cycsXG4gICAgICBhdHRyczogJ2lkLCBsYWJlbCdcbiAgICB9LCB7XG4gICAgICBuYW1lOiAnZGF0YXBvaW50cycsXG4gICAgICBhdHRyczogJ2lkLCBkYXRhc2V0X2lkJ1xuICAgIH0sIHtcbiAgICAgIG5hbWU6ICdvbnRvbG9naWVzJyxcbiAgICAgIGF0dHJzOiAnaWQsIHByZWZpeCdcbiAgICB9LCB7XG4gICAgICBuYW1lOiAna25vd2xlZGdlX3J1bGVzJyxcbiAgICAgIGF0dHJzOiAnaWQsIGRhdGFzZXRfaWQnXG4gICAgfSwge1xuICAgICAgbmFtZTogJ3ZpZXdlcl9ydWxlcycsXG4gICAgICBhdHRyczogJ2lkLCBkYXRhc2V0X2lkJ1xuICAgIH1cbiAgXVxufTtcblxuJChkb2N1bWVudCkub24oJ3JlYWR5JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBuZXcgQXBwKCk7XG4gICAgcmV0dXJuIG5ldyBEZXhpZVNlcnZpY2UoZGV4aWVDb25maWd1cmF0aW9uKTtcbiAgfTtcbn0pKHRoaXMpKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dFlXNXBabVZ6ZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjFoYm1sbVpYTjBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRlBRU3hKUVVGQk96dEJRVUZCTEU5QlFVRXNRMEZCVVN4VlFVRlNPenRCUVVkQkxFZEJRVUVzUjBGQlRTeFBRVUZCTEVOQlFWRXNUMEZCVWpzN1FVRkRUaXhUUVVGQkxFZEJRVmtzVDBGQlFTeERRVUZSTERSQ1FVRlNPenRCUVVkYUxFOUJRVUVzUTBGQlVTeDNRa0ZCVWpzN1FVRlBRU3haUVVGQkxFZEJRV1VzVDBGQlFTeERRVUZSTEhOQ1FVRlNPenRCUVZObUxHVkJRVUVzUjBGQmEwSXNUMEZCUVN4RFFVRlJMQ3RDUVVGU096dEJRVU5zUWl4SlFVRkpMR1ZCUVVvc1EwRkJiMEk3UlVGQlJTeFRRVUZCTEVWQlFWY3NVMEZCVXl4RFFVRkRMRTFCUVhaQ08wTkJRWEJDT3p0QlFVZEJMRzFDUVVGQkxFZEJRWE5DTEU5QlFVRXNRMEZCVVN4dFEwRkJVanM3UVVGRGRFSXNTVUZCU1N4dFFrRkJTaXhEUVVGM1FqdEZRVUZGTEZOQlFVRXNSVUZCVnl4VFFVRlRMRU5CUVVNc1ZVRkJka0k3UTBGQmVFSTdPMEZCUjBFc1kwRkJRU3hIUVVGcFFpeFBRVUZCTEVOQlFWRXNPRUpCUVZJN08wRkJRMnBDTEVsQlFVa3NZMEZCU2l4RFFVRnRRanRGUVVGRkxGTkJRVUVzUlVGQlZ5eFRRVUZUTEVOQlFVTXNTMEZCZGtJN1EwRkJia0k3TzBGQlIwRXNaMEpCUVVFc1IwRkJiVUlzVDBGQlFTeERRVUZSTEdkRFFVRlNPenRCUVVOdVFpeEpRVUZKTEdkQ1FVRktMRU5CUVhGQ08wVkJRVVVzVTBGQlFTeEZRVUZYTEZOQlFWTXNRMEZCUXl4TFFVRjJRanREUVVGeVFqczdRVUZIUVN4blFrRkJRU3hIUVVGdFFpeFBRVUZCTEVOQlFWRXNaME5CUVZJN08wRkJRMjVDTEVsQlFVa3NaMEpCUVVvc1EwRkJjVUk3UlVGQlJTeFRRVUZCTEVWQlFWY3NVMEZCVXl4RFFVRkRMRTlCUVhaQ08wTkJRWEpDT3p0QlFVZEJMR2RDUVVGQkxFZEJRWE5DTEU5QlFVRXNRMEZCVVN3d1FrRkJVanM3UVVGRGRFSXNZMEZCUVN4SFFVRnpRaXhQUVVGQkxFTkJRVkVzZDBKQlFWSTdPMEZCUTNSQ0xFbEJRVWtzWjBKQlFVb3NRMEZCY1VJN1JVRkJSU3hUUVVGQkxFVkJRVmNzVTBGQlV5eERRVUZETEU5QlFYWkNPME5CUVhKQ096dEJRVU5CTEVsQlFVa3NZMEZCU2l4RFFVRnRRanRGUVVGRkxGTkJRVUVzUlVGQlZ5eFRRVUZUTEVOQlFVTXNTMEZCZGtJN1EwRkJia0k3TzBGQlMwRXNUMEZCUVN4RFFVRlJMREJDUVVGU096dEJRVU5CTEU5QlFVRXNRMEZCVVN3MlFrRkJVanM3UVVGRFFTeFBRVUZCTEVOQlFWRXNlVUpCUVZJN08wRkJRMEVzVDBGQlFTeERRVUZSTEd0RFFVRlNPenRCUVVOQkxFOUJRVUVzUTBGQlVTd3JRa0ZCVWpzN1FVRlJRU3hoUVVGQkxFZEJRV3RDTEU5QlFVRXNRMEZCVVN3d1FrRkJVanM3UVVGRGJFSXNWVUZCUVN4SFFVRnJRaXhQUVVGQkxFTkJRVkVzZFVKQlFWSTdPMEZCUTJ4Q0xHTkJRVUVzUjBGQmEwSXNUMEZCUVN4RFFVRlJMREpDUVVGU096dEJRVU5zUWl4SlFVRkpMR0ZCUVVvc1EwRkJhMEk3UlVGQlJTeFRRVUZCTEVWQlFWY3NVMEZCVXl4RFFVRkRMRWxCUVhaQ08wTkJRV3hDT3p0QlFVTkJMRWxCUVVrc1ZVRkJTaXhEUVVGbE8wVkJRVVVzVTBGQlFTeEZRVUZYTEZOQlFWTXNRMEZCUXl4SlFVRjJRanREUVVGbU96dEJRVU5CTEVsQlFVa3NZMEZCU2l4RFFVRnRRanRGUVVGRkxGTkJRVUVzUlVGQlZ5eFRRVUZUTEVOQlFVTXNTVUZCZGtJN1EwRkJia0k3TzBGQlQwRXNhMEpCUVVFc1IwRkRSVHRGUVVGQkxFVkJRVUVzUlVGQlVTeDVRa0ZCVWp0RlFVbEJMRTFCUVVFc1JVRkJVenRKUVVOUU8wMUJRVVVzU1VGQlFTeEZRVUZOTEZGQlFWSTdUVUZCYjBJc1MwRkJRU3hGUVVGUExIVkNRVUV6UWp0TFFVUlBMRVZCUlZBN1RVRkJSU3hKUVVGQkxFVkJRVTBzVlVGQlVqdE5RVUZ2UWl4TFFVRkJMRVZCUVU4c1YwRkJNMEk3UzBGR1R5eEZRVWRRTzAxQlFVVXNTVUZCUVN4RlFVRk5MRmxCUVZJN1RVRkJjMElzUzBGQlFTeEZRVUZQTEdkQ1FVRTNRanRMUVVoUExFVkJTVkE3VFVGQlJTeEpRVUZCTEVWQlFVMHNXVUZCVWp0TlFVRnpRaXhMUVVGQkxFVkJRVThzV1VGQk4wSTdTMEZLVHl4RlFVdFFPMDFCUVVVc1NVRkJRU3hGUVVGTkxHbENRVUZTTzAxQlFUSkNMRXRCUVVFc1JVRkJUeXhuUWtGQmJFTTdTMEZNVHl4RlFVMVFPMDFCUVVVc1NVRkJRU3hGUVVGTkxHTkJRVkk3VFVGQmQwSXNTMEZCUVN4RlFVRlBMR2RDUVVFdlFqdExRVTVQTzBkQlNsUTdPenRCUVdkQ1JpeERRVUZCTEVOQlFVVXNVVUZCUml4RFFVRlhMRU5CUVVNc1JVRkJXaXhEUVVGbExFOUJRV1lzUlVGQmQwSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1UwRkJRU3hUUVVGQk8wbEJTWFJDTEVsQlFVa3NSMEZCU2l4RFFVRkJPMWRCUTBFc1NVRkJTU3haUVVGS0xFTkJRV2xDTEd0Q1FVRnFRanRGUVV4elFqdEJRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJlRUlpZlE9PVxuIiwidmFyIEFic3RyYWN0UnVsZUNvbGxlY3Rpb24sIEFic3RyYWN0UnVsZU1vZGVsLCBEZWZpbml0aW9uQ29sbGVjdGlvbiwgRGVmaW5pdGlvbk1vZGVsLCBpc1N1YnN0cmluZ09mLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkRlZmluaXRpb25Nb2RlbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEZWZpbml0aW9uTW9kZWwsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERlZmluaXRpb25Nb2RlbCgpIHtcbiAgICB0aGlzLmV2YWx1YXRlQWN0aW9uID0gYmluZCh0aGlzLmV2YWx1YXRlQWN0aW9uLCB0aGlzKTtcbiAgICByZXR1cm4gRGVmaW5pdGlvbk1vZGVsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGVmaW5pdGlvbk1vZGVsLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICBvcmRlcjogbnVsbCxcbiAgICBzb3VyY2U6ICdAaWQnLFxuICAgIG9wZXJhdGlvbjogJ2VuZHNfd2l0aCcsXG4gICAgdmFsdWU6ICcnLFxuICAgIGFjdGlvbjogJycsXG4gICAgYXBwbGllZDogZmFsc2VcbiAgfTtcblxuICBEZWZpbml0aW9uTW9kZWwucHJvdG90eXBlLmlzQmxvY2tpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5nZXQoJ2FjdGlvbicpKSA9PT0gJ2ZpbHRlcicgfHwgcmVmID09PSAnYmxvY2snO1xuICB9O1xuXG4gIERlZmluaXRpb25Nb2RlbC5wcm90b3R5cGUuZXZhbHVhdGVBY3Rpb24gPSBmdW5jdGlvbih0YXJnZXQsIHRhcmdldF9vYmplY3QsIHRhcmdldF9wcm9wZXJ0eSwgZGF0YSkge1xuICAgIHZhciBpbmRleCwgaW5kZXhfZnJvbV9zcGxpdF9zb3VyY2UsIG1hdGNoX3JlZ2V4LCBtYXRjaF9zb3VyY2UsIHJlcGxhY2Vfc291cmNlLCByZXBsYWNlX3RleHQsIHJlcGxhY2Vfd2l0aCwgcmVzdWx0LCBzcGxpdCwgdGFyZ2V0X29iamVjdF9kYXRhO1xuICAgIHRhcmdldF9vYmplY3RfZGF0YSA9IHRhcmdldC5nZXQodGFyZ2V0X29iamVjdCk7XG4gICAgaWYgKHRoaXMuZ2V0KCdhY3Rpb24nKSA9PT0gJ2Jsb2NrJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoJ2FjdGlvbicpID09PSAnZmlsdGVyJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoJ2FjdGlvbicpID09PSAnbGl0ZXJhbCcpIHtcbiAgICAgIHRhcmdldF9vYmplY3RfZGF0YVt0YXJnZXRfcHJvcGVydHldID0gdGhpcy5nZXQoJ2xpdGVyYWxfdGV4dCcpO1xuICAgICAgdGFyZ2V0LnNldCh0YXJnZXRfb2JqZWN0LCB0YXJnZXRfb2JqZWN0X2RhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoJ2FjdGlvbicpID09PSAncmVwbGFjZScpIHtcbiAgICAgIHJlcGxhY2Vfc291cmNlID0gZGF0YVt0aGlzLmdldCgncmVwbGFjZV9zb3VyY2UnKV07XG4gICAgICByZXBsYWNlX3RleHQgPSB0aGlzLmdldCgncmVwbGFjZV90ZXh0Jyk7XG4gICAgICByZXBsYWNlX3dpdGggPSB0aGlzLmdldCgncmVwbGFjZV93aXRoJyk7XG4gICAgICByZXN1bHQgPSByZXBsYWNlX3NvdXJjZS5yZXBsYWNlKHJlcGxhY2VfdGV4dCwgcmVwbGFjZV93aXRoKTtcbiAgICAgIHRhcmdldF9vYmplY3RfZGF0YVt0YXJnZXRfcHJvcGVydHldID0gcmVzdWx0O1xuICAgICAgdGFyZ2V0LnNldCh0YXJnZXRfb2JqZWN0LCB0YXJnZXRfb2JqZWN0X2RhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoJ2FjdGlvbicpID09PSAnaW5kZXhfZnJvbV9zcGxpdCcpIHtcbiAgICAgIGluZGV4X2Zyb21fc3BsaXRfc291cmNlID0gZGF0YVt0aGlzLmdldCgnaW5kZXhfZnJvbV9zcGxpdF9zb3VyY2UnKV07XG4gICAgICBzcGxpdCA9IGluZGV4X2Zyb21fc3BsaXRfc291cmNlLnNwbGl0KHRoaXMuZ2V0KCdpbmRleF9mcm9tX3NwbGl0X2RlbGltaXRlcicpKTtcbiAgICAgIHJlc3VsdCA9IHNwbGl0W3RoaXMuZ2V0KCdpbmRleF9mcm9tX3NwbGl0X2luZGV4JyldO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICB0YXJnZXRfb2JqZWN0X2RhdGFbdGFyZ2V0X3Byb3BlcnR5XSA9IHJlc3VsdDtcbiAgICAgICAgdGFyZ2V0LnNldCh0YXJnZXRfb2JqZWN0LCB0YXJnZXRfb2JqZWN0X2RhdGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoJ2FjdGlvbicpID09PSAnaW5kZXhfZnJvbV9yZWdleF9tYXRjaCcpIHtcbiAgICAgIG1hdGNoX3NvdXJjZSA9IGRhdGFbdGhpcy5nZXQoJ2luZGV4X2Zyb21fcmVnZXhfbWF0Y2hfc291cmNlJyldO1xuICAgICAgbWF0Y2hfcmVnZXggPSB0aGlzLmdldCgnaW5kZXhfZnJvbV9yZWdleF9tYXRjaF9yZWdleCcpO1xuICAgICAgaW5kZXggPSB0aGlzLmdldCgnaW5kZXhfZnJvbV9yZWdleF9tYXRjaF9pbmRleCcpO1xuICAgICAgcmVzdWx0ID0gbmV3IFJlZ0V4cChtYXRjaF9yZWdleCkuZXhlYyhtYXRjaF9zb3VyY2UpO1xuICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbaW5kZXhdKSB7XG4gICAgICAgIHRhcmdldF9vYmplY3RfZGF0YVt0YXJnZXRfcHJvcGVydHldID0gcmVzdWx0W2luZGV4XTtcbiAgICAgICAgdGFyZ2V0LnNldCh0YXJnZXRfb2JqZWN0LCB0YXJnZXRfb2JqZWN0X2RhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRGVmaW5pdGlvbk1vZGVsO1xuXG59KShCYWNrYm9uZS5SZWxhdGlvbmFsTW9kZWwpO1xuXG5EZWZpbml0aW9uQ29sbGVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEZWZpbml0aW9uQ29sbGVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGVmaW5pdGlvbkNvbGxlY3Rpb24oKSB7XG4gICAgdGhpcy5ldmFsdWF0ZSA9IGJpbmQodGhpcy5ldmFsdWF0ZSwgdGhpcyk7XG4gICAgcmV0dXJuIERlZmluaXRpb25Db2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGVmaW5pdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gRGVmaW5pdGlvbk1vZGVsO1xuXG4gIERlZmluaXRpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5jb21wYXJhdG9yID0gJ29yZGVyJztcblxuICBEZWZpbml0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbih0YXJnZXQsIHRhcmdldF9vYmplY3QsIHRhcmdldF9wcm9wZXJ0eSkge1xuICAgIHZhciBjb25kaXRpb25NYXRjaGVkLCBkYXRhLCBkZWZpbml0aW9uLCBpLCBsZW4sIG9wZXJhdGlvbiwgcmVmLCBzb3VyY2UsIHZhbHVlO1xuICAgIGNvbmRpdGlvbk1hdGNoZWQgPSBmYWxzZTtcbiAgICByZWYgPSB0aGlzLm1vZGVscztcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlZmluaXRpb24gPSByZWZbaV07XG4gICAgICBkYXRhID0gdGFyZ2V0LmdldCgnZGF0YScpO1xuICAgICAgc291cmNlID0gZGF0YVtkZWZpbml0aW9uLmdldCgnc291cmNlJyldO1xuICAgICAgb3BlcmF0aW9uID0gZGVmaW5pdGlvbi5nZXQoJ29wZXJhdGlvbicpO1xuICAgICAgdmFsdWUgPSBkZWZpbml0aW9uLmdldCgndmFsdWUnKTtcbiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdleGlzdHMnKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICBjb25kaXRpb25NYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICBkZWZpbml0aW9uLmV2YWx1YXRlQWN0aW9uKHRhcmdldCwgdGFyZ2V0X29iamVjdCwgdGFyZ2V0X3Byb3BlcnR5LCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5pc0Jsb2NraW5nKCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2V4YWN0X21hdGNoJykge1xuICAgICAgICBpZiAoc291cmNlID09PSB2YWx1ZSkge1xuICAgICAgICAgIGNvbmRpdGlvbk1hdGNoZWQgPSB0cnVlO1xuICAgICAgICAgIGRlZmluaXRpb24uZXZhbHVhdGVBY3Rpb24odGFyZ2V0LCB0YXJnZXRfb2JqZWN0LCB0YXJnZXRfcHJvcGVydHksIGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkZWZpbml0aW9uLmlzQmxvY2tpbmcoKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3BlcmF0aW9uID09PSAnc3RhcnRzX3dpdGgnKSB7XG4gICAgICAgIGlmIChfcy5zdGFydHNXaXRoKHNvdXJjZSwgdmFsdWUpKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgZGVmaW5pdGlvbi5ldmFsdWF0ZUFjdGlvbih0YXJnZXQsIHRhcmdldF9vYmplY3QsIHRhcmdldF9wcm9wZXJ0eSwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRlZmluaXRpb24uaXNCbG9ja2luZygpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjb250YWlucycpIHtcbiAgICAgICAgaWYgKF9zLmluY2x1ZGUoc291cmNlLnRvTG93ZXJDYXNlKCksIHZhbHVlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgZGVmaW5pdGlvbi5ldmFsdWF0ZUFjdGlvbih0YXJnZXQsIHRhcmdldF9vYmplY3QsIHRhcmdldF9wcm9wZXJ0eSwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRlZmluaXRpb24uaXNCbG9ja2luZygpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjb250YWluc19jYXNlX3NlbnNpdGl2ZScpIHtcbiAgICAgICAgaWYgKF9zLmluY2x1ZGUoc291cmNlLCB2YWx1ZSkpIHtcbiAgICAgICAgICBjb25kaXRpb25NYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICBkZWZpbml0aW9uLmV2YWx1YXRlQWN0aW9uKHRhcmdldCwgdGFyZ2V0X29iamVjdCwgdGFyZ2V0X3Byb3BlcnR5LCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5pc0Jsb2NraW5nKCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2RvZXNfbm90X2NvbnRhaW4nKSB7XG4gICAgICAgIGlmICghX3MuaW5jbHVkZShzb3VyY2UudG9Mb3dlckNhc2UoKSwgdmFsdWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBjb25kaXRpb25NYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICBkZWZpbml0aW9uLmV2YWx1YXRlQWN0aW9uKHRhcmdldCwgdGFyZ2V0X29iamVjdCwgdGFyZ2V0X3Byb3BlcnR5LCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5pc0Jsb2NraW5nKCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2VuZHNfd2l0aCcpIHtcbiAgICAgICAgaWYgKF9zLmVuZHNXaXRoKHNvdXJjZSwgdmFsdWUpKSB7XG4gICAgICAgICAgY29uZGl0aW9uTWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgZGVmaW5pdGlvbi5ldmFsdWF0ZUFjdGlvbih0YXJnZXQsIHRhcmdldF9vYmplY3QsIHRhcmdldF9wcm9wZXJ0eSwgZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRlZmluaXRpb24uaXNCbG9ja2luZygpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbmRpdGlvbk1hdGNoZWQ7XG4gIH07XG5cbiAgcmV0dXJuIERlZmluaXRpb25Db2xsZWN0aW9uO1xuXG59KShCYWNrYm9uZS5Db2xsZWN0aW9uKTtcblxuQWJzdHJhY3RSdWxlTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQWJzdHJhY3RSdWxlTW9kZWwsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEFic3RyYWN0UnVsZU1vZGVsKCkge1xuICAgIHJldHVybiBBYnN0cmFjdFJ1bGVNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFic3RyYWN0UnVsZU1vZGVsLnByb3RvdHlwZS5yYWRpb0NoYW5uZWwgPSBudWxsO1xuXG4gIEFic3RyYWN0UnVsZU1vZGVsLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICBvcmRlcjogMCxcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIHRhcmdldF9wcm9wZXJ0eTogJycsXG4gICAgZGVmaW5pdGlvbnM6IFtdXG4gIH07XG5cbiAgQWJzdHJhY3RSdWxlTW9kZWwucHJvdG90eXBlLnJlbGF0aW9ucyA9IFtcbiAgICB7XG4gICAgICB0eXBlOiBCYWNrYm9uZS5IYXNNYW55LFxuICAgICAga2V5OiAnZGVmaW5pdGlvbnMnLFxuICAgICAgcmVsYXRlZE1vZGVsOiBEZWZpbml0aW9uTW9kZWwsXG4gICAgICBjb2xsZWN0aW9uVHlwZTogRGVmaW5pdGlvbkNvbGxlY3Rpb25cbiAgICB9XG4gIF07XG5cbiAgQWJzdHJhY3RSdWxlTW9kZWwucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCh0aGlzLnJhZGlvQ2hhbm5lbCkucmVxdWVzdCgnc2F2ZScsIHRoaXMpO1xuICB9O1xuXG4gIEFic3RyYWN0UnVsZU1vZGVsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwodGhpcy5yYWRpb0NoYW5uZWwpLnJlcXVlc3QoJ2Rlc3Ryb3knLCB0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gQWJzdHJhY3RSdWxlTW9kZWw7XG5cbn0pKEJhY2tib25lLlJlbGF0aW9uYWxNb2RlbCk7XG5cbmlzU3Vic3RyaW5nT2YgPSBmdW5jdGlvbihzdHIsIHN1Yikge1xuICByZXR1cm4gc3RyLmluZGV4T2Yoc3ViKSA+IC0xO1xufTtcblxuQWJzdHJhY3RSdWxlQ29sbGVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uKCkge1xuICAgIHJldHVybiBBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQWJzdHJhY3RSdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUubW9kZWwgPSBBYnN0cmFjdFJ1bGVNb2RlbDtcblxuICBBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS50YXJnZXRfb2JqZWN0ID0gbnVsbDtcblxuICBBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5jb21wYXJhdG9yID0gJ29yZGVyJztcblxuICBBYnN0cmFjdFJ1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5hcHBseVJ1bGVzID0gZnVuY3Rpb24odGFyZ2V0Q29sbGVjdGlvbikge1xuICAgIHZhciBhcHBseVJ1bGVUb1RhcmdldCwgY291bnQsIGluZGV4O1xuICAgIGluZGV4ID0gMDtcbiAgICBjb3VudCA9IF9zLm51bWJlckZvcm1hdCh0YXJnZXRDb2xsZWN0aW9uLmxlbmd0aCk7XG4gICAgYXBwbHlSdWxlVG9UYXJnZXQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgdmFyIGNvbmRpdGlvbk1hdGNoZWQsIGRlZmluaXRpb25Db2xsZWN0aW9uLCBpLCBsZW4sIHJlZiwgcnVsZSwgc2F2ZUZsYWcsIHRhcmdldF9wcm9wZXJ0eTtcbiAgICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgXCJQcm9jZXNzaW5nIFwiICsgKF9zLm51bWJlckZvcm1hdChpbmRleCkpICsgXCIgb2YgXCIgKyBjb3VudCk7XG4gICAgICAgIHNhdmVGbGFnID0gZmFsc2U7XG4gICAgICAgIHJlZiA9IF90aGlzLm1vZGVscztcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgcnVsZSA9IHJlZltpXTtcbiAgICAgICAgICB0YXJnZXRfcHJvcGVydHkgPSBydWxlLmdldCgndGFyZ2V0X3Byb3BlcnR5Jyk7XG4gICAgICAgICAgZGVmaW5pdGlvbkNvbGxlY3Rpb24gPSBydWxlLmdldCgnZGVmaW5pdGlvbnMnKTtcbiAgICAgICAgICBjb25kaXRpb25NYXRjaGVkID0gZGVmaW5pdGlvbkNvbGxlY3Rpb24uZXZhbHVhdGUodGFyZ2V0LCBfdGhpcy50YXJnZXRfb2JqZWN0LCB0YXJnZXRfcHJvcGVydHkpO1xuICAgICAgICAgIGlmIChjb25kaXRpb25NYXRjaGVkKSB7XG4gICAgICAgICAgICBzYXZlRmxhZyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzYXZlRmxhZykge1xuICAgICAgICAgIHJldHVybiB0YXJnZXQuc2F2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIHJldHVybiBQcm9taXNlLmVhY2godGFyZ2V0Q29sbGVjdGlvbi5tb2RlbHMsIGFwcGx5UnVsZVRvVGFyZ2V0KTtcbiAgfTtcblxuICByZXR1cm4gQWJzdHJhY3RSdWxlQ29sbGVjdGlvbjtcblxufSkoQmFja2JvbmUuQ29sbGVjdGlvbik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBNb2RlbDogQWJzdHJhY3RSdWxlTW9kZWwsXG4gIENvbGxlY3Rpb246IEFic3RyYWN0UnVsZUNvbGxlY3Rpb25cbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyRmljM1J5WVdOMFgzSjFiR1V2Wlc1MGFYUnBaWE11WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyRmljM1J5WVdOMFgzSjFiR1V2Wlc1MGFYUnBaWE11WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVVZCTEVsQlFVRXNLMFpCUVVFN1JVRkJRVHM3T3p0QlFVRk5PenM3T3pzN096czBRa0ZKU2l4UlFVRkJMRWRCUTBVN1NVRkJRU3hMUVVGQkxFVkJRVmtzU1VGQldqdEpRVWRCTEUxQlFVRXNSVUZCV1N4TFFVaGFPMGxCU1VFc1UwRkJRU3hGUVVGWkxGZEJTbG83U1VGTFFTeExRVUZCTEVWQlFWa3NSVUZNV2p0SlFWVkJMRTFCUVVFc1JVRkJXU3hGUVZaYU8wbEJXVUVzVDBGQlFTeEZRVUZUTEV0QldsUTdPenMwUWtGdFFrWXNWVUZCUVN4SFFVRlpMRk5CUVVFN1FVRkZWaXhSUVVGQk8wRkJRVUVzYTBKQlFVOHNTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhSUVVGTUxFVkJRVUVzUzBGQmJVSXNVVUZCYmtJc1NVRkJRU3hIUVVGQkxFdEJRVFpDTzBWQlJqRkNPenMwUWtGTldpeGpRVUZCTEVkQlFXZENMRk5CUVVNc1RVRkJSQ3hGUVVGVExHRkJRVlFzUlVGQmQwSXNaVUZCZUVJc1JVRkJlVU1zU1VGQmVrTTdRVUZIWkN4UlFVRkJPMGxCUVVFc2EwSkJRVUVzUjBGQmNVSXNUVUZCVFN4RFFVRkRMRWRCUVZBc1EwRkJWeXhoUVVGWU8wbEJTWEpDTEVsQlFVY3NTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhSUVVGTUxFTkJRVUVzUzBGQmEwSXNUMEZCY2tJN1FVRkRSU3hoUVVSR096dEpRVWxCTEVsQlFVY3NTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhSUVVGTUxFTkJRVUVzUzBGQmEwSXNVVUZCY2tJN1FVRkRSU3hoUVVSR096dEpRVWxCTEVsQlFVY3NTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhSUVVGTUxFTkJRVUVzUzBGQmEwSXNVMEZCY2tJN1RVRkRSU3hyUWtGQmJVSXNRMEZCUVN4bFFVRkJMRU5CUVc1Q0xFZEJRWE5ETEVsQlFVTXNRMEZCUVN4SFFVRkVMRU5CUVVzc1kwRkJURHROUVVOMFF5eE5RVUZOTEVOQlFVTXNSMEZCVUN4RFFVRlhMR0ZCUVZnc1JVRkJNRUlzYTBKQlFURkNPMEZCUTBFc1lVRklSanM3U1VGTlFTeEpRVUZITEVsQlFVTXNRMEZCUVN4SFFVRkVMRU5CUVVzc1VVRkJUQ3hEUVVGQkxFdEJRV3RDTEZOQlFYSkNPMDFCUjBVc1kwRkJRU3hIUVVGclFpeEpRVUZMTEVOQlFVRXNTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhuUWtGQlRDeERRVUZCTzAxQlEzWkNMRmxCUVVFc1IwRkJhMElzU1VGQlF5eERRVUZCTEVkQlFVUXNRMEZCU3l4alFVRk1PMDFCUTJ4Q0xGbEJRVUVzUjBGQmEwSXNTVUZCUXl4RFFVRkJMRWRCUVVRc1EwRkJTeXhqUVVGTU8wMUJRMnhDTEUxQlFVRXNSMEZCYTBJc1kwRkJZeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNXVUZCZGtJc1JVRkJjVU1zV1VGQmNrTTdUVUZIYkVJc2EwSkJRVzFDTEVOQlFVRXNaVUZCUVN4RFFVRnVRaXhIUVVGelF6dE5RVU4wUXl4TlFVRk5MRU5CUVVNc1IwRkJVQ3hEUVVGWExHRkJRVmdzUlVGQk1FSXNhMEpCUVRGQ08wRkJRMEVzWVVGWVJqczdTVUZqUVN4SlFVRkhMRWxCUVVNc1EwRkJRU3hIUVVGRUxFTkJRVXNzVVVGQlRDeERRVUZCTEV0QlFXdENMR3RDUVVGeVFqdE5RVU5GTEhWQ1FVRkJMRWRCUVRCQ0xFbEJRVXNzUTBGQlFTeEpRVUZETEVOQlFVRXNSMEZCUkN4RFFVRkxMSGxDUVVGTUxFTkJRVUU3VFVGREwwSXNTMEZCUVN4SFFVRlJMSFZDUVVGMVFpeERRVUZETEV0QlFYaENMRU5CUVRoQ0xFbEJRVU1zUTBGQlFTeEhRVUZFTEVOQlFVc3NORUpCUVV3c1EwRkJPVUk3VFVGRFVpeE5RVUZCTEVkQlFWTXNTMEZCVFN4RFFVRkJMRWxCUVVNc1EwRkJRU3hIUVVGRUxFTkJRVXNzZDBKQlFVd3NRMEZCUVR0TlFVZG1MRWxCUVVjc1RVRkJTRHRSUVVORkxHdENRVUZ0UWl4RFFVRkJMR1ZCUVVFc1EwRkJia0lzUjBGQmMwTTdVVUZEZEVNc1RVRkJUU3hEUVVGRExFZEJRVkFzUTBGQlZ5eGhRVUZZTEVWQlFUQkNMR3RDUVVFeFFpeEZRVVpHT3p0QlFVbEJMR0ZCVmtZN08wbEJZVUVzU1VGQlJ5eEpRVUZETEVOQlFVRXNSMEZCUkN4RFFVRkxMRkZCUVV3c1EwRkJRU3hMUVVGclFpeDNRa0ZCY2tJN1RVRkhSU3haUVVGQkxFZEJRV2RDTEVsQlFVc3NRMEZCUVN4SlFVRkRMRU5CUVVFc1IwRkJSQ3hEUVVGTExDdENRVUZNTEVOQlFVRTdUVUZEY2tJc1YwRkJRU3hIUVVGblFpeEpRVUZETEVOQlFVRXNSMEZCUkN4RFFVRkxMRGhDUVVGTU8wMUJRMmhDTEV0QlFVRXNSMEZCWjBJc1NVRkJReXhEUVVGQkxFZEJRVVFzUTBGQlN5dzRRa0ZCVER0TlFVZG9RaXhOUVVGQkxFZEJRVk1zU1VGQlNTeE5RVUZLTEVOQlFWY3NWMEZCV0N4RFFVRjFRaXhEUVVGRExFbEJRWGhDTEVOQlFUWkNMRmxCUVRkQ08wMUJSMVFzU1VGQlJ5eE5RVUZCTEVsQlFWVXNUVUZCVHl4RFFVRkJMRXRCUVVFc1EwRkJjRUk3VVVGRFJTeHJRa0ZCYlVJc1EwRkJRU3hsUVVGQkxFTkJRVzVDTEVkQlFYTkRMRTFCUVU4c1EwRkJRU3hMUVVGQk8xRkJRemRETEUxQlFVMHNRMEZCUXl4SFFVRlFMRU5CUVZjc1lVRkJXQ3hGUVVFd1FpeHJRa0ZCTVVJc1JVRkdSanRQUVZoR096dEZRV2hFWXpzN096dEhRVGxDV1N4UlFVRlJMRU5CUVVNN08wRkJjVWhxUXpzN096czdPenM3YVVOQlEwb3NTMEZCUVN4SFFVRlBPenRwUTBGRFVDeFZRVUZCTEVkQlFWazdPMmxEUVVWYUxGRkJRVUVzUjBGQlZTeFRRVUZETEUxQlFVUXNSVUZCVXl4aFFVRlVMRVZCUVhkQ0xHVkJRWGhDTzBGQlNWSXNVVUZCUVR0SlFVRkJMR2RDUVVGQkxFZEJRVzFDTzBGQlNXNUNPMEZCUVVFc1UwRkJRU3h4UTBGQlFUczdUVUZIUlN4SlFVRkJMRWRCUVU4c1RVRkJUU3hEUVVGRExFZEJRVkFzUTBGQlZ5eE5RVUZZTzAxQlIxQXNUVUZCUVN4SFFVRlpMRWxCUVVzc1EwRkJRU3hWUVVGVkxFTkJRVU1zUjBGQldDeERRVUZsTEZGQlFXWXNRMEZCUVR0TlFVTnFRaXhUUVVGQkxFZEJRVmtzVlVGQlZTeERRVUZETEVkQlFWZ3NRMEZCWlN4WFFVRm1PMDFCUTFvc1MwRkJRU3hIUVVGWkxGVkJRVlVzUTBGQlF5eEhRVUZZTEVOQlFXVXNUMEZCWmp0TlFWZGFMRWxCUVVjc1UwRkJRU3hMUVVGaExGRkJRV2hDTzFGQlEwVXNTVUZCUnl4TlFVRklPMVZCUTBVc1owSkJRVUVzUjBGQmJVSTdWVUZEYmtJc1ZVRkJWU3hEUVVGRExHTkJRVmdzUTBGQk1FSXNUVUZCTVVJc1JVRkJhME1zWVVGQmJFTXNSVUZCYVVRc1pVRkJha1FzUlVGQmEwVXNTVUZCYkVVc1JVRkdSanRUUVVGQkxFMUJRVUU3VlVGSlJTeEpRVUZUTEZWQlFWVXNRMEZCUXl4VlFVRllMRU5CUVVFc1EwRkJWRHRCUVVGQkxHdENRVUZCTzFkQlNrWTdVMEZFUmpzN1RVRlJRU3hKUVVGSExGTkJRVUVzUzBGQllTeGhRVUZvUWp0UlFVTkZMRWxCUVVjc1RVRkJRU3hMUVVGVkxFdEJRV0k3VlVGRFJTeG5Ra0ZCUVN4SFFVRnRRanRWUVVOdVFpeFZRVUZWTEVOQlFVTXNZMEZCV0N4RFFVRXdRaXhOUVVFeFFpeEZRVUZyUXl4aFFVRnNReXhGUVVGcFJDeGxRVUZxUkN4RlFVRnJSU3hKUVVGc1JTeEZRVVpHTzFOQlFVRXNUVUZCUVR0VlFVbEZMRWxCUVZNc1ZVRkJWU3hEUVVGRExGVkJRVmdzUTBGQlFTeERRVUZVTzBGQlFVRXNhMEpCUVVFN1YwRktSanRUUVVSR096dE5RVk5CTEVsQlFVY3NVMEZCUVN4TFFVRmhMR0ZCUVdoQ08xRkJRMFVzU1VGQlJ5eEZRVUZGTEVOQlFVTXNWVUZCU0N4RFFVRmpMRTFCUVdRc1JVRkJjMElzUzBGQmRFSXNRMEZCU0R0VlFVTkZMR2RDUVVGQkxFZEJRVzFDTzFWQlEyNUNMRlZCUVZVc1EwRkJReXhqUVVGWUxFTkJRVEJDTEUxQlFURkNMRVZCUVd0RExHRkJRV3hETEVWQlFXbEVMR1ZCUVdwRUxFVkJRV3RGTEVsQlFXeEZMRVZCUmtZN1UwRkJRU3hOUVVGQk8xVkJTVVVzU1VGQlV5eFZRVUZWTEVOQlFVTXNWVUZCV0N4RFFVRkJMRU5CUVZRN1FVRkJRU3hyUWtGQlFUdFhRVXBHTzFOQlJFWTdPMDFCVVVFc1NVRkJSeXhUUVVGQkxFdEJRV0VzVlVGQmFFSTdVVUZEUlN4SlFVRkhMRVZCUVVVc1EwRkJReXhQUVVGSUxFTkJRVmNzVFVGQlRTeERRVUZETEZkQlFWQXNRMEZCUVN4RFFVRllMRVZCUVdsRExFdEJRVXNzUTBGQlF5eFhRVUZPTEVOQlFVRXNRMEZCYWtNc1EwRkJTRHRWUVVORkxHZENRVUZCTEVkQlFXMUNPMVZCUTI1Q0xGVkJRVlVzUTBGQlF5eGpRVUZZTEVOQlFUQkNMRTFCUVRGQ0xFVkJRV3RETEdGQlFXeERMRVZCUVdsRUxHVkJRV3BFTEVWQlFXdEZMRWxCUVd4RkxFVkJSa1k3VTBGQlFTeE5RVUZCTzFWQlNVVXNTVUZCVXl4VlFVRlZMRU5CUVVNc1ZVRkJXQ3hEUVVGQkxFTkJRVlE3UVVGQlFTeHJRa0ZCUVR0WFFVcEdPMU5CUkVZN08wMUJVVUVzU1VGQlJ5eFRRVUZCTEV0QlFXRXNlVUpCUVdoQ08xRkJRMFVzU1VGQlJ5eEZRVUZGTEVOQlFVTXNUMEZCU0N4RFFVRlhMRTFCUVZnc1JVRkJiVUlzUzBGQmJrSXNRMEZCU0R0VlFVTkZMR2RDUVVGQkxFZEJRVzFDTzFWQlEyNUNMRlZCUVZVc1EwRkJReXhqUVVGWUxFTkJRVEJDTEUxQlFURkNMRVZCUVd0RExHRkJRV3hETEVWQlFXbEVMR1ZCUVdwRUxFVkJRV3RGTEVsQlFXeEZMRVZCUmtZN1UwRkJRU3hOUVVGQk8xVkJTVVVzU1VGQlV5eFZRVUZWTEVOQlFVTXNWVUZCV0N4RFFVRkJMRU5CUVZRN1FVRkJRU3hyUWtGQlFUdFhRVXBHTzFOQlJFWTdPMDFCVVVFc1NVRkJSeXhUUVVGQkxFdEJRV0VzYTBKQlFXaENPMUZCUTBVc1NVRkJSeXhEUVVGSkxFVkJRVVVzUTBGQlF5eFBRVUZJTEVOQlFWY3NUVUZCVFN4RFFVRkRMRmRCUVZBc1EwRkJRU3hEUVVGWUxFVkJRV2xETEV0QlFVc3NRMEZCUXl4WFFVRk9MRU5CUVVFc1EwRkJha01zUTBGQlVEdFZRVU5GTEdkQ1FVRkJMRWRCUVcxQ08xVkJRMjVDTEZWQlFWVXNRMEZCUXl4alFVRllMRU5CUVRCQ0xFMUJRVEZDTEVWQlFXdERMR0ZCUVd4RExFVkJRV2xFTEdWQlFXcEVMRVZCUVd0RkxFbEJRV3hGTEVWQlJrWTdVMEZCUVN4TlFVRkJPMVZCU1VVc1NVRkJVeXhWUVVGVkxFTkJRVU1zVlVGQldDeERRVUZCTEVOQlFWUTdRVUZCUVN4clFrRkJRVHRYUVVwR08xTkJSRVk3TzAxQlUwRXNTVUZCUnl4VFFVRkJMRXRCUVdFc1YwRkJhRUk3VVVGRFJTeEpRVUZITEVWQlFVVXNRMEZCUXl4UlFVRklMRU5CUVZrc1RVRkJXaXhGUVVGdlFpeExRVUZ3UWl4RFFVRklPMVZCUTBVc1owSkJRVUVzUjBGQmJVSTdWVUZEYmtJc1ZVRkJWU3hEUVVGRExHTkJRVmdzUTBGQk1FSXNUVUZCTVVJc1JVRkJhME1zWVVGQmJFTXNSVUZCYVVRc1pVRkJha1FzUlVGQmEwVXNTVUZCYkVVc1JVRkdSanRUUVVGQkxFMUJRVUU3VlVGSlJTeEpRVUZUTEZWQlFWVXNRMEZCUXl4VlFVRllMRU5CUVVFc1EwRkJWRHRCUVVGQkxHdENRVUZCTzFkQlNrWTdVMEZFUmpzN1FVRnlSVVk3UVVFMlJVRXNWMEZCVHp0RlFYSkdRenM3T3p0SFFVcDFRaXhSUVVGUkxFTkJRVU03TzBGQlowZDBRenM3T3pzN096czRRa0ZMU2l4WlFVRkJMRWRCUVdNN096aENRVWRrTEZGQlFVRXNSMEZEUlR0SlFVRkJMRXRCUVVFc1JVRkJhMElzUTBGQmJFSTdTVUZEUVN4UFFVRkJMRVZCUVd0Q0xFbEJSR3hDTzBsQlJVRXNaVUZCUVN4RlFVRnJRaXhGUVVac1FqdEpRVWRCTEZkQlFVRXNSVUZCYTBJc1JVRkliRUk3T3pzNFFrRk5SaXhUUVVGQkxFZEJRVmM3U1VGRFVEdE5RVUZCTEVsQlFVRXNSVUZCWjBJc1VVRkJVU3hEUVVGRExFOUJRWHBDTzAxQlEwRXNSMEZCUVN4RlFVRm5RaXhoUVVSb1FqdE5RVVZCTEZsQlFVRXNSVUZCWjBJc1pVRkdhRUk3VFVGSFFTeGpRVUZCTEVWQlFXZENMRzlDUVVob1FqdExRVVJQT3pzN09FSkJVVmdzU1VGQlFTeEhRVUZOTEZOQlFVRTdWMEZEU2l4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNTVUZCUXl4RFFVRkJMRmxCUVhoQ0xFTkJRWEZETEVOQlFVTXNUMEZCZEVNc1EwRkJPRU1zVFVGQk9VTXNSVUZCYzBRc1NVRkJkRVE3UlVGRVNUczdPRUpCU1U0c1QwRkJRU3hIUVVGVExGTkJRVUU3VjBGRFVDeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzU1VGQlF5eERRVUZCTEZsQlFYaENMRU5CUVhGRExFTkJRVU1zVDBGQmRFTXNRMEZCT0VNc1UwRkJPVU1zUlVGQmVVUXNTVUZCZWtRN1JVRkVUenM3T3p0SFFUTkNjVUlzVVVGQlVTeERRVUZET3p0QlFXdERla01zWVVGQlFTeEhRVUZuUWl4VFFVRkRMRWRCUVVRc1JVRkJUU3hIUVVGT08wRkJRMlFzVTBGQlR5eEhRVUZITEVOQlFVTXNUMEZCU2l4RFFVRlpMRWRCUVZvc1EwRkJRU3hIUVVGdFFpeERRVUZETzBGQlJHSTdPMEZCVFZZN096czdPenM3YlVOQlNVb3NTMEZCUVN4SFFVRlBPenR0UTBGSlVDeGhRVUZCTEVkQlFXVTdPMjFEUVVkbUxGVkJRVUVzUjBGQldUczdiVU5CU1Zvc1ZVRkJRU3hIUVVGWkxGTkJRVU1zWjBKQlFVUTdRVUZIVml4UlFVRkJPMGxCUVVFc1MwRkJRU3hIUVVGUk8wbEJRMUlzUzBGQlFTeEhRVUZSTEVWQlFVVXNRMEZCUXl4WlFVRklMRU5CUVdkQ0xHZENRVUZuUWl4RFFVRkRMRTFCUVdwRE8wbEJTMUlzYVVKQlFVRXNSMEZCYjBJc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEUxQlFVUTdRVUZIYkVJc1dVRkJRVHRSUVVGQkxFdEJRVUVzUjBGQlVTeExRVUZCTEVkQlFWRTdVVUZEYUVJc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRk5CUVhaQ0xFTkJRV2xETEVOQlFVTXNUMEZCYkVNc1EwRkJNRU1zVFVGQk1VTXNSVUZCYTBRc1lVRkJRU3hIUVVGaExFTkJRVU1zUlVGQlJTeERRVUZETEZsQlFVZ3NRMEZCWjBJc1MwRkJhRUlzUTBGQlJDeERRVUZpTEVkQlFYRkRMRTFCUVhKRExFZEJRVEpETEV0QlFUZEdPMUZCVFVFc1VVRkJRU3hIUVVGWE8wRkJSMWc3UVVGQlFTeGhRVUZCTEhGRFFVRkJPenRWUVVkRkxHVkJRVUVzUjBGQmEwSXNTVUZCU1N4RFFVRkRMRWRCUVV3c1EwRkJVeXhwUWtGQlZEdFZRVU5zUWl4dlFrRkJRU3hIUVVGMVFpeEpRVUZKTEVOQlFVTXNSMEZCVEN4RFFVRlRMR0ZCUVZRN1ZVRkhka0lzWjBKQlFVRXNSMEZCYlVJc2IwSkJRVzlDTEVOQlFVTXNVVUZCY2tJc1EwRkJPRUlzVFVGQk9VSXNSVUZCYzBNc1MwRkJReXhEUVVGQkxHRkJRWFpETEVWQlFYTkVMR1ZCUVhSRU8xVkJSMjVDTEVsQlFXMUNMR2RDUVVGdVFqdFpRVUZCTEZGQlFVRXNSMEZCVnl4TFFVRllPenRCUVZaR08xRkJhVUpCTEVsQlFYZENMRkZCUVhoQ08wRkJRVUVzYVVKQlFVOHNUVUZCVFN4RFFVRkRMRWxCUVZBc1EwRkJRU3hGUVVGUU96dEJRVWRCTEdWQlFVOHNTVUZCU1N4UFFVRktMRU5CUVZrc1UwRkJReXhQUVVGRUxFVkJRVlVzVFVGQlZqdHBRa0ZCY1VJc1QwRkJRU3hEUVVGUkxFbEJRVkk3VVVGQmNrSXNRMEZCV2p0TlFXcERWenRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRTdRVUZ2UTNCQ0xGZEJRVThzVDBGQlR5eERRVUZETEVsQlFWSXNRMEZCWVN4blFrRkJaMElzUTBGQlF5eE5RVUU1UWl4RlFVRnpReXhwUWtGQmRFTTdSVUUzUTBjN096czdSMEZtZFVJc1VVRkJVU3hEUVVGRE96dEJRV2RGT1VNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGRFJUdEZRVUZCTEV0QlFVRXNSVUZCV1N4cFFrRkJXanRGUVVOQkxGVkJRVUVzUlVGQldTeHpRa0ZFV2lKOVxuIiwidmFyIERleGllRmFjdG9yeSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkRleGllRmFjdG9yeSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEZXhpZUZhY3RvcnksIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERleGllRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gRGV4aWVGYWN0b3J5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGV4aWVGYWN0b3J5LnByb3RvdHlwZS5lbnN1cmVEYiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRiIHx8ICh0aGlzLmRiID0gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGInKS5yZXF1ZXN0KCdkYicpKTtcbiAgICByZXR1cm4gdGhpcy5kYjtcbiAgfTtcblxuICBEZXhpZUZhY3RvcnkucHJvdG90eXBlLmdldENvbGxlY3Rpb24gPSBmdW5jdGlvbihkYXRhc2V0X2lkKSB7XG4gICAgdGhpcy5lbnN1cmVEYigpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmRiW190aGlzLnRhYmxlTmFtZV0ud2hlcmUoJ2RhdGFzZXRfaWQnKS5lcXVhbHMoZGF0YXNldF9pZCkudG9BcnJheSgpLnRoZW4oZnVuY3Rpb24obW9kZWxzKSB7XG4gICAgICAgICAgX3RoaXMuY2FjaGVkQ29sbGVjdGlvbi5yZXNldChtb2RlbHMpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmNhY2hlZENvbGxlY3Rpb24pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBEZXhpZUZhY3RvcnkucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24oaWQpIHtcbiAgICB0aGlzLmVuc3VyZURiKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3IF90aGlzLmNhY2hlZENvbGxlY3Rpb24ubW9kZWwoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF90aGlzLmNhY2hlZENvbGxlY3Rpb24uZ2V0KGlkKSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmNhY2hlZENvbGxlY3Rpb24uZ2V0KGlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzLmdldENvbGxlY3Rpb24oKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmNhY2hlZENvbGxlY3Rpb24uZ2V0KGlkKSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgRGV4aWVGYWN0b3J5LnByb3RvdHlwZS5zYXZlTW9kZWwgPSBmdW5jdGlvbihtb2RlbCkge1xuICAgIHRoaXMuZW5zdXJlRGIoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBpdGVtO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdyZXF1ZXN0Jyk7XG4gICAgICAgIGl0ZW0gPSBtb2RlbC50b0pTT04oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzLmRiW190aGlzLnRhYmxlTmFtZV0ucHV0KGl0ZW0pLnRoZW4oZnVuY3Rpb24obW9kZWxfaWQpIHtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIERleGllRmFjdG9yeS5wcm90b3R5cGUuZGVzdHJveU1vZGVsID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICB0aGlzLmVuc3VyZURiKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcHJpbWFyeV9rZXk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnKTtcbiAgICAgICAgcHJpbWFyeV9rZXkgPSBtb2RlbC5pZDtcbiAgICAgICAgcmV0dXJuIF90aGlzLmRiW190aGlzLnRhYmxlTmFtZV1bXCJkZWxldGVcIl0ocHJpbWFyeV9rZXkpLnRoZW4oZnVuY3Rpb24obW9kZWxfaWQpIHtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdkZXN0cm95Jyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBEZXhpZUZhY3Rvcnk7XG5cbn0pKE1hcmlvbmV0dGUuU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGV4aWVGYWN0b3J5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMkpoYzJVdlpHVjRhV1ZHWVdOMGIzSjVMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5aVlYTmxMMlJsZUdsbFJtRmpkRzl5ZVM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCU1VFc1NVRkJRU3haUVVGQk8wVkJRVUU3T3p0QlFVRk5PenM3T3pzN08zbENRVWxLTEZGQlFVRXNSMEZCVlN4VFFVRkRMRTlCUVVRN1NVRkRVaXhKUVVGRExFTkJRVUVzVDBGQlJDeEpRVUZETEVOQlFVRXNTMEZCVHl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNTVUZCZGtJc1EwRkJORUlzUTBGQlF5eFBRVUUzUWl4RFFVRnhReXhKUVVGeVF6dEJRVU5TTEZkQlFVOHNTVUZCUXl4RFFVRkJPMFZCUmtFN08zbENRVTFXTEdGQlFVRXNSMEZCWlN4VFFVRkRMRlZCUVVRN1NVRkhZaXhKUVVGRExFTkJRVUVzVVVGQlJDeERRVUZCTzBGQlIwRXNWMEZCVHl4SlFVRkpMRTlCUVVvc1EwRkJXU3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNUMEZCUkN4RlFVRlZMRTFCUVZZN1pVRkhha0lzUzBGQlF5eERRVUZCTEVWQlFVY3NRMEZCUVN4TFFVRkRMRU5CUVVFc1UwRkJSQ3hEUVVGWExFTkJRVU1zUzBGQmFFSXNRMEZCYzBJc1dVRkJkRUlzUTBGQmJVTXNRMEZCUXl4TlFVRndReXhEUVVFeVF5eFZRVUV6UXl4RFFVRnpSQ3hEUVVGRExFOUJRWFpFTEVOQlFVRXNRMEZIUVN4RFFVRkRMRWxCU0VRc1EwRkhUU3hUUVVGRExFMUJRVVE3VlVGSFNpeExRVUZETEVOQlFVRXNaMEpCUVdkQ0xFTkJRVU1zUzBGQmJFSXNRMEZCZDBJc1RVRkJlRUk3UVVGSFFTeHBRa0ZCVHl4UFFVRkJMRU5CUVZFc1MwRkJReXhEUVVGQkxHZENRVUZVTzFGQlRrZ3NRMEZJVGl4RFFWbEJMRVZCUVVNc1MwRkJSQ3hGUVZwQkxFTkJXVThzVTBGQlF5eEhRVUZFTzBGQlFWTXNhVUpCUVU4c1RVRkJRU3hEUVVGUExFZEJRVkE3VVVGQmFFSXNRMEZhVUR0TlFVaHBRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCV2p0RlFVNU5PenQ1UWtGNVFtWXNVVUZCUVN4SFFVRlZMRk5CUVVNc1JVRkJSRHRKUVVkU0xFbEJRVU1zUTBGQlFTeFJRVUZFTEVOQlFVRTdRVUZIUVN4WFFVRlBMRWxCUVVrc1QwRkJTaXhEUVVGWkxFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4UFFVRkVMRVZCUVZVc1RVRkJWanRSUVVkcVFpeEpRVUZCTEVOQlFYRkVMRVZCUVhKRU8wRkJRVUVzYVVKQlFVOHNUMEZCUVN4RFFVRlJMRWxCUVVrc1MwRkJReXhEUVVGQkxHZENRVUZuUWl4RFFVRkRMRXRCUVhSQ0xFTkJRVUVzUTBGQlVpeEZRVUZRT3p0UlFVZEJMRWxCUVRaRExFdEJRVU1zUTBGQlFTeG5Ra0ZCWjBJc1EwRkJReXhIUVVGc1FpeERRVUZ6UWl4RlFVRjBRaXhEUVVFM1F6dEJRVUZCTEdsQ1FVRlBMRTlCUVVFc1EwRkJVU3hMUVVGRExFTkJRVUVzWjBKQlFXZENMRU5CUVVNc1IwRkJiRUlzUTBGQmMwSXNSVUZCZEVJc1EwRkJVaXhGUVVGUU96dEJRVWRCTEdWQlFVOHNTMEZCUXl4RFFVRkJMR0ZCUVVRc1EwRkJRU3hEUVVGblFpeERRVUZETEVsQlFXcENMRU5CUVhOQ0xGTkJRVUU3YVVKQlFVMHNUMEZCUVN4RFFVRlJMRXRCUVVNc1EwRkJRU3huUWtGQlowSXNRMEZCUXl4SFFVRnNRaXhEUVVGelFpeEZRVUYwUWl4RFFVRlNPMUZCUVU0c1EwRkJkRUk3VFVGVVZUdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJXanRGUVU1RE96dDVRa0Z0UWxZc1UwRkJRU3hIUVVGWExGTkJRVU1zUzBGQlJEdEpRVWRVTEVsQlFVTXNRMEZCUVN4UlFVRkVMRU5CUVVFN1FVRkhRU3hYUVVGUExFbEJRVWtzVDBGQlNpeERRVUZaTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhQUVVGRUxFVkJRVlVzVFVGQlZqdEJRVWRxUWl4WlFVRkJPMUZCUVVFc1MwRkJTeXhEUVVGRExFOUJRVTRzUTBGQll5eFRRVUZrTzFGQlIwRXNTVUZCUVN4SFFVRlBMRXRCUVVzc1EwRkJReXhOUVVGT0xFTkJRVUU3WlVGSFVDeExRVUZETEVOQlFVRXNSVUZCUnl4RFFVRkJMRXRCUVVNc1EwRkJRU3hUUVVGRUxFTkJRVmNzUTBGQlF5eEhRVUZvUWl4RFFVRnZRaXhKUVVGd1FpeERRVU5CTEVOQlFVTXNTVUZFUkN4RFFVTk5MRk5CUVVNc1VVRkJSRHRWUVVOS0xFdEJRVXNzUTBGQlF5eFBRVUZPTEVOQlFXTXNUVUZCWkR0QlFVTkJMR2xDUVVGUExFOUJRVUVzUTBGQlFUdFJRVVpJTEVOQlJFNHNRMEZOUVN4RlFVRkRMRXRCUVVRc1JVRk9RU3hEUVUxUExGTkJRVU1zUjBGQlJEdFZRVU5NTEV0QlFVc3NRMEZCUXl4UFFVRk9MRU5CUVdNc1QwRkJaQ3hGUVVGMVFpeEhRVUYyUWp0QlFVTkJMR2xDUVVGUExFMUJRVUVzUTBGQlR5eEhRVUZRTzFGQlJrWXNRMEZPVUR0TlFWUnBRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCV2p0RlFVNUZPenQ1UWtFeVFsZ3NXVUZCUVN4SFFVRmpMRk5CUVVNc1MwRkJSRHRKUVVkYUxFbEJRVU1zUTBGQlFTeFJRVUZFTEVOQlFVRTdRVUZIUVN4WFFVRlBMRWxCUVVrc1QwRkJTaXhEUVVGWkxFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4UFFVRkVMRVZCUVZVc1RVRkJWanRCUVVkcVFpeFpRVUZCTzFGQlFVRXNTMEZCU3l4RFFVRkRMRTlCUVU0c1EwRkJZeXhUUVVGa08xRkJSMEVzVjBGQlFTeEhRVUZqTEV0QlFVc3NRMEZCUXp0bFFVZHdRaXhMUVVGRExFTkJRVUVzUlVGQlJ5eERRVUZCTEV0QlFVTXNRMEZCUVN4VFFVRkVMRU5CUVZjc1JVRkJReXhOUVVGRUxFVkJRV1lzUTBGQmRVSXNWMEZCZGtJc1EwRkRRU3hEUVVGRExFbEJSRVFzUTBGRFRTeFRRVUZETEZGQlFVUTdWVUZEU2l4TFFVRkxMRU5CUVVNc1QwRkJUaXhEUVVGakxGTkJRV1E3UVVGRFFTeHBRa0ZCVHl4UFFVRkJMRU5CUVVFN1VVRkdTQ3hEUVVST0xFTkJUVUVzUlVGQlF5eExRVUZFTEVWQlRrRXNRMEZOVHl4VFFVRkRMRWRCUVVRN1ZVRkRUQ3hMUVVGTExFTkJRVU1zVDBGQlRpeERRVUZqTEU5QlFXUXNSVUZCZFVJc1IwRkJka0k3UVVGRFFTeHBRa0ZCVHl4TlFVRkJMRU5CUVU4c1IwRkJVRHRSUVVaR0xFTkJUbEE3VFVGVWFVSTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRVm83UlVGT1N6czdPenRIUVdwR1Z5eFZRVUZWTEVOQlFVTTdPMEZCTkVkMFF5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkaXJlY3RvcnksIHRpdGxlKSB7XG5pZiAoIGRpcmVjdG9yeSlcbntcbmJ1Zi5wdXNoKFwiPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIGlkPVxcXCJmaWxlX3VwbG9hZFxcXCJcIiArIChqYWRlLmF0dHIoXCJkYXRhLXRpdGxlXCIsIHRpdGxlLCB0cnVlLCBmYWxzZSkpICsgXCIgd2Via2l0ZGlyZWN0b3J5PVxcXCJ3ZWJraXRkaXJlY3RvcnlcXFwiIG1vemRpcmVjdG9yeT1cXFwibW96ZGlyZWN0b3J5XFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWZpbGVcXFwiLz5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxpbnB1dCB0eXBlPVxcXCJmaWxlXFxcIiBpZD1cXFwiZmlsZV91cGxvYWRcXFwiXCIgKyAoamFkZS5hdHRyKFwiZGF0YS10aXRsZVwiLCB0aXRsZSwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtZmlsZVxcXCIvPlwiKTtcbn19LmNhbGwodGhpcyxcImRpcmVjdG9yeVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGlyZWN0b3J5OnR5cGVvZiBkaXJlY3RvcnkhPT1cInVuZGVmaW5lZFwiP2RpcmVjdG9yeTp1bmRlZmluZWQsXCJ0aXRsZVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudGl0bGU6dHlwZW9mIHRpdGxlIT09XCJ1bmRlZmluZWRcIj90aXRsZTp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgVXBsb2FkV2lkZ2V0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuVXBsb2FkV2lkZ2V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFVwbG9hZFdpZGdldCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gVXBsb2FkV2lkZ2V0KCkge1xuICAgIHJldHVybiBVcGxvYWRXaWRnZXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvdXBsb2FkJyk7XG5cbiAgVXBsb2FkV2lkZ2V0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnZm9ybS1ncm91cCc7XG5cbiAgVXBsb2FkV2lkZ2V0LnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NoYW5nZSBpbnB1dFt0eXBlPWZpbGVdJzogJ29uSW5wdXRDaGFuZ2UnXG4gIH07XG5cbiAgVXBsb2FkV2lkZ2V0LnByb3RvdHlwZS50aXRsZXMgPSB7XG4gICAgZmlsZTogJ09wZW4gYSBmaWxlLicsXG4gICAgZGlyZWN0b3J5OiAnT3BlbiBhIGRpcmVjdG9yeS4nXG4gIH07XG5cbiAgVXBsb2FkV2lkZ2V0LnByb3RvdHlwZS5nZXRUaXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudGl0bGUpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGl0bGU7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0b3J5KSB7XG4gICAgICByZXR1cm4gdGhpcy50aXRsZXMuZGlyZWN0b3J5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aXRsZXMuZmlsZTtcbiAgfTtcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLnRlbXBsYXRlSGVscGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvcHRzO1xuICAgIHJldHVybiBvcHRzID0ge1xuICAgICAgdGl0bGU6IHRoaXMuZ2V0VGl0bGUoKSxcbiAgICAgIGRpcmVjdG9yeTogdGhpcy5vcHRpb25zLmRpcmVjdG9yeVxuICAgIH07XG4gIH07XG5cbiAgVXBsb2FkV2lkZ2V0LnByb3RvdHlwZS5vbklucHV0Q2hhbmdlID0gZnVuY3Rpb24oZSkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0b3J5KSB7XG4gICAgICByZXR1cm4gdGhpcy5vbkRpcmVjdG9yeVVwbG9hZChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub25GaWxlVXBsb2FkKGUpO1xuICB9O1xuXG4gIFVwbG9hZFdpZGdldC5wcm90b3R5cGUub25EaXJlY3RvcnlVcGxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcignZGlyZWN0b3J5OmxvYWRlZCcsIGUudGFyZ2V0LmZpbGVzKTtcbiAgfTtcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLm9uRmlsZVVwbG9hZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZmlsZSwgZmlsZVJlYWRlcjtcbiAgICBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIGZpbGVSZWFkZXIub25sb2FkID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdmaWxlOmxvYWRlZCcsIGZpbGVSZWFkZXIucmVzdWx0KTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmV0dXJuIGZpbGVSZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgfTtcblxuICByZXR1cm4gVXBsb2FkV2lkZ2V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBVcGxvYWRXaWRnZXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwySmhjMlV2ZG1sbGQzTXZkWEJzYjJGa0wzVndiRzloWkM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZZbUZ6WlM5MmFXVjNjeTkxY0d4dllXUXZkWEJzYjJGa0xtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRlFTeEpRVUZCTEZsQlFVRTdSVUZCUVRzN08wRkJRVTA3T3pzN096czdlVUpCUTBvc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTeHZRa0ZCVWpzN2VVSkJRMVlzVTBGQlFTeEhRVUZYT3p0NVFrRkZXQ3hOUVVGQkxFZEJRMFU3U1VGQlFTeDVRa0ZCUVN4RlFVRXlRaXhsUVVFelFqczdPM2xDUVVWR0xFMUJRVUVzUjBGRFJUdEpRVUZCTEVsQlFVRXNSVUZCV1N4alFVRmFPMGxCUTBFc1UwRkJRU3hGUVVGWkxHMUNRVVJhT3pzN2VVSkJSMFlzVVVGQlFTeEhRVUZWTEZOQlFVRTdTVUZEVWl4SlFVRjVRaXhKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEV0QlFXeERPMEZCUVVFc1lVRkJUeXhKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEUxQlFXaENPenRKUVVOQkxFbEJRVFJDTEVsQlFVTXNRMEZCUVN4UFFVRlBMRU5CUVVNc1UwRkJja003UVVGQlFTeGhRVUZQTEVsQlFVTXNRMEZCUVN4TlFVRk5MRU5CUVVNc1ZVRkJaanM3UVVGRFFTeFhRVUZQTEVsQlFVTXNRMEZCUVN4TlFVRk5MRU5CUVVNN1JVRklVRHM3ZVVKQlMxWXNaVUZCUVN4SFFVRnBRaXhUUVVGQk8wRkJRMllzVVVGQlFUdEJRVUZCTEZkQlFVOHNTVUZCUVN4SFFVTk1PMDFCUVVFc1MwRkJRU3hGUVVGWkxFbEJRVU1zUTBGQlFTeFJRVUZFTEVOQlFVRXNRMEZCV2p0TlFVTkJMRk5CUVVFc1JVRkJXU3hKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEZOQlJISkNPenRGUVVaaE96dDVRa0ZMYWtJc1lVRkJRU3hIUVVGbExGTkJRVU1zUTBGQlJEdEpRVU5pTEVsQlFXZERMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU1zVTBGQmVrTTdRVUZCUVN4aFFVRlBMRWxCUVVNc1EwRkJRU3hwUWtGQlJDeERRVUZ0UWl4RFFVRnVRaXhGUVVGUU96dEJRVU5CTEZkQlFVOHNTVUZCUXl4RFFVRkJMRmxCUVVRc1EwRkJZeXhEUVVGa08wVkJSazA3TzNsQ1FVbG1MR2xDUVVGQkxFZEJRVzFDTEZOQlFVTXNRMEZCUkR0QlFVTnFRaXhYUVVGUExFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNhMEpCUVZRc1JVRkJOa0lzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRjBRenRGUVVSVk96dDVRa0ZIYmtJc1dVRkJRU3hIUVVGakxGTkJRVU1zUTBGQlJEdEJRVWRhTEZGQlFVRTdTVUZCUVN4SlFVRkJMRWRCUVU4c1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZOTEVOQlFVRXNRMEZCUVR0SlFVZDBRaXhKUVVGQkxFTkJRV01zU1VGQlpEdEJRVUZCTEdGQlFVRTdPMGxCUjBFc1ZVRkJRU3hIUVVGaExFbEJRVWtzVlVGQlNpeERRVUZCTzBsQlEySXNWVUZCVlN4RFFVRkRMRTFCUVZnc1IwRkJiMElzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkJPMlZCUVVjc1MwRkJReXhEUVVGQkxFOUJRVVFzUTBGQlV5eGhRVUZVTEVWQlFYZENMRlZCUVZVc1EwRkJReXhOUVVGdVF6dE5RVUZJTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRVHRYUVVOd1FpeFZRVUZWTEVOQlFVTXNWVUZCV0N4RFFVRnpRaXhKUVVGMFFqdEZRVmhaT3pzN08wZEJOVUpYTEVWQlFVVXNRMEZCUXpzN1FVRnJSRGxDTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBEYXRhcG9pbnRDb2xsZWN0aW9uLCBEYXRhcG9pbnRNb2RlbCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkRhdGFwb2ludE1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFwb2ludE1vZGVsLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEYXRhcG9pbnRNb2RlbCgpIHtcbiAgICByZXR1cm4gRGF0YXBvaW50TW9kZWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhcG9pbnRNb2RlbC5wcm90b3R5cGUudXJsUm9vdCA9ICdkYXRhcG9pbnRzJztcblxuICBEYXRhcG9pbnRNb2RlbC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdkYXRhcG9pbnQnKS5yZXF1ZXN0KCdzYXZlJywgdGhpcyk7XG4gIH07XG5cbiAgcmV0dXJuIERhdGFwb2ludE1vZGVsO1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cbkRhdGFwb2ludENvbGxlY3Rpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGF0YXBvaW50Q29sbGVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXBvaW50Q29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gRGF0YXBvaW50Q29sbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERhdGFwb2ludENvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gRGF0YXBvaW50TW9kZWw7XG5cbiAgRGF0YXBvaW50Q29sbGVjdGlvbi5wcm90b3R5cGUucmVzZXRUYXJnZXRPYmplY3QgPSBmdW5jdGlvbih0YXJnZXRfb2JqZWN0KSB7XG4gICAgdmFyIGNvdW50LCBpbmRleCwgcmVzZXREYXRhcG9pbnQ7XG4gICAgaW5kZXggPSAwO1xuICAgIGNvdW50ID0gX3MubnVtYmVyRm9ybWF0KHRoaXMubGVuZ3RoKTtcbiAgICByZXNldERhdGFwb2ludCA9IGZ1bmN0aW9uKGRwKSB7XG4gICAgICB2YXIgcmF3O1xuICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsIFwiUHJvY2Vzc2luZyBcIiArIChfcy5udW1iZXJGb3JtYXQoaW5kZXgpKSArIFwiIG9mIFwiICsgY291bnQpO1xuICAgICAgaWYgKHRhcmdldF9vYmplY3QgPT09ICdkYXRhJykge1xuICAgICAgICByYXcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRwLmdldCgncmF3JykpKTtcbiAgICAgICAgZHAuc2V0KCdkYXRhJywgcmF3KTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRfb2JqZWN0ID09PSAndmlld3MnKSB7XG4gICAgICAgIGRwLnNldCgndmlld3MnLCB7fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZHAuc2F2ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2UuZWFjaCh0aGlzLm1vZGVscywgcmVzZXREYXRhcG9pbnQpO1xuICB9O1xuXG4gIHJldHVybiBEYXRhcG9pbnRDb2xsZWN0aW9uO1xuXG59KShCYWNrYm9uZS5Db2xsZWN0aW9uKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIE1vZGVsOiBEYXRhcG9pbnRNb2RlbCxcbiAgQ29sbGVjdGlvbjogRGF0YXBvaW50Q29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRndiMmx1ZEM5bGJuUnBkR2xsY3k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhCdmFXNTBMMlZ1ZEdsMGFXVnpMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxHMURRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3T3pKQ1FVTktMRTlCUVVFc1IwRkJVenM3TWtKQlNWUXNTVUZCUVN4SFFVRk5MRk5CUVVFN1YwRkRTaXhSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFXWXNRMEZCZFVJc1YwRkJka0lzUTBGQmJVTXNRMEZCUXl4UFFVRndReXhEUVVFMFF5eE5RVUUxUXl4RlFVRnZSQ3hKUVVGd1JEdEZRVVJKT3pzN08wZEJUSEZDTEZGQlFWRXNRMEZCUXpzN1FVRlZhRU03T3pzN096czdaME5CUTBvc1MwRkJRU3hIUVVGUE96dG5RMEZKVUN4cFFrRkJRU3hIUVVGdFFpeFRRVUZETEdGQlFVUTdRVUZIYWtJc1VVRkJRVHRKUVVGQkxFdEJRVUVzUjBGQlVUdEpRVU5TTEV0QlFVRXNSMEZCVVN4RlFVRkZMRU5CUVVNc1dVRkJTQ3hEUVVGblFpeEpRVUZETEVOQlFVRXNUVUZCYWtJN1NVRkhVaXhqUVVGQkxFZEJRV2xDTEZOQlFVTXNSVUZCUkR0QlFVZG1MRlZCUVVFN1RVRkJRU3hMUVVGQkxFZEJRVkVzUzBGQlFTeEhRVUZSTzAxQlEyaENMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlppeERRVUYxUWl4VFFVRjJRaXhEUVVGcFF5eERRVUZETEU5QlFXeERMRU5CUVRCRExFMUJRVEZETEVWQlFXdEVMR0ZCUVVFc1IwRkJZU3hEUVVGRExFVkJRVVVzUTBGQlF5eFpRVUZJTEVOQlFXZENMRXRCUVdoQ0xFTkJRVVFzUTBGQllpeEhRVUZ4UXl4TlFVRnlReXhIUVVFeVF5eExRVUUzUmp0TlFVbEJMRWxCUVVjc1lVRkJRU3hMUVVGcFFpeE5RVUZ3UWp0UlFVTkZMRWRCUVVFc1IwRkJUU3hKUVVGSkxFTkJRVU1zUzBGQlRDeERRVUZYTEVsQlFVa3NRMEZCUXl4VFFVRk1MRU5CUVdVc1JVRkJSU3hEUVVGRExFZEJRVWdzUTBGQlR5eExRVUZRTEVOQlFXWXNRMEZCV0R0UlFVTk9MRVZCUVVVc1EwRkJReXhIUVVGSUxFTkJRVThzVFVGQlVDeEZRVUZsTEVkQlFXWXNSVUZHUmpzN1RVRkxRU3hKUVVGSExHRkJRVUVzUzBGQmFVSXNUMEZCY0VJN1VVRkRSU3hGUVVGRkxFTkJRVU1zUjBGQlNDeERRVUZQTEU5QlFWQXNSVUZCWjBJc1JVRkJhRUlzUlVGRVJqczdRVUZIUVN4aFFVRlBMRVZCUVVVc1EwRkJReXhKUVVGSUxFTkJRVUU3U1VGb1FsRTdRVUZ0UW1wQ0xGZEJRVThzVDBGQlR5eERRVUZETEVsQlFWSXNRMEZCWVN4SlFVRkRMRU5CUVVFc1RVRkJaQ3hGUVVGelFpeGpRVUYwUWp0RlFURkNWVHM3T3p0SFFVeGhMRkZCUVZFc1EwRkJRenM3UVVGdFF6TkRMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRMFU3UlVGQlFTeExRVUZCTEVWQlFWa3NZMEZCV2p0RlFVTkJMRlZCUVVFc1JVRkJXU3h0UWtGRVdpSjlcbiIsInZhciBEYXRhcG9pbnRGYWN0b3J5LCBEZXhpZUZhY3RvcnksIEVudGl0aWVzLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRW50aXRpZXMgPSByZXF1aXJlKCcuL2VudGl0aWVzJyk7XG5cbkRleGllRmFjdG9yeSA9IHJlcXVpcmUoJy4uL2Jhc2UvZGV4aWVGYWN0b3J5Jyk7XG5cbkRhdGFwb2ludEZhY3RvcnkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGF0YXBvaW50RmFjdG9yeSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXBvaW50RmFjdG9yeSgpIHtcbiAgICByZXR1cm4gRGF0YXBvaW50RmFjdG9yeS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERhdGFwb2ludEZhY3RvcnkucHJvdG90eXBlLnRhYmxlTmFtZSA9ICdkYXRhcG9pbnRzJztcblxuICBEYXRhcG9pbnRGYWN0b3J5LnByb3RvdHlwZS5yYWRpb1JlcXVlc3RzID0ge1xuICAgICdkYXRhcG9pbnQgY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJyxcbiAgICAnZGF0YXBvaW50IHNhdmUnOiAnc2F2ZU1vZGVsJyxcbiAgICAnZGF0YXBvaW50IGRlc3Ryb3knOiAnZGVzdHJveU1vZGVsJ1xuICB9O1xuXG4gIERhdGFwb2ludEZhY3RvcnkucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZWRDb2xsZWN0aW9uID0gbmV3IEVudGl0aWVzLkNvbGxlY3Rpb24oKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXBvaW50RmFjdG9yeTtcblxufSkoRGV4aWVGYWN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRGF0YXBvaW50RmFjdG9yeSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGd2IybHVkQzltWVdOMGIzSjVMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjRzlwYm5RdlptRmpkRzl5ZVM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3gzUTBGQlFUdEZRVUZCT3pzN1FVRkJRU3hSUVVGQkxFZEJRV2RDTEU5QlFVRXNRMEZCVVN4WlFVRlNPenRCUVVOb1FpeFpRVUZCTEVkQlFXZENMRTlCUVVFc1EwRkJVU3h6UWtGQlVqczdRVUZKVmpzN096czdPenMyUWtGSFNpeFRRVUZCTEVkQlFWYzdPelpDUVVkWUxHRkJRVUVzUjBGRFJUdEpRVUZCTEhOQ1FVRkJMRVZCUVhkQ0xHVkJRWGhDTzBsQlEwRXNaMEpCUVVFc1JVRkJkMElzVjBGRWVFSTdTVUZGUVN4dFFrRkJRU3hGUVVGM1FpeGpRVVo0UWpzN096WkNRVWxHTEZWQlFVRXNSMEZCV1N4VFFVRkJPMWRCUTFZc1NVRkJReXhEUVVGQkxHZENRVUZFTEVkQlFXOUNMRWxCUVVrc1VVRkJVU3hEUVVGRExGVkJRV0lzUTBGQlFUdEZRVVJXT3pzN08wZEJXR2xDT3p0QlFXZENMMElzVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJc1NVRkJTU3huUWtGQlNpeERRVUZCSW4wPVxuIiwidmFyIEZhY2V0Rm9ybSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkZhY2V0Rm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGYWNldEZvcm0sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEZhY2V0Rm9ybSgpIHtcbiAgICByZXR1cm4gRmFjZXRGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY2FyZCBjYXJkLWJvZHknO1xuXG4gIEZhY2V0Rm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9mYWNldF9mb3JtJyk7XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgQ2FuY2VsQnV0dG9uOiB7fSxcbiAgICBNb2RlbEV2ZW50czoge30sXG4gICAgU3VibWl0QnV0dG9uOiB7fSxcbiAgICBGbGFzaGVzOiB7XG4gICAgICBzdWNjZXNzOiB7XG4gICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgdXBkYXRlZCBGYWNldC4nXG4gICAgICB9LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHVwZGF0aW5nIEZhY2V0LidcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS51aSA9IHtcbiAgICBjaGVja2JveDogJ2lucHV0W3R5cGU9Y2hlY2tib3hdJyxcbiAgICBlZGl0OiAnW2RhdGEtY2xpY2s9ZWRpdF0nXG4gIH07XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIEJhY2tib25lLlN5cGhvbi5kZXNlcmlhbGl6ZSh0aGlzLCB0aGlzLm1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgIHJldHVybiB0aGlzLnVpLmNoZWNrYm94LmJvb3RzdHJhcFN3aXRjaCh7XG4gICAgICB3cmFwcGVyQ2xhc3M6ICdlbmFibGUtZmFjZXQnLFxuICAgICAgb25UZXh0OiAnRW5hYmxlZCcsXG4gICAgICBvZmZUZXh0OiAnRGlzYWJsZWQnXG4gICAgfSk7XG4gIH07XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5vbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ2NhbmNlbCcsIHRoaXMpO1xuICB9O1xuXG4gIEZhY2V0Rm9ybS5wcm90b3R5cGUub25TdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YTtcbiAgICBkYXRhID0gQmFja2JvbmUuU3lwaG9uLnNlcmlhbGl6ZSh0aGlzKTtcbiAgICB0aGlzLm1vZGVsLnNldChkYXRhKTtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5zYXZlKCk7XG4gIH07XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5vblJlcXVlc3QgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmRpc2FibGVTdWJtaXQoKTtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlQ2FuY2VsKCk7XG4gIH07XG5cbiAgRmFjZXRGb3JtLnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZsYXNoU3VjY2VzcygpO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ3N5bmMnLCB0aGlzKTtcbiAgfTtcblxuICBGYWNldEZvcm0ucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZsYXNoRXJyb3IoKTtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyKCdzeW5jJywgdGhpcyk7XG4gIH07XG5cbiAgcmV0dXJuIEZhY2V0Rm9ybTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmFjZXRGb3JtO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZZMjl1Wm1sbkwyWmhZMlYwWDNacFpYZHpMMlpoWTJWMFJtOXliUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5amIyNW1hV2N2Wm1GalpYUmZkbWxsZDNNdlptRmpaWFJHYjNKdExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRFFTeEpRVUZCTEZOQlFVRTdSVUZCUVRzN08wRkJRVTA3T3pzN096czdjMEpCUTBvc1UwRkJRU3hIUVVGWE96dHpRa0ZEV0N4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxIZENRVUZTT3p0elFrRkZWaXhUUVVGQkxFZEJRMFU3U1VGQlFTeFpRVUZCTEVWQlFXTXNSVUZCWkR0SlFVTkJMRmRCUVVFc1JVRkJZU3hGUVVSaU8wbEJSVUVzV1VGQlFTeEZRVUZqTEVWQlJtUTdTVUZIUVN4UFFVRkJMRVZCUTBVN1RVRkJRU3hQUVVGQkxFVkJRMFU3VVVGQlFTeFBRVUZCTEVWQlFWVXNOa0pCUVZZN1QwRkVSanROUVVWQkxFdEJRVUVzUlVGRFJUdFJRVUZCTEU5QlFVRXNSVUZCVlN4MVFrRkJWanRQUVVoR08wdEJTa1k3T3p0elFrRlRSaXhGUVVGQkxFZEJRMFU3U1VGQlFTeFJRVUZCTEVWQlFWVXNjMEpCUVZZN1NVRkRRU3hKUVVGQkxFVkJRVlVzYlVKQlJGWTdPenR6UWtGSFJpeFJRVUZCTEVkQlFWVXNVMEZCUVR0SlFVTlNMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQmFFSXNRMEZCTmtJc1NVRkJOMElzUlVGQlowTXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhWUVVGMlF6dFhRVU5CTEVsQlFVTXNRMEZCUVN4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExHVkJRV0lzUTBGQk5rSTdUVUZCUlN4WlFVRkJMRVZCUVdNc1kwRkJhRUk3VFVGQlowTXNUVUZCUVN4RlFVRlJMRk5CUVhoRE8wMUJRVzFFTEU5QlFVRXNSVUZCVXl4VlFVRTFSRHRMUVVFM1FqdEZRVVpST3p0elFrRkpWaXhSUVVGQkxFZEJRVlVzVTBGQlFUdFhRVU5TTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1VVRkJWQ3hGUVVGdFFpeEpRVUZ1UWp0RlFVUlJPenR6UWtGSFZpeFJRVUZCTEVkQlFWVXNVMEZCUVR0QlFVTlNMRkZCUVVFN1NVRkJRU3hKUVVGQkxFZEJRVThzVVVGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4VFFVRm9RaXhEUVVFd1FpeEpRVUV4UWp0SlFVTlFMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUjBGQlVDeERRVUZYTEVsQlFWZzdWMEZEUVN4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFbEJRVkFzUTBGQlFUdEZRVWhST3p0elFrRkxWaXhUUVVGQkxFZEJRVmNzVTBGQlFUdEpRVU5VTEVsQlFVTXNRMEZCUVN4aFFVRkVMRU5CUVVFN1YwRkRRU3hKUVVGRExFTkJRVUVzWVVGQlJDeERRVUZCTzBWQlJsTTdPM05DUVVsWUxFMUJRVUVzUjBGQlVTeFRRVUZCTzBsQlEwNHNTVUZCUXl4RFFVRkJMRmxCUVVRc1EwRkJRVHRYUVVOQkxFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNUVUZCVkN4RlFVRnBRaXhKUVVGcVFqdEZRVVpOT3p0elFrRkpVaXhQUVVGQkxFZEJRVk1zVTBGQlFUdEpRVU5RTEVsQlFVTXNRMEZCUVN4VlFVRkVMRU5CUVVFN1YwRkRRU3hKUVVGRExFTkJRVUVzVDBGQlJDeERRVUZUTEUxQlFWUXNSVUZCYVVJc1NVRkJha0k3UlVGR1R6czdPenRIUVhSRFlTeEZRVUZGTEVOQlFVTTdPMEZCTkVNelFpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgRmFjZXRDaGlsZCwgRmFjZXRMaXN0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmFjZXRDaGlsZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGYWNldENoaWxkLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGYWNldENoaWxkKCkge1xuICAgIHJldHVybiBGYWNldENoaWxkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmFjZXRDaGlsZC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9mYWNldF9jaGlsZCcpO1xuXG4gIEZhY2V0Q2hpbGQucHJvdG90eXBlLmNsYXNzTmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjc3M7XG4gICAgY3NzID0gWydsaXN0LWdyb3VwLWl0ZW0nXTtcbiAgICBpZiAodGhpcy5tb2RlbC5nZXQoJ2VuYWJsZWQnKSkge1xuICAgICAgY3NzLnB1c2goJ2xpc3QtZ3JvdXAtaXRlbS1zdWNjZXNzJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5tb2RlbC5nZXQoJ2VuYWJsZWQnKSkge1xuICAgICAgY3NzLnB1c2goJ2xpc3QtZ3JvdXAtaXRlbS13YXJuaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiBjc3Muam9pbignICcpO1xuICB9O1xuXG4gIEZhY2V0Q2hpbGQucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBTZWxlY3RhYmxlQ2hpbGQ6IHt9LFxuICAgIFNvcnRhYmxlQ2hpbGQ6IHt9XG4gIH07XG5cbiAgRmFjZXRDaGlsZC5wcm90b3R5cGUubW9kZWxFdmVudHMgPSB7XG4gICAgJ2NoYW5nZTpvcmRlcic6ICdvblJlb3JkZXJlZCcsXG4gICAgJ3N5bmMnOiAnb25TeW5jJ1xuICB9O1xuXG4gIEZhY2V0Q2hpbGQucHJvdG90eXBlLm9uU3luYyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjc3M7XG4gICAgY3NzID0gdGhpcy5jbGFzc05hbWUoKTtcbiAgICByZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcyhjc3MpO1xuICB9O1xuXG4gIEZhY2V0Q2hpbGQucHJvdG90eXBlLm9uUmVvcmRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuc2F2ZSgpO1xuICB9O1xuXG4gIHJldHVybiBGYWNldENoaWxkO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuRmFjZXRMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZhY2V0TGlzdCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmFjZXRMaXN0KCkge1xuICAgIHJldHVybiBGYWNldExpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGYWNldExpc3QucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwJztcblxuICBGYWNldExpc3QucHJvdG90eXBlLmNoaWxkVmlldyA9IEZhY2V0Q2hpbGQ7XG5cbiAgRmFjZXRMaXN0LnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgU29ydGFibGVMaXN0OiB7fVxuICB9O1xuXG4gIHJldHVybiBGYWNldExpc3Q7XG5cbn0pKE1uLkNvbGxlY3Rpb25WaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWNldExpc3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlkyOXVabWxuTDJaaFkyVjBYM1pwWlhkekwyWmhZMlYwVEdsemRDNWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDIxdlpIVnNaWE12WkdGMFlYTmxkQzlqYjI1bWFXY3ZabUZqWlhSZmRtbGxkM012Wm1GalpYUk1hWE4wTG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZEUVN4SlFVRkJMSEZDUVVGQk8wVkJRVUU3T3p0QlFVRk5PenM3T3pzN08zVkNRVU5LTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc2VVSkJRVkk3TzNWQ1FVVldMRk5CUVVFc1IwRkJWeXhUUVVGQk8wRkJRMVFzVVVGQlFUdEpRVUZCTEVkQlFVRXNSMEZCVFN4RFFVRkRMR2xDUVVGRU8wbEJRMDRzU1VGQmRVTXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzVTBGQldDeERRVUYyUXp0TlFVRkJMRWRCUVVjc1EwRkJReXhKUVVGS0xFTkJRVk1zZVVKQlFWUXNSVUZCUVRzN1NVRkRRU3hKUVVGMVF5eERRVUZKTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExGTkJRVmdzUTBGQk0wTTdUVUZCUVN4SFFVRkhMRU5CUVVNc1NVRkJTaXhEUVVGVExIbENRVUZVTEVWQlFVRTdPMEZCUTBFc1YwRkJUeXhIUVVGSExFTkJRVU1zU1VGQlNpeERRVUZUTEVkQlFWUTdSVUZLUlRzN2RVSkJUVmdzVTBGQlFTeEhRVU5GTzBsQlFVRXNaVUZCUVN4RlFVRnBRaXhGUVVGcVFqdEpRVU5CTEdGQlFVRXNSVUZCWlN4RlFVUm1PenM3ZFVKQlIwWXNWMEZCUVN4SFFVTkZPMGxCUVVFc1kwRkJRU3hGUVVGblFpeGhRVUZvUWp0SlFVTkJMRTFCUVVFc1JVRkJaMElzVVVGRWFFSTdPenQxUWtGSFJpeE5RVUZCTEVkQlFWRXNVMEZCUVR0QlFVTk9MRkZCUVVFN1NVRkJRU3hIUVVGQkxFZEJRVTBzU1VGQlF5eERRVUZCTEZOQlFVUXNRMEZCUVR0WFFVVk9MRWxCUVVNc1EwRkJRU3hIUVVGSExFTkJRVU1zVjBGQlRDeERRVUZCTEVOQlFXdENMRU5CUVVNc1VVRkJia0lzUTBGQk5FSXNSMEZCTlVJN1JVRklUVHM3ZFVKQlMxSXNWMEZCUVN4SFFVRmhMRk5CUVVFN1YwRkRXQ3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVsQlFWQXNRMEZCUVR0RlFVUlhPenM3TzBkQmRFSlZMRVZCUVVVc1EwRkJRenM3UVVFeVFuUkNPenM3T3pzN08zTkNRVU5LTEZOQlFVRXNSMEZCVnpzN2MwSkJRMWdzVTBGQlFTeEhRVUZYT3p0elFrRkZXQ3hUUVVGQkxFZEJRMFU3U1VGQlFTeFpRVUZCTEVWQlFXTXNSVUZCWkRzN096czdSMEZNYjBJc1JVRkJSU3hEUVVGRE96dEJRVk16UWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBGYWNldFZpZXdlcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkZhY2V0Vmlld2VyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZhY2V0Vmlld2VyLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGYWNldFZpZXdlcigpIHtcbiAgICByZXR1cm4gRmFjZXRWaWV3ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGYWNldFZpZXdlci5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9mYWNldF92aWV3ZXInKTtcblxuICBGYWNldFZpZXdlci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBGYWNldFZpZXdlci5wcm90b3R5cGUudWkgPSB7XG4gICAgZWRpdDogJ1tkYXRhLWNsaWNrPWVkaXRdJyxcbiAgICBsaW5rOiAnW2RhdGEtY2xpY2s9bGlua10nXG4gIH07XG5cbiAgRmFjZXRWaWV3ZXIucHJvdG90eXBlLnRyaWdnZXJzID0ge1xuICAgICdjbGljayBAdWkuZWRpdCc6ICdlZGl0J1xuICB9O1xuXG4gIEZhY2V0Vmlld2VyLnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrIEB1aS5saW5rJzogJ2xpbmtUb09udG9sb2d5J1xuICB9O1xuXG4gIEZhY2V0Vmlld2VyLnByb3RvdHlwZS5saW5rVG9PbnRvbG9neSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmxpbmtUb09udG9sb2d5KCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlcigpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIEZhY2V0Vmlld2VyO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWNldFZpZXdlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WTI5dVptbG5MMlpoWTJWMFgzWnBaWGR6TDJaaFkyVjBWbWxsZDJWeUxtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTlrWVhSaGMyVjBMMk52Ym1acFp5OW1ZV05sZEY5MmFXVjNjeTltWVdObGRGWnBaWGRsY2k1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUTBFc1NVRkJRU3hYUVVGQk8wVkJRVUU3T3p0QlFVRk5PenM3T3pzN08zZENRVU5LTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc01FSkJRVkk3TzNkQ1FVTldMRk5CUVVFc1IwRkJWenM3ZDBKQlJWZ3NSVUZCUVN4SFFVTkZPMGxCUVVFc1NVRkJRU3hGUVVGTkxHMUNRVUZPTzBsQlEwRXNTVUZCUVN4RlFVRk5MRzFDUVVST096czdkMEpCUjBZc1VVRkJRU3hIUVVORk8wbEJRVUVzWjBKQlFVRXNSVUZCYTBJc1RVRkJiRUk3T3p0M1FrRkZSaXhOUVVGQkxFZEJRMFU3U1VGQlFTeG5Ra0ZCUVN4RlFVRnJRaXhuUWtGQmJFSTdPenQzUWtGRlJpeGpRVUZCTEVkQlFXZENMRk5CUVVFN1YwRkRaQ3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEdOQlFWQXNRMEZCUVN4RFFVRjFRaXhEUVVGRExFbEJRWGhDTEVOQlFUWkNMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVUZOTEV0QlFVTXNRMEZCUVN4TlFVRkVMRU5CUVVFN1RVRkJUanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCTjBJN1JVRkVZenM3T3p0SFFXUlJMRVZCUVVVc1EwRkJRenM3UVVGdFFqZENMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIEZhY2V0Rm9ybSwgRmFjZXRMaXN0LCBGYWNldExpc3RMYXlvdXQsIEZhY2V0Vmlld2VyLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkZhY2V0TGlzdCA9IHJlcXVpcmUoJy4vZmFjZXRMaXN0Jyk7XG5cbkZhY2V0Vmlld2VyID0gcmVxdWlyZSgnLi9mYWNldFZpZXdlcicpO1xuXG5GYWNldEZvcm0gPSByZXF1aXJlKCcuL2ZhY2V0Rm9ybScpO1xuXG5GYWNldExpc3RMYXlvdXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRmFjZXRMaXN0TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGYWNldExpc3RMYXlvdXQoKSB7XG4gICAgdGhpcy5zaG93RmFjZXRFZGl0b3IgPSBiaW5kKHRoaXMuc2hvd0ZhY2V0RWRpdG9yLCB0aGlzKTtcbiAgICB0aGlzLnNob3dGYWNldFZpZXdlciA9IGJpbmQodGhpcy5zaG93RmFjZXRWaWV3ZXIsIHRoaXMpO1xuICAgIHJldHVybiBGYWNldExpc3RMYXlvdXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGYWNldExpc3RMYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIEZhY2V0TGlzdExheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9mYWNldF9saXN0X2xheW91dCcpO1xuXG4gIEZhY2V0TGlzdExheW91dC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIEZsYXNoZXM6IHtcbiAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBsaW5rZWQgYWxsIGZhY2V0cy4nXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEZhY2V0TGlzdExheW91dC5wcm90b3R5cGUudWkgPSB7XG4gICAgbGlua0ZhY2V0czogJ1tkYXRhLWNsaWNrPWxpbmstZmFjZXRzXSdcbiAgfTtcblxuICBGYWNldExpc3RMYXlvdXQucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2xpY2sgQHVpLmxpbmtGYWNldHMnOiAnbGlua0ZhY2V0cydcbiAgfTtcblxuICBGYWNldExpc3RMYXlvdXQucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgbGlzdFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1saXN0XScsXG4gICAgdmlld2VyUmVnaW9uOiAnW2RhdGEtcmVnaW9uPXZpZXdlcl0nXG4gIH07XG5cbiAgRmFjZXRMaXN0TGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaXN0VmlldywgcmVmO1xuICAgIGxpc3RWaWV3ID0gbmV3IEZhY2V0TGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KTtcbiAgICBsaXN0Vmlldy5vbignY2hpbGR2aWV3OnNlbGVjdGVkJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0ZhY2V0Vmlld2VyKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgdGhpcy5saXN0UmVnaW9uLnNob3cobGlzdFZpZXcpO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5jb2xsZWN0aW9uLmF0KDApKSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgRmFjZXRMaXN0TGF5b3V0LnByb3RvdHlwZS5saW5rRmFjZXRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5saW5rQWxsRmFjZXRzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgX3RoaXMuZmxhc2hTdWNjZXNzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcy5yZW5kZXIoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIEZhY2V0TGlzdExheW91dC5wcm90b3R5cGUuc2hvd0ZhY2V0Vmlld2VyID0gZnVuY3Rpb24oZmFjZXRNb2RlbCkge1xuICAgIHZhciBmYWNldFZpZXdlcjtcbiAgICBmYWNldFZpZXdlciA9IG5ldyBGYWNldFZpZXdlcih7XG4gICAgICBtb2RlbDogZmFjZXRNb2RlbFxuICAgIH0pO1xuICAgIGZhY2V0Vmlld2VyLm9uKCdlZGl0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0ZhY2V0RWRpdG9yKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMudmlld2VyUmVnaW9uLnNob3coZmFjZXRWaWV3ZXIpO1xuICB9O1xuXG4gIEZhY2V0TGlzdExheW91dC5wcm90b3R5cGUuc2hvd0ZhY2V0RWRpdG9yID0gZnVuY3Rpb24oZmFjZXRNb2RlbCkge1xuICAgIHZhciBmYWNldEZvcm07XG4gICAgZmFjZXRGb3JtID0gbmV3IEZhY2V0Rm9ybSh7XG4gICAgICBtb2RlbDogZmFjZXRNb2RlbFxuICAgIH0pO1xuICAgIGZhY2V0Rm9ybS5vbignY2FuY2VsJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0ZhY2V0Vmlld2VyKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgZmFjZXRGb3JtLm9uKCdzeW5jJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0ZhY2V0Vmlld2VyKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMudmlld2VyUmVnaW9uLnNob3coZmFjZXRGb3JtKTtcbiAgfTtcblxuICByZXR1cm4gRmFjZXRMaXN0TGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGYWNldExpc3RMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlkyOXVabWxuTDJaaFkyVjBYM1pwWlhkekwyeGhlVzkxZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOWpiMjVtYVdjdlptRmpaWFJmZG1sbGQzTXZiR0Y1YjNWMExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeEpRVUZCTEd0RVFVRkJPMFZCUVVFN096czdRVUZCUVN4VFFVRkJMRWRCUVZrc1QwRkJRU3hEUVVGUkxHRkJRVkk3TzBGQlExb3NWMEZCUVN4SFFVRmpMRTlCUVVFc1EwRkJVU3hsUVVGU096dEJRVU5rTEZOQlFVRXNSMEZCV1N4UFFVRkJMRU5CUVZFc1lVRkJVanM3UVVGSlRqczdPenM3T3pzN096UkNRVU5LTEZOQlFVRXNSMEZCVnpzN05FSkJRMWdzVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN3clFrRkJVanM3TkVKQlJWWXNVMEZCUVN4SFFVTkZPMGxCUVVFc1QwRkJRU3hGUVVORk8wMUJRVUVzVDBGQlFTeEZRVU5GTzFGQlFVRXNUMEZCUVN4RlFVRlZMR2xEUVVGV08wOUJSRVk3UzBGRVJqczdPelJDUVVsR0xFVkJRVUVzUjBGRFJUdEpRVUZCTEZWQlFVRXNSVUZCV1N3d1FrRkJXanM3T3pSQ1FVVkdMRTFCUVVFc1IwRkRSVHRKUVVGQkxITkNRVUZCTEVWQlFYZENMRmxCUVhoQ096czdORUpCUlVZc1QwRkJRU3hIUVVORk8wbEJRVUVzVlVGQlFTeEZRVUZqTEc5Q1FVRmtPMGxCUTBFc1dVRkJRU3hGUVVGakxITkNRVVJrT3pzN05FSkJSMFlzVVVGQlFTeEhRVUZWTEZOQlFVRTdRVUZEVWl4UlFVRkJPMGxCUVVFc1VVRkJRU3hIUVVGWExFbEJRVWtzVTBGQlNpeERRVUZqTzAxQlFVVXNWVUZCUVN4RlFVRlpMRWxCUVVNc1EwRkJRU3hWUVVGbU8wdEJRV1E3U1VGRFdDeFJRVUZSTEVOQlFVTXNSVUZCVkN4RFFVRlpMRzlDUVVGYUxFVkJRV3RETEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhKUVVGRU8yVkJRVlVzUzBGQlF5eERRVUZCTEdWQlFVUXNRMEZCYVVJc1NVRkJTU3hEUVVGRExFdEJRWFJDTzAxQlFWWTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRV3hETzBsQlEwRXNTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhKUVVGYUxFTkJRV2xDTEZGQlFXcENPM05FUVVOcFFpeERRVUZGTEU5QlFXNUNMRU5CUVRKQ0xGVkJRVE5DTzBWQlNsRTdPelJDUVUxV0xGVkJRVUVzUjBGQldTeFRRVUZCTzFkQlExWXNTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhoUVVGYUxFTkJRVUVzUTBGQk1rSXNRMEZCUXl4SlFVRTFRaXhEUVVGcFF5eERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVFN1VVRkRMMElzUzBGQlF5eERRVUZCTEZsQlFVUXNRMEZCUVR0bFFVTkJMRXRCUVVNc1EwRkJRU3hOUVVGRUxFTkJRVUU3VFVGR0swSTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRV3BETzBWQlJGVTdPelJDUVV0YUxHVkJRVUVzUjBGQmFVSXNVMEZCUXl4VlFVRkVPMEZCUjJZc1VVRkJRVHRKUVVGQkxGZEJRVUVzUjBGQll5eEpRVUZKTEZkQlFVb3NRMEZCWjBJN1RVRkJSU3hMUVVGQkxFVkJRVThzVlVGQlZEdExRVUZvUWp0SlFVZGtMRmRCUVZjc1EwRkJReXhGUVVGYUxFTkJRV1VzVFVGQlppeEZRVUYxUWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zU1VGQlJEdGxRVUZWTEV0QlFVTXNRMEZCUVN4bFFVRkVMRU5CUVdsQ0xFbEJRVWtzUTBGQlF5eExRVUYwUWp0TlFVRldPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUYyUWp0WFFVZEJMRWxCUVVNc1EwRkJRU3haUVVGWkxFTkJRVU1zU1VGQlpDeERRVUZ0UWl4WFFVRnVRanRGUVZSbE96czBRa0ZYYWtJc1pVRkJRU3hIUVVGcFFpeFRRVUZETEZWQlFVUTdRVUZIWml4UlFVRkJPMGxCUVVFc1UwRkJRU3hIUVVGWkxFbEJRVWtzVTBGQlNpeERRVUZqTzAxQlFVVXNTMEZCUVN4RlFVRlBMRlZCUVZRN1MwRkJaRHRKUVVkYUxGTkJRVk1zUTBGQlF5eEZRVUZXTEVOQlFXRXNVVUZCWWl4RlFVRjFRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNTVUZCUkR0bFFVRlZMRXRCUVVNc1EwRkJRU3hsUVVGRUxFTkJRV2xDTEVsQlFVa3NRMEZCUXl4TFFVRjBRanROUVVGV08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRjJRanRKUVVkQkxGTkJRVk1zUTBGQlF5eEZRVUZXTEVOQlFXRXNUVUZCWWl4RlFVRnhRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNTVUZCUkR0bFFVRlZMRXRCUVVNc1EwRkJRU3hsUVVGRUxFTkJRV2xDTEVsQlFVa3NRMEZCUXl4TFFVRjBRanROUVVGV08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRnlRanRYUVVkQkxFbEJRVU1zUTBGQlFTeFpRVUZaTEVOQlFVTXNTVUZCWkN4RFFVRnRRaXhUUVVGdVFqdEZRVnBsT3pzN08wZEJla05YTEVWQlFVVXNRMEZCUXpzN1FVRjVSR3BETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGxhYmVsKSB7XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWJhcnMgY3Vyc29yLXBvaW50ZXIgc29ydGFibGVcXFwiPjwvaT48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTBcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gbGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcImxhYmVsXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5sYWJlbDp0eXBlb2YgbGFiZWwhPT1cInVuZGVmaW5lZFwiP2xhYmVsOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGVuYWJsZWQpIHtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGZpZWxkc2V0XCIgKyAoamFkZS5jbHMoWydmb3JtLWdyb3VwJyxvcHRzLmZvcm1Hcm91cENzc10sIFtudWxsLHRydWVdKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMubGFiZWwpXG57XG5idWYucHVzaChcIjxsYWJlbCBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWxhYmVsXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMubGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvbGFiZWw+XCIpO1xufVxuYmxvY2sgJiYgYmxvY2soKTtcbmJ1Zi5wdXNoKFwiPC9maWVsZHNldD5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8aW5wdXRcIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInBsYWNlaG9sZGVyXCI6IGphZGUuZXNjYXBlKG9wdHMucGxhY2Vob2xkZXIpLFwibmFtZVwiOiBqYWRlLmVzY2FwZShvcHRzLm5hbWUpLFwidHlwZVwiOiBqYWRlLmVzY2FwZShvcHRzLnR5cGUpLFwidmFsdWVcIjogamFkZS5lc2NhcGUob3B0cy52YWx1ZSksXCJjbGFzc1wiOiBcImZvcm0tY29udHJvbFwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIi8+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImZvcm1UZXh0QXJlYVwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8dGV4dGFyZWFcIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInBsYWNlaG9sZGVyXCI6IGphZGUuZXNjYXBlKG9wdHMucGxhY2Vob2xkZXIpLFwibmFtZVwiOiBqYWRlLmVzY2FwZShvcHRzLm5hbWUpLFwidHlwZVwiOiBqYWRlLmVzY2FwZShvcHRzLnR5cGUpLFwicm93c1wiOiBqYWRlLmVzY2FwZShvcHRzLnJvd3MpLFwiY29sc1wiOiBqYWRlLmVzY2FwZShvcHRzLmNvbHMpLFwiY2xhc3NcIjogXCJmb3JtLWNvbnRyb2xcIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCI+PC90ZXh0YXJlYT5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ0NhbmNlbCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLXRpbWVzJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwiY2FuY2VsXCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+RWRpdCBGYWNldDwvaDQ+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdKHsgbGFiZWw6ICdMYWJlbCcsIHBsYWNlaG9sZGVyOiAnTGFiZWwnLCBuYW1lOiAnbGFiZWwnLCB0eXBlOiAndGV4dCcgfSk7XG5idWYucHVzaChcIjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnRW5hYmxlZCcsIGZvcm1Hcm91cENzczogJ20tYi0wJywgbmFtZTogJ2VuYWJsZWQnLCB0eXBlOiAnY2hlY2tib3gnLCB2YWx1ZTogZW5hYmxlZCB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1UZXh0QXJlYVwiXSh7IGxhYmVsOiAnVG9vbHRpcCcsIHBsYWNlaG9sZGVyOiAnVG9vbHRpcCcsIG5hbWU6ICd0b29sdGlwJywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdKHt9KTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+XCIpO30uY2FsbCh0aGlzLFwiZW5hYmxlZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZW5hYmxlZDp0eXBlb2YgZW5hYmxlZCE9PVwidW5kZWZpbmVkXCI/ZW5hYmxlZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPjxwIGNsYXNzPVxcXCJsZWFkIG1iLTBcXFwiPkZhY2V0czwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNiB0ZXh0LXJpZ2h0XFxcIj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcImxpbmstZmFjZXRzXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnlcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1saW5rXFxcIj48L2k+Jm5ic3A7XFxuTGluayBGYWNldHMgdG8gT250b2xvZ2llczwvYnV0dG9uPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwibGlzdFxcXCIgY2xhc3M9XFxcImNvbC1sZy0zXFxcIj48L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJ2aWV3ZXJcXFwiIGNsYXNzPVxcXCJjb2wtbGctOVxcXCI+PC9kaXY+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGF0dHJpYnV0ZSwgZW5hYmxlZCwgbGFiZWwsIHRvb2x0aXApIHtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNlxcXCI+PGg0IGNsYXNzPVxcXCJjYXJkLXRpdGxlXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IGxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2g0PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02IHRleHQtcmlnaHRcXFwiPjxidXR0b24gZGF0YS1jbGljaz1cXFwibGlua1xcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IG1yLTJcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1saW5rXFxcIj48L2k+Jm5ic3A7XFxuTGluayB0byBPbnRvbG9neTwvYnV0dG9uPjxidXR0b24gZGF0YS1jbGljaz1cXFwiZWRpdFxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtc3VjY2Vzc1xcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBlbmNpbFxcXCI+PC9pPiZuYnNwO1xcbkVkaXQ8L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXByaW1hcnlcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1zZWFyY2hcXFwiPjwvaT4mbmJzcDtcXG5NYXRjaGVzIHRoZTxzdHJvbmc+IFwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGF0dHJpYnV0ZSkgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiPC9zdHJvbmc+IGF0dHJpYnV0ZS48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmlmICggdG9vbHRpcClcbntcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXF1ZXN0aW9uLWNpcmNsZS1vXFxcIj48L2k+Jm5ic3A7XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSB0b29sdGlwKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXdhcm5pbmdcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS13YXJuaW5nXFxcIj48L2k+Jm5ic3A7XFxuTm8gdG9vbHRpcCBkZWZpbmVkIGZvciB0aGlzIGZhY2V0LjwvZGl2PlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5pZiAoIGVuYWJsZWQpXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1jaGVjay1jaXJjbGUtb1xcXCI+PC9pPiZuYnNwO1xcbkZhY2V0IGlzIGVuYWJsZWQuPC9kaXY+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC13YXJuaW5nXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtd2FybmluZ1xcXCI+PC9pPiZuYnNwO1xcbkZhY2V0IGlzIG5vdCBlbmFibGVkLjwvZGl2PlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+XCIpO30uY2FsbCh0aGlzLFwiYXR0cmlidXRlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5hdHRyaWJ1dGU6dHlwZW9mIGF0dHJpYnV0ZSE9PVwidW5kZWZpbmVkXCI/YXR0cmlidXRlOnVuZGVmaW5lZCxcImVuYWJsZWRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmVuYWJsZWQ6dHlwZW9mIGVuYWJsZWQhPT1cInVuZGVmaW5lZFwiP2VuYWJsZWQ6dW5kZWZpbmVkLFwibGFiZWxcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmxhYmVsOnR5cGVvZiBsYWJlbCE9PVwidW5kZWZpbmVkXCI/bGFiZWw6dW5kZWZpbmVkLFwidG9vbHRpcFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudG9vbHRpcDp0eXBlb2YgdG9vbHRpcCE9PVwidW5kZWZpbmVkXCI/dG9vbHRpcDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgRGF0YXNldENvbmZpZ1JvdXRlLCBMYXlvdXRWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0Jyk7XG5cbkRhdGFzZXRDb25maWdSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0Q29uZmlnUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRDb25maWdSb3V0ZSgpIHtcbiAgICByZXR1cm4gRGF0YXNldENvbmZpZ1JvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldENvbmZpZ1JvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIkRhdGFzZXRzIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBDb25maWd1cmF0aW9uXCI7XG4gIH07XG5cbiAgRGF0YXNldENvbmZpZ1JvdXRlLnByb3RvdHlwZS5icmVhZGNydW1icyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRleHQ6ICdIb21lJyxcbiAgICAgICAgaHJlZjogJyMnXG4gICAgICB9LCB7XG4gICAgICAgIGhyZWY6IFwiI2RhdGFzZXRzXCIsXG4gICAgICAgIHRleHQ6ICdBcmNoaXZlcydcbiAgICAgIH0sIHtcbiAgICAgICAgaHJlZjogXCIjZGF0YXNldHMvXCIgKyB0aGlzLm1vZGVsLmlkLFxuICAgICAgICB0ZXh0OiB0aGlzLm1vZGVsLmdldCgnbGFiZWwnKVxuICAgICAgfSwge1xuICAgICAgICBocmVmOiBcIiNkYXRhc2V0cy9cIiArIHRoaXMubW9kZWwuaWQgKyBcIi9zZWFyY2hcIixcbiAgICAgICAgdGV4dDogJ1NlYXJjaCdcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDogJ0NvbmZpZ3VyYXRpb24nXG4gICAgICB9XG4gICAgXTtcbiAgfTtcblxuICBEYXRhc2V0Q29uZmlnUm91dGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGF0YXNldCcpLnJlcXVlc3QoJ21vZGVsJywgaWQpLnRoZW4oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBEYXRhc2V0Q29uZmlnUm91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBEYXRhc2V0Q29uZmlnUm91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFzZXRDb25maWdSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WTI5dVptbG5MM0p2ZFhSbExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTlrWVhSaGMyVjBMMk52Ym1acFp5OXliM1YwWlM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3c0UWtGQlFUdEZRVUZCT3pzN1FVRkJRU3hWUVVGQkxFZEJRV01zVDBGQlFTeERRVUZSTEdkQ1FVRlNPenRCUVVsU096czdPenM3T3l0Q1FVZEtMRXRCUVVFc1IwRkJUeXhUUVVGQk8wRkJRMHdzVjBGQlR5eGhRVUZCTEVkQlFXRXNRMEZCUXl4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFZEJRVkFzUTBGQlZ5eFBRVUZZTEVOQlFVUXNRMEZCWWl4SFFVRnJRenRGUVVSd1F6czdLMEpCUjFBc1YwRkJRU3hIUVVGaExGTkJRVUU3UVVGRFdDeFhRVUZQTzAxQlEwdzdVVUZCUlN4SlFVRkJMRVZCUVUwc1RVRkJVanRSUVVGblFpeEpRVUZCTEVWQlFVMHNSMEZCZEVJN1QwRkVTeXhGUVVWTU8xRkJRVVVzU1VGQlFTeEZRVUZOTEZkQlFWSTdVVUZCY1VJc1NVRkJRU3hGUVVGTkxGVkJRVE5DTzA5QlJrc3NSVUZIVER0UlFVRkZMRWxCUVVFc1JVRkJUU3haUVVGQkxFZEJRV0VzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4RlFVRTFRanRSUVVGclF5eEpRVUZCTEVWQlFVMHNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzVDBGQldDeERRVUY0UXp0UFFVaExMRVZCU1V3N1VVRkJSU3hKUVVGQkxFVkJRVTBzV1VGQlFTeEhRVUZoTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1JVRkJjRUlzUjBGQmRVSXNVMEZCTDBJN1VVRkJlVU1zU1VGQlFTeEZRVUZOTEZGQlFTOURPMDlCU2tzc1JVRkxURHRSUVVGRkxFbEJRVUVzUlVGQlRTeGxRVUZTTzA5QlRFczdPMFZCUkVrN095dENRVk5pTEV0QlFVRXNSMEZCVHl4VFFVRkRMRVZCUVVRN1YwRkRUQ3hSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFXWXNRMEZCZFVJc1UwRkJka0lzUTBGQmFVTXNRMEZCUXl4UFFVRnNReXhEUVVFd1F5eFBRVUV4UXl4RlFVRnRSQ3hGUVVGdVJDeERRVU5CTEVOQlFVTXNTVUZFUkN4RFFVTk5MRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eExRVUZFTzJWQlFWY3NTMEZCUXl4RFFVRkJMRXRCUVVRc1IwRkJVenROUVVGd1FqdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkVUanRGUVVSTE96c3JRa0ZKVUN4TlFVRkJMRWRCUVZFc1UwRkJRVHRYUVVOT0xFbEJRVU1zUTBGQlFTeFRRVUZUTEVOQlFVTXNTVUZCV0N4RFFVRm5RaXhKUVVGSkxGVkJRVW9zUTBGQlpUdE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanRMUVVGbUxFTkJRV2hDTzBWQlJFMDdPenM3UjBGdVFuVkNMRTlCUVVFc1EwRkJVU3h6UWtGQlVqczdRVUYzUW1wRExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgS25vd2xlZGdlUnVsZUZvcm0sIEtub3dsZWRnZVJ1bGVMYXlvdXQsIFJ1bGVGb3JtLCBSdWxlTGF5b3V0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuS25vd2xlZGdlUnVsZUxheW91dCA9IHJlcXVpcmUoJy4uLy4uL2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL2xheW91dCcpO1xuXG5Lbm93bGVkZ2VSdWxlRm9ybSA9IHJlcXVpcmUoJy4uLy4uL2tub3dsZWRnZV9jYXB0dXJlL3ZpZXdzL3J1bGVGb3JtJyk7XG5cblJ1bGVGb3JtID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJ1bGVGb3JtLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlRm9ybSgpIHtcbiAgICByZXR1cm4gUnVsZUZvcm0uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSdWxlRm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9ydWxlX2Zvcm0nKTtcblxuICBSdWxlRm9ybS5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICBCYWNrYm9uZS5TeXBob24uZGVzZXJpYWxpemUodGhpcywgdGhpcy5tb2RlbC5hdHRyaWJ1dGVzKTtcbiAgICByZXR1cm4gdGhpcy5zaG93RGVmaW5pdGlvbkxpc3QoKTtcbiAgfTtcblxuICByZXR1cm4gUnVsZUZvcm07XG5cbn0pKEtub3dsZWRnZVJ1bGVGb3JtKTtcblxuUnVsZUxheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSdWxlTGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlTGF5b3V0KCkge1xuICAgIHJldHVybiBSdWxlTGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAncm93JztcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5zaG93UnVsZUZvcm0gPSBmdW5jdGlvbihtb2RlbCkge1xuICAgIHZhciBmb3JtTW9kZWw7XG4gICAgaWYgKG1vZGVsLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIG1vZGVsID0gbnVsbDtcbiAgICB9XG4gICAgZm9ybU1vZGVsID0gbW9kZWwgfHwgdGhpcy5idWlsZE5ld1J1bGUoKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFNvdXJjZU9wdGlvbnMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNvdXJjZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGZvcm1WaWV3O1xuICAgICAgICBmb3JtVmlldyA9IG5ldyBSdWxlRm9ybSh7XG4gICAgICAgICAgbW9kZWw6IGZvcm1Nb2RlbCxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBmb3JtTW9kZWwuZ2V0KCdkZWZpbml0aW9ucycpLFxuICAgICAgICAgIHNvdXJjZU9wdGlvbnM6IHNvdXJjZU9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIGZvcm1WaWV3Lm9uKCdjYW5jZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd1J1bGVMaXN0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3JtVmlldy5vbignc3luYycsIGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgICAgX3RoaXMuY29sbGVjdGlvbi5hZGQobW9kZWwpO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93UnVsZUxpc3QoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcy5jb250ZW50UmVnaW9uLnNob3coZm9ybVZpZXcpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIFJ1bGVMYXlvdXQ7XG5cbn0pKEtub3dsZWRnZVJ1bGVMYXlvdXQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJ1bGVMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlkyOXVabWxuTDNacFpYZGxjbDl5ZFd4bFgzWnBaWGR6TDJ4aGVXOTFkQzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5amIyNW1hV2N2ZG1sbGQyVnlYM0oxYkdWZmRtbGxkM012YkdGNWIzVjBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxEUkVRVUZCTzBWQlFVRTdPenRCUVVGQkxHMUNRVUZCTEVkQlFYTkNMRTlCUVVFc1EwRkJVU3h6UTBGQlVqczdRVUZEZEVJc2FVSkJRVUVzUjBGQmIwSXNUMEZCUVN4RFFVRlJMSGREUVVGU096dEJRVWxrT3pzN096czdPM0ZDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNkVUpCUVZJN08zRkNRVVZXTEZGQlFVRXNSMEZCVlN4VFFVRkJPMGxCUTFJc1VVRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF5eFhRVUZvUWl4RFFVRTJRaXhKUVVFM1FpeEZRVUZuUXl4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExGVkJRWFpETzFkQlEwRXNTVUZCUXl4RFFVRkJMR3RDUVVGRUxFTkJRVUU3UlVGR1VUczdPenRIUVVoWE96dEJRVk5xUWpzN096czdPenQxUWtGRFNpeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMRzlDUVVGU096dDFRa0ZEVml4VFFVRkJMRWRCUVZjN08zVkNRVXRZTEZsQlFVRXNSMEZCWXl4VFFVRkRMRXRCUVVRN1FVRkhXaXhSUVVGQk8wbEJRVUVzU1VGQlowSXNTMEZCU3l4RFFVRkRMR0ZCUVhSQ08wMUJRVUVzUzBGQlFTeEhRVUZSTEV0QlFWSTdPMGxCUjBFc1UwRkJRU3hIUVVGWkxFdEJRVUVzU1VGQlV5eEpRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMWRCUjNKQ0xFbEJRVU1zUTBGQlFTeHJRa0ZCUkN4RFFVRkJMRU5CUVhGQ0xFTkJRVU1zU1VGQmRFSXNRMEZCTWtJc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEdGQlFVUTdRVUZIZWtJc1dVRkJRVHRSUVVGQkxGRkJRVUVzUjBGQlZ5eEpRVUZKTEZGQlFVb3NRMEZCWVR0VlFVRkZMRXRCUVVFc1JVRkJUeXhUUVVGVU8xVkJRVzlDTEZWQlFVRXNSVUZCV1N4VFFVRlRMRU5CUVVNc1IwRkJWaXhEUVVGakxHRkJRV1FzUTBGQmFFTTdWVUZCT0VRc1lVRkJRU3hGUVVGbExHRkJRVGRGTzFOQlFXSTdVVUZIV0N4UlFVRlJMRU5CUVVNc1JVRkJWQ3hEUVVGWkxGRkJRVm9zUlVGQmMwSXNVMEZCUVR0cFFrRkJSeXhMUVVGRExFTkJRVUVzV1VGQlJDeERRVUZCTzFGQlFVZ3NRMEZCZEVJN1VVRkhRU3hSUVVGUkxFTkJRVU1zUlVGQlZDeERRVUZaTEUxQlFWb3NSVUZCYjBJc1UwRkJReXhMUVVGRU8xVkJSMnhDTEV0QlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1IwRkJXaXhEUVVGblFpeExRVUZvUWp0cFFrRkhRU3hMUVVGRExFTkJRVUVzV1VGQlJDeERRVUZCTzFGQlRtdENMRU5CUVhCQ08yVkJVMEVzUzBGQlF5eERRVUZCTEdGQlFXRXNRMEZCUXl4SlFVRm1MRU5CUVc5Q0xGRkJRWEJDTzAxQmJFSjVRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCTTBJN1JVRlVXVHM3T3p0SFFWQlRPenRCUVhORGVrSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj48cCBjbGFzcz1cXFwibGVhZCBtYi0wXFxcIj5TbWFydCBSZW5kZXJpbmc8L3A+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTYgdGV4dC1yaWdodFxcXCI+PGJ1dHRvbiBkYXRhLWNsaWNrPVxcXCJuZXdcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXByaW1hcnkgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBsdXNcXFwiPjwvaT4mbmJzcDtcXG5OZXcgUnVsZTwvYnV0dG9uPjxidXR0b24gZGF0YS1jbGljaz1cXFwiYXBwbHlcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXN1Y2Nlc3MgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWNoZWNrLWNpcmNsZS1vXFxcIj48L2k+Jm5ic3A7XFxuQXBwbHkgUnVsZXM8L2J1dHRvbj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcInJlc2V0XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1kYW5nZXJcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1yZWZyZXNoXFxcIj48L2k+Jm5ic3A7XFxuUmVzZXQ8L2J1dHRvbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgZGF0YS1yZWdpb249XFxcImNvbnRlbnRcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChBcnJheSkge1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8c2VsZWN0XCIgKyAoamFkZS5hdHRyKFwibmFtZVwiLCBvcHRzLm5hbWUsIHRydWUsIGZhbHNlKSkgKyAoamFkZS5hdHRyKFwibXVsdGlwbGVcIiwgb3B0cy5tdWx0aXBsZSwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgYy1zZWxlY3RcXFwiPlwiKTtcbmlmICggb3B0cy5vcHRpb25zKVxue1xuLy8gaXRlcmF0ZSBvcHRzLm9wdGlvbnNcbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gb3B0cy5vcHRpb25zO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbn1cbmJ1Zi5wdXNoKFwiPC9zZWxlY3Q+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ0NhbmNlbCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLXRpbWVzJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwiY2FuY2VsXCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTNcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1TZWxlY3RcIl0oeyBsYWJlbDogJ1ZpZXdlciBUeXBlJywgbmFtZTogJ3RhcmdldF9wcm9wZXJ0eScsIG9wdGlvbnM6IFsnaW1nJywgJ3N0bCcsICdkaWNvbScsICdwZGYnLCAnY3N2JywgJ2F1ZGlvJywgJ3ZpZGVvJ10gfSk7XG5idWYucHVzaChcIjwvZGl2PjwvZGl2PjxidXR0b24gZGF0YS1jbGljaz1cXFwiYWRkXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgdy0xMDAgbWItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBsdXMtY2lyY2xlXFxcIj48L2k+Jm5ic3A7XFxuQWRkIERlZmluaXRpb248L2J1dHRvbj48L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJkZWZpbml0aW9uc1xcXCIgY2xhc3M9XFxcImNvbC1sZy05XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdKHt9KTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+XCIpO30uY2FsbCh0aGlzLFwiQXJyYXlcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLkFycmF5OnR5cGVvZiBBcnJheSE9PVwidW5kZWZpbmVkXCI/QXJyYXk6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIENvbmZpZ0xheW91dFZpZXcsIEZhY2V0TGF5b3V0LCBWaWV3ZXJSdWxlTGF5b3V0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmFjZXRMYXlvdXQgPSByZXF1aXJlKCcuLi9mYWNldF92aWV3cy9sYXlvdXQnKTtcblxuVmlld2VyUnVsZUxheW91dCA9IHJlcXVpcmUoJy4uL3ZpZXdlcl9ydWxlX3ZpZXdzL2xheW91dCcpO1xuXG5Db25maWdMYXlvdXRWaWV3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKENvbmZpZ0xheW91dFZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENvbmZpZ0xheW91dFZpZXcoKSB7XG4gICAgcmV0dXJuIENvbmZpZ0xheW91dFZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBDb25maWdMYXlvdXRWaWV3LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY29udGFpbmVyLWZsdWlkJztcblxuICBDb25maWdMYXlvdXRWaWV3LnByb3RvdHlwZS5uYXZJdGVtcyA9IFtcbiAgICB7XG4gICAgICBpY29uOiAnZmEtbGlzdCcsXG4gICAgICB0ZXh0OiAnRmFjZXRzJyxcbiAgICAgIHRyaWdnZXI6ICdmYWNldHMnLFxuICAgICAgXCJkZWZhdWx0XCI6IHRydWVcbiAgICB9LCB7XG4gICAgICBpY29uOiAnZmEtd2luZG93LW1heGltaXplJyxcbiAgICAgIHRleHQ6ICdTbWFydCBSZW5kZXJpbmcnLFxuICAgICAgdHJpZ2dlcjogJ3ZpZXdlcidcbiAgICB9XG4gIF07XG5cbiAgQ29uZmlnTGF5b3V0Vmlldy5wcm90b3R5cGUubmF2RXZlbnRzID0ge1xuICAgICdmYWNldHMnOiAnZmFjZXRDb25maWcnLFxuICAgICd2aWV3ZXInOiAndmlld2VyQ29uZmlnJ1xuICB9O1xuXG4gIENvbmZpZ0xheW91dFZpZXcucHJvdG90eXBlLm5hdk9wdGlvbnMgPSB7XG4gICAgcGlsbHM6IHRydWVcbiAgfTtcblxuICBDb25maWdMYXlvdXRWaWV3LnByb3RvdHlwZS5mYWNldENvbmZpZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmZldGNoRmFjZXRzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmYWNldENvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgRmFjZXRMYXlvdXQoe1xuICAgICAgICAgIGNvbGxlY3Rpb246IGZhY2V0Q29sbGVjdGlvblxuICAgICAgICB9KSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBDb25maWdMYXlvdXRWaWV3LnByb3RvdHlwZS52aWV3ZXJDb25maWcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5mZXRjaFZpZXdlclJ1bGVzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2aWV3ZXJSdWxlQ29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gX3RoaXMuY29udGVudFJlZ2lvbi5zaG93KG5ldyBWaWV3ZXJSdWxlTGF5b3V0KHtcbiAgICAgICAgICBtb2RlbDogX3RoaXMubW9kZWwsXG4gICAgICAgICAgY29sbGVjdGlvbjogdmlld2VyUnVsZUNvbGxlY3Rpb25cbiAgICAgICAgfSkpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbmZpZ0xheW91dFZpZXc7XG5cbn0pKHJlcXVpcmUoJ2xpYi92aWV3cy9uYXYnKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uZmlnTGF5b3V0VmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WTI5dVptbG5MM1pwWlhkekwyeGhlVzkxZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOWpiMjVtYVdjdmRtbGxkM012YkdGNWIzVjBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxDdERRVUZCTzBWQlFVRTdPenRCUVVGQkxGZEJRVUVzUjBGQmMwSXNUMEZCUVN4RFFVRlJMSFZDUVVGU096dEJRVU4wUWl4blFrRkJRU3hIUVVGelFpeFBRVUZCTEVOQlFWRXNOa0pCUVZJN08wRkJTV2hDT3pzN096czdPelpDUVVOS0xGTkJRVUVzUjBGQlZ6czdOa0pCUlZnc1VVRkJRU3hIUVVGVk8wbEJRMUk3VFVGQlJTeEpRVUZCTEVWQlFVMHNVMEZCVWp0TlFVRTRRaXhKUVVGQkxFVkJRVTBzVVVGQmNFTTdUVUZCTUVRc1QwRkJRU3hGUVVGVExGRkJRVzVGTzAxQlFUWkZMRU5CUVVFc1QwRkJRU3hEUVVGQkxFVkJRVk1zU1VGQmRFWTdTMEZFVVN4RlFVVlNPMDFCUVVVc1NVRkJRU3hGUVVGTkxHOUNRVUZTTzAxQlFUaENMRWxCUVVFc1JVRkJUU3hwUWtGQmNFTTdUVUZCTUVRc1QwRkJRU3hGUVVGVExGRkJRVzVGTzB0QlJsRTdPenMyUWtGTFZpeFRRVUZCTEVkQlEwVTdTVUZCUVN4UlFVRkJMRVZCUVdNc1lVRkJaRHRKUVVOQkxGRkJRVUVzUlVGQll5eGpRVVJrT3pzN05rSkJSMFlzVlVGQlFTeEhRVU5GTzBsQlFVRXNTMEZCUVN4RlFVRlBMRWxCUVZBN096czJRa0ZGUml4WFFVRkJMRWRCUVdFc1UwRkJRVHRYUVVOWUxFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNWMEZCVUN4RFFVRkJMRU5CUVc5Q0xFTkJRVU1zU1VGQmNrSXNRMEZCTUVJc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEdWQlFVUTdaVUZEZUVJc1MwRkJReXhEUVVGQkxHRkJRV0VzUTBGQlF5eEpRVUZtTEVOQlFXOUNMRWxCUVVrc1YwRkJTaXhEUVVGblFqdFZRVUZGTEZWQlFVRXNSVUZCV1N4bFFVRmtPMU5CUVdoQ0xFTkJRWEJDTzAxQlJIZENPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUV4UWp0RlFVUlhPenMyUWtGSllpeFpRVUZCTEVkQlFXTXNVMEZCUVR0WFFVTmFMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zWjBKQlFWQXNRMEZCUVN4RFFVRjVRaXhEUVVGRExFbEJRVEZDTEVOQlFTdENMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eHZRa0ZCUkR0bFFVTTNRaXhMUVVGRExFTkJRVUVzWVVGQllTeERRVUZETEVsQlFXWXNRMEZCYjBJc1NVRkJTU3huUWtGQlNpeERRVUZ4UWp0VlFVRkZMRXRCUVVFc1JVRkJUeXhMUVVGRExFTkJRVUVzUzBGQlZqdFZRVUZwUWl4VlFVRkJMRVZCUVZrc2IwSkJRVGRDTzFOQlFYSkNMRU5CUVhCQ08wMUJSRFpDTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVFdlFqdEZRVVJaT3pzN08wZEJia0psTEU5QlFVRXNRMEZCVVN4bFFVRlNPenRCUVhsQ0wwSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIERhdGFzZXRDcmVhdG9yLCBidWlsZFVuaXF1ZUlkLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuYnVpbGRVbmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICBpZiAocHJlZml4ID09IG51bGwpIHtcbiAgICBwcmVmaXggPSAnJztcbiAgfVxuICByZXR1cm4gcHJlZml4ICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDEwKTtcbn07XG5cbndpbmRvdy5idWlsZFVuaXF1ZUlkID0gYnVpbGRVbmlxdWVJZDtcblxuRGF0YXNldENyZWF0b3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGF0YXNldENyZWF0b3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRDcmVhdG9yKCkge1xuICAgIHJldHVybiBEYXRhc2V0Q3JlYXRvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERhdGFzZXRDcmVhdG9yLnByb3RvdHlwZS5lbnN1cmVGYWNldHMgPSBmdW5jdGlvbihkYXRhc2V0X2lkLCBkYXRhcG9pbnRzKSB7XG4gICAgdmFyIGFsbEtleXMsIGVsLCBpLCBpbmRleCwgbGVuLCBzYXZlRmFjZXQ7XG4gICAgYWxsS2V5cyA9IFtdO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IGRhdGFwb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGVsID0gZGF0YXBvaW50c1tpXTtcbiAgICAgIGFsbEtleXMgPSBfLnVuaW9uKGFsbEtleXMsIF8ua2V5cyhlbCkpO1xuICAgIH1cbiAgICBpbmRleCA9IDA7XG4gICAgc2F2ZUZhY2V0ID0gZnVuY3Rpb24oZmFjZXQpIHtcbiAgICAgIHZhciBhdHRycztcbiAgICAgIGF0dHJzID0ge1xuICAgICAgICBpZDogYnVpbGRVbmlxdWVJZCgnZmNfJyksXG4gICAgICAgIGRhdGFzZXRfaWQ6IGRhdGFzZXRfaWQsXG4gICAgICAgIGF0dHJpYnV0ZTogZmFjZXQsXG4gICAgICAgIGxhYmVsOiBmYWNldCxcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICBlbmFibGVkOiBmYWNldCA9PT0gJ0BpZCcgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgIHRvb2x0aXA6ICcnXG4gICAgICB9O1xuICAgICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGInKS5yZXF1ZXN0KCdhZGQnLCAnZmFjZXRzJywgYXR0cnMpO1xuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2UuZWFjaChhbGxLZXlzLCBzYXZlRmFjZXQpO1xuICB9O1xuXG4gIERhdGFzZXRDcmVhdG9yLnByb3RvdHlwZS5lbnN1cmVEYXRhcG9pbnRzID0gZnVuY3Rpb24oZGF0YXNldF9pZCwgZGF0YXBvaW50cykge1xuICAgIHZhciBjb3VudCwgaW5kZXgsIHNhdmVEYXRhcG9pbnQ7XG4gICAgaW5kZXggPSAwO1xuICAgIGNvdW50ID0gX3MubnVtYmVyRm9ybWF0KGRhdGFwb2ludHMubGVuZ3RoKTtcbiAgICBzYXZlRGF0YXBvaW50ID0gZnVuY3Rpb24oZGF0YXBvaW50KSB7XG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgXCJQcm9jZXNzaW5nIFwiICsgKF9zLm51bWJlckZvcm1hdChpbmRleCkpICsgXCIgb2YgXCIgKyBjb3VudCk7XG4gICAgICBhdHRycyA9IHtcbiAgICAgICAgaWQ6IGJ1aWxkVW5pcXVlSWQoJ2RwXycpLFxuICAgICAgICBkYXRhc2V0X2lkOiBkYXRhc2V0X2lkLFxuICAgICAgICByYXc6IGRhdGFwb2ludCxcbiAgICAgICAgZGF0YTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhcG9pbnQpKSxcbiAgICAgICAgdmlld3M6IHt9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2RiJykucmVxdWVzdCgnYWRkJywgJ2RhdGFwb2ludHMnLCBhdHRycyk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJvbWlzZS5lYWNoKGRhdGFwb2ludHMsIHNhdmVEYXRhcG9pbnQpO1xuICB9O1xuXG4gIERhdGFzZXRDcmVhdG9yLnByb3RvdHlwZS5lbnN1cmVEYXRhc2V0ID0gZnVuY3Rpb24oZGF0YXNldCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdkYicpLnJlcXVlc3QoJ2FkZCcsICdkYXRhc2V0cycsIGRhdGFzZXQudG9KU09OKCkpO1xuICB9O1xuXG4gIERhdGFzZXRDcmVhdG9yLnByb3RvdHlwZS5kZXBsb3kgPSBmdW5jdGlvbihkYXRhc2V0LCBkYXRhcG9pbnRzKSB7XG4gICAgZGF0YXNldC5zZXQoJ2NvdW50JywgZGF0YXBvaW50cy5sZW5ndGgpO1xuICAgIGRhdGFzZXQuc2V0KCdpZCcsIGJ1aWxkVW5pcXVlSWQoJ2RzXycpKTtcbiAgICBkYXRhc2V0LnRyaWdnZXIoJ3JlcXVlc3QnKTtcbiAgICBSYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsICdTYXZpbmcgRGF0YXNldC4uLicpO1xuICAgIHJldHVybiB0aGlzLmVuc3VyZURhdGFzZXQoZGF0YXNldCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhc2V0X2lkKSB7XG4gICAgICAgIFJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgJ1NhdmluZyBEYXRhcG9pbnRzLi4uJyk7XG4gICAgICAgIHJldHVybiBfdGhpcy5lbnN1cmVEYXRhcG9pbnRzKGRhdGFzZXRfaWQsIGRhdGFwb2ludHMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ3Nob3cnLCAnR2VuZXJhdGluZyBGYWNldHMuLi4nKTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuZW5zdXJlRmFjZXRzKGRhdGFzZXRfaWQsIGRhdGFwb2ludHMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBSYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsICdMb2FkaW5nIEZhY2V0cy4uLicpO1xuICAgICAgICAgICAgcmV0dXJuIFJhZGlvLmNoYW5uZWwoJ2ZhY2V0JykucmVxdWVzdCgnY29sbGVjdGlvbicsIGRhdGFzZXRfaWQpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIFJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgJ0xpbmtpbmcgRmFjZXRzIHRvIE9udG9sb2dpZXMuLi4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFJhZGlvLmNoYW5uZWwoJ2ZhY2V0JykucmVxdWVzdCgnbGluazphbGwnKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIFJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQudHJpZ2dlcignc3luYycpO1xuICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQudHJpZ2dlcignZXJyb3InLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKVtcImNhdGNoXCJdKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVycikge1xuICAgICAgICByZXR1cm4gZGF0YXNldC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldENyZWF0b3I7XG5cbn0pKEJhY2tib25lLk1vZGVsKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRGF0YXNldENyZWF0b3IoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WTNKbFlYUnZjaTVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5amNtVmhkRzl5TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZKUVN4SlFVRkJMRFpDUVVGQk8wVkJRVUU3T3p0QlFVRkJMR0ZCUVVFc1IwRkJaMElzVTBGQlF5eE5RVUZFT3p0SlFVRkRMRk5CUVU4N08wRkJRM1JDTEZOQlFVOHNUVUZCUVN4SFFVRlRMRWxCUVVrc1EwRkJReXhOUVVGTUxFTkJRVUVzUTBGQllTeERRVUZETEZGQlFXUXNRMEZCZFVJc1JVRkJka0lzUTBGQk1FSXNRMEZCUXl4TlFVRXpRaXhEUVVGclF5eERRVUZzUXl4RlFVRnhReXhGUVVGeVF6dEJRVVJHT3p0QlFVbG9RaXhOUVVGTkxFTkJRVU1zWVVGQlVDeEhRVUYxUWpzN1FVRkpha0k3T3pzN096czdNa0pCVFVvc1dVRkJRU3hIUVVGakxGTkJRVU1zVlVGQlJDeEZRVUZoTEZWQlFXSTdRVUZKV2l4UlFVRkJPMGxCUVVFc1QwRkJRU3hIUVVGVk8wRkJRMVlzVTBGQlFTdzBRMEZCUVRzN1RVRkRSU3hQUVVGQkxFZEJRVlVzUTBGQlF5eERRVUZETEV0QlFVWXNRMEZCVVN4UFFVRlNMRVZCUVdsQ0xFTkJRVU1zUTBGQlF5eEpRVUZHTEVOQlFVOHNSVUZCVUN4RFFVRnFRanRCUVVSYU8wbEJTVUVzUzBGQlFTeEhRVUZSTzBsQlNWSXNVMEZCUVN4SFFVRlpMRk5CUVVNc1MwRkJSRHRCUVVkV0xGVkJRVUU3VFVGQlFTeExRVUZCTEVkQlEwVTdVVUZCUVN4RlFVRkJMRVZCUVZrc1lVRkJRU3hEUVVGakxFdEJRV1FzUTBGQldqdFJRVU5CTEZWQlFVRXNSVUZCV1N4VlFVUmFPMUZCUlVFc1UwRkJRU3hGUVVGWkxFdEJSbG83VVVGSFFTeExRVUZCTEVWQlFWa3NTMEZJV2p0UlFVbEJMRXRCUVVFc1JVRkJXU3hMUVVwYU8xRkJTMEVzVDBGQlFTeEZRVUZsTEV0QlFVRXNTMEZCVlN4TFFVRmlMRWRCUVhsQ0xFdEJRWHBDTEVkQlFXOURMRWxCVEdoRU8xRkJUVUVzVDBGQlFTeEZRVUZaTEVWQlRsbzdPMDFCVTBZc1MwRkJRU3hIUVVGUkxFdEJRVUVzUjBGQlVUdEJRVWRvUWl4aFFVRlBMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlppeERRVUYxUWl4SlFVRjJRaXhEUVVFMFFpeERRVUZETEU5QlFUZENMRU5CUVhGRExFdEJRWEpETEVWQlFUUkRMRkZCUVRWRExFVkJRWE5FTEV0QlFYUkVPMGxCYUVKSE8wRkJiVUphTEZkQlFVOHNUMEZCVHl4RFFVRkRMRWxCUVZJc1EwRkJZU3hQUVVGaUxFVkJRWE5DTEZOQlFYUkNPMFZCYUVOTE96c3lRa0Z4UTJRc1owSkJRVUVzUjBGQmEwSXNVMEZCUXl4VlFVRkVMRVZCUVdFc1ZVRkJZanRCUVVkb1FpeFJRVUZCTzBsQlFVRXNTMEZCUVN4SFFVRlJPMGxCUTFJc1MwRkJRU3hIUVVGUkxFVkJRVVVzUTBGQlF5eFpRVUZJTEVOQlFXZENMRlZCUVZVc1EwRkJReXhOUVVFelFqdEpRVWxTTEdGQlFVRXNSMEZCWjBJc1UwRkJReXhUUVVGRU8wRkJSMlFzVlVGQlFUdE5RVUZCTEV0QlFVRXNSMEZCVVN4TFFVRkJMRWRCUVZFN1RVRkRhRUlzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNUVUZCTVVNc1JVRkJhMFFzWVVGQlFTeEhRVUZoTEVOQlFVTXNSVUZCUlN4RFFVRkRMRmxCUVVnc1EwRkJaMElzUzBGQmFFSXNRMEZCUkN4RFFVRmlMRWRCUVhGRExFMUJRWEpETEVkQlFUSkRMRXRCUVRkR08wMUJSMEVzUzBGQlFTeEhRVU5GTzFGQlFVRXNSVUZCUVN4RlFVRlpMR0ZCUVVFc1EwRkJZeXhMUVVGa0xFTkJRVm83VVVGRFFTeFZRVUZCTEVWQlFWa3NWVUZFV2p0UlFVVkJMRWRCUVVFc1JVRkJXU3hUUVVaYU8xRkJSMEVzU1VGQlFTeEZRVUZaTEVsQlFVa3NRMEZCUXl4TFFVRk1MRU5CUVZjc1NVRkJTU3hEUVVGRExGTkJRVXdzUTBGQlpTeFRRVUZtTEVOQlFWZ3NRMEZJV2p0UlFVbEJMRXRCUVVFc1JVRkJXU3hGUVVwYU96dEJRVTlHTEdGQlFVOHNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEVsQlFYWkNMRU5CUVRSQ0xFTkJRVU1zVDBGQk4wSXNRMEZCY1VNc1MwRkJja01zUlVGQk5FTXNXVUZCTlVNc1JVRkJNRVFzUzBGQk1VUTdTVUZtVHp0QlFXdENhRUlzVjBGQlR5eFBRVUZQTEVOQlFVTXNTVUZCVWl4RFFVRmhMRlZCUVdJc1JVRkJlVUlzWVVGQmVrSTdSVUV4UWxNN096SkNRVGhDYkVJc1lVRkJRU3hIUVVGbExGTkJRVU1zVDBGQlJEdEJRVU5pTEZkQlFVOHNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEVsQlFYWkNMRU5CUVRSQ0xFTkJRVU1zVDBGQk4wSXNRMEZCY1VNc1MwRkJja01zUlVGQk5FTXNWVUZCTlVNc1JVRkJkMFFzVDBGQlR5eERRVUZETEUxQlFWSXNRMEZCUVN4RFFVRjRSRHRGUVVSTk96c3lRa0ZMWml4TlFVRkJMRWRCUVZFc1UwRkJReXhQUVVGRUxFVkJRVlVzVlVGQlZqdEpRVWxPTEU5QlFVOHNRMEZCUXl4SFFVRlNMRU5CUVZrc1QwRkJXaXhGUVVGeFFpeFZRVUZWTEVOQlFVTXNUVUZCYUVNN1NVRkRRU3hQUVVGUExFTkJRVU1zUjBGQlVpeERRVUZaTEVsQlFWb3NSVUZCYTBJc1lVRkJRU3hEUVVGakxFdEJRV1FzUTBGQmJFSTdTVUZKUVN4UFFVRlBMRU5CUVVNc1QwRkJVaXhEUVVGblFpeFRRVUZvUWp0SlFVZEJMRXRCUVVzc1EwRkJReXhQUVVGT0xFTkJRV01zVTBGQlpDeERRVUYzUWl4RFFVRkRMRTlCUVhwQ0xFTkJRV2xETEUxQlFXcERMRVZCUVhsRExHMUNRVUY2UXp0WFFVZEJMRWxCUVVNc1EwRkJRU3hoUVVGRUxFTkJRV1VzVDBGQlppeERRVUYxUWl4RFFVRkRMRWxCUVhoQ0xFTkJRVFpDTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhWUVVGRU8xRkJSek5DTEV0QlFVc3NRMEZCUXl4UFFVRk9MRU5CUVdNc1UwRkJaQ3hEUVVGM1FpeERRVUZETEU5QlFYcENMRU5CUVdsRExFMUJRV3BETEVWQlFYbERMSE5DUVVGNlF6dGxRVWxCTEV0QlFVTXNRMEZCUVN4blFrRkJSQ3hEUVVGclFpeFZRVUZzUWl4RlFVRTRRaXhWUVVFNVFpeERRVUY1UXl4RFFVRkRMRWxCUVRGRExFTkJRU3RETEZOQlFVRTdWVUZITjBNc1MwRkJTeXhEUVVGRExFOUJRVTRzUTBGQll5eFRRVUZrTEVOQlFYZENMRU5CUVVNc1QwRkJla0lzUTBGQmFVTXNUVUZCYWtNc1JVRkJlVU1zYzBKQlFYcERPMmxDUVVsQkxFdEJRVU1zUTBGQlFTeFpRVUZFTEVOQlFXTXNWVUZCWkN4RlFVRXdRaXhWUVVFeFFpeERRVUZ4UXl4RFFVRkRMRWxCUVhSRExFTkJRVEpETEZOQlFVRTdXVUZIZWtNc1MwRkJTeXhEUVVGRExFOUJRVTRzUTBGQll5eFRRVUZrTEVOQlFYZENMRU5CUVVNc1QwRkJla0lzUTBGQmFVTXNUVUZCYWtNc1JVRkJlVU1zYlVKQlFYcERPMjFDUVVkQkxFdEJRVXNzUTBGQlF5eFBRVUZPTEVOQlFXTXNUMEZCWkN4RFFVRnpRaXhEUVVGRExFOUJRWFpDTEVOQlFTdENMRmxCUVM5Q0xFVkJRVFpETEZWQlFUZERMRU5CUVhkRUxFTkJRVU1zU1VGQmVrUXNRMEZCT0VRc1UwRkJRVHRqUVVjMVJDeExRVUZMTEVOQlFVTXNUMEZCVGl4RFFVRmpMRk5CUVdRc1EwRkJkMElzUTBGQlF5eFBRVUY2UWl4RFFVRnBReXhOUVVGcVF5eEZRVUY1UXl4cFEwRkJla003Y1VKQlIwRXNTMEZCU3l4RFFVRkRMRTlCUVU0c1EwRkJZeXhQUVVGa0xFTkJRWE5DTEVOQlFVTXNUMEZCZGtJc1EwRkJLMElzVlVGQkwwSXNRMEZCTUVNc1EwRkJReXhKUVVFelF5eERRVUZuUkN4VFFVRkJPMmRDUVVjNVF5eExRVUZMTEVOQlFVTXNUMEZCVGl4RFFVRmpMRk5CUVdRc1EwRkJkMElzUTBGQlF5eFBRVUY2UWl4RFFVRnBReXhOUVVGcVF6dDFRa0ZKUVN4UFFVRlBMRU5CUVVNc1QwRkJVaXhEUVVGblFpeE5RVUZvUWp0alFWQTRReXhEUVVGb1JDeERRVlZCTEVWQlFVTXNTMEZCUkN4RlFWWkJMRU5CVlU4c1UwRkJReXhIUVVGRU8zVkNRVUZUTEU5QlFVOHNRMEZCUXl4UFFVRlNMRU5CUVdkQ0xFOUJRV2hDTEVWQlFYbENMRWRCUVhwQ08yTkJRVlFzUTBGV1VEdFpRVTQwUkN4RFFVRTVSQ3hEUVdsQ1FTeEZRVUZETEV0QlFVUXNSVUZxUWtFc1EwRnBRazhzVTBGQlF5eEhRVUZFTzNGQ1FVRlRMRTlCUVU4c1EwRkJReXhQUVVGU0xFTkJRV2RDTEU5QlFXaENMRVZCUVhsQ0xFZEJRWHBDTzFsQlFWUXNRMEZxUWxBN1ZVRk9lVU1zUTBGQk0wTXNRMEYzUWtFc1JVRkJReXhMUVVGRUxFVkJlRUpCTEVOQmQwSlBMRk5CUVVNc1IwRkJSRHR0UWtGQlV5eFBRVUZQTEVOQlFVTXNUMEZCVWl4RFFVRm5RaXhQUVVGb1FpeEZRVUY1UWl4SFFVRjZRanRWUVVGVUxFTkJlRUpRTzFGQlVEWkRMRU5CUVM5RExFTkJaME5CTEVWQlFVTXNTMEZCUkN4RlFXaERRU3hEUVdkRFR5eFRRVUZETEVkQlFVUTdhVUpCUVZNc1QwRkJUeXhEUVVGRExFOUJRVklzUTBGQlowSXNUMEZCYUVJc1JVRkJlVUlzUjBGQmVrSTdVVUZCVkN4RFFXaERVRHROUVZBeVFqdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJOMElzUTBGM1EwRXNSVUZCUXl4TFFVRkVMRVZCZUVOQkxFTkJkME5QTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhIUVVGRU8yVkJRVk1zVDBGQlR5eERRVUZETEU5QlFWSXNRMEZCWjBJc1QwRkJhRUlzUlVGQmVVSXNSMEZCZWtJN1RVRkJWRHRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEY0UTFBN1JVRm1UVHM3T3p0SFFUbEZiVUlzVVVGQlVTeERRVUZET3p0QlFYbEpkRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJc1NVRkJTU3hqUVVGS0xFTkJRVUVpZlE9PVxuIiwidmFyIERhdGFzZXREZXN0cnVjdG9yLCBEZXN0cm95RGF0YXNldFJvdXRlLCBMYXlvdXRWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0Jyk7XG5cbkRhdGFzZXREZXN0cnVjdG9yID0gcmVxdWlyZSgnLi4vZGVzdHJ1Y3RvcicpO1xuXG5EZXN0cm95RGF0YXNldFJvdXRlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERlc3Ryb3lEYXRhc2V0Um91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERlc3Ryb3lEYXRhc2V0Um91dGUoKSB7XG4gICAgcmV0dXJuIERlc3Ryb3lEYXRhc2V0Um91dGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEZXN0cm95RGF0YXNldFJvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIk1hZ2VsbGFuIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBEZXN0cm95XCI7XG4gIH07XG5cbiAgRGVzdHJveURhdGFzZXRSb3V0ZS5wcm90b3R5cGUuYnJlYWRjcnVtYnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0ZXh0OiAnSG9tZScsXG4gICAgICAgIGhyZWY6ICcjJ1xuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiAnQXJjaGl2ZXMnLFxuICAgICAgICBocmVmOiAnI2RhdGFzZXRzJ1xuICAgICAgfSwge1xuICAgICAgICBocmVmOiBcIiNkYXRhc2V0cy9cIiArIHRoaXMubW9kZWwuaWQsXG4gICAgICAgIHRleHQ6IHRoaXMubW9kZWwuZ2V0KCdsYWJlbCcpXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6ICdEZXN0cm95J1xuICAgICAgfVxuICAgIF07XG4gIH07XG5cbiAgRGVzdHJveURhdGFzZXRSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdkYXRhc2V0JykucmVxdWVzdCgnbW9kZWwnLCBpZCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIERlc3Ryb3lEYXRhc2V0Um91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgZGVzdHJ1Y3RvcjogRGF0YXNldERlc3RydWN0b3JcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIERlc3Ryb3lEYXRhc2V0Um91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERlc3Ryb3lEYXRhc2V0Um91dGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlpHVnpkSEp2ZVM5eWIzVjBaUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5a1pYTjBjbTk1TDNKdmRYUmxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxHdEVRVUZCTzBWQlFVRTdPenRCUVVGQkxGVkJRVUVzUjBGQllTeFBRVUZCTEVOQlFWRXNaMEpCUVZJN08wRkJRMklzYVVKQlFVRXNSMEZCYjBJc1QwRkJRU3hEUVVGUkxHVkJRVkk3TzBGQlNXUTdPenM3T3pzN1owTkJSVW9zUzBGQlFTeEhRVUZQTEZOQlFVRTdRVUZEVEN4WFFVRlBMR0ZCUVVFc1IwRkJZU3hEUVVGRExFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJSQ3hEUVVGaUxFZEJRV3RETzBWQlJIQkRPenRuUTBGSFVDeFhRVUZCTEVkQlFXRXNVMEZCUVR0QlFVTllMRmRCUVU4N1RVRkRURHRSUVVGRkxFbEJRVUVzUlVGQlRTeE5RVUZTTzFGQlFXZENMRWxCUVVFc1JVRkJUU3hIUVVGMFFqdFBRVVJMTEVWQlJVdzdVVUZCUlN4SlFVRkJMRVZCUVUwc1ZVRkJVanRSUVVGdlFpeEpRVUZCTEVWQlFVMHNWMEZCTVVJN1QwRkdTeXhGUVVkTU8xRkJRVVVzU1VGQlFTeEZRVUZOTEZsQlFVRXNSMEZCWVN4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFVkJRVFZDTzFGQlFXdERMRWxCUVVFc1JVRkJUU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4UFFVRllMRU5CUVhoRE8wOUJTRXNzUlVGSlREdFJRVUZGTEVsQlFVRXNSVUZCVFN4VFFVRlNPMDlCU2tzN08wVkJSRWs3TzJkRFFWRmlMRXRCUVVFc1IwRkJUeXhUUVVGRExFVkJRVVE3VjBGRFRDeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzVTBGQmRrSXNRMEZCYVVNc1EwRkJReXhQUVVGc1F5eERRVUV3UXl4UFFVRXhReXhGUVVGdFJDeEZRVUZ1UkN4RFFVTkJMRU5CUVVNc1NVRkVSQ3hEUVVOTkxFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4TFFVRkVPMlZCUVZjc1MwRkJReXhEUVVGQkxFdEJRVVFzUjBGQlV6dE5RVUZ3UWp0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGRVRqdEZRVVJMT3p0blEwRkpVQ3hOUVVGQkxFZEJRVkVzVTBGQlFUdFhRVU5PTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZKTEZWQlFVb3NRMEZCWlR0TlFVRkZMRXRCUVVFc1JVRkJUeXhKUVVGRExFTkJRVUVzUzBGQlZqdE5RVUZwUWl4VlFVRkJMRVZCUVZrc2FVSkJRVGRDTzB0QlFXWXNRMEZCYUVJN1JVRkVUVHM3T3p0SFFXcENkMElzVDBGQlFTeERRVUZSTEhOQ1FVRlNPenRCUVhOQ2JFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIERlc3Ryb3lEYXRhc2V0TGF5b3V0LCBVcGxvYWRXaWRnZXQsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5VcGxvYWRXaWRnZXQgPSByZXF1aXJlKCcuLi8uLi8uLi9iYXNlL3ZpZXdzL3VwbG9hZC91cGxvYWQnKTtcblxuRGVzdHJveURhdGFzZXRMYXlvdXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGVzdHJveURhdGFzZXRMYXlvdXQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERlc3Ryb3lEYXRhc2V0TGF5b3V0KCkge1xuICAgIHJldHVybiBEZXN0cm95RGF0YXNldExheW91dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERlc3Ryb3lEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2xheW91dCcpO1xuXG4gIERlc3Ryb3lEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY29udGFpbmVyJztcblxuICBEZXN0cm95RGF0YXNldExheW91dC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIE1vZGVsRXZlbnRzOiB7fSxcbiAgICBDb25maXJtYXRpb25zOiB7XG4gICAgICBtZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlc3Ryb3kgdGhpcyBkYXRhc2V0PycsXG4gICAgICBjb25maXJtSWNvbjogJ2ZhLXRyYXNoJyxcbiAgICAgIGNvbmZpcm1UZXh0OiAnREVTVFJPWScsXG4gICAgICBjb25maXJtQ3NzOiAnYnRuLWRhbmdlcidcbiAgICB9LFxuICAgIEZsYXNoZXM6IHtcbiAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSByZXNldCBkYXRhc2V0LidcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRGVzdHJveURhdGFzZXRMYXlvdXQucHJvdG90eXBlLnVpID0ge1xuICAgIGNvbmZpcm1hdGlvblRyaWdnZXI6ICdbZGF0YS1jbGljaz1jb25maXJtXSdcbiAgfTtcblxuICBEZXN0cm95RGF0YXNldExheW91dC5wcm90b3R5cGUub25Db25maXJtZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlc3RydWN0b3IuZGVwbG95KHRoaXMubW9kZWwpO1xuICB9O1xuXG4gIERlc3Ryb3lEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblJlcXVlc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy51aS5jb25maXJtYXRpb25UcmlnZ2VyLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICB9O1xuXG4gIERlc3Ryb3lEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gUmFkaW8uY2hhbm5lbCgnYXBwJykudHJpZ2dlcigncmVkaXJlY3QnLCAnI2RhdGFzZXRzJyk7XG4gIH07XG5cbiAgRGVzdHJveURhdGFzZXRMYXlvdXQucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnRVJST1InKTtcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcbiAgfTtcblxuICByZXR1cm4gRGVzdHJveURhdGFzZXRMYXlvdXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERlc3Ryb3lEYXRhc2V0TGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZaR1Z6ZEhKdmVTOTJhV1YzY3k5c1lYbHZkWFF1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlpHVnpkSEp2ZVM5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc2EwTkJRVUU3UlVGQlFUczdPMEZCUVVFc1dVRkJRU3hIUVVGbExFOUJRVUVzUTBGQlVTeHRRMEZCVWpzN1FVRkpWRHM3T3pzN096dHBRMEZEU2l4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxHOUNRVUZTT3p0cFEwRkRWaXhUUVVGQkxFZEJRVmM3TzJsRFFVVllMRk5CUVVFc1IwRkRSVHRKUVVGQkxGZEJRVUVzUlVGQllTeEZRVUZpTzBsQlJVRXNZVUZCUVN4RlFVTkZPMDFCUVVFc1QwRkJRU3hGUVVGakxHZEVRVUZrTzAxQlEwRXNWMEZCUVN4RlFVRmpMRlZCUkdRN1RVRkZRU3hYUVVGQkxFVkJRV01zVTBGR1pEdE5RVWRCTEZWQlFVRXNSVUZCWXl4WlFVaGtPMHRCU0VZN1NVRlJRU3hQUVVGQkxFVkJRMFU3VFVGQlFTeFBRVUZCTEVWQlEwVTdVVUZCUVN4UFFVRkJMRVZCUVZVc05rSkJRVlk3VDBGRVJqdExRVlJHT3pzN2FVTkJXVVlzUlVGQlFTeEhRVU5GTzBsQlFVRXNiVUpCUVVFc1JVRkJjMElzYzBKQlFYUkNPenM3YVVOQlMwWXNWMEZCUVN4SFFVRmhMRk5CUVVFN1YwRkRXQ3hKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEZWQlFWVXNRMEZCUXl4TlFVRndRaXhEUVVFeVFpeEpRVUZETEVOQlFVRXNTMEZCTlVJN1JVRkVWenM3YVVOQlNXSXNVMEZCUVN4SFFVRlhMRk5CUVVFN1YwRkRWQ3hKUVVGRExFTkJRVUVzUlVGQlJTeERRVUZETEcxQ1FVRnRRaXhEUVVGRExGRkJRWGhDTEVOQlFXbERMRlZCUVdwRE8wVkJSRk03TzJsRFFVbFlMRTFCUVVFc1IwRkJVU3hUUVVGQk8xZEJRMDRzUzBGQlN5eERRVUZETEU5QlFVNHNRMEZCWXl4TFFVRmtMRU5CUVc5Q0xFTkJRVU1zVDBGQmNrSXNRMEZCTmtJc1ZVRkJOMElzUlVGQmVVTXNWMEZCZWtNN1JVRkVUVHM3YVVOQlMxSXNUMEZCUVN4SFFVRlRMRk5CUVVNc1IwRkJSRHRKUVVOUUxFOUJRVThzUTBGQlF5eEhRVUZTTEVOQlFWa3NUMEZCV2p0WFFVTkJMRTlCUVU4c1EwRkJReXhIUVVGU0xFTkJRVmtzUjBGQldqdEZRVVpQT3pzN08wZEJjRU4zUWl4RlFVRkZMRU5CUVVNN08wRkJNRU4wUXl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmQgY2FyZC1ib2R5XFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGg0IGNsYXNzPVxcXCJjYXJkLXRpdGxlXFxcIj5EZXN0cm95IERhdGFzZXQ8L2g0PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LWRhbmdlciBtYi0wXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdHJhc2hcXFwiPjwvaT4mbmJzcDs8c3Ryb25nPkRlc3Ryb3k8L3N0cm9uZz48YnIvPkRlc3Ryb3lzIHRoZSBkYXRhc2V0IGFuZCBpdCdzIGFzc29jaWF0ZWQgZGF0YS4gVGhpcyBhY3Rpb24gaXMgcGVybWFuZW50LjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTIgdGV4dC1yaWdodFxcXCI+PGJ1dHRvbiBkYXRhLWNsaWNrPVxcXCJjb25maXJtXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXIgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXRyYXNoXFxcIj48L2k+Jm5ic3A7XFxuRGVzdHJveTwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgRGF0YXNldERlc3RydWN0b3IsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5EYXRhc2V0RGVzdHJ1Y3RvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0RGVzdHJ1Y3Rvciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldERlc3RydWN0b3IoKSB7XG4gICAgcmV0dXJuIERhdGFzZXREZXN0cnVjdG9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldERlc3RydWN0b3IucHJvdG90eXBlLmRlc3Ryb3lGYWNldHMgPSBmdW5jdGlvbihmYWNldHMpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95Q29sbGVjdGlvbihmYWNldHMsICdmYWNldCcpO1xuICB9O1xuXG4gIERhdGFzZXREZXN0cnVjdG9yLnByb3RvdHlwZS5kZXN0cm95RGF0YXBvaW50cyA9IGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95Q29sbGVjdGlvbihkYXRhcG9pbnRzLCAnZGF0YXBvaW50Jyk7XG4gIH07XG5cbiAgRGF0YXNldERlc3RydWN0b3IucHJvdG90eXBlLmRlc3Ryb3lLbm93bGVkZ2VSdWxlcyA9IGZ1bmN0aW9uKGtub3dsZWRnZVJ1bGVzKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVzdHJveUNvbGxlY3Rpb24oa25vd2xlZGdlUnVsZXMsICdrbm93bGVkZ2U6cnVsZScpO1xuICB9O1xuXG4gIERhdGFzZXREZXN0cnVjdG9yLnByb3RvdHlwZS5kZXN0cm95Vmlld2VyUnVsZXMgPSBmdW5jdGlvbih2aWV3ZXJSdWxlcykge1xuICAgIHJldHVybiB0aGlzLmRlc3Ryb3lDb2xsZWN0aW9uKHZpZXdlclJ1bGVzLCAndmlld2VyOnJ1bGUnKTtcbiAgfTtcblxuICBEYXRhc2V0RGVzdHJ1Y3Rvci5wcm90b3R5cGUuZGVzdHJveUNvbGxlY3Rpb24gPSBmdW5jdGlvbihjb2xsZWN0aW9uLCByYWRpb0NoYW5uZWwpIHtcbiAgICB2YXIgZGVzdHJveU1vZGVsO1xuICAgIGRlc3Ryb3lNb2RlbCA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbChyYWRpb0NoYW5uZWwpLnJlcXVlc3QoJ2Rlc3Ryb3knLCBtb2RlbCk7XG4gICAgfTtcbiAgICByZXR1cm4gUHJvbWlzZS5lYWNoKGNvbGxlY3Rpb24ubW9kZWxzLCBkZXN0cm95TW9kZWwpO1xuICB9O1xuXG4gIERhdGFzZXREZXN0cnVjdG9yLnByb3RvdHlwZS5kZXN0cm95RGF0YXNldCA9IGZ1bmN0aW9uKGRhdGFzZXQpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGF0YXNldCcpLnJlcXVlc3QoJ2Rlc3Ryb3knLCBkYXRhc2V0KTtcbiAgfTtcblxuICBEYXRhc2V0RGVzdHJ1Y3Rvci5wcm90b3R5cGUuZGVwbG95ID0gZnVuY3Rpb24oZGF0YXNldCkge1xuICAgIGNvbnNvbGUubG9nKCdERVNUUk9ZIERBVEFTRVQnKTtcbiAgICBkYXRhc2V0LnRyaWdnZXIoJ3JlcXVlc3QnKTtcbiAgICBSYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsICdEZXN0cm95aW5nIERhdGFzZXQuLi4nKTtcbiAgICByZXR1cm4gZGF0YXNldC5mZXRjaFZpZXdlclJ1bGVzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2aWV3ZXJSdWxlcykge1xuICAgICAgICBSYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsICdEZXN0b3lpbmcgU21hcnQgUmVuZGVyaW5nLi4uJyk7XG4gICAgICAgIHJldHVybiBfdGhpcy5kZXN0cm95Vmlld2VyUnVsZXModmlld2VyUnVsZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGFzZXQuZmV0Y2hLbm93bGVkZ2VSdWxlcygpLnRoZW4oZnVuY3Rpb24oa25vd2xlZGdlUnVsZXMpIHtcbiAgICAgICAgICAgIFJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgJ0Rlc3RveWluZyBLbm93bGVkZ2UgQ2FwdHVyZS4uLicpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRlc3Ryb3lLbm93bGVkZ2VSdWxlcyhrbm93bGVkZ2VSdWxlcykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQuZmV0Y2hGYWNldHMoKS50aGVuKGZ1bmN0aW9uKGZhY2V0cykge1xuICAgICAgICAgICAgICAgIFJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgJ0Rlc3RveWluZyBGYWNldHMuLi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVzdHJveUZhY2V0cyhmYWNldHMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC5mZXRjaERhdGFwb2ludHMoKS50aGVuKGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgICAgICAgICAgUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ3Nob3cnLCAnRGVzdG95aW5nIEtub3dsZWRnZSBHcmFwaC4uLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVzdHJveURhdGFwb2ludHMoZGF0YXBvaW50cykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICBSYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignc2hvdycsICdEZXN0b3lpbmcgQXJjaGl2ZS4uLicpO1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5kZXN0cm95RGF0YXNldChkYXRhc2V0KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ3N5bmMnKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQudHJpZ2dlcignZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQudHJpZ2dlcignZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFzZXQudHJpZ2dlcignZXJyb3InLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHJldHVybiBkYXRhc2V0LnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKVtcImNhdGNoXCJdKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVycikge1xuICAgICAgICByZXR1cm4gZGF0YXNldC50cmlnZ2VyKCdlcnJvcicsIGVycik7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldERlc3RydWN0b3I7XG5cbn0pKEJhY2tib25lLk1vZGVsKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRGF0YXNldERlc3RydWN0b3IoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WkdWemRISjFZM1J2Y2k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOWtaWE4wY25WamRHOXlMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkpRU3hKUVVGQkxHbENRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3T3poQ1FVbEtMR0ZCUVVFc1IwRkJaU3hUUVVGRExFMUJRVVE3UVVGQldTeFhRVUZQTEVsQlFVTXNRMEZCUVN4cFFrRkJSQ3hEUVVGdFFpeE5RVUZ1UWl4RlFVRXlRaXhQUVVFelFqdEZRVUZ1UWpzN09FSkJTV1lzYVVKQlFVRXNSMEZCYlVJc1UwRkJReXhWUVVGRU8wRkJRV2RDTEZkQlFVOHNTVUZCUXl4RFFVRkJMR2xDUVVGRUxFTkJRVzFDTEZWQlFXNUNMRVZCUVN0Q0xGZEJRUzlDTzBWQlFYWkNPenM0UWtGSmJrSXNjVUpCUVVFc1IwRkJkVUlzVTBGQlF5eGpRVUZFTzBGQlFXOUNMRmRCUVU4c1NVRkJReXhEUVVGQkxHbENRVUZFTEVOQlFXMUNMR05CUVc1Q0xFVkJRVzFETEdkQ1FVRnVRenRGUVVFelFqczdPRUpCU1haQ0xHdENRVUZCTEVkQlFXOUNMRk5CUVVNc1YwRkJSRHRCUVVGcFFpeFhRVUZQTEVsQlFVTXNRMEZCUVN4cFFrRkJSQ3hEUVVGdFFpeFhRVUZ1UWl4RlFVRm5ReXhoUVVGb1F6dEZRVUY0UWpzN09FSkJTWEJDTEdsQ1FVRkJMRWRCUVcxQ0xGTkJRVU1zVlVGQlJDeEZRVUZoTEZsQlFXSTdRVUZKYWtJc1VVRkJRVHRKUVVGQkxGbEJRVUVzUjBGQlpTeFRRVUZETEV0QlFVUTdRVUZCVnl4aFFVRlBMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlppeERRVUYxUWl4WlFVRjJRaXhEUVVGdlF5eERRVUZETEU5QlFYSkRMRU5CUVRaRExGTkJRVGRETEVWQlFYZEVMRXRCUVhoRU8wbEJRV3hDTzBGQlIyWXNWMEZCVHl4UFFVRlBMRU5CUVVNc1NVRkJVaXhEUVVGaExGVkJRVlVzUTBGQlF5eE5RVUY0UWl4RlFVRm5ReXhaUVVGb1F6dEZRVkJWT3pzNFFrRlhia0lzWTBGQlFTeEhRVUZuUWl4VFFVRkRMRTlCUVVRN1FVRkRaQ3hYUVVGUExGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhUUVVGMlFpeERRVUZwUXl4RFFVRkRMRTlCUVd4RExFTkJRVEJETEZOQlFURkRMRVZCUVhGRUxFOUJRWEpFTzBWQlJFODdPemhDUVV0b1FpeE5RVUZCTEVkQlFWRXNVMEZCUXl4UFFVRkVPMGxCUlU0c1QwRkJUeXhEUVVGRExFZEJRVklzUTBGQldTeHBRa0ZCV2p0SlFVbEJMRTlCUVU4c1EwRkJReXhQUVVGU0xFTkJRV2RDTEZOQlFXaENPMGxCUjBFc1MwRkJTeXhEUVVGRExFOUJRVTRzUTBGQll5eFRRVUZrTEVOQlFYZENMRU5CUVVNc1QwRkJla0lzUTBGQmFVTXNUVUZCYWtNc1JVRkJlVU1zZFVKQlFYcERPMWRCUjBFc1QwRkJUeXhEUVVGRExHZENRVUZTTEVOQlFVRXNRMEZEUVN4RFFVRkRMRWxCUkVRc1EwRkRUU3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNWMEZCUkR0UlFVZEtMRXRCUVVzc1EwRkJReXhQUVVGT0xFTkJRV01zVTBGQlpDeERRVUYzUWl4RFFVRkRMRTlCUVhwQ0xFTkJRV2xETEUxQlFXcERMRVZCUVhsRExEaENRVUY2UXp0bFFVZEJMRXRCUVVNc1EwRkJRU3hyUWtGQlJDeERRVUZ2UWl4WFFVRndRaXhEUVVOQkxFTkJRVU1zU1VGRVJDeERRVU5OTEZOQlFVRTdhVUpCUjBvc1QwRkJUeXhEUVVGRExHMUNRVUZTTEVOQlFVRXNRMEZEUVN4RFFVRkRMRWxCUkVRc1EwRkRUU3hUUVVGRExHTkJRVVE3V1VGSFNpeExRVUZMTEVOQlFVTXNUMEZCVGl4RFFVRmpMRk5CUVdRc1EwRkJkMElzUTBGQlF5eFBRVUY2UWl4RFFVRnBReXhOUVVGcVF5eEZRVUY1UXl4blEwRkJla003YlVKQlIwRXNTMEZCUXl4RFFVRkJMSEZDUVVGRUxFTkJRWFZDTEdOQlFYWkNMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzVTBGQlFUdHhRa0ZIU2l4UFFVRlBMRU5CUVVNc1YwRkJVaXhEUVVGQkxFTkJRMEVzUTBGQlF5eEpRVVJFTEVOQlEwMHNVMEZCUXl4TlFVRkVPMmRDUVVkS0xFdEJRVXNzUTBGQlF5eFBRVUZPTEVOQlFXTXNVMEZCWkN4RFFVRjNRaXhEUVVGRExFOUJRWHBDTEVOQlFXbERMRTFCUVdwRExFVkJRWGxETEhGQ1FVRjZRenQxUWtGSFFTeExRVUZETEVOQlFVRXNZVUZCUkN4RFFVRmxMRTFCUVdZc1EwRkRRU3hEUVVGRExFbEJSRVFzUTBGRFRTeFRRVUZCTzNsQ1FVZEtMRTlCUVU4c1EwRkJReXhsUVVGU0xFTkJRVUVzUTBGRFFTeERRVUZETEVsQlJFUXNRMEZEVFN4VFFVRkRMRlZCUVVRN2IwSkJSMG9zUzBGQlN5eERRVUZETEU5QlFVNHNRMEZCWXl4VFFVRmtMRU5CUVhkQ0xFTkJRVU1zVDBGQmVrSXNRMEZCYVVNc1RVRkJha01zUlVGQmVVTXNPRUpCUVhwRE96SkNRVWRCTEV0QlFVTXNRMEZCUVN4cFFrRkJSQ3hEUVVGdFFpeFZRVUZ1UWl4RFFVTkJMRU5CUVVNc1NVRkVSQ3hEUVVOTkxGTkJRVUU3YzBKQlIwb3NTMEZCU3l4RFFVRkRMRTlCUVU0c1EwRkJZeXhUUVVGa0xFTkJRWGRDTEVOQlFVTXNUMEZCZWtJc1EwRkJhVU1zVFVGQmFrTXNSVUZCZVVNc2MwSkJRWHBET3paQ1FVZEJMRXRCUVVNc1EwRkJRU3hqUVVGRUxFTkJRV2RDTEU5QlFXaENMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzVTBGQlFUdDNRa0ZIU2l4TFFVRkxMRU5CUVVNc1QwRkJUaXhEUVVGakxGTkJRV1FzUTBGQmQwSXNRMEZCUXl4UFFVRjZRaXhEUVVGcFF5eE5RVUZxUXpzclFrRkhRU3hQUVVGUExFTkJRVU1zVDBGQlVpeERRVUZuUWl4TlFVRm9RanR6UWtGT1NTeERRVVJPTEVOQlZVRXNSVUZCUXl4TFFVRkVMRVZCVmtFc1EwRlZUeXhUUVVGRExFZEJRVVE3SzBKQlFWTXNUMEZCVHl4RFFVRkRMRTlCUVZJc1EwRkJaMElzVDBGQmFFSXNSVUZCZVVJc1IwRkJla0k3YzBKQlFWUXNRMEZXVUR0dlFrRk9TU3hEUVVST0xFTkJhMEpCTEVWQlFVTXNTMEZCUkN4RlFXeENRU3hEUVd0Q1R5eFRRVUZETEVkQlFVUTdOa0pCUVZNc1QwRkJUeXhEUVVGRExFOUJRVklzUTBGQlowSXNUMEZCYUVJc1JVRkJlVUlzUjBGQmVrSTdiMEpCUVZRc1EwRnNRbEE3YTBKQlRra3NRMEZFVGl4RFFUQkNRU3hGUVVGRExFdEJRVVFzUlVFeFFrRXNRMEV3UWs4c1UwRkJReXhIUVVGRU96SkNRVUZUTEU5QlFVOHNRMEZCUXl4UFFVRlNMRU5CUVdkQ0xFOUJRV2hDTEVWQlFYbENMRWRCUVhwQ08ydENRVUZVTEVOQk1VSlFPMmRDUVVoSkxFTkJSRTRzUTBFclFrRXNSVUZCUXl4TFFVRkVMRVZCTDBKQkxFTkJLMEpQTEZOQlFVTXNSMEZCUkR0NVFrRkJVeXhQUVVGUExFTkJRVU1zVDBGQlVpeERRVUZuUWl4UFFVRm9RaXhGUVVGNVFpeEhRVUY2UWp0blFrRkJWQ3hEUVM5Q1VEdGpRVTVKTEVOQlJFNHNRMEYxUTBFc1JVRkJReXhMUVVGRUxFVkJka05CTEVOQmRVTlBMRk5CUVVNc1IwRkJSRHQxUWtGQlV5eFBRVUZQTEVOQlFVTXNUMEZCVWl4RFFVRm5RaXhQUVVGb1FpeEZRVUY1UWl4SFFVRjZRanRqUVVGVUxFTkJka05RTzFsQlNFa3NRMEZFVGl4RFFUUkRRU3hGUVVGRExFdEJRVVFzUlVFMVEwRXNRMEUwUTA4c1UwRkJReXhIUVVGRU8zRkNRVUZUTEU5QlFVOHNRMEZCUXl4UFFVRlNMRU5CUVdkQ0xFOUJRV2hDTEVWQlFYbENMRWRCUVhwQ08xbEJRVlFzUTBFMVExQTdWVUZPU1N4RFFVUk9MRU5CYjBSQkxFVkJRVU1zUzBGQlJDeEZRWEJFUVN4RFFXOUVUeXhUUVVGRExFZEJRVVE3YlVKQlFWTXNUMEZCVHl4RFFVRkRMRTlCUVZJc1EwRkJaMElzVDBGQmFFSXNSVUZCZVVJc1IwRkJla0k3VlVGQlZDeERRWEJFVUR0UlFVaEpMRU5CUkU0c1EwRjVSRUVzUlVGQlF5eExRVUZFTEVWQmVrUkJMRU5CZVVSUExGTkJRVU1zUjBGQlJEdHBRa0ZCVXl4UFFVRlBMRU5CUVVNc1QwRkJVaXhEUVVGblFpeFBRVUZvUWl4RlFVRjVRaXhIUVVGNlFqdFJRVUZVTEVOQmVrUlFPMDFCVGtrN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlJFNHNRMEZwUlVFc1JVRkJReXhMUVVGRUxFVkJha1ZCTEVOQmFVVlBMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eEhRVUZFTzJWQlFWTXNUMEZCVHl4RFFVRkRMRTlCUVZJc1EwRkJaMElzVDBGQmFFSXNSVUZCZVVJc1IwRkJla0k3VFVGQlZEdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRnFSVkE3UlVGYVRUczdPenRIUVhCRGMwSXNVVUZCVVN4RFFVRkRPenRCUVhGSWVrTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlzU1VGQlNTeHBRa0ZCU2l4RFFVRkJJbjA9XG4iLCJ2YXIgRWRpdERhdGFzZXRSb3V0ZSwgTGF5b3V0VmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5FZGl0RGF0YXNldFJvdXRlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEVkaXREYXRhc2V0Um91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEVkaXREYXRhc2V0Um91dGUoKSB7XG4gICAgcmV0dXJuIEVkaXREYXRhc2V0Um91dGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBFZGl0RGF0YXNldFJvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIk1hZ2VsbGFuIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBFZGl0XCI7XG4gIH07XG5cbiAgRWRpdERhdGFzZXRSb3V0ZS5wcm90b3R5cGUuYnJlYWRjcnVtYnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0ZXh0OiAnSG9tZScsXG4gICAgICAgIGhyZWY6ICcjJ1xuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiAnQXJjaGl2ZXMnLFxuICAgICAgICBocmVmOiAnI2RhdGFzZXRzJ1xuICAgICAgfSwge1xuICAgICAgICBocmVmOiBcIiNkYXRhc2V0cy9cIiArIHRoaXMubW9kZWwuaWQsXG4gICAgICAgIHRleHQ6IHRoaXMubW9kZWwuZ2V0KCdsYWJlbCcpXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6ICdFZGl0J1xuICAgICAgfVxuICAgIF07XG4gIH07XG5cbiAgRWRpdERhdGFzZXRSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdkYXRhc2V0JykucmVxdWVzdCgnbW9kZWwnLCBpZCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIEVkaXREYXRhc2V0Um91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBFZGl0RGF0YXNldFJvdXRlO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZScpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0RGF0YXNldFJvdXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZaV1JwZEM5eWIzVjBaUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5bFpHbDBMM0p2ZFhSbExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeEpRVUZCTERSQ1FVRkJPMFZCUVVFN096dEJRVUZCTEZWQlFVRXNSMEZCWVN4UFFVRkJMRU5CUVZFc1owSkJRVkk3TzBGQlNWQTdPenM3T3pzN05rSkJSVW9zUzBGQlFTeEhRVUZQTEZOQlFVRTdRVUZEVEN4WFFVRlBMR0ZCUVVFc1IwRkJZU3hEUVVGRExFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJSQ3hEUVVGaUxFZEJRV3RETzBWQlJIQkRPenMyUWtGSFVDeFhRVUZCTEVkQlFXRXNVMEZCUVR0QlFVTllMRmRCUVU4N1RVRkRURHRSUVVGRkxFbEJRVUVzUlVGQlRTeE5RVUZTTzFGQlFXZENMRWxCUVVFc1JVRkJUU3hIUVVGMFFqdFBRVVJMTEVWQlJVdzdVVUZCUlN4SlFVRkJMRVZCUVUwc1ZVRkJVanRSUVVGdlFpeEpRVUZCTEVWQlFVMHNWMEZCTVVJN1QwRkdTeXhGUVVkTU8xRkJRVVVzU1VGQlFTeEZRVUZOTEZsQlFVRXNSMEZCWVN4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFVkJRVFZDTzFGQlFXdERMRWxCUVVFc1JVRkJUU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4UFFVRllMRU5CUVhoRE8wOUJTRXNzUlVGSlREdFJRVUZGTEVsQlFVRXNSVUZCVFN4TlFVRlNPMDlCU2tzN08wVkJSRWs3T3paQ1FWRmlMRXRCUVVFc1IwRkJUeXhUUVVGRExFVkJRVVE3VjBGRFRDeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzVTBGQmRrSXNRMEZCYVVNc1EwRkJReXhQUVVGc1F5eERRVUV3UXl4UFFVRXhReXhGUVVGdFJDeEZRVUZ1UkN4RFFVTkJMRU5CUVVNc1NVRkVSQ3hEUVVOTkxFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4TFFVRkVPMlZCUVZjc1MwRkJReXhEUVVGQkxFdEJRVVFzUjBGQlV6dE5RVUZ3UWp0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGRVRqdEZRVVJMT3pzMlFrRkpVQ3hOUVVGQkxFZEJRVkVzVTBGQlFUdFhRVU5PTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZKTEZWQlFVb3NRMEZCWlR0TlFVRkZMRXRCUVVFc1JVRkJUeXhKUVVGRExFTkJRVUVzUzBGQlZqdExRVUZtTEVOQlFXaENPMFZCUkUwN096czdSMEZxUW5GQ0xFOUJRVUVzUTBGQlVTeHpRa0ZCVWpzN1FVRnpRaTlDTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBFZGl0RGF0YXNldExheW91dCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkVkaXREYXRhc2V0TGF5b3V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEVkaXREYXRhc2V0TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBFZGl0RGF0YXNldExheW91dCgpIHtcbiAgICByZXR1cm4gRWRpdERhdGFzZXRMYXlvdXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBFZGl0RGF0YXNldExheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBFZGl0RGF0YXNldExheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NvbnRhaW5lcic7XG5cbiAgRWRpdERhdGFzZXRMYXlvdXQucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBNb2RlbEV2ZW50czoge30sXG4gICAgU3VibWl0QnV0dG9uOiB7fVxuICB9O1xuXG4gIEVkaXREYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5TeXBob24uZGVzZXJpYWxpemUodGhpcywgdGhpcy5tb2RlbC5hdHRyaWJ1dGVzKTtcbiAgfTtcblxuICBFZGl0RGF0YXNldExheW91dC5wcm90b3R5cGUub25TdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YTtcbiAgICBkYXRhID0gQmFja2JvbmUuU3lwaG9uLnNlcmlhbGl6ZSh0aGlzKTtcbiAgICB0aGlzLm1vZGVsLnNldChkYXRhKTtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5zYXZlKCk7XG4gIH07XG5cbiAgRWRpdERhdGFzZXRMYXlvdXQucHJvdG90eXBlLm9uUmVxdWVzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjb25zb2xlLmxvZygnT04gUkVRVUVTVCcpO1xuICB9O1xuXG4gIEVkaXREYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gUmFkaW8uY2hhbm5lbCgnYXBwJykudHJpZ2dlcigncmVkaXJlY3QnLCAnI2RhdGFzZXRzJyk7XG4gIH07XG5cbiAgRWRpdERhdGFzZXRMYXlvdXQucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnRVJST1InKTtcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcbiAgfTtcblxuICByZXR1cm4gRWRpdERhdGFzZXRMYXlvdXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEVkaXREYXRhc2V0TGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZaV1JwZEM5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2WldScGRDOTJhV1YzY3k5c1lYbHZkWFF1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVU5CTEVsQlFVRXNhVUpCUVVFN1JVRkJRVHM3TzBGQlFVMDdPenM3T3pzN09FSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4dlFrRkJVanM3T0VKQlExWXNVMEZCUVN4SFFVRlhPenM0UWtGRldDeFRRVUZCTEVkQlEwVTdTVUZCUVN4WFFVRkJMRVZCUVdFc1JVRkJZanRKUVVOQkxGbEJRVUVzUlVGQll5eEZRVVJrT3pzN09FSkJSMFlzVVVGQlFTeEhRVUZWTEZOQlFVRTdWMEZEVWl4UlFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRV2hDTEVOQlFUWkNMRWxCUVRkQ0xFVkJRV2RETEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1ZVRkJka003UlVGRVVUczdPRUpCU1ZZc1VVRkJRU3hIUVVGVkxGTkJRVUU3UVVGRFVpeFJRVUZCTzBsQlFVRXNTVUZCUVN4SFFVRlBMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQmFFSXNRMEZCTUVJc1NVRkJNVUk3U1VGSFVDeEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWRCUVZBc1EwRkJWeXhKUVVGWU8xZEJRMEVzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SlFVRlFMRU5CUVVFN1JVRk1VVHM3T0VKQlVWWXNVMEZCUVN4SFFVRlhMRk5CUVVFN1YwRkRWQ3hQUVVGUExFTkJRVU1zUjBGQlVpeERRVUZaTEZsQlFWbzdSVUZFVXpzN09FSkJSMWdzVFVGQlFTeEhRVUZSTEZOQlFVRTdWMEZEVGl4TFFVRkxMRU5CUVVNc1QwRkJUaXhEUVVGakxFdEJRV1FzUTBGQmIwSXNRMEZCUXl4UFFVRnlRaXhEUVVFMlFpeFZRVUUzUWl4RlFVRjVReXhYUVVGNlF6dEZRVVJOT3pzNFFrRkpVaXhQUVVGQkxFZEJRVk1zVTBGQlF5eEhRVUZFTzBsQlExQXNUMEZCVHl4RFFVRkRMRWRCUVZJc1EwRkJXU3hQUVVGYU8xZEJRMEVzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4SFFVRmFPMFZCUms4N096czdSMEV6UW5GQ0xFVkJRVVVzUTBGQlF6czdRVUZwUTI1RExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxpbnB1dFwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1wicGxhY2Vob2xkZXJcIjogamFkZS5lc2NhcGUob3B0cy5wbGFjZWhvbGRlciksXCJuYW1lXCI6IGphZGUuZXNjYXBlKG9wdHMubmFtZSksXCJ0eXBlXCI6IGphZGUuZXNjYXBlKG9wdHMudHlwZSksXCJ2YWx1ZVwiOiBqYWRlLmVzY2FwZShvcHRzLnZhbHVlKSxcImNsYXNzXCI6IFwiZm9ybS1jb250cm9sXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiLz5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJjYXJkIGNhcmQtYm9keVxcXCI+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+RWRpdCBEYXRhc2V0PC9oND48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnTGFiZWwnLCBwbGFjZWhvbGRlcjogJ0xhYmVsJywgbmFtZTogJ2xhYmVsJywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyIHRleHQtcmlnaHRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBEYXRhc2V0Q29sbGVjdGlvbiwgRGF0YXNldE1vZGVsLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIGluZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuRGF0YXNldE1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldE1vZGVsKCkge1xuICAgIHRoaXMuZGVzdHJveVN1cGVyZmx1b3VzRmFjZXRzID0gYmluZCh0aGlzLmRlc3Ryb3lTdXBlcmZsdW91c0ZhY2V0cywgdGhpcyk7XG4gICAgcmV0dXJuIERhdGFzZXRNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERhdGFzZXRNb2RlbC5wcm90b3R5cGUudXJsUm9vdCA9ICdkYXRhc2V0cyc7XG5cbiAgRGF0YXNldE1vZGVsLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICBpZDogJycsXG4gICAgbGFiZWw6ICcnLFxuICAgIGNvbnRleHQ6IHt9XG4gIH07XG5cbiAgRGF0YXNldE1vZGVsLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2RhdGFzZXQnKS5yZXF1ZXN0KCdzYXZlJywgdGhpcyk7XG4gIH07XG5cbiAgRGF0YXNldE1vZGVsLnByb3RvdHlwZS5mZXRjaEZhY2V0cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdmYWNldCcpLnJlcXVlc3QoJ2NvbGxlY3Rpb24nLCB0aGlzLmlkKTtcbiAgfTtcblxuICBEYXRhc2V0TW9kZWwucHJvdG90eXBlLmZldGNoRGF0YXBvaW50cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdkYXRhcG9pbnQnKS5yZXF1ZXN0KCdjb2xsZWN0aW9uJywgdGhpcy5pZCk7XG4gIH07XG5cbiAgRGF0YXNldE1vZGVsLnByb3RvdHlwZS5mZXRjaEtub3dsZWRnZVJ1bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2tub3dsZWRnZTpydWxlJykucmVxdWVzdCgnY29sbGVjdGlvbicsIHRoaXMuaWQpO1xuICB9O1xuXG4gIERhdGFzZXRNb2RlbC5wcm90b3R5cGUuZmV0Y2hWaWV3ZXJSdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCd2aWV3ZXI6cnVsZScpLnJlcXVlc3QoJ2NvbGxlY3Rpb24nLCB0aGlzLmlkKTtcbiAgfTtcblxuICBEYXRhc2V0TW9kZWwucHJvdG90eXBlLmdlbmVyYXRlTmV3RmFjZXRzID0gZnVuY3Rpb24oZmFjZXRLZXlzLCBpbmRleFN0YXJ0KSB7XG4gICAgdmFyIGluZGV4LCBzYXZlRmFjZXQ7XG4gICAgaW5kZXggPSBpbmRleFN0YXJ0O1xuICAgIHNhdmVGYWNldCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZhY2V0KSB7XG4gICAgICAgIHZhciBhdHRycztcbiAgICAgICAgYXR0cnMgPSB7XG4gICAgICAgICAgaWQ6IGJ1aWxkVW5pcXVlSWQoJ2ZjXycpLFxuICAgICAgICAgIGRhdGFzZXRfaWQ6IF90aGlzLmlkLFxuICAgICAgICAgIGF0dHJpYnV0ZTogZmFjZXQsXG4gICAgICAgICAgbGFiZWw6IGZhY2V0LFxuICAgICAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIHRvb2x0aXA6ICcnXG4gICAgICAgIH07XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGInKS5yZXF1ZXN0KCdhZGQnLCAnZmFjZXRzJywgYXR0cnMpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICByZXR1cm4gUHJvbWlzZS5lYWNoKGZhY2V0S2V5cywgc2F2ZUZhY2V0KTtcbiAgfTtcblxuICBEYXRhc2V0TW9kZWwucHJvdG90eXBlLmRlc3Ryb3lTdXBlcmZsdW91c0ZhY2V0cyA9IGZ1bmN0aW9uKHRvRGVzdHJveSwgZmFjZXRDb2xsZWN0aW9uKSB7XG4gICAgdmFyIGRlc3Ryb3lGYWNldDtcbiAgICBkZXN0cm95RmFjZXQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihmYWNldCkge1xuICAgICAgICBmYWNldENvbGxlY3Rpb24ucmVtb3ZlKGZhY2V0KTtcbiAgICAgICAgcmV0dXJuIGZhY2V0LmRlc3Ryb3koKTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmV0dXJuIFByb21pc2UuZWFjaCh0b0Rlc3Ryb3ksIGRlc3Ryb3lGYWNldCk7XG4gIH07XG5cbiAgRGF0YXNldE1vZGVsLnByb3RvdHlwZS5yZWdlbmVyYXRlRmFjZXRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hEYXRhcG9pbnRzKCkudGhlbihmdW5jdGlvbihkYXRhcG9pbnRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoRmFjZXRzKCkudGhlbihmdW5jdGlvbihmYWNldENvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBhbGxLZXlzLCBhdHRyLCBkcCwgZmFjZXQsIGksIGosIGxlbiwgbGVuMSwgcGVuZGluZ0Rlc3Ryb3ksIHJlZiwgcmVmMTtcbiAgICAgICAgICAgIHBlbmRpbmdEZXN0cm95ID0gW107XG4gICAgICAgICAgICBhbGxLZXlzID0gW107XG4gICAgICAgICAgICByZWYgPSBkYXRhcG9pbnRDb2xsZWN0aW9uLm1vZGVscztcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICBkcCA9IHJlZltpXTtcbiAgICAgICAgICAgICAgYWxsS2V5cyA9IF8udW5pb24oYWxsS2V5cywgXy5rZXlzKGRwLmdldCgnZGF0YScpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWYxID0gZmFjZXRDb2xsZWN0aW9uLm1vZGVscztcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgICAgICBmYWNldCA9IHJlZjFbal07XG4gICAgICAgICAgICAgIGF0dHIgPSBmYWNldC5nZXQoJ2F0dHJpYnV0ZScpO1xuICAgICAgICAgICAgICBpZiAoaW5kZXhPZi5jYWxsKGFsbEtleXMsIGF0dHIpID49IDApIHtcbiAgICAgICAgICAgICAgICBhbGxLZXlzID0gXy53aXRob3V0KGFsbEtleXMsIGF0dHIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdEZXN0cm95LnB1c2goZmFjZXQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVzdHJveVN1cGVyZmx1b3VzRmFjZXRzKHBlbmRpbmdEZXN0cm95LCBmYWNldENvbGxlY3Rpb24pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZW5lcmF0ZU5ld0ZhY2V0cyhhbGxLZXlzLCBmYWNldENvbGxlY3Rpb24ubGVuZ3RoICsgMSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldE1vZGVsO1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cbkRhdGFzZXRDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRDb2xsZWN0aW9uLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEYXRhc2V0Q29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gRGF0YXNldENvbGxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0Q29sbGVjdGlvbi5wcm90b3R5cGUudXJsUm9vdCA9ICdkYXRhc2V0cyc7XG5cbiAgRGF0YXNldENvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gRGF0YXNldE1vZGVsO1xuXG4gIHJldHVybiBEYXRhc2V0Q29sbGVjdGlvbjtcblxufSkoQmFja2JvbmUuQ29sbGVjdGlvbik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBNb2RlbDogRGF0YXNldE1vZGVsLFxuICBDb2xsZWN0aW9uOiBEYXRhc2V0Q29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2Wlc1MGFYUnBaWE11WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdlpXNTBhWFJwWlhNdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVWQkxFbEJRVUVzSzBKQlFVRTdSVUZCUVRzN096czdRVUZCVFRzN096czdPenM3ZVVKQlEwb3NUMEZCUVN4SFFVRlRPenQ1UWtGTFZDeFJRVUZCTEVkQlEwVTdTVUZCUVN4RlFVRkJMRVZCUVZVc1JVRkJWanRKUVVOQkxFdEJRVUVzUlVGQlZTeEZRVVJXTzBsQlJVRXNUMEZCUVN4RlFVRlZMRVZCUmxZN096dDVRa0ZMUml4SlFVRkJMRWRCUVUwc1UwRkJRVHRYUVVOS0xGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhUUVVGMlFpeERRVUZwUXl4RFFVRkRMRTlCUVd4RExFTkJRVEJETEUxQlFURkRMRVZCUVd0RUxFbEJRV3hFTzBWQlJFazdPM2xDUVUxT0xGZEJRVUVzUjBGQllTeFRRVUZCTzBGQlExZ3NWMEZCVHl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNUMEZCZGtJc1EwRkJLMElzUTBGQlF5eFBRVUZvUXl4RFFVRjNReXhaUVVGNFF5eEZRVUZ6UkN4SlFVRkRMRU5CUVVFc1JVRkJka1E3UlVGRVNUczdlVUpCUjJJc1pVRkJRU3hIUVVGcFFpeFRRVUZCTzBGQlEyWXNWMEZCVHl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNWMEZCZGtJc1EwRkJiVU1zUTBGQlF5eFBRVUZ3UXl4RFFVRTBReXhaUVVFMVF5eEZRVUV3UkN4SlFVRkRMRU5CUVVFc1JVRkJNMFE3UlVGRVVUczdlVUpCUjJwQ0xHMUNRVUZCTEVkQlFYRkNMRk5CUVVFN1FVRkRia0lzVjBGQlR5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzWjBKQlFYWkNMRU5CUVhkRExFTkJRVU1zVDBGQmVrTXNRMEZCYVVRc1dVRkJha1FzUlVGQkswUXNTVUZCUXl4RFFVRkJMRVZCUVdoRk8wVkJSRms3TzNsQ1FVZHlRaXhuUWtGQlFTeEhRVUZyUWl4VFFVRkJPMEZCUTJoQ0xGZEJRVThzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xHRkJRWFpDTEVOQlFYRkRMRU5CUVVNc1QwRkJkRU1zUTBGQk9FTXNXVUZCT1VNc1JVRkJORVFzU1VGQlF5eERRVUZCTEVWQlFUZEVPMFZCUkZNN08zbENRVWRzUWl4cFFrRkJRU3hIUVVGdFFpeFRRVUZETEZOQlFVUXNSVUZCV1N4VlFVRmFPMEZCUjJwQ0xGRkJRVUU3U1VGQlFTeExRVUZCTEVkQlFWRTdTVUZKVWl4VFFVRkJMRWRCUVZrc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEV0QlFVUTdRVUZIVml4WlFVRkJPMUZCUVVFc1MwRkJRU3hIUVVORk8xVkJRVUVzUlVGQlFTeEZRVUZaTEdGQlFVRXNRMEZCWXl4TFFVRmtMRU5CUVZvN1ZVRkRRU3hWUVVGQkxFVkJRVmtzUzBGQlF5eERRVUZCTEVWQlJHSTdWVUZGUVN4VFFVRkJMRVZCUVZrc1MwRkdXanRWUVVkQkxFdEJRVUVzUlVGQldTeExRVWhhTzFWQlNVRXNTMEZCUVN4RlFVRlpMRXRCU2xvN1ZVRkxRU3hQUVVGQkxFVkJRVmtzU1VGTVdqdFZRVTFCTEU5QlFVRXNSVUZCV1N4RlFVNWFPenRSUVZOR0xFdEJRVUVzUjBGQlVTeExRVUZCTEVkQlFWRTdRVUZIYUVJc1pVRkJUeXhSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFXWXNRMEZCZFVJc1NVRkJka0lzUTBGQk5FSXNRMEZCUXl4UFFVRTNRaXhEUVVGeFF5eExRVUZ5UXl4RlFVRTBReXhSUVVFMVF5eEZRVUZ6UkN4TFFVRjBSRHROUVdoQ1J6dEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFN1FVRnhRbG9zVjBGQlR5eFBRVUZQTEVOQlFVTXNTVUZCVWl4RFFVRmhMRk5CUVdJc1JVRkJkMElzVTBGQmVFSTdSVUUxUWxVN08zbENRV2xEYmtJc2QwSkJRVUVzUjBGQk1FSXNVMEZCUXl4VFFVRkVMRVZCUVZrc1pVRkJXanRCUVVsNFFpeFJRVUZCTzBsQlFVRXNXVUZCUVN4SFFVRmxMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eExRVUZFTzFGQlEySXNaVUZCWlN4RFFVRkRMRTFCUVdoQ0xFTkJRWFZDTEV0QlFYWkNPMEZCUTBFc1pVRkJUeXhMUVVGTExFTkJRVU1zVDBGQlRpeERRVUZCTzAxQlJrMDdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQk8wRkJTMllzVjBGQlR5eFBRVUZQTEVOQlFVTXNTVUZCVWl4RFFVRmhMRk5CUVdJc1JVRkJkMElzV1VGQmVFSTdSVUZVYVVJN08zbENRVmt4UWl4blFrRkJRU3hIUVVGclFpeFRRVUZCTzBGQlIyaENMRmRCUVU4c1NVRkJTU3hQUVVGS0xFTkJRVmtzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRTlCUVVRc1JVRkJWU3hOUVVGV08yVkJSMnBDTEV0QlFVTXNRMEZCUVN4bFFVRkVMRU5CUVVFc1EwRkJhMElzUTBGQlF5eEpRVUZ1UWl4RFFVRjNRaXhUUVVGRExHMUNRVUZFTzJsQ1FVZDBRaXhMUVVGRExFTkJRVUVzVjBGQlJDeERRVUZCTEVOQlFXTXNRMEZCUXl4SlFVRm1MRU5CUVc5Q0xGTkJRVU1zWlVGQlJEdEJRVWRzUWl4blFrRkJRVHRaUVVGQkxHTkJRVUVzUjBGQmFVSTdXVUZIYWtJc1QwRkJRU3hIUVVGVk8wRkJRMVk3UVVGQlFTeHBRa0ZCUVN4eFEwRkJRVHM3WTBGRFJTeFBRVUZCTEVkQlFWVXNRMEZCUXl4RFFVRkRMRXRCUVVZc1EwRkJVU3hQUVVGU0xFVkJRV2xDTEVOQlFVTXNRMEZCUXl4SlFVRkdMRU5CUVU4c1JVRkJSU3hEUVVGRExFZEJRVWdzUTBGQlR5eE5RVUZRTEVOQlFWQXNRMEZCYWtJN1FVRkVXanRCUVVsQk8wRkJRVUVzYVVKQlFVRXNkME5CUVVFN08yTkJSMFVzU1VGQlFTeEhRVUZQTEV0QlFVc3NRMEZCUXl4SFFVRk9MRU5CUVZVc1YwRkJWanRqUVVkUUxFbEJRVWNzWVVGQlVTeFBRVUZTTEVWQlFVRXNTVUZCUVN4TlFVRklPMmRDUVVORkxFOUJRVUVzUjBGQlZTeERRVUZETEVOQlFVTXNUMEZCUml4RFFVRlZMRTlCUVZZc1JVRkJiVUlzU1VGQmJrSXNSVUZFV2p0bFFVRkJMRTFCUVVFN1owSkJUMFVzWTBGQll5eERRVUZETEVsQlFXWXNRMEZCYjBJc1MwRkJjRUlzUlVGUVJqczdRVUZPUmp0dFFrRm5Ra0VzUzBGQlF5eERRVUZCTEhkQ1FVRkVMRU5CUVRCQ0xHTkJRVEZDTEVWQlFUQkRMR1ZCUVRGRExFTkJRMEVzUTBGQlF5eEpRVVJFTEVOQlEwMHNVMEZCUVR0eFFrRkhTaXhMUVVGRExFTkJRVUVzYVVKQlFVUXNRMEZCYlVJc1QwRkJia0lzUlVGQk5FSXNaVUZCWlN4RFFVRkRMRTFCUVdoQ0xFZEJRWGxDTEVOQlFYSkVMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzVTBGQlFUdEJRVUZOTEhWQ1FVRlBMRTlCUVVFc1EwRkJRVHRqUVVGaUxFTkJSRTRzUTBGRlFTeEZRVUZETEV0QlFVUXNSVUZHUVN4RFFVVlBMRk5CUVVFN1FVRkJUU3gxUWtGQlR5eE5RVUZCTEVOQlFVOHNSMEZCVUR0alFVRmlMRU5CUmxBN1dVRklTU3hEUVVST0xFTkJVVUVzUlVGQlF5eExRVUZFTEVWQlVrRXNRMEZSVHl4VFFVRkRMRWRCUVVRN1FVRkJVeXh4UWtGQlR5eE5RVUZCTEVOQlFVOHNSMEZCVUR0WlFVRm9RaXhEUVZKUU8xVkJNMEpyUWl4RFFVRndRanRSUVVoelFpeERRVUY0UWp0TlFVaHBRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCV2p0RlFVaFRPenM3TzBkQk0wVlBMRkZCUVZFc1EwRkJRenM3UVVFeVNEbENPenM3T3pzN096aENRVU5LTEU5QlFVRXNSMEZCVXpzN09FSkJRMVFzUzBGQlFTeEhRVUZQT3pzN08wZEJSblZDTEZGQlFWRXNRMEZCUXpzN1FVRk5la01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZEUlR0RlFVRkJMRXRCUVVFc1JVRkJXU3haUVVGYU8wVkJRMEVzVlVGQlFTeEZRVUZaTEdsQ1FVUmFJbjA9XG4iLCJ2YXIgRGF0YXNldEV4cG9ydFJvdXRlLCBMYXlvdXRWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0Jyk7XG5cbkRhdGFzZXRFeHBvcnRSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0RXhwb3J0Um91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRFeHBvcnRSb3V0ZSgpIHtcbiAgICByZXR1cm4gRGF0YXNldEV4cG9ydFJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldEV4cG9ydFJvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIkRhdGFzZXRzIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBFeHBvcnRcIjtcbiAgfTtcblxuICBEYXRhc2V0RXhwb3J0Um91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGV4dDogJ0hvbWUnLFxuICAgICAgICBocmVmOiAnIydcbiAgICAgIH0sIHtcbiAgICAgICAgaHJlZjogXCIjZGF0YXNldHNcIixcbiAgICAgICAgdGV4dDogJ0FyY2hpdmVzJ1xuICAgICAgfSwge1xuICAgICAgICBocmVmOiBcIiNkYXRhc2V0cy9cIiArIHRoaXMubW9kZWwuaWQsXG4gICAgICAgIHRleHQ6IHRoaXMubW9kZWwuZ2V0KCdsYWJlbCcpXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6ICdFeHBvcnQnXG4gICAgICB9XG4gICAgXTtcbiAgfTtcblxuICBEYXRhc2V0RXhwb3J0Um91dGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGF0YXNldCcpLnJlcXVlc3QoJ21vZGVsJywgaWQpLnRoZW4oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBEYXRhc2V0RXhwb3J0Um91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBEYXRhc2V0RXhwb3J0Um91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFzZXRFeHBvcnRSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2Wlhod2IzSjBMM0p2ZFhSbExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTlrWVhSaGMyVjBMMlY0Y0c5eWRDOXliM1YwWlM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3c0UWtGQlFUdEZRVUZCT3pzN1FVRkJRU3hWUVVGQkxFZEJRV01zVDBGQlFTeERRVUZSTEdkQ1FVRlNPenRCUVVsU096czdPenM3T3l0Q1FVVktMRXRCUVVFc1IwRkJUeXhUUVVGQk8wRkJRMHdzVjBGQlR5eGhRVUZCTEVkQlFXRXNRMEZCUXl4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFZEJRVkFzUTBGQlZ5eFBRVUZZTEVOQlFVUXNRMEZCWWl4SFFVRnJRenRGUVVSd1F6czdLMEpCUjFBc1YwRkJRU3hIUVVGaExGTkJRVUU3UVVGRFdDeFhRVUZQTzAxQlEwdzdVVUZCUlN4SlFVRkJMRVZCUVUwc1RVRkJVanRSUVVGblFpeEpRVUZCTEVWQlFVMHNSMEZCZEVJN1QwRkVTeXhGUVVWTU8xRkJRVVVzU1VGQlFTeEZRVUZOTEZkQlFWSTdVVUZCY1VJc1NVRkJRU3hGUVVGTkxGVkJRVE5DTzA5QlJrc3NSVUZIVER0UlFVRkZMRWxCUVVFc1JVRkJUU3haUVVGQkxFZEJRV0VzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4RlFVRTFRanRSUVVGclF5eEpRVUZCTEVWQlFVMHNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzVDBGQldDeERRVUY0UXp0UFFVaExMRVZCU1V3N1VVRkJSU3hKUVVGQkxFVkJRVTBzVVVGQlVqdFBRVXBMT3p0RlFVUkpPenNyUWtGUllpeExRVUZCTEVkQlFVOHNVMEZCUXl4RlFVRkVPMWRCUTB3c1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRk5CUVhaQ0xFTkJRV2xETEVOQlFVTXNUMEZCYkVNc1EwRkJNRU1zVDBGQk1VTXNSVUZCYlVRc1JVRkJia1FzUTBGRFFTeERRVUZETEVsQlJFUXNRMEZEVFN4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zUzBGQlJEdGxRVUZYTEV0QlFVTXNRMEZCUVN4TFFVRkVMRWRCUVZNN1RVRkJjRUk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUkU0N1JVRkVTenM3SzBKQlNWQXNUVUZCUVN4SFFVRlJMRk5CUVVFN1YwRkRUaXhKUVVGRExFTkJRVUVzVTBGQlV5eERRVUZETEVsQlFWZ3NRMEZCWjBJc1NVRkJTU3hWUVVGS0xFTkJRV1U3VFVGQlJTeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRXRCUVZZN1MwRkJaaXhEUVVGb1FqdEZRVVJOT3pzN08wZEJha0oxUWl4UFFVRkJMRU5CUVZFc2MwSkJRVkk3TzBGQmMwSnFReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWlKOVxuIiwidmFyIEV4cG9ydFZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5FeHBvcnRWaWV3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEV4cG9ydFZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEV4cG9ydFZpZXcoKSB7XG4gICAgcmV0dXJuIEV4cG9ydFZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBFeHBvcnRWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2V4cG9ydCcpO1xuXG4gIEV4cG9ydFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBoLTEwMCBmbGV4LWNvbHVtbic7XG5cbiAgRXhwb3J0Vmlldy5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIERvd25sb2FkRmlsZToge30sXG4gICAgRmxhc2hlczoge1xuICAgICAgc3VjY2Vzczoge1xuICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGV4cG9ydGVkIGRhdGFzZXQgZm9yIGFuYWx5c2lzLidcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRXhwb3J0Vmlldy5wcm90b3R5cGUudWkgPSB7XG4gICAgZXhwb3J0SlNPTjogJ1tkYXRhLWV4cG9ydD1qc29uXScsXG4gICAgZXhwb3J0Q1NWOiAnW2RhdGEtZXhwb3J0PWNzdl0nXG4gIH07XG5cbiAgRXhwb3J0Vmlldy5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayBAdWkuZXhwb3J0SlNPTic6ICdleHBvcnRKU09OJyxcbiAgICAnY2xpY2sgQHVpLmV4cG9ydENTVic6ICdleHBvcnRDU1YnXG4gIH07XG5cbiAgRXhwb3J0Vmlldy5wcm90b3R5cGUuZ2VuZXJhdGVGaWxlbmFtZSA9IGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgIHZhciBkYXRlLCBmaWxlbmFtZSwgbGFiZWw7XG4gICAgbGFiZWwgPSB0aGlzLm1vZGVsLmdldCgnbGFiZWwnKTtcbiAgICBsYWJlbCA9IGxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICdfJyk7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwgMTApLnJlcGxhY2UoLy0vZywgJ18nKTtcbiAgICBmaWxlbmFtZSA9IFtsYWJlbCwgJ19tYWdlbGxhbl9hbmFseXNpc19leHBvcnRfJywgZGF0ZSwgJy4nLCBleHRlbnNpb25dO1xuICAgIHJldHVybiBmaWxlbmFtZS5qb2luKCcnKTtcbiAgfTtcblxuICBFeHBvcnRWaWV3LnByb3RvdHlwZS5wcmVFeHBvcnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ3Nob3cnLCBcIkV4cG9ydGluZyBcIiArICh0aGlzLm1vZGVsLmdldCgnbGFiZWwnKSkgKyBcIi4uLlwiKTtcbiAgfTtcblxuICBFeHBvcnRWaWV3LnByb3RvdHlwZS5wb3N0RXhwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ2hpZGUnKTtcbiAgICByZXR1cm4gdGhpcy5mbGFzaFN1Y2Nlc3MoKTtcbiAgfTtcblxuICBFeHBvcnRWaWV3LnByb3RvdHlwZS5leHBvcnRKU09OID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcmVFeHBvcnQoKTtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5mZXRjaERhdGFwb2ludHMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICAgICAgdmFyIGZpbGVuYW1lLCBmaWxldHlwZTtcbiAgICAgICAgZmlsZW5hbWUgPSBfdGhpcy5nZW5lcmF0ZUZpbGVuYW1lKCdqc29uJyk7XG4gICAgICAgIGZpbGV0eXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICBfdGhpcy5kb3dubG9hZEZpbGUoe1xuICAgICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KGRhdGFwb2ludHMucGx1Y2soJ2RhdGEnKSwgbnVsbCwgMiksXG4gICAgICAgICAgdHlwZTogZmlsZXR5cGUsXG4gICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXMucG9zdEV4cG9ydCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgRXhwb3J0Vmlldy5wcm90b3R5cGUuZXhwb3J0Q1NWID0gZnVuY3Rpb24oKSB7XG4gICAgQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ3Nob3cnLCBcIkV4cG9ydGluZyBcIiArICh0aGlzLm1vZGVsLmdldCgnbGFiZWwnKSkgKyBcIi4uLlwiKTtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5mZXRjaERhdGFwb2ludHMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICAgICAgdmFyIGFsbEtleXMsIGNzdk91dCwgZWwsIGZpbGVuYW1lLCBmaWxldHlwZSwgaGVhZGVyLCBpLCBqLCBqc29uRXhwb3J0LCBrLCBsZW4sIGxlbjEsIGxlbjIsIHJvdywgdmFsdWU7XG4gICAgICAgIGpzb25FeHBvcnQgPSBkYXRhcG9pbnRzLnBsdWNrKCdkYXRhJyk7XG4gICAgICAgIGFsbEtleXMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0ganNvbkV4cG9ydC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGVsID0ganNvbkV4cG9ydFtpXTtcbiAgICAgICAgICBhbGxLZXlzID0gXy51bmlvbihhbGxLZXlzLCBfLmtleXMoZWwpKTtcbiAgICAgICAgfVxuICAgICAgICBhbGxLZXlzID0gXy51bmlxKGFsbEtleXMpO1xuICAgICAgICBjc3ZPdXQgPSBbXTtcbiAgICAgICAgY3N2T3V0LnB1c2goYWxsS2V5cy5qb2luKCcsICcpKTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IGpzb25FeHBvcnQubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgICAgZWwgPSBqc29uRXhwb3J0W2pdO1xuICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICAgIGZvciAoayA9IDAsIGxlbjIgPSBhbGxLZXlzLmxlbmd0aDsgayA8IGxlbjI7IGsrKykge1xuICAgICAgICAgICAgaGVhZGVyID0gYWxsS2V5c1trXTtcbiAgICAgICAgICAgIHZhbHVlID0gZWxbaGVhZGVyXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlWydAaWQnXSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlWydAaWQnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gJ05VTEwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm93LnB1c2godmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjc3ZPdXQucHVzaChyb3cuam9pbignLCAnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmlsZW5hbWUgPSBfdGhpcy5nZW5lcmF0ZUZpbGVuYW1lKCdjc3YnKTtcbiAgICAgICAgZmlsZXR5cGUgPSAndGV4dC9jc3YnO1xuICAgICAgICBfdGhpcy5kb3dubG9hZEZpbGUoe1xuICAgICAgICAgIGNvbnRlbnQ6IGNzdk91dC5qb2luKCdcXG4nKSxcbiAgICAgICAgICB0eXBlOiBmaWxldHlwZSxcbiAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcy5wb3N0RXhwb3J0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gRXhwb3J0VmlldztcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRXhwb3J0VmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2Wlhod2IzSjBMM1pwWlhkekwyeGhlVzkxZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOWxlSEJ2Y25RdmRtbGxkM012YkdGNWIzVjBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxGVkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3ZFVKQlEwb3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3h2UWtGQlVqczdkVUpCUTFZc1UwRkJRU3hIUVVGWE96dDFRa0ZGV0N4VFFVRkJMRWRCUTBVN1NVRkJRU3haUVVGQkxFVkJRV01zUlVGQlpEdEpRVU5CTEU5QlFVRXNSVUZEUlR0TlFVRkJMRTlCUVVFc1JVRkRSVHRSUVVGQkxFOUJRVUVzUlVGQlZTdzJRMEZCVmp0UFFVUkdPMHRCUmtZN096dDFRa0ZMUml4RlFVRkJMRWRCUTBVN1NVRkJRU3hWUVVGQkxFVkJRVmtzYjBKQlFWbzdTVUZEUVN4VFFVRkJMRVZCUVZrc2JVSkJSRm83T3p0MVFrRkhSaXhOUVVGQkxFZEJRMFU3U1VGQlFTeHpRa0ZCUVN4RlFVRjNRaXhaUVVGNFFqdEpRVU5CTEhGQ1FVRkJMRVZCUVhkQ0xGZEJSSGhDT3pzN2RVSkJTVVlzWjBKQlFVRXNSMEZCYTBJc1UwRkJReXhUUVVGRU8wRkJRMmhDTEZGQlFVRTdTVUZCUVN4TFFVRkJMRWRCUVZFc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NUMEZCV0R0SlFVTlNMRXRCUVVFc1IwRkJVU3hMUVVGTExFTkJRVU1zVjBGQlRpeERRVUZCTEVOQlFXMUNMRU5CUVVNc1QwRkJjRUlzUTBGQk5FSXNTMEZCTlVJc1JVRkJiVU1zUjBGQmJrTTdTVUZEVWl4SlFVRkJMRWRCUVZFc1NVRkJTU3hKUVVGS0xFTkJRVUVzUTBGQlZTeERRVUZETEUxQlFWZ3NRMEZCUVN4RFFVRnRRaXhEUVVGRExFdEJRWEJDTEVOQlFUQkNMRU5CUVRGQ0xFVkJRVFJDTEVWQlFUVkNMRU5CUVN0Q0xFTkJRVU1zVDBGQmFFTXNRMEZCZDBNc1NVRkJlRU1zUlVGQk9FTXNSMEZCT1VNN1NVRkRVaXhSUVVGQkxFZEJRVmNzUTBGQlF5eExRVUZFTEVWQlFWRXNORUpCUVZJc1JVRkJjME1zU1VGQmRFTXNSVUZCTkVNc1IwRkJOVU1zUlVGQmFVUXNVMEZCYWtRN1FVRkRXQ3hYUVVGUExGRkJRVkVzUTBGQlF5eEpRVUZVTEVOQlFXTXNSVUZCWkR0RlFVeFRPenQxUWtGUGJFSXNVMEZCUVN4SFFVRlhMRk5CUVVFN1YwRkhWQ3hSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFXWXNRMEZCZFVJc1UwRkJka0lzUTBGQmFVTXNRMEZCUXl4UFFVRnNReXhEUVVFd1F5eE5RVUV4UXl4RlFVRnJSQ3haUVVGQkxFZEJRVmtzUTBGQlF5eEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWRCUVZBc1EwRkJWeXhQUVVGWUxFTkJRVVFzUTBGQldpeEhRVUZwUXl4TFFVRnVSanRGUVVoVE96dDFRa0ZMV0N4VlFVRkJMRWRCUVZrc1UwRkJRVHRKUVVkV0xGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhUUVVGMlFpeERRVUZwUXl4RFFVRkRMRTlCUVd4RExFTkJRVEJETEUxQlFURkRPMWRCUjBFc1NVRkJReXhEUVVGQkxGbEJRVVFzUTBGQlFUdEZRVTVWT3p0MVFrRlJXaXhWUVVGQkxFZEJRVmtzVTBGQlFUdEpRVU5XTEVsQlFVTXNRMEZCUVN4VFFVRkVMRU5CUVVFN1YwRkpRU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEdWQlFWQXNRMEZCUVN4RFFVRjNRaXhEUVVGRExFbEJRWHBDTEVOQlFUaENMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eFZRVUZFTzBGQlJ6VkNMRmxCUVVFN1VVRkJRU3hSUVVGQkxFZEJRVmtzUzBGQlF5eERRVUZCTEdkQ1FVRkVMRU5CUVd0Q0xFMUJRV3hDTzFGQlExb3NVVUZCUVN4SFFVRlpPMUZCUjFvc1MwRkJReXhEUVVGQkxGbEJRVVFzUTBGQll6dFZRVUZGTEU5QlFVRXNSVUZCVXl4SlFVRkpMRU5CUVVNc1UwRkJUQ3hEUVVGbExGVkJRVlVzUTBGQlF5eExRVUZZTEVOQlFXbENMRTFCUVdwQ0xFTkJRV1lzUlVGQmVVTXNTVUZCZWtNc1JVRkJLME1zUTBGQkwwTXNRMEZCV0R0VlFVRTRSQ3hKUVVGQkxFVkJRVTBzVVVGQmNFVTdWVUZCT0VVc1VVRkJRU3hGUVVGVkxGRkJRWGhHTzFOQlFXUTdaVUZEUVN4TFFVRkRMRU5CUVVFc1ZVRkJSQ3hEUVVGQk8wMUJValJDTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVFNVFqdEZRVXhWT3p0MVFrRm5RbG9zVTBGQlFTeEhRVUZYTEZOQlFVRTdTVUZIVkN4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNVMEZCZGtJc1EwRkJhVU1zUTBGQlF5eFBRVUZzUXl4RFFVRXdReXhOUVVFeFF5eEZRVUZyUkN4WlFVRkJMRWRCUVZrc1EwRkJReXhKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4UFFVRllMRU5CUVVRc1EwRkJXaXhIUVVGcFF5eExRVUZ1Ump0WFFVbEJMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zWlVGQlVDeERRVUZCTEVOQlFYZENMRU5CUVVNc1NVRkJla0lzUTBGQk9FSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExGVkJRVVE3UVVGSE5VSXNXVUZCUVR0UlFVRkJMRlZCUVVFc1IwRkJZU3hWUVVGVkxFTkJRVU1zUzBGQldDeERRVUZwUWl4TlFVRnFRanRSUVVkaUxFOUJRVUVzUjBGQlZUdEJRVU5XTEdGQlFVRXNORU5CUVVFN08xVkJRVUVzVDBGQlFTeEhRVUZWTEVOQlFVTXNRMEZCUXl4TFFVRkdMRU5CUVZFc1QwRkJVaXhGUVVGcFFpeERRVUZETEVOQlFVTXNTVUZCUml4RFFVRlBMRVZCUVZBc1EwRkJha0k3UVVGQlZqdFJRVU5CTEU5QlFVRXNSMEZCVlN4RFFVRkRMRU5CUVVNc1NVRkJSaXhEUVVGUExFOUJRVkE3VVVGSFZpeE5RVUZCTEVkQlFWTTdVVUZIVkN4TlFVRk5MRU5CUVVNc1NVRkJVQ3hEUVVGWkxFOUJRVThzUTBGQlF5eEpRVUZTTEVOQlFXRXNTVUZCWWl4RFFVRmFPMEZCUjBFc1lVRkJRU3c0UTBGQlFUczdWVUZEUlN4SFFVRkJMRWRCUVUwN1FVRkZUaXhsUVVGQkxESkRRVUZCT3p0WlFVTkZMRXRCUVVFc1IwRkJVU3hGUVVGSExFTkJRVUVzVFVGQlFUdFpRVU5ZTEVsQlFYZENMRTlCUVU4c1MwRkJVQ3hMUVVGblFpeFJRVUZvUWl4SlFVRTBRaXhMUVVGTkxFTkJRVUVzUzBGQlFTeERRVUV4UkR0alFVRkJMRXRCUVVFc1IwRkJVU3hMUVVGTkxFTkJRVUVzUzBGQlFTeEZRVUZrT3p0WlFVTkJMRWxCUVd0Q0xFdEJRVUVzUzBGQlV5eE5RVUV6UWp0alFVRkJMRXRCUVVFc1IwRkJVU3hQUVVGU096dFpRVU5CTEVkQlFVY3NRMEZCUXl4SlFVRktMRU5CUVZNc1MwRkJWRHRCUVVwR08xVkJUVUVzVFVGQlRTeERRVUZETEVsQlFWQXNRMEZCV1N4SFFVRkhMRU5CUVVNc1NVRkJTaXhEUVVGVExFbEJRVlFzUTBGQldqdEJRVlJHTzFGQldVRXNVVUZCUVN4SFFVRlpMRXRCUVVNc1EwRkJRU3huUWtGQlJDeERRVUZyUWl4TFFVRnNRanRSUVVOYUxGRkJRVUVzUjBGQldUdFJRVWRhTEV0QlFVTXNRMEZCUVN4WlFVRkVMRU5CUVdNN1ZVRkJSU3hQUVVGQkxFVkJRVk1zVFVGQlRTeERRVUZETEVsQlFWQXNRMEZCV1N4SlFVRmFMRU5CUVZnN1ZVRkJPRUlzU1VGQlFTeEZRVUZOTEZGQlFYQkRPMVZCUVRoRExGRkJRVUVzUlVGQlZTeFJRVUY0UkR0VFFVRmtPMlZCUTBFc1MwRkJReXhEUVVGQkxGVkJRVVFzUTBGQlFUdE5RV3hETkVJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFUbENPMFZCVUZNN096czdSMEYyUkZrc1JVRkJSU3hEUVVGRE96dEJRVzlITlVJc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvdyBkLWZsZXggdy0xMDAgZmxleC1jb2x1bW5cXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWJvZHlcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cCBjbGFzcz1cXFwibGVhZFxcXCI+RXhwb3J0PC9wPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXF1ZXN0aW9uLWNpcmNsZVxcXCI+PC9pPiZuYnNwO1xcblRoaXMgYWN0aW9uIGV4cG9ydHMgdGhlIGRhdGFzZXQgd2l0aCBLbm93bGVkZ2UgQ2FwdHVyZS48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNlxcXCI+PGJ1dHRvbiBkYXRhLWV4cG9ydD1cXFwianNvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tb3V0bGluZS1zdWNjZXNzIHctMTAwXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtZmlsZS1jb2RlLW9cXFwiPjwvaT4mbmJzcDtcXG5KU09OIEV4cG9ydDwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj48YnV0dG9uIGRhdGEtZXhwb3J0PVxcXCJjc3ZcXFwiIGNsYXNzPVxcXCJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyB3LTEwMFxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWZpbGUtZXhjZWwtb1xcXCI+PC9pPiZuYnNwO1xcbkNTViBBcmNoaXZlPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBEYXRhc2V0RmFjdG9yeSwgRGV4aWVGYWN0b3J5LCBFbnRpdGllcyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkVudGl0aWVzID0gcmVxdWlyZSgnLi9lbnRpdGllcycpO1xuXG5EZXhpZUZhY3RvcnkgPSByZXF1aXJlKCcuLi9iYXNlL2RleGllRmFjdG9yeScpO1xuXG5EYXRhc2V0RmFjdG9yeSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0RmFjdG9yeSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldEZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIERhdGFzZXRGYWN0b3J5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldEZhY3RvcnkucHJvdG90eXBlLnRhYmxlTmFtZSA9ICdkYXRhc2V0cyc7XG5cbiAgRGF0YXNldEZhY3RvcnkucHJvdG90eXBlLnJhZGlvUmVxdWVzdHMgPSB7XG4gICAgJ2RhdGFzZXQgbW9kZWwnOiAnZ2V0TW9kZWwnLFxuICAgICdkYXRhc2V0IHNhdmUnOiAnc2F2ZU1vZGVsJyxcbiAgICAnZGF0YXNldCBkZXN0cm95JzogJ2Rlc3Ryb3lNb2RlbCcsXG4gICAgJ2RhdGFzZXQgY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJ1xuICB9O1xuXG4gIERhdGFzZXRGYWN0b3J5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVkQ29sbGVjdGlvbiA9IG5ldyBFbnRpdGllcy5Db2xsZWN0aW9uKCk7XG4gIH07XG5cbiAgRGF0YXNldEZhY3RvcnkucHJvdG90eXBlLmdldENvbGxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmVuc3VyZURiKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZGJbX3RoaXMudGFibGVOYW1lXS50b0FycmF5KCkudGhlbihmdW5jdGlvbihtb2RlbHMpIHtcbiAgICAgICAgICBfdGhpcy5jYWNoZWRDb2xsZWN0aW9uLnJlc2V0KG1vZGVscyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoX3RoaXMuY2FjaGVkQ29sbGVjdGlvbik7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBEYXRhc2V0RmFjdG9yeTtcblxufSkoRGV4aWVGYWN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRGF0YXNldEZhY3RvcnkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2Wm1GamRHOXllUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5bVlXTjBiM0o1TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4SlFVRkJMSE5EUVVGQk8wVkJRVUU3T3p0QlFVRkJMRkZCUVVFc1IwRkJWeXhQUVVGQkxFTkJRVkVzV1VGQlVqczdRVUZEV0N4WlFVRkJMRWRCUVdkQ0xFOUJRVUVzUTBGQlVTeHpRa0ZCVWpzN1FVRkpWanM3T3pzN096c3lRa0ZGU2l4VFFVRkJMRWRCUVZjN096SkNRVVZZTEdGQlFVRXNSMEZEUlR0SlFVRkJMR1ZCUVVFc1JVRkJjMElzVlVGQmRFSTdTVUZEUVN4alFVRkJMRVZCUVhOQ0xGZEJSSFJDTzBsQlJVRXNhVUpCUVVFc1JVRkJjMElzWTBGR2RFSTdTVUZIUVN4dlFrRkJRU3hGUVVGelFpeGxRVWgwUWpzN096SkNRVXRHTEZWQlFVRXNSMEZCV1N4VFFVRkJPMWRCUTFZc1NVRkJReXhEUVVGQkxHZENRVUZFTEVkQlFXOUNMRWxCUVVrc1VVRkJVU3hEUVVGRExGVkJRV0lzUTBGQlFUdEZRVVJXT3pzeVFrRkhXaXhoUVVGQkxFZEJRV1VzVTBGQlFUdEpRVWRpTEVsQlFVTXNRMEZCUVN4UlFVRkVMRU5CUVVFN1FVRkhRU3hYUVVGUExFbEJRVWtzVDBGQlNpeERRVUZaTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhQUVVGRUxFVkJRVlVzVFVGQlZqdGxRVWRxUWl4TFFVRkRMRU5CUVVFc1JVRkJSeXhEUVVGQkxFdEJRVU1zUTBGQlFTeFRRVUZFTEVOQlFWY3NRMEZCUXl4UFFVRm9RaXhEUVVGQkxFTkJSMEVzUTBGQlF5eEpRVWhFTEVOQlIwMHNVMEZCUXl4TlFVRkVPMVZCUTBvc1MwRkJReXhEUVVGQkxHZENRVUZuUWl4RFFVRkRMRXRCUVd4Q0xFTkJRWGRDTEUxQlFYaENPMEZCUTBFc2FVSkJRVThzVDBGQlFTeERRVUZSTEV0QlFVTXNRMEZCUVN4blFrRkJWRHRSUVVaSUxFTkJTRTRzUTBGUlFTeEZRVUZETEV0QlFVUXNSVUZTUVN4RFFWRlBMRk5CUVVNc1IwRkJSRHRCUVVOTUxHbENRVUZQTEUxQlFVRXNRMEZCVHl4SFFVRlFPMUZCUkVZc1EwRlNVRHROUVVocFFqdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJXanRGUVU1Tk96czdPMGRCWWxrN08wRkJiVU0zUWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpeEpRVUZKTEdOQlFVb3NRMEZCUVNKOVxuIiwidmFyIEFyY2hpdmVJbXBvcnRlcixcbiAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbkFyY2hpdmVJbXBvcnRlciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gQXJjaGl2ZUltcG9ydGVyKCkge1xuICAgIHRoaXMuc2FuaXRpemVTdHJpbmcgPSBiaW5kKHRoaXMuc2FuaXRpemVTdHJpbmcsIHRoaXMpO1xuICB9XG5cbiAgQXJjaGl2ZUltcG9ydGVyLnByb3RvdHlwZS5jb250ZXh0ID0ge1xuICAgIFwiZG1vYVwiOiBcImh0dHA6Ly9kbW8ub3JnL2FyY2hpdmUvXCIsXG4gICAgXCJkbW9pXCI6IFwiaHR0cDovL2Rtby5vcmcvaW5zdGFuY2UvXCIsXG4gICAgXCJmb2FmXCI6IFwiaHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS9cIixcbiAgICBcIm5mb1wiOiBcImh0dHA6Ly93d3cuc2VtYW50aWNkZXNrdG9wLm9yZy9vbnRvbG9naWVzLzIwMDcvMDMvMjIvbmZvI1wiLFxuICAgIFwib3JlXCI6IFwiaHR0cDovL3d3dy5vcGVuYXJjaGl2ZXMub3JnL29yZS90ZXJtcy9cIixcbiAgICBcInJkZlwiOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyNcIixcbiAgICBcInJkZnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzAxL3JkZi1zY2hlbWEjXCIsXG4gICAgXCJ4c2RcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNcIlxuICB9O1xuXG4gIEFyY2hpdmVJbXBvcnRlci5wcm90b3R5cGUuc2FuaXRpemVTdHJpbmcgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoJ3snLCAnXFx7JykucmVwbGFjZSgneycsICdcXHsnKTtcbiAgfTtcblxuICBBcmNoaXZlSW1wb3J0ZXIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbihsYWJlbCkge1xuICAgIHZhciBmbiwgb2ZUeXBlO1xuICAgIGlmICghbGFiZWwpIHtcbiAgICAgIHJldHVybiAnRkFMU0UnO1xuICAgIH1cbiAgICBvZlR5cGUgPSBmdW5jdGlvbihmbiwgZXh0KSB7XG4gICAgICByZXR1cm4gZm4uaW5kZXhPZihleHQpICE9PSAtMTtcbiAgICB9O1xuICAgIGlmICghbGFiZWwuc3BsaXQoJy4nKVsxXSkge1xuICAgICAgcmV0dXJuICduZm86Rm9sZGVyJztcbiAgICB9XG4gICAgZm4gPSB0aGlzLnNhbml0aXplU3RyaW5nKGxhYmVsKTtcbiAgICBpZiAob2ZUeXBlKGZuLCAnLmNzdicpIHx8IG9mVHlwZShmbiwgJy54bHgnKSB8fCBvZlR5cGUoZm4sICcueGxzeCcpKSB7XG4gICAgICByZXR1cm4gJ25mbzpTcHJlYWRzaGVldCc7XG4gICAgfVxuICAgIGlmIChvZlR5cGUoZm4sICcucG5nJykgfHwgb2ZUeXBlKGZuLCAnLmpwZycpKSB7XG4gICAgICByZXR1cm4gJ25mbzpJbWFnZSc7XG4gICAgfVxuICAgIGlmIChvZlR5cGUoZm4sICcudHh0JykpIHtcbiAgICAgIHJldHVybiAnbmZvOlBsYWluVGV4dERvY3VtZW50JztcbiAgICB9XG4gICAgcmV0dXJuICduZm86RG9jdW1lbnQnO1xuICB9O1xuXG4gIEFyY2hpdmVJbXBvcnRlci5wcm90b3R5cGUuZGlyZWN0b3J5SURzID0gW107XG5cbiAgQXJjaGl2ZUltcG9ydGVyLnByb3RvdHlwZS5jb2xsZWN0RGlyZWN0b3J5ID0gZnVuY3Rpb24oZGlyKSB7XG4gICAgdGhpcy5kaXJlY3RvcnlJRHMucHVzaChkaXIpO1xuICAgIHJldHVybiB0aGlzLmRpcmVjdG9yeUlEcyA9IF8udW5pcSh0aGlzLmRpcmVjdG9yeUlEcyk7XG4gIH07XG5cbiAgQXJjaGl2ZUltcG9ydGVyLnByb3RvdHlwZS5hZGREaXJlY3RvcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiZWxvbmdzVG8sIGRpciwgZGlyRWxlbWVudCwgaSwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgcmVmID0gdGhpcy5kaXJlY3RvcnlJRHM7XG4gICAgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGlyID0gcmVmW2ldO1xuICAgICAgYmVsb25nc1RvID0gZGlyLnNwbGl0KCcvJyk7XG4gICAgICBiZWxvbmdzVG8ucG9wKCk7XG4gICAgICBiZWxvbmdzVG8ucG9wKCk7XG4gICAgICBiZWxvbmdzVG8gPSBiZWxvbmdzVG8uam9pbignLycpICsgJy8nO1xuICAgICAgaWYgKGJlbG9uZ3NUbyA9PT0gJy8nKSB7XG4gICAgICAgIGJlbG9uZ3NUbyA9ICdyb290JztcbiAgICAgIH1cbiAgICAgIGRpckVsZW1lbnQgPSB7XG4gICAgICAgICdAaWQnOiBkaXIsXG4gICAgICAgICdAdHlwZSc6ICduZm86Rm9sZGVyJyxcbiAgICAgICAgJ3JkZnM6bGFiZWwnOiBkaXIsXG4gICAgICAgICduZm86YmVsb25nc1RvQ29udGFpbmVyJzogYmVsb25nc1RvXG4gICAgICB9O1xuICAgICAgcmVzdWx0cy5wdXNoKHRoaXMub3V0cHV0WydAZ3JhcGgnXS5wdXNoKGRpckVsZW1lbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgQXJjaGl2ZUltcG9ydGVyLnByb3RvdHlwZS5wYXJzZUZpbGUgPSBmdW5jdGlvbihmaWxlLCBwcmVmaXgpIHtcbiAgICB2YXIgYmVsb25nc1RvLCBlbCwgZmlsZXBhdGgsIGxhYmVsLCBwaWVjZXM7XG4gICAgaWYgKHByZWZpeCkge1xuICAgICAgaWYgKCFfcy5lbmRzV2l0aChwcmVmaXgsICcvJykpIHtcbiAgICAgICAgcHJlZml4ID0gcHJlZml4ICsgJy8nO1xuICAgICAgfVxuICAgICAgaWYgKCFfcy5zdGFydHNXaXRoKHByZWZpeCwgJy8nKSkge1xuICAgICAgICBwcmVmaXggPSAnLycgKyBwcmVmaXg7XG4gICAgICB9XG4gICAgICBmaWxlcGF0aCA9IHByZWZpeCArIGZpbGUud2Via2l0UmVsYXRpdmVQYXRoO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaWxlcGF0aCA9ICcvJyArIGZpbGUud2Via2l0UmVsYXRpdmVQYXRoO1xuICAgIH1cbiAgICBwaWVjZXMgPSBmaWxlcGF0aC5zcGxpdCgnLycpO1xuICAgIGxhYmVsID0gcGllY2VzLnBvcCgpO1xuICAgIGJlbG9uZ3NUbyA9IHBpZWNlcy5qb2luKCcvJykgKyAnLyc7XG4gICAgdGhpcy5jb2xsZWN0RGlyZWN0b3J5KGJlbG9uZ3NUbyk7XG4gICAgZWwgPSB7XG4gICAgICAnQGlkJzogZmlsZXBhdGgsXG4gICAgICAnQHR5cGUnOiB0aGlzLmdldFR5cGUobGFiZWwpLFxuICAgICAgJ3JkZnM6bGFiZWwnOiBsYWJlbCxcbiAgICAgICduZm86YmVsb25nc1RvQ29udGFpbmVyJzogYmVsb25nc1RvXG4gICAgfTtcbiAgICByZXR1cm4gZWw7XG4gIH07XG5cbiAgQXJjaGl2ZUltcG9ydGVyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGZpbGVzLCBwcmVmaXgpIHtcbiAgICB2YXIgZiwgaSwgbGVuO1xuICAgIGlmIChwcmVmaXggPT0gbnVsbCkge1xuICAgICAgcHJlZml4ID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXJlY3RvcnlJRHMgPSBbXTtcbiAgICB0aGlzLm91dHB1dCA9IHtcbiAgICAgIFwiQGNvbnRleHRcIjogdGhpcy5jb250ZXh0LFxuICAgICAgXCJAZ3JhcGhcIjogW11cbiAgICB9O1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IGZpbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBmID0gZmlsZXNbaV07XG4gICAgICB0aGlzLm91dHB1dFsnQGdyYXBoJ10ucHVzaCh0aGlzLnBhcnNlRmlsZShmLCBwcmVmaXgpKTtcbiAgICB9XG4gICAgdGhpcy5hZGREaXJlY3RvcmllcygpO1xuICAgIHJldHVybiB0aGlzLm91dHB1dDtcbiAgfTtcblxuICByZXR1cm4gQXJjaGl2ZUltcG9ydGVyO1xuXG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBBcmNoaXZlSW1wb3J0ZXIoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YVcxd2IzSjBaWEl1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmFXMXdiM0owWlhJdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVkQkxFbEJRVUVzWlVGQlFUdEZRVUZCT3p0QlFVRk5PenM3T3pzMFFrRkZTaXhQUVVGQkxFZEJRMFU3U1VGQlFTeE5RVUZCTEVWQlFWRXNlVUpCUVZJN1NVRkRRU3hOUVVGQkxFVkJRVkVzTUVKQlJGSTdTVUZGUVN4TlFVRkJMRVZCUVZFc05FSkJSbEk3U1VGSFFTeExRVUZCTEVWQlFWRXNNa1JCU0ZJN1NVRkpRU3hMUVVGQkxFVkJRVkVzZDBOQlNsSTdTVUZMUVN4TFFVRkJMRVZCUVZFc05rTkJURkk3U1VGTlFTeE5RVUZCTEVWQlFWRXNkVU5CVGxJN1NVRlBRU3hMUVVGQkxFVkJRVkVzYlVOQlVGSTdPenMwUWtGVFJpeGpRVUZCTEVkQlFXZENMRk5CUVVNc1IwRkJSRHRCUVVOa0xGZEJRVThzUjBGQlJ5eERRVUZETEU5QlFVb3NRMEZCV1N4SFFVRmFMRVZCUVdsQ0xFbEJRV3BDTEVOQlFYTkNMRU5CUVVNc1QwRkJka0lzUTBGQkswSXNSMEZCTDBJc1JVRkJiME1zU1VGQmNFTTdSVUZFVHpzN05FSkJSMmhDTEU5QlFVRXNSMEZCVXl4VFFVRkRMRXRCUVVRN1FVRkZVQ3hSUVVGQk8wbEJRVUVzU1VGQlFTeERRVUZ6UWl4TFFVRjBRanRCUVVGQkxHRkJRVThzVVVGQlVEczdTVUZIUVN4TlFVRkJMRWRCUVZNc1UwRkJReXhGUVVGRUxFVkJRVXNzUjBGQlREdEJRVUZoTEdGQlFVOHNSVUZCUlN4RFFVRkRMRTlCUVVnc1EwRkJWeXhIUVVGWUxFTkJRVUVzUzBGQmJVSXNRMEZCUXp0SlFVRjRRenRKUVVkVUxFbEJRVUVzUTBGQk1rSXNTMEZCU3l4RFFVRkRMRXRCUVU0c1EwRkJXU3hIUVVGYUxFTkJRV2xDTEVOQlFVRXNRMEZCUVN4RFFVRTFRenRCUVVGQkxHRkJRVThzWVVGQlVEczdTVUZIUVN4RlFVRkJMRWRCUVVzc1NVRkJReXhEUVVGQkxHTkJRVVFzUTBGQlowSXNTMEZCYUVJN1NVRkxUQ3hKUVVFMFFpeE5RVUZCTEVOQlFVOHNSVUZCVUN4RlFVRlZMRTFCUVZZc1EwRkJRU3hKUVVGeFFpeE5RVUZCTEVOQlFVOHNSVUZCVUN4RlFVRlZMRTFCUVZZc1EwRkJja0lzU1VGQk1FTXNUVUZCUVN4RFFVRlBMRVZCUVZBc1JVRkJWU3hQUVVGV0xFTkJRWFJGTzBGQlFVRXNZVUZCVHl4clFrRkJVRHM3U1VGSFFTeEpRVUZ6UWl4TlFVRkJMRU5CUVU4c1JVRkJVQ3hGUVVGVkxFMUJRVllzUTBGQlFTeEpRVUZ4UWl4TlFVRkJMRU5CUVU4c1JVRkJVQ3hGUVVGVkxFMUJRVllzUTBGQk0wTTdRVUZCUVN4aFFVRlBMRmxCUVZBN08wbEJSMEVzU1VGQmEwTXNUVUZCUVN4RFFVRlBMRVZCUVZBc1JVRkJWU3hOUVVGV0xFTkJRV3hETzBGQlFVRXNZVUZCVHl4M1FrRkJVRHM3UVVGSFFTeFhRVUZQTzBWQmVrSkJPenMwUWtFNFFsUXNXVUZCUVN4SFFVRmpPenMwUWtGSlpDeG5Ra0ZCUVN4SFFVRnJRaXhUUVVGRExFZEJRVVE3U1VGRGFFSXNTVUZCUXl4RFFVRkJMRmxCUVZrc1EwRkJReXhKUVVGa0xFTkJRVzFDTEVkQlFXNUNPMWRCUTBFc1NVRkJReXhEUVVGQkxGbEJRVVFzUjBGQlowSXNRMEZCUXl4RFFVRkRMRWxCUVVZc1EwRkJUeXhKUVVGRExFTkJRVUVzV1VGQlVqdEZRVVpCT3pzMFFrRk5iRUlzWTBGQlFTeEhRVUZuUWl4VFFVRkJPMEZCUTJRc1VVRkJRVHRCUVVGQk8wRkJRVUU3VTBGQlFTeHhRMEZCUVRzN1RVRkhSU3hUUVVGQkxFZEJRVmtzUjBGQlJ5eERRVUZETEV0QlFVb3NRMEZCVlN4SFFVRldPMDFCUTFvc1UwRkJVeXhEUVVGRExFZEJRVllzUTBGQlFUdE5RVU5CTEZOQlFWTXNRMEZCUXl4SFFVRldMRU5CUVVFN1RVRkRRU3hUUVVGQkxFZEJRVmtzVTBGQlV5eERRVUZETEVsQlFWWXNRMEZCWlN4SFFVRm1MRU5CUVVFc1IwRkJjMEk3VFVGRGJFTXNTVUZCYzBJc1UwRkJRU3hMUVVGaExFZEJRVzVETzFGQlFVRXNVMEZCUVN4SFFVRlpMRTlCUVZvN08wMUJSMEVzVlVGQlFTeEhRVU5GTzFGQlFVRXNTMEZCUVN4RlFVRXdRaXhIUVVFeFFqdFJRVU5CTEU5QlFVRXNSVUZCTUVJc1dVRkVNVUk3VVVGRlFTeFpRVUZCTEVWQlFUQkNMRWRCUmpGQ08xRkJSMEVzZDBKQlFVRXNSVUZCTUVJc1UwRklNVUk3TzIxQ1FVMUdMRWxCUVVNc1EwRkJRU3hOUVVGUExFTkJRVUVzVVVGQlFTeERRVUZUTEVOQlFVTXNTVUZCYkVJc1EwRkJkVUlzVlVGQmRrSTdRVUZxUWtZN08wVkJSR003T3pSQ1FYTkNhRUlzVTBGQlFTeEhRVUZYTEZOQlFVTXNTVUZCUkN4RlFVRlBMRTFCUVZBN1FVRkhWQ3hSUVVGQk8wbEJRVUVzU1VGQlJ5eE5RVUZJTzAxQlIwVXNTVUZCUVN4RFFVRTJRaXhGUVVGRkxFTkJRVU1zVVVGQlNDeERRVUZaTEUxQlFWb3NSVUZCYjBJc1IwRkJjRUlzUTBGQk4wSTdVVUZCUVN4TlFVRkJMRWRCUVZNc1RVRkJRU3hIUVVGVExFbEJRV3hDT3p0TlFVTkJMRWxCUVVFc1EwRkJOa0lzUlVGQlJTeERRVUZETEZWQlFVZ3NRMEZCWXl4TlFVRmtMRVZCUVhOQ0xFZEJRWFJDTEVOQlFUZENPMUZCUVVFc1RVRkJRU3hIUVVGVExFZEJRVUVzUjBGQlRTeFBRVUZtT3p0TlFVZEJMRkZCUVVFc1IwRkJWeXhOUVVGQkxFZEJRVk1zU1VGQlNTeERRVUZETEcxQ1FWQXpRanRMUVVGQkxFMUJRVUU3VFVGWFJTeFJRVUZCTEVkQlFWY3NSMEZCUVN4SFFVRk5MRWxCUVVrc1EwRkJReXh0UWtGWWVFSTdPMGxCWTBFc1RVRkJRU3hIUVVGWkxGRkJRVkVzUTBGQlF5eExRVUZVTEVOQlFXVXNSMEZCWmp0SlFVTmFMRXRCUVVFc1IwRkJXU3hOUVVGTkxFTkJRVU1zUjBGQlVDeERRVUZCTzBsQlExb3NVMEZCUVN4SFFVRlpMRTFCUVUwc1EwRkJReXhKUVVGUUxFTkJRVmtzUjBGQldpeERRVUZCTEVkQlFXMUNPMGxCUnk5Q0xFbEJRVU1zUTBGQlFTeG5Ra0ZCUkN4RFFVRnJRaXhUUVVGc1FqdEpRVWxCTEVWQlFVRXNSMEZEUlR0TlFVRkJMRXRCUVVFc1JVRkJNRUlzVVVGQk1VSTdUVUZEUVN4UFFVRkJMRVZCUVRCQ0xFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNTMEZCVkN4RFFVUXhRanROUVVWQkxGbEJRVUVzUlVGQk1FSXNTMEZHTVVJN1RVRkhRU3gzUWtGQlFTeEZRVUV3UWl4VFFVZ3hRanM3UVVGUFJpeFhRVUZQTzBWQmJFTkZPenMwUWtGMVExZ3NTMEZCUVN4SFFVRlBMRk5CUVVNc1MwRkJSQ3hGUVVGUkxFMUJRVkk3UVVGSFRDeFJRVUZCT3p0TlFVaGhMRk5CUVU4N08wbEJSM0JDTEVsQlFVTXNRMEZCUVN4WlFVRkVMRWRCUVdkQ08wbEJSMmhDTEVsQlFVTXNRMEZCUVN4TlFVRkVMRWRCUVZVN1RVRkJSU3hWUVVGQkxFVkJRVmtzU1VGQlF5eERRVUZCTEU5QlFXWTdUVUZCZDBJc1VVRkJRU3hGUVVGVkxFVkJRV3hET3p0QlFVZFdMRk5CUVVFc2RVTkJRVUU3TzAxQlFVRXNTVUZCUXl4RFFVRkJMRTFCUVU4c1EwRkJRU3hSUVVGQkxFTkJRVk1zUTBGQlF5eEpRVUZzUWl4RFFVRjFRaXhKUVVGRExFTkJRVUVzVTBGQlJDeERRVUZYTEVOQlFWZ3NSVUZCWXl4TlFVRmtMRU5CUVhaQ08wRkJRVUU3U1VGSFFTeEpRVUZETEVOQlFVRXNZMEZCUkN4RFFVRkJPMEZCUjBFc1YwRkJUeXhKUVVGRExFTkJRVUU3UlVGbVNEczdPenM3TzBGQmJVSlVMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDTEVsQlFVa3NaVUZCU2l4RFFVRkJJbjA9XG4iLCJ2YXIgS25vd2xlZGdlQ2FwdHVyZVJvdXRlLCBMYXlvdXRWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0Jyk7XG5cbktub3dsZWRnZUNhcHR1cmVSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChLbm93bGVkZ2VDYXB0dXJlUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEtub3dsZWRnZUNhcHR1cmVSb3V0ZSgpIHtcbiAgICByZXR1cm4gS25vd2xlZGdlQ2FwdHVyZVJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgS25vd2xlZGdlQ2FwdHVyZVJvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIkRhdGFzZXRzIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBLbm93bGVkZ2UgQ2FwdHVyZVwiO1xuICB9O1xuXG4gIEtub3dsZWRnZUNhcHR1cmVSb3V0ZS5wcm90b3R5cGUuYnJlYWRjcnVtYnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0ZXh0OiAnSG9tZScsXG4gICAgICAgIGhyZWY6ICcjJ1xuICAgICAgfSwge1xuICAgICAgICBocmVmOiBcIiNkYXRhc2V0c1wiLFxuICAgICAgICB0ZXh0OiAnQXJjaGl2ZXMnXG4gICAgICB9LCB7XG4gICAgICAgIGhyZWY6IFwiI2RhdGFzZXRzL1wiICsgdGhpcy5tb2RlbC5pZCxcbiAgICAgICAgdGV4dDogdGhpcy5tb2RlbC5nZXQoJ2xhYmVsJylcbiAgICAgIH0sIHtcbiAgICAgICAgaHJlZjogXCIjZGF0YXNldHMvXCIgKyB0aGlzLm1vZGVsLmlkICsgXCIvc2VhcmNoXCIsXG4gICAgICAgIHRleHQ6ICdTZWFyY2gnXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6ICdLbm93bGVkZ2UgQ2FwdHVyZSdcbiAgICAgIH1cbiAgICBdO1xuICB9O1xuXG4gIEtub3dsZWRnZUNhcHR1cmVSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2RhdGFzZXQnKS5yZXF1ZXN0KCdtb2RlbCcsIGlkKS50aGVuKGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgICAgX3RoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgICByZXR1cm4gX3RoaXMubW9kZWwuZmV0Y2hLbm93bGVkZ2VSdWxlcygpLnRoZW4oZnVuY3Rpb24oa25vd2xlZGdlUnVsZUNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIF90aGlzLmNvbGxlY3Rpb24gPSBrbm93bGVkZ2VSdWxlQ29sbGVjdGlvbjtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgS25vd2xlZGdlQ2FwdHVyZVJvdXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIuc2hvdyhuZXcgTGF5b3V0Vmlldyh7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgIH0pKTtcbiAgfTtcblxuICByZXR1cm4gS25vd2xlZGdlQ2FwdHVyZVJvdXRlO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZScpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBLbm93bGVkZ2VDYXB0dXJlUm91dGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmNtOTFkR1V1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmNtOTFkR1V1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEVsQlFVRXNhVU5CUVVFN1JVRkJRVHM3TzBGQlFVRXNWVUZCUVN4SFFVRmpMRTlCUVVFc1EwRkJVU3huUWtGQlVqczdRVUZKVWpzN096czdPenRyUTBGRlNpeExRVUZCTEVkQlFVOHNVMEZCUVR0QlFVTk1MRmRCUVU4c1lVRkJRU3hIUVVGaExFTkJRVU1zU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1QwRkJXQ3hEUVVGRUxFTkJRV0lzUjBGQmEwTTdSVUZFY0VNN08ydERRVWRRTEZkQlFVRXNSMEZCWVN4VFFVRkJPMEZCUTFnc1YwRkJUenROUVVOTU8xRkJRVVVzU1VGQlFTeEZRVUZOTEUxQlFWSTdVVUZCWjBJc1NVRkJRU3hGUVVGTkxFZEJRWFJDTzA5QlJFc3NSVUZGVER0UlFVRkZMRWxCUVVFc1JVRkJUU3hYUVVGU08xRkJRWEZDTEVsQlFVRXNSVUZCVFN4VlFVRXpRanRQUVVaTExFVkJSMHc3VVVGQlJTeEpRVUZCTEVWQlFVMHNXVUZCUVN4SFFVRmhMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUlVGQk5VSTdVVUZCYTBNc1NVRkJRU3hGUVVGTkxFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJlRU03VDBGSVN5eEZRVWxNTzFGQlFVVXNTVUZCUVN4RlFVRk5MRmxCUVVFc1IwRkJZU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVWQlFYQkNMRWRCUVhWQ0xGTkJRUzlDTzFGQlFYbERMRWxCUVVFc1JVRkJUU3hSUVVFdlF6dFBRVXBMTEVWQlMwdzdVVUZCUlN4SlFVRkJMRVZCUVUwc2JVSkJRVkk3VDBGTVN6czdSVUZFU1RzN2EwTkJVMklzUzBGQlFTeEhRVUZQTEZOQlFVTXNSVUZCUkR0QlFVVk1MRmRCUVU4c1NVRkJTU3hQUVVGS0xFTkJRVmtzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRTlCUVVRc1JVRkJWU3hOUVVGV08yVkJSMnBDTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhEUVVGMVFpeFRRVUYyUWl4RFFVRnBReXhEUVVGRExFOUJRV3hETEVOQlFUQkRMRTlCUVRGRExFVkJRVzFFTEVWQlFXNUVMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzVTBGQlF5eExRVUZFTzFWQlIwb3NTMEZCUXl4RFFVRkJMRXRCUVVRc1IwRkJVenRwUWtGSFZDeExRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRzFDUVVGUUxFTkJRVUVzUTBGRFFTeERRVUZETEVsQlJFUXNRMEZEVFN4VFFVRkRMSFZDUVVGRU8xbEJSMG9zUzBGQlF5eERRVUZCTEZWQlFVUXNSMEZCWXp0QlFVZGtMRzFDUVVGUExFOUJRVUVzUTBGQlFUdFZRVTVJTEVOQlJFNHNRMEZWUVN4RlFVRkRMRXRCUVVRc1JVRldRU3hEUVZWUExGTkJRVU1zUjBGQlJEdEJRVUZUTEcxQ1FVRlBMRTFCUVVFc1EwRkJUeXhIUVVGUU8xVkJRV2hDTEVOQlZsQTdVVUZPU1N4RFFVUk9MRU5CYTBKQkxFVkJRVU1zUzBGQlJDeEZRV3hDUVN4RFFXdENUeXhUUVVGRExFZEJRVVE3UVVGQlV5eHBRa0ZCVHl4TlFVRkJMRU5CUVU4c1IwRkJVRHRSUVVGb1FpeERRV3hDVUR0TlFVaHBRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCV2p0RlFVWkdPenRyUTBGNVFsQXNUVUZCUVN4SFFVRlJMRk5CUVVFN1YwRkRUaXhKUVVGRExFTkJRVUVzVTBGQlV5eERRVUZETEVsQlFWZ3NRMEZCWjBJc1NVRkJTU3hWUVVGS0xFTkJRV1U3VFVGQlJTeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRXRCUVZZN1RVRkJhVUlzVlVGQlFTeEZRVUZaTEVsQlFVTXNRMEZCUVN4VlFVRTVRanRMUVVGbUxFTkJRV2hDTzBWQlJFMDdPenM3UjBGMlF6QkNMRTlCUVVFc1EwRkJVU3h6UWtGQlVqczdRVUUwUTNCRExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgQWN0aW9uRm9ybSwgQWN0aW9uVHlwZUZvcm0sXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5BY3Rpb25UeXBlRm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBY3Rpb25UeXBlRm9ybSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQWN0aW9uVHlwZUZvcm0oKSB7XG4gICAgcmV0dXJuIEFjdGlvblR5cGVGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQWN0aW9uVHlwZUZvcm0ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIEFjdGlvblR5cGVGb3JtLnByb3RvdHlwZS50ZW1wbGF0ZU1hcCA9IHtcbiAgICBmaWx0ZXI6IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2FjdGlvbl90eXBlX2ZpbHRlcicpLFxuICAgIHJlcGxhY2U6IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2FjdGlvbl90eXBlX3JlcGxhY2UnKSxcbiAgICBsaXRlcmFsOiByZXF1aXJlKCcuL3RlbXBsYXRlcy9hY3Rpb25fdHlwZV9saXRlcmFsJyksXG4gICAgY2xvbmU6IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2FjdGlvbl90eXBlX2Nsb25lJyksXG4gICAgaW5kZXhfZnJvbV9zcGxpdDogcmVxdWlyZSgnLi90ZW1wbGF0ZXMvYWN0aW9uX3R5cGVfaW5kZXhfZnJvbV9zcGxpdCcpLFxuICAgIGluZGV4X2Zyb21fcmVnZXhfbWF0Y2g6IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2FjdGlvbl90eXBlX2luZGV4X2Zyb21fcmVnZXhfbWF0Y2gnKVxuICB9O1xuXG4gIEFjdGlvblR5cGVGb3JtLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLnNldCgnYWN0aW9uJywgdGhpcy5vcHRpb25zLmFjdGlvblR5cGUpO1xuICB9O1xuXG4gIEFjdGlvblR5cGVGb3JtLnByb3RvdHlwZS50ZW1wbGF0ZUhlbHBlcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc291cmNlT3B0aW9uczogdGhpcy5vcHRpb25zLnNvdXJjZU9wdGlvbnNcbiAgICB9O1xuICB9O1xuXG4gIEFjdGlvblR5cGVGb3JtLnByb3RvdHlwZS5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlTWFwW3RoaXMub3B0aW9ucy5hY3Rpb25UeXBlXTtcbiAgfTtcblxuICBBY3Rpb25UeXBlRm9ybS5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuU3lwaG9uLmRlc2VyaWFsaXplKHRoaXMsIHRoaXMubW9kZWwuYXR0cmlidXRlcyk7XG4gIH07XG5cbiAgcmV0dXJuIEFjdGlvblR5cGVGb3JtO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuQWN0aW9uRm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBY3Rpb25Gb3JtLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBBY3Rpb25Gb3JtKCkge1xuICAgIHJldHVybiBBY3Rpb25Gb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQWN0aW9uRm9ybS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgQWN0aW9uRm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9hY3Rpb25fZm9ybScpO1xuXG4gIEFjdGlvbkZvcm0ucHJvdG90eXBlLnVpID0ge1xuICAgIGFjdGlvblNlbGVjdDogJ1tkYXRhLXNlbGVjdD1hY3Rpb25dJ1xuICB9O1xuXG4gIEFjdGlvbkZvcm0ucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2xpY2sgQHVpLmFjdGlvblNlbGVjdCc6ICdhY3Rpb25TZWxlY3RlZCdcbiAgfTtcblxuICBBY3Rpb25Gb3JtLnByb3RvdHlwZS5yZWdpb25zID0ge1xuICAgIGFjdGlvblR5cGVSZWdpb246ICdbZGF0YS1yZWdpb249YWN0aW9uLXR5cGVdJ1xuICB9O1xuXG4gIEFjdGlvbkZvcm0ucHJvdG90eXBlLmF2YWlsYWJsZUFjdGlvbnMgPSBbXG4gICAge1xuICAgICAgYWN0aW9uOiAnbGl0ZXJhbCcsXG4gICAgICBpY29uOiAnZmEtcXVvdGUtcmlnaHQnLFxuICAgICAgdGV4dDogJ0xpdGVyYWwnLFxuICAgICAgXCJkZWZhdWx0XCI6IHRydWVcbiAgICB9LCB7XG4gICAgICBhY3Rpb246ICdmaWx0ZXInLFxuICAgICAgaWNvbjogJ2ZhLWZpbHRlcicsXG4gICAgICB0ZXh0OiAnRmlsdGVyJ1xuICAgIH0sIHtcbiAgICAgIGFjdGlvbjogJ3JlcGxhY2UnLFxuICAgICAgaWNvbjogJ2ZhLXN0cmlrZXRocm91Z2gnLFxuICAgICAgdGV4dDogJ1JlcGxhY2UnXG4gICAgfSwge1xuICAgICAgYWN0aW9uOiAnY2xvbmUnLFxuICAgICAgaWNvbjogJ2ZhLWNvcHknLFxuICAgICAgdGV4dDogJ0Nsb25lJ1xuICAgIH0sIHtcbiAgICAgIGFjdGlvbjogJ2luZGV4X2Zyb21fc3BsaXQnLFxuICAgICAgaWNvbjogJ2ZhLWNvZGUtZm9yaycsXG4gICAgICB0ZXh0OiAnU3BsaXQgYW5kIEluZGV4J1xuICAgIH0sIHtcbiAgICAgIGFjdGlvbjogJ2luZGV4X2Zyb21fcmVnZXhfbWF0Y2gnLFxuICAgICAgaWNvbjogJ2ZhLXJlZ2lzdGVyZWQnLFxuICAgICAgdGV4dDogJ0luZGV4IGZyb20gUmVnRXggTWF0Y2gnXG4gICAgfVxuICBdO1xuXG4gIEFjdGlvbkZvcm0ucHJvdG90eXBlLnRlbXBsYXRlSGVscGVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc05ldzogdGhpcy5vcHRpb25zLmlzTmV3LFxuICAgICAgYXZhaWxhYmxlQWN0aW9uczogdGhpcy5hdmFpbGFibGVBY3Rpb25zXG4gICAgfTtcbiAgfTtcblxuICBBY3Rpb25Gb3JtLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlbmRlckRlZmF1bHRUeXBlRm9ybSgpO1xuICB9O1xuXG4gIEFjdGlvbkZvcm0ucHJvdG90eXBlLmFjdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBhY3Rpb25UeXBlLCBlbDtcbiAgICBlbCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBhY3Rpb25UeXBlID0gZWwuZGF0YSgnYWN0aW9uJyk7XG4gICAgZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCcuYnRuJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGVsLmJsdXIoKTtcbiAgICByZXR1cm4gdGhpcy5zaG93QWN0aW9uVHlwZUZvcm0oYWN0aW9uVHlwZSk7XG4gIH07XG5cbiAgQWN0aW9uRm9ybS5wcm90b3R5cGUuc2hvd0FjdGlvblR5cGVGb3JtID0gZnVuY3Rpb24oYWN0aW9uVHlwZSkge1xuICAgIHJldHVybiB0aGlzLmFjdGlvblR5cGVSZWdpb24uc2hvdyhuZXcgQWN0aW9uVHlwZUZvcm0oe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBhY3Rpb25UeXBlOiBhY3Rpb25UeXBlLFxuICAgICAgc291cmNlT3B0aW9uczogdGhpcy5vcHRpb25zLnNvdXJjZU9wdGlvbnNcbiAgICB9KSk7XG4gIH07XG5cbiAgQWN0aW9uRm9ybS5wcm90b3R5cGUucmVuZGVyRGVmYXVsdFR5cGVGb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmF1bHRBY3Rpb247XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pc05ldykge1xuICAgICAgZGVmYXVsdEFjdGlvbiA9IF8uZmluZFdoZXJlKHRoaXMuYXZhaWxhYmxlQWN0aW9ucywge1xuICAgICAgICBcImRlZmF1bHRcIjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcy5zaG93QWN0aW9uVHlwZUZvcm0oZGVmYXVsdEFjdGlvbi5hY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zaG93QWN0aW9uVHlwZUZvcm0odGhpcy5tb2RlbC5nZXQoJ2FjdGlvbicpKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEFjdGlvbkZvcm07XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFjdGlvbkZvcm07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012WVdOMGFXOXVSbTl5YlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOXJibTkzYkdWa1oyVmZZMkZ3ZEhWeVpTOTJhV1YzY3k5aFkzUnBiMjVHYjNKdExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRFFTeEpRVUZCTERCQ1FVRkJPMFZCUVVFN096dEJRVUZOT3pzN096czdPekpDUVVOS0xGTkJRVUVzUjBGQlZ6czdNa0pCUlZnc1YwRkJRU3hIUVVWRk8wbEJRVUVzVFVGQlFTeEZRVUYzUWl4UFFVRkJMRU5CUVZFc1owTkJRVklzUTBGQmVFSTdTVUZEUVN4UFFVRkJMRVZCUVhkQ0xFOUJRVUVzUTBGQlVTeHBRMEZCVWl4RFFVUjRRanRKUVVWQkxFOUJRVUVzUlVGQmQwSXNUMEZCUVN4RFFVRlJMR2xEUVVGU0xFTkJSbmhDTzBsQlIwRXNTMEZCUVN4RlFVRjNRaXhQUVVGQkxFTkJRVkVzSzBKQlFWSXNRMEZJZUVJN1NVRkpRU3huUWtGQlFTeEZRVUYzUWl4UFFVRkJMRU5CUVZFc01FTkJRVklzUTBGS2VFSTdTVUZMUVN4elFrRkJRU3hGUVVGM1FpeFBRVUZCTEVOQlFWRXNaMFJCUVZJc1EwRk1lRUk3T3pzeVFrRlBSaXhWUVVGQkxFZEJRVmtzVTBGQlF5eFBRVUZFTzFkQlExWXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzVVVGQldDeEZRVUZ4UWl4SlFVRkRMRU5CUVVFc1QwRkJUeXhEUVVGRExGVkJRVGxDTzBWQlJGVTdPekpDUVVkYUxHVkJRVUVzUjBGQmFVSXNVMEZCUVR0QlFVTm1MRmRCUVU4N1RVRkJSU3hoUVVGQkxFVkJRV1VzU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4aFFVRXhRanM3UlVGRVVUczdNa0pCUjJwQ0xGZEJRVUVzUjBGQllTeFRRVUZCTzBGQlExZ3NWMEZCVHl4SlFVRkRMRU5CUVVFc1YwRkJXU3hEUVVGQkxFbEJRVU1zUTBGQlFTeFBRVUZQTEVOQlFVTXNWVUZCVkR0RlFVUlVPenN5UWtGSFlpeFJRVUZCTEVkQlFWVXNVMEZCUVR0WFFVTlNMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQmFFSXNRMEZCTmtJc1NVRkJOMElzUlVGQlowTXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhWUVVGMlF6dEZRVVJST3pzN08wZEJja0pwUWl4RlFVRkZMRU5CUVVNN08wRkJNRUl4UWpzN096czdPenQxUWtGRFNpeFRRVUZCTEVkQlFWYzdPM1ZDUVVOWUxGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNlVUpCUVZJN08zVkNRVVZXTEVWQlFVRXNSMEZEUlR0SlFVRkJMRmxCUVVFc1JVRkJZeXh6UWtGQlpEczdPM1ZDUVVWR0xFMUJRVUVzUjBGRFJUdEpRVUZCTEhkQ1FVRkJMRVZCUVRCQ0xHZENRVUV4UWpzN08zVkNRVVZHTEU5QlFVRXNSMEZEUlR0SlFVRkJMR2RDUVVGQkxFVkJRV3RDTERKQ1FVRnNRanM3TzNWQ1FVVkdMR2RDUVVGQkxFZEJRV3RDTzBsQlEyaENPMDFCUVVVc1RVRkJRU3hGUVVGUkxGTkJRVlk3VFVGQmIwTXNTVUZCUVN4RlFVRk5MR2RDUVVFeFF6dE5RVUU0UkN4SlFVRkJMRVZCUVUwc1UwRkJjRVU3VFVGQkswVXNRMEZCUVN4UFFVRkJMRU5CUVVFc1JVRkJVeXhKUVVGNFJqdExRVVJuUWl4RlFVZG9RanROUVVGRkxFMUJRVUVzUlVGQlVTeFJRVUZXTzAxQlFXOURMRWxCUVVFc1JVRkJUU3hYUVVFeFF6dE5RVUU0UkN4SlFVRkJMRVZCUVUwc1VVRkJjRVU3UzBGSVowSXNSVUZKYUVJN1RVRkJSU3hOUVVGQkxFVkJRVkVzVTBGQlZqdE5RVUZ2UXl4SlFVRkJMRVZCUVUwc2EwSkJRVEZETzAxQlFUaEVMRWxCUVVFc1JVRkJUU3hUUVVGd1JUdExRVXBuUWl4RlFVdG9RanROUVVGRkxFMUJRVUVzUlVGQlVTeFBRVUZXTzAxQlFXOURMRWxCUVVFc1JVRkJUU3hUUVVFeFF6dE5RVUU0UkN4SlFVRkJMRVZCUVUwc1QwRkJjRVU3UzBGTVowSXNSVUZOYUVJN1RVRkJSU3hOUVVGQkxFVkJRVkVzYTBKQlFWWTdUVUZCYjBNc1NVRkJRU3hGUVVGTkxHTkJRVEZETzAxQlFUaEVMRWxCUVVFc1JVRkJUU3hwUWtGQmNFVTdTMEZPWjBJc1JVRlBhRUk3VFVGQlJTeE5RVUZCTEVWQlFWRXNkMEpCUVZZN1RVRkJiME1zU1VGQlFTeEZRVUZOTEdWQlFURkRPMDFCUVRoRUxFbEJRVUVzUlVGQlRTeDNRa0ZCY0VVN1MwRlFaMEk3T3p0MVFrRmpiRUlzWlVGQlFTeEhRVUZwUWl4VFFVRkJPMEZCUTJZc1YwRkJUenROUVVGRkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNUMEZCVHl4RFFVRkRMRXRCUVd4Q08wMUJRWGxDTEdkQ1FVRkJMRVZCUVd0Q0xFbEJRVU1zUTBGQlFTeG5Ra0ZCTlVNN08wVkJSRkU3TzNWQ1FVZHFRaXhSUVVGQkxFZEJRVlVzVTBGQlFUdFhRVU5TTEVsQlFVTXNRMEZCUVN4eFFrRkJSQ3hEUVVGQk8wVkJSRkU3TzNWQ1FVZFdMR05CUVVFc1IwRkJaMElzVTBGQlF5eERRVUZFTzBGQlEyUXNVVUZCUVR0SlFVRkJMRVZCUVVFc1IwRkJTeXhEUVVGQkxFTkJRVVVzUTBGQlF5eERRVUZETEdGQlFVbzdTVUZEVEN4VlFVRkJMRWRCUVdFc1JVRkJSU3hEUVVGRExFbEJRVWdzUTBGQlVTeFJRVUZTTzBsQlEySXNSVUZCUlN4RFFVRkRMRkZCUVVnc1EwRkJXU3hSUVVGYUxFTkJRWEZDTEVOQlFVTXNVVUZCZEVJc1EwRkJLMElzVFVGQkwwSXNRMEZCYzBNc1EwRkJReXhYUVVGMlF5eERRVUZ0UkN4UlFVRnVSRHRKUVVOQkxFVkJRVVVzUTBGQlF5eEpRVUZJTEVOQlFVRTdWMEZEUVN4SlFVRkRMRU5CUVVFc2EwSkJRVVFzUTBGQmIwSXNWVUZCY0VJN1JVRk1ZenM3ZFVKQlQyaENMR3RDUVVGQkxFZEJRVzlDTEZOQlFVTXNWVUZCUkR0WFFVTnNRaXhKUVVGRExFTkJRVUVzWjBKQlFXZENMRU5CUVVNc1NVRkJiRUlzUTBGQmRVSXNTVUZCU1N4alFVRktMRU5CUVcxQ08wMUJRVVVzUzBGQlFTeEZRVUZQTEVsQlFVTXNRMEZCUVN4TFFVRldPMDFCUVdsQ0xGVkJRVUVzUlVGQldTeFZRVUUzUWp0TlFVRjVReXhoUVVGQkxFVkJRV1VzU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4aFFVRnFSVHRMUVVGdVFpeERRVUYyUWp0RlFVUnJRanM3ZFVKQlNYQkNMSEZDUVVGQkxFZEJRWFZDTEZOQlFVRTdRVUZIY2tJc1VVRkJRVHRKUVVGQkxFbEJRVWNzU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4TFFVRmFPMDFCUjBVc1lVRkJRU3hIUVVGblFpeERRVUZETEVOQlFVTXNVMEZCUml4RFFVRlpMRWxCUVVNc1EwRkJRU3huUWtGQllpeEZRVUVyUWp0UlFVRkZMRU5CUVVFc1QwRkJRU3hEUVVGQkxFVkJRVk1zU1VGQldEdFBRVUV2UWp0aFFVTm9RaXhKUVVGRExFTkJRVUVzYTBKQlFVUXNRMEZCYjBJc1lVRkJZU3hEUVVGRExFMUJRV3hETEVWQlNrWTdTMEZCUVN4TlFVRkJPMkZCVVVVc1NVRkJReXhEUVVGQkxHdENRVUZFTEVOQlFXOUNMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUjBGQlVDeERRVUZYTEZGQlFWZ3NRMEZCY0VJc1JVRlNSanM3UlVGSWNVSTdPenM3UjBFMVEwRXNSVUZCUlN4RFFVRkRPenRCUVRKRU5VSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEFwcGx5UnVsZXNWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQXBwbHlSdWxlc1ZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQXBwbHlSdWxlc1ZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEFwcGx5UnVsZXNWaWV3KCkge1xuICAgIHJldHVybiBBcHBseVJ1bGVzVmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEFwcGx5UnVsZXNWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2FwcGx5X3J1bGVzJyk7XG5cbiAgQXBwbHlSdWxlc1ZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjYXJkIGNhcmQtYm9keSc7XG5cbiAgQXBwbHlSdWxlc1ZpZXcucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBDYW5jZWxCdXR0b246IHt9LFxuICAgIENvbmZpcm1hdGlvbnM6IHtcbiAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gYXBwbHkgcnVsZXMgdG8gdGhpcyBkYXRhc2V0PycsXG4gICAgICBjb25maXJtSWNvbjogJ2ZhLWNoZWNrLWNpcmNsZS1vJyxcbiAgICAgIGNvbmZpcm1UZXh0OiAnQXBwbHkgUnVsZXMnLFxuICAgICAgY29uZmlybUNzczogJ2J0bi1zdWNjZXNzJ1xuICAgIH0sXG4gICAgRmxhc2hlczoge1xuICAgICAgc3VjY2Vzczoge1xuICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGFwcGxpZWQgcnVsZXMgdG8gZGF0YXNldC4nXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEFwcGx5UnVsZXNWaWV3LnByb3RvdHlwZS51aSA9IHtcbiAgICBjb25maXJtYXRpb25UcmlnZ2VyOiAnW2RhdGEtY2xpY2s9c3VibWl0XSdcbiAgfTtcblxuICBBcHBseVJ1bGVzVmlldy5wcm90b3R5cGUub25DYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyKCdjYW5jZWwnKTtcbiAgfTtcblxuICBBcHBseVJ1bGVzVmlldy5wcm90b3R5cGUub25Db25maXJtZWQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmRpc2FibGVDYW5jZWwoKTtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5mZXRjaERhdGFwb2ludHMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNvbGxlY3Rpb24uYXBwbHlSdWxlcyhkYXRhcG9pbnRzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5tb2RlbC5yZWdlbmVyYXRlRmFjZXRzKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdoaWRlJyk7XG4gICAgICAgICAgICBfdGhpcy5mbGFzaFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdzdWNjZXNzJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIEFwcGx5UnVsZXNWaWV3O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcHBseVJ1bGVzVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZZWEJ3YkhsU2RXeGxjeTVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5cmJtOTNiR1ZrWjJWZlkyRndkSFZ5WlM5MmFXVjNjeTloY0hCc2VWSjFiR1Z6TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZEUVN4SlFVRkJMR05CUVVFN1JVRkJRVHM3TzBGQlFVMDdPenM3T3pzN01rSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4NVFrRkJVanM3TWtKQlExWXNVMEZCUVN4SFFVRlhPenN5UWtGRldDeFRRVUZCTEVkQlEwVTdTVUZCUVN4WlFVRkJMRVZCUVdNc1JVRkJaRHRKUVVkQkxHRkJRVUVzUlVGRFJUdE5RVUZCTEU5QlFVRXNSVUZCWXl4MVJFRkJaRHROUVVOQkxGZEJRVUVzUlVGQll5eHRRa0ZFWkR0TlFVVkJMRmRCUVVFc1JVRkJZeXhoUVVaa08wMUJSMEVzVlVGQlFTeEZRVUZqTEdGQlNHUTdTMEZLUmp0SlFWTkJMRTlCUVVFc1JVRkRSVHROUVVGQkxFOUJRVUVzUlVGRFJUdFJRVUZCTEU5QlFVRXNSVUZCVlN4M1EwRkJWanRQUVVSR08wdEJWa1k3T3pzeVFrRmhSaXhGUVVGQkxFZEJRMFU3U1VGQlFTeHRRa0ZCUVN4RlFVRnpRaXh4UWtGQmRFSTdPenN5UWtGRlJpeFJRVUZCTEVkQlFWVXNVMEZCUVR0WFFVTlNMRWxCUVVNc1EwRkJRU3hQUVVGRUxFTkJRVk1zVVVGQlZEdEZRVVJST3pzeVFrRkhWaXhYUVVGQkxFZEJRV0VzVTBGQlFUdEpRVVZZTEVsQlFVTXNRMEZCUVN4aFFVRkVMRU5CUVVFN1YwRkZRU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEdWQlFWQXNRMEZCUVN4RFFVRjNRaXhEUVVGRExFbEJRWHBDTEVOQlFUaENMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eFZRVUZFTzJWQlJUVkNMRXRCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zVlVGQldpeERRVUYxUWl4VlFVRjJRaXhEUVVGclF5eERRVUZETEVsQlFXNURMRU5CUVhkRExGTkJRVUU3YVVKQlJYUkRMRXRCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zWjBKQlFWQXNRMEZCUVN4RFFVRjVRaXhEUVVGRExFbEJRVEZDTEVOQlFTdENMRk5CUVVFN1dVRkhOMElzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNUVUZCTVVNN1dVRkhRU3hMUVVGRExFTkJRVUVzV1VGQlJDeERRVUZCTzIxQ1FVZEJMRXRCUVVNc1EwRkJRU3hQUVVGRUxFTkJRVk1zVTBGQlZEdFZRVlEyUWl4RFFVRXZRanRSUVVaelF5eERRVUY0UXp0TlFVWTBRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCT1VJN1JVRktWenM3T3p0SFFYaENZeXhGUVVGRkxFTkJRVU03TzBGQk5rTm9ReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWlKOVxuIiwidmFyIENvbnN0cmFpbnRGb3JtLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQ29uc3RyYWludEZvcm0gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQ29uc3RyYWludEZvcm0sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENvbnN0cmFpbnRGb3JtKCkge1xuICAgIHJldHVybiBDb25zdHJhaW50Rm9ybS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIENvbnN0cmFpbnRGb3JtLnByb3RvdHlwZS5jbGFzc05hbWUgPSAncm93JztcblxuICBDb25zdHJhaW50Rm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9jb25zdHJhaW50X2Zvcm0nKTtcblxuICBDb25zdHJhaW50Rm9ybS5wcm90b3R5cGUub3BlcmF0aW9uT3B0aW9ucyA9IFtbJ2V4aXN0cycsICdFeGlzdHMnXSwgWydleGFjdF9tYXRjaCcsICdFeGFjdCBNYXRjaCddLCBbJ3N0YXJ0c193aXRoJywgJ1N0YXJ0cyBXaXRoJ10sIFsnZW5kc193aXRoJywgJ0VuZHMgV2l0aCddLCBbJ2NvbnRhaW5zJywgJ0NvbnRhaW5zJ10sIFsnZG9lc19ub3RfY29udGFpbicsICdEb2VzIE5vdCBDb250YWluJ10sIFsnY29udGFpbnNfY2FzZV9zZW5zaXRpdmUnLCAnQ29udGFpbnMgKGNhc2Ugc2Vuc2l0aXZlKSddXTtcblxuICBDb25zdHJhaW50Rm9ybS5wcm90b3R5cGUudGVtcGxhdGVIZWxwZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhlbHBlcnM7XG4gICAgcmV0dXJuIGhlbHBlcnMgPSB7XG4gICAgICBzb3VyY2VPcHRpb25zOiB0aGlzLm9wdGlvbnMuc291cmNlT3B0aW9ucyxcbiAgICAgIG9wZXJhdGlvbk9wdGlvbnM6IHRoaXMub3BlcmF0aW9uT3B0aW9uc1xuICAgIH07XG4gIH07XG5cbiAgQ29uc3RyYWludEZvcm0ucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlN5cGhvbi5kZXNlcmlhbGl6ZSh0aGlzLCB0aGlzLm1vZGVsLmF0dHJpYnV0ZXMpO1xuICB9O1xuXG4gIHJldHVybiBDb25zdHJhaW50Rm9ybTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29uc3RyYWludEZvcm07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012WTI5dWMzUnlZV2x1ZEVadmNtMHVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZZMjl1YzNSeVlXbHVkRVp2Y20wdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVOQkxFbEJRVUVzWTBGQlFUdEZRVUZCT3pzN1FVRkJUVHM3T3pzN096c3lRa0ZEU2l4VFFVRkJMRWRCUVZjN096SkNRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc05rSkJRVkk3T3pKQ1FWRldMR2RDUVVGQkxFZEJRV3RDTEVOQlEyaENMRU5CUVVNc1VVRkJSQ3hGUVVFMFFpeFJRVUUxUWl4RFFVUm5RaXhGUVVWb1FpeERRVUZETEdGQlFVUXNSVUZCTkVJc1lVRkJOVUlzUTBGR1owSXNSVUZIYUVJc1EwRkJReXhoUVVGRUxFVkJRVFJDTEdGQlFUVkNMRU5CU0dkQ0xFVkJTV2hDTEVOQlFVTXNWMEZCUkN4RlFVRTBRaXhYUVVFMVFpeERRVXBuUWl4RlFVdG9RaXhEUVVGRExGVkJRVVFzUlVGQk5FSXNWVUZCTlVJc1EwRk1aMElzUlVGTmFFSXNRMEZCUXl4clFrRkJSQ3hGUVVFMFFpeHJRa0ZCTlVJc1EwRk9aMElzUlVGUGFFSXNRMEZCUXl4NVFrRkJSQ3hGUVVFMFFpd3lRa0ZCTlVJc1EwRlFaMEk3T3pKQ1FWVnNRaXhsUVVGQkxFZEJRV2xDTEZOQlFVRTdRVUZEWml4UlFVRkJPMEZCUVVFc1YwRkJUeXhQUVVGQkxFZEJRMHc3VFVGQlFTeGhRVUZCTEVWQlFXdENMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU1zWVVGQk0wSTdUVUZEUVN4blFrRkJRU3hGUVVGclFpeEpRVUZETEVOQlFVRXNaMEpCUkc1Q096dEZRVVpoT3pzeVFrRkxha0lzVVVGQlFTeEhRVUZWTEZOQlFVRTdWMEZEVWl4UlFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRV2hDTEVOQlFUWkNMRWxCUVRkQ0xFVkJRV2RETEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1ZVRkJka003UlVGRVVUczdPenRIUVhwQ2FVSXNSVUZCUlN4RFFVRkRPenRCUVRoQ2FFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEFjdGlvbkZvcm0sIENvbnN0cmFpbnRGb3JtLCBEZWZpbml0aW9uRm9ybSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNvbnN0cmFpbnRGb3JtID0gcmVxdWlyZSgnLi9jb25zdHJhaW50Rm9ybScpO1xuXG5BY3Rpb25Gb3JtID0gcmVxdWlyZSgnLi9hY3Rpb25Gb3JtJyk7XG5cbkRlZmluaXRpb25Gb3JtID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERlZmluaXRpb25Gb3JtLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEZWZpbml0aW9uRm9ybSgpIHtcbiAgICByZXR1cm4gRGVmaW5pdGlvbkZvcm0uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEZWZpbml0aW9uRm9ybS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgRGVmaW5pdGlvbkZvcm0ucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGVmaW5pdGlvbl9mb3JtJyk7XG5cbiAgRGVmaW5pdGlvbkZvcm0ucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBDYW5jZWxCdXR0b246IHt9LFxuICAgIFN1Ym1pdEJ1dHRvbjoge31cbiAgfTtcblxuICBEZWZpbml0aW9uRm9ybS5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBjb25zdHJhaW50UmVnaW9uOiAnW2RhdGEtcmVnaW9uPWNvbnN0cmFpbnRdJyxcbiAgICBhY3Rpb25SZWdpb246ICdbZGF0YS1yZWdpb249YWN0aW9uXSdcbiAgfTtcblxuICBEZWZpbml0aW9uRm9ybS5wcm90b3R5cGUudGVtcGxhdGVIZWxwZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTmV3OiB0aGlzLm9wdGlvbnMuaXNOZXdcbiAgICB9O1xuICB9O1xuXG4gIERlZmluaXRpb25Gb3JtLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29uc3RyYWludFJlZ2lvbi5zaG93KG5ldyBDb25zdHJhaW50Rm9ybSh7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgIHNvdXJjZU9wdGlvbnM6IHRoaXMub3B0aW9ucy5zb3VyY2VPcHRpb25zXG4gICAgfSkpO1xuICAgIHJldHVybiB0aGlzLmFjdGlvblJlZ2lvbi5zaG93KG5ldyBBY3Rpb25Gb3JtKHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgaXNOZXc6IHRoaXMub3B0aW9ucy5pc05ldyxcbiAgICAgIHNvdXJjZU9wdGlvbnM6IHRoaXMub3B0aW9ucy5zb3VyY2VPcHRpb25zXG4gICAgfSkpO1xuICB9O1xuXG4gIERlZmluaXRpb25Gb3JtLnByb3RvdHlwZS5vbkNhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ2NhbmNlbCcsIHRoaXMpO1xuICB9O1xuXG4gIERlZmluaXRpb25Gb3JtLnByb3RvdHlwZS5vblN1Ym1pdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZGF0YTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRhdGEgPSBCYWNrYm9uZS5TeXBob24uc2VyaWFsaXplKHRoaXMpO1xuICAgIHRoaXMubW9kZWwuc2V0KGRhdGEpO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ3N1Ym1pdCcsIHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBEZWZpbml0aW9uRm9ybTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGVmaW5pdGlvbkZvcm07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012WkdWbWFXNXBkR2x2YmtadmNtMHVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZaR1ZtYVc1cGRHbHZia1p2Y20wdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzTUVOQlFVRTdSVUZCUVRzN08wRkJRVUVzWTBGQlFTeEhRVUZwUWl4UFFVRkJMRU5CUVZFc2EwSkJRVkk3TzBGQlEycENMRlZCUVVFc1IwRkJZU3hQUVVGQkxFTkJRVkVzWTBGQlVqczdRVUZKVURzN096czdPenN5UWtGRFNpeFRRVUZCTEVkQlFWYzdPekpDUVVOWUxGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNOa0pCUVZJN096SkNRVVZXTEZOQlFVRXNSMEZEUlR0SlFVRkJMRmxCUVVFc1JVRkJZeXhGUVVGa08wbEJRMEVzV1VGQlFTeEZRVUZqTEVWQlJHUTdPenN5UWtGSFJpeFBRVUZCTEVkQlEwVTdTVUZCUVN4blFrRkJRU3hGUVVGclFpd3dRa0ZCYkVJN1NVRkRRU3haUVVGQkxFVkJRV3RDTEhOQ1FVUnNRanM3T3pKQ1FVZEdMR1ZCUVVFc1IwRkJhVUlzVTBGQlFUdEJRVU5tTEZkQlFVODdUVUZCUlN4TFFVRkJMRVZCUVU4c1NVRkJReXhEUVVGQkxFOUJRVThzUTBGQlF5eExRVUZzUWpzN1JVRkVVVHM3TWtKQlIycENMRkZCUVVFc1IwRkJWU3hUUVVGQk8wbEJRMUlzU1VGQlF5eERRVUZCTEdkQ1FVRm5RaXhEUVVGRExFbEJRV3hDTEVOQlFYVkNMRWxCUVVrc1kwRkJTaXhEUVVGdFFqdE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanROUVVGcFFpeGhRVUZCTEVWQlFXVXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhoUVVGNlF6dExRVUZ1UWl4RFFVRjJRanRYUVVOQkxFbEJRVU1zUTBGQlFTeFpRVUZaTEVOQlFVTXNTVUZCWkN4RFFVRnRRaXhKUVVGSkxGVkJRVW9zUTBGQlpUdE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanROUVVGcFFpeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhMUVVGcVF6dE5RVUYzUXl4aFFVRkJMRVZCUVdVc1NVRkJReXhEUVVGQkxFOUJRVThzUTBGQlF5eGhRVUZvUlR0TFFVRm1MRU5CUVc1Q08wVkJSbEU3T3pKQ1FVbFdMRkZCUVVFc1IwRkJWU3hUUVVGRExFTkJRVVE3U1VGRFVpeERRVUZETEVOQlFVTXNaVUZCUml4RFFVRkJPMWRCUTBFc1NVRkJReXhEUVVGQkxFOUJRVVFzUTBGQlV5eFJRVUZVTEVWQlFXMUNMRWxCUVc1Q08wVkJSbEU3T3pKQ1FVbFdMRkZCUVVFc1IwRkJWU3hUUVVGRExFTkJRVVE3UVVGRFVpeFJRVUZCTzBsQlFVRXNRMEZCUXl4RFFVRkRMR1ZCUVVZc1EwRkJRVHRKUVVkQkxFbEJRVUVzUjBGQlR5eFJRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVdoQ0xFTkJRVEJDTEVsQlFURkNPMGxCUzFBc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NTVUZCV0R0WFFVZEJMRWxCUVVNc1EwRkJRU3hQUVVGRUxFTkJRVk1zVVVGQlZDeEZRVUZ0UWl4SlFVRnVRanRGUVZwUk96czdPMGRCZGtKcFFpeEZRVUZGTEVOQlFVTTdPMEZCZFVOb1F5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgRGVmaW5pdGlvbkNoaWxkLCBEZWZpbml0aW9uRW1wdHksIERlZmluaXRpb25MYXlvdXQsIERlZmluaXRpb25MaXN0LCBEZWZpbml0aW9uVmlld2VyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRGVmaW5pdGlvblZpZXdlciA9IHJlcXVpcmUoJy4vZGVmaW5pdGlvblZpZXdlcicpO1xuXG5EZWZpbml0aW9uRW1wdHkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGVmaW5pdGlvbkVtcHR5LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEZWZpbml0aW9uRW1wdHkoKSB7XG4gICAgcmV0dXJuIERlZmluaXRpb25FbXB0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERlZmluaXRpb25FbXB0eS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9kZWZpbml0aW9uX2VtcHR5Jyk7XG5cbiAgRGVmaW5pdGlvbkVtcHR5LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtIGxpc3QtZ3JvdXAtaXRlbS13YXJuaW5nJztcblxuICByZXR1cm4gRGVmaW5pdGlvbkVtcHR5O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuRGVmaW5pdGlvbkNoaWxkID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERlZmluaXRpb25DaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGVmaW5pdGlvbkNoaWxkKCkge1xuICAgIHJldHVybiBEZWZpbml0aW9uQ2hpbGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEZWZpbml0aW9uQ2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGVmaW5pdGlvbl9jaGlsZCcpO1xuXG4gIERlZmluaXRpb25DaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAtaXRlbSc7XG5cbiAgRGVmaW5pdGlvbkNoaWxkLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgU29ydGFibGVDaGlsZDoge30sXG4gICAgU2VsZWN0YWJsZUNoaWxkOiB7fVxuICB9O1xuXG4gIERlZmluaXRpb25DaGlsZC5wcm90b3R5cGUubW9kZWxFdmVudHMgPSB7XG4gICAgJ2NoYW5nZTpvcmRlcic6ICdvblJlb3JkZXJlZCdcbiAgfTtcblxuICBEZWZpbml0aW9uQ2hpbGQucHJvdG90eXBlLm9uUmVvcmRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgcmV0dXJuIERlZmluaXRpb25DaGlsZDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbkRlZmluaXRpb25MaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERlZmluaXRpb25MaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEZWZpbml0aW9uTGlzdCgpIHtcbiAgICByZXR1cm4gRGVmaW5pdGlvbkxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEZWZpbml0aW9uTGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAnO1xuXG4gIERlZmluaXRpb25MaXN0LnByb3RvdHlwZS5jaGlsZFZpZXcgPSBEZWZpbml0aW9uQ2hpbGQ7XG5cbiAgRGVmaW5pdGlvbkxpc3QucHJvdG90eXBlLmVtcHR5VmlldyA9IERlZmluaXRpb25FbXB0eTtcblxuICBEZWZpbml0aW9uTGlzdC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIFNvcnRhYmxlTGlzdDoge31cbiAgfTtcblxuICBEZWZpbml0aW9uTGlzdC5wcm90b3R5cGUuY29sbGVjdGlvbkV2ZW50cyA9IHtcbiAgICAncmVtb3ZlJzogJ29uQ29sbGVjdGlvblJlbW92ZScsXG4gICAgJ2FkZCc6ICdvbkNvbGxlY3Rpb25SZW1vdmUnXG4gIH07XG5cbiAgRGVmaW5pdGlvbkxpc3QucHJvdG90eXBlLm9uQ29sbGVjdGlvblJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZWY7XG4gICAgc2V0VGltZW91dCh0aGlzLnJlb3JkZXJDb2xsZWN0aW9uLCAyNTApO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5jb2xsZWN0aW9uLmF0KDApKSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgcmV0dXJuIERlZmluaXRpb25MaXN0O1xuXG59KShNbi5Db2xsZWN0aW9uVmlldyk7XG5cbkRlZmluaXRpb25MYXlvdXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRGVmaW5pdGlvbkxheW91dCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGVmaW5pdGlvbkxheW91dCgpIHtcbiAgICByZXR1cm4gRGVmaW5pdGlvbkxheW91dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERlZmluaXRpb25MYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIERlZmluaXRpb25MYXlvdXQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGVmaW5pdGlvbl9saXN0X2xheW91dCcpO1xuXG4gIERlZmluaXRpb25MYXlvdXQucHJvdG90eXBlLmNvbGxlY3Rpb25FdmVudHMgPSB7XG4gICAgJ2FkZCc6ICdyZW5kZXInLFxuICAgICdyZW1vdmUnOiAncmVuZGVyJ1xuICB9O1xuXG4gIERlZmluaXRpb25MYXlvdXQucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgbGlzdFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1saXN0XScsXG4gICAgZGV0YWlsUmVnaW9uOiAnW2RhdGEtcmVnaW9uPWRldGFpbF0nXG4gIH07XG5cbiAgRGVmaW5pdGlvbkxheW91dC5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zaG93RGVmaW5pdGlvbkxpc3QoKTtcbiAgfTtcblxuICBEZWZpbml0aW9uTGF5b3V0LnByb3RvdHlwZS5zaG93RGVmaW5pdGlvbkxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGlzdFZpZXcsIHJlZjtcbiAgICBsaXN0VmlldyA9IG5ldyBEZWZpbml0aW9uTGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KTtcbiAgICBsaXN0Vmlldy5vbignY2hpbGR2aWV3OnNlbGVjdGVkJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0RlZmluaXRpb25WaWV3ZXIodmlldy5tb2RlbCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gICAgcmV0dXJuIChyZWYgPSB0aGlzLmNvbGxlY3Rpb24uYXQoMCkpICE9IG51bGwgPyByZWYudHJpZ2dlcignc2VsZWN0ZWQnKSA6IHZvaWQgMDtcbiAgfTtcblxuICBEZWZpbml0aW9uTGF5b3V0LnByb3RvdHlwZS5zaG93RGVmaW5pdGlvblZpZXdlciA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgdmFyIGRlZmluaXRpb25WaWV3ZXI7XG4gICAgZGVmaW5pdGlvblZpZXdlciA9IG5ldyBEZWZpbml0aW9uVmlld2VyKHtcbiAgICAgIG1vZGVsOiBtb2RlbFxuICAgIH0pO1xuICAgIGRlZmluaXRpb25WaWV3ZXIub24oJ2VkaXQnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdlZGl0OmRlZmluaXRpb24nLCB2aWV3Lm1vZGVsKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmRldGFpbFJlZ2lvbi5zaG93KGRlZmluaXRpb25WaWV3ZXIpO1xuICB9O1xuXG4gIHJldHVybiBEZWZpbml0aW9uTGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWZpbml0aW9uTGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdlpHVm1hVzVwZEdsdmJreHBjM1F1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012WkdWbWFXNXBkR2x2Ymt4cGMzUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc2IwWkJRVUU3UlVGQlFUczdPMEZCUVVFc1owSkJRVUVzUjBGQmJVSXNUMEZCUVN4RFFVRlJMRzlDUVVGU096dEJRVWxpT3pzN096czdPelJDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNPRUpCUVZJN096UkNRVU5XTEZOQlFVRXNSMEZCVnpzN096dEhRVVpwUWl4RlFVRkZMRU5CUVVNN08wRkJUVE5DT3pzN096czdPelJDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNPRUpCUVZJN096UkNRVU5XTEZOQlFVRXNSMEZCVnpzN05FSkJSVmdzVTBGQlFTeEhRVU5GTzBsQlFVRXNZVUZCUVN4RlFVRmxMRVZCUVdZN1NVRkRRU3hsUVVGQkxFVkJRV2xDTEVWQlJHcENPenM3TkVKQlIwWXNWMEZCUVN4SFFVTkZPMGxCUVVFc1kwRkJRU3hGUVVGblFpeGhRVUZvUWpzN096UkNRVVZHTEZkQlFVRXNSMEZCWVN4VFFVRkJPMWRCUTFnc1NVRkJReXhEUVVGQkxFMUJRVVFzUTBGQlFUdEZRVVJYT3pzN08wZEJXR1VzUlVGQlJTeERRVUZET3p0QlFXbENNMEk3T3pzN096czdNa0pCUTBvc1UwRkJRU3hIUVVGWE96c3lRa0ZEV0N4VFFVRkJMRWRCUVZjN096SkNRVU5ZTEZOQlFVRXNSMEZCVnpzN01rSkJSVmdzVTBGQlFTeEhRVU5GTzBsQlFVRXNXVUZCUVN4RlFVRmpMRVZCUVdRN096c3lRa0ZGUml4blFrRkJRU3hIUVVORk8wbEJRVUVzVVVGQlFTeEZRVUZWTEc5Q1FVRldPMGxCUTBFc1MwRkJRU3hGUVVGVkxHOUNRVVJXT3pzN01rSkJTMFlzYTBKQlFVRXNSMEZCYjBJc1UwRkJRVHRCUVVOc1FpeFJRVUZCTzBsQlFVRXNWVUZCUVN4RFFVRlpMRWxCUVVNc1EwRkJRU3hwUWtGQllpeEZRVUZuUXl4SFFVRm9RenR6UkVGRGFVSXNRMEZCUlN4UFFVRnVRaXhEUVVFeVFpeFZRVUV6UWp0RlFVWnJRanM3T3p0SFFXUlBMRVZCUVVVc1EwRkJRenM3UVVGdlFqRkNPenM3T3pzN096WkNRVU5LTEZOQlFVRXNSMEZCVnpzN05rSkJRMWdzVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4dlEwRkJVanM3TmtKQlJWWXNaMEpCUVVFc1IwRkRSVHRKUVVGQkxFdEJRVUVzUlVGQlZTeFJRVUZXTzBsQlEwRXNVVUZCUVN4RlFVRlZMRkZCUkZZN096czJRa0ZIUml4UFFVRkJMRWRCUTBVN1NVRkJRU3hWUVVGQkxFVkJRV01zYjBKQlFXUTdTVUZEUVN4WlFVRkJMRVZCUVdNc2MwSkJSR1E3T3pzMlFrRkhSaXhSUVVGQkxFZEJRVlVzVTBGQlFUdFhRVU5TTEVsQlFVTXNRMEZCUVN4clFrRkJSQ3hEUVVGQk8wVkJSRkU3T3paQ1FVZFdMR3RDUVVGQkxFZEJRVzlDTEZOQlFVRTdRVUZEYkVJc1VVRkJRVHRKUVVGQkxGRkJRVUVzUjBGQlZ5eEpRVUZKTEdOQlFVb3NRMEZCYlVJN1RVRkJSU3hWUVVGQkxFVkJRVmtzU1VGQlF5eERRVUZCTEZWQlFXWTdTMEZCYmtJN1NVRkRXQ3hSUVVGUkxFTkJRVU1zUlVGQlZDeERRVUZaTEc5Q1FVRmFMRVZCUVd0RExFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4SlFVRkVPMlZCUVZVc1MwRkJReXhEUVVGQkxHOUNRVUZFTEVOQlFYTkNMRWxCUVVrc1EwRkJReXhMUVVFelFqdE5RVUZXTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGc1F6dEpRVU5CTEVsQlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1NVRkJXaXhEUVVGcFFpeFJRVUZxUWp0elJFRkRhVUlzUTBGQlJTeFBRVUZ1UWl4RFFVRXlRaXhWUVVFelFqdEZRVXByUWpzN05rSkJUWEJDTEc5Q1FVRkJMRWRCUVhOQ0xGTkJRVU1zUzBGQlJEdEJRVU53UWl4UlFVRkJPMGxCUVVFc1owSkJRVUVzUjBGQmJVSXNTVUZCU1N4blFrRkJTaXhEUVVGeFFqdE5RVUZGTEV0QlFVRXNSVUZCVHl4TFFVRlVPMHRCUVhKQ08wbEJRMjVDTEdkQ1FVRm5RaXhEUVVGRExFVkJRV3BDTEVOQlFXOUNMRTFCUVhCQ0xFVkJRVFJDTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhKUVVGRU8yVkJRVlVzUzBGQlF5eERRVUZCTEU5QlFVUXNRMEZCVXl4cFFrRkJWQ3hGUVVFMFFpeEpRVUZKTEVOQlFVTXNTMEZCYWtNN1RVRkJWanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCTlVJN1YwRkRRU3hKUVVGRExFTkJRVUVzV1VGQldTeERRVUZETEVsQlFXUXNRMEZCYlVJc1owSkJRVzVDTzBWQlNHOUNPenM3TzBkQmNrSlBMRVZCUVVVc1EwRkJRenM3UVVFMFFteERMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIERlZmluaXRpb25WaWV3ZXIsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5EZWZpbml0aW9uVmlld2VyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERlZmluaXRpb25WaWV3ZXIsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERlZmluaXRpb25WaWV3ZXIoKSB7XG4gICAgcmV0dXJuIERlZmluaXRpb25WaWV3ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEZWZpbml0aW9uVmlld2VyLnByb3RvdHlwZS5jbGFzc05hbWUgPSAncm93JztcblxuICBEZWZpbml0aW9uVmlld2VyLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2RlZmluaXRpb25fdmlld2VyJyk7XG5cbiAgRGVmaW5pdGlvblZpZXdlci5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIENvbmZpcm1hdGlvbnM6IHtcbiAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGlzY2FyZCB0aGlzIGRlZmluaXRpb24/JyxcbiAgICAgIGNvbmZpcm1JY29uOiAnZmEtdHJhc2gnLFxuICAgICAgY29uZmlybVRleHQ6ICdESVNDQVJEJyxcbiAgICAgIGNvbmZpcm1Dc3M6ICdidG4tZGFuZ2VyJ1xuICAgIH1cbiAgfTtcblxuICBEZWZpbml0aW9uVmlld2VyLnByb3RvdHlwZS51aSA9IHtcbiAgICBlZGl0OiAnW2RhdGEtY2xpY2s9ZWRpdF0nLFxuICAgIGNvbmZpcm1hdGlvblRyaWdnZXI6ICdbZGF0YS1jbGljaz1kaXNjYXJkXSdcbiAgfTtcblxuICBEZWZpbml0aW9uVmlld2VyLnByb3RvdHlwZS50cmlnZ2VycyA9IHtcbiAgICAnY2xpY2sgQHVpLmVkaXQnOiAnZWRpdCdcbiAgfTtcblxuICBEZWZpbml0aW9uVmlld2VyLnByb3RvdHlwZS5vbkNvbmZpcm1lZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGVsLmNvbGxlY3Rpb24ucmVtb3ZlKHRoaXMubW9kZWwpO1xuICB9O1xuXG4gIHJldHVybiBEZWZpbml0aW9uVmlld2VyO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWZpbml0aW9uVmlld2VyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdlpHVm1hVzVwZEdsdmJsWnBaWGRsY2k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOXJibTkzYkdWa1oyVmZZMkZ3ZEhWeVpTOTJhV1YzY3k5a1pXWnBibWwwYVc5dVZtbGxkMlZ5TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZEUVN4SlFVRkJMR2RDUVVGQk8wVkJRVUU3T3p0QlFVRk5PenM3T3pzN096WkNRVU5LTEZOQlFVRXNSMEZCVnpzN05rSkJRMWdzVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN3clFrRkJVanM3TmtKQlJWWXNVMEZCUVN4SFFVTkZPMGxCUVVFc1lVRkJRU3hGUVVORk8wMUJRVUVzVDBGQlFTeEZRVUZqTEcxRVFVRmtPMDFCUTBFc1YwRkJRU3hGUVVGakxGVkJSR1E3VFVGRlFTeFhRVUZCTEVWQlFXTXNVMEZHWkR0TlFVZEJMRlZCUVVFc1JVRkJZeXhaUVVoa08wdEJSRVk3T3pzMlFrRk5SaXhGUVVGQkxFZEJRMFU3U1VGQlFTeEpRVUZCTEVWQlFYTkNMRzFDUVVGMFFqdEpRVU5CTEcxQ1FVRkJMRVZCUVhOQ0xITkNRVVIwUWpzN096WkNRVWRHTEZGQlFVRXNSMEZEUlR0SlFVRkJMR2RDUVVGQkxFVkJRV3RDTEUxQlFXeENPenM3TmtKQlIwWXNWMEZCUVN4SFFVRmhMRk5CUVVFN1YwRkRXQ3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEZWQlFWVXNRMEZCUXl4TlFVRnNRaXhEUVVGNVFpeEpRVUZETEVOQlFVRXNTMEZCTVVJN1JVRkVWenM3T3p0SFFXNUNaMElzUlVGQlJTeERRVUZET3p0QlFYZENiRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBFeHBvcnRGb3JtLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRXhwb3J0Rm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChFeHBvcnRGb3JtLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBFeHBvcnRGb3JtKCkge1xuICAgIHJldHVybiBFeHBvcnRGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRXhwb3J0Rm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9leHBvcnRfZm9ybScpO1xuXG4gIEV4cG9ydEZvcm0ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjYXJkIGNhcmQtYm9keSc7XG5cbiAgRXhwb3J0Rm9ybS5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIENhbmNlbEJ1dHRvbjoge30sXG4gICAgU3VibWl0QnV0dG9uOiB7fSxcbiAgICBEb3dubG9hZEZpbGU6IHt9LFxuICAgIEZsYXNoZXM6IHtcbiAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBleHBvcnRlZCBLbm93bGVkZ2UgQ2FwdHVyZS4nXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEV4cG9ydEZvcm0ucHJvdG90eXBlLm9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcignY2FuY2VsJyk7XG4gIH07XG5cbiAgRXhwb3J0Rm9ybS5wcm90b3R5cGUuZ2VuZXJhdGVGaWxlbmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRlLCBmaWxlbmFtZSwgbGFiZWw7XG4gICAgbGFiZWwgPSB0aGlzLm1vZGVsLmdldCgnbGFiZWwnKTtcbiAgICBsYWJlbCA9IGxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICdfJyk7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwgMTApLnJlcGxhY2UoLy0vZywgJ18nKTtcbiAgICBmaWxlbmFtZSA9IFtsYWJlbCwgJ19tYWdlbGxhbl9rbl9ydWxlc18nLCBkYXRlLCAnLmpzb24nXTtcbiAgICByZXR1cm4gZmlsZW5hbWUuam9pbignJyk7XG4gIH07XG5cbiAgRXhwb3J0Rm9ybS5wcm90b3R5cGUub25TdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5mZXRjaEtub3dsZWRnZVJ1bGVzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihrbm93bGVkZ2VSdWxlQ29sbGVjdGlvbikge1xuICAgICAgICB2YXIgY29udGVudCwgZmlsZW5hbWUsIGZpbGV0eXBlO1xuICAgICAgICBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoa25vd2xlZGdlUnVsZUNvbGxlY3Rpb24udG9KU09OKCksIG51bGwsIDIpO1xuICAgICAgICBmaWxlbmFtZSA9IF90aGlzLmdlbmVyYXRlRmlsZW5hbWUoKTtcbiAgICAgICAgZmlsZXR5cGUgPSAnYXBwbGljYXRvbi9qc29uJztcbiAgICAgICAgX3RoaXMuZG93bmxvYWRGaWxlKHtcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgIHR5cGU6IGZpbGV0eXBlLFxuICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMuZmxhc2hTdWNjZXNzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdzdWNjZXNzJyk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gRXhwb3J0Rm9ybTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRXhwb3J0Rm9ybTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZaWGh3YjNKMFJtOXliUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdlpHRjBZWE5sZEM5cmJtOTNiR1ZrWjJWZlkyRndkSFZ5WlM5MmFXVjNjeTlsZUhCdmNuUkdiM0p0TG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZEUVN4SlFVRkJMRlZCUVVFN1JVRkJRVHM3TzBGQlFVMDdPenM3T3pzN2RVSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4NVFrRkJVanM3ZFVKQlExWXNVMEZCUVN4SFFVRlhPenQxUWtGRldDeFRRVUZCTEVkQlEwVTdTVUZCUVN4WlFVRkJMRVZCUVdNc1JVRkJaRHRKUVVOQkxGbEJRVUVzUlVGQll5eEZRVVJrTzBsQlJVRXNXVUZCUVN4RlFVRmpMRVZCUm1RN1NVRkhRU3hQUVVGQkxFVkJRMFU3VFVGQlFTeFBRVUZCTEVWQlEwVTdVVUZCUVN4UFFVRkJMRVZCUVZVc01FTkJRVlk3VDBGRVJqdExRVXBHT3pzN2RVSkJUMFlzVVVGQlFTeEhRVUZWTEZOQlFVRTdWMEZEVWl4SlFVRkRMRU5CUVVFc1QwRkJSQ3hEUVVGVExGRkJRVlE3UlVGRVVUczdkVUpCU1ZZc1owSkJRVUVzUjBGQmEwSXNVMEZCUVR0QlFVTm9RaXhSUVVGQk8wbEJRVUVzUzBGQlFTeEhRVUZSTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExFOUJRVmc3U1VGRFVpeExRVUZCTEVkQlFWRXNTMEZCU3l4RFFVRkRMRmRCUVU0c1EwRkJRU3hEUVVGdFFpeERRVUZETEU5QlFYQkNMRU5CUVRSQ0xFdEJRVFZDTEVWQlFXMURMRWRCUVc1RE8wbEJRMUlzU1VGQlFTeEhRVUZSTEVsQlFVa3NTVUZCU2l4RFFVRkJMRU5CUVZVc1EwRkJReXhOUVVGWUxFTkJRVUVzUTBGQmJVSXNRMEZCUXl4TFFVRndRaXhEUVVFd1FpeERRVUV4UWl4RlFVRTBRaXhGUVVFMVFpeERRVUVyUWl4RFFVRkRMRTlCUVdoRExFTkJRWGRETEVsQlFYaERMRVZCUVRoRExFZEJRVGxETzBsQlExSXNVVUZCUVN4SFFVRlhMRU5CUVVNc1MwRkJSQ3hGUVVGUkxIRkNRVUZTTEVWQlFTdENMRWxCUVM5Q0xFVkJRWEZETEU5QlFYSkRPMEZCUTFnc1YwRkJUeXhSUVVGUkxFTkJRVU1zU1VGQlZDeERRVUZqTEVWQlFXUTdSVUZNVXpzN2RVSkJUMnhDTEZGQlFVRXNSMEZCVlN4VFFVRkJPMWRCUTFJc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eHRRa0ZCVUN4RFFVRkJMRU5CUVRSQ0xFTkJRVU1zU1VGQk4wSXNRMEZCYTBNc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEhWQ1FVRkVPMEZCUjJoRExGbEJRVUU3VVVGQlFTeFBRVUZCTEVkQlFWa3NTVUZCU1N4RFFVRkRMRk5CUVV3c1EwRkJaU3gxUWtGQmRVSXNRMEZCUXl4TlFVRjRRaXhEUVVGQkxFTkJRV1lzUlVGQmFVUXNTVUZCYWtRc1JVRkJkVVFzUTBGQmRrUTdVVUZEV2l4UlFVRkJMRWRCUVZrc1MwRkJReXhEUVVGQkxHZENRVUZFTEVOQlFVRTdVVUZEV2l4UlFVRkJMRWRCUVZrN1VVRkhXaXhMUVVGRExFTkJRVUVzV1VGQlJDeERRVUZqTzFWQlFVVXNUMEZCUVN4RlFVRlRMRTlCUVZnN1ZVRkJiMElzU1VGQlFTeEZRVUZOTEZGQlFURkNPMVZCUVc5RExGRkJRVUVzUlVGQlZTeFJRVUU1UXp0VFFVRmtPMUZCUjBFc1MwRkJReXhEUVVGQkxGbEJRVVFzUTBGQlFUdGxRVWRCTEV0QlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1UwRkJWRHROUVdSblF6dEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJiRU03UlVGRVVUczdPenRIUVhaQ1lTeEZRVUZGTEVOQlFVTTdPMEZCTUVNMVFpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgSW1wb3J0Rm9ybSwgVXBsb2FkV2lkZ2V0LFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblVwbG9hZFdpZGdldCA9IHJlcXVpcmUoJy4uLy4uLy4uL2Jhc2Uvdmlld3MvdXBsb2FkL3VwbG9hZCcpO1xuXG5JbXBvcnRGb3JtID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEltcG9ydEZvcm0sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEltcG9ydEZvcm0oKSB7XG4gICAgdGhpcy5vbkZpbGVVcGxvYWQgPSBiaW5kKHRoaXMub25GaWxlVXBsb2FkLCB0aGlzKTtcbiAgICByZXR1cm4gSW1wb3J0Rm9ybS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEltcG9ydEZvcm0ucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvaW1wb3J0X2Zvcm0nKTtcblxuICBJbXBvcnRGb3JtLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY2FyZCBjYXJkLWJvZHknO1xuXG4gIEltcG9ydEZvcm0ucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBDYW5jZWxCdXR0b246IHt9LFxuICAgIFN1Ym1pdEJ1dHRvbjoge30sXG4gICAgRG93bmxvYWRGaWxlOiB7fSxcbiAgICBGbGFzaGVzOiB7XG4gICAgICBzdWNjZXNzOiB7XG4gICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgaW1wb3J0ZWQgS25vd2xlZGdlIENhcHR1cmUuJ1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBJbXBvcnRGb3JtLnByb3RvdHlwZS5yZWdpb25zID0ge1xuICAgIHVwbG9hZFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj11cGxvYWRdJ1xuICB9O1xuXG4gIEltcG9ydEZvcm0ucHJvdG90eXBlLm9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcignY2FuY2VsJyk7XG4gIH07XG5cbiAgSW1wb3J0Rm9ybS5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdXBsb2FkV2lkZ2V0O1xuICAgIHVwbG9hZFdpZGdldCA9IG5ldyBVcGxvYWRXaWRnZXQoKTtcbiAgICB1cGxvYWRXaWRnZXQub24oJ2ZpbGU6bG9hZGVkJywgdGhpcy5vbkZpbGVVcGxvYWQpO1xuICAgIHRoaXMudXBsb2FkUmVnaW9uLnNob3codXBsb2FkV2lkZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlU3VibWl0KCk7XG4gIH07XG5cbiAgSW1wb3J0Rm9ybS5wcm90b3R5cGUub25GaWxlVXBsb2FkID0gZnVuY3Rpb24odXBsb2FkZWRUZXh0KSB7XG4gICAgdGhpcy5pbXBvcnRlZFJ1bGVzID0gSlNPTi5wYXJzZSh1cGxvYWRlZFRleHQpO1xuICAgIHJldHVybiB0aGlzLmVuYWJsZVN1Ym1pdCgpO1xuICB9O1xuXG4gIEltcG9ydEZvcm0ucHJvdG90eXBlLm9uU3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZmV0Y2hLbm93bGVkZ2VSdWxlcygpLnRoZW4oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oa25vd2xlZGdlUnVsZUNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGJ1aWxkTmV3UnVsZSwgZGVmaW5pdGlvbiwgaSwgaiwgbGVuLCBsZW4xLCBvcmRlciwgcmVmLCByZWYxLCBydWxlO1xuICAgICAgICBvcmRlciA9IGtub3dsZWRnZVJ1bGVDb2xsZWN0aW9uLmxlbmd0aCArIDE7XG4gICAgICAgIHJlZiA9IF90aGlzLmltcG9ydGVkUnVsZXM7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHJ1bGUgPSByZWZbaV07XG4gICAgICAgICAgcnVsZS5kYXRhc2V0X2lkID0gX3RoaXMubW9kZWwuaWQ7XG4gICAgICAgICAgcnVsZS5vcmRlciA9IG9yZGVyO1xuICAgICAgICAgIG9yZGVyID0gb3JkZXIgKyAxO1xuICAgICAgICAgIHJ1bGUuaWQgPSBidWlsZFVuaXF1ZUlkKCdrbl8nKTtcbiAgICAgICAgICByZWYxID0gcnVsZS5kZWZpbml0aW9ucztcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24gPSByZWYxW2pdO1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5pZCA9IGJ1aWxkVW5pcXVlSWQoJ2NuXycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBidWlsZE5ld1J1bGUgPSBmdW5jdGlvbihydWxlKSB7XG4gICAgICAgICAgdmFyIGltcG9ydGVkUnVsZTtcbiAgICAgICAgICBpbXBvcnRlZFJ1bGUgPSBuZXcga25vd2xlZGdlUnVsZUNvbGxlY3Rpb24ubW9kZWwocnVsZSk7XG4gICAgICAgICAgcmV0dXJuIGltcG9ydGVkUnVsZS5zYXZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcm9taXNlLmVhY2goX3RoaXMuaW1wb3J0ZWRSdWxlcywgYnVpbGROZXdSdWxlKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGtub3dsZWRnZVJ1bGVDb2xsZWN0aW9uLmFkZChfdGhpcy5pbXBvcnRlZFJ1bGVzKTtcbiAgICAgICAgICBfdGhpcy5mbGFzaFN1Y2Nlc3MoKTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlcignc3VjY2VzcycpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBJbXBvcnRGb3JtO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbXBvcnRGb3JtO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdmFXMXdiM0owUm05eWJTNWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDIxdlpIVnNaWE12WkdGMFlYTmxkQzlyYm05M2JHVmtaMlZmWTJGd2RIVnlaUzkyYVdWM2N5OXBiWEJ2Y25SR2IzSnRMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxIZENRVUZCTzBWQlFVRTdPenM3UVVGQlFTeFpRVUZCTEVkQlFXVXNUMEZCUVN4RFFVRlJMRzFEUVVGU096dEJRVWxVT3pzN096czdPenQxUWtGRFNpeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMSGxDUVVGU096dDFRa0ZEVml4VFFVRkJMRWRCUVZjN08zVkNRVVZZTEZOQlFVRXNSMEZEUlR0SlFVRkJMRmxCUVVFc1JVRkJZeXhGUVVGa08wbEJRMEVzV1VGQlFTeEZRVUZqTEVWQlJHUTdTVUZGUVN4WlFVRkJMRVZCUVdNc1JVRkdaRHRKUVVkQkxFOUJRVUVzUlVGRFJUdE5RVUZCTEU5QlFVRXNSVUZEUlR0UlFVRkJMRTlCUVVFc1JVRkJWU3d3UTBGQlZqdFBRVVJHTzB0QlNrWTdPenQxUWtGUFJpeFBRVUZCTEVkQlEwVTdTVUZCUVN4WlFVRkJMRVZCUVdNc2MwSkJRV1E3T3p0MVFrRkZSaXhSUVVGQkxFZEJRVlVzVTBGQlFUdFhRVU5TTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1VVRkJWRHRGUVVSUk96dDFRa0ZIVml4UlFVRkJMRWRCUVZVc1UwRkJRVHRCUVVOU0xGRkJRVUU3U1VGQlFTeFpRVUZCTEVkQlFXVXNTVUZCU1N4WlFVRktMRU5CUVVFN1NVRkRaaXhaUVVGWkxFTkJRVU1zUlVGQllpeERRVUZuUWl4aFFVRm9RaXhGUVVFclFpeEpRVUZETEVOQlFVRXNXVUZCYUVNN1NVRkRRU3hKUVVGRExFTkJRVUVzV1VGQldTeERRVUZETEVsQlFXUXNRMEZCYlVJc1dVRkJia0k3VjBGRFFTeEpRVUZETEVOQlFVRXNZVUZCUkN4RFFVRkJPMFZCU2xFN08zVkNRVkZXTEZsQlFVRXNSMEZCWXl4VFFVRkRMRmxCUVVRN1NVRkhXaXhKUVVGRExFTkJRVUVzWVVGQlJDeEhRVUZwUWl4SlFVRkpMRU5CUVVNc1MwRkJUQ3hEUVVGWExGbEJRVmc3VjBGSGFrSXNTVUZCUXl4RFFVRkJMRmxCUVVRc1EwRkJRVHRGUVU1Wk96dDFRa0ZUWkN4UlFVRkJMRWRCUVZVc1UwRkJRVHRYUVVkU0xFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNiVUpCUVZBc1EwRkJRU3hEUVVFMFFpeERRVUZETEVsQlFUZENMRU5CUVd0RExFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4MVFrRkJSRHRCUVUxb1F5eFpRVUZCTzFGQlFVRXNTMEZCUVN4SFFVRlJMSFZDUVVGMVFpeERRVUZETEUxQlFYaENMRWRCUVdsRE8wRkJSM3BETzBGQlFVRXNZVUZCUVN4eFEwRkJRVHM3VlVGSFJTeEpRVUZKTEVOQlFVTXNWVUZCVEN4SFFVRnJRaXhMUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETzFWQlIzcENMRWxCUVVrc1EwRkJReXhMUVVGTUxFZEJRV0U3VlVGRFlpeExRVUZCTEVkQlFWRXNTMEZCUVN4SFFVRlJPMVZCUjJoQ0xFbEJRVWtzUTBGQlF5eEZRVUZNTEVkQlFWVXNZVUZCUVN4RFFVRmpMRXRCUVdRN1FVRkhWanRCUVVGQkxHVkJRVUVzZDBOQlFVRTdPMWxCUTBVc1ZVRkJWU3hEUVVGRExFVkJRVmdzUjBGQlowSXNZVUZCUVN4RFFVRmpMRXRCUVdRN1FVRkViRUk3UVVGaVJqdFJRVzlDUVN4WlFVRkJMRWRCUVdVc1UwRkJReXhKUVVGRU8wRkJSMklzWTBGQlFUdFZRVUZCTEZsQlFVRXNSMEZCWlN4SlFVRkpMSFZDUVVGMVFpeERRVUZETEV0QlFUVkNMRU5CUVd0RExFbEJRV3hETzBGQlIyWXNhVUpCUVU4c1dVRkJXU3hEUVVGRExFbEJRV0lzUTBGQlFUdFJRVTVOTzJWQlUyWXNUMEZCVHl4RFFVRkRMRWxCUVZJc1EwRkJZU3hMUVVGRExFTkJRVUVzWVVGQlpDeEZRVUUyUWl4WlFVRTNRaXhEUVVOQkxFTkJRVU1zU1VGRVJDeERRVU5OTEZOQlFVRTdWVUZIU2l4MVFrRkJkVUlzUTBGQlF5eEhRVUY0UWl4RFFVRTBRaXhMUVVGRExFTkJRVUVzWVVGQk4wSTdWVUZIUVN4TFFVRkRMRU5CUVVFc1dVRkJSQ3hEUVVGQk8ybENRVWRCTEV0QlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1UwRkJWRHRSUVZSSkxFTkJSRTQ3VFVGMFEyZERPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUZzUXp0RlFVaFJPenM3TzBkQmJrTmhMRVZCUVVVc1EwRkJRenM3UVVFd1JqVkNMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIEFwcGx5UnVsZXNWaWV3LCBFeHBvcnRGb3JtLCBJbXBvcnRGb3JtLCBSZXNldFJ1bGVzVmlldywgUnVsZUZvcm0sIFJ1bGVMYXlvdXQsIFJ1bGVMaXN0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuUnVsZUxpc3QgPSByZXF1aXJlKCcuL3J1bGVMaXN0Jyk7XG5cblJ1bGVGb3JtID0gcmVxdWlyZSgnLi9ydWxlRm9ybScpO1xuXG5FeHBvcnRGb3JtID0gcmVxdWlyZSgnLi9leHBvcnRGb3JtJyk7XG5cbkltcG9ydEZvcm0gPSByZXF1aXJlKCcuL2ltcG9ydEZvcm0nKTtcblxuQXBwbHlSdWxlc1ZpZXcgPSByZXF1aXJlKCcuL2FwcGx5UnVsZXMnKTtcblxuUmVzZXRSdWxlc1ZpZXcgPSByZXF1aXJlKCcuL3Jlc2V0UnVsZXMnKTtcblxuUnVsZUxheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSdWxlTGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlTGF5b3V0KCkge1xuICAgIHJldHVybiBSdWxlTGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NvbnRhaW5lci1mbHVpZCc7XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS51aSA9IHtcbiAgICBcImV4cG9ydFwiOiAnW2RhdGEtY2xpY2s9ZXhwb3J0XScsXG4gICAgXCJpbXBvcnRcIjogJ1tkYXRhLWNsaWNrPWltcG9ydF0nLFxuICAgIG5ld1J1bGU6ICdbZGF0YS1jbGljaz1uZXddJyxcbiAgICBhcHBseTogJ1tkYXRhLWNsaWNrPWFwcGx5XScsXG4gICAgcmVzZXQ6ICdbZGF0YS1jbGljaz1yZXNldF0nXG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayBAdWkuZXhwb3J0JzogJ3Nob3dFeHBvcnRGb3JtJyxcbiAgICAnY2xpY2sgQHVpLmltcG9ydCc6ICdzaG93SW1wb3J0Rm9ybScsXG4gICAgJ2NsaWNrIEB1aS5uZXdSdWxlJzogJ3Nob3dSdWxlRm9ybScsXG4gICAgJ2NsaWNrIEB1aS5hcHBseSc6ICdhcHBseVJ1bGVzJyxcbiAgICAnY2xpY2sgQHVpLnJlc2V0JzogJ3Jlc2V0RGF0YXNldCdcbiAgfTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5yZWdpb25zID0ge1xuICAgIGNvbnRlbnRSZWdpb246ICdbZGF0YS1yZWdpb249Y29udGVudF0nXG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zaG93UnVsZUxpc3QoKTtcbiAgfTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5mZXRjaFNvdXJjZU9wdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5tb2RlbC5mZXRjaEZhY2V0cygpLnRoZW4oZnVuY3Rpb24oZmFjZXRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGF0dHJzLCBsYWJlbHMsIHNvdXJjZU9wdGlvbnM7XG4gICAgICAgICAgYXR0cnMgPSBmYWNldENvbGxlY3Rpb24ucGx1Y2soJ2F0dHJpYnV0ZScpO1xuICAgICAgICAgIGxhYmVscyA9IGZhY2V0Q29sbGVjdGlvbi5wbHVjaygnbGFiZWwnKTtcbiAgICAgICAgICBzb3VyY2VPcHRpb25zID0gXy56aXAoYXR0cnMsIGxhYmVscyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoc291cmNlT3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuc2hvd1J1bGVMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJ1bGVMaXN0O1xuICAgIHJ1bGVMaXN0ID0gbmV3IFJ1bGVMaXN0KHtcbiAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgIH0pO1xuICAgIHJ1bGVMaXN0Lm9uKCdlZGl0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocnVsZU1vZGVsKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zaG93UnVsZUZvcm0ocnVsZU1vZGVsKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhydWxlTGlzdCk7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuYnVpbGROZXdSdWxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmFtcztcbiAgICBwYXJhbXMgPSB7XG4gICAgICBpZDogd2luZG93LmJ1aWxkVW5pcXVlSWQoJ2tuXycpLFxuICAgICAgb3JkZXI6IHRoaXMuY29sbGVjdGlvbi5sZW5ndGggKyAxLFxuICAgICAgZGF0YXNldF9pZDogdGhpcy5tb2RlbC5pZFxuICAgIH07XG4gICAgcmV0dXJuIG5ldyB0aGlzLmNvbGxlY3Rpb24ubW9kZWwocGFyYW1zKTtcbiAgfTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5zaG93UnVsZUZvcm0gPSBmdW5jdGlvbihtb2RlbCkge1xuICAgIHZhciBmb3JtTW9kZWw7XG4gICAgaWYgKG1vZGVsLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIG1vZGVsID0gbnVsbDtcbiAgICB9XG4gICAgZm9ybU1vZGVsID0gbW9kZWwgfHwgdGhpcy5idWlsZE5ld1J1bGUoKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFNvdXJjZU9wdGlvbnMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNvdXJjZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGZvcm1WaWV3O1xuICAgICAgICBmb3JtVmlldyA9IG5ldyBSdWxlRm9ybSh7XG4gICAgICAgICAgbW9kZWw6IGZvcm1Nb2RlbCxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBmb3JtTW9kZWwuZ2V0KCdkZWZpbml0aW9ucycpLFxuICAgICAgICAgIHNvdXJjZU9wdGlvbnM6IHNvdXJjZU9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIGZvcm1WaWV3Lm9uKCdjYW5jZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd1J1bGVMaXN0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3JtVmlldy5vbignc3luYycsIGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgICAgX3RoaXMuY29sbGVjdGlvbi5hZGQobW9kZWwpO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5zaG93UnVsZUxpc3QoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcy5jb250ZW50UmVnaW9uLnNob3coZm9ybVZpZXcpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuYXBwbHlSdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcHBseVZpZXc7XG4gICAgYXBwbHlWaWV3ID0gbmV3IEFwcGx5UnVsZXNWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgY29sbGVjdGlvbjogdGhpcy5jb2xsZWN0aW9uXG4gICAgfSk7XG4gICAgYXBwbHlWaWV3Lm9uKCdjYW5jZWwnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dSdWxlTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgYXBwbHlWaWV3Lm9uKCdzdWNjZXNzJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zaG93UnVsZUxpc3QoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhhcHBseVZpZXcpO1xuICB9O1xuXG4gIFJ1bGVMYXlvdXQucHJvdG90eXBlLnJlc2V0RGF0YXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXNldFZpZXc7XG4gICAgcmVzZXRWaWV3ID0gbmV3IFJlc2V0UnVsZXNWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgdGFyZ2V0X29iamVjdDogdGhpcy5jb2xsZWN0aW9uLnRhcmdldF9vYmplY3RcbiAgICB9KTtcbiAgICByZXNldFZpZXcub24oJ2NhbmNlbCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd1J1bGVMaXN0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXNldFZpZXcub24oJ3N1Y2Nlc3MnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dSdWxlTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFJlZ2lvbi5zaG93KHJlc2V0Vmlldyk7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuc2hvd0V4cG9ydEZvcm0gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXhwb3J0Rm9ybTtcbiAgICBleHBvcnRGb3JtID0gbmV3IEV4cG9ydEZvcm0oe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KTtcbiAgICBleHBvcnRGb3JtLm9uKCdjYW5jZWwnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dSdWxlTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgZXhwb3J0Rm9ybS5vbignc3VjY2VzcycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd1J1bGVMaXN0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UmVnaW9uLnNob3coZXhwb3J0Rm9ybSk7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuc2hvd0ltcG9ydEZvcm0gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW1wb3J0Rm9ybTtcbiAgICBpbXBvcnRGb3JtID0gbmV3IEltcG9ydEZvcm0oe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KTtcbiAgICBpbXBvcnRGb3JtLm9uKCdjYW5jZWwnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dSdWxlTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgaW1wb3J0Rm9ybS5vbignc3VjY2VzcycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd1J1bGVMaXN0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UmVnaW9uLnNob3coaW1wb3J0Rm9ybSk7XG4gIH07XG5cbiAgcmV0dXJuIFJ1bGVMYXlvdXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJ1bGVMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012YkdGNWIzVjBMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjMlYwTDJ0dWIzZHNaV1JuWlY5allYQjBkWEpsTDNacFpYZHpMMnhoZVc5MWRDNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNTVUZCUVN4elJrRkJRVHRGUVVGQk96czdRVUZCUVN4UlFVRkJMRWRCUVd0Q0xFOUJRVUVzUTBGQlVTeFpRVUZTT3p0QlFVTnNRaXhSUVVGQkxFZEJRV3RDTEU5QlFVRXNRMEZCVVN4WlFVRlNPenRCUVVOc1FpeFZRVUZCTEVkQlFXdENMRTlCUVVFc1EwRkJVU3hqUVVGU096dEJRVU5zUWl4VlFVRkJMRWRCUVd0Q0xFOUJRVUVzUTBGQlVTeGpRVUZTT3p0QlFVTnNRaXhqUVVGQkxFZEJRV3RDTEU5QlFVRXNRMEZCVVN4alFVRlNPenRCUVVOc1FpeGpRVUZCTEVkQlFXdENMRTlCUVVFc1EwRkJVU3hqUVVGU096dEJRVWxhT3pzN096czdPM1ZDUVVOS0xGTkJRVUVzUjBGQlZ6czdkVUpCUTFnc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTeHZRa0ZCVWpzN2RVSkJSVllzUlVGQlFTeEhRVU5GTzBsQlFVRXNRMEZCUVN4TlFVRkJMRU5CUVVFc1JVRkJWU3h4UWtGQlZqdEpRVU5CTEVOQlFVRXNUVUZCUVN4RFFVRkJMRVZCUVZVc2NVSkJSRlk3U1VGRlFTeFBRVUZCTEVWQlFWVXNhMEpCUmxZN1NVRkhRU3hMUVVGQkxFVkJRVlVzYjBKQlNGWTdTVUZKUVN4TFFVRkJMRVZCUVZVc2IwSkJTbFk3T3p0MVFrRk5SaXhOUVVGQkxFZEJRMFU3U1VGQlFTeHJRa0ZCUVN4RlFVRnpRaXhuUWtGQmRFSTdTVUZEUVN4clFrRkJRU3hGUVVGelFpeG5Ra0ZFZEVJN1NVRkZRU3h0UWtGQlFTeEZRVUZ6UWl4alFVWjBRanRKUVVkQkxHbENRVUZCTEVWQlFYTkNMRmxCU0hSQ08wbEJTVUVzYVVKQlFVRXNSVUZCYzBJc1kwRktkRUk3T3p0MVFrRk5SaXhQUVVGQkxFZEJRMFU3U1VGQlFTeGhRVUZCTEVWQlFXVXNkVUpCUVdZN096dDFRa0ZGUml4UlFVRkJMRWRCUVZVc1UwRkJRVHRYUVVOU0xFbEJRVU1zUTBGQlFTeFpRVUZFTEVOQlFVRTdSVUZFVVRzN2RVSkJUMVlzYTBKQlFVRXNSMEZCYjBJc1UwRkJRVHRCUVVkc1FpeFhRVUZQTEVsQlFVa3NUMEZCU2l4RFFVRlpMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eFBRVUZFTEVWQlFWVXNUVUZCVmp0bFFVZHFRaXhMUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEZkQlFWQXNRMEZCUVN4RFFVRnZRaXhEUVVGRExFbEJRWEpDTEVOQlFUQkNMRk5CUVVNc1pVRkJSRHRCUVVsNFFpeGpRVUZCTzFWQlFVRXNTMEZCUVN4SFFVRlJMR1ZCUVdVc1EwRkJReXhMUVVGb1FpeERRVUZ6UWl4WFFVRjBRanRWUVVOU0xFMUJRVUVzUjBGQlV5eGxRVUZsTEVOQlFVTXNTMEZCYUVJc1EwRkJjMElzVDBGQmRFSTdWVUZIVkN4aFFVRkJMRWRCUVdkQ0xFTkJRVU1zUTBGQlF5eEhRVUZHTEVOQlFVMHNTMEZCVGl4RlFVRmhMRTFCUVdJN1FVRkhhRUlzYVVKQlFVOHNUMEZCUVN4RFFVRlJMR0ZCUVZJN1VVRllhVUlzUTBGQk1VSTdUVUZJYVVJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFWbzdSVUZJVnpzN2RVSkJjVUp3UWl4WlFVRkJMRWRCUVdNc1UwRkJRVHRCUVVOYUxGRkJRVUU3U1VGQlFTeFJRVUZCTEVkQlFWY3NTVUZCU1N4UlFVRktMRU5CUVdFN1RVRkJSU3hWUVVGQkxFVkJRVmtzU1VGQlF5eERRVUZCTEZWQlFXWTdTMEZCWWp0SlFVTllMRkZCUVZFc1EwRkJReXhGUVVGVUxFTkJRVmtzVFVGQldpeEZRVUZ2UWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zVTBGQlJEdGxRVUZsTEV0QlFVTXNRMEZCUVN4WlFVRkVMRU5CUVdNc1UwRkJaRHROUVVGbU8wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRndRanRYUVVOQkxFbEJRVU1zUTBGQlFTeGhRVUZoTEVOQlFVTXNTVUZCWml4RFFVRnZRaXhSUVVGd1FqdEZRVWhaT3p0MVFrRlRaQ3haUVVGQkxFZEJRV01zVTBGQlFUdEJRVU5hTEZGQlFVRTdTVUZCUVN4TlFVRkJMRWRCUTBVN1RVRkJRU3hGUVVGQkxFVkJRVmtzVFVGQlRTeERRVUZETEdGQlFWQXNRMEZCY1VJc1MwRkJja0lzUTBGQldqdE5RVU5CTEV0QlFVRXNSVUZCV1N4SlFVRkRMRU5CUVVFc1ZVRkJWU3hEUVVGRExFMUJRVm9zUjBGQmNVSXNRMEZFYWtNN1RVRkZRU3hWUVVGQkxFVkJRVmtzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4RlFVWnVRanM3UVVGSlJpeFhRVUZQTEVsQlFVa3NTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhMUVVGb1FpeERRVUZ6UWl4TlFVRjBRanRGUVU1TE96dDFRa0ZYWkN4WlFVRkJMRWRCUVdNc1UwRkJReXhMUVVGRU8wRkJSMW9zVVVGQlFUdEpRVUZCTEVsQlFXZENMRXRCUVVzc1EwRkJReXhoUVVGMFFqdE5RVUZCTEV0QlFVRXNSMEZCVVN4TFFVRlNPenRKUVVkQkxGTkJRVUVzUjBGQldTeExRVUZCTEVsQlFWTXNTVUZCUXl4RFFVRkJMRmxCUVVRc1EwRkJRVHRYUVVkeVFpeEpRVUZETEVOQlFVRXNhMEpCUVVRc1EwRkJRU3hEUVVGeFFpeERRVUZETEVsQlFYUkNMRU5CUVRKQ0xFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4aFFVRkVPMEZCUjNwQ0xGbEJRVUU3VVVGQlFTeFJRVUZCTEVkQlFWY3NTVUZCU1N4UlFVRktMRU5CUVdFN1ZVRkJSU3hMUVVGQkxFVkJRVThzVTBGQlZEdFZRVUZ2UWl4VlFVRkJMRVZCUVZrc1UwRkJVeXhEUVVGRExFZEJRVllzUTBGQll5eGhRVUZrTEVOQlFXaERPMVZCUVRoRUxHRkJRVUVzUlVGQlpTeGhRVUUzUlR0VFFVRmlPMUZCUjFnc1VVRkJVU3hEUVVGRExFVkJRVlFzUTBGQldTeFJRVUZhTEVWQlFYTkNMRk5CUVVFN2FVSkJRVWNzUzBGQlF5eERRVUZCTEZsQlFVUXNRMEZCUVR0UlFVRklMRU5CUVhSQ08xRkJSMEVzVVVGQlVTeERRVUZETEVWQlFWUXNRMEZCV1N4TlFVRmFMRVZCUVc5Q0xGTkJRVU1zUzBGQlJEdFZRVWRzUWl4TFFVRkRMRU5CUVVFc1ZVRkJWU3hEUVVGRExFZEJRVm9zUTBGQlowSXNTMEZCYUVJN2FVSkJSMEVzUzBGQlF5eERRVUZCTEZsQlFVUXNRMEZCUVR0UlFVNXJRaXhEUVVGd1FqdGxRVk5CTEV0QlFVTXNRMEZCUVN4aFFVRmhMRU5CUVVNc1NVRkJaaXhEUVVGdlFpeFJRVUZ3UWp0TlFXeENlVUk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVROQ08wVkJWRms3TzNWQ1FTdENaQ3hWUVVGQkxFZEJRVmtzVTBGQlFUdEJRVU5XTEZGQlFVRTdTVUZCUVN4VFFVRkJMRWRCUVZrc1NVRkJTU3hqUVVGS0xFTkJRVzFDTzAxQlFVVXNTMEZCUVN4RlFVRlBMRWxCUVVNc1EwRkJRU3hMUVVGV08wMUJRV2xDTEZWQlFVRXNSVUZCV1N4SlFVRkRMRU5CUVVFc1ZVRkJPVUk3UzBGQmJrSTdTVUZEV2l4VFFVRlRMRU5CUVVNc1JVRkJWaXhEUVVGaExGRkJRV0lzUlVGQmRVSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk8yVkJRVWNzUzBGQlF5eERRVUZCTEZsQlFVUXNRMEZCUVR0TlFVRklPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUYyUWp0SlFVTkJMRk5CUVZNc1EwRkJReXhGUVVGV0xFTkJRV0VzVTBGQllpeEZRVUYzUWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVUU3WlVGQlJ5eExRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMDFCUVVnN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFYaENPMWRCUTBFc1NVRkJReXhEUVVGQkxHRkJRV0VzUTBGQlF5eEpRVUZtTEVOQlFXOUNMRk5CUVhCQ08wVkJTbFU3TzNWQ1FWRmFMRmxCUVVFc1IwRkJZeXhUUVVGQk8wRkJRMW9zVVVGQlFUdEpRVUZCTEZOQlFVRXNSMEZCV1N4SlFVRkpMR05CUVVvc1EwRkJiVUk3VFVGQlJTeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRXRCUVZZN1RVRkJhVUlzWVVGQlFTeEZRVUZsTEVsQlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1lVRkJOVU03UzBGQmJrSTdTVUZEV2l4VFFVRlRMRU5CUVVNc1JVRkJWaXhEUVVGaExGRkJRV0lzUlVGQmRVSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk8yVkJRVWNzUzBGQlF5eERRVUZCTEZsQlFVUXNRMEZCUVR0TlFVRklPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUYyUWp0SlFVTkJMRk5CUVZNc1EwRkJReXhGUVVGV0xFTkJRV0VzVTBGQllpeEZRVUYzUWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVUU3WlVGQlJ5eExRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMDFCUVVnN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFYaENPMWRCUTBFc1NVRkJReXhEUVVGQkxHRkJRV0VzUTBGQlF5eEpRVUZtTEVOQlFXOUNMRk5CUVhCQ08wVkJTbGs3TzNWQ1FWRmtMR05CUVVFc1IwRkJaMElzVTBGQlFUdEJRVU5rTEZGQlFVRTdTVUZCUVN4VlFVRkJMRWRCUVdFc1NVRkJTU3hWUVVGS0xFTkJRV1U3VFVGQlJTeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRXRCUVZZN1MwRkJaanRKUVVOaUxGVkJRVlVzUTBGQlF5eEZRVUZZTEVOQlFXTXNVVUZCWkN4RlFVRjNRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVRTdaVUZCUnl4TFFVRkRMRU5CUVVFc1dVRkJSQ3hEUVVGQk8wMUJRVWc3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVhoQ08wbEJRMEVzVlVGQlZTeERRVUZETEVWQlFWZ3NRMEZCWXl4VFFVRmtMRVZCUVhsQ0xFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUVR0bFFVRkhMRXRCUVVNc1EwRkJRU3haUVVGRUxFTkJRVUU3VFVGQlNEdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJla0k3VjBGRFFTeEpRVUZETEVOQlFVRXNZVUZCWVN4RFFVRkRMRWxCUVdZc1EwRkJiMElzVlVGQmNFSTdSVUZLWXpzN2RVSkJVV2hDTEdOQlFVRXNSMEZCWjBJc1UwRkJRVHRCUVVOa0xGRkJRVUU3U1VGQlFTeFZRVUZCTEVkQlFXRXNTVUZCU1N4VlFVRktMRU5CUVdVN1RVRkJSU3hMUVVGQkxFVkJRVThzU1VGQlF5eERRVUZCTEV0QlFWWTdTMEZCWmp0SlFVTmlMRlZCUVZVc1EwRkJReXhGUVVGWUxFTkJRV01zVVVGQlpDeEZRVUYzUWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVUU3WlVGQlJ5eExRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMDFCUVVnN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFYaENPMGxCUTBFc1ZVRkJWU3hEUVVGRExFVkJRVmdzUTBGQll5eFRRVUZrTEVWQlFYbENMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVUZITEV0QlFVTXNRMEZCUVN4WlFVRkVMRU5CUVVFN1RVRkJTRHRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCZWtJN1YwRkRRU3hKUVVGRExFTkJRVUVzWVVGQllTeERRVUZETEVsQlFXWXNRMEZCYjBJc1ZVRkJjRUk3UlVGS1l6czdPenRIUVRWSVR5eEZRVUZGTEVOQlFVTTdPMEZCYjBrMVFpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgUmVzZXRSdWxlc1ZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5SZXNldFJ1bGVzVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSZXNldFJ1bGVzVmlldywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUmVzZXRSdWxlc1ZpZXcoKSB7XG4gICAgcmV0dXJuIFJlc2V0UnVsZXNWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUmVzZXRSdWxlc1ZpZXcucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcmVzZXRfcnVsZXMnKTtcblxuICBSZXNldFJ1bGVzVmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBSZXNldFJ1bGVzVmlldy5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIENhbmNlbEJ1dHRvbjoge30sXG4gICAgQ29uZmlybWF0aW9uczoge1xuICAgICAgbWVzc2FnZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXNldCB0aGlzIGRhdGFzZXQ/JyxcbiAgICAgIGNvbmZpcm1JY29uOiAnZmEtcmVmcmVzaCcsXG4gICAgICBjb25maXJtVGV4dDogJ1JFU0VUJyxcbiAgICAgIGNvbmZpcm1Dc3M6ICdidG4tZGFuZ2VyJ1xuICAgIH0sXG4gICAgRmxhc2hlczoge1xuICAgICAgc3VjY2Vzczoge1xuICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHJlc2V0IGRhdGFzZXQuJ1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBSZXNldFJ1bGVzVmlldy5wcm90b3R5cGUudWkgPSB7XG4gICAgY29uZmlybWF0aW9uVHJpZ2dlcjogJ1tkYXRhLWNsaWNrPXN1Ym1pdF0nXG4gIH07XG5cbiAgUmVzZXRSdWxlc1ZpZXcucHJvdG90eXBlLm9uQ2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcignY2FuY2VsJyk7XG4gIH07XG5cbiAgUmVzZXRSdWxlc1ZpZXcucHJvdG90eXBlLm9uQ29uZmlybWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZmV0Y2hEYXRhcG9pbnRzKCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhcG9pbnRzKSB7XG4gICAgICAgIHJldHVybiBkYXRhcG9pbnRzLnJlc2V0VGFyZ2V0T2JqZWN0KF90aGlzLm9wdGlvbnMudGFyZ2V0X29iamVjdCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMubW9kZWwucmVnZW5lcmF0ZUZhY2V0cygpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdsb2FkaW5nJykudHJpZ2dlcignaGlkZScpO1xuICAgICAgICAgICAgX3RoaXMuZmxhc2hTdWNjZXNzKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlcignc3VjY2VzcycpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBSZXNldFJ1bGVzVmlldztcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVzZXRSdWxlc1ZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmEyNXZkMnhsWkdkbFgyTmhjSFIxY21VdmRtbGxkM012Y21WelpYUlNkV3hsY3k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOXJibTkzYkdWa1oyVmZZMkZ3ZEhWeVpTOTJhV1YzY3k5eVpYTmxkRkoxYkdWekxtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRlFTeEpRVUZCTEdOQlFVRTdSVUZCUVRzN08wRkJRVTA3T3pzN096czdNa0pCUTBvc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTeDVRa0ZCVWpzN01rSkJRMVlzVTBGQlFTeEhRVUZYT3pzeVFrRkZXQ3hUUVVGQkxFZEJRMFU3U1VGQlFTeFpRVUZCTEVWQlFXTXNSVUZCWkR0SlFVVkJMR0ZCUVVFc1JVRkRSVHROUVVGQkxFOUJRVUVzUlVGQll5dzRRMEZCWkR0TlFVTkJMRmRCUVVFc1JVRkJZeXhaUVVSa08wMUJSVUVzVjBGQlFTeEZRVUZqTEU5QlJtUTdUVUZIUVN4VlFVRkJMRVZCUVdNc1dVRklaRHRMUVVoR08wbEJVVUVzVDBGQlFTeEZRVU5GTzAxQlFVRXNUMEZCUVN4RlFVTkZPMUZCUVVFc1QwRkJRU3hGUVVGVkxEWkNRVUZXTzA5QlJFWTdTMEZVUmpzN096SkNRVmxHTEVWQlFVRXNSMEZEUlR0SlFVRkJMRzFDUVVGQkxFVkJRWE5DTEhGQ1FVRjBRanM3T3pKQ1FVVkdMRkZCUVVFc1IwRkJWU3hUUVVGQk8xZEJRMUlzU1VGQlF5eERRVUZCTEU5QlFVUXNRMEZCVXl4UlFVRlVPMFZCUkZFN096SkNRVWRXTEZkQlFVRXNSMEZCWVN4VFFVRkJPMWRCUTFnc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eGxRVUZRTEVOQlFVRXNRMEZCZDBJc1EwRkJReXhKUVVGNlFpeERRVUU0UWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zVlVGQlJEdGxRVVUxUWl4VlFVRlZMRU5CUVVNc2FVSkJRVmdzUTBGQk5rSXNTMEZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhoUVVGMFF5eERRVUZ2UkN4RFFVRkRMRWxCUVhKRUxFTkJRVEJFTEZOQlFVRTdhVUpCUlhoRUxFdEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNaMEpCUVZBc1EwRkJRU3hEUVVGNVFpeERRVUZETEVsQlFURkNMRU5CUVN0Q0xGTkJRVUU3V1VGSE4wSXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZOQlFYWkNMRU5CUVdsRExFTkJRVU1zVDBGQmJFTXNRMEZCTUVNc1RVRkJNVU03V1VGSFFTeExRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMjFDUVVkQkxFdEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNVMEZCVkR0VlFWUTJRaXhEUVVFdlFqdFJRVVozUkN4RFFVRXhSRHROUVVZMFFqdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJPVUk3UlVGRVZ6czdPenRIUVhaQ1l5eEZRVUZGTEVOQlFVTTdPMEZCZVVOb1F5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgRGVmaW5pdGlvbkZvcm0sIERlZmluaXRpb25MaXN0LCBPbnRvbG9neVNlbGVjdG9yLCBSdWxlRm9ybSxcbiAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5EZWZpbml0aW9uRm9ybSA9IHJlcXVpcmUoJy4vZGVmaW5pdGlvbkZvcm0nKTtcblxuRGVmaW5pdGlvbkxpc3QgPSByZXF1aXJlKCcuL2RlZmluaXRpb25MaXN0Jyk7XG5cbk9udG9sb2d5U2VsZWN0b3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lTZWxlY3Rvciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lTZWxlY3RvcigpIHtcbiAgICB0aGlzLmluaXRBdHRyaWJ1dGVTZWxlY3RvciA9IGJpbmQodGhpcy5pbml0QXR0cmlidXRlU2VsZWN0b3IsIHRoaXMpO1xuICAgIHJldHVybiBPbnRvbG9neVNlbGVjdG9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgT250b2xvZ3lTZWxlY3Rvci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgT250b2xvZ3lTZWxlY3Rvci5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9vbnRvbG9neV9hdHRyaWJ1dGVfc2VsZWN0b3InKTtcblxuICBPbnRvbG9neVNlbGVjdG9yLnByb3RvdHlwZS51aSA9IHtcbiAgICBhdHRyaWJ1dGVTZWxlY3RvcjogJ1tuYW1lPXRhcmdldF9wcm9wZXJ0eV0nXG4gIH07XG5cbiAgT250b2xvZ3lTZWxlY3Rvci5wcm90b3R5cGUudGVtcGxhdGVIZWxwZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRyb3Bkb3duOiB0aGlzLm9wdGlvbnMuZHJvcGRvd25cbiAgICB9O1xuICB9O1xuXG4gIE9udG9sb2d5U2VsZWN0b3IucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgQmFja2JvbmUuU3lwaG9uLmRlc2VyaWFsaXplKHRoaXMsIHRoaXMubW9kZWwuYXR0cmlidXRlcyk7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQodGhpcy5pbml0QXR0cmlidXRlU2VsZWN0b3IsIDIwMCk7XG4gIH07XG5cbiAgT250b2xvZ3lTZWxlY3Rvci5wcm90b3R5cGUuaW5pdEF0dHJpYnV0ZVNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudWkuYXR0cmlidXRlU2VsZWN0b3Iuc2VsZWN0Mih7XG4gICAgICBwbGFjZWhvbGRlcjogJ1RhcmdldCBBdHRyaWJ1dGUnXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIE9udG9sb2d5U2VsZWN0b3I7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5SdWxlRm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSdWxlRm9ybSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUnVsZUZvcm0oKSB7XG4gICAgcmV0dXJuIFJ1bGVGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3J1bGVfZm9ybScpO1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgQ2FuY2VsQnV0dG9uOiB7fSxcbiAgICBTdWJtaXRCdXR0b246IHt9LFxuICAgIE1vZGVsRXZlbnRzOiB7fVxuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS51aSA9IHtcbiAgICBhZGREZWZpbml0aW9uOiAnW2RhdGEtY2xpY2s9YWRkXSdcbiAgfTtcblxuICBSdWxlRm9ybS5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayBAdWkuYWRkRGVmaW5pdGlvbic6ICdhZGREZWZpbml0aW9uJ1xuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5yZWdpb25zID0ge1xuICAgIG9udG9sb2d5U2VsZWN0b3I6ICdbZGF0YS1yZWdpb249b250b2xvZ3ktc2VsZWN0b3JdJyxcbiAgICBkZWZpbml0aW9uc1JlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1kZWZpbml0aW9uc10nXG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLmFkZFRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKGRlZmluaXRpb25Nb2RlbCkge1xuICAgIHRoaXMuY29sbGVjdGlvbi5hZGQoZGVmaW5pdGlvbk1vZGVsKTtcbiAgICByZXR1cm4gdGhpcy5zaG93RGVmaW5pdGlvbkxpc3QoKTtcbiAgfTtcblxuICBSdWxlRm9ybS5wcm90b3R5cGUuc2hvd09udG9sb2d5QXR0cmlidXRlU2VsZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnb250b2xvZ3knKS5yZXF1ZXN0KCdhdHRyaWJ1dGU6ZHJvcGRvd24nKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRyb3Bkb3duKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5vbnRvbG9neVNlbGVjdG9yLnNob3cobmV3IE9udG9sb2d5U2VsZWN0b3Ioe1xuICAgICAgICAgIG1vZGVsOiBfdGhpcy5tb2RlbCxcbiAgICAgICAgICBkcm9wZG93bjogZHJvcGRvd25cbiAgICAgICAgfSkpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLmFkZERlZmluaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmaW5pdGlvbkZvcm0sIG5ld0RlZmluaXRpb247XG4gICAgbmV3RGVmaW5pdGlvbiA9IG5ldyB0aGlzLmNvbGxlY3Rpb24ubW9kZWwoe1xuICAgICAgaWQ6IGJ1aWxkVW5pcXVlSWQoJ2NuXycpLFxuICAgICAgb3JkZXI6IHRoaXMuY29sbGVjdGlvbi5sZW5ndGggKyAxXG4gICAgfSk7XG4gICAgZGVmaW5pdGlvbkZvcm0gPSBuZXcgRGVmaW5pdGlvbkZvcm0oe1xuICAgICAgbW9kZWw6IG5ld0RlZmluaXRpb24sXG4gICAgICBpc05ldzogdHJ1ZSxcbiAgICAgIHNvdXJjZU9wdGlvbnM6IHRoaXMub3B0aW9ucy5zb3VyY2VPcHRpb25zXG4gICAgfSk7XG4gICAgZGVmaW5pdGlvbkZvcm0ub24oJ2NhbmNlbCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0RlZmluaXRpb25MaXN0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICBkZWZpbml0aW9uRm9ybS5vbignc3VibWl0JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuYWRkVG9Db2xsZWN0aW9uKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbnNSZWdpb24uc2hvdyhkZWZpbml0aW9uRm9ybSk7XG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLmVkaXREZWZpbml0aW9uID0gZnVuY3Rpb24oZGVmaW5pdGlvbk1vZGVsKSB7XG4gICAgdmFyIGRlZmluaXRpb25Gb3JtO1xuICAgIGRlZmluaXRpb25Gb3JtID0gbmV3IERlZmluaXRpb25Gb3JtKHtcbiAgICAgIG1vZGVsOiBkZWZpbml0aW9uTW9kZWwsXG4gICAgICBzb3VyY2VPcHRpb25zOiB0aGlzLm9wdGlvbnMuc291cmNlT3B0aW9uc1xuICAgIH0pO1xuICAgIGRlZmluaXRpb25Gb3JtLm9uKCdjYW5jZWwnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dEZWZpbml0aW9uTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgZGVmaW5pdGlvbkZvcm0ub24oJ3N1Ym1pdCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dEZWZpbml0aW9uTGlzdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbnNSZWdpb24uc2hvdyhkZWZpbml0aW9uRm9ybSk7XG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLnNob3dEZWZpbml0aW9uTGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZpbml0aW9uTGlzdDtcbiAgICBkZWZpbml0aW9uTGlzdCA9IG5ldyBEZWZpbml0aW9uTGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb24sXG4gICAgICBoZWFkZXI6IHRydWVcbiAgICB9KTtcbiAgICBkZWZpbml0aW9uTGlzdC5vbignZWRpdDpkZWZpbml0aW9uJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZGVmaW5pdGlvbk1vZGVsKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5lZGl0RGVmaW5pdGlvbihkZWZpbml0aW9uTW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbnNSZWdpb24uc2hvdyhkZWZpbml0aW9uTGlzdCk7XG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgQmFja2JvbmUuU3lwaG9uLmRlc2VyaWFsaXplKHRoaXMsIHRoaXMubW9kZWwuYXR0cmlidXRlcyk7XG4gICAgdGhpcy5zaG93RGVmaW5pdGlvbkxpc3QoKTtcbiAgICByZXR1cm4gdGhpcy5zaG93T250b2xvZ3lBdHRyaWJ1dGVTZWxlY3RvcigpO1xuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5vbkNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ2NhbmNlbCcpO1xuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5vblN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhO1xuICAgIGRhdGEgPSBCYWNrYm9uZS5TeXBob24uc2VyaWFsaXplKHRoaXMpO1xuICAgIHRoaXMuY29sbGVjdGlvbi5zb3J0KCk7XG4gICAgdGhpcy5tb2RlbC5zZXQoZGF0YSk7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuc2F2ZSgpO1xuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5vblJlcXVlc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY29uc29sZS5sb2coJ29uUmVxdWVzdCcpO1xuICB9O1xuXG4gIFJ1bGVGb3JtLnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyKCdzeW5jJywgdGhpcy5tb2RlbCk7XG4gIH07XG5cbiAgUnVsZUZvcm0ucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY29uc29sZS5sb2coJ29uRXJyb3InKTtcbiAgfTtcblxuICByZXR1cm4gUnVsZUZvcm07XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJ1bGVGb3JtO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdmNuVnNaVVp2Y20wdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdmNuVnNaVVp2Y20wdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVOQkxFbEJRVUVzTUVSQlFVRTdSVUZCUVRzN096dEJRVUZCTEdOQlFVRXNSMEZCYVVJc1QwRkJRU3hEUVVGUkxHdENRVUZTT3p0QlFVTnFRaXhqUVVGQkxFZEJRV2xDTEU5QlFVRXNRMEZCVVN4clFrRkJVanM3UVVGTldEczdPenM3T3pzN05rSkJRMG9zVTBGQlFTeEhRVUZYT3pzMlFrRkRXQ3hSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEhsRFFVRlNPenMyUWtGRlZpeEZRVUZCTEVkQlEwVTdTVUZCUVN4cFFrRkJRU3hGUVVGdFFpeDNRa0ZCYmtJN096czJRa0ZGUml4bFFVRkJMRWRCUVdsQ0xGTkJRVUU3UVVGRFppeFhRVUZQTzAxQlFVVXNVVUZCUVN4RlFVRlZMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU1zVVVGQmNrSTdPMFZCUkZFN096WkNRVWRxUWl4UlFVRkJMRWRCUVZVc1UwRkJRVHRKUVVOU0xGRkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCYUVJc1EwRkJORUlzU1VGQk5VSXNSVUZCSzBJc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eFZRVUYwUXp0WFFVTkJMRlZCUVVFc1EwRkJWeXhKUVVGRExFTkJRVUVzY1VKQlFWb3NSVUZCYlVNc1IwRkJia003UlVGR1VUczdOa0pCU1ZZc2NVSkJRVUVzUjBGQmRVSXNVMEZCUVR0WFFVTnlRaXhKUVVGRExFTkJRVUVzUlVGQlJTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFOUJRWFJDTEVOQlFUaENPMDFCUVVVc1YwRkJRU3hGUVVGaExHdENRVUZtTzB0QlFUbENPMFZCUkhGQ096czdPMGRCWkUwc1JVRkJSU3hEUVVGRE96dEJRWEZDTlVJN096czdPenM3Y1VKQlEwb3NVMEZCUVN4SFFVRlhPenR4UWtGRFdDeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMSFZDUVVGU096dHhRa0ZGVml4VFFVRkJMRWRCUTBVN1NVRkJRU3haUVVGQkxFVkJRV01zUlVGQlpEdEpRVU5CTEZsQlFVRXNSVUZCWXl4RlFVUmtPMGxCUlVFc1YwRkJRU3hGUVVGaExFVkJSbUk3T3p0eFFrRkpSaXhGUVVGQkxFZEJRMFU3U1VGQlFTeGhRVUZCTEVWQlFXVXNhMEpCUVdZN096dHhRa0ZGUml4TlFVRkJMRWRCUTBVN1NVRkJRU3g1UWtGQlFTeEZRVUV5UWl4bFFVRXpRanM3TzNGQ1FVVkdMRTlCUVVFc1IwRkRSVHRKUVVGQkxHZENRVUZCTEVWQlFXOUNMR2xEUVVGd1FqdEpRVU5CTEdsQ1FVRkJMRVZCUVc5Q0xESkNRVVJ3UWpzN08zRkNRVWRHTEdWQlFVRXNSMEZCYVVJc1UwRkJReXhsUVVGRU8wbEJRMllzU1VGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4SFFVRmFMRU5CUVdkQ0xHVkJRV2hDTzFkQlEwRXNTVUZCUXl4RFFVRkJMR3RDUVVGRUxFTkJRVUU3UlVGR1pUczdjVUpCU1dwQ0xEWkNRVUZCTEVkQlFTdENMRk5CUVVFN1YwRkROMElzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGVkJRWFpDTEVOQlFXdERMRU5CUVVNc1QwRkJia01zUTBGQk1rTXNiMEpCUVRORExFTkJRV2RGTEVOQlFVTXNTVUZCYWtVc1EwRkJjMFVzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRkZCUVVRN1pVRkRjRVVzUzBGQlF5eERRVUZCTEdkQ1FVRm5RaXhEUVVGRExFbEJRV3hDTEVOQlFYVkNMRWxCUVVrc1owSkJRVW9zUTBGQmNVSTdWVUZCUlN4TFFVRkJMRVZCUVU4c1MwRkJReXhEUVVGQkxFdEJRVlk3VlVGQmFVSXNVVUZCUVN4RlFVRlZMRkZCUVROQ08xTkJRWEpDTEVOQlFYWkNPMDFCUkc5Rk8wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRjBSVHRGUVVRMlFqczdjVUpCU1M5Q0xHRkJRVUVzUjBGQlpTeFRRVUZCTzBGQlIySXNVVUZCUVR0SlFVRkJMR0ZCUVVFc1IwRkJaMElzU1VGQlNTeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRXRCUVdoQ0xFTkJRWE5DTzAxQlFVVXNSVUZCUVN4RlFVRkpMR0ZCUVVFc1EwRkJZeXhMUVVGa0xFTkJRVTQ3VFVGQk5FSXNTMEZCUVN4RlFVRlBMRWxCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zVFVGQldpeEhRVUZ4UWl4RFFVRjRSRHRMUVVGMFFqdEpRVWRvUWl4alFVRkJMRWRCUVdsQ0xFbEJRVWtzWTBGQlNpeERRVUZ0UWp0TlFVRkZMRXRCUVVFc1JVRkJUeXhoUVVGVU8wMUJRWGRDTEV0QlFVRXNSVUZCVHl4SlFVRXZRanROUVVGeFF5eGhRVUZCTEVWQlFXVXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhoUVVFM1JEdExRVUZ1UWp0SlFVZHFRaXhqUVVGakxFTkJRVU1zUlVGQlppeERRVUZyUWl4UlFVRnNRaXhGUVVFMFFpeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVFN1pVRkJSeXhMUVVGRExFTkJRVUVzYTBKQlFVUXNRMEZCUVR0TlFVRklPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUUxUWp0SlFVZEJMR05CUVdNc1EwRkJReXhGUVVGbUxFTkJRV3RDTEZGQlFXeENMRVZCUVRSQ0xFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4SlFVRkVPMlZCUVZVc1MwRkJReXhEUVVGQkxHVkJRVVFzUTBGQmFVSXNTVUZCU1N4RFFVRkRMRXRCUVhSQ08wMUJRVlk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVRWQ08xZEJSMEVzU1VGQlF5eERRVUZCTEdsQ1FVRnBRaXhEUVVGRExFbEJRVzVDTEVOQlFYZENMR05CUVhoQ08wVkJabUU3TzNGQ1FXbENaaXhqUVVGQkxFZEJRV2RDTEZOQlFVTXNaVUZCUkR0QlFVZGtMRkZCUVVFN1NVRkJRU3hqUVVGQkxFZEJRV2xDTEVsQlFVa3NZMEZCU2l4RFFVRnRRanROUVVGRkxFdEJRVUVzUlVGQlR5eGxRVUZVTzAxQlFUQkNMR0ZCUVVFc1JVRkJaU3hKUVVGRExFTkJRVUVzVDBGQlR5eERRVUZETEdGQlFXeEVPMHRCUVc1Q08wbEJSMnBDTEdOQlFXTXNRMEZCUXl4RlFVRm1MRU5CUVd0Q0xGRkJRV3hDTEVWQlFUUkNMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVUZITEV0QlFVTXNRMEZCUVN4clFrRkJSQ3hEUVVGQk8wMUJRVWc3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVRWQ08wbEJSMEVzWTBGQll5eERRVUZETEVWQlFXWXNRMEZCYTBJc1VVRkJiRUlzUlVGQk5FSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFbEJRVVE3WlVGQlZTeExRVUZETEVOQlFVRXNhMEpCUVVRc1EwRkJRVHROUVVGV08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRTFRanRYUVVkQkxFbEJRVU1zUTBGQlFTeHBRa0ZCYVVJc1EwRkJReXhKUVVGdVFpeERRVUYzUWl4alFVRjRRanRGUVZwak96dHhRa0ZqYUVJc2EwSkJRVUVzUjBGQmIwSXNVMEZCUVR0QlFVTnNRaXhSUVVGQk8wbEJRVUVzWTBGQlFTeEhRVUZwUWl4SlFVRkpMR05CUVVvc1EwRkJiVUk3VFVGQlJTeFZRVUZCTEVWQlFWa3NTVUZCUXl4RFFVRkJMRlZCUVdZN1RVRkJNa0lzVFVGQlFTeEZRVUZSTEVsQlFXNURPMHRCUVc1Q08wbEJRMnBDTEdOQlFXTXNRMEZCUXl4RlFVRm1MRU5CUVd0Q0xHbENRVUZzUWl4RlFVRnhReXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNaVUZCUkR0QlFVRnhRaXhsUVVGUExFdEJRVU1zUTBGQlFTeGpRVUZFTEVOQlFXZENMR1ZCUVdoQ08wMUJRVFZDTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGeVF6dFhRVWRCTEVsQlFVTXNRMEZCUVN4cFFrRkJhVUlzUTBGQlF5eEpRVUZ1UWl4RFFVRjNRaXhqUVVGNFFqdEZRVXhyUWpzN2NVSkJUM0JDTEZGQlFVRXNSMEZCVlN4VFFVRkJPMGxCUTFJc1VVRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF5eFhRVUZvUWl4RFFVRTJRaXhKUVVFM1FpeEZRVUZuUXl4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExGVkJRWFpETzBsQlEwRXNTVUZCUXl4RFFVRkJMR3RDUVVGRUxFTkJRVUU3VjBGRFFTeEpRVUZETEVOQlFVRXNOa0pCUVVRc1EwRkJRVHRGUVVoUk96dHhRa0ZMVml4UlFVRkJMRWRCUVZVc1UwRkJRVHRYUVVOU0xFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNVVUZCVkR0RlFVUlJPenR4UWtGSFZpeFJRVUZCTEVkQlFWVXNVMEZCUVR0QlFVTlNMRkZCUVVFN1NVRkJRU3hKUVVGQkxFZEJRVThzVVVGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4VFFVRm9RaXhEUVVFd1FpeEpRVUV4UWp0SlFVTlFMRWxCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zU1VGQldpeERRVUZCTzBsQlEwRXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzU1VGQldEdFhRVU5CTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1NVRkJVQ3hEUVVGQk8wVkJTbEU3TzNGQ1FVMVdMRk5CUVVFc1IwRkJWeXhUUVVGQk8xZEJRMVFzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4WFFVRmFPMFZCUkZNN08zRkNRVWRZTEUxQlFVRXNSMEZCVVN4VFFVRkJPMWRCUTA0c1NVRkJReXhEUVVGQkxFOUJRVVFzUTBGQlV5eE5RVUZVTEVWQlFXbENMRWxCUVVNc1EwRkJRU3hMUVVGc1FqdEZRVVJOT3p0eFFrRkhVaXhQUVVGQkxFZEJRVk1zVTBGQlFUdFhRVU5RTEU5QlFVOHNRMEZCUXl4SFFVRlNMRU5CUVZrc1UwRkJXanRGUVVSUE96czdPMGRCY2taWkxFVkJRVVVzUTBGQlF6czdRVUV3UmpGQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgUnVsZUNoaWxkLCBSdWxlRW1wdHksIFJ1bGVMYXlvdXQsIFJ1bGVMaXN0LCBSdWxlVmlld2VyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuUnVsZVZpZXdlciA9IHJlcXVpcmUoJy4vcnVsZVZpZXdlcicpO1xuXG5SdWxlRW1wdHkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoUnVsZUVtcHR5LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlRW1wdHkoKSB7XG4gICAgcmV0dXJuIFJ1bGVFbXB0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFJ1bGVFbXB0eS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9ydWxlX2VtcHR5Jyk7XG5cbiAgUnVsZUVtcHR5LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtIGxpc3QtZ3JvdXAtaXRlbS13YXJuaW5nJztcblxuICByZXR1cm4gUnVsZUVtcHR5O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuUnVsZUNoaWxkID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJ1bGVDaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUnVsZUNoaWxkKCkge1xuICAgIHJldHVybiBSdWxlQ2hpbGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSdWxlQ2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcnVsZV9jaGlsZCcpO1xuXG4gIFJ1bGVDaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAtaXRlbSc7XG5cbiAgUnVsZUNoaWxkLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgU2VsZWN0YWJsZUNoaWxkOiB7fSxcbiAgICBTb3J0YWJsZUNoaWxkOiB7fSxcbiAgICBUb29sdGlwczoge31cbiAgfTtcblxuICBSdWxlQ2hpbGQucHJvdG90eXBlLm1vZGVsRXZlbnRzID0ge1xuICAgICdjaGFuZ2U6b3JkZXInOiAnb25SZW9yZGVyZWQnLFxuICAgICdzeW5jJzogJ29uU3luYydcbiAgfTtcblxuICBSdWxlQ2hpbGQucHJvdG90eXBlLm9uUmVvcmRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuc2F2ZSgpO1xuICB9O1xuXG4gIFJ1bGVDaGlsZC5wcm90b3R5cGUub25TeW5jID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgcmV0dXJuIFJ1bGVDaGlsZDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cblJ1bGVMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJ1bGVMaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlTGlzdCgpIHtcbiAgICByZXR1cm4gUnVsZUxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSdWxlTGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAnO1xuXG4gIFJ1bGVMaXN0LnByb3RvdHlwZS5jaGlsZFZpZXcgPSBSdWxlQ2hpbGQ7XG5cbiAgUnVsZUxpc3QucHJvdG90eXBlLmVtcHR5VmlldyA9IFJ1bGVFbXB0eTtcblxuICBSdWxlTGlzdC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIFNvcnRhYmxlTGlzdDoge31cbiAgfTtcblxuICBSdWxlTGlzdC5wcm90b3R5cGUuY29sbGVjdGlvbkV2ZW50cyA9IHtcbiAgICAncmVtb3ZlJzogJ29uQ29sbGVjdGlvblJlbW92ZSdcbiAgfTtcblxuICBSdWxlTGlzdC5wcm90b3R5cGUub25Db2xsZWN0aW9uUmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlZjtcbiAgICBzZXRUaW1lb3V0KHRoaXMucmVvcmRlckNvbGxlY3Rpb24sIDI1MCk7XG4gICAgcmV0dXJuIChyZWYgPSB0aGlzLmNvbGxlY3Rpb24uYXQoMCkpICE9IG51bGwgPyByZWYudHJpZ2dlcignc2VsZWN0ZWQnKSA6IHZvaWQgMDtcbiAgfTtcblxuICByZXR1cm4gUnVsZUxpc3Q7XG5cbn0pKE1uLkNvbGxlY3Rpb25WaWV3KTtcblxuUnVsZUxheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSdWxlTGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlTGF5b3V0KCkge1xuICAgIHJldHVybiBSdWxlTGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9ydWxlX2xpc3RfbGF5b3V0Jyk7XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBsaXN0UmVnaW9uOiAnW2RhdGEtcmVnaW9uPWxpc3RdJyxcbiAgICBkZXRhaWxSZWdpb246ICdbZGF0YS1yZWdpb249ZGV0YWlsXSdcbiAgfTtcblxuICBSdWxlTGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaXN0VmlldywgcmVmO1xuICAgIGxpc3RWaWV3ID0gbmV3IFJ1bGVMaXN0KHtcbiAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgIH0pO1xuICAgIHdpbmRvdy5saXN0VmlldyA9IGxpc3RWaWV3O1xuICAgIGxpc3RWaWV3Lm9uKCdjaGlsZHZpZXc6c2VsZWN0ZWQnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zaG93RGV0YWlsKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgdGhpcy5saXN0UmVnaW9uLnNob3cobGlzdFZpZXcpO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5jb2xsZWN0aW9uLmF0KDApKSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgUnVsZUxheW91dC5wcm90b3R5cGUuc2hvd0RldGFpbCA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgdmFyIHJ1bGVWaWV3ZXI7XG4gICAgcnVsZVZpZXdlciA9IG5ldyBSdWxlVmlld2VyKHtcbiAgICAgIG1vZGVsOiBtb2RlbFxuICAgIH0pO1xuICAgIHJ1bGVWaWV3ZXIub24oJ2VkaXQnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdlZGl0Jywgdmlldy5tb2RlbCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcy5kZXRhaWxSZWdpb24uc2hvdyhydWxlVmlld2VyKTtcbiAgfTtcblxuICByZXR1cm4gUnVsZUxheW91dDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUnVsZUxheW91dDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZjblZzWlV4cGMzUXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YTI1dmQyeGxaR2RsWDJOaGNIUjFjbVV2ZG1sbGQzTXZjblZzWlV4cGMzUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVTkJMRWxCUVVFc2MwUkJRVUU3UlVGQlFUczdPMEZCUVVFc1ZVRkJRU3hIUVVGaExFOUJRVUVzUTBGQlVTeGpRVUZTT3p0QlFVbFFPenM3T3pzN08zTkNRVU5LTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc2QwSkJRVkk3TzNOQ1FVTldMRk5CUVVFc1IwRkJWenM3T3p0SFFVWlhMRVZCUVVVc1EwRkJRenM3UVVGTmNrSTdPenM3T3pzN2MwSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4M1FrRkJVanM3YzBKQlExWXNVMEZCUVN4SFFVRlhPenR6UWtGRldDeFRRVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVdsQ0xFVkJRV3BDTzBsQlEwRXNZVUZCUVN4RlFVRmxMRVZCUkdZN1NVRkZRU3hSUVVGQkxFVkJRVlVzUlVGR1ZqczdPM05DUVVsR0xGZEJRVUVzUjBGRFJUdEpRVUZCTEdOQlFVRXNSVUZCWjBJc1lVRkJhRUk3U1VGRFFTeE5RVUZCTEVWQlFXZENMRkZCUkdoQ096czdjMEpCUjBZc1YwRkJRU3hIUVVGaExGTkJRVUU3VjBGRFdDeEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWxCUVZBc1EwRkJRVHRGUVVSWE96dHpRa0ZIWWl4TlFVRkJMRWRCUVZFc1UwRkJRVHRYUVVOT0xFbEJRVU1zUTBGQlFTeE5RVUZFTEVOQlFVRTdSVUZFVFRzN096dEhRV2hDWXl4RlFVRkZMRU5CUVVNN08wRkJjVUp5UWpzN096czdPenR4UWtGRFNpeFRRVUZCTEVkQlFWYzdPM0ZDUVVOWUxGTkJRVUVzUjBGQlZ6czdjVUpCUTFnc1UwRkJRU3hIUVVGWE96dHhRa0ZGV0N4VFFVRkJMRWRCUTBVN1NVRkJRU3haUVVGQkxFVkJRV01zUlVGQlpEczdPM0ZDUVVWR0xHZENRVUZCTEVkQlEwVTdTVUZCUVN4UlFVRkJMRVZCUVZVc2IwSkJRVlk3T3p0eFFrRkpSaXhyUWtGQlFTeEhRVUZ2UWl4VFFVRkJPMEZCUTJ4Q0xGRkJRVUU3U1VGQlFTeFZRVUZCTEVOQlFWa3NTVUZCUXl4RFFVRkJMR2xDUVVGaUxFVkJRV2RETEVkQlFXaERPM05FUVVOcFFpeERRVUZGTEU5QlFXNUNMRU5CUVRKQ0xGVkJRVE5DTzBWQlJtdENPenM3TzBkQllrTXNSVUZCUlN4RFFVRkRPenRCUVcxQ2NFSTdPenM3T3pzN2RVSkJRMG9zVTBGQlFTeEhRVUZYT3p0MVFrRkRXQ3hSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTERoQ1FVRlNPenQxUWtGRlZpeFBRVUZCTEVkQlEwVTdTVUZCUVN4VlFVRkJMRVZCUVdNc2IwSkJRV1E3U1VGRFFTeFpRVUZCTEVWQlFXTXNjMEpCUkdRN096dDFRa0ZIUml4UlFVRkJMRWRCUVZVc1UwRkJRVHRCUVVOU0xGRkJRVUU3U1VGQlFTeFJRVUZCTEVkQlFWY3NTVUZCU1N4UlFVRktMRU5CUVdFN1RVRkJSU3hWUVVGQkxFVkJRVmtzU1VGQlF5eERRVUZCTEZWQlFXWTdTMEZCWWp0SlFVTllMRTFCUVUwc1EwRkJReXhSUVVGUUxFZEJRV3RDTzBsQlEyeENMRkZCUVZFc1EwRkJReXhGUVVGVUxFTkJRVmtzYjBKQlFWb3NSVUZCYTBNc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEVsQlFVUTdaVUZCVlN4TFFVRkRMRU5CUVVFc1ZVRkJSQ3hEUVVGWkxFbEJRVWtzUTBGQlF5eExRVUZxUWp0TlFVRldPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUZzUXp0SlFVTkJMRWxCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zU1VGQldpeERRVUZwUWl4UlFVRnFRanR6UkVGRGFVSXNRMEZCUlN4UFFVRnVRaXhEUVVFeVFpeFZRVUV6UWp0RlFVeFJPenQxUWtGUFZpeFZRVUZCTEVkQlFWa3NVMEZCUXl4TFFVRkVPMEZCUTFZc1VVRkJRVHRKUVVGQkxGVkJRVUVzUjBGQllTeEpRVUZKTEZWQlFVb3NRMEZCWlR0TlFVRkZMRXRCUVVFc1JVRkJUeXhMUVVGVU8wdEJRV1k3U1VGRFlpeFZRVUZWTEVOQlFVTXNSVUZCV0N4RFFVRmpMRTFCUVdRc1JVRkJjMElzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRWxCUVVRN1pVRkJWU3hMUVVGRExFTkJRVUVzVDBGQlJDeERRVUZUTEUxQlFWUXNSVUZCYVVJc1NVRkJTU3hEUVVGRExFdEJRWFJDTzAxQlFWWTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRWFJDTzFkQlEwRXNTVUZCUXl4RFFVRkJMRmxCUVZrc1EwRkJReXhKUVVGa0xFTkJRVzFDTEZWQlFXNUNPMFZCU0ZVN096czdSMEZtVnl4RlFVRkZMRU5CUVVNN08wRkJjMEkxUWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBSdWxlVmlld2VyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuUnVsZVZpZXdlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSdWxlVmlld2VyLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSdWxlVmlld2VyKCkge1xuICAgIHJldHVybiBSdWxlVmlld2VyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBSdWxlVmlld2VyLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3J1bGVfdmlld2VyJyk7XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIENvbmZpcm1hdGlvbnM6IHtcbiAgICAgIG1lc3NhZ2U6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVzdHJveSB0aGlzIEtub3dsZWRnZSBSdWxlPycsXG4gICAgICBjb25maXJtSWNvbjogJ2ZhLXRyYXNoJyxcbiAgICAgIGNvbmZpcm1UZXh0OiAnREVTVFJPWScsXG4gICAgICBjb25maXJtQ3NzOiAnYnRuLWRhbmdlcidcbiAgICB9XG4gIH07XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUudWkgPSB7XG4gICAgZWRpdDogJ1tkYXRhLWNsaWNrPWVkaXRdJyxcbiAgICBjb25maXJtYXRpb25UcmlnZ2VyOiAnW2RhdGEtY2xpY2s9ZGVzdHJveV0nXG4gIH07XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUudHJpZ2dlcnMgPSB7XG4gICAgJ2NsaWNrIEB1aS5lZGl0JzogJ2VkaXQnXG4gIH07XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUubW9kZWxFdmVudHMgPSB7XG4gICAgJ2Rlc3Ryb3knOiAnb25Nb2RlbERlc3Ryb3knLFxuICAgICdlcnJvcic6ICdvbkVycm9yJ1xuICB9O1xuXG4gIFJ1bGVWaWV3ZXIucHJvdG90eXBlLm9uQ29uZmlybWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuZGVzdHJveSgpO1xuICB9O1xuXG4gIFJ1bGVWaWV3ZXIucHJvdG90eXBlLm9uTW9kZWxEZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwuY29sbGVjdGlvbi5yZW1vdmUodGhpcy5tb2RlbCk7XG4gIH07XG5cbiAgUnVsZVZpZXdlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjb25zb2xlLmxvZygnb25FcnJvcicpO1xuICB9O1xuXG4gIHJldHVybiBSdWxlVmlld2VyO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSdWxlVmlld2VyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZhMjV2ZDJ4bFpHZGxYMk5oY0hSMWNtVXZkbWxsZDNNdmNuVnNaVlpwWlhkbGNpNWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDIxdlpIVnNaWE12WkdGMFlYTmxkQzlyYm05M2JHVmtaMlZmWTJGd2RIVnlaUzkyYVdWM2N5OXlkV3hsVm1sbGQyVnlMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxGVkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3ZFVKQlEwb3NVMEZCUVN4SFFVRlhPenQxUWtGRFdDeFJRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMSGxDUVVGU096dDFRa0ZGVml4VFFVRkJMRWRCUTBVN1NVRkJRU3hoUVVGQkxFVkJRMFU3VFVGQlFTeFBRVUZCTEVWQlFXTXNkVVJCUVdRN1RVRkRRU3hYUVVGQkxFVkJRV01zVlVGRVpEdE5RVVZCTEZkQlFVRXNSVUZCWXl4VFFVWmtPMDFCUjBFc1ZVRkJRU3hGUVVGakxGbEJTR1E3UzBGRVJqczdPM1ZDUVUxR0xFVkJRVUVzUjBGRFJUdEpRVUZCTEVsQlFVRXNSVUZCYzBJc2JVSkJRWFJDTzBsQlEwRXNiVUpCUVVFc1JVRkJjMElzYzBKQlJIUkNPenM3ZFVKQlIwWXNVVUZCUVN4SFFVTkZPMGxCUVVFc1owSkJRVUVzUlVGQmEwSXNUVUZCYkVJN096dDFRa0ZGUml4WFFVRkJMRWRCUTBVN1NVRkJRU3hUUVVGQkxFVkJRVmtzWjBKQlFWbzdTVUZEUVN4UFFVRkJMRVZCUVZrc1UwRkVXanM3TzNWQ1FVZEdMRmRCUVVFc1IwRkJZU3hUUVVGQk8xZEJRMWdzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4UFFVRlFMRU5CUVVFN1JVRkVWenM3ZFVKQlIySXNZMEZCUVN4SFFVRm5RaXhUUVVGQk8xZEJRMlFzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4VlFVRlZMRU5CUVVNc1RVRkJiRUlzUTBGQmVVSXNTVUZCUXl4RFFVRkJMRXRCUVRGQ08wVkJSR003TzNWQ1FVZG9RaXhQUVVGQkxFZEJRVk1zVTBGQlFUdFhRVU5RTEU5QlFVOHNRMEZCUXl4SFFVRlNMRU5CUVZrc1UwRkJXanRGUVVSUE96czdPMGRCTlVKakxFVkJRVVVzUTBGQlF6czdRVUZwUXpWQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChhdmFpbGFibGVBY3Rpb25zLCBpc05ldywgdW5kZWZpbmVkKSB7XG5qYWRlX21peGluc1tcImFjdGlvblNlbGVjdG9yXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGJ1dHRvbiBkYXRhLXNlbGVjdD1cXFwiYWN0aW9uXFxcIlwiICsgKGphZGUuYXR0cihcImRhdGEtYWN0aW9uXCIsIG9wdHMuYWN0aW9uLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnlcXFwiPjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JyxvcHRzLmljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XFxuXCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gb3B0cy50ZXh0KSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI8L2J1dHRvbj5cIik7XG59O1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5BY3Rpb248L3A+PC9kaXY+XCIpO1xuaWYgKCBpc05ldylcbntcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJidG4tZ3JvdXAgdy0xMDBcXFwiPlwiKTtcbi8vIGl0ZXJhdGUgYXZhaWxhYmxlQWN0aW9uc1xuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBhdmFpbGFibGVBY3Rpb25zO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgYWN0aW9uVHlwZSA9ICQkb2JqWyRpbmRleF07XG5cbmphZGVfbWl4aW5zW1wiYWN0aW9uU2VsZWN0b3JcIl0oYWN0aW9uVHlwZSk7XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgYWN0aW9uVHlwZSA9ICQkb2JqWyRpbmRleF07XG5cbmphZGVfbWl4aW5zW1wiYWN0aW9uU2VsZWN0b3JcIl0oYWN0aW9uVHlwZSk7XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+XCIpO1xufVxuYnVmLnB1c2goXCI8ZGl2IGRhdGEtcmVnaW9uPVxcXCJhY3Rpb24tdHlwZVxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMiBtdC0yXFxcIj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJhdmFpbGFibGVBY3Rpb25zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5hdmFpbGFibGVBY3Rpb25zOnR5cGVvZiBhdmFpbGFibGVBY3Rpb25zIT09XCJ1bmRlZmluZWRcIj9hdmFpbGFibGVBY3Rpb25zOnVuZGVmaW5lZCxcImlzTmV3XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5pc05ldzp0eXBlb2YgaXNOZXchPT1cInVuZGVmaW5lZFwiP2lzTmV3OnVuZGVmaW5lZCxcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudW5kZWZpbmVkOnR5cGVvZiB1bmRlZmluZWQhPT1cInVuZGVmaW5lZFwiP3VuZGVmaW5lZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChBcnJheSwgc291cmNlT3B0aW9ucykge1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8c2VsZWN0XCIgKyAoamFkZS5hdHRyKFwibmFtZVwiLCBvcHRzLm5hbWUsIHRydWUsIGZhbHNlKSkgKyAoamFkZS5hdHRyKFwibXVsdGlwbGVcIiwgb3B0cy5tdWx0aXBsZSwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgYy1zZWxlY3RcXFwiPlwiKTtcbmlmICggb3B0cy5vcHRpb25zKVxue1xuLy8gaXRlcmF0ZSBvcHRzLm9wdGlvbnNcbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gb3B0cy5vcHRpb25zO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbn1cbmJ1Zi5wdXNoKFwiPC9zZWxlY3Q+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiYWN0aW9uXFxcIiB2YWx1ZT1cXFwiY2xvbmVcXFwiLz48ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1wcmltYXJ5XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtY29weVxcXCI+PC9pPiZuYnNwOzxzdHJvbmc+Q2xvbmU8L3N0cm9uZz48YnIvPkNsb25lcyB0aGUgYXR0cmlidXRlIGRlZmluZWQgaW4gdGhlIENsb25lIEZyb20gZmllbGQuPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSh7IGxhYmVsOiAnQ2xvbmUgRnJvbScsIG5hbWU6ICdjbG9uZV9zb3VyY2UnLCBvcHRpb25zOiBzb3VyY2VPcHRpb25zIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJBcnJheVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguQXJyYXk6dHlwZW9mIEFycmF5IT09XCJ1bmRlZmluZWRcIj9BcnJheTp1bmRlZmluZWQsXCJzb3VyY2VPcHRpb25zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5zb3VyY2VPcHRpb25zOnR5cGVvZiBzb3VyY2VPcHRpb25zIT09XCJ1bmRlZmluZWRcIj9zb3VyY2VPcHRpb25zOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiYWN0aW9uXFxcIiB2YWx1ZT1cXFwiZmlsdGVyXFxcIi8+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWZpbHRlclxcXCI+PC9pPiZuYnNwOzxzdHJvbmc+RmlsdGVyPC9zdHJvbmc+PGJyLz5BbGxvd3MgdGhlIGRlZmluaXRpb24gY2hhaW4gdG8gY29udGludWUgaWYgdGhlIHN1cHBsaWVkIGNvbnN0cmFpbnQgaXMgbWV0LjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChBcnJheSwgc291cmNlT3B0aW9ucykge1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxpbnB1dFwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1wicGxhY2Vob2xkZXJcIjogamFkZS5lc2NhcGUob3B0cy5wbGFjZWhvbGRlciksXCJuYW1lXCI6IGphZGUuZXNjYXBlKG9wdHMubmFtZSksXCJ0eXBlXCI6IGphZGUuZXNjYXBlKG9wdHMudHlwZSksXCJ2YWx1ZVwiOiBqYWRlLmVzY2FwZShvcHRzLnZhbHVlKSxcImNsYXNzXCI6IFwiZm9ybS1jb250cm9sXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiLz5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8c2VsZWN0XCIgKyAoamFkZS5hdHRyKFwibmFtZVwiLCBvcHRzLm5hbWUsIHRydWUsIGZhbHNlKSkgKyAoamFkZS5hdHRyKFwibXVsdGlwbGVcIiwgb3B0cy5tdWx0aXBsZSwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgYy1zZWxlY3RcXFwiPlwiKTtcbmlmICggb3B0cy5vcHRpb25zKVxue1xuLy8gaXRlcmF0ZSBvcHRzLm9wdGlvbnNcbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gb3B0cy5vcHRpb25zO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgb3B0ID0gJCRvYmpbJGluZGV4XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KG9wdCkpXG57XG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBvcHRbMF0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdFsxXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8b3B0aW9uPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbn1cbmJ1Zi5wdXNoKFwiPC9zZWxlY3Q+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiYWN0aW9uXFxcIiB2YWx1ZT1cXFwiaW5kZXhfZnJvbV9yZWdleF9tYXRjaFxcXCIvPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXByaW1hcnlcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1yZWdpc3RlcmVkXFxcIj48L2k+Jm5ic3A7PHN0cm9uZz5JbmRleCBGcm9tIFJlZ2V4IE1hdGNoPC9zdHJvbmc+PGJyLz5NYXRjaGVzIGEgcGF0dGVybiBhbmQgcmV0dXJucyB0aGUgaW5kZXggZnJvbSB0aGUgbWF0Y2ggZ3JvdXAuPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSh7IGxhYmVsOiAnU291cmNlJywgbmFtZTogJ2luZGV4X2Zyb21fcmVnZXhfbWF0Y2hfc291cmNlJywgb3B0aW9uczogc291cmNlT3B0aW9ucyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdKHsgbGFiZWw6ICdSZWd1bGFyIEV4cHJlc3Npb24nLCBwbGFjZWhvbGRlcjogJ1JlZ3VsYXIgRXhwcmVzc2lvbicsIG5hbWU6ICdpbmRleF9mcm9tX3JlZ2V4X21hdGNoX3JlZ2V4JywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0oeyBsYWJlbDogJ0luZGV4JywgcGxhY2Vob2xkZXI6ICdJbmRleCcsIG5hbWU6ICdpbmRleF9mcm9tX3JlZ2V4X21hdGNoX2luZGV4JywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJBcnJheVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguQXJyYXk6dHlwZW9mIEFycmF5IT09XCJ1bmRlZmluZWRcIj9BcnJheTp1bmRlZmluZWQsXCJzb3VyY2VPcHRpb25zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5zb3VyY2VPcHRpb25zOnR5cGVvZiBzb3VyY2VPcHRpb25zIT09XCJ1bmRlZmluZWRcIj9zb3VyY2VPcHRpb25zOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKEFycmF5LCBzb3VyY2VPcHRpb25zKSB7XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0uY2FsbCh7XG5ibG9jazogZnVuY3Rpb24oKXtcbmJ1Zi5wdXNoKFwiPGlucHV0XCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJwbGFjZWhvbGRlclwiOiBqYWRlLmVzY2FwZShvcHRzLnBsYWNlaG9sZGVyKSxcIm5hbWVcIjogamFkZS5lc2NhcGUob3B0cy5uYW1lKSxcInR5cGVcIjogamFkZS5lc2NhcGUob3B0cy50eXBlKSxcInZhbHVlXCI6IGphZGUuZXNjYXBlKG9wdHMudmFsdWUpLFwiY2xhc3NcIjogXCJmb3JtLWNvbnRyb2xcIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCIvPlwiKTtcbn1cbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtU2VsZWN0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxzZWxlY3RcIiArIChqYWRlLmF0dHIoXCJuYW1lXCIsIG9wdHMubmFtZSwgdHJ1ZSwgZmFsc2UpKSArIChqYWRlLmF0dHIoXCJtdWx0aXBsZVwiLCBvcHRzLm11bHRpcGxlLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbCBjLXNlbGVjdFxcXCI+XCIpO1xuaWYgKCBvcHRzLm9wdGlvbnMpXG57XG4vLyBpdGVyYXRlIG9wdHMub3B0aW9uc1xuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBvcHRzLm9wdGlvbnM7XG4gIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgJCRvYmoubGVuZ3RoKSB7XG5cbiAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgIHZhciBvcHQgPSAkJG9ialskaW5kZXhdO1xuXG5pZiAoIEFycmF5LmlzQXJyYXkob3B0KSlcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgKGphZGUuYXR0cihcInZhbHVlXCIsIG9wdFswXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0WzFdKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxvcHRpb24+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICB2YXIgJCRsID0gMDtcbiAgICBmb3IgKHZhciAkaW5kZXggaW4gJCRvYmopIHtcbiAgICAgICQkbCsrOyAgICAgIHZhciBvcHQgPSAkJG9ialskaW5kZXhdO1xuXG5pZiAoIEFycmF5LmlzQXJyYXkob3B0KSlcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgKGphZGUuYXR0cihcInZhbHVlXCIsIG9wdFswXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0WzFdKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxvcHRpb24+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxufVxuYnVmLnB1c2goXCI8L3NlbGVjdD5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aW5wdXQgdHlwZT1cXFwiaGlkZGVuXFxcIiBuYW1lPVxcXCJhY3Rpb25cXFwiIHZhbHVlPVxcXCJpbmRleF9mcm9tX3NwbGl0XFxcIi8+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWNvZGUtZm9ya1xcXCI+PC9pPiZuYnNwOzxzdHJvbmc+SW5kZXggRnJvbSBTcGxpdDwvc3Ryb25nPjxici8+U3BsaXRzIGEgc3RyaW5nIGF0IGEgY2hhcmFjdGVyIGFuZCByZXR1cm5zIHRoZSBzdWItc3RyaW5nIGF0IHNwZWNpZmllZCBpbmRleC48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtU2VsZWN0XCJdKHsgbGFiZWw6ICdTb3VyY2UnLCBuYW1lOiAnaW5kZXhfZnJvbV9zcGxpdF9zb3VyY2UnLCBvcHRpb25zOiBzb3VyY2VPcHRpb25zIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0oeyBsYWJlbDogJ1NwbGl0IEF0JywgcGxhY2Vob2xkZXI6ICdTcGxpdCBBdCcsIG5hbWU6ICdpbmRleF9mcm9tX3NwbGl0X2RlbGltaXRlcicsIHR5cGU6ICd0ZXh0JyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdKHsgbGFiZWw6ICdJbmRleCcsIHBsYWNlaG9sZGVyOiAnSW5kZXgnLCBuYW1lOiAnaW5kZXhfZnJvbV9zcGxpdF9pbmRleCcsIHR5cGU6ICd0ZXh0JyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+XCIpO30uY2FsbCh0aGlzLFwiQXJyYXlcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLkFycmF5OnR5cGVvZiBBcnJheSE9PVwidW5kZWZpbmVkXCI/QXJyYXk6dW5kZWZpbmVkLFwic291cmNlT3B0aW9uc1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguc291cmNlT3B0aW9uczp0eXBlb2Ygc291cmNlT3B0aW9ucyE9PVwidW5kZWZpbmVkXCI/c291cmNlT3B0aW9uczp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxpbnB1dFwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1wicGxhY2Vob2xkZXJcIjogamFkZS5lc2NhcGUob3B0cy5wbGFjZWhvbGRlciksXCJuYW1lXCI6IGphZGUuZXNjYXBlKG9wdHMubmFtZSksXCJ0eXBlXCI6IGphZGUuZXNjYXBlKG9wdHMudHlwZSksXCJ2YWx1ZVwiOiBqYWRlLmVzY2FwZShvcHRzLnZhbHVlKSxcImNsYXNzXCI6IFwiZm9ybS1jb250cm9sXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiLz5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiYWN0aW9uXFxcIiB2YWx1ZT1cXFwic3RhdGljXFxcIi8+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXF1b3RlLXJpZ2h0XFxcIj48L2k+Jm5ic3A7PHN0cm9uZz5MaXRlcmFsPC9zdHJvbmc+PGJyLz5Bc3NpZ25zIHRoZSBzdXBwbGllZCBsaXRlcmFsIHRleHQgdG8gdGhlIHJ1bGUncyB0YXJnZXQgcHJvcGVydHkuPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnTGl0ZXJhbCBUZXh0JywgcGxhY2Vob2xkZXI6ICdMaXRlcmFsIFRleHQnLCBuYW1lOiAnbGl0ZXJhbF90ZXh0JywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoQXJyYXksIHNvdXJjZU9wdGlvbnMpIHtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGZpZWxkc2V0XCIgKyAoamFkZS5jbHMoWydmb3JtLWdyb3VwJyxvcHRzLmZvcm1Hcm91cENzc10sIFtudWxsLHRydWVdKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMubGFiZWwpXG57XG5idWYucHVzaChcIjxsYWJlbCBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWxhYmVsXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMubGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvbGFiZWw+XCIpO1xufVxuYmxvY2sgJiYgYmxvY2soKTtcbmJ1Zi5wdXNoKFwiPC9maWVsZHNldD5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8aW5wdXRcIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInBsYWNlaG9sZGVyXCI6IGphZGUuZXNjYXBlKG9wdHMucGxhY2Vob2xkZXIpLFwibmFtZVwiOiBqYWRlLmVzY2FwZShvcHRzLm5hbWUpLFwidHlwZVwiOiBqYWRlLmVzY2FwZShvcHRzLnR5cGUpLFwidmFsdWVcIjogamFkZS5lc2NhcGUob3B0cy52YWx1ZSksXCJjbGFzc1wiOiBcImZvcm0tY29udHJvbFwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIi8+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImZvcm1TZWxlY3RcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0uY2FsbCh7XG5ibG9jazogZnVuY3Rpb24oKXtcbmJ1Zi5wdXNoKFwiPHNlbGVjdFwiICsgKGphZGUuYXR0cihcIm5hbWVcIiwgb3B0cy5uYW1lLCB0cnVlLCBmYWxzZSkpICsgKGphZGUuYXR0cihcIm11bHRpcGxlXCIsIG9wdHMubXVsdGlwbGUsIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sIGMtc2VsZWN0XFxcIj5cIik7XG5pZiAoIG9wdHMub3B0aW9ucylcbntcbi8vIGl0ZXJhdGUgb3B0cy5vcHRpb25zXG47KGZ1bmN0aW9uKCl7XG4gIHZhciAkJG9iaiA9IG9wdHMub3B0aW9ucztcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcblxuICAgIGZvciAodmFyICRpbmRleCA9IDAsICQkbCA9ICQkb2JqLmxlbmd0aDsgJGluZGV4IDwgJCRsOyAkaW5kZXgrKykge1xuICAgICAgdmFyIG9wdCA9ICQkb2JqWyRpbmRleF07XG5cbmlmICggQXJyYXkuaXNBcnJheShvcHQpKVxue1xuYnVmLnB1c2goXCI8b3B0aW9uXCIgKyAoamFkZS5hdHRyKFwidmFsdWVcIiwgb3B0WzBdLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRbMV0pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbmVsc2VcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvbj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyICRpbmRleCBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIG9wdCA9ICQkb2JqWyRpbmRleF07XG5cbmlmICggQXJyYXkuaXNBcnJheShvcHQpKVxue1xuYnVmLnB1c2goXCI8b3B0aW9uXCIgKyAoamFkZS5hdHRyKFwidmFsdWVcIiwgb3B0WzBdLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRbMV0pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbmVsc2VcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvbj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xufVxuICAgIH1cblxuICB9XG59KS5jYWxsKHRoaXMpO1xuXG59XG5idWYucHVzaChcIjwvc2VsZWN0PlwiKTtcbn1cbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGJ1dHRvblwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1widHlwZVwiOiBcImJ1dHRvblwiLFwiY2xhc3NcIjogXCJidG5cIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmljb24pXG57XG5idWYucHVzaChcIjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JyxvcHRzLmljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XCIpO1xufVxuYnVmLnB1c2goKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy50ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2J1dHRvbj5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcImFjdGlvblxcXCIgdmFsdWU9XFxcInJlcGxhY2VcXFwiLz48ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1wcmltYXJ5XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtc3RyaWtldGhyb3VnaFxcXCI+PC9pPiZuYnNwOzxzdHJvbmc+UmVwbGFjZTwvc3Ryb25nPjxici8+UmV0dXJucyBhIGNvcHkgb2YgdGV4dCBzb3VyY2Ugd2l0aCB0ZXh0IHJlcGxhY2VtZW50LjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtU2VsZWN0XCJdKHsgbGFiZWw6ICdUZXh0IFNvdXJjZScsIG5hbWU6ICdyZXBsYWNlX3NvdXJjZScsIG9wdGlvbnM6IHNvdXJjZU9wdGlvbnMgfSk7XG5idWYucHVzaChcIjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0oeyBsYWJlbDogJ1RleHQgdG8gUmVwbGFjZScsIHBsYWNlaG9sZGVyOiAnVGV4dCB0byBSZXBsYWNlJywgbmFtZTogJ3JlcGxhY2VfdGV4dCcsIHR5cGU6ICd0ZXh0JyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnUmVwbGFjZSBXaXRoJywgcGxhY2Vob2xkZXI6ICdSZXBsYWNlIFdpdGgnLCBuYW1lOiAncmVwbGFjZV93aXRoJywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJBcnJheVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguQXJyYXk6dHlwZW9mIEFycmF5IT09XCJ1bmRlZmluZWRcIj9BcnJheTp1bmRlZmluZWQsXCJzb3VyY2VPcHRpb25zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5zb3VyY2VPcHRpb25zOnR5cGVvZiBzb3VyY2VPcHRpb25zIT09XCJ1bmRlZmluZWRcIj9zb3VyY2VPcHRpb25zOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnU3VibWl0J1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtY2hlY2snXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJzdWJtaXRcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc3VjY2Vzc1wifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJjYW5jZWxCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnQ2FuY2VsJ1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtdGltZXMnXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJjYW5jZWxcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc2Vjb25kYXJ5XCJ9LGF0dHJpYnV0ZXNdKVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPkFwcGx5IFJ1bGVzPC9wPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXF1ZXN0aW9uLWNpcmNsZVxcXCI+PC9pPiZuYnNwOzxzdHJvbmc+SEVMUDwvc3Ryb25nPjxwIGNsYXNzPVxcXCJtYi0wXFxcIj5UaGlzIGFjdGlvbiBhcHBsaWVzIHRoZSBkZWZpbmVkIHJ1bGVzIHRvIHRoZSBkYXRhc2V0IGFuZCB1cGRhdGVzIGl0cyBmYWNldHMuPC9wPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdKHt9KTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKEFycmF5LCBvcGVyYXRpb25PcHRpb25zLCBzb3VyY2VPcHRpb25zKSB7XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0uY2FsbCh7XG5ibG9jazogZnVuY3Rpb24oKXtcbmJ1Zi5wdXNoKFwiPGlucHV0XCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJwbGFjZWhvbGRlclwiOiBqYWRlLmVzY2FwZShvcHRzLnBsYWNlaG9sZGVyKSxcIm5hbWVcIjogamFkZS5lc2NhcGUob3B0cy5uYW1lKSxcInR5cGVcIjogamFkZS5lc2NhcGUob3B0cy50eXBlKSxcInZhbHVlXCI6IGphZGUuZXNjYXBlKG9wdHMudmFsdWUpLFwiY2xhc3NcIjogXCJmb3JtLWNvbnRyb2xcIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCIvPlwiKTtcbn1cbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtU2VsZWN0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxzZWxlY3RcIiArIChqYWRlLmF0dHIoXCJuYW1lXCIsIG9wdHMubmFtZSwgdHJ1ZSwgZmFsc2UpKSArIChqYWRlLmF0dHIoXCJtdWx0aXBsZVwiLCBvcHRzLm11bHRpcGxlLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbCBjLXNlbGVjdFxcXCI+XCIpO1xuaWYgKCBvcHRzLm9wdGlvbnMpXG57XG4vLyBpdGVyYXRlIG9wdHMub3B0aW9uc1xuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBvcHRzLm9wdGlvbnM7XG4gIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgJCRvYmoubGVuZ3RoKSB7XG5cbiAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgIHZhciBvcHQgPSAkJG9ialskaW5kZXhdO1xuXG5pZiAoIEFycmF5LmlzQXJyYXkob3B0KSlcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgKGphZGUuYXR0cihcInZhbHVlXCIsIG9wdFswXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0WzFdKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxvcHRpb24+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICB2YXIgJCRsID0gMDtcbiAgICBmb3IgKHZhciAkaW5kZXggaW4gJCRvYmopIHtcbiAgICAgICQkbCsrOyAgICAgIHZhciBvcHQgPSAkJG9ialskaW5kZXhdO1xuXG5pZiAoIEFycmF5LmlzQXJyYXkob3B0KSlcbntcbmJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgKGphZGUuYXR0cihcInZhbHVlXCIsIG9wdFswXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0WzFdKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxvcHRpb24+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbn1cbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxufVxuYnVmLnB1c2goXCI8L3NlbGVjdD5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cCBjbGFzcz1cXFwibGVhZFxcXCI+Q29uc3RyYWludDwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtU2VsZWN0XCJdKHsgbGFiZWw6ICdTb3VyY2UnLCBuYW1lOiAnc291cmNlJywgb3B0aW9uczogc291cmNlT3B0aW9ucyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybVNlbGVjdFwiXSh7IGxhYmVsOiAnT3BlcmF0aW9uJywgbmFtZTogJ29wZXJhdGlvbicsIG9wdGlvbnM6IG9wZXJhdGlvbk9wdGlvbnMgfSk7XG5idWYucHVzaChcIjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy00XFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnVmFsdWUnLCBwbGFjZWhvbGRlcjogJ1ZhbHVlJywgbmFtZTogJ3ZhbHVlJywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJBcnJheVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguQXJyYXk6dHlwZW9mIEFycmF5IT09XCJ1bmRlZmluZWRcIj9BcnJheTp1bmRlZmluZWQsXCJvcGVyYXRpb25PcHRpb25zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5vcGVyYXRpb25PcHRpb25zOnR5cGVvZiBvcGVyYXRpb25PcHRpb25zIT09XCJ1bmRlZmluZWRcIj9vcGVyYXRpb25PcHRpb25zOnVuZGVmaW5lZCxcInNvdXJjZU9wdGlvbnNcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnNvdXJjZU9wdGlvbnM6dHlwZW9mIHNvdXJjZU9wdGlvbnMhPT1cInVuZGVmaW5lZFwiP3NvdXJjZU9wdGlvbnM6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoYWN0aW9uLCB0b29sdGlwQXR0cnMpIHtcbnRvb2x0aXBBdHRycyA9IHsgJ2RhdGEtcGxhY2VtZW50JzogJ2xlZnQnLCAnZGF0YS10b2dnbGUnOiAndG9vbHRpcCcgfVxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtYmFycyBjdXJzb3ItcG9pbnRlciBzb3J0YWJsZVxcXCI+PC9pPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBhY3Rpb24pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcImFjdGlvblwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguYWN0aW9uOnR5cGVvZiBhY3Rpb24hPT1cInVuZGVmaW5lZFwiP2FjdGlvbjp1bmRlZmluZWQsXCJ0b29sdGlwQXR0cnNcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnRvb2x0aXBBdHRyczp0eXBlb2YgdG9vbHRpcEF0dHJzIT09XCJ1bmRlZmluZWRcIj90b29sdGlwQXR0cnM6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPk5vIERlZmluaXRpb25zLjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChpc05ldykge1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ0NhbmNlbCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLXRpbWVzJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwiY2FuY2VsXCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJjYXJkIGNhcmQtYm9keVxcXCI+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxwIGNsYXNzPVxcXCJsZWFkIG1iLTBcXFwiPlwiKTtcbmlmICggaXNOZXcpXG57XG5idWYucHVzaChcIk5ldyBEZWZpbml0aW9uXCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCJFZGl0IERlZmluaXRpb25cIik7XG59XG5idWYucHVzaChcIjwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiY29uc3RyYWludFxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjxkaXYgZGF0YS1yZWdpb249XFxcImFjdGlvblxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMiB0ZXh0LXJpZ2h0XFxcIj5cIik7XG5qYWRlX21peGluc1tcImNhbmNlbEJ1dHRvblwiXSh7fSk7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSh7fSk7XG5idWYucHVzaChcIjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcImlzTmV3XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5pc05ldzp0eXBlb2YgaXNOZXchPT1cInVuZGVmaW5lZFwiP2lzTmV3OnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgZGF0YS1yZWdpb249XFxcImxpc3RcXFwiIGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiZGV0YWlsXFxcIiBjbGFzcz1cXFwiY29sLWxnLThcXFwiPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXdhcm5pbmdcXFwiPk5vIERlZmluaXRpb24gc2VsZWN0ZWQuPC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGFjdGlvbiwgY2xvbmVfc291cmNlLCBsaXRlcmFsX3RleHQsIG9wZXJhdGlvbiwgcmVwbGFjZV9zb3VyY2UsIHJlcGxhY2VfdGV4dCwgcmVwbGFjZV93aXRoLCBzb3VyY2UsIHZhbHVlKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWJvZHlcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPjxwIGNsYXNzPVxcXCJsZWFkIG1iLTBcXFwiPkRlZmluaXRpb248L3A+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTYgdGV4dC1yaWdodFxcXCI+PGJ1dHRvbiBkYXRhLWNsaWNrPVxcXCJlZGl0XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBlbmNpbFxcXCI+PC9pPiZuYnNwO1xcbkVkaXQ8L2J1dHRvbj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcImRpc2NhcmRcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLWRhbmdlclxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXRyYXNoXFxcIj48L2k+Jm5ic3A7XFxuRGlzY2FyZDwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cCBjbGFzcz1cXFwibGVhZFxcXCI+Q29uc3RyYWludDwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PHN0cm9uZz5Tb3VyY2U8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PHN0cm9uZz5PcGVyYXRpb248L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PHN0cm9uZz5WYWx1ZTwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy00XFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IHNvdXJjZSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3BlcmF0aW9uKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSB2YWx1ZSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5BY3Rpb248L3A+PC9kaXY+XCIpO1xuaWYgKCBhY3Rpb24gPT0gJ2xpdGVyYWwnKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctNlxcXCI+PHN0cm9uZz5BY3Rpb24gVHlwZTwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj48c3Ryb25nPkxpdGVyYWwgVGV4dDwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj5MaXRlcmFsPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gbGl0ZXJhbF90ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj5cIik7XG59XG5pZiAoIGFjdGlvbiA9PSAnYmxvY2snKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxzdHJvbmc+QWN0aW9uIFR5cGU8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPkJsb2NrPC9kaXY+XCIpO1xufVxuaWYgKCBhY3Rpb24gPT0gJ2Nsb25lJylcbntcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPjxzdHJvbmc+QWN0aW9uIFR5cGU8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNlxcXCI+PHN0cm9uZz5DbG9uZSBGcm9tPC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPkNsb25lPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gY2xvbmVfc291cmNlKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj5cIik7XG59XG5pZiAoIGFjdGlvbiA9PSAncmVwbGFjZScpXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj48c3Ryb25nPkFjdGlvbiBUeXBlPC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTZcXFwiPjxzdHJvbmc+VGV4dCBTb3VyY2U8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNlxcXCI+UmVwbGFjZTwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IHJlcGxhY2Vfc291cmNlKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxzdHJvbmc+VGV4dCB0byBSZXBsYWNlPC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IHJlcGxhY2VfdGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48c3Ryb25nPlJlcGxhY2UgV2l0aDwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSByZXBsYWNlX3dpdGgpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvZGl2PlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIpO30uY2FsbCh0aGlzLFwiYWN0aW9uXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5hY3Rpb246dHlwZW9mIGFjdGlvbiE9PVwidW5kZWZpbmVkXCI/YWN0aW9uOnVuZGVmaW5lZCxcImNsb25lX3NvdXJjZVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguY2xvbmVfc291cmNlOnR5cGVvZiBjbG9uZV9zb3VyY2UhPT1cInVuZGVmaW5lZFwiP2Nsb25lX3NvdXJjZTp1bmRlZmluZWQsXCJsaXRlcmFsX3RleHRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmxpdGVyYWxfdGV4dDp0eXBlb2YgbGl0ZXJhbF90ZXh0IT09XCJ1bmRlZmluZWRcIj9saXRlcmFsX3RleHQ6dW5kZWZpbmVkLFwib3BlcmF0aW9uXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5vcGVyYXRpb246dHlwZW9mIG9wZXJhdGlvbiE9PVwidW5kZWZpbmVkXCI/b3BlcmF0aW9uOnVuZGVmaW5lZCxcInJlcGxhY2Vfc291cmNlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5yZXBsYWNlX3NvdXJjZTp0eXBlb2YgcmVwbGFjZV9zb3VyY2UhPT1cInVuZGVmaW5lZFwiP3JlcGxhY2Vfc291cmNlOnVuZGVmaW5lZCxcInJlcGxhY2VfdGV4dFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgucmVwbGFjZV90ZXh0OnR5cGVvZiByZXBsYWNlX3RleHQhPT1cInVuZGVmaW5lZFwiP3JlcGxhY2VfdGV4dDp1bmRlZmluZWQsXCJyZXBsYWNlX3dpdGhcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnJlcGxhY2Vfd2l0aDp0eXBlb2YgcmVwbGFjZV93aXRoIT09XCJ1bmRlZmluZWRcIj9yZXBsYWNlX3dpdGg6dW5kZWZpbmVkLFwic291cmNlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5zb3VyY2U6dHlwZW9mIHNvdXJjZSE9PVwidW5kZWZpbmVkXCI/c291cmNlOnVuZGVmaW5lZCxcInZhbHVlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC52YWx1ZTp0eXBlb2YgdmFsdWUhPT1cInVuZGVmaW5lZFwiP3ZhbHVlOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnU3VibWl0J1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtY2hlY2snXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJzdWJtaXRcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc3VjY2Vzc1wifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJjYW5jZWxCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnQ2FuY2VsJ1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtdGltZXMnXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJjYW5jZWxcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc2Vjb25kYXJ5XCJ9LGF0dHJpYnV0ZXNdKVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPkV4cG9ydCBSdWxlczwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXByaW1hcnlcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1jbG91ZC1kb3dubG9hZFxcXCI+PC9pPiZuYnNwOzxzdHJvbmc+RXhwb3J0PC9zdHJvbmc+PHAgY2xhc3M9XFxcIm1iLTBcXFwiPlRoaXMgYWN0aW9uIGV4cG9ydHMgdGhlIHJ1bGVzIGRlZmluZWQgb24gdGhpcyBkYXRhc2V0LiBUaGV5IG1heSB0aGVuIGJlIGltcG9ydGVkIGJ5IG90aGVyIGRhdGFzZXRzLjwvcD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImNhbmNlbEJ1dHRvblwiXSh7fSk7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSh7fSk7XG5idWYucHVzaChcIjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ0NhbmNlbCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLXRpbWVzJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwiY2FuY2VsXCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5JbXBvcnQgUnVsZXM8L3A+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1wcmltYXJ5XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtY2xvdWQtZG93bmxvYWRcXFwiPjwvaT4mbmJzcDs8c3Ryb25nPkltcG9ydDwvc3Ryb25nPjxwIGNsYXNzPVxcXCJtYi0wXFxcIj5UaGlzIGFjdGlvbiBpbXBvcnRzIEtub3dsZWRnZSBDYXB0dXJlIHJ1bGVzIGV4cG9ydGVkIGJ5IE1hZ2VsbGFuLjwvcD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwidXBsb2FkXFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImNhbmNlbEJ1dHRvblwiXSh7fSk7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSh7fSk7XG5idWYucHVzaChcIjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGJ1dHRvbiBkYXRhLWNsaWNrPVxcXCJleHBvcnRcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtY2xvdWQtZG93bmxvYWRcXFwiPjwvaT4mbmJzcDtcXG5FeHBvcnQgUnVsZXM8L2J1dHRvbj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcImltcG9ydFxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IG1yLTJcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1jbG91ZC11cGxvYWRcXFwiPjwvaT4mbmJzcDtcXG5JbXBvcnQgUnVsZXM8L2J1dHRvbj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcIm5ld1xcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtcHJpbWFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtcGx1c1xcXCI+PC9pPiZuYnNwO1xcbk5ldyBSdWxlPC9idXR0b24+PGJ1dHRvbiBkYXRhLWNsaWNrPVxcXCJhcHBseVxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtc3VjY2VzcyBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtY2hlY2stY2lyY2xlLW9cXFwiPjwvaT4mbmJzcDtcXG5BcHBseSBSdWxlczwvYnV0dG9uPjxidXR0b24gZGF0YS1jbGljaz1cXFwicmVzZXRcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLWRhbmdlclxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXJlZnJlc2hcXFwiPjwvaT4mbmJzcDtcXG5SZXNldDwvYnV0dG9uPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiY29udGVudFxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGRyb3Bkb3duLCB1bmRlZmluZWQpIHtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJmb3JtLWdyb3VwXFxcIj48bGFiZWw+VGFyZ2V0IFByb3BlcnR5PC9sYWJlbD48c2VsZWN0IG5hbWU9XFxcInRhcmdldF9wcm9wZXJ0eVxcXCIgcGxhY2Vob2xkZXI9XFxcIlRhcmdldCBQcm9wZXJ0eVxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCI+XCIpO1xuLy8gaXRlcmF0ZSBkcm9wZG93blxuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBkcm9wZG93bjtcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcblxuICAgIGZvciAodmFyICRpbmRleCA9IDAsICQkbCA9ICQkb2JqLmxlbmd0aDsgJGluZGV4IDwgJCRsOyAkaW5kZXgrKykge1xuICAgICAgdmFyIGdyb3VwID0gJCRvYmpbJGluZGV4XTtcblxuYnVmLnB1c2goXCI8b3B0Z3JvdXBcIiArIChqYWRlLmF0dHIoXCJsYWJlbFwiLCBncm91cC5sYWJlbCwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiKTtcbi8vIGl0ZXJhdGUgZ3JvdXAuaXRlbXNcbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gZ3JvdXAuaXRlbXM7XG4gIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgJCRvYmoubGVuZ3RoKSB7XG5cbiAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgIHZhciBpdGVtID0gJCRvYmpbJGluZGV4XTtcblxuYnVmLnB1c2goXCI8b3B0aW9uXCIgKyAoamFkZS5hdHRyKFwidmFsdWVcIiwgaXRlbSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gaXRlbSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9vcHRpb24+XCIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyICRpbmRleCBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIGl0ZW0gPSAkJG9ialskaW5kZXhdO1xuXG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBpdGVtLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBpdGVtKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbmJ1Zi5wdXNoKFwiPC9vcHRncm91cD5cIik7XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgZ3JvdXAgPSAkJG9ialskaW5kZXhdO1xuXG5idWYucHVzaChcIjxvcHRncm91cFwiICsgKGphZGUuYXR0cihcImxhYmVsXCIsIGdyb3VwLmxhYmVsLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIpO1xuLy8gaXRlcmF0ZSBncm91cC5pdGVtc1xuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBncm91cC5pdGVtcztcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcblxuICAgIGZvciAodmFyICRpbmRleCA9IDAsICQkbCA9ICQkb2JqLmxlbmd0aDsgJGluZGV4IDwgJCRsOyAkaW5kZXgrKykge1xuICAgICAgdmFyIGl0ZW0gPSAkJG9ialskaW5kZXhdO1xuXG5idWYucHVzaChcIjxvcHRpb25cIiArIChqYWRlLmF0dHIoXCJ2YWx1ZVwiLCBpdGVtLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBpdGVtKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L29wdGlvbj5cIik7XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgaXRlbSA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgKGphZGUuYXR0cihcInZhbHVlXCIsIGl0ZW0sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IGl0ZW0pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L29wdGdyb3VwPlwiKTtcbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L3NlbGVjdD48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJkcm9wZG93blwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZHJvcGRvd246dHlwZW9mIGRyb3Bkb3duIT09XCJ1bmRlZmluZWRcIj9kcm9wZG93bjp1bmRlZmluZWQsXCJ1bmRlZmluZWRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnVuZGVmaW5lZDp0eXBlb2YgdW5kZWZpbmVkIT09XCJ1bmRlZmluZWRcIj91bmRlZmluZWQ6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGZpZWxkc2V0XCIgKyAoamFkZS5jbHMoWydmb3JtLWdyb3VwJyxvcHRzLmZvcm1Hcm91cENzc10sIFtudWxsLHRydWVdKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMubGFiZWwpXG57XG5idWYucHVzaChcIjxsYWJlbCBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWxhYmVsXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMubGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvbGFiZWw+XCIpO1xufVxuYmxvY2sgJiYgYmxvY2soKTtcbmJ1Zi5wdXNoKFwiPC9maWVsZHNldD5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGJ1dHRvblwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1widHlwZVwiOiBcImJ1dHRvblwiLFwiY2xhc3NcIjogXCJidG5cIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmljb24pXG57XG5idWYucHVzaChcIjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JyxvcHRzLmljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XCIpO1xufVxuYnVmLnB1c2goKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy50ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2J1dHRvbj5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoISggb3B0cy50ZXh0KSlcbntcbm9wdHMudGV4dCA9ICdTdWJtaXQnXG59XG5pZiAoISggb3B0cy5pY29uKSlcbntcbm9wdHMuaWNvbiA9ICdmYS1jaGVjaydcbn1cbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdLmNhbGwoe1xuYXR0cmlidXRlczogamFkZS5tZXJnZShbe1wiZGF0YS1jbGlja1wiOiBcInN1Ym1pdFwiLFwiY2xhc3NcIjogXCJidG4tb3V0bGluZS1zdWNjZXNzXCJ9LGF0dHJpYnV0ZXNdKVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImNhbmNlbEJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoISggb3B0cy50ZXh0KSlcbntcbm9wdHMudGV4dCA9ICdDYW5jZWwnXG59XG5pZiAoISggb3B0cy5pY29uKSlcbntcbm9wdHMuaWNvbiA9ICdmYS10aW1lcydcbn1cbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdLmNhbGwoe1xuYXR0cmlidXRlczogamFkZS5tZXJnZShbe1wiZGF0YS1jbGlja1wiOiBcImNhbmNlbFwiLFwiY2xhc3NcIjogXCJidG4tb3V0bGluZS1zZWNvbmRhcnlcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cCBjbGFzcz1cXFwibGVhZFxcXCI+UmVzZXQgUnVsZXM8L3A+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1kYW5nZXJcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS13YXJuaW5nXFxcIj48L2k+Jm5ic3A7PHN0cm9uZz5XQVJOSU5HPC9zdHJvbmc+PHAgY2xhc3M9XFxcIm1iLTBcXFwiPlRoaXMgYWN0aW9uIHJlc3RvcmVzIHRoZSBkYXRhc2V0IHRvIGl0cyBkZWZhdWx0IHZhbHVlcyBiZWZvcmUgYW55IHJ1bGVzIHdlcmUgYXBwbGllZC4gVGhpcyBhY3Rpb24gaXMgZGVzdHJ1Y3RpdmUuPC9wPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdKHt9KTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKHRhcmdldF9wcm9wZXJ0eSwgdG9vbHRpcEF0dHJzKSB7XG50b29sdGlwQXR0cnMgPSB7ICdkYXRhLXBsYWNlbWVudCc6ICdsZWZ0JywgJ2RhdGEtdG9nZ2xlJzogJ3Rvb2x0aXAnIH1cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWJhcnMgY3Vyc29yLXBvaW50ZXIgc29ydGFibGVcXFwiPjwvaT48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTBcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gdGFyZ2V0X3Byb3BlcnR5KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJ0YXJnZXRfcHJvcGVydHlcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnRhcmdldF9wcm9wZXJ0eTp0eXBlb2YgdGFyZ2V0X3Byb3BlcnR5IT09XCJ1bmRlZmluZWRcIj90YXJnZXRfcHJvcGVydHk6dW5kZWZpbmVkLFwidG9vbHRpcEF0dHJzXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC50b29sdGlwQXR0cnM6dHlwZW9mIHRvb2x0aXBBdHRycyE9PVwidW5kZWZpbmVkXCI/dG9vbHRpcEF0dHJzOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5ObyBSdWxlcyBEZWZpbmVkLjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ0NhbmNlbCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLXRpbWVzJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwiY2FuY2VsXCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTNcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwib250b2xvZ3ktc2VsZWN0b3JcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjwvZGl2PjxidXR0b24gZGF0YS1jbGljaz1cXFwiYWRkXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgdy0xMDAgbWItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBsdXMtY2lyY2xlXFxcIj48L2k+Jm5ic3A7XFxuQWRkIERlZmluaXRpb248L2J1dHRvbj48L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJkZWZpbml0aW9uc1xcXCIgY2xhc3M9XFxcImNvbC1sZy05XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiY2FuY2VsQnV0dG9uXCJdKHt9KTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdKHt9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgZGF0YS1yZWdpb249XFxcImxpc3RcXFwiIGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiZGV0YWlsXFxcIiBjbGFzcz1cXFwiY29sLWxnLThcXFwiPjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkZWZpbml0aW9ucywgZW5hYmxlZCwgdGFyZ2V0X3Byb3BlcnR5KSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLThcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+UnVsZSBEZXRhaWxzPC9oND48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNCB0ZXh0LXJpZ2h0XFxcIj48YnV0dG9uIGRhdGEtY2xpY2s9XFxcImVkaXRcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtcGVuY2lsXFxcIj48L2k+Jm5ic3A7XFxuRWRpdDwvYnV0dG9uPjxidXR0b24gZGF0YS1jbGljaz1cXFwiZGVzdHJveVxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtZGFuZ2VyXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdHJhc2hcXFwiPjwvaT4mbmJzcDtcXG5EZXN0cm95PC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cCBjbGFzcz1cXFwibGVhZFxcXCI+RW5hYmxlZDogXCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gZW5hYmxlZCkgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiPC9wPjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5UYXJnZXQ6IFwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IHRhcmdldF9wcm9wZXJ0eSkgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiPC9wPjxoci8+PHAgY2xhc3M9XFxcImxlYWRcXFwiPkRlZmluaXRpb25zOiBcIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBkZWZpbml0aW9ucy5sZW5ndGgpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjwvcD48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJkZWZpbml0aW9uc1wiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguZGVmaW5pdGlvbnM6dHlwZW9mIGRlZmluaXRpb25zIT09XCJ1bmRlZmluZWRcIj9kZWZpbml0aW9uczp1bmRlZmluZWQsXCJlbmFibGVkXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5lbmFibGVkOnR5cGVvZiBlbmFibGVkIT09XCJ1bmRlZmluZWRcIj9lbmFibGVkOnVuZGVmaW5lZCxcInRhcmdldF9wcm9wZXJ0eVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudGFyZ2V0X3Byb3BlcnR5OnR5cGVvZiB0YXJnZXRfcHJvcGVydHkhPT1cInVuZGVmaW5lZFwiP3RhcmdldF9wcm9wZXJ0eTp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgRGF0YXNldExpc3RSb3V0ZSwgTGF5b3V0VmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5EYXRhc2V0TGlzdFJvdXRlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRMaXN0Um91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRMaXN0Um91dGUoKSB7XG4gICAgcmV0dXJuIERhdGFzZXRMaXN0Um91dGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0TGlzdFJvdXRlLnByb3RvdHlwZS50aXRsZSA9ICdNYWdlbGxhbiAtIERhdGFzZXRzJztcblxuICBEYXRhc2V0TGlzdFJvdXRlLnByb3RvdHlwZS5icmVhZGNydW1icyA9IFtcbiAgICB7XG4gICAgICBocmVmOiAnIycsXG4gICAgICB0ZXh0OiAnSG9tZSdcbiAgICB9LCB7XG4gICAgICB0ZXh0OiAnQXJjaGl2ZXMnXG4gICAgfVxuICBdO1xuXG4gIERhdGFzZXRMaXN0Um91dGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2RhdGFzZXQnKS5yZXF1ZXN0KCdjb2xsZWN0aW9uJykudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIERhdGFzZXRMaXN0Um91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgIH0pKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldExpc3RSb3V0ZTtcblxufSkocmVxdWlyZSgnaG5fcm91dGluZy9saWIvcm91dGUnKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YXNldExpc3RSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YkdsemRDOXliM1YwWlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOXNhWE4wTDNKdmRYUmxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxEUkNRVUZCTzBWQlFVRTdPenRCUVVGQkxGVkJRVUVzUjBGQll5eFBRVUZCTEVOQlFWRXNaMEpCUVZJN08wRkJTVkk3T3pzN096czdOa0pCUlVvc1MwRkJRU3hIUVVGUE96czJRa0ZGVUN4WFFVRkJMRWRCUVdFN1NVRkRXRHROUVVGRkxFbEJRVUVzUlVGQlRTeEhRVUZTTzAxQlFXRXNTVUZCUVN4RlFVRk5MRTFCUVc1Q08wdEJSRmNzUlVGRldEdE5RVUZGTEVsQlFVRXNSVUZCVFN4VlFVRlNPMHRCUmxjN096czJRa0ZMWWl4TFFVRkJMRWRCUVU4c1UwRkJRVHRCUVVOTUxGZEJRVThzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNXVUZCTVVNc1EwRkRVQ3hEUVVGRExFbEJSRTBzUTBGRFJDeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1ZVRkJSRHRsUVVGblFpeExRVUZETEVOQlFVRXNWVUZCUkN4SFFVRmpPMDFCUVRsQ08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVUkRPMFZCUkVZN096WkNRVWxRTEUxQlFVRXNSMEZCVVN4VFFVRkJPMWRCUTA0c1NVRkJReXhEUVVGQkxGTkJRVk1zUTBGQlF5eEpRVUZZTEVOQlFXZENMRWxCUVVrc1ZVRkJTaXhEUVVGbE8wMUJRVVVzVlVGQlFTeEZRVUZaTEVsQlFVTXNRMEZCUVN4VlFVRm1PMHRCUVdZc1EwRkJhRUk3UlVGRVRUczdPenRIUVdKeFFpeFBRVUZCTEVOQlFWRXNjMEpCUVZJN08wRkJhMEl2UWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBEYXRhc2V0Q2hpbGQsIERhdGFzZXRFbXB0eSwgRGF0YXNldExpc3QsIERhdGFzZXRMaXN0TGF5b3V0LCBEYXRhc2V0U2hvdywgTGRWaWV3ZXIsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5MZFZpZXdlciA9IHJlcXVpcmUoJy4uLy4uLy4uL3NlYXJjaC9mYWNldHNlYXJjaC92aWV3cy9ncmFwaC5jb2ZmZWUnKTtcblxuRGF0YXNldEVtcHR5ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRFbXB0eSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldEVtcHR5KCkge1xuICAgIHJldHVybiBEYXRhc2V0RW1wdHkuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0RW1wdHkucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGF0YXNldF9lbXB0eScpO1xuXG4gIERhdGFzZXRFbXB0eS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAtaXRlbSBsaXN0LWdyb3VwLWl0ZW0td2FybmluZyc7XG5cbiAgRGF0YXNldEVtcHR5LnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICByZXR1cm4gRGF0YXNldEVtcHR5O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuRGF0YXNldENoaWxkID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRDaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldENoaWxkKCkge1xuICAgIHJldHVybiBEYXRhc2V0Q2hpbGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0Q2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGF0YXNldF9jaGlsZCcpO1xuXG4gIERhdGFzZXRDaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAtaXRlbSc7XG5cbiAgRGF0YXNldENoaWxkLnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICBEYXRhc2V0Q2hpbGQucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBTZWxlY3RhYmxlQ2hpbGQ6IHt9XG4gIH07XG5cbiAgcmV0dXJuIERhdGFzZXRDaGlsZDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbkRhdGFzZXRMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRMaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEYXRhc2V0TGlzdCgpIHtcbiAgICByZXR1cm4gRGF0YXNldExpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0TGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgRGF0YXNldExpc3QucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGF0YXNldF9saXN0Jyk7XG5cbiAgRGF0YXNldExpc3QucHJvdG90eXBlLmNoaWxkVmlldyA9IERhdGFzZXRDaGlsZDtcblxuICBEYXRhc2V0TGlzdC5wcm90b3R5cGUuZW1wdHlWaWV3ID0gRGF0YXNldEVtcHR5O1xuXG4gIERhdGFzZXRMaXN0LnByb3RvdHlwZS5jaGlsZFZpZXdDb250YWluZXIgPSAndWwnO1xuXG4gIHJldHVybiBEYXRhc2V0TGlzdDtcblxufSkoTW4uQ29tcG9zaXRlVmlldyk7XG5cbkRhdGFzZXRTaG93ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRTaG93LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBEYXRhc2V0U2hvdygpIHtcbiAgICByZXR1cm4gRGF0YXNldFNob3cuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0U2hvdy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBEYXRhc2V0U2hvdy5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9kYXRhc2V0X3Nob3cnKTtcblxuICByZXR1cm4gRGF0YXNldFNob3c7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5EYXRhc2V0TGlzdExheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0TGlzdExheW91dCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGF0YXNldExpc3RMYXlvdXQoKSB7XG4gICAgcmV0dXJuIERhdGFzZXRMaXN0TGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldExpc3RMYXlvdXQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvbGF5b3V0Jyk7XG5cbiAgRGF0YXNldExpc3RMYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXItZmx1aWQnO1xuXG4gIERhdGFzZXRMaXN0TGF5b3V0LnByb3RvdHlwZS5yZWdpb25zID0ge1xuICAgIGxpc3RSZWdpb246ICdbZGF0YS1yZWdpb249bGlzdF0nLFxuICAgIGRldGFpbFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1kZXRhaWxdJ1xuICB9O1xuXG4gIERhdGFzZXRMaXN0TGF5b3V0LnByb3RvdHlwZS5vblNob3cgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGlzdFZpZXcsIHJlZjtcbiAgICBsaXN0VmlldyA9IG5ldyBEYXRhc2V0TGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KTtcbiAgICBsaXN0Vmlldy5vbignY2hpbGR2aWV3OnNlbGVjdGVkJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0RhdGFzZXQodmlldy5tb2RlbCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gICAgcmV0dXJuIChyZWYgPSB0aGlzLmNvbGxlY3Rpb24uYXQoMCkpICE9IG51bGwgPyByZWYudHJpZ2dlcignc2VsZWN0ZWQnKSA6IHZvaWQgMDtcbiAgfTtcblxuICBEYXRhc2V0TGlzdExheW91dC5wcm90b3R5cGUuc2hvd0RhdGFzZXQgPSBmdW5jdGlvbihkYXRhc2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuZGV0YWlsUmVnaW9uLnNob3cobmV3IERhdGFzZXRTaG93KHtcbiAgICAgIG1vZGVsOiBkYXRhc2V0XG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBEYXRhc2V0TGlzdExheW91dDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YXNldExpc3RMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmJHbHpkQzkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZiR2x6ZEM5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVTkJMRWxCUVVFc2FVWkJRVUU3UlVGQlFUczdPMEZCUVVFc1VVRkJRU3hIUVVGWExFOUJRVUVzUTBGQlVTeG5SRUZCVWpzN1FVRkpURHM3T3pzN096dDVRa0ZEU2l4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxESkNRVUZTT3p0NVFrRkRWaXhUUVVGQkxFZEJRVmM3TzNsQ1FVTllMRTlCUVVFc1IwRkJVenM3T3p0SFFVaG5RaXhGUVVGRkxFTkJRVU03TzBGQlQzaENPenM3T3pzN08zbENRVU5LTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc01rSkJRVkk3TzNsQ1FVTldMRk5CUVVFc1IwRkJWenM3ZVVKQlExZ3NUMEZCUVN4SFFVRlRPenQ1UWtGRlZDeFRRVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVdsQ0xFVkJRV3BDT3pzN096dEhRVTUxUWl4RlFVRkZMRU5CUVVNN08wRkJWWGhDT3pzN096czdPM2RDUVVOS0xGTkJRVUVzUjBGQlZ6czdkMEpCUTFnc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTd3dRa0ZCVWpzN2QwSkJRMVlzVTBGQlFTeEhRVUZYT3p0M1FrRkRXQ3hUUVVGQkxFZEJRVmM3TzNkQ1FVTllMR3RDUVVGQkxFZEJRVzlDT3pzN08wZEJURWtzUlVGQlJTeERRVUZET3p0QlFWTjJRanM3T3pzN096dDNRa0ZEU2l4VFFVRkJMRWRCUVZjN08zZENRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc01FSkJRVkk3T3pzN1IwRkdZeXhGUVVGRkxFTkJRVU03TzBGQlRYWkNPenM3T3pzN096aENRVU5LTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc2IwSkJRVkk3T3poQ1FVTldMRk5CUVVFc1IwRkJWenM3T0VKQlJWZ3NUMEZCUVN4SFFVTkZPMGxCUVVFc1ZVRkJRU3hGUVVGakxHOUNRVUZrTzBsQlEwRXNXVUZCUVN4RlFVRmpMSE5DUVVSa096czdPRUpCUjBZc1RVRkJRU3hIUVVGUkxGTkJRVUU3UVVGRFRpeFJRVUZCTzBsQlFVRXNVVUZCUVN4SFFVRlhMRWxCUVVrc1YwRkJTaXhEUVVGblFqdE5RVUZGTEZWQlFVRXNSVUZCV1N4SlFVRkRMRU5CUVVFc1ZVRkJaanRMUVVGb1FqdEpRVU5ZTEZGQlFWRXNRMEZCUXl4RlFVRlVMRU5CUVZrc2IwSkJRVm9zUlVGQmEwTXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFbEJRVVE3WlVGQlZTeExRVUZETEVOQlFVRXNWMEZCUkN4RFFVRmhMRWxCUVVrc1EwRkJReXhMUVVGc1FqdE5RVUZXTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGc1F6dEpRVU5CTEVsQlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1NVRkJXaXhEUVVGcFFpeFJRVUZxUWp0elJFRkRhVUlzUTBGQlJTeFBRVUZ1UWl4RFFVRXlRaXhWUVVFelFqdEZRVXBOT3pzNFFrRk5VaXhYUVVGQkxFZEJRV0VzVTBGQlF5eFBRVUZFTzFkQlExZ3NTVUZCUXl4RFFVRkJMRmxCUVZrc1EwRkJReXhKUVVGa0xFTkJRVzFDTEVsQlFVa3NWMEZCU2l4RFFVRm5RanROUVVGRkxFdEJRVUVzUlVGQlR5eFBRVUZVTzB0QlFXaENMRU5CUVc1Q08wVkJSRmM3T3pzN1IwRmthVUlzUlVGQlJTeERRVUZET3p0QlFXMUNia01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGxhYmVsKSB7XG5idWYucHVzaChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IGxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpO30uY2FsbCh0aGlzLFwibGFiZWxcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmxhYmVsOnR5cGVvZiBsYWJlbCE9PVwidW5kZWZpbmVkXCI/bGFiZWw6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiTm8gRGF0YXNldHNcIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48YSBocmVmPVxcXCIjZGF0YXNldHMvbmV3XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1sZyBidG4tb3V0bGluZS1wcmltYXJ5IHctMTAwXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtcGx1c1xcXCI+PC9pPiZuYnNwO1xcbk5ldyBBcmNoaXZlPC9hPjx1bCBjbGFzcz1cXFwibGlzdC1ncm91cCBtdC0yXFxcIj48L3VsPjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChfcywgY291bnQsIGlkLCBsYWJlbCkge1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy02XFxcIj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gbGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvaDQ+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTYgdGV4dC1yaWdodFxcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiXCIsIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWV5ZVxcXCI+PC9pPiZuYnNwO1xcblNob3c8L2E+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL2VkaXRcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtcGVuY2lsXFxcIj48L2k+Jm5ic3A7XFxuRWRpdDwvYT48YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgXCIjZGF0YXNldHMvXCIgKyAoaWQpICsgXCIvZGVzdHJveVwiLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLW91dGxpbmUtZGFuZ2VyXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdHJhc2hcXFwiPjwvaT4mbmJzcDtcXG5EZXN0cm95PC9hPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IF9zLm51bWJlckZvcm1hdChjb3VudCkpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIiBJdGVtczwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL2NhcHR1cmVcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLW1nIGJ0bi1sZyBidG4tb3V0bGluZS1wcmltYXJ5IHctMTAwXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtbGcgZmEtcGFwZXJjbGlwXFxcIj48L2k+Jm5ic3A7XFxuS25vd2xlZGdlIENhcHR1cmU8L2E+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTRcXFwiPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCBcIiNkYXRhc2V0cy9cIiArIChpZCkgKyBcIi9zZWFyY2hcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLW1nIGJ0bi1sZyBidG4tb3V0bGluZS1zdWNjZXNzIHctMTAwXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtbGcgZmEtc2VhcmNoXFxcIj48L2k+Jm5ic3A7XFxuU2VhcmNoPC9hPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy00XFxcIj48YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgXCIjZGF0YXNldHMvXCIgKyAoaWQpICsgXCIvZXhwb3J0XCIsIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiYnRuIGJ0bi1tZyBidG4tbGcgYnRuLW91dGxpbmUtc3VjY2VzcyB3LTEwMFxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWxnIGZhLWNsb3VkLWRvd25sb2FkXFxcIj48L2k+Jm5ic3A7XFxuRXhwb3J0PC9hPjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcIl9zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5fczp0eXBlb2YgX3MhPT1cInVuZGVmaW5lZFwiP19zOnVuZGVmaW5lZCxcImNvdW50XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb3VudDp0eXBlb2YgY291bnQhPT1cInVuZGVmaW5lZFwiP2NvdW50OnVuZGVmaW5lZCxcImlkXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5pZDp0eXBlb2YgaWQhPT1cInVuZGVmaW5lZFwiP2lkOnVuZGVmaW5lZCxcImxhYmVsXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5sYWJlbDp0eXBlb2YgbGFiZWwhPT1cInVuZGVmaW5lZFwiP2xhYmVsOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwibGlzdFxcXCIgY2xhc3M9XFxcImNvbC1sZy0zXFxcIj48L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJkZXRhaWxcXFwiIGNsYXNzPVxcXCJjb2wtbGctOVxcXCI+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBBcmNoaXZlSW1wb3J0ZXIsIERhdGFzZXRDcmVhdG9yLCBMYXlvdXRWaWV3LCBOZXdEYXRhc2V0Um91dGUsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5MYXlvdXRWaWV3ID0gcmVxdWlyZSgnLi92aWV3cy9sYXlvdXQnKTtcblxuRGF0YXNldENyZWF0b3IgPSByZXF1aXJlKCcuLi9jcmVhdG9yJyk7XG5cbkFyY2hpdmVJbXBvcnRlciA9IHJlcXVpcmUoJy4uL2ltcG9ydGVyJyk7XG5cbk5ld0RhdGFzZXRSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChOZXdEYXRhc2V0Um91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE5ld0RhdGFzZXRSb3V0ZSgpIHtcbiAgICByZXR1cm4gTmV3RGF0YXNldFJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgTmV3RGF0YXNldFJvdXRlLnByb3RvdHlwZS50aXRsZSA9ICdNYWdlbGxhbiAtIE5ldyBEYXRhc2V0JztcblxuICBOZXdEYXRhc2V0Um91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gW1xuICAgIHtcbiAgICAgIHRleHQ6ICdIb21lJyxcbiAgICAgIGhyZWY6ICcjJ1xuICAgIH0sIHtcbiAgICAgIHRleHQ6ICdBcmNoaXZlcycsXG4gICAgICBocmVmOiAnI2RhdGFzZXRzJ1xuICAgIH0sIHtcbiAgICAgIHRleHQ6ICdOZXcnXG4gICAgfVxuICBdO1xuXG4gIE5ld0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGF0YXNldCcpLnJlcXVlc3QoJ21vZGVsJykudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIE5ld0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3cobmV3IExheW91dFZpZXcoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBjcmVhdG9yOiBEYXRhc2V0Q3JlYXRvcixcbiAgICAgIGltcG9ydGVyOiBBcmNoaXZlSW1wb3J0ZXJcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIE5ld0RhdGFzZXRSb3V0ZTtcblxufSkocmVxdWlyZSgnaG5fcm91dGluZy9saWIvcm91dGUnKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gTmV3RGF0YXNldFJvdXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZibVYzTDNKdmRYUmxMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjMlYwTDI1bGR5OXliM1YwWlM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3cwUkVGQlFUdEZRVUZCT3pzN1FVRkJRU3hWUVVGQkxFZEJRV0VzVDBGQlFTeERRVUZSTEdkQ1FVRlNPenRCUVVOaUxHTkJRVUVzUjBGQmFVSXNUMEZCUVN4RFFVRlJMRmxCUVZJN08wRkJRMnBDTEdWQlFVRXNSMEZCYTBJc1QwRkJRU3hEUVVGUkxHRkJRVkk3TzBGQlNWbzdPenM3T3pzN05FSkJSVW9zUzBGQlFTeEhRVUZQT3pzMFFrRkZVQ3hYUVVGQkxFZEJRV0U3U1VGRFdEdE5RVUZGTEVsQlFVRXNSVUZCVFN4TlFVRlNPMDFCUVdkQ0xFbEJRVUVzUlVGQlRTeEhRVUYwUWp0TFFVUlhMRVZCUlZnN1RVRkJSU3hKUVVGQkxFVkJRVTBzVlVGQlVqdE5RVUZ2UWl4SlFVRkJMRVZCUVUwc1YwRkJNVUk3UzBGR1Z5eEZRVWRZTzAxQlFVVXNTVUZCUVN4RlFVRk5MRXRCUVZJN1MwRklWenM3T3pSQ1FVMWlMRXRCUVVFc1IwRkJUeXhUUVVGQk8xZEJRMHdzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNUMEZCTVVNc1EwRkRRU3hEUVVGRExFbEJSRVFzUTBGRFRTeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1MwRkJSRHRsUVVGWExFdEJRVU1zUTBGQlFTeExRVUZFTEVkQlFWTTdUVUZCY0VJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlJFNDdSVUZFU3pzN05FSkJTVkFzVFVGQlFTeEhRVUZSTEZOQlFVRTdWMEZEVGl4SlFVRkRMRU5CUVVFc1UwRkJVeXhEUVVGRExFbEJRVmdzUTBGQlowSXNTVUZCU1N4VlFVRktMRU5CUVdVN1RVRkJSU3hMUVVGQkxFVkJRVThzU1VGQlF5eERRVUZCTEV0QlFWWTdUVUZCYVVJc1QwRkJRU3hGUVVGVExHTkJRVEZDTzAxQlFUQkRMRkZCUVVFc1JVRkJWU3hsUVVGd1JEdExRVUZtTEVOQlFXaENPMFZCUkUwN096czdSMEZrYjBJc1QwRkJRU3hEUVVGUkxITkNRVUZTT3p0QlFXMUNPVUlzVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBBcmNoaXZlRm9ybSwgVXBsb2FkV2lkZ2V0LFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblVwbG9hZFdpZGdldCA9IHJlcXVpcmUoJy4uLy4uLy4uL2Jhc2Uvdmlld3MvdXBsb2FkL3VwbG9hZCcpO1xuXG5BcmNoaXZlRm9ybSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBcmNoaXZlRm9ybSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQXJjaGl2ZUZvcm0oKSB7XG4gICAgdGhpcy5vbkRpcmVjdG9yeVVwbG9hZCA9IGJpbmQodGhpcy5vbkRpcmVjdG9yeVVwbG9hZCwgdGhpcyk7XG4gICAgcmV0dXJuIEFyY2hpdmVGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQXJjaGl2ZUZvcm0ucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvYXJjaGl2ZV9mb3JtJyk7XG5cbiAgQXJjaGl2ZUZvcm0ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIEFyY2hpdmVGb3JtLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgTW9kZWxFdmVudHM6IHt9LFxuICAgIFN1Ym1pdEJ1dHRvbjoge31cbiAgfTtcblxuICBBcmNoaXZlRm9ybS5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICB1cGxvYWRSZWdpb246ICdbZGF0YS1yZWdpb249dXBsb2FkXSdcbiAgfTtcblxuICBBcmNoaXZlRm9ybS5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdXBsb2FkV2lkZ2V0O1xuICAgIHVwbG9hZFdpZGdldCA9IG5ldyBVcGxvYWRXaWRnZXQoe1xuICAgICAgZGlyZWN0b3J5OiB0cnVlXG4gICAgfSk7XG4gICAgdXBsb2FkV2lkZ2V0Lm9uKCdkaXJlY3Rvcnk6bG9hZGVkJywgdGhpcy5vbkRpcmVjdG9yeVVwbG9hZCk7XG4gICAgdGhpcy51cGxvYWRSZWdpb24uc2hvdyh1cGxvYWRXaWRnZXQpO1xuICAgIHJldHVybiB0aGlzLmRpc2FibGVTdWJtaXQoKTtcbiAgfTtcblxuICBBcmNoaXZlRm9ybS5wcm90b3R5cGUub25EaXJlY3RvcnlVcGxvYWQgPSBmdW5jdGlvbihmaWxlcykge1xuICAgIHRoaXMudXBsb2FkZWRGaWxlcyA9IGZpbGVzO1xuICAgIHJldHVybiB0aGlzLmVuYWJsZVN1Ym1pdCgpO1xuICB9O1xuXG4gIEFyY2hpdmVGb3JtLnByb3RvdHlwZS5vblN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkYXRhLCBqc29uO1xuICAgIGRhdGEgPSBCYWNrYm9uZS5TeXBob24uc2VyaWFsaXplKHRoaXMpO1xuICAgIGpzb24gPSB0aGlzLm9wdGlvbnMuaW1wb3J0ZXIucGFyc2UodGhpcy51cGxvYWRlZEZpbGVzLCBkYXRhLnByZWZpeCk7XG4gICAgdGhpcy5tb2RlbC5zZXQoJ2NvbnRleHQnLCBqc29uWydAY29udGV4dCddKTtcbiAgICB0aGlzLnVwbG9hZGVkR3JhcGggPSBqc29uWydAZ3JhcGgnXTtcbiAgICBkZWxldGUgZGF0YS5wcmVmaXg7XG4gICAgdGhpcy5tb2RlbC5zZXQoZGF0YSk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcmVhdG9yLmRlcGxveSh0aGlzLm1vZGVsLCB0aGlzLnVwbG9hZGVkR3JhcGgpO1xuICB9O1xuXG4gIEFyY2hpdmVGb3JtLnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gUmFkaW8uY2hhbm5lbCgnYXBwJykudHJpZ2dlcigncmVkaXJlY3QnLCAnI2RhdGFzZXRzJyk7XG4gIH07XG5cbiAgQXJjaGl2ZUZvcm0ucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnRVJST1InKTtcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcbiAgfTtcblxuICByZXR1cm4gQXJjaGl2ZUZvcm07XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFyY2hpdmVGb3JtO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZibVYzTDNacFpYZHpMMkZ5WTJocGRtVkdiM0p0TG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyRndjQzlqYjJabVpXVXZiVzlrZFd4bGN5OWtZWFJoYzJWMEwyNWxkeTkyYVdWM2N5OWhjbU5vYVhabFJtOXliUzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTeDVRa0ZCUVR0RlFVRkJPenM3TzBGQlFVRXNXVUZCUVN4SFFVRmxMRTlCUVVFc1EwRkJVU3h0UTBGQlVqczdRVUZMVkRzN096czdPenM3ZDBKQlEwb3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3d3UWtGQlVqczdkMEpCUTFZc1UwRkJRU3hIUVVGWE96dDNRa0ZGV0N4VFFVRkJMRWRCUTBVN1NVRkJRU3hYUVVGQkxFVkJRV0VzUlVGQllqdEpRVU5CTEZsQlFVRXNSVUZCWXl4RlFVUmtPenM3ZDBKQlIwWXNUMEZCUVN4SFFVTkZPMGxCUVVFc1dVRkJRU3hGUVVGakxITkNRVUZrT3pzN2QwSkJSVVlzVVVGQlFTeEhRVUZWTEZOQlFVRTdRVUZEVWl4UlFVRkJPMGxCUVVFc1dVRkJRU3hIUVVGbExFbEJRVWtzV1VGQlNpeERRVUZwUWp0TlFVRkZMRk5CUVVFc1JVRkJWeXhKUVVGaU8wdEJRV3BDTzBsQlEyWXNXVUZCV1N4RFFVRkRMRVZCUVdJc1EwRkJaMElzYTBKQlFXaENMRVZCUVc5RExFbEJRVU1zUTBGQlFTeHBRa0ZCY2tNN1NVRkRRU3hKUVVGRExFTkJRVUVzV1VGQldTeERRVUZETEVsQlFXUXNRMEZCYlVJc1dVRkJia0k3VjBGRFFTeEpRVUZETEVOQlFVRXNZVUZCUkN4RFFVRkJPMFZCU2xFN08zZENRVkZXTEdsQ1FVRkJMRWRCUVcxQ0xGTkJRVU1zUzBGQlJEdEpRVWRxUWl4SlFVRkRMRU5CUVVFc1lVRkJSQ3hIUVVGcFFqdFhRVWxxUWl4SlFVRkRMRU5CUVVFc1dVRkJSQ3hEUVVGQk8wVkJVR2xDT3p0M1FrRlZia0lzVVVGQlFTeEhRVUZWTEZOQlFVRTdRVUZIVWl4UlFVRkJPMGxCUVVFc1NVRkJRU3hIUVVGUExGRkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCYUVJc1EwRkJNRUlzU1VGQk1VSTdTVUZKVUN4SlFVRkJMRWRCUVU4c1NVRkJReXhEUVVGQkxFOUJRVThzUTBGQlF5eFJRVUZSTEVOQlFVTXNTMEZCYkVJc1EwRkJkMElzU1VGQlF5eERRVUZCTEdGQlFYcENMRVZCUVhkRExFbEJRVWtzUTBGQlF5eE5RVUUzUXp0SlFVZFFMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUjBGQlVDeERRVUZYTEZOQlFWZ3NSVUZCYzBJc1NVRkJTeXhEUVVGQkxGVkJRVUVzUTBGQk0wSTdTVUZIUVN4SlFVRkRMRU5CUVVFc1lVRkJSQ3hIUVVGcFFpeEpRVUZMTEVOQlFVRXNVVUZCUVR0SlFVZDBRaXhQUVVGUExFbEJRVWtzUTBGQlF6dEpRVWRhTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExFbEJRVmc3VjBGRFFTeEpRVUZETEVOQlFVRXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhOUVVGcVFpeERRVUYzUWl4SlFVRkRMRU5CUVVFc1MwRkJla0lzUlVGQlowTXNTVUZCUXl4RFFVRkJMR0ZCUVdwRE8wVkJjRUpST3p0M1FrRnpRbFlzVFVGQlFTeEhRVUZSTEZOQlFVRTdWMEZEVGl4TFFVRkxMRU5CUVVNc1QwRkJUaXhEUVVGakxFdEJRV1FzUTBGQmIwSXNRMEZCUXl4UFFVRnlRaXhEUVVFMlFpeFZRVUUzUWl4RlFVRjVReXhYUVVGNlF6dEZRVVJOT3p0M1FrRkxVaXhQUVVGQkxFZEJRVk1zVTBGQlF5eEhRVUZFTzBsQlExQXNUMEZCVHl4RFFVRkRMRWRCUVZJc1EwRkJXU3hQUVVGYU8xZEJRMEVzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4SFFVRmFPMFZCUms4N096czdSMEY0UkdVc1JVRkJSU3hEUVVGRE96dEJRVGhFTjBJc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgTmV3RGF0YXNldExheW91dCwgVXBsb2FkV2lkZ2V0LFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblVwbG9hZFdpZGdldCA9IHJlcXVpcmUoJy4uLy4uLy4uL2Jhc2Uvdmlld3MvdXBsb2FkL3VwbG9hZCcpO1xuXG5OZXdEYXRhc2V0TGF5b3V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE5ld0RhdGFzZXRMYXlvdXQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE5ld0RhdGFzZXRMYXlvdXQoKSB7XG4gICAgdGhpcy5vbkpzb25VcGxvYWQgPSBiaW5kKHRoaXMub25Kc29uVXBsb2FkLCB0aGlzKTtcbiAgICByZXR1cm4gTmV3RGF0YXNldExheW91dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE5ld0RhdGFzZXRMYXlvdXQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvanNvbl9mb3JtJyk7XG5cbiAgTmV3RGF0YXNldExheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgTmV3RGF0YXNldExheW91dC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIE1vZGVsRXZlbnRzOiB7fSxcbiAgICBTdWJtaXRCdXR0b246IHt9XG4gIH07XG5cbiAgTmV3RGF0YXNldExheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICB1cGxvYWRSZWdpb246ICdbZGF0YS1yZWdpb249dXBsb2FkXSdcbiAgfTtcblxuICBOZXdEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1cGxvYWRXaWRnZXQ7XG4gICAgdXBsb2FkV2lkZ2V0ID0gbmV3IFVwbG9hZFdpZGdldCgpO1xuICAgIHVwbG9hZFdpZGdldC5vbignZmlsZTpsb2FkZWQnLCB0aGlzLm9uSnNvblVwbG9hZCk7XG4gICAgdGhpcy51cGxvYWRSZWdpb24uc2hvdyh1cGxvYWRXaWRnZXQpO1xuICAgIHJldHVybiB0aGlzLmRpc2FibGVTdWJtaXQoKTtcbiAgfTtcblxuICBOZXdEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vbkpzb25VcGxvYWQgPSBmdW5jdGlvbih1cGxvYWRlZFRleHQpIHtcbiAgICB0aGlzLnBhcnNlZEpzb24gPSBKU09OLnBhcnNlKHVwbG9hZGVkVGV4dCk7XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlU3VibWl0KCk7XG4gIH07XG5cbiAgTmV3RGF0YXNldExheW91dC5wcm90b3R5cGUub25TdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGF0YTtcbiAgICBkYXRhID0gQmFja2JvbmUuU3lwaG9uLnNlcmlhbGl6ZSh0aGlzKTtcbiAgICB0aGlzLm1vZGVsLnNldCgnY29udGV4dCcsIHRoaXMucGFyc2VkSnNvblsnQGNvbnRleHQnXSk7XG4gICAgdGhpcy5tb2RlbC5zZXQoZGF0YSk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcmVhdG9yLmRlcGxveSh0aGlzLm1vZGVsLCB0aGlzLnBhcnNlZEpzb25bJ0BncmFwaCddKTtcbiAgfTtcblxuICBOZXdEYXRhc2V0TGF5b3V0LnByb3RvdHlwZS5vblN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gUmFkaW8uY2hhbm5lbCgnYXBwJykudHJpZ2dlcigncmVkaXJlY3QnLCAnI2RhdGFzZXRzJyk7XG4gIH07XG5cbiAgTmV3RGF0YXNldExheW91dC5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdFUlJPUicpO1xuICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xuICB9O1xuXG4gIHJldHVybiBOZXdEYXRhc2V0TGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBOZXdEYXRhc2V0TGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZibVYzTDNacFpYZHpMMnB6YjI1R2IzSnRMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjMlYwTDI1bGR5OTJhV1YzY3k5cWMyOXVSbTl5YlM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3c0UWtGQlFUdEZRVUZCT3pzN08wRkJRVUVzV1VGQlFTeEhRVUZsTEU5QlFVRXNRMEZCVVN4dFEwRkJVanM3UVVGTlZEczdPenM3T3pzN05rSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4MVFrRkJVanM3TmtKQlExWXNVMEZCUVN4SFFVRlhPenMyUWtGRldDeFRRVUZCTEVkQlEwVTdTVUZCUVN4WFFVRkJMRVZCUVdFc1JVRkJZanRKUVVOQkxGbEJRVUVzUlVGQll5eEZRVVJrT3pzN05rSkJSMFlzVDBGQlFTeEhRVU5GTzBsQlFVRXNXVUZCUVN4RlFVRmpMSE5DUVVGa096czdOa0pCUlVZc1VVRkJRU3hIUVVGVkxGTkJRVUU3UVVGRFVpeFJRVUZCTzBsQlFVRXNXVUZCUVN4SFFVRmxMRWxCUVVrc1dVRkJTaXhEUVVGQk8wbEJRMllzV1VGQldTeERRVUZETEVWQlFXSXNRMEZCWjBJc1lVRkJhRUlzUlVGQkswSXNTVUZCUXl4RFFVRkJMRmxCUVdoRE8wbEJRMEVzU1VGQlF5eERRVUZCTEZsQlFWa3NRMEZCUXl4SlFVRmtMRU5CUVcxQ0xGbEJRVzVDTzFkQlEwRXNTVUZCUXl4RFFVRkJMR0ZCUVVRc1EwRkJRVHRGUVVwUk96czJRa0ZWVml4WlFVRkJMRWRCUVdNc1UwRkJReXhaUVVGRU8wbEJSMW9zU1VGQlF5eERRVUZCTEZWQlFVUXNSMEZCWXl4SlFVRkpMRU5CUVVNc1MwRkJUQ3hEUVVGWExGbEJRVmc3VjBGSlpDeEpRVUZETEVOQlFVRXNXVUZCUkN4RFFVRkJPMFZCVUZrN096WkNRVlZrTEZGQlFVRXNSMEZCVlN4VFFVRkJPMEZCUjFJc1VVRkJRVHRKUVVGQkxFbEJRVUVzUjBGQlR5eFJRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVdoQ0xFTkJRVEJDTEVsQlFURkNPMGxCUjFBc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NVMEZCV0N4RlFVRnpRaXhKUVVGRExFTkJRVUVzVlVGQlZ5eERRVUZCTEZWQlFVRXNRMEZCYkVNN1NVRkhRU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4SlFVRllPMWRCUTBFc1NVRkJReXhEUVVGQkxFOUJRVThzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCYWtJc1EwRkJkMElzU1VGQlF5eERRVUZCTEV0QlFYcENMRVZCUVdkRExFbEJRVU1zUTBGQlFTeFZRVUZYTEVOQlFVRXNVVUZCUVN4RFFVRTFRenRGUVZaUk96czJRa0ZaVml4TlFVRkJMRWRCUVZFc1UwRkJRVHRYUVVOT0xFdEJRVXNzUTBGQlF5eFBRVUZPTEVOQlFXTXNTMEZCWkN4RFFVRnZRaXhEUVVGRExFOUJRWEpDTEVOQlFUWkNMRlZCUVRkQ0xFVkJRWGxETEZkQlFYcERPMFZCUkUwN096WkNRVWxTTEU5QlFVRXNSMEZCVXl4VFFVRkRMRWRCUVVRN1NVRkRVQ3hQUVVGUExFTkJRVU1zUjBGQlVpeERRVUZaTEU5QlFWbzdWMEZEUVN4UFFVRlBMRU5CUVVNc1IwRkJVaXhEUVVGWkxFZEJRVm83UlVGR1R6czdPenRIUVM5RGIwSXNSVUZCUlN4RFFVRkRPenRCUVhGRWJFTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEFyY2hpdmVGb3JtLCBJbXBvcnRTZWxlY3RvclZpZXcsIEpzb25Gb3JtLCBSZGZGb3JtLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQXJjaGl2ZUZvcm0gPSByZXF1aXJlKCcuL2FyY2hpdmVGb3JtJyk7XG5cbkpzb25Gb3JtID0gcmVxdWlyZSgnLi9qc29uRm9ybScpO1xuXG5SZGZGb3JtID0gcmVxdWlyZSgnLi9yZGZGb3JtJyk7XG5cbkltcG9ydFNlbGVjdG9yVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChJbXBvcnRTZWxlY3RvclZpZXcsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEltcG9ydFNlbGVjdG9yVmlldygpIHtcbiAgICByZXR1cm4gSW1wb3J0U2VsZWN0b3JWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgSW1wb3J0U2VsZWN0b3JWaWV3LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY29udGFpbmVyJztcblxuICBJbXBvcnRTZWxlY3RvclZpZXcucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvbGF5b3V0Jyk7XG5cbiAgSW1wb3J0U2VsZWN0b3JWaWV3LnByb3RvdHlwZS5uYXZJdGVtcyA9IFtcbiAgICB7XG4gICAgICBpY29uOiAnZmEtZm9sZGVyLW9wZW4tbycsXG4gICAgICB0ZXh0OiAnQXJjaGl2ZScsXG4gICAgICB0cmlnZ2VyOiAnYXJjaGl2ZScsXG4gICAgICBcImRlZmF1bHRcIjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIGljb246ICdmYS1jb2RlJyxcbiAgICAgIHRleHQ6ICdKU09OLUxEJyxcbiAgICAgIHRyaWdnZXI6ICdqc29uJ1xuICAgIH0sIHtcbiAgICAgIGljb246ICdmYS1maWxlJyxcbiAgICAgIHRleHQ6ICdSREYvWE1MJyxcbiAgICAgIHRyaWdnZXI6ICdyZGYnXG4gICAgfVxuICBdO1xuXG4gIEltcG9ydFNlbGVjdG9yVmlldy5wcm90b3R5cGUubmF2RXZlbnRzID0ge1xuICAgICdhcmNoaXZlJzogJ2FyY2hpdmUnLFxuICAgICdqc29uJzogJ2pzb24nLFxuICAgICdyZGYnOiAncmRmJ1xuICB9O1xuXG4gIEltcG9ydFNlbGVjdG9yVmlldy5wcm90b3R5cGUubmF2T3B0aW9ucyA9IHtcbiAgICBwaWxsczogdHJ1ZVxuICB9O1xuXG4gIEltcG9ydFNlbGVjdG9yVmlldy5wcm90b3R5cGUuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgSnNvbkZvcm0oe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBjcmVhdG9yOiB0aGlzLm9wdGlvbnMuY3JlYXRvclxuICAgIH0pKTtcbiAgfTtcblxuICBJbXBvcnRTZWxlY3RvclZpZXcucHJvdG90eXBlLmFyY2hpdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UmVnaW9uLnNob3cobmV3IEFyY2hpdmVGb3JtKHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgY3JlYXRvcjogdGhpcy5vcHRpb25zLmNyZWF0b3IsXG4gICAgICBpbXBvcnRlcjogdGhpcy5vcHRpb25zLmltcG9ydGVyXG4gICAgfSkpO1xuICB9O1xuXG4gIEltcG9ydFNlbGVjdG9yVmlldy5wcm90b3R5cGUucmRmID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFJlZ2lvbi5zaG93KG5ldyBSZGZGb3JtKHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgY3JlYXRvcjogdGhpcy5vcHRpb25zLmNyZWF0b3JcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIEltcG9ydFNlbGVjdG9yVmlldztcblxufSkocmVxdWlyZSgnbGliL3ZpZXdzL25hdicpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbXBvcnRTZWxlY3RvclZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmJtVjNMM1pwWlhkekwyeGhlVzkxZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZaR0YwWVhObGRDOXVaWGN2ZG1sbGQzTXZiR0Y1YjNWMExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeEpRVUZCTEd0RVFVRkJPMFZCUVVFN096dEJRVUZCTEZkQlFVRXNSMEZCWXl4UFFVRkJMRU5CUVZFc1pVRkJVanM3UVVGRFpDeFJRVUZCTEVkQlFXTXNUMEZCUVN4RFFVRlJMRmxCUVZJN08wRkJRMlFzVDBGQlFTeEhRVUZqTEU5QlFVRXNRMEZCVVN4WFFVRlNPenRCUVVsU096czdPenM3T3l0Q1FVTktMRk5CUVVFc1IwRkJWenM3SzBKQlExZ3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3h2UWtGQlVqczdLMEpCUlZZc1VVRkJRU3hIUVVGVk8wbEJRMUk3VFVGQlJTeEpRVUZCTEVWQlFVMHNhMEpCUVZJN1RVRkJORUlzU1VGQlFTeEZRVUZOTEZOQlFXeERPMDFCUVdkRUxFOUJRVUVzUlVGQlV5eFRRVUY2UkR0TlFVRnZSU3hEUVVGQkxFOUJRVUVzUTBGQlFTeEZRVUZUTEVsQlFUZEZPMHRCUkZFc1JVRkZVanROUVVGRkxFbEJRVUVzUlVGQlRTeFRRVUZTTzAxQlFYTkNMRWxCUVVFc1JVRkJUU3hUUVVFMVFqdE5RVUY1UXl4UFFVRkJMRVZCUVZNc1RVRkJiRVE3UzBGR1VTeEZRVWRTTzAxQlFVVXNTVUZCUVN4RlFVRk5MRk5CUVZJN1RVRkJiVUlzU1VGQlFTeEZRVUZOTEZOQlFYcENPMDFCUVhWRExFOUJRVUVzUlVGQlV5eExRVUZvUkR0TFFVaFJPenM3SzBKQlRWWXNVMEZCUVN4SFFVTkZPMGxCUVVFc1UwRkJRU3hGUVVGWkxGTkJRVm83U1VGRFFTeE5RVUZCTEVWQlFWa3NUVUZFV2p0SlFVVkJMRXRCUVVFc1JVRkJXU3hMUVVaYU96czdLMEpCU1VZc1ZVRkJRU3hIUVVORk8wbEJRVUVzUzBGQlFTeEZRVUZQTEVsQlFWQTdPenNyUWtGRlJpeEpRVUZCTEVkQlFVMHNVMEZCUVR0WFFVTktMRWxCUVVNc1EwRkJRU3hoUVVGaExFTkJRVU1zU1VGQlppeERRVUZ2UWl4SlFVRkpMRkZCUVVvc1EwRkJZVHROUVVGRkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNTMEZCVmp0TlFVRnBRaXhQUVVGQkxFVkJRVk1zU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4UFFVRnVRenRMUVVGaUxFTkJRWEJDTzBWQlJFazdPeXRDUVVkT0xFOUJRVUVzUjBGQlV5eFRRVUZCTzFkQlExQXNTVUZCUXl4RFFVRkJMR0ZCUVdFc1EwRkJReXhKUVVGbUxFTkJRVzlDTEVsQlFVa3NWMEZCU2l4RFFVRm5RanROUVVGRkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNTMEZCVmp0TlFVRnBRaXhQUVVGQkxFVkJRVk1zU1VGQlF5eERRVUZCTEU5QlFVOHNRMEZCUXl4UFFVRnVRenROUVVFMFF5eFJRVUZCTEVWQlFWVXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhSUVVFdlJEdExRVUZvUWl4RFFVRndRanRGUVVSUE96c3JRa0ZIVkN4SFFVRkJMRWRCUVVzc1UwRkJRVHRYUVVOSUxFbEJRVU1zUTBGQlFTeGhRVUZoTEVOQlFVTXNTVUZCWml4RFFVRnZRaXhKUVVGSkxFOUJRVW9zUTBGQldUdE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanROUVVGcFFpeFBRVUZCTEVWQlFWTXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhQUVVGdVF6dExRVUZhTEVOQlFYQkNPMFZCUkVjN096czdSMEY0UWpCQ0xFOUJRVUVzUTBGQlVTeGxRVUZTT3p0QlFUWkNha01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBSZGZGb3JtLCBVcGxvYWRXaWRnZXQsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuVXBsb2FkV2lkZ2V0ID0gcmVxdWlyZSgnLi4vLi4vLi4vYmFzZS92aWV3cy91cGxvYWQvdXBsb2FkJyk7XG5cblJkZkZvcm0gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoUmRmRm9ybSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUmRmRm9ybSgpIHtcbiAgICB0aGlzLm9uSnNvblVwbG9hZCA9IGJpbmQodGhpcy5vbkpzb25VcGxvYWQsIHRoaXMpO1xuICAgIHJldHVybiBSZGZGb3JtLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUmRmRm9ybS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9yZGZfZm9ybScpO1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBNb2RlbEV2ZW50czoge30sXG4gICAgU3VibWl0QnV0dG9uOiB7fVxuICB9O1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgdXBsb2FkUmVnaW9uOiAnW2RhdGEtcmVnaW9uPXVwbG9hZF0nXG4gIH07XG5cbiAgUmRmRm9ybS5wcm90b3R5cGUudWkgPSB7XG4gICAgZGlySW5wdXQ6ICdbbmFtZT1kaXJdJ1xuICB9O1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2hhbmdlIEB1aS5kaXJJbnB1dCc6ICdvbkRpckNoYW5nZSdcbiAgfTtcblxuICBSZGZGb3JtLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1cGxvYWRXaWRnZXQ7XG4gICAgdXBsb2FkV2lkZ2V0ID0gbmV3IFVwbG9hZFdpZGdldCgpO1xuICAgIHVwbG9hZFdpZGdldC5vbignZmlsZTpsb2FkZWQnLCB0aGlzLm9uSnNvblVwbG9hZCk7XG4gICAgdGhpcy51cGxvYWRSZWdpb24uc2hvdyh1cGxvYWRXaWRnZXQpO1xuICAgIHJldHVybiB0aGlzLmRpc2FibGVTdWJtaXQoKTtcbiAgfTtcblxuICBSZGZGb3JtLnByb3RvdHlwZS5vbkpzb25VcGxvYWQgPSBmdW5jdGlvbih1cGxvYWRlZFRleHQpIHt9O1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLm9uU3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGE7XG4gICAgZGF0YSA9IEJhY2tib25lLlN5cGhvbi5zZXJpYWxpemUodGhpcyk7XG4gICAgdGhpcy5tb2RlbC5zZXQoZGF0YSk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcmVhdG9yLmRlcGxveSh0aGlzLm1vZGVsLCB0aGlzLnVwbG9hZGVkR3JhcGgpO1xuICB9O1xuXG4gIFJkZkZvcm0ucHJvdG90eXBlLm9uU3luYyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBSYWRpby5jaGFubmVsKCdhcHAnKS50cmlnZ2VyKCdyZWRpcmVjdCcsICcjZGF0YXNldHMnKTtcbiAgfTtcblxuICBSZGZGb3JtLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgY29uc29sZS5sb2coJ0VSUk9SJyk7XG4gICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XG4gIH07XG5cbiAgcmV0dXJuIFJkZkZvcm07XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJkZkZvcm07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmJtVjNMM1pwWlhkekwzSmtaa1p2Y20wdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJoZEdGelpYUXZibVYzTDNacFpYZHpMM0prWmtadmNtMHVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc2NVSkJRVUU3UlVGQlFUczdPenRCUVVGQkxGbEJRVUVzUjBGQlpTeFBRVUZCTEVOQlFWRXNiVU5CUVZJN08wRkJTMVE3T3pzN096czdPMjlDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNjMEpCUVZJN08yOUNRVU5XTEZOQlFVRXNSMEZCVnpzN2IwSkJSVmdzVTBGQlFTeEhRVU5GTzBsQlFVRXNWMEZCUVN4RlFVRmhMRVZCUVdJN1NVRkRRU3haUVVGQkxFVkJRV01zUlVGRVpEczdPMjlDUVVkR0xFOUJRVUVzUjBGRFJUdEpRVUZCTEZsQlFVRXNSVUZCWXl4elFrRkJaRHM3TzI5Q1FVVkdMRVZCUVVFc1IwRkRSVHRKUVVGQkxGRkJRVUVzUlVGQlZTeFpRVUZXT3pzN2IwSkJSVVlzVFVGQlFTeEhRVU5GTzBsQlFVRXNjVUpCUVVFc1JVRkJkVUlzWVVGQmRrSTdPenR2UWtGRlJpeFJRVUZCTEVkQlFWVXNVMEZCUVR0QlFVTlNMRkZCUVVFN1NVRkJRU3haUVVGQkxFZEJRV1VzU1VGQlNTeFpRVUZLTEVOQlFVRTdTVUZEWml4WlFVRlpMRU5CUVVNc1JVRkJZaXhEUVVGblFpeGhRVUZvUWl4RlFVRXJRaXhKUVVGRExFTkJRVUVzV1VGQmFFTTdTVUZEUVN4SlFVRkRMRU5CUVVFc1dVRkJXU3hEUVVGRExFbEJRV1FzUTBGQmJVSXNXVUZCYmtJN1YwRkRRU3hKUVVGRExFTkJRVUVzWVVGQlJDeERRVUZCTzBWQlNsRTdPMjlDUVZWV0xGbEJRVUVzUjBGQll5eFRRVUZETEZsQlFVUXNSMEZCUVRzN2IwSkJhVUprTEZGQlFVRXNSMEZCVlN4VFFVRkJPMEZCUjFJc1VVRkJRVHRKUVVGQkxFbEJRVUVzUjBGQlR5eFJRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVdoQ0xFTkJRVEJDTEVsQlFURkNPMGxCUjFBc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NTVUZCV0R0WFFVTkJMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFXcENMRU5CUVhkQ0xFbEJRVU1zUTBGQlFTeExRVUY2UWl4RlFVRm5ReXhKUVVGRExFTkJRVUVzWVVGQmFrTTdSVUZRVVRzN2IwSkJVMVlzVFVGQlFTeEhRVUZSTEZOQlFVRTdWMEZEVGl4TFFVRkxMRU5CUVVNc1QwRkJUaXhEUVVGakxFdEJRV1FzUTBGQmIwSXNRMEZCUXl4UFFVRnlRaXhEUVVFMlFpeFZRVUUzUWl4RlFVRjVReXhYUVVGNlF6dEZRVVJOT3p0dlFrRkpVaXhQUVVGQkxFZEJRVk1zVTBGQlF5eEhRVUZFTzBsQlExQXNUMEZCVHl4RFFVRkRMRWRCUVZJc1EwRkJXU3hQUVVGYU8xZEJRMEVzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4SFFVRmFPMFZCUms4N096czdSMEY2UkZjc1JVRkJSU3hEUVVGRE96dEJRU3RFZWtJc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8ZmllbGRzZXRcIiArIChqYWRlLmNscyhbJ2Zvcm0tZ3JvdXAnLG9wdHMuZm9ybUdyb3VwQ3NzXSwgW251bGwsdHJ1ZV0pKSArIFwiPlwiKTtcbmlmICggb3B0cy5sYWJlbClcbntcbmJ1Zi5wdXNoKFwiPGxhYmVsIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wtbGFiZWxcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy5sYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9sYWJlbD5cIik7XG59XG5ibG9jayAmJiBibG9jaygpO1xuYnVmLnB1c2goXCI8L2ZpZWxkc2V0PlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdLmNhbGwoe1xuYmxvY2s6IGZ1bmN0aW9uKCl7XG5idWYucHVzaChcIjxpbnB1dFwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1wicGxhY2Vob2xkZXJcIjogamFkZS5lc2NhcGUob3B0cy5wbGFjZWhvbGRlciksXCJuYW1lXCI6IGphZGUuZXNjYXBlKG9wdHMubmFtZSksXCJ0eXBlXCI6IGphZGUuZXNjYXBlKG9wdHMudHlwZSksXCJ2YWx1ZVwiOiBqYWRlLmVzY2FwZShvcHRzLnZhbHVlKSxcImNsYXNzXCI6IFwiZm9ybS1jb250cm9sXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiLz5cIik7XG59XG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJidXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YnV0dG9uXCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJ0eXBlXCI6IFwiYnV0dG9uXCIsXCJjbGFzc1wiOiBcImJ0blwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMuaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLG9wdHMuaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYnV0dG9uPlwiKTtcbn07XG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wic3VibWl0QnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICghKCBvcHRzLnRleHQpKVxue1xub3B0cy50ZXh0ID0gJ1N1Ym1pdCdcbn1cbmlmICghKCBvcHRzLmljb24pKVxue1xub3B0cy5pY29uID0gJ2ZhLWNoZWNrJ1xufVxuamFkZV9taXhpbnNbXCJidXR0b25cIl0uY2FsbCh7XG5hdHRyaWJ1dGVzOiBqYWRlLm1lcmdlKFt7XCJkYXRhLWNsaWNrXCI6IFwic3VibWl0XCIsXCJjbGFzc1wiOiBcImJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIn0sYXR0cmlidXRlc10pXG59LCBvcHRzKTtcbn07XG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiYWxlcnQgYWxlcnQtcHJpbWFyeVxcXCI+PHAgY2xhc3M9XFxcImxlYWQgbWItMFxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWZvbGRlci1vcGVuLW9cXFwiPjwvaT4mbmJzcDtcXG5BcmNoaXZlPC9wPjxwIGNsYXNzPVxcXCJsZWFkIG1iLTBcXFwiPkltcG9ydHMgYSBmaWxlIHN5c3RlbSBkaXJlY3RvcnkgZm9yIHByb2Nlc3NpbmcgYnkgTWFnZWxsYW4uPC9wPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0oeyBsYWJlbDogJ0xhYmVsJywgcGxhY2Vob2xkZXI6ICdMYWJlbCcsIG5hbWU6ICdsYWJlbCcsIHR5cGU6ICd0ZXh0JyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnRGlyZWN0b3J5IFByZWZpeCcsIHBsYWNlaG9sZGVyOiAnRGlyZWN0b3J5IFByZWZpeCcsIG5hbWU6ICdwcmVmaXgnLCB0eXBlOiAndGV4dCcgfSk7XG5idWYucHVzaChcIjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJ1cGxvYWRcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTIgdGV4dC1yaWdodFxcXCI+PGEgaHJlZj1cXFwiI2RhdGFzZXRzXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdGltZXNcXFwiPjwvaT4mbmJzcDtcXG5DYW5jZWw8L2E+XCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0oe30pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmphZGVfbWl4aW5zW1wiZm9ybUdyb3VwXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGZpZWxkc2V0XCIgKyAoamFkZS5jbHMoWydmb3JtLWdyb3VwJyxvcHRzLmZvcm1Hcm91cENzc10sIFtudWxsLHRydWVdKSkgKyBcIj5cIik7XG5pZiAoIG9wdHMubGFiZWwpXG57XG5idWYucHVzaChcIjxsYWJlbCBjbGFzcz1cXFwiZm9ybS1jb250cm9sLWxhYmVsXFxcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMubGFiZWwpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvbGFiZWw+XCIpO1xufVxuYmxvY2sgJiYgYmxvY2soKTtcbmJ1Zi5wdXNoKFwiPC9maWVsZHNldD5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXS5jYWxsKHtcbmJsb2NrOiBmdW5jdGlvbigpe1xuYnVmLnB1c2goXCI8aW5wdXRcIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInBsYWNlaG9sZGVyXCI6IGphZGUuZXNjYXBlKG9wdHMucGxhY2Vob2xkZXIpLFwibmFtZVwiOiBqYWRlLmVzY2FwZShvcHRzLm5hbWUpLFwidHlwZVwiOiBqYWRlLmVzY2FwZShvcHRzLnR5cGUpLFwidmFsdWVcIjogamFkZS5lc2NhcGUob3B0cy52YWx1ZSksXCJjbGFzc1wiOiBcImZvcm0tY29udHJvbFwifSxhdHRyaWJ1dGVzXSksIGZhbHNlKSkgKyBcIi8+XCIpO1xufVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5idWYucHVzaChcIlwiKTtcbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihvcHRzKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmJ1Zi5wdXNoKFwiPGJ1dHRvblwiICsgKGphZGUuYXR0cnMoamFkZS5tZXJnZShbe1widHlwZVwiOiBcImJ1dHRvblwiLFwiY2xhc3NcIjogXCJidG5cIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmljb24pXG57XG5idWYucHVzaChcIjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JyxvcHRzLmljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XCIpO1xufVxuYnVmLnB1c2goKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb3B0cy50ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2J1dHRvbj5cIik7XG59O1xuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoISggb3B0cy50ZXh0KSlcbntcbm9wdHMudGV4dCA9ICdTdWJtaXQnXG59XG5pZiAoISggb3B0cy5pY29uKSlcbntcbm9wdHMuaWNvbiA9ICdmYS1jaGVjaydcbn1cbmphZGVfbWl4aW5zW1wiYnV0dG9uXCJdLmNhbGwoe1xuYXR0cmlidXRlczogamFkZS5tZXJnZShbe1wiZGF0YS1jbGlja1wiOiBcInN1Ym1pdFwiLFwiY2xhc3NcIjogXCJidG4tb3V0bGluZS1zdWNjZXNzXCJ9LGF0dHJpYnV0ZXNdKVxufSwgb3B0cyk7XG59O1xuYnVmLnB1c2goXCJcIik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImFsZXJ0IGFsZXJ0LXByaW1hcnlcXFwiPjxwIGNsYXNzPVxcXCJsZWFkIG1iLTBcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1jb2RlXFxcIj48L2k+Jm5ic3A7XFxuSlNPTi1MRDwvcD48cCBjbGFzcz1cXFwibGVhZCBtYi0wXFxcIj5JbXBvcnRzIGFuIGV4aXN0aW5nIEpTT04tTEQga25vd2xlZGdlIGdyYXBoIGZvciBwcm9jZXNzaW5nIGJ5IE1hZ2VsbGFuLjwvcD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdKHsgbGFiZWw6ICdMYWJlbCcsIHBsYWNlaG9sZGVyOiAnTGFiZWwnLCBuYW1lOiAnbGFiZWwnLCB0eXBlOiAndGV4dCcgfSk7XG5idWYucHVzaChcIjwvZGl2PjxkaXYgZGF0YS1yZWdpb249XFxcInVwbG9hZFxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aHIvPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMiB0ZXh0LXJpZ2h0XFxcIj48YSBocmVmPVxcXCIjZGF0YXNldHNcXFwiIGNsYXNzPVxcXCJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5IG1yLTJcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS10aW1lc1xcXCI+PC9pPiZuYnNwO1xcbkNhbmNlbDwvYT5cIik7XG5qYWRlX21peGluc1tcInN1Ym1pdEJ1dHRvblwiXSh7fSk7XG5idWYucHVzaChcIjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWJvZHlcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPk5ldyBBcmNoaXZlPC9oND48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwibmF2XFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxoci8+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiY29udGVudFxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0uY2FsbCh7XG5ibG9jazogZnVuY3Rpb24oKXtcbmJ1Zi5wdXNoKFwiPGlucHV0XCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJwbGFjZWhvbGRlclwiOiBqYWRlLmVzY2FwZShvcHRzLnBsYWNlaG9sZGVyKSxcIm5hbWVcIjogamFkZS5lc2NhcGUob3B0cy5uYW1lKSxcInR5cGVcIjogamFkZS5lc2NhcGUob3B0cy50eXBlKSxcInZhbHVlXCI6IGphZGUuZXNjYXBlKG9wdHMudmFsdWUpLFwiY2xhc3NcIjogXCJmb3JtLWNvbnRyb2xcIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCIvPlwiKTtcbn1cbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnU3VibWl0J1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtY2hlY2snXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJzdWJtaXRcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc3VjY2Vzc1wifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1wcmltYXJ5XFxcIj48cCBjbGFzcz1cXFwibGVhZCBtYi0wXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtZmlsZVxcXCI+PC9pPiZuYnNwO1xcblJERi9YTUw8L3A+PHAgY2xhc3M9XFxcImxlYWQgbWItMFxcXCI+SW1wb3J0cyBhbiBleGlzdGluZyBSREYvWE1MIGtub3dsZWRnZSBncmFwaCBmb3IgcHJvY2Vzc2luZyBieSBNYWdlbGxhbi48L3A+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj5cIik7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnTGFiZWwnLCBwbGFjZWhvbGRlcjogJ0xhYmVsJywgbmFtZTogJ2xhYmVsJywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJ1cGxvYWRcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTIgdGV4dC1yaWdodFxcXCI+PGEgaHJlZj1cXFwiI2RhdGFzZXRzXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXNlY29uZGFyeSBtci0yXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdGltZXNcXFwiPjwvaT4mbmJzcDtcXG5DYW5jZWw8L2E+XCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0oe30pO1xuYnVmLnB1c2goXCI8L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIENhcHR1cmVSb3V0ZSwgQ29uZmlnUm91dGUsIERhdGFzZXRSb3V0ZXIsIERlc3Ryb3lSb3V0ZSwgRWRpdFJvdXRlLCBFeHBvcnRSb3V0ZSwgTGlzdFJvdXRlLCBOZXdSb3V0ZSwgU2VhcmNoUm91dGUsIFNob3dSb3V0ZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbnJlcXVpcmUoJy4vZmFjdG9yeScpO1xuXG5yZXF1aXJlKCcuL2NyZWF0b3InKTtcblxuTGlzdFJvdXRlID0gcmVxdWlyZSgnLi9saXN0L3JvdXRlJyk7XG5cblNob3dSb3V0ZSA9IHJlcXVpcmUoJy4vc2hvdy9yb3V0ZScpO1xuXG5TZWFyY2hSb3V0ZSA9IHJlcXVpcmUoJy4vc2VhcmNoL3JvdXRlJyk7XG5cbkNvbmZpZ1JvdXRlID0gcmVxdWlyZSgnLi9jb25maWcvcm91dGUnKTtcblxuTmV3Um91dGUgPSByZXF1aXJlKCcuL25ldy9yb3V0ZScpO1xuXG5FZGl0Um91dGUgPSByZXF1aXJlKCcuL2VkaXQvcm91dGUnKTtcblxuRGVzdHJveVJvdXRlID0gcmVxdWlyZSgnLi9kZXN0cm95L3JvdXRlJyk7XG5cbkV4cG9ydFJvdXRlID0gcmVxdWlyZSgnLi9leHBvcnQvcm91dGUnKTtcblxuQ2FwdHVyZVJvdXRlID0gcmVxdWlyZSgnLi9rbm93bGVkZ2VfY2FwdHVyZS9yb3V0ZScpO1xuXG5EYXRhc2V0Um91dGVyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERhdGFzZXRSb3V0ZXIsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRSb3V0ZXIoKSB7XG4gICAgcmV0dXJuIERhdGFzZXRSb3V0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBEYXRhc2V0Um91dGVyLnByb3RvdHlwZS5yb3V0ZXMgPSB7XG4gICAgJ2RhdGFzZXRzKC8pJzogJ2xpc3QnLFxuICAgICdkYXRhc2V0cy9uZXcoLyknOiAnbmV3JyxcbiAgICAnZGF0YXNldHMvOmlkKC8pJzogJ3Nob3cnLFxuICAgICdkYXRhc2V0cy86aWQvc2VhcmNoKC8pJzogJ3NlYXJjaCcsXG4gICAgJ2RhdGFzZXRzLzppZC9jYXB0dXJlKC8pJzogJ2tub3dsZWRnZUNhcHR1cmUnLFxuICAgICdkYXRhc2V0cy86aWQvY29uZmlnKC8pJzogJ2NvbmZpZycsXG4gICAgJ2RhdGFzZXRzLzppZC9leHBvcnQoLyknOiAnZXhwb3J0JyxcbiAgICAnZGF0YXNldHMvOmlkL2VkaXQoLyknOiAnZWRpdCcsXG4gICAgJ2RhdGFzZXRzLzppZC9kZXN0cm95KC8pJzogJ2Rlc3Ryb3knXG4gIH07XG5cbiAgRGF0YXNldFJvdXRlci5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgTGlzdFJvdXRlKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXJcbiAgICB9KTtcbiAgfTtcblxuICBEYXRhc2V0Um91dGVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gbmV3IFNob3dSb3V0ZSh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgaWQ6IGlkXG4gICAgfSk7XG4gIH07XG5cbiAgRGF0YXNldFJvdXRlci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gbmV3IFNlYXJjaFJvdXRlKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICBpZDogaWRcbiAgICB9KTtcbiAgfTtcblxuICBEYXRhc2V0Um91dGVyLnByb3RvdHlwZS5rbm93bGVkZ2VDYXB0dXJlID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gbmV3IENhcHR1cmVSb3V0ZSh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgaWQ6IGlkXG4gICAgfSk7XG4gIH07XG5cbiAgRGF0YXNldFJvdXRlci5wcm90b3R5cGUuY29uZmlnID0gZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gbmV3IENvbmZpZ1JvdXRlKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICBpZDogaWRcbiAgICB9KTtcbiAgfTtcblxuICBEYXRhc2V0Um91dGVyLnByb3RvdHlwZVtcImV4cG9ydFwiXSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIG5ldyBFeHBvcnRSb3V0ZSh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgaWQ6IGlkXG4gICAgfSk7XG4gIH07XG5cbiAgRGF0YXNldFJvdXRlci5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIG5ldyBFZGl0Um91dGUoe1xuICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgIGlkOiBpZFxuICAgIH0pO1xuICB9O1xuXG4gIERhdGFzZXRSb3V0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiBuZXcgRGVzdHJveVJvdXRlKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICBpZDogaWRcbiAgICB9KTtcbiAgfTtcblxuICBEYXRhc2V0Um91dGVyLnByb3RvdHlwZVtcIm5ld1wiXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgTmV3Um91dGUoe1xuICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lclxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBEYXRhc2V0Um91dGVyO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZXInKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0YXNldFJvdXRlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2Y205MWRHVnlMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjMlYwTDNKdmRYUmxjaTVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTd3lTRUZCUVR0RlFVRkJPenM3UVVGQlFTeFBRVUZCTEVOQlFWRXNWMEZCVWpzN1FVRkRRU3hQUVVGQkxFTkJRVkVzVjBGQlVqczdRVUZGUVN4VFFVRkJMRWRCUVdkQ0xFOUJRVUVzUTBGQlVTeGpRVUZTT3p0QlFVTm9RaXhUUVVGQkxFZEJRV2RDTEU5QlFVRXNRMEZCVVN4alFVRlNPenRCUVVOb1FpeFhRVUZCTEVkQlFXZENMRTlCUVVFc1EwRkJVU3huUWtGQlVqczdRVUZEYUVJc1YwRkJRU3hIUVVGblFpeFBRVUZCTEVOQlFWRXNaMEpCUVZJN08wRkJRMmhDTEZGQlFVRXNSMEZCWjBJc1QwRkJRU3hEUVVGUkxHRkJRVkk3TzBGQlEyaENMRk5CUVVFc1IwRkJaMElzVDBGQlFTeERRVUZSTEdOQlFWSTdPMEZCUTJoQ0xGbEJRVUVzUjBGQlowSXNUMEZCUVN4RFFVRlJMR2xDUVVGU096dEJRVU5vUWl4WFFVRkJMRWRCUVdkQ0xFOUJRVUVzUTBGQlVTeG5Ra0ZCVWpzN1FVRkRhRUlzV1VGQlFTeEhRVUZuUWl4UFFVRkJMRU5CUVZFc01rSkJRVkk3TzBGQlNWWTdPenM3T3pzN01FSkJSVW9zVFVGQlFTeEhRVU5GTzBsQlFVRXNZVUZCUVN4RlFVRTBRaXhOUVVFMVFqdEpRVU5CTEdsQ1FVRkJMRVZCUVRSQ0xFdEJSRFZDTzBsQlJVRXNhVUpCUVVFc1JVRkJORUlzVFVGR05VSTdTVUZIUVN4M1FrRkJRU3hGUVVFMFFpeFJRVWcxUWp0SlFVbEJMSGxDUVVGQkxFVkJRVFJDTEd0Q1FVbzFRanRKUVV0QkxIZENRVUZCTEVWQlFUUkNMRkZCVERWQ08wbEJUVUVzZDBKQlFVRXNSVUZCTkVJc1VVRk9OVUk3U1VGUFFTeHpRa0ZCUVN4RlFVRTBRaXhOUVZBMVFqdEpRVkZCTEhsQ1FVRkJMRVZCUVRSQ0xGTkJValZDT3pzN01FSkJWVVlzU1VGQlFTeEhRVUZOTEZOQlFVRTdWMEZEU2l4SlFVRkpMRk5CUVVvc1EwRkJZenROUVVGRkxGTkJRVUVzUlVGQlZ5eEpRVUZETEVOQlFVRXNVMEZCWkR0TFFVRmtPMFZCUkVrN096QkNRVWRPTEVsQlFVRXNSMEZCVFN4VFFVRkRMRVZCUVVRN1YwRkRTaXhKUVVGSkxGTkJRVW9zUTBGQll6dE5RVUZGTEZOQlFVRXNSVUZCVnl4SlFVRkRMRU5CUVVFc1UwRkJaRHROUVVGNVFpeEZRVUZCTEVWQlFVa3NSVUZCTjBJN1MwRkJaRHRGUVVSSk96c3dRa0ZIVGl4TlFVRkJMRWRCUVZFc1UwRkJReXhGUVVGRU8xZEJRMDRzU1VGQlNTeFhRVUZLTEVOQlFXZENPMDFCUVVVc1UwRkJRU3hGUVVGWExFbEJRVU1zUTBGQlFTeFRRVUZrTzAxQlFYbENMRVZCUVVFc1JVRkJTU3hGUVVFM1FqdExRVUZvUWp0RlFVUk5PenN3UWtGSFVpeG5Ra0ZCUVN4SFFVRnJRaXhUUVVGRExFVkJRVVE3VjBGRGFFSXNTVUZCU1N4WlFVRktMRU5CUVdsQ08wMUJRVVVzVTBGQlFTeEZRVUZYTEVsQlFVTXNRMEZCUVN4VFFVRmtPMDFCUVhsQ0xFVkJRVUVzUlVGQlNTeEZRVUUzUWp0TFFVRnFRanRGUVVSblFqczdNRUpCUjJ4Q0xFMUJRVUVzUjBGQlVTeFRRVUZETEVWQlFVUTdWMEZEVGl4SlFVRkpMRmRCUVVvc1EwRkJaMEk3VFVGQlJTeFRRVUZCTEVWQlFWY3NTVUZCUXl4RFFVRkJMRk5CUVdRN1RVRkJlVUlzUlVGQlFTeEZRVUZKTEVWQlFUZENPMHRCUVdoQ08wVkJSRTA3T3pKQ1FVZFNMRkZCUVVFc1IwRkJVU3hUUVVGRExFVkJRVVE3VjBGRFRpeEpRVUZKTEZkQlFVb3NRMEZCWjBJN1RVRkJSU3hUUVVGQkxFVkJRVmNzU1VGQlF5eERRVUZCTEZOQlFXUTdUVUZCZVVJc1JVRkJRU3hGUVVGSkxFVkJRVGRDTzB0QlFXaENPMFZCUkUwN096QkNRVWRTTEVsQlFVRXNSMEZCVFN4VFFVRkRMRVZCUVVRN1YwRkRTaXhKUVVGSkxGTkJRVW9zUTBGQll6dE5RVUZGTEZOQlFVRXNSVUZCVnl4SlFVRkRMRU5CUVVFc1UwRkJaRHROUVVGNVFpeEZRVUZCTEVWQlFVa3NSVUZCTjBJN1MwRkJaRHRGUVVSSk96c3dRa0ZIVGl4UFFVRkJMRWRCUVZNc1UwRkJReXhGUVVGRU8xZEJRMUFzU1VGQlNTeFpRVUZLTEVOQlFXbENPMDFCUVVVc1UwRkJRU3hGUVVGWExFbEJRVU1zUTBGQlFTeFRRVUZrTzAxQlFYbENMRVZCUVVFc1JVRkJTU3hGUVVFM1FqdExRVUZxUWp0RlFVUlBPenN5UWtGSFZDeExRVUZCTEVkQlFVc3NVMEZCUVR0WFFVTklMRWxCUVVrc1VVRkJTaXhEUVVGaE8wMUJRVVVzVTBGQlFTeEZRVUZYTEVsQlFVTXNRMEZCUVN4VFFVRmtPMHRCUVdJN1JVRkVSenM3T3p0SFFYSkRjVUlzVDBGQlFTeERRVUZSTEhWQ1FVRlNPenRCUVRCRE5VSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIERhdGFzZXRTZWFyY2hSb3V0ZSwgU2VhcmNoVmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblNlYXJjaFZpZXcgPSByZXF1aXJlKCcuLi8uLi9zZWFyY2gvZmFjZXRzZWFyY2gvdmlld3MvbGF5b3V0Jyk7XG5cbkRhdGFzZXRTZWFyY2hSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChEYXRhc2V0U2VhcmNoUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERhdGFzZXRTZWFyY2hSb3V0ZSgpIHtcbiAgICByZXR1cm4gRGF0YXNldFNlYXJjaFJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRGF0YXNldFNlYXJjaFJvdXRlLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIk1hZ2VsbGFuIC0gXCIgKyAodGhpcy5tb2RlbC5nZXQoJ2xhYmVsJykpICsgXCIgLSBTZWFyY2hcIjtcbiAgfTtcblxuICBEYXRhc2V0U2VhcmNoUm91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGV4dDogJ0hvbWUnLFxuICAgICAgICBocmVmOiAnIydcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDogJ0FyY2hpdmVzJyxcbiAgICAgICAgaHJlZjogJyNkYXRhc2V0cydcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDogXCJcIiArICh0aGlzLm1vZGVsLmdldCgnbGFiZWwnKSksXG4gICAgICAgIGhyZWY6IFwiI2RhdGFzZXRzL1wiICsgdGhpcy5tb2RlbC5pZFxuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiAnU2VhcmNoJ1xuICAgICAgfVxuICAgIF07XG4gIH07XG5cbiAgRGF0YXNldFNlYXJjaFJvdXRlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGF0YXNldCcpLnJlcXVlc3QoJ21vZGVsJywgaWQpLnRoZW4oZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgICBfdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5tb2RlbC5mZXRjaERhdGFwb2ludHMoKS50aGVuKGZ1bmN0aW9uKGRhdGFwb2ludHMpIHtcbiAgICAgICAgICAgIF90aGlzLmRhdGFwb2ludHMgPSBkYXRhcG9pbnRzO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1vZGVsLmZldGNoRmFjZXRzKCkudGhlbihmdW5jdGlvbihmYWNldENvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgX3RoaXMuZmFjZXRDb2xsZWN0aW9uID0gZmFjZXRDb2xsZWN0aW9uO1xuICAgICAgICAgICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnc2VhcmNoOnJlc3VsdCcpLnJlcXVlc3QoJ2NvbGxlY3Rpb24nKS50aGVuKGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIERhdGFzZXRTZWFyY2hSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3cobmV3IFNlYXJjaFZpZXcoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb24sXG4gICAgICBpdGVtczogdGhpcy5kYXRhcG9pbnRzLFxuICAgICAgZmFjZXRDb2xsZWN0aW9uOiB0aGlzLmZhY2V0Q29sbGVjdGlvblxuICAgIH0pKTtcbiAgfTtcblxuICByZXR1cm4gRGF0YXNldFNlYXJjaFJvdXRlO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZScpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhc2V0U2VhcmNoUm91dGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmMyVmhjbU5vTDNKdmRYUmxMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5a1lYUmhjMlYwTDNObFlYSmphQzl5YjNWMFpTNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNTVUZCUVN3NFFrRkJRVHRGUVVGQk96czdRVUZCUVN4VlFVRkJMRWRCUVdFc1QwRkJRU3hEUVVGUkxIVkRRVUZTT3p0QlFVbFFPenM3T3pzN095dENRVVZLTEV0QlFVRXNSMEZCVHl4VFFVRkJPMEZCUTB3c1YwRkJUeXhoUVVGQkxFZEJRV0VzUTBGQlF5eEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWRCUVZBc1EwRkJWeXhQUVVGWUxFTkJRVVFzUTBGQllpeEhRVUZyUXp0RlFVUndRenM3SzBKQlIxQXNWMEZCUVN4SFFVRmhMRk5CUVVFN1FVRkRXQ3hYUVVGUE8wMUJRMHc3VVVGQlJTeEpRVUZCTEVWQlFVMHNUVUZCVWp0UlFVRm5RaXhKUVVGQkxFVkJRVTBzUjBGQmRFSTdUMEZFU3l4RlFVVk1PMUZCUVVVc1NVRkJRU3hGUVVGTkxGVkJRVkk3VVVGQmIwSXNTVUZCUVN4RlFVRk5MRmRCUVRGQ08wOUJSa3NzUlVGSFREdFJRVUZGTEVsQlFVRXNSVUZCVFN4RlFVRkJMRWRCUVVVc1EwRkJReXhKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4UFFVRllMRU5CUVVRc1EwRkJWanRSUVVGclF5eEpRVUZCTEVWQlFVMHNXVUZCUVN4SFFVRmhMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUlVGQk5VUTdUMEZJU3l4RlFVbE1PMUZCUVVVc1NVRkJRU3hGUVVGTkxGRkJRVkk3VDBGS1N6czdSVUZFU1RzN0swSkJWV0lzUzBGQlFTeEhRVUZQTEZOQlFVTXNSVUZCUkR0QlFVZE1MRmRCUVU4c1NVRkJTU3hQUVVGS0xFTkJRVmtzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRTlCUVVRc1JVRkJWU3hOUVVGV08yVkJRMnBDTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhEUVVGMVFpeFRRVUYyUWl4RFFVRnBReXhEUVVGRExFOUJRV3hETEVOQlFUQkRMRTlCUVRGRExFVkJRVzFFTEVWQlFXNUVMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzVTBGQlF5eExRVUZFTzFWQlIwb3NTMEZCUXl4RFFVRkJMRXRCUVVRc1IwRkJVenRwUWtGSFZDeExRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMR1ZCUVZBc1EwRkJRU3hEUVVGM1FpeERRVUZETEVsQlFYcENMRU5CUVRoQ0xGTkJRVU1zVlVGQlJEdFpRVWMxUWl4TFFVRkRMRU5CUVVFc1ZVRkJSQ3hIUVVGak8yMUNRVWRrTEV0QlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1YwRkJVQ3hEUVVGQkxFTkJRVzlDTEVOQlFVTXNTVUZCY2tJc1EwRkJNRUlzVTBGQlF5eGxRVUZFTzJOQlIzaENMRXRCUVVNc1EwRkJRU3hsUVVGRUxFZEJRVzFDTzNGQ1FVZHVRaXhSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFXWXNRMEZCZFVJc1pVRkJka0lzUTBGQmRVTXNRMEZCUXl4UFFVRjRReXhEUVVGblJDeFpRVUZvUkN4RFFVRTJSQ3hEUVVGRExFbEJRVGxFTEVOQlFXMUZMRk5CUVVNc1ZVRkJSRHRuUWtGSGFrVXNTMEZCUXl4RFFVRkJMRlZCUVVRc1IwRkJZenRCUVVka0xIVkNRVUZQTEU5QlFVRXNRMEZCUVR0alFVNHdSQ3hEUVVGdVJUdFpRVTUzUWl4RFFVRXhRanRWUVU0MFFpeERRVUU1UWp0UlFVNUpMRU5CUkU0N1RVRkVhVUk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVZvN1JVRklSanM3SzBKQkswSlFMRTFCUVVFc1IwRkJVU3hUUVVGQk8xZEJRMDRzU1VGQlF5eERRVUZCTEZOQlFWTXNRMEZCUXl4SlFVRllMRU5CUVdkQ0xFbEJRVWtzVlVGQlNpeERRVUZsTzAxQlFVVXNTMEZCUVN4RlFVRlBMRWxCUVVNc1EwRkJRU3hMUVVGV08wMUJRV2xDTEZWQlFVRXNSVUZCV1N4SlFVRkRMRU5CUVVFc1ZVRkJPVUk3VFVGQk1FTXNTMEZCUVN4RlFVRlBMRWxCUVVNc1EwRkJRU3hWUVVGc1JEdE5RVUU0UkN4bFFVRkJMRVZCUVdsQ0xFbEJRVU1zUTBGQlFTeGxRVUZvUmp0TFFVRm1MRU5CUVdoQ08wVkJSRTA3T3pzN1IwRTVRM1ZDTEU5QlFVRXNRMEZCVVN4elFrRkJVanM3UVVGdFJHcERMRTFCUVUwc1EwRkJReXhQUVVGUUxFZEJRV2xDSW4wPVxuIiwidmFyIExheW91dFZpZXcsIFNob3dEYXRhc2V0Um91dGUsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5MYXlvdXRWaWV3ID0gcmVxdWlyZSgnLi92aWV3cy9sYXlvdXQnKTtcblxuU2hvd0RhdGFzZXRSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChTaG93RGF0YXNldFJvdXRlLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTaG93RGF0YXNldFJvdXRlKCkge1xuICAgIHJldHVybiBTaG93RGF0YXNldFJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgU2hvd0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUudGl0bGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJNYWdlbGxhbiAtIFwiICsgKHRoaXMubW9kZWwuZ2V0KCdsYWJlbCcpKTtcbiAgfTtcblxuICBTaG93RGF0YXNldFJvdXRlLnByb3RvdHlwZS5icmVhZGNydW1icyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRleHQ6ICdIb21lJyxcbiAgICAgICAgaHJlZjogJyMnXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6ICdBcmNoaXZlcycsXG4gICAgICAgIGhyZWY6ICcjZGF0YXNldHMnXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6IHRoaXMubW9kZWwuZ2V0KCdsYWJlbCcpXG4gICAgICB9XG4gICAgXTtcbiAgfTtcblxuICBTaG93RGF0YXNldFJvdXRlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2RhdGFzZXQnKS5yZXF1ZXN0KCdtb2RlbCcsIGlkKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgU2hvd0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3cobmV3IExheW91dFZpZXcoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIFNob3dEYXRhc2V0Um91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNob3dEYXRhc2V0Um91dGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmMyaHZkeTl5YjNWMFpTNWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDIxdlpIVnNaWE12WkdGMFlYTmxkQzl6YUc5M0wzSnZkWFJsTG1OdlptWmxaU0pkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4SlFVRkJMRFJDUVVGQk8wVkJRVUU3T3p0QlFVRkJMRlZCUVVFc1IwRkJZU3hQUVVGQkxFTkJRVkVzWjBKQlFWSTdPMEZCU1ZBN096czdPenM3TmtKQlJVb3NTMEZCUVN4SFFVRlBMRk5CUVVFN1FVRkRUQ3hYUVVGUExHRkJRVUVzUjBGQllTeERRVUZETEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExFOUJRVmdzUTBGQlJEdEZRVVJtT3pzMlFrRkhVQ3hYUVVGQkxFZEJRV0VzVTBGQlFUdEJRVU5ZTEZkQlFVODdUVUZEVER0UlFVRkZMRWxCUVVFc1JVRkJUU3hOUVVGU08xRkJRV2RDTEVsQlFVRXNSVUZCVFN4SFFVRjBRanRQUVVSTExFVkJSVXc3VVVGQlJTeEpRVUZCTEVWQlFVMHNWVUZCVWp0UlFVRnZRaXhKUVVGQkxFVkJRVTBzVjBGQk1VSTdUMEZHU3l4RlFVZE1PMUZCUVVVc1NVRkJRU3hGUVVGTkxFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJVanRQUVVoTE96dEZRVVJKT3pzMlFrRlBZaXhMUVVGQkxFZEJRVThzVTBGQlF5eEZRVUZFTzFkQlEwd3NVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZOQlFYWkNMRU5CUVdsRExFTkJRVU1zVDBGQmJFTXNRMEZCTUVNc1QwRkJNVU1zUlVGQmJVUXNSVUZCYmtRc1EwRkRRU3hEUVVGRExFbEJSRVFzUTBGRFRTeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1MwRkJSRHRsUVVGWExFdEJRVU1zUTBGQlFTeExRVUZFTEVkQlFWTTdUVUZCY0VJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlJFNDdSVUZFU3pzN05rSkJTVkFzVFVGQlFTeEhRVUZSTEZOQlFVRTdWMEZEVGl4SlFVRkRMRU5CUVVFc1UwRkJVeXhEUVVGRExFbEJRVmdzUTBGQlowSXNTVUZCU1N4VlFVRktMRU5CUVdVN1RVRkJSU3hMUVVGQkxFVkJRVThzU1VGQlF5eERRVUZCTEV0QlFWWTdTMEZCWml4RFFVRm9RanRGUVVSTk96czdPMGRCYUVKeFFpeFBRVUZCTEVOQlFWRXNjMEpCUVZJN08wRkJjVUl2UWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBTaG93RGF0YXNldExheW91dCwgVXBsb2FkV2lkZ2V0LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuVXBsb2FkV2lkZ2V0ID0gcmVxdWlyZSgnLi4vLi4vLi4vYmFzZS92aWV3cy91cGxvYWQvdXBsb2FkJyk7XG5cblNob3dEYXRhc2V0TGF5b3V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFNob3dEYXRhc2V0TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTaG93RGF0YXNldExheW91dCgpIHtcbiAgICByZXR1cm4gU2hvd0RhdGFzZXRMYXlvdXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTaG93RGF0YXNldExheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBTaG93RGF0YXNldExheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NvbnRhaW5lcic7XG5cbiAgcmV0dXJuIFNob3dEYXRhc2V0TGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaG93RGF0YXNldExheW91dDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaGRHRnpaWFF2YzJodmR5OTJhV1YzY3k5c1lYbHZkWFF1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyUmhkR0Z6WlhRdmMyaHZkeTkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzSzBKQlFVRTdSVUZCUVRzN08wRkJRVUVzV1VGQlFTeEhRVUZsTEU5QlFVRXNRMEZCVVN4dFEwRkJVanM3UVVGSlZEczdPenM3T3pzNFFrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEc5Q1FVRlNPenM0UWtGRFZpeFRRVUZCTEVkQlFWYzdPenM3UjBGR2JVSXNSVUZCUlN4RFFVRkRPenRCUVUxdVF5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChfcywgY291bnQsIGlkLCBsYWJlbCkge1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWJvZHlcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLThcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBsYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9oND48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNCB0ZXh0LXJpZ2h0XFxcIj48YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgXCIjZGF0YXNldHMvXCIgKyAoaWQpICsgXCIvZWRpdFwiLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBlbmNpbFxcXCI+PC9pPiZuYnNwO1xcbkVkaXQ8L2E+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL2Rlc3Ryb3lcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLW91dGxpbmUtZGFuZ2VyXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdHJhc2hcXFwiPjwvaT4mbmJzcDtcXG5EZXN0cm95PC9hPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IF9zLm51bWJlckZvcm1hdChjb3VudCkpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIiBJdGVtczwvcD48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL2NhcHR1cmVcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLWxnIGJ0bi1vdXRsaW5lLXByaW1hcnkgdy0xMDBcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1wYXBlcmNsaXBcXFwiPjwvaT4mbmJzcDtcXG5Lbm93bGVkZ2UgQ2FwdHVyZTwvYT48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL3NlYXJjaFwiLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImJ0biBidG4tbGcgYnRuLW91dGxpbmUtc3VjY2VzcyB3LTEwMFxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXNlYXJjaFxcXCI+PC9pPiZuYnNwO1xcblNlYXJjaDwvYT48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctNFxcXCI+PGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIFwiI2RhdGFzZXRzL1wiICsgKGlkKSArIFwiL2V4cG9ydFwiLCB0cnVlLCBmYWxzZSkpICsgXCIgY2xhc3M9XFxcImJ0biBidG4tbGcgYnRuLW91dGxpbmUtc3VjY2VzcyB3LTEwMFxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLWNsb3VkLWRvd25sb2FkXFxcIj48L2k+Jm5ic3A7XFxuRXhwb3J0PC9hPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcIl9zXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5fczp0eXBlb2YgX3MhPT1cInVuZGVmaW5lZFwiP19zOnVuZGVmaW5lZCxcImNvdW50XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb3VudDp0eXBlb2YgY291bnQhPT1cInVuZGVmaW5lZFwiP2NvdW50OnVuZGVmaW5lZCxcImlkXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5pZDp0eXBlb2YgaWQhPT1cInVuZGVmaW5lZFwiP2lkOnVuZGVmaW5lZCxcImxhYmVsXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5sYWJlbDp0eXBlb2YgbGFiZWwhPT1cInVuZGVmaW5lZFwiP2xhYmVsOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBEZXhpZVNlcnZpY2UsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRGV4aWVTZXJ2aWNlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKERleGllU2VydmljZSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRGV4aWVTZXJ2aWNlKCkge1xuICAgIHRoaXMub25EZXhpZVJlYWR5ID0gYmluZCh0aGlzLm9uRGV4aWVSZWFkeSwgdGhpcyk7XG4gICAgcmV0dXJuIERleGllU2VydmljZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnZGIgYWRkJzogJ2FkZERvY3VtZW50JyxcbiAgICAnZGIgZGVsZXRlJzogJ2RlbGV0ZURvY3VtZW50JyxcbiAgICAnZGIgZGInOiAnZ2V0RGInXG4gIH07XG5cbiAgRGV4aWVTZXJ2aWNlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgdGhpcy5kYiA9IG5ldyBEZXhpZShvcHRpb25zLmRiKTtcbiAgICB0aGlzLnNjaGVtYSA9IG9wdGlvbnMuc2NoZW1hO1xuICAgIHRoaXMudmVyc2lvbiA9IG9wdGlvbnMudmVyc2lvbiB8fCAxO1xuICAgIHdpbmRvdy5kYiA9IHRoaXMuZGI7XG4gICAgdGhpcy5lbnN1cmVTY2hlbWEoKTtcbiAgICB0aGlzLmRiLm9uKCdyZWFkeScsIHRoaXMub25EZXhpZVJlYWR5KTtcbiAgICByZXR1cm4gdGhpcy5kYi5vcGVuKCk7XG4gIH07XG5cbiAgRGV4aWVTZXJ2aWNlLnByb3RvdHlwZS5vbkRleGllUmVhZHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVEb2N1bWVudHMoKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgdmFyIGlzVmFsaWQ7XG4gICAgICAgIGlzVmFsaWQgPSBfdGhpcy52YWxpZGF0ZURvY3VtZW50Q291bnQocmVzdWx0cyk7XG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0QXBwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzLnBvcHVsYXRlVGFibGVzKCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBEZXhpZVNlcnZpY2UucHJvdG90eXBlLnZhbGlkYXRlRG9jdW1lbnRDb3VudCA9IGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICBpZiAoXy5pc0VtcHR5KHJlc3VsdHMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVzdWx0cy5wdXNoKC0xKTtcbiAgICBpZiAoXy5taW4ocmVzdWx0cykgPiAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUuc3RhcnRBcHAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnZGInKS50cmlnZ2VyKCdyZWFkeScpO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUuZW5zdXJlU2NoZW1hID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGksIGxlbiwgcmVmLCB0YWJsZTtcbiAgICByZWYgPSB0aGlzLnNjaGVtYTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhYmxlID0gcmVmW2ldO1xuICAgICAgaWYgKHRoaXMuZGJbdGFibGUubmFtZV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hZGRTY2hlbWEoKTtcbiAgICB9XG4gIH07XG5cbiAgRGV4aWVTZXJ2aWNlLnByb3RvdHlwZS5hZGRTY2hlbWEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgbGVuLCByZWYsIHNjaGVtYURlZmluaXRpb24sIHRhYmxlO1xuICAgIHNjaGVtYURlZmluaXRpb24gPSB7fTtcbiAgICByZWYgPSB0aGlzLnNjaGVtYTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhYmxlID0gcmVmW2ldO1xuICAgICAgc2NoZW1hRGVmaW5pdGlvblt0YWJsZS5uYW1lXSA9IHRhYmxlLmF0dHJzO1xuICAgIH1cbiAgICB0aGlzLmRiLnZlcnNpb24odGhpcy52ZXJzaW9uKS5zdG9yZXMoc2NoZW1hRGVmaW5pdGlvbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgRGV4aWVTZXJ2aWNlLnByb3RvdHlwZS5lbnN1cmVEb2N1bWVudHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY291bnRQcm9taXNlcywgaSwgbGVuLCByZWYsIHRhYmxlO1xuICAgIGNvdW50UHJvbWlzZXMgPSBbXTtcbiAgICByZWYgPSB0aGlzLnNjaGVtYTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhYmxlID0gcmVmW2ldO1xuICAgICAgaWYgKCF0YWJsZS5lbnN1cmVEb2N1bWVudHMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb3VudFByb21pc2VzLnB1c2godGhpcy5kYlt0YWJsZS5uYW1lXS5jb3VudCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGNvdW50UHJvbWlzZXMpO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUucG9wdWxhdGVUYWJsZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAod2luZG93Lmdsb2JhbCAmJiB3aW5kb3cuZ2xvYmFsLlNlcnZlclJhZGlvKSB7XG4gICAgICB3aW5kb3cuZ2xvYmFsLlNlcnZlclJhZGlvLnRyaWdnZXIoJ3BvcHVsYXRlJyk7XG4gICAgfSBlbHNlIHtcblxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGFydEFwcCgpO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUuYWRkRG9jdW1lbnQgPSBmdW5jdGlvbih0YWJsZSwgZG9jKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJbdGFibGVdLmFkZChkb2MpO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUuZGVsZXRlRG9jdW1lbnQgPSBmdW5jdGlvbih0YWJsZSwgZG9jdW1lbnRfaWQpIHtcbiAgICByZXR1cm4gdGhpcy5kYlt0YWJsZV1bXCJkZWxldGVcIl0oZG9jdW1lbnRfaWQpO1xuICB9O1xuXG4gIERleGllU2VydmljZS5wcm90b3R5cGUuZ2V0RGIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYjtcbiAgfTtcblxuICByZXR1cm4gRGV4aWVTZXJ2aWNlO1xuXG59KShNYXJpb25ldHRlLlNlcnZpY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERleGllU2VydmljZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJSaUwzTmxjblpwWTJVdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMlJpTDNObGNuWnBZMlV1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVTFCTEVsQlFVRXNXVUZCUVR0RlFVRkJPenM3TzBGQlFVMDdPenM3T3pzN08zbENRVVZLTEdGQlFVRXNSMEZEUlR0SlFVRkJMRkZCUVVFc1JVRkJZeXhoUVVGa08wbEJRMEVzVjBGQlFTeEZRVUZqTEdkQ1FVUmtPMGxCUlVFc1QwRkJRU3hGUVVGakxFOUJSbVE3T3p0NVFrRkpSaXhWUVVGQkxFZEJRVmtzVTBGQlF5eFBRVUZFT3p0TlFVRkRMRlZCUVZFN08wbEJTVzVDTEVsQlFVTXNRMEZCUVN4RlFVRkVMRWRCUVZrc1NVRkJTU3hMUVVGS0xFTkJRVlVzVDBGQlR5eERRVUZETEVWQlFXeENPMGxCUTFvc1NVRkJReXhEUVVGQkxFMUJRVVFzUjBGQldTeFBRVUZQTEVOQlFVTTdTVUZEY0VJc1NVRkJReXhEUVVGQkxFOUJRVVFzUjBGQldTeFBRVUZQTEVOQlFVTXNUMEZCVWl4SlFVRnRRanRKUVVjdlFpeE5RVUZOTEVOQlFVTXNSVUZCVUN4SFFVRlpMRWxCUVVNc1EwRkJRVHRKUVVkaUxFbEJRVU1zUTBGQlFTeFpRVUZFTEVOQlFVRTdTVUZKUVN4SlFVRkRMRU5CUVVFc1JVRkJSU3hEUVVGRExFVkJRVW9zUTBGQlR5eFBRVUZRTEVWQlFXZENMRWxCUVVNc1EwRkJRU3haUVVGcVFqdFhRVWRCTEVsQlFVTXNRMEZCUVN4RlFVRkZMRU5CUVVNc1NVRkJTaXhEUVVGQk8wVkJia0pWT3p0NVFrRnpRbG9zV1VGQlFTeEhRVUZqTEZOQlFVRTdWMEZKV2l4SlFVRkRMRU5CUVVFc1pVRkJSQ3hEUVVGQkxFTkJRMEVzUTBGQlF5eEpRVVJFTEVOQlEwMHNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFOUJRVVE3UVVGSFNpeFpRVUZCTzFGQlFVRXNUMEZCUVN4SFFVRlZMRXRCUVVNc1EwRkJRU3h4UWtGQlJDeERRVUYxUWl4UFFVRjJRanRSUVVkV0xFbEJRWE5DTEU5QlFYUkNPMEZCUVVFc2FVSkJRVThzUzBGQlF5eERRVUZCTEZGQlFVUXNRMEZCUVN4RlFVRlFPenRCUVVkQkxHVkJRVThzUzBGQlF5eERRVUZCTEdOQlFVUXNRMEZCUVR0TlFWUklPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVVJPTzBWQlNsazdPM2xDUVdsQ1pDeHhRa0ZCUVN4SFFVRjFRaXhUUVVGRExFOUJRVVE3U1VGSGNrSXNTVUZCWlN4RFFVRkRMRU5CUVVNc1QwRkJSaXhEUVVGVkxFOUJRVllzUTBGQlpqdEJRVUZCTEdGQlFVOHNTMEZCVURzN1NVRkhRU3hQUVVGUExFTkJRVU1zU1VGQlVpeERRVUZoTEVOQlFVTXNRMEZCWkR0SlFVZEJMRWxCUVdVc1EwRkJReXhEUVVGRExFZEJRVVlzUTBGQlRTeFBRVUZPTEVOQlFVRXNSMEZCYVVJc1EwRkJhRU03UVVGQlFTeGhRVUZQTEV0QlFWQTdPMEZCUjBFc1YwRkJUenRGUVZwak96dDVRa0ZsZGtJc1VVRkJRU3hIUVVGVkxGTkJRVUU3VjBGRFVpeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzU1VGQmRrSXNRMEZCTkVJc1EwRkJReXhQUVVFM1FpeERRVUZ4UXl4UFFVRnlRenRGUVVSUk96dDVRa0ZMVml4WlFVRkJMRWRCUVdNc1UwRkJRVHRCUVVWYUxGRkJRVUU3UVVGQlFUdEJRVUZCTEZOQlFVRXNjVU5CUVVFN08wMUJRMFVzU1VGQldTeEpRVUZETEVOQlFVRXNSVUZCUnl4RFFVRkJMRXRCUVVzc1EwRkJReXhKUVVGT0xFTkJRV2hDTzBGQlFVRXNhVUpCUVVFN08wRkJRMEVzWVVGQlR5eEpRVUZETEVOQlFVRXNVMEZCUkN4RFFVRkJPMEZCUmxRN1JVRkdXVHM3ZVVKQlQyUXNVMEZCUVN4SFFVRlhMRk5CUVVFN1FVRkpWQ3hSUVVGQk8wbEJRVUVzWjBKQlFVRXNSMEZCYlVJN1FVRkhia0k3UVVGQlFTeFRRVUZCTEhGRFFVRkJPenROUVVkRkxHZENRVUZwUWl4RFFVRkJMRXRCUVVzc1EwRkJReXhKUVVGT0xFTkJRV3BDTEVkQlFTdENMRXRCUVVzc1EwRkJRenRCUVVoMlF6dEpRVTFCTEVsQlFVTXNRMEZCUVN4RlFVRkZMRU5CUVVNc1QwRkJTaXhEUVVGWkxFbEJRVU1zUTBGQlFTeFBRVUZpTEVOQlFYRkNMRU5CUVVNc1RVRkJkRUlzUTBGQk5rSXNaMEpCUVRkQ08wRkJRMEVzVjBGQlR6dEZRV1JGT3p0NVFrRnZRbGdzWlVGQlFTeEhRVUZwUWl4VFFVRkJPMEZCUjJZc1VVRkJRVHRKUVVGQkxHRkJRVUVzUjBGQlowSTdRVUZIYUVJN1FVRkJRU3hUUVVGQkxIRkRRVUZCT3p0TlFVZEZMRWxCUVVFc1EwRkJaMElzUzBGQlN5eERRVUZETEdWQlFYUkNPMEZCUVVFc2FVSkJRVUU3TzAxQlIwRXNZVUZCWVN4RFFVRkRMRWxCUVdRc1EwRkJiMElzU1VGQlF5eERRVUZCTEVWQlFVY3NRMEZCUVN4TFFVRkxMRU5CUVVNc1NVRkJUaXhEUVVGWExFTkJRVU1zUzBGQmFFSXNRMEZCUVN4RFFVRndRanRCUVU1R08wRkJVMEVzVjBGQlR5eFBRVUZQTEVOQlFVTXNSMEZCVWl4RFFVRlpMR0ZCUVZvN1JVRm1VVHM3ZVVKQmIwSnFRaXhqUVVGQkxFZEJRV2RDTEZOQlFVRTdTVUZKWkN4SlFVRkhMRTFCUVUwc1EwRkJReXhOUVVGUUxFbEJRV2xDTEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1YwRkJiRU03VFVGRFJTeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRmRCUVZjc1EwRkJReXhQUVVFeFFpeERRVUZyUXl4VlFVRnNReXhGUVVSR08wdEJRVUVzVFVGQlFUdEJRVUZCT3p0WFFVOUJMRWxCUVVNc1EwRkJRU3hSUVVGRUxFTkJRVUU3UlVGWVl6czdlVUpCWldoQ0xGZEJRVUVzUjBGQllTeFRRVUZETEV0QlFVUXNSVUZCVVN4SFFVRlNPMWRCUTFnc1NVRkJReXhEUVVGQkxFVkJRVWNzUTBGQlFTeExRVUZCTEVOQlFVMHNRMEZCUXl4SFFVRllMRU5CUVdVc1IwRkJaanRGUVVSWE96dDVRa0ZMWWl4alFVRkJMRWRCUVdkQ0xGTkJRVU1zUzBGQlJDeEZRVUZSTEZkQlFWSTdWMEZEWkN4SlFVRkRMRU5CUVVFc1JVRkJSeXhEUVVGQkxFdEJRVUVzUTBGQlRTeEZRVUZETEUxQlFVUXNSVUZCVml4RFFVRnJRaXhYUVVGc1FqdEZRVVJqT3p0NVFrRkhhRUlzUzBGQlFTeEhRVUZQTEZOQlFVRTdRVUZEVEN4WFFVRlBMRWxCUVVNc1EwRkJRVHRGUVVSSU96czdPMGRCZUVsclFpeFZRVUZWTEVOQlFVTTdPMEZCTmtsMFF5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgRmFjZXRDb2xsZWN0aW9uLCBGYWNldE1vZGVsLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmFjZXRNb2RlbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGYWNldE1vZGVsLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGYWNldE1vZGVsKCkge1xuICAgIHJldHVybiBGYWNldE1vZGVsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmFjZXRNb2RlbC5wcm90b3R5cGUudXJsUm9vdCA9ICdmYWNldCc7XG5cbiAgRmFjZXRNb2RlbC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdmYWNldCcpLnJlcXVlc3QoJ3NhdmUnLCB0aGlzKTtcbiAgfTtcblxuICBGYWNldE1vZGVsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2ZhY2V0JykucmVxdWVzdCgnZGVzdHJveScsIHRoaXMpO1xuICB9O1xuXG4gIEZhY2V0TW9kZWwucHJvdG90eXBlLmxpbmtUb09udG9sb2d5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgYXR0ciwgb250X2F0dHIsIG9udF9wcmVmaXg7XG4gICAgICAgIGF0dHIgPSBfdGhpcy5nZXQoJ2F0dHJpYnV0ZScpO1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ0BpZCcgfHwgYXR0ciA9PT0gJ0B0eXBlJykge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyLmluZGV4T2YoJzonKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyID0gYXR0ci5zcGxpdCgnOicpO1xuICAgICAgICBvbnRfcHJlZml4ID0gYXR0clswXTtcbiAgICAgICAgb250X2F0dHIgPSBhdHRyWzFdO1xuICAgICAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnb250b2xvZ3knKS5yZXF1ZXN0KCdhdHRyaWJ1dGUnLCBvbnRfcHJlZml4LCBvbnRfYXR0cikudGhlbihmdW5jdGlvbihvbnRvbG9neUF0dHJpYnV0ZSkge1xuICAgICAgICAgIHZhciBwbHVja0F0dHIsIHVwZGF0ZTtcbiAgICAgICAgICBpZiAoIW9udG9sb2d5QXR0cmlidXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGx1Y2tBdHRyID0gZnVuY3Rpb24oYXR0cikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICByZXR1cm4gYXR0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0ciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGF0dHJbJ0B2YWx1ZSddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgdXBkYXRlID0ge1xuICAgICAgICAgICAgbGFiZWw6IHBsdWNrQXR0cihvbnRvbG9neUF0dHJpYnV0ZVsncmRmczpsYWJlbCddKSxcbiAgICAgICAgICAgIHRvb2x0aXA6IHBsdWNrQXR0cihvbnRvbG9neUF0dHJpYnV0ZVsncmRmczpjb21tZW50J10pXG4gICAgICAgICAgfTtcbiAgICAgICAgICBfdGhpcy5zZXQodXBkYXRlKTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBGYWNldE1vZGVsO1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cbkZhY2V0Q29sbGVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGYWNldENvbGxlY3Rpb24sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEZhY2V0Q29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gRmFjZXRDb2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmFjZXRDb2xsZWN0aW9uLnByb3RvdHlwZS5tb2RlbCA9IEZhY2V0TW9kZWw7XG5cbiAgRmFjZXRDb2xsZWN0aW9uLnByb3RvdHlwZS5jb21wYXJhdG9yID0gJ29yZGVyJztcblxuICBGYWNldENvbGxlY3Rpb24ucHJvdG90eXBlLmdldEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZmFjZXQsIGZhY2V0cywgaSwgbGVuLCByZWY7XG4gICAgdGhpcy5zb3J0KCk7XG4gICAgZmFjZXRzID0gW107XG4gICAgcmVmID0gdGhpcy53aGVyZSh7XG4gICAgICBlbmFibGVkOiB0cnVlXG4gICAgfSk7XG4gICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBmYWNldCA9IHJlZltpXTtcbiAgICAgIGZhY2V0cy5wdXNoKGZhY2V0LnRvSlNPTigpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhY2V0cztcbiAgfTtcblxuICBGYWNldENvbGxlY3Rpb24ucHJvdG90eXBlLmxpbmtBbGxGYWNldHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGlua0ZhY2V0O1xuICAgIGxpbmtGYWNldCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZhY2V0KSB7XG4gICAgICAgIHJldHVybiBmYWNldC5saW5rVG9PbnRvbG9neSgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICByZXR1cm4gUHJvbWlzZS5lYWNoKHRoaXMubW9kZWxzLCBsaW5rRmFjZXQpO1xuICB9O1xuXG4gIHJldHVybiBGYWNldENvbGxlY3Rpb247XG5cbn0pKEJhY2tib25lLkNvbGxlY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTW9kZWw6IEZhY2V0TW9kZWwsXG4gIENvbGxlY3Rpb246IEZhY2V0Q29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJaaFkyVjBMMlZ1ZEdsMGFXVnpMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5bVlXTmxkQzlsYm5ScGRHbGxjeTVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRMEVzU1VGQlFTd3lRa0ZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3p0MVFrRkRTaXhQUVVGQkxFZEJRVk03TzNWQ1FVZFVMRWxCUVVFc1IwRkJUU3hUUVVGQk8wRkJRMG9zVjBGQlR5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzVDBGQmRrSXNRMEZCSzBJc1EwRkJReXhQUVVGb1F5eERRVUYzUXl4TlFVRjRReXhGUVVGblJDeEpRVUZvUkR0RlFVUklPenQxUWtGSlRpeFBRVUZCTEVkQlFWTXNVMEZCUVR0QlFVTlFMRmRCUVU4c1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRTlCUVhaQ0xFTkJRU3RDTEVOQlFVTXNUMEZCYUVNc1EwRkJkME1zVTBGQmVFTXNSVUZCYlVRc1NVRkJia1E3UlVGRVFUczdkVUpCUzFRc1kwRkJRU3hIUVVGblFpeFRRVUZCTzBGQlIyUXNWMEZCVHl4SlFVRkpMRTlCUVVvc1EwRkJXU3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNUMEZCUkN4RlFVRlZMRTFCUVZZN1FVRkhha0lzV1VGQlFUdFJRVUZCTEVsQlFVRXNSMEZCVHl4TFFVRkRMRU5CUVVFc1IwRkJSQ3hEUVVGTExGZEJRVXc3VVVGSFVDeEpRVUYzUWl4SlFVRkJMRXRCUVZNc1MwRkJWQ3hKUVVGQkxFbEJRVUVzUzBGQlowSXNUMEZCZUVNN1FVRkJRU3hwUWtGQlR5eFBRVUZCTEVOQlFWRXNTVUZCVWl4RlFVRlFPenRSUVVOQkxFbEJRWGRDTEVsQlFVa3NRMEZCUXl4UFFVRk1MRU5CUVdFc1IwRkJZaXhEUVVGQkxFZEJRVzlDTEVOQlFUVkRPMEZCUVVFc2FVSkJRVThzVDBGQlFTeERRVUZSTEVsQlFWSXNSVUZCVURzN1VVRkhRU3hKUVVGQkxFZEJRV01zU1VGQlNTeERRVUZETEV0QlFVd3NRMEZCVnl4SFFVRllPMUZCUTJRc1ZVRkJRU3hIUVVGakxFbEJRVXNzUTBGQlFTeERRVUZCTzFGQlEyNUNMRkZCUVVFc1IwRkJZeXhKUVVGTExFTkJRVUVzUTBGQlFUdGxRVWR1UWl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNWVUZCZGtJc1EwRkJhME1zUTBGQlF5eFBRVUZ1UXl4RFFVRXlReXhYUVVFelF5eEZRVUYzUkN4VlFVRjRSQ3hGUVVGdlJTeFJRVUZ3UlN4RFFVTkJMRU5CUVVNc1NVRkVSQ3hEUVVOTkxGTkJRVU1zYVVKQlFVUTdRVUZIU2l4alFVRkJPMVZCUVVFc1NVRkJRU3hEUVVFMFFpeHBRa0ZCTlVJN1FVRkJRU3h0UWtGQlR5eFBRVUZCTEVOQlFWRXNTVUZCVWl4RlFVRlFPenRWUVVkQkxGTkJRVUVzUjBGQldTeFRRVUZETEVsQlFVUTdXVUZEVml4SlFVRkhMRTlCUVU4c1NVRkJVQ3hMUVVGblFpeFJRVUZ1UWp0QlFVTkZMSEZDUVVGUExFdEJSRlE3TzFsQlIwRXNTVUZCUnl4UFFVRlBMRWxCUVZBc1MwRkJaMElzVVVGQmJrSTdRVUZEUlN4eFFrRkJUeXhKUVVGTExFTkJRVUVzVVVGQlFTeEZRVVJrT3p0VlFVcFZPMVZCVlZvc1RVRkJRU3hIUVVORk8xbEJRVUVzUzBGQlFTeEZRVUZWTEZOQlFVRXNRMEZCVlN4cFFrRkJhMElzUTBGQlFTeFpRVUZCTEVOQlFUVkNMRU5CUVZZN1dVRkRRU3hQUVVGQkxFVkJRVlVzVTBGQlFTeERRVUZWTEdsQ1FVRnJRaXhEUVVGQkxHTkJRVUVzUTBGQk5VSXNRMEZFVmpzN1ZVRkpSaXhMUVVGRExFTkJRVUVzUjBGQlJDeERRVUZMTEUxQlFVdzdhVUpCUjBFc1MwRkJReXhEUVVGQkxFbEJRVVFzUTBGQlFTeERRVU5CTEVOQlFVTXNTVUZFUkN4RFFVTk5MRk5CUVVFN1FVRkJUU3h0UWtGQlR5eFBRVUZCTEVOQlFWRXNTVUZCVWp0VlFVRmlMRU5CUkU0c1EwRkZRU3hGUVVGRExFdEJRVVFzUlVGR1FTeERRVVZQTEZOQlFVTXNSMEZCUkR0QlFVRlRMRzFDUVVGUExFMUJRVUVzUTBGQlR5eEhRVUZRTzFWQlFXaENMRU5CUmxBN1VVRjRRa2tzUTBGRVRqdE5RV1pwUWp0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGQldqdEZRVWhQT3pzN08wZEJZazhzVVVGQlVTeERRVUZET3p0QlFUaEVOVUk3T3pzN096czdORUpCUTBvc1MwRkJRU3hIUVVGUE96czBRa0ZEVUN4VlFVRkJMRWRCUVZrN096UkNRVVZhTEZWQlFVRXNSMEZCV1N4VFFVRkJPMEZCUTFZc1VVRkJRVHRKUVVGQkxFbEJRVU1zUTBGQlFTeEpRVUZFTEVOQlFVRTdTVUZEUVN4TlFVRkJMRWRCUVZNN1FVRkRWRHM3TzBGQlFVRXNVMEZCUVN4eFEwRkJRVHM3VFVGQlFTeE5RVUZOTEVOQlFVTXNTVUZCVUN4RFFVRlpMRXRCUVVzc1EwRkJReXhOUVVGT0xFTkJRVUVzUTBGQldqdEJRVUZCTzBGQlEwRXNWMEZCVHp0RlFVcEhPenMwUWtGUldpeGhRVUZCTEVkQlFXVXNVMEZCUVR0QlFVZGlMRkZCUVVFN1NVRkJRU3hUUVVGQkxFZEJRVmtzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRXRCUVVRN1FVRkJWeXhsUVVGUExFdEJRVXNzUTBGQlF5eGpRVUZPTEVOQlFVRTdUVUZCYkVJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTzBGQlIxb3NWMEZCVHl4UFFVRlBMRU5CUVVNc1NVRkJVaXhEUVVGaExFbEJRVU1zUTBGQlFTeE5RVUZrTEVWQlFYTkNMRk5CUVhSQ08wVkJUazA3T3pzN1IwRmFZU3hSUVVGUkxFTkJRVU03TzBGQmMwSjJReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVU5GTzBWQlFVRXNTMEZCUVN4RlFVRlpMRlZCUVZvN1JVRkRRU3hWUVVGQkxFVkJRVmtzWlVGRVdpSjlcbiIsInZhciBEZXhpZUZhY3RvcnksIEVudGl0aWVzLCBGYWNldEZhY3RvcnksXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5FbnRpdGllcyA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTtcblxuRGV4aWVGYWN0b3J5ID0gcmVxdWlyZSgnLi4vYmFzZS9kZXhpZUZhY3RvcnknKTtcblxuRmFjZXRGYWN0b3J5ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZhY2V0RmFjdG9yeSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmFjZXRGYWN0b3J5KCkge1xuICAgIHJldHVybiBGYWNldEZhY3RvcnkuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGYWNldEZhY3RvcnkucHJvdG90eXBlLnRhYmxlTmFtZSA9ICdmYWNldHMnO1xuXG4gIEZhY2V0RmFjdG9yeS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnZmFjZXQgY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJyxcbiAgICAnZmFjZXQgc2F2ZSc6ICdzYXZlTW9kZWwnLFxuICAgICdmYWNldCBkZXN0cm95JzogJ2Rlc3Ryb3lNb2RlbCcsXG4gICAgJ2ZhY2V0IGxpbms6YWxsJzogJ2xpbmtBbGxGYWNldHMnXG4gIH07XG5cbiAgRmFjZXRGYWN0b3J5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVkQ29sbGVjdGlvbiA9IG5ldyBFbnRpdGllcy5Db2xsZWN0aW9uKCk7XG4gIH07XG5cbiAgRmFjZXRGYWN0b3J5LnByb3RvdHlwZS5saW5rQWxsRmFjZXRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVkQ29sbGVjdGlvbi5saW5rQWxsRmFjZXRzKCk7XG4gIH07XG5cbiAgcmV0dXJuIEZhY2V0RmFjdG9yeTtcblxufSkoRGV4aWVGYWN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRmFjZXRGYWN0b3J5KCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyWmhZMlYwTDJaaFkzUnZjbmt1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyWmhZMlYwTDJaaFkzUnZjbmt1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEVsQlFVRXNiME5CUVVFN1JVRkJRVHM3TzBGQlFVRXNVVUZCUVN4SFFVRlhMRTlCUVVFc1EwRkJVU3haUVVGU096dEJRVU5ZTEZsQlFVRXNSMEZCWjBJc1QwRkJRU3hEUVVGUkxITkNRVUZTT3p0QlFVbFdPenM3T3pzN08zbENRVWRLTEZOQlFVRXNSMEZCVnpzN2VVSkJSMWdzWVVGQlFTeEhRVU5GTzBsQlFVRXNhMEpCUVVFc1JVRkJiMElzWlVGQmNFSTdTVUZEUVN4WlFVRkJMRVZCUVc5Q0xGZEJSSEJDTzBsQlJVRXNaVUZCUVN4RlFVRnZRaXhqUVVad1FqdEpRVWRCTEdkQ1FVRkJMRVZCUVc5Q0xHVkJTSEJDT3pzN2VVSkJTMFlzVlVGQlFTeEhRVUZaTEZOQlFVRTdWMEZEVml4SlFVRkRMRU5CUVVFc1owSkJRVVFzUjBGQmIwSXNTVUZCU1N4UlFVRlJMRU5CUVVNc1ZVRkJZaXhEUVVGQk8wVkJSRlk3TzNsQ1FVZGFMR0ZCUVVFc1IwRkJaU3hUUVVGQk8wRkJRMklzVjBGQlR5eEpRVUZETEVOQlFVRXNaMEpCUVdkQ0xFTkJRVU1zWVVGQmJFSXNRMEZCUVR0RlFVUk5PenM3TzBkQlpsVTdPMEZCYjBJelFpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaXhKUVVGSkxGbEJRVW9zUTBGQlFTSjlcbiIsInZhciBBYnN0cmFjdFJ1bGVFbnRpdGllcywgS25vd2xlZGdlUnVsZUNvbGxlY3Rpb24sIEtub3dsZWRnZVJ1bGVNb2RlbCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkFic3RyYWN0UnVsZUVudGl0aWVzID0gcmVxdWlyZSgnLi4vYWJzdHJhY3RfcnVsZS9lbnRpdGllcycpO1xuXG5Lbm93bGVkZ2VSdWxlTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoS25vd2xlZGdlUnVsZU1vZGVsLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBLbm93bGVkZ2VSdWxlTW9kZWwoKSB7XG4gICAgcmV0dXJuIEtub3dsZWRnZVJ1bGVNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEtub3dsZWRnZVJ1bGVNb2RlbC5wcm90b3R5cGUucmFkaW9DaGFubmVsID0gJ2tub3dsZWRnZTpydWxlJztcblxuICByZXR1cm4gS25vd2xlZGdlUnVsZU1vZGVsO1xuXG59KShBYnN0cmFjdFJ1bGVFbnRpdGllcy5Nb2RlbCk7XG5cbktub3dsZWRnZVJ1bGVNb2RlbC5zZXR1cCgpO1xuXG5Lbm93bGVkZ2VSdWxlQ29sbGVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChLbm93bGVkZ2VSdWxlQ29sbGVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gS25vd2xlZGdlUnVsZUNvbGxlY3Rpb24oKSB7XG4gICAgcmV0dXJuIEtub3dsZWRnZVJ1bGVDb2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgS25vd2xlZGdlUnVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gS25vd2xlZGdlUnVsZU1vZGVsO1xuXG4gIEtub3dsZWRnZVJ1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS50YXJnZXRfb2JqZWN0ID0gJ2RhdGEnO1xuXG4gIHJldHVybiBLbm93bGVkZ2VSdWxlQ29sbGVjdGlvbjtcblxufSkoQWJzdHJhY3RSdWxlRW50aXRpZXMuQ29sbGVjdGlvbik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBNb2RlbDogS25vd2xlZGdlUnVsZU1vZGVsLFxuICBDb2xsZWN0aW9uOiBLbm93bGVkZ2VSdWxlQ29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJ0dWIzZHNaV1JuWlY5eWRXeGxMMlZ1ZEdsMGFXVnpMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5cmJtOTNiR1ZrWjJWZmNuVnNaUzlsYm5ScGRHbGxjeTVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTeHBSVUZCUVR0RlFVRkJPenM3UVVGQlFTeHZRa0ZCUVN4SFFVRjFRaXhQUVVGQkxFTkJRVkVzTWtKQlFWSTdPMEZCUzJwQ096czdPenM3T3l0Q1FVZEtMRmxCUVVFc1IwRkJZenM3T3p0SFFVaHBRaXh2UWtGQmIwSXNRMEZCUXpzN1FVRlJkRVFzYTBKQlFXdENMRU5CUVVNc1MwRkJia0lzUTBGQlFUczdRVUZMVFRzN096czdPenR2UTBGRFNpeExRVUZCTEVkQlFVODdPMjlEUVVkUUxHRkJRVUVzUjBGQlpUczdPenRIUVVweFFpeHZRa0ZCYjBJc1EwRkJRenM3UVVGUk0wUXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkRSVHRGUVVGQkxFdEJRVUVzUlVGQldTeHJRa0ZCV2p0RlFVTkJMRlZCUVVFc1JVRkJXU3gxUWtGRVdpSjlcbiIsInZhciBEZXhpZUZhY3RvcnksIEVudGl0aWVzLCBLbm93bGVkZ2VSdWxlRmFjdG9yeSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkVudGl0aWVzID0gcmVxdWlyZSgnLi9lbnRpdGllcycpO1xuXG5EZXhpZUZhY3RvcnkgPSByZXF1aXJlKCcuLi9iYXNlL2RleGllRmFjdG9yeScpO1xuXG5Lbm93bGVkZ2VSdWxlRmFjdG9yeSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChLbm93bGVkZ2VSdWxlRmFjdG9yeSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gS25vd2xlZGdlUnVsZUZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIEtub3dsZWRnZVJ1bGVGYWN0b3J5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgS25vd2xlZGdlUnVsZUZhY3RvcnkucHJvdG90eXBlLnRhYmxlTmFtZSA9ICdrbm93bGVkZ2VfcnVsZXMnO1xuXG4gIEtub3dsZWRnZVJ1bGVGYWN0b3J5LnByb3RvdHlwZS5yYWRpb1JlcXVlc3RzID0ge1xuICAgICdrbm93bGVkZ2U6cnVsZSBjb2xsZWN0aW9uJzogJ2dldENvbGxlY3Rpb24nLFxuICAgICdrbm93bGVkZ2U6cnVsZSBzYXZlJzogJ3NhdmVNb2RlbCcsXG4gICAgJ2tub3dsZWRnZTpydWxlIGRlc3Ryb3knOiAnZGVzdHJveU1vZGVsJ1xuICB9O1xuXG4gIEtub3dsZWRnZVJ1bGVGYWN0b3J5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVkQ29sbGVjdGlvbiA9IG5ldyBFbnRpdGllcy5Db2xsZWN0aW9uKCk7XG4gIH07XG5cbiAgcmV0dXJuIEtub3dsZWRnZVJ1bGVGYWN0b3J5O1xuXG59KShEZXhpZUZhY3RvcnkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBLbm93bGVkZ2VSdWxlRmFjdG9yeSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMnR1YjNkc1pXUm5aVjl5ZFd4bEwyWmhZM1J2Y25rdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMnR1YjNkc1pXUm5aVjl5ZFd4bEwyWmhZM1J2Y25rdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzTkVOQlFVRTdSVUZCUVRzN08wRkJRVUVzVVVGQlFTeEhRVUZYTEU5QlFVRXNRMEZCVVN4WlFVRlNPenRCUVVOWUxGbEJRVUVzUjBGQlowSXNUMEZCUVN4RFFVRlJMSE5DUVVGU096dEJRVWxXT3pzN096czdPMmxEUVVkS0xGTkJRVUVzUjBGQlZ6czdhVU5CUjFnc1lVRkJRU3hIUVVORk8wbEJRVUVzTWtKQlFVRXNSVUZCT0VJc1pVRkJPVUk3U1VGRFFTeHhRa0ZCUVN4RlFVRTRRaXhYUVVRNVFqdEpRVVZCTEhkQ1FVRkJMRVZCUVRoQ0xHTkJSamxDT3pzN2FVTkJTVVlzVlVGQlFTeEhRVUZaTEZOQlFVRTdWMEZEVml4SlFVRkRMRU5CUVVFc1owSkJRVVFzUjBGQmIwSXNTVUZCU1N4UlFVRlJMRU5CUVVNc1ZVRkJZaXhEUVVGQk8wVkJSRlk3T3pzN1IwRlljVUk3TzBGQlowSnVReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWl4SlFVRkpMRzlDUVVGS0xFTkJRVUVpZlE9PVxuIiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAoanNvbiwgdW5kZWZpbmVkKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48cHJlPlwiKTtcbi8vIGl0ZXJhdGUganNvblxuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBqc29uO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgZWFjaCA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPHNwYW4+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBlYWNoKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L3NwYW4+XCIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyICRpbmRleCBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIGVhY2ggPSAkJG9ialskaW5kZXhdO1xuXG5idWYucHVzaChcIjxzcGFuPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gZWFjaCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9zcGFuPlwiKTtcbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L3ByZT48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJqc29uXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5qc29uOnR5cGVvZiBqc29uIT09XCJ1bmRlZmluZWRcIj9qc29uOnVuZGVmaW5lZCxcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudW5kZWZpbmVkOnR5cGVvZiB1bmRlZmluZWQhPT1cInVuZGVmaW5lZFwiP3VuZGVmaW5lZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChzcGFuLCBzdGFja2VkKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XCIpO1xuaWYgKCBzdGFja2VkKVxue1xuYnVmLnB1c2goXCI8ZGl2IGRhdGEtcmVnaW9uPVxcXCJuYXZcXFwiXCIgKyAoamFkZS5jbHMoW1wiY29sLXhzLVwiICsgKHNwYW4pICsgXCJcIl0sIFt0cnVlXSkpICsgXCI+PC9kaXY+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiY29udGVudFxcXCJcIiArIChqYWRlLmNscyhbXCJjb2wteHMtXCIgKyAoMTItc3BhbikgKyBcIlwiXSwgW3RydWVdKSkgKyBcIj48L2Rpdj5cIik7XG59XG5lbHNlXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJuYXZcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvdyBtdC0yXFxcIj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJjb250ZW50XFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48L2Rpdj48L2Rpdj48L2Rpdj5cIik7XG59XG5idWYucHVzaChcIjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcInNwYW5cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnNwYW46dHlwZW9mIHNwYW4hPT1cInVuZGVmaW5lZFwiP3NwYW46dW5kZWZpbmVkLFwic3RhY2tlZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguc3RhY2tlZDp0eXBlb2Ygc3RhY2tlZCE9PVwidW5kZWZpbmVkXCI/c3RhY2tlZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkcm9wZG93biwgaHJlZiwgaWNvbiwgbGlua0NzcywgdGV4dCwgdHJpZ2dlciwgdW5kZWZpbmVkKSB7XG5pZiAoICFkcm9wZG93bilcbntcbmJ1Zi5wdXNoKFwiPGFcIiArIChqYWRlLmF0dHIoXCJocmVmXCIsIGhyZWYsIHRydWUsIGZhbHNlKSkgKyAoamFkZS5hdHRyKFwiZGF0YS10cmlnZ2VyXCIsIHRyaWdnZXIsIHRydWUsIGZhbHNlKSkgKyAoamFkZS5jbHMoWyduYXYtbGluaycsJ2N1cnNvci1wb2ludGVyJyxsaW5rQ3NzXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBpY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsaWNvbl0sIFtudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjwvaT4mbmJzcDtcIik7XG59XG5idWYucHVzaCgoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSB0ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2E+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8YSBkYXRhLXRvZ2dsZT1cXFwiZHJvcGRvd25cXFwiIGNsYXNzPVxcXCJuYXYtbGluayBjdXJzb3ItcG9pbnRlciBkcm9wZG93bi10b2dnbGVcXFwiPlwiKTtcbmlmICggaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLGljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XCIpO1xufVxuYnVmLnB1c2goKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gdGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9hPjxkaXYgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnUgdy0xMDBcXFwiPlwiKTtcbi8vIGl0ZXJhdGUgZHJvcGRvd25cbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gZHJvcGRvd247XG4gIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgJCRvYmoubGVuZ3RoKSB7XG5cbiAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgIHZhciBpdGVtID0gJCRvYmpbJGluZGV4XTtcblxuYnVmLnB1c2goXCI8YSBjbGFzcz1cXFwiZHJvcGRvd24taXRlbVxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBpdGVtLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT5cIik7XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgaXRlbSA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPGEgY2xhc3M9XFxcImRyb3Bkb3duLWl0ZW1cXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gaXRlbS50ZXh0KSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2E+XCIpO1xuICAgIH1cblxuICB9XG59KS5jYWxsKHRoaXMpO1xuXG5idWYucHVzaChcIjwvZGl2PlwiKTtcbn19LmNhbGwodGhpcyxcImRyb3Bkb3duXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kcm9wZG93bjp0eXBlb2YgZHJvcGRvd24hPT1cInVuZGVmaW5lZFwiP2Ryb3Bkb3duOnVuZGVmaW5lZCxcImhyZWZcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmhyZWY6dHlwZW9mIGhyZWYhPT1cInVuZGVmaW5lZFwiP2hyZWY6dW5kZWZpbmVkLFwiaWNvblwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguaWNvbjp0eXBlb2YgaWNvbiE9PVwidW5kZWZpbmVkXCI/aWNvbjp1bmRlZmluZWQsXCJsaW5rQ3NzXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5saW5rQ3NzOnR5cGVvZiBsaW5rQ3NzIT09XCJ1bmRlZmluZWRcIj9saW5rQ3NzOnVuZGVmaW5lZCxcInRleHRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnRleHQ6dHlwZW9mIHRleHQhPT1cInVuZGVmaW5lZFwiP3RleHQ6dW5kZWZpbmVkLFwidHJpZ2dlclwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudHJpZ2dlcjp0eXBlb2YgdHJpZ2dlciE9PVwidW5kZWZpbmVkXCI/dHJpZ2dlcjp1bmRlZmluZWQsXCJ1bmRlZmluZWRcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLnVuZGVmaW5lZDp0eXBlb2YgdW5kZWZpbmVkIT09XCJ1bmRlZmluZWRcIj91bmRlZmluZWQ6dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIFNldHRpbmdzRmFjdG9yeSwgU2V0dGluZ3NNb2RlbCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblNldHRpbmdzTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU2V0dGluZ3NNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gU2V0dGluZ3NNb2RlbCgpIHtcbiAgICByZXR1cm4gU2V0dGluZ3NNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFNldHRpbmdzTW9kZWwucHJvdG90eXBlLnVybCA9ICdzZXR0aW5ncyc7XG5cbiAgU2V0dGluZ3NNb2RlbC5wcm90b3R5cGUuZGVmYXVsdHMgPSB7fTtcblxuICByZXR1cm4gU2V0dGluZ3NNb2RlbDtcblxufSkoQmFja2JvbmUuTW9kZWwpO1xuXG5TZXR0aW5nc0ZhY3RvcnkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU2V0dGluZ3NGYWN0b3J5LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTZXR0aW5nc0ZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIFNldHRpbmdzRmFjdG9yeS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFNldHRpbmdzRmFjdG9yeS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnc2V0dGluZ3MgbW9kZWwnOiAnZ2V0TW9kZWwnXG4gIH07XG5cbiAgU2V0dGluZ3NGYWN0b3J5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NNb2RlbCA9IG5ldyBTZXR0aW5nc01vZGVsKCk7XG4gIH07XG5cbiAgU2V0dGluZ3NGYWN0b3J5LnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzTW9kZWw7XG4gIH07XG5cbiAgcmV0dXJuIFNldHRpbmdzRmFjdG9yeTtcblxufSkoTWFyaW9uZXR0ZS5TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgU2V0dGluZ3NGYWN0b3J5KCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyMWhhVzR2Wm1GamRHOXllUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdmJXRnBiaTltWVdOMGIzSjVMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxEaENRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3T3pCQ1FVTktMRWRCUVVFc1IwRkJTenM3TUVKQlEwd3NVVUZCUVN4SFFVRlZPenM3TzBkQlJtZENMRkZCUVZFc1EwRkJRenM3UVVGTkwwSTdPenM3T3pzN05FSkJSVW9zWVVGQlFTeEhRVU5GTzBsQlFVRXNaMEpCUVVFc1JVRkJiVUlzVlVGQmJrSTdPenMwUWtGRlJpeFZRVUZCTEVkQlFWa3NVMEZCUVR0WFFVTldMRWxCUVVNc1EwRkJRU3hoUVVGRUxFZEJRV2xDTEVsQlFVa3NZVUZCU2l4RFFVRkJPMFZCUkZBN096UkNRVWRhTEZGQlFVRXNSMEZCVlN4VFFVRkJPMEZCUTFJc1YwRkJUeXhKUVVGRExFTkJRVUU3UlVGRVFUczdPenRIUVZKclFpeFZRVUZWTEVOQlFVTTdPMEZCWVhwRExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENMRWxCUVVrc1pVRkJTaXhEUVVGQkluMD1cbiIsInZhciBNYWluUm91dGVyLCBTZXR0aW5nc1JvdXRlLCBXZWxjb21lUm91dGUsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5yZXF1aXJlKCcuL2ZhY3RvcnknKTtcblxuV2VsY29tZVJvdXRlID0gcmVxdWlyZSgnLi93ZWxjb21lL3JvdXRlJyk7XG5cblNldHRpbmdzUm91dGUgPSByZXF1aXJlKCcuL3NldHRpbmdzL3JvdXRlJyk7XG5cbk1haW5Sb3V0ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTWFpblJvdXRlciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gTWFpblJvdXRlcigpIHtcbiAgICByZXR1cm4gTWFpblJvdXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE1haW5Sb3V0ZXIucHJvdG90eXBlLnJvdXRlcyA9IHtcbiAgICAnKC8pJzogJ3dlbGNvbWUnLFxuICAgICdzZXR0aW5ncygvKSc6ICdzZXR0aW5ncydcbiAgfTtcblxuICBNYWluUm91dGVyLnByb3RvdHlwZS53ZWxjb21lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBXZWxjb21lUm91dGUoe1xuICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lclxuICAgIH0pO1xuICB9O1xuXG4gIE1haW5Sb3V0ZXIucHJvdG90eXBlLnNldHRpbmdzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBTZXR0aW5nc1JvdXRlKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXJcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gTWFpblJvdXRlcjtcblxufSkocmVxdWlyZSgnaG5fcm91dGluZy9saWIvcm91dGVyJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1haW5Sb3V0ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyMWhhVzR2Y205MWRHVnlMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5dFlXbHVMM0p2ZFhSbGNpNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNTVUZCUVN4MVEwRkJRVHRGUVVGQk96czdRVUZCUVN4UFFVRkJMRU5CUVZFc1YwRkJVanM3UVVGRlFTeFpRVUZCTEVkQlFXVXNUMEZCUVN4RFFVRlJMR2xDUVVGU096dEJRVU5tTEdGQlFVRXNSMEZCWjBJc1QwRkJRU3hEUVVGUkxHdENRVUZTT3p0QlFVdFdPenM3T3pzN08zVkNRVVZLTEUxQlFVRXNSMEZEUlR0SlFVRkJMRXRCUVVFc1JVRkJaMElzVTBGQmFFSTdTVUZEUVN4aFFVRkJMRVZCUVdkQ0xGVkJSR2hDT3pzN2RVSkJSMFlzVDBGQlFTeEhRVUZUTEZOQlFVRTdWMEZEVUN4SlFVRkpMRmxCUVVvc1EwRkJhVUk3VFVGQlJTeFRRVUZCTEVWQlFWY3NTVUZCUXl4RFFVRkJMRk5CUVdRN1MwRkJha0k3UlVGRVR6czdkVUpCUjFRc1VVRkJRU3hIUVVGVkxGTkJRVUU3VjBGRFVpeEpRVUZKTEdGQlFVb3NRMEZCYTBJN1RVRkJSU3hUUVVGQkxFVkJRVmNzU1VGQlF5eERRVUZCTEZOQlFXUTdTMEZCYkVJN1JVRkVVVHM3T3p0SFFWUmhMRTlCUVVFc1EwRkJVU3gxUWtGQlVqczdRVUZqZWtJc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgTGF5b3V0VmlldywgU2VhcmNoU2V0dGluZ3NSb3V0ZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5TZWFyY2hTZXR0aW5nc1JvdXRlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFNlYXJjaFNldHRpbmdzUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFNlYXJjaFNldHRpbmdzUm91dGUoKSB7XG4gICAgcmV0dXJuIFNlYXJjaFNldHRpbmdzUm91dGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTZWFyY2hTZXR0aW5nc1JvdXRlLnByb3RvdHlwZS50aXRsZSA9ICdNYWdlbGxhbiAtIFNldHRpbmdzJztcblxuICBTZWFyY2hTZXR0aW5nc1JvdXRlLnByb3RvdHlwZS5icmVhZGNydW1icyA9IFtcbiAgICB7XG4gICAgICBocmVmOiAnIycsXG4gICAgICB0ZXh0OiAnSG9tZSdcbiAgICB9LCB7XG4gICAgICB0ZXh0OiAnU2V0dGluZ3MnXG4gICAgfVxuICBdO1xuXG4gIFNlYXJjaFNldHRpbmdzUm91dGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdzZXR0aW5ncycpLnJlcXVlc3QoJ21vZGVsJyk7XG4gIH07XG5cbiAgU2VhcmNoU2V0dGluZ3NSb3V0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnNob3cobmV3IExheW91dFZpZXcoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIFNlYXJjaFNldHRpbmdzUm91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlYXJjaFNldHRpbmdzUm91dGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyMWhhVzR2YzJWMGRHbHVaM012Y205MWRHVXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDIxaGFXNHZjMlYwZEdsdVozTXZjbTkxZEdVdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzSzBKQlFVRTdSVUZCUVRzN08wRkJRVUVzVlVGQlFTeEhRVUZqTEU5QlFVRXNRMEZCVVN4blFrRkJVanM3UVVGSlVqczdPenM3T3p0blEwRkZTaXhMUVVGQkxFZEJRVTg3TzJkRFFVVlFMRmRCUVVFc1IwRkJZVHRKUVVOWU8wMUJRVVVzU1VGQlFTeEZRVUZOTEVkQlFWSTdUVUZCWVN4SlFVRkJMRVZCUVUwc1RVRkJia0k3UzBGRVZ5eEZRVVZZTzAxQlFVVXNTVUZCUVN4RlFVRk5MRlZCUVZJN1MwRkdWenM3TzJkRFFVdGlMRXRCUVVFc1IwRkJUeXhUUVVGQk8xZEJRMHdzU1VGQlF5eERRVUZCTEV0QlFVUXNSMEZCVXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRV1lzUTBGQmRVSXNWVUZCZGtJc1EwRkJhME1zUTBGQlF5eFBRVUZ1UXl4RFFVRXlReXhQUVVFelF6dEZRVVJLT3p0blEwRkhVQ3hOUVVGQkxFZEJRVkVzVTBGQlFUdFhRVU5PTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZKTEZWQlFVb3NRMEZCWlR0TlFVRkZMRXRCUVVFc1JVRkJUeXhKUVVGRExFTkJRVUVzUzBGQlZqdExRVUZtTEVOQlFXaENPMFZCUkUwN096czdSMEZhZDBJc1QwRkJRU3hEUVVGUkxITkNRVUZTT3p0QlFXbENiRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBTZXR0aW5nc0xheW91dFZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5TZXR0aW5nc0xheW91dFZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU2V0dGluZ3NMYXlvdXRWaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTZXR0aW5nc0xheW91dFZpZXcoKSB7XG4gICAgcmV0dXJuIFNldHRpbmdzTGF5b3V0Vmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFNldHRpbmdzTGF5b3V0Vmlldy5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBTZXR0aW5nc0xheW91dFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBoLTEwMCBmbGV4LWNvbHVtbic7XG5cbiAgU2V0dGluZ3NMYXlvdXRWaWV3LnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgQ29uZmlybWF0aW9uczoge1xuICAgICAgbWVzc2FnZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBmbHVzaCB0aGUgZGF0YWJhc2U/JyxcbiAgICAgIGNvbmZpcm1JY29uOiAnZmEtdHJhc2gnLFxuICAgICAgY29uZmlybVRleHQ6ICdGTFVTSCBEQVRBQkFTRScsXG4gICAgICBjb25maXJtQ3NzOiAnYnRuLWRhbmdlcidcbiAgICB9XG4gIH07XG5cbiAgU2V0dGluZ3NMYXlvdXRWaWV3LnByb3RvdHlwZS51aSA9IHtcbiAgICBjb25maXJtYXRpb25UcmlnZ2VyOiAnW2RhdGEtY2xpY2s9Y29uZmlybV0nXG4gIH07XG5cbiAgU2V0dGluZ3NMYXlvdXRWaWV3LnByb3RvdHlwZS5vbkNvbmZpcm1lZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdmbGFzaCcpLnRyaWdnZXIoJ3N1Y2Nlc3MnLCB7XG4gICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgZmx1c2hlZC4nXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIFNldHRpbmdzTGF5b3V0VmlldztcblxufSkoTWFyaW9uZXR0ZS5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZXR0aW5nc0xheW91dFZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyMWhhVzR2YzJWMGRHbHVaM012ZG1sbGQzTXZiR0Y1YjNWMExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTl0WVdsdUwzTmxkSFJwYm1kekwzWnBaWGR6TDJ4aGVXOTFkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRMEVzU1VGQlFTeHJRa0ZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3pzclFrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEc5Q1FVRlNPenNyUWtGRFZpeFRRVUZCTEVkQlFWYzdPeXRDUVVWWUxGTkJRVUVzUjBGRFJUdEpRVUZCTEdGQlFVRXNSVUZEUlR0TlFVRkJMRTlCUVVFc1JVRkJZeXc0UTBGQlpEdE5RVU5CTEZkQlFVRXNSVUZCWXl4VlFVUmtPMDFCUlVFc1YwRkJRU3hGUVVGakxHZENRVVprTzAxQlIwRXNWVUZCUVN4RlFVRmpMRmxCU0dRN1MwRkVSanM3T3l0Q1FVMUdMRVZCUVVFc1IwRkRSVHRKUVVGQkxHMUNRVUZCTEVWQlFYRkNMSE5DUVVGeVFqczdPeXRDUVVsR0xGZEJRVUVzUjBGQllTeFRRVUZCTzFkQlExZ3NVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEU5QlFYWkNMRU5CUVN0Q0xFTkJRVU1zVDBGQmFFTXNRMEZCZDBNc1UwRkJlRU1zUlVGQmJVUTdUVUZCUlN4UFFVRkJMRVZCUVZNc2JVSkJRVmc3UzBGQmJrUTdSVUZFVnpzN096dEhRV2hDYTBJc1ZVRkJWU3hEUVVGRE96dEJRVEJDTlVNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3cgZC1mbGV4IGZsZXgtcm93IHctMTAwXFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmQgY2FyZC1ib2R5XFxcIj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPlNldHRpbmdzPC9oND48YnV0dG9uIGRhdGEtY2xpY2s9XFxcImNvbmZpcm1cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRhbmdlclxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXRpbWVzXFxcIj48L2k+Rmx1c2ggRGF0YWJhc2U8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIExheW91dFZpZXcsIFdlbGNvbWVSb3V0ZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5XZWxjb21lUm91dGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoV2VsY29tZVJvdXRlLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBXZWxjb21lUm91dGUoKSB7XG4gICAgcmV0dXJuIFdlbGNvbWVSb3V0ZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFdlbGNvbWVSb3V0ZS5wcm90b3R5cGUudGl0bGUgPSAnTWFnZWxsYW4gLSBXZWxjb21lJztcblxuICBXZWxjb21lUm91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gW1xuICAgIHtcbiAgICAgIHRleHQ6ICdIb21lJ1xuICAgIH1cbiAgXTtcblxuICBXZWxjb21lUm91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBXZWxjb21lUm91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlbGNvbWVSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDIxaGFXNHZkMlZzWTI5dFpTOXliM1YwWlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZiV0ZwYmk5M1pXeGpiMjFsTDNKdmRYUmxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxIZENRVUZCTzBWQlFVRTdPenRCUVVGQkxGVkJRVUVzUjBGQll5eFBRVUZCTEVOQlFWRXNaMEpCUVZJN08wRkJTVkk3T3pzN096czdlVUpCUlVvc1MwRkJRU3hIUVVGUE96dDVRa0ZGVUN4WFFVRkJMRWRCUVdFN1NVRkRXRHROUVVGRkxFbEJRVUVzUlVGQlRTeE5RVUZTTzB0QlJGYzdPenQ1UWtGSllpeE5RVUZCTEVkQlFWRXNVMEZCUVR0WFFVTk9MRWxCUVVNc1EwRkJRU3hUUVVGVExFTkJRVU1zU1VGQldDeERRVUZuUWl4SlFVRkpMRlZCUVVvc1EwRkJaVHROUVVGRkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNTMEZCVmp0TFFVRm1MRU5CUVdoQ08wVkJSRTA3T3pzN1IwRlNhVUlzVDBGQlFTeERRVUZSTEhOQ1FVRlNPenRCUVdFelFpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgV2VsY29tZVZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5XZWxjb21lVmlldyA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChXZWxjb21lVmlldywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gV2VsY29tZVZpZXcoKSB7XG4gICAgcmV0dXJuIFdlbGNvbWVWaWV3Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgV2VsY29tZVZpZXcucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvbGF5b3V0Jyk7XG5cbiAgV2VsY29tZVZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBoLTEwMCBmbGV4LWNvbHVtbic7XG5cbiAgcmV0dXJuIFdlbGNvbWVWaWV3O1xuXG59KShNYXJpb25ldHRlLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlbGNvbWVWaWV3O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMjFoYVc0dmQyVnNZMjl0WlM5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDIxaGFXNHZkMlZzWTI5dFpTOTJhV1YzY3k5c1lYbHZkWFF1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVU5CTEVsQlFVRXNWMEZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3p0M1FrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEc5Q1FVRlNPenQzUWtGRFZpeFRRVUZCTEVkQlFWYzdPenM3UjBGR1lTeFZRVUZWTEVOQlFVTTdPMEZCVFhKRExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9taXhpbnNbXCJidG5cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuYnVmLnB1c2goXCI8YVwiICsgKGphZGUuYXR0cihcImhyZWZcIiwgb3B0cy5ocmVmLCB0cnVlLCBmYWxzZSkpICsgKGphZGUuY2xzKFsnYnRuJywnYnRuLWxnJywndy01MCcsb3B0cy5jc3NdLCBbbnVsbCxudWxsLG51bGwsdHJ1ZV0pKSArIFwiPjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JywnbXItMScsb3B0cy5pY29uXSwgW251bGwsbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLnRleHQpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT5cIik7XG59O1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3cgdy0xMDAgZC1mbGV4IGZsZXgtY29sdW1uXFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImp1bWJvdHJvbiBqdW1ib3Ryb24tZmx1aWQgYmctbGlnaHQgbWItMCBwYi00XFxcIj48ZGl2IGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCI+PGltZyBzcmM9XFxcImltZy9icmFuZC9tYWdlbGxhbi9tYWdlbGxhbi0xMy5wbmdcXFwiIGNsYXNzPVxcXCJ3LTUwXFxcIi8+PHAgc3R5bGU9XFxcImZvbnQtc2l6ZToxODAlO1xcXCIgY2xhc3M9XFxcImxlYWQgbXQtM1xcXCI+QXJjaGl2ZSBFeHBsb3JlcjwvcD48L2Rpdj48aHIgY2xhc3M9XFxcIm15LTRcXFwiLz48cCBjbGFzcz1cXFwibGVhZFxcXCI+PHN0cm9uZz5NYWdlbGxhbjwvc3Ryb25nPiBpcyBhbiBvbnRvbG9neS1kcml2ZW4gYXBwbGljYXRpb24gZm9yIGJyb3dzaW5nIGFuZCBjdXJhdGluZyB1bnN0cnVjdHVyZWQgYXJjaGl2YWwgZGF0YXNldHMuIFRoZSBvYmplY3RpdmUgd2FzIHRvIGNyZWF0ZSBhIGhpZ2hseS1jb25maWd1cmFibGUgZmFjZXRlZCBicm93c2luZyBzb2x1dGlvbiBjYXBhYmxlIG9mIGtub3dsZWRnZS1lbmhhbmNlZCBzZWFyY2ggcXVlcmllcyBkcml2ZW4gYnkgb250b2xvZ2llcy48L3A+PGhyIGNsYXNzPVxcXCJteS00XFxcIi8+PGRpdiBjbGFzcz1cXFwidGV4dC1jZW50ZXIgbXQtM1xcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPkxldCdzIEdldCBTdGFydGVkPC9wPjwvZGl2PjxkaXYgY2xhc3M9XFxcImJ0bi1ncm91cCB3LTEwMCBtdC0zXFxcIj5cIik7XG5qYWRlX21peGluc1tcImJ0blwiXSh7IHRleHQ6ICdFeHBsb3JlIEFyY2hpdmVzJywgaWNvbjogJ2ZhLWZvbGRlci1vcGVuLW8nLCBocmVmOiAnI2RhdGFzZXRzJywgY3NzOiAnYnRuLW91dGxpbmUtcHJpbWFyeScgfSk7XG5qYWRlX21peGluc1tcImJ0blwiXSh7IHRleHQ6ICdFeHBsb3JlIE9udG9sb2dpZXMnLCBpY29uOiAnZmEtbGlzdC1hbHQnLCBocmVmOiAnI29udG9sb2dpZXMnLCBjc3M6ICdidG4tb3V0bGluZS1zdWNjZXNzJyB9KTtcbmJ1Zi5wdXNoKFwiPC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyIG1iLTNcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmRcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmQtYm9keVxcXCI+PHAgY2xhc3M9XFxcImxlYWRcXFwiPk5vIGFyY2hpdmUgdG9vIGNvbXBsZXguPC9wPjxwIGNsYXNzPVxcXCJjYXJkLXRleHRcXFwiPlRoZSBzb2Z0d2FyZSBhbGxvd3MgZG9tYWluIGV4cGVydCBjdXJhdG9ycyB0byBkZWNsYXJhdGl2ZWx5IGRlZmluZSBydWxlcyB0aGF0IGdlbmVyYXRlIG5ldywgcXVlcnktYWJsZSBwcm9wZXJ0aWVzIG9uIHRoZSBhcmNoaXZhbCBkYXRhIC0gdGh1cyBtYWtpbmcgdGhlIHNlYXJjaCBleHBlcmllbmNlIGtub3dsZWRnZS1lbmhhbmNlZC4gVGhlIHByb2Nlc3NlZCBhcmNoaXZhbCBkYXRhIG1heSB0aGVuIGJlIGV4cG9ydGVkIGluIGEgZmFzaGlvbiB0aGF0IG1ha2VzIGZ1dHVyZSBjb25zdW1wdGlvbiBlYXNpZXIuPC9wPjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5Db21wbGV0ZWx5IE9wZW4gU291cmNlPC9wPjxwIGNsYXNzPVxcXCJjYXJkLXRleHRcXFwiPlRoZSBzb2Z0d2FyZSBzb2x1dGlvbiB3YXMgZGV2ZWxvcGVkIHVzaW5nIHRoZSBBZ2lsZSBzb2Z0d2FyZSBkZXZlbG9wbWVudCBtZXRob2RvbG9neSBhbmQgaXMgZW50aXJlbHkgb3Blbi1zb3VyY2UgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBUaGUgcmVzdWx0IG9mIHRoaXMgc3R1ZHkgaGFzIHN1Y2Nlc3NmdWxseSBwcm9kdWNlZCBhIGZ1bmN0aW9uaW5nIHB1YmxpY2x5IGF2YWlsYWJsZSBzb2Z0d2FyZSBzb2x1dGlvbiBpbiBhY2NvcmRhbmNlIHdpdGggaXRzIG9iamVjdGl2ZXMuIFRoZSByZXN1bHRpbmcgc29mdHdhcmUgZnJvbSB0aGlzIHN0dWR5IGhhcyBjb25jbHVzaXZlbHkgZGVtb25zdHJhdGVkIHRoZSBhYmlsaXR5IHRvIGxheWVyIHF1ZXJ5LWFibGUga25vd2xlZGdlIG9uIHRvcCBvZiB1bnN0cnVjdHVyZWQgYXJjaGl2YWwgZGF0YXNldHMuPC9wPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMiBteS00IHRleHQtY2VudGVyXFxcIj48YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vdGV0aGVybGVzcy13b3JsZC9tYWdlbGxhblxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLWRhcmtcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1naXRodWIgbXItMVxcXCI+PC9pPkdpdGh1YjwvYT48cCBjbGFzcz1cXFwibXQtNFxcXCI+QnVpbHQgd2l0aDxpIGNsYXNzPVxcXCJmYSBmYS1oZWFydC1vIG1sLTFcXFwiPjwvaT4mbmJzcDtieSZuYnNwOzxhIGhyZWY9XFxcImh0dHBzOi8vdHcucnBpLmVkdS9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5UV0M8L2E+Jm5ic3A7QCZuYnNwOzxhIGhyZWY9XFxcImh0dHBzOi8vcnBpLmVkdS9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5SUEkuPC9hPjwvcD48L2Rpdj48L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIE9udG9sb2d5Q29sbGVjdGlvbiwgT250b2xvZ3lNb2RlbCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbk9udG9sb2d5TW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lNb2RlbCgpIHtcbiAgICByZXR1cm4gT250b2xvZ3lNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE9udG9sb2d5TW9kZWwucHJvdG90eXBlLnVybCA9ICdvbnRvbG9naWVzJztcblxuICBPbnRvbG9neU1vZGVsLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ29udG9sb2d5JykucmVxdWVzdCgnc2F2ZScsIHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBPbnRvbG9neU1vZGVsO1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cbk9udG9sb2d5Q29sbGVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChPbnRvbG9neUNvbGxlY3Rpb24sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE9udG9sb2d5Q29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gT250b2xvZ3lDb2xsZWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgT250b2xvZ3lDb2xsZWN0aW9uLnByb3RvdHlwZS51cmxSb29sID0gJ29udG9sb2dpZXMnO1xuXG4gIE9udG9sb2d5Q29sbGVjdGlvbi5wcm90b3R5cGUubW9kZWwgPSBPbnRvbG9neU1vZGVsO1xuXG4gIHJldHVybiBPbnRvbG9neUNvbGxlY3Rpb247XG5cbn0pKEJhY2tib25lLkNvbGxlY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTW9kZWw6IE9udG9sb2d5TW9kZWwsXG4gIENvbGxlY3Rpb246IE9udG9sb2d5Q29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDI5dWRHOXNiMmQ1TDJWdWRHbDBhV1Z6TG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyRndjQzlqYjJabVpXVXZiVzlrZFd4bGN5OXZiblJ2Ykc5bmVTOWxiblJwZEdsbGN5NWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlEwRXNTVUZCUVN4cFEwRkJRVHRGUVVGQk96czdRVUZCVFRzN096czdPenN3UWtGRFNpeEhRVUZCTEVkQlFVczdPekJDUVVkTUxFbEJRVUVzUjBGQlRTeFRRVUZCTzFkQlEwb3NVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZWQlFYWkNMRU5CUVd0RExFTkJRVU1zVDBGQmJrTXNRMEZCTWtNc1RVRkJNME1zUlVGQmJVUXNTVUZCYmtRN1JVRkVTVHM3T3p0SFFVcHZRaXhSUVVGUkxFTkJRVU03TzBGQlV5OUNPenM3T3pzN095dENRVU5LTEU5QlFVRXNSMEZCVXpzN0swSkJRMVFzUzBGQlFTeEhRVUZQT3pzN08wZEJSbmRDTEZGQlFWRXNRMEZCUXpzN1FVRk5NVU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZEUlR0RlFVRkJMRXRCUVVFc1JVRkJXU3hoUVVGYU8wVkJRMEVzVlVGQlFTeEZRVUZaTEd0Q1FVUmFJbjA9XG4iLCJ2YXIgRGV4aWVGYWN0b3J5LCBFbnRpdGllcywgT250b2xvZ3lGYWN0b3J5LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRW50aXRpZXMgPSByZXF1aXJlKCcuL2VudGl0aWVzJyk7XG5cbkRleGllRmFjdG9yeSA9IHJlcXVpcmUoJy4uL2Jhc2UvZGV4aWVGYWN0b3J5Jyk7XG5cbk9udG9sb2d5RmFjdG9yeSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChPbnRvbG9neUZhY3RvcnksIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE9udG9sb2d5RmFjdG9yeSgpIHtcbiAgICByZXR1cm4gT250b2xvZ3lGYWN0b3J5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgT250b2xvZ3lGYWN0b3J5LnByb3RvdHlwZS50YWJsZU5hbWUgPSAnb250b2xvZ2llcyc7XG5cbiAgT250b2xvZ3lGYWN0b3J5LnByb3RvdHlwZS5yYWRpb1JlcXVlc3RzID0ge1xuICAgICdvbnRvbG9neSBtb2RlbCc6ICdnZXRNb2RlbCcsXG4gICAgJ29udG9sb2d5IHNhdmUnOiAnc2F2ZU1vZGVsJyxcbiAgICAnb250b2xvZ3kgY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJyxcbiAgICAnb250b2xvZ3kgYXR0cmlidXRlJzogJ2F0dHJpYnV0ZScsXG4gICAgJ29udG9sb2d5IGF0dHJpYnV0ZTpkcm9wZG93bic6ICdnZXRBdHRyaWJ1dGVEcm9wZG93bidcbiAgfTtcblxuICBPbnRvbG9neUZhY3RvcnkucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZWRDb2xsZWN0aW9uID0gbmV3IEVudGl0aWVzLkNvbGxlY3Rpb24oKTtcbiAgfTtcblxuICBPbnRvbG9neUZhY3RvcnkucHJvdG90eXBlLmdldENvbGxlY3Rpb24gPSBmdW5jdGlvbihkYXRhc2V0X2lkKSB7XG4gICAgdGhpcy5lbnN1cmVEYigpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmRiW190aGlzLnRhYmxlTmFtZV0udG9BcnJheSgpLnRoZW4oZnVuY3Rpb24obW9kZWxzKSB7XG4gICAgICAgICAgX3RoaXMuY2FjaGVkQ29sbGVjdGlvbi5yZXNldChtb2RlbHMpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmNhY2hlZENvbGxlY3Rpb24pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBPbnRvbG9neUZhY3RvcnkucHJvdG90eXBlLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKHByZWZpeCwgYXR0cmlidXRlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q29sbGVjdGlvbigpLnRoZW4oZnVuY3Rpb24ob250b2xvZ3lDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGdyYXBoLCBvbnRvbG9neTtcbiAgICAgICAgICBvbnRvbG9neSA9IG9udG9sb2d5Q29sbGVjdGlvbi5maW5kV2hlcmUoe1xuICAgICAgICAgICAgcHJlZml4OiBwcmVmaXhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIW9udG9sb2d5KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyYXBoID0gb250b2xvZ3kuZ2V0KCdncmFwaCcpO1xuICAgICAgICAgIGF0dHJpYnV0ZSA9IHByZWZpeCArICc6JyArIGF0dHJpYnV0ZTtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShfLmZpbmQoZ3JhcGgsIGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyWydAaWQnXSA9PT0gYXR0cmlidXRlO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBPbnRvbG9neUZhY3RvcnkucHJvdG90eXBlLmdldEF0dHJpYnV0ZURyb3Bkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZHJvcGRvd247XG4gICAgICAgIGRyb3Bkb3duID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2xsZWN0aW9uKCkudGhlbihmdW5jdGlvbihvbnRvbG9neUNvbGxlY3Rpb24pIHtcbiAgICAgICAgICB2YXIgaSwgaXRlbSwgbGVuLCBvbnRvbG9neSwgcmVmO1xuICAgICAgICAgIHJlZiA9IG9udG9sb2d5Q29sbGVjdGlvbi5tb2RlbHM7XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvbnRvbG9neSA9IHJlZltpXTtcbiAgICAgICAgICAgIGl0ZW0gPSB7fTtcbiAgICAgICAgICAgIGl0ZW0ubGFiZWwgPSBvbnRvbG9neS5nZXQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBpdGVtLml0ZW1zID0gXy5wbHVjayhvbnRvbG9neS5nZXQoJ2dyYXBoJyksICdAaWQnKTtcbiAgICAgICAgICAgIGRyb3Bkb3duLnB1c2goaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXNvbHZlKGRyb3Bkb3duKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICByZXR1cm4gT250b2xvZ3lGYWN0b3J5O1xuXG59KShEZXhpZUZhY3RvcnkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBPbnRvbG9neUZhY3RvcnkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDI5dWRHOXNiMmQ1TDJaaFkzUnZjbmt1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyOXVkRzlzYjJkNUwyWmhZM1J2Y25rdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzZFVOQlFVRTdSVUZCUVRzN08wRkJRVUVzVVVGQlFTeEhRVUZYTEU5QlFVRXNRMEZCVVN4WlFVRlNPenRCUVVOWUxGbEJRVUVzUjBGQlowSXNUMEZCUVN4RFFVRlJMSE5DUVVGU096dEJRVWxXT3pzN096czdPelJDUVVWS0xGTkJRVUVzUjBGQlZ6czdORUpCUlZnc1lVRkJRU3hIUVVORk8wbEJRVUVzWjBKQlFVRXNSVUZCWjBNc1ZVRkJhRU03U1VGRFFTeGxRVUZCTEVWQlFXZERMRmRCUkdoRE8wbEJSVUVzY1VKQlFVRXNSVUZCWjBNc1pVRkdhRU03U1VGSFFTeHZRa0ZCUVN4RlFVRm5ReXhYUVVob1F6dEpRVWxCTERaQ1FVRkJMRVZCUVdkRExITkNRVXBvUXpzN096UkNRVTFHTEZWQlFVRXNSMEZCV1N4VFFVRkJPMWRCUTFZc1NVRkJReXhEUVVGQkxHZENRVUZFTEVkQlFXOUNMRWxCUVVrc1VVRkJVU3hEUVVGRExGVkJRV0lzUTBGQlFUdEZRVVJXT3pzMFFrRkxXaXhoUVVGQkxFZEJRV1VzVTBGQlF5eFZRVUZFTzBsQlIySXNTVUZCUXl4RFFVRkJMRkZCUVVRc1EwRkJRVHRCUVVkQkxGZEJRVThzU1VGQlNTeFBRVUZLTEVOQlFWa3NRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFOUJRVVFzUlVGQlZTeE5RVUZXTzJWQlIycENMRXRCUVVNc1EwRkJRU3hGUVVGSExFTkJRVUVzUzBGQlF5eERRVUZCTEZOQlFVUXNRMEZCVnl4RFFVRkRMRTlCUVdoQ0xFTkJRVUVzUTBGSFFTeERRVUZETEVsQlNFUXNRMEZIVFN4VFFVRkRMRTFCUVVRN1ZVRkhTaXhMUVVGRExFTkJRVUVzWjBKQlFXZENMRU5CUVVNc1MwRkJiRUlzUTBGQmQwSXNUVUZCZUVJN1FVRkhRU3hwUWtGQlR5eFBRVUZCTEVOQlFWRXNTMEZCUXl4RFFVRkJMR2RDUVVGVU8xRkJUa2dzUTBGSVRpeERRVmxCTEVWQlFVTXNTMEZCUkN4RlFWcEJMRU5CV1U4c1UwRkJReXhIUVVGRU8wRkJRVk1zYVVKQlFVOHNUVUZCUVN4RFFVRlBMRWRCUVZBN1VVRkJhRUlzUTBGYVVEdE5RVWhwUWp0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGQldqdEZRVTVOT3pzMFFrRjFRbVlzVTBGQlFTeEhRVUZYTEZOQlFVTXNUVUZCUkN4RlFVRlRMRk5CUVZRN1FVRkRWQ3hYUVVGUExFbEJRVWtzVDBGQlNpeERRVUZaTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhQUVVGRUxFVkJRVlVzVFVGQlZqdGxRVWRxUWl4TFFVRkRMRU5CUVVFc1lVRkJSQ3hEUVVGQkxFTkJRV2RDTEVOQlFVTXNTVUZCYWtJc1EwRkJjMElzVTBGQlF5eHJRa0ZCUkR0QlFVZHdRaXhqUVVGQk8xVkJRVUVzVVVGQlFTeEhRVUZYTEd0Q1FVRnJRaXhEUVVGRExGTkJRVzVDTEVOQlFUWkNPMWxCUVVVc1RVRkJRU3hGUVVGUkxFMUJRVlk3VjBGQk4wSTdWVUZIV0N4SlFVRkJMRU5CUVRaQ0xGRkJRVGRDTzBGQlFVRXNiVUpCUVU4c1QwRkJRU3hEUVVGUkxFdEJRVklzUlVGQlVEczdWVUZIUVN4TFFVRkJMRWRCUVZFc1VVRkJVU3hEUVVGRExFZEJRVlFzUTBGQllTeFBRVUZpTzFWQlIxSXNVMEZCUVN4SFFVRlpMRTFCUVVFc1IwRkJVeXhIUVVGVUxFZEJRV1U3UVVGSE0wSXNhVUpCUVU4c1QwRkJRU3hEUVVGUkxFTkJRVU1zUTBGQlF5eEpRVUZHTEVOQlFVOHNTMEZCVUN4RlFVRmpMRk5CUVVNc1NVRkJSRHR0UWtGQlZTeEpRVUZMTEVOQlFVRXNTMEZCUVN4RFFVRk1MRXRCUVdVN1ZVRkJla0lzUTBGQlpDeERRVUZTTzFGQlptRXNRMEZCZEVJN1RVRklhVUk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVZvN1JVRkVSVHM3TkVKQmRVSllMRzlDUVVGQkxFZEJRWE5DTEZOQlFVRTdRVUZIY0VJc1YwRkJUeXhKUVVGSkxFOUJRVW9zUTBGQldTeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1QwRkJSQ3hGUVVGVkxFMUJRVlk3UVVGSGFrSXNXVUZCUVR0UlFVRkJMRkZCUVVFc1IwRkJWenRsUVVkWUxFdEJRVU1zUTBGQlFTeGhRVUZFTEVOQlFVRXNRMEZCWjBJc1EwRkJReXhKUVVGcVFpeERRVUZ6UWl4VFFVRkRMR3RDUVVGRU8wRkJSM0JDTEdOQlFVRTdRVUZCUVR0QlFVRkJMR1ZCUVVFc2NVTkJRVUU3TzFsQlNVVXNTVUZCUVN4SFFVRlBPMWxCUTFBc1NVRkJTU3hEUVVGRExFdEJRVXdzUjBGQllTeFJRVUZSTEVOQlFVTXNSMEZCVkN4RFFVRmhMRTlCUVdJN1dVRkRZaXhKUVVGSkxFTkJRVU1zUzBGQlRDeEhRVUZoTEVOQlFVTXNRMEZCUXl4TFFVRkdMRU5CUVZFc1VVRkJVU3hEUVVGRExFZEJRVlFzUTBGQllTeFBRVUZpTEVOQlFWSXNSVUZCSzBJc1MwRkJMMEk3V1VGSFlpeFJRVUZSTEVOQlFVTXNTVUZCVkN4RFFVRmpMRWxCUVdRN1FVRlVSanRCUVZsQkxHbENRVUZQTEU5QlFVRXNRMEZCVVN4UlFVRlNPMUZCWm1Fc1EwRkJkRUk3VFVGT2FVSTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRVm83UlVGSVlUczdPenRIUVRsRVRUczdRVUV3UmpsQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENMRWxCUVVrc1pVRkJTaXhEUVVGQkluMD1cbiIsInZhciBPbnRvbG9neUltcG9ydGVyLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbk9udG9sb2d5SW1wb3J0ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lJbXBvcnRlciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lJbXBvcnRlcigpIHtcbiAgICB0aGlzLmVuc3VyZUJ1bmRsZWQgPSBiaW5kKHRoaXMuZW5zdXJlQnVuZGxlZCwgdGhpcyk7XG4gICAgdGhpcy5lbnN1cmVPbnRvbG9neSA9IGJpbmQodGhpcy5lbnN1cmVPbnRvbG9neSwgdGhpcyk7XG4gICAgdGhpcy5mZXRjaEZyb21HaXRodWIgPSBiaW5kKHRoaXMuZmV0Y2hGcm9tR2l0aHViLCB0aGlzKTtcbiAgICByZXR1cm4gT250b2xvZ3lJbXBvcnRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE9udG9sb2d5SW1wb3J0ZXIucHJvdG90eXBlLnJhZGlvUmVxdWVzdHMgPSB7XG4gICAgJ29udG9sb2d5IGVuc3VyZTpidW5kbGVkJzogJ2Vuc3VyZUJ1bmRsZWQnXG4gIH07XG5cbiAgT250b2xvZ3lJbXBvcnRlci5wcm90b3R5cGUuYnVuZGxlTWFuaWZlc3QgPSBbXG4gICAge1xuICAgICAgbGFiZWw6ICdGT0FGJyxcbiAgICAgIHByZWZpeDogJ2ZvYWYnXG4gICAgfSwge1xuICAgICAgbGFiZWw6ICdHRU8nLFxuICAgICAgcHJlZml4OiAnZ2VvJ1xuICAgIH0sIHtcbiAgICAgIGxhYmVsOiAnTkZPJyxcbiAgICAgIHByZWZpeDogJ25mbydcbiAgICB9LCB7XG4gICAgICBsYWJlbDogJ09SRScsXG4gICAgICBwcmVmaXg6ICdvcmUnXG4gICAgfSwge1xuICAgICAgbGFiZWw6ICdSREYnLFxuICAgICAgcHJlZml4OiAncmRmJ1xuICAgIH0sIHtcbiAgICAgIGxhYmVsOiAnUkRGUycsXG4gICAgICBwcmVmaXg6ICdyZGZzJ1xuICAgIH1cbiAgXTtcblxuICBPbnRvbG9neUltcG9ydGVyLnByb3RvdHlwZS5mZXRjaE5ldyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdvbnRvbG9neScpLnJlcXVlc3QoJ21vZGVsJyk7XG4gIH07XG5cbiAgT250b2xvZ3lJbXBvcnRlci5wcm90b3R5cGUuZmV0Y2hDb2xsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ29udG9sb2d5JykucmVxdWVzdCgnY29sbGVjdGlvbicpO1xuICB9O1xuXG4gIE9udG9sb2d5SW1wb3J0ZXIucHJvdG90eXBlLmJ1bmRsZVNyYyA9IGZ1bmN0aW9uKG9udG9sb2d5X3ByZWZpeCkge1xuICAgIHJldHVybiBcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9hZWtzY28vanNvbl9sZF9vbnRvbG9naWVzL21hc3Rlci9cIiArIG9udG9sb2d5X3ByZWZpeCArIFwiL1wiICsgb250b2xvZ3lfcHJlZml4ICsgXCIuanNvblwiO1xuICB9O1xuXG4gIE9udG9sb2d5SW1wb3J0ZXIucHJvdG90eXBlLmZldGNoRnJvbUdpdGh1YiA9IGZ1bmN0aW9uKG9udG9sb2d5X2F0dHJzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgdXJsO1xuICAgICAgICB1cmwgPSBfdGhpcy5idW5kbGVTcmMob250b2xvZ3lfYXR0cnMucHJlZml4KTtcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3AuanNvbigpLnRoZW4oZnVuY3Rpb24ocGFyc2VkSnNvbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUocGFyc2VkSnNvbik7XG4gICAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgT250b2xvZ3lJbXBvcnRlci5wcm90b3R5cGUuZW5zdXJlT250b2xvZ3kgPSBmdW5jdGlvbihvbnRvbG9neV9hdHRycykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoQ29sbGVjdGlvbigpLnRoZW4oZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgICAgIHZhciBleHRhbnRPbnRvbG9neTtcbiAgICAgICAgICBleHRhbnRPbnRvbG9neSA9IGNvbGxlY3Rpb24uZmluZFdoZXJlKHtcbiAgICAgICAgICAgIHByZWZpeDogb250b2xvZ3lfYXR0cnMucHJlZml4XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGV4dGFudE9udG9sb2d5KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnbG9hZGluZycpLnRyaWdnZXIoJ3Nob3cnLCBcIkZldGNoaW5nIFwiICsgb250b2xvZ3lfYXR0cnMubGFiZWwgKyBcIiBPbnRvbG9neVwiKTtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hOZXcoKS50aGVuKGZ1bmN0aW9uKG5ld09udG9sb2d5KSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hGcm9tR2l0aHViKG9udG9sb2d5X2F0dHJzKS50aGVuKGZ1bmN0aW9uKHBhcnNlZEpzb24pIHtcbiAgICAgICAgICAgICAgbmV3T250b2xvZ3kuc2V0KG9udG9sb2d5X2F0dHJzKTtcbiAgICAgICAgICAgICAgbmV3T250b2xvZ3kuc2V0KCdpZCcsIGJ1aWxkVW5pcXVlSWQoJ29uXycpKTtcbiAgICAgICAgICAgICAgbmV3T250b2xvZ3kuc2V0KCdjb250ZXh0JywgcGFyc2VkSnNvblsnQGNvbnRleHQnXSk7XG4gICAgICAgICAgICAgIG5ld09udG9sb2d5LnNldCgnZ3JhcGgnLCBwYXJzZWRKc29uWydAZ3JhcGgnXSk7XG4gICAgICAgICAgICAgIHJldHVybiBuZXdPbnRvbG9neS5zYXZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgT250b2xvZ3lJbXBvcnRlci5wcm90b3R5cGUuZW5zdXJlQnVuZGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2xvYWRpbmcnKS50cmlnZ2VyKCdzaG93JywgXCJMb2FkaW5nIE9udG9sb2dpZXMuLi5cIik7XG4gICAgcmV0dXJuIFByb21pc2UuZWFjaCh0aGlzLmJ1bmRsZU1hbmlmZXN0LCB0aGlzLmVuc3VyZU9udG9sb2d5KTtcbiAgfTtcblxuICByZXR1cm4gT250b2xvZ3lJbXBvcnRlcjtcblxufSkoTWFyaW9uZXR0ZS5TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgT250b2xvZ3lJbXBvcnRlcigpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMjl1ZEc5c2IyZDVMMmx0Y0c5eWRHVnlMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5dmJuUnZiRzluZVM5cGJYQnZjblJsY2k1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUjBFc1NVRkJRU3huUWtGQlFUdEZRVUZCT3pzN08wRkJRVTA3T3pzN096czdPenM3TmtKQlIwb3NZVUZCUVN4SFFVTkZPMGxCUVVFc2VVSkJRVUVzUlVGQk5FSXNaVUZCTlVJN096czJRa0ZKUml4alFVRkJMRWRCUVdkQ08wbEJRMlE3VFVGQlJTeExRVUZCTEVWQlFVOHNUVUZCVkR0TlFVRnJRaXhOUVVGQkxFVkJRVkVzVFVGQk1VSTdTMEZFWXl4RlFVVmtPMDFCUVVVc1MwRkJRU3hGUVVGUExFdEJRVlE3VFVGQmEwSXNUVUZCUVN4RlFVRlJMRXRCUVRGQ08wdEJSbU1zUlVGSFpEdE5RVUZGTEV0QlFVRXNSVUZCVHl4TFFVRlVPMDFCUVd0Q0xFMUJRVUVzUlVGQlVTeExRVUV4UWp0TFFVaGpMRVZCU1dRN1RVRkJSU3hMUVVGQkxFVkJRVThzUzBGQlZEdE5RVUZyUWl4TlFVRkJMRVZCUVZFc1MwRkJNVUk3UzBGS1l5eEZRVXRrTzAxQlFVVXNTMEZCUVN4RlFVRlBMRXRCUVZRN1RVRkJhMElzVFVGQlFTeEZRVUZSTEV0QlFURkNPMHRCVEdNc1JVRk5aRHROUVVGRkxFdEJRVUVzUlVGQlR5eE5RVUZVTzAxQlFXdENMRTFCUVVFc1JVRkJVU3hOUVVFeFFqdExRVTVqT3pzN05rSkJWMmhDTEZGQlFVRXNSMEZCVlN4VFFVRkJPMWRCUTFJc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRlZCUVhaQ0xFTkJRV3RETEVOQlFVTXNUMEZCYmtNc1EwRkJNa01zVDBGQk0wTTdSVUZFVVRzN05rSkJTMVlzWlVGQlFTeEhRVUZwUWl4VFFVRkJPMWRCUTJZc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRlZCUVhaQ0xFTkJRV3RETEVOQlFVTXNUMEZCYmtNc1EwRkJNa01zV1VGQk0wTTdSVUZFWlRzN05rSkJTMnBDTEZOQlFVRXNSMEZCVnl4VFFVRkRMR1ZCUVVRN1FVRkRWQ3hYUVVGUExIRkZRVUZCTEVkQlFYTkZMR1ZCUVhSRkxFZEJRWE5HTEVkQlFYUkdMRWRCUVhsR0xHVkJRWHBHTEVkQlFYbEhPMFZCUkhaSE96czJRa0ZMV0N4bFFVRkJMRWRCUVdsQ0xGTkJRVU1zWTBGQlJEdEJRVWRtTEZkQlFVOHNTVUZCU1N4UFFVRktMRU5CUVZrc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEU5QlFVUXNSVUZCVlN4TlFVRldPMEZCUjJwQ0xGbEJRVUU3VVVGQlFTeEhRVUZCTEVkQlFVMHNTMEZCUXl4RFFVRkJMRk5CUVVRc1EwRkJWeXhqUVVGakxFTkJRVU1zVFVGQk1VSTdaVUZIVGl4TFFVRkJMRU5CUVUwc1IwRkJUaXhEUVVOQkxFTkJRVU1zU1VGRVJDeERRVU5OTEZOQlFVTXNTVUZCUkR0cFFrRkhTaXhKUVVGSkxFTkJRVU1zU1VGQlRDeERRVUZCTEVOQlEwRXNRMEZCUXl4SlFVUkVMRU5CUTAwc1UwRkJReXhWUVVGRU8wRkJRV2RDTEcxQ1FVRlBMRTlCUVVFc1EwRkJVU3hWUVVGU08xVkJRWFpDTEVOQlJFNHNRMEZKUVN4RlFVRkRMRXRCUVVRc1JVRktRU3hEUVVsUExGTkJRVU1zUjBGQlJEdEJRVUZUTEcxQ1FVRlBMRTFCUVVFc1EwRkJUeXhIUVVGUU8xVkJRV2hDTEVOQlNsQTdVVUZJU1N4RFFVUk9MRU5CVTBFc1JVRkJReXhMUVVGRUxFVkJWRUVzUTBGVFR5eFRRVUZETEVkQlFVUTdRVUZCVXl4cFFrRkJUeXhOUVVGQkxFTkJRVThzUjBGQlVEdFJRVUZvUWl4RFFWUlFPMDFCVG1sQ08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRmFPMFZCU0ZFN096WkNRWFZDYWtJc1kwRkJRU3hIUVVGblFpeFRRVUZETEdOQlFVUTdRVUZIWkN4WFFVRlBMRWxCUVVrc1QwRkJTaXhEUVVGWkxFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4UFFVRkVMRVZCUVZVc1RVRkJWanRsUVVscVFpeExRVUZETEVOQlFVRXNaVUZCUkN4RFFVRkJMRU5CUVd0Q0xFTkJRVU1zU1VGQmJrSXNRMEZCZDBJc1UwRkJReXhWUVVGRU8wRkJSM1JDTEdOQlFVRTdWVUZCUVN4alFVRkJMRWRCUVdsQ0xGVkJRVlVzUTBGQlF5eFRRVUZZTEVOQlFYRkNPMWxCUVVVc1RVRkJRU3hGUVVGUkxHTkJRV01zUTBGQlF5eE5RVUY2UWp0WFFVRnlRanRWUVVkcVFpeEpRVUYzUWl4alFVRjRRanRCUVVGQkxHMUNRVUZQTEU5QlFVRXNRMEZCVVN4SlFVRlNMRVZCUVZBN08xVkJSMEVzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNUVUZCTVVNc1JVRkJhMFFzVjBGQlFTeEhRVUZaTEdOQlFXTXNRMEZCUXl4TFFVRXpRaXhIUVVGcFF5eFhRVUZ1Ump0cFFrRkhRU3hMUVVGRExFTkJRVUVzVVVGQlJDeERRVUZCTEVOQlFWY3NRMEZCUXl4SlFVRmFMRU5CUVdsQ0xGTkJRVU1zVjBGQlJEdHRRa0ZIWml4TFFVRkRMRU5CUVVFc1pVRkJSQ3hEUVVGcFFpeGpRVUZxUWl4RFFVRm5ReXhEUVVGRExFbEJRV3BETEVOQlFYTkRMRk5CUVVNc1ZVRkJSRHRqUVVkd1F5eFhRVUZYTEVOQlFVTXNSMEZCV2l4RFFVRm5RaXhqUVVGb1FqdGpRVU5CTEZkQlFWY3NRMEZCUXl4SFFVRmFMRU5CUVdkQ0xFbEJRV2hDTEVWQlFYTkNMR0ZCUVVFc1EwRkJZeXhMUVVGa0xFTkJRWFJDTzJOQlEwRXNWMEZCVnl4RFFVRkRMRWRCUVZvc1EwRkJaMElzVTBGQmFFSXNSVUZCTWtJc1ZVRkJWeXhEUVVGQkxGVkJRVUVzUTBGQmRFTTdZMEZEUVN4WFFVRlhMRU5CUVVNc1IwRkJXaXhEUVVGblFpeFBRVUZvUWl4RlFVRjVRaXhWUVVGWExFTkJRVUVzVVVGQlFTeERRVUZ3UXp0eFFrRkhRU3hYUVVGWExFTkJRVU1zU1VGQldpeERRVUZCTEVOQlEwRXNRMEZCUXl4SlFVUkVMRU5CUTAwc1UwRkJRVHRCUVVGTkxIVkNRVUZQTEU5QlFVRXNRMEZCVVN4SlFVRlNPMk5CUVdJc1EwRkVUaXhEUVVWQkxFVkJRVU1zUzBGQlJDeEZRVVpCTEVOQlJVOHNVMEZCUXl4SFFVRkVPMEZCUVZNc2RVSkJRVThzVFVGQlFTeERRVUZQTEVkQlFWQTdZMEZCYUVJc1EwRkdVRHRaUVZSdlF5eERRVUYwUXp0VlFVaGxMRU5CUVdwQ08xRkJXbk5DTEVOQlFYaENPMDFCU21sQ08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRmFPMFZCU0U4N096WkNRWEZEYUVJc1lVRkJRU3hIUVVGbExGTkJRVUU3U1VGSFlpeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1EwRkJkVUlzVTBGQmRrSXNRMEZCYVVNc1EwRkJReXhQUVVGc1F5eERRVUV3UXl4TlFVRXhReXhGUVVGclJDeDFRa0ZCYkVRN1FVRkhRU3hYUVVGUExFOUJRVThzUTBGQlF5eEpRVUZTTEVOQlFXRXNTVUZCUXl4RFFVRkJMR05CUVdRc1JVRkJPRUlzU1VGQlF5eERRVUZCTEdOQlFTOUNPMFZCVGswN096czdSMEU1Um1Nc1ZVRkJWU3hEUVVGRE96dEJRWGxITVVNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSXNTVUZCU1N4blFrRkJTaXhEUVVGQkluMD1cbiIsInZhciBMYXlvdXRWaWV3LCBPbnRvbG9neUxpc3RSb3V0ZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5PbnRvbG9neUxpc3RSb3V0ZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChPbnRvbG9neUxpc3RSb3V0ZSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lMaXN0Um91dGUoKSB7XG4gICAgcmV0dXJuIE9udG9sb2d5TGlzdFJvdXRlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgT250b2xvZ3lMaXN0Um91dGUucHJvdG90eXBlLnRpdGxlID0gJ01hZ2VsbGFuIC0gT250b2xvZ2llcyc7XG5cbiAgT250b2xvZ3lMaXN0Um91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gW1xuICAgIHtcbiAgICAgIGhyZWY6ICcjJyxcbiAgICAgIHRleHQ6ICdIb21lJ1xuICAgIH0sIHtcbiAgICAgIHRleHQ6ICdPbnRvbG9naWVzJ1xuICAgIH1cbiAgXTtcblxuICBPbnRvbG9neUxpc3RSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnb250b2xvZ3knKS5yZXF1ZXN0KCdjb2xsZWN0aW9uJykudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIE9udG9sb2d5TGlzdFJvdXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIuc2hvdyhuZXcgTGF5b3V0Vmlldyh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIE9udG9sb2d5TGlzdFJvdXRlO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZScpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBPbnRvbG9neUxpc3RSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDI5dWRHOXNiMmQ1TDJ4cGMzUXZjbTkxZEdVdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMjl1ZEc5c2IyZDVMMnhwYzNRdmNtOTFkR1V1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEVsQlFVRXNOa0pCUVVFN1JVRkJRVHM3TzBGQlFVRXNWVUZCUVN4SFFVRmpMRTlCUVVFc1EwRkJVU3huUWtGQlVqczdRVUZKVWpzN096czdPenM0UWtGRlNpeExRVUZCTEVkQlFVODdPemhDUVVWUUxGZEJRVUVzUjBGQllUdEpRVU5ZTzAxQlFVVXNTVUZCUVN4RlFVRk5MRWRCUVZJN1RVRkJZU3hKUVVGQkxFVkJRVTBzVFVGQmJrSTdTMEZFVnl4RlFVVllPMDFCUVVVc1NVRkJRU3hGUVVGTkxGbEJRVkk3UzBGR1Z6czdPemhDUVV0aUxFdEJRVUVzUjBGQlR5eFRRVUZCTzFkQlEwd3NVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZWQlFYWkNMRU5CUVd0RExFTkJRVU1zVDBGQmJrTXNRMEZCTWtNc1dVRkJNME1zUTBGRFFTeERRVUZETEVsQlJFUXNRMEZEVFN4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zVlVGQlJEdGxRVUZuUWl4TFFVRkRMRU5CUVVFc1ZVRkJSQ3hIUVVGak8wMUJRVGxDTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVST08wVkJSRXM3T3poQ1FVbFFMRTFCUVVFc1IwRkJVU3hUUVVGQk8xZEJRMDRzU1VGQlF5eERRVUZCTEZOQlFWTXNRMEZCUXl4SlFVRllMRU5CUVdkQ0xFbEJRVWtzVlVGQlNpeERRVUZsTzAxQlFVVXNWVUZCUVN4RlFVRlpMRWxCUVVNc1EwRkJRU3hWUVVGbU8wdEJRV1lzUTBGQmFFSTdSVUZFVFRzN096dEhRV0p6UWl4UFFVRkJMRU5CUVZFc2MwSkJRVkk3TzBGQmEwSm9ReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWlKOVxuIiwidmFyIEF0dHJpYnV0ZUNoaWxkLCBBdHRyaWJ1dGVEZXRhaWwsIEF0dHJpYnV0ZUxpc3QsIEF0dHJpYnV0ZUxpc3RMYXlvdXQsIEpzb25WaWV3ZXIsIExkVmlld2VyLCBPbnRvbG9neUNoaWxkLCBPbnRvbG9neUVtcHR5LCBPbnRvbG9neUxpc3QsIE9udG9sb2d5TGlzdExheW91dCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxkVmlld2VyID0gcmVxdWlyZSgnLi4vLi4vLi4vc2VhcmNoL2ZhY2V0c2VhcmNoL3ZpZXdzL2dyYXBoLmNvZmZlZScpO1xuXG5Kc29uVmlld2VyID0gcmVxdWlyZSgnbGliL3ZpZXdzL2pzb25fdmlld2VyJyk7XG5cbk9udG9sb2d5RW1wdHkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lFbXB0eSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lFbXB0eSgpIHtcbiAgICByZXR1cm4gT250b2xvZ3lFbXB0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE9udG9sb2d5RW1wdHkucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvb250b2xvZ3lfZW1wdHknKTtcblxuICBPbnRvbG9neUVtcHR5LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtIGxpc3QtZ3JvdXAtaXRlbS13YXJuaW5nJztcblxuICBPbnRvbG9neUVtcHR5LnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICByZXR1cm4gT250b2xvZ3lFbXB0eTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbk9udG9sb2d5Q2hpbGQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lDaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lDaGlsZCgpIHtcbiAgICByZXR1cm4gT250b2xvZ3lDaGlsZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE9udG9sb2d5Q2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvb250b2xvZ3lfY2hpbGQnKTtcblxuICBPbnRvbG9neUNoaWxkLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtJztcblxuICBPbnRvbG9neUNoaWxkLnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICBPbnRvbG9neUNoaWxkLnByb3RvdHlwZS5iZWhhdmlvcnMgPSB7XG4gICAgU2VsZWN0YWJsZUNoaWxkOiB7fVxuICB9O1xuXG4gIHJldHVybiBPbnRvbG9neUNoaWxkO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuT250b2xvZ3lMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE9udG9sb2d5TGlzdCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gT250b2xvZ3lMaXN0KCkge1xuICAgIHJldHVybiBPbnRvbG9neUxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBPbnRvbG9neUxpc3QucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIE9udG9sb2d5TGlzdC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9vbnRvbG9neV9saXN0Jyk7XG5cbiAgT250b2xvZ3lMaXN0LnByb3RvdHlwZS5jaGlsZFZpZXcgPSBPbnRvbG9neUNoaWxkO1xuXG4gIE9udG9sb2d5TGlzdC5wcm90b3R5cGUuZW1wdHlWaWV3ID0gT250b2xvZ3lFbXB0eTtcblxuICBPbnRvbG9neUxpc3QucHJvdG90eXBlLmNoaWxkVmlld0NvbnRhaW5lciA9ICd1bCc7XG5cbiAgcmV0dXJuIE9udG9sb2d5TGlzdDtcblxufSkoTW4uQ29tcG9zaXRlVmlldyk7XG5cbkF0dHJpYnV0ZURldGFpbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBdHRyaWJ1dGVEZXRhaWwsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZURldGFpbCgpIHtcbiAgICByZXR1cm4gQXR0cmlidXRlRGV0YWlsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQXR0cmlidXRlRGV0YWlsLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY29sLWxnLTEyJztcblxuICBBdHRyaWJ1dGVEZXRhaWwucHJvdG90eXBlLm5hdkl0ZW1zID0gW1xuICAgIHtcbiAgICAgIGljb246ICdmYS1jb2RlJyxcbiAgICAgIHRleHQ6ICdKU09OJyxcbiAgICAgIHRyaWdnZXI6ICdqc29uJyxcbiAgICAgIFwiZGVmYXVsdFwiOiB0cnVlXG4gICAgfSwge1xuICAgICAgaWNvbjogJ2ZhLXNpdGVtYXAnLFxuICAgICAgdGV4dDogJ0dyYXBoJyxcbiAgICAgIHRyaWdnZXI6ICdncmFwaCdcbiAgICB9XG4gIF07XG5cbiAgQXR0cmlidXRlRGV0YWlsLnByb3RvdHlwZS5uYXZFdmVudHMgPSB7XG4gICAgJ2pzb24nOiAnc2hvd0pzb24nLFxuICAgICdncmFwaCc6ICdzaG93R3JhcGgnXG4gIH07XG5cbiAgQXR0cmlidXRlRGV0YWlsLnByb3RvdHlwZS5zaG93SnNvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgSnNvblZpZXdlcih7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbFxuICAgIH0pKTtcbiAgfTtcblxuICBBdHRyaWJ1dGVEZXRhaWwucHJvdG90eXBlLnNob3dHcmFwaCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgTGRWaWV3ZXIoe1xuICAgICAganNvbjogdGhpcy5tb2RlbC50b0pTT04oKVxuICAgIH0pKTtcbiAgfTtcblxuICByZXR1cm4gQXR0cmlidXRlRGV0YWlsO1xuXG59KShyZXF1aXJlKCdsaWIvdmlld3MvbmF2JykpO1xuXG5BdHRyaWJ1dGVDaGlsZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBdHRyaWJ1dGVDaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQXR0cmlidXRlQ2hpbGQoKSB7XG4gICAgcmV0dXJuIEF0dHJpYnV0ZUNoaWxkLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQXR0cmlidXRlQ2hpbGQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwLWl0ZW0nO1xuXG4gIEF0dHJpYnV0ZUNoaWxkLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2F0dHJpYnV0ZV9jaGlsZCcpO1xuXG4gIEF0dHJpYnV0ZUNoaWxkLnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICBBdHRyaWJ1dGVDaGlsZC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIFNlbGVjdGFibGVDaGlsZDoge31cbiAgfTtcblxuICBBdHRyaWJ1dGVDaGlsZC5wcm90b3R5cGUuc2VyaWFsaXplRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBBdHRyaWJ1dGVDaGlsZC5fX3N1cGVyX18uc2VyaWFsaXplRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQXR0cmlidXRlQ2hpbGQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5BdHRyaWJ1dGVMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEF0dHJpYnV0ZUxpc3QsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEF0dHJpYnV0ZUxpc3QoKSB7XG4gICAgcmV0dXJuIEF0dHJpYnV0ZUxpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBBdHRyaWJ1dGVMaXN0LnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cCc7XG5cbiAgQXR0cmlidXRlTGlzdC5wcm90b3R5cGUuY2hpbGRWaWV3ID0gQXR0cmlidXRlQ2hpbGQ7XG5cbiAgcmV0dXJuIEF0dHJpYnV0ZUxpc3Q7XG5cbn0pKE1uLkNvbGxlY3Rpb25WaWV3KTtcblxuQXR0cmlidXRlTGlzdExheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChBdHRyaWJ1dGVMaXN0TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBBdHRyaWJ1dGVMaXN0TGF5b3V0KCkge1xuICAgIHJldHVybiBBdHRyaWJ1dGVMaXN0TGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQXR0cmlidXRlTGlzdExheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgQXR0cmlidXRlTGlzdExheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9hdHRyaWJ1dGVfbGF5b3V0Jyk7XG5cbiAgQXR0cmlidXRlTGlzdExheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBsaXN0UmVnaW9uOiAnW2RhdGEtcmVnaW9uPWxpc3RdJyxcbiAgICBkZXRhaWxSZWdpb246ICdbZGF0YS1yZWdpb249ZGV0YWlsXSdcbiAgfTtcblxuICBBdHRyaWJ1dGVMaXN0TGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhdHRyaWJ1dGVDb2xsZWN0aW9uLCBsaXN0VmlldywgcmVmO1xuICAgIGF0dHJpYnV0ZUNvbGxlY3Rpb24gPSBuZXcgQmFja2JvbmUuQ29sbGVjdGlvbih0aGlzLm1vZGVsLmdldCgnZ3JhcGgnKSk7XG4gICAgbGlzdFZpZXcgPSBuZXcgQXR0cmlidXRlTGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiBhdHRyaWJ1dGVDb2xsZWN0aW9uXG4gICAgfSk7XG4gICAgbGlzdFZpZXcub24oJ2NoaWxkdmlldzpzZWxlY3RlZCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dBdHRyaWJ1dGUodmlldy5tb2RlbCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gICAgcmV0dXJuIChyZWYgPSBhdHRyaWJ1dGVDb2xsZWN0aW9uLmF0KDApKSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgQXR0cmlidXRlTGlzdExheW91dC5wcm90b3R5cGUuc2hvd0F0dHJpYnV0ZSA9IGZ1bmN0aW9uKGF0dHJpYnV0ZU1vZGVsKSB7XG4gICAgcmV0dXJuIHRoaXMuZGV0YWlsUmVnaW9uLnNob3cobmV3IEF0dHJpYnV0ZURldGFpbCh7XG4gICAgICBtb2RlbDogYXR0cmlidXRlTW9kZWxcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIEF0dHJpYnV0ZUxpc3RMYXlvdXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5PbnRvbG9neUxpc3RMYXlvdXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoT250b2xvZ3lMaXN0TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBPbnRvbG9neUxpc3RMYXlvdXQoKSB7XG4gICAgcmV0dXJuIE9udG9sb2d5TGlzdExheW91dC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE9udG9sb2d5TGlzdExheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBPbnRvbG9neUxpc3RMYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXItZmx1aWQnO1xuXG4gIE9udG9sb2d5TGlzdExheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBsaXN0UmVnaW9uOiAnW2RhdGEtcmVnaW9uPWxpc3RdJyxcbiAgICBkZXRhaWxSZWdpb246ICdbZGF0YS1yZWdpb249ZGV0YWlsXSdcbiAgfTtcblxuICBPbnRvbG9neUxpc3RMYXlvdXQucHJvdG90eXBlLm9uU2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaXN0VmlldywgcmVmO1xuICAgIGxpc3RWaWV3ID0gbmV3IE9udG9sb2d5TGlzdCh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KTtcbiAgICBsaXN0Vmlldy5vbignY2hpbGR2aWV3OnNlbGVjdGVkJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0dyYXBoKHZpZXcubW9kZWwpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgdGhpcy5saXN0UmVnaW9uLnNob3cobGlzdFZpZXcpO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5jb2xsZWN0aW9uLmF0KDApKSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgT250b2xvZ3lMaXN0TGF5b3V0LnByb3RvdHlwZS5zaG93R3JhcGggPSBmdW5jdGlvbihvbnRvbG9neSkge1xuICAgIHJldHVybiB0aGlzLmRldGFpbFJlZ2lvbi5zaG93KG5ldyBBdHRyaWJ1dGVMaXN0TGF5b3V0KHtcbiAgICAgIG1vZGVsOiBvbnRvbG9neVxuICAgIH0pKTtcbiAgfTtcblxuICByZXR1cm4gT250b2xvZ3lMaXN0TGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBPbnRvbG9neUxpc3RMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyOXVkRzlzYjJkNUwyeHBjM1F2ZG1sbGQzTXZiR0Y1YjNWMExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTl2Ym5SdmJHOW5lUzlzYVhOMEwzWnBaWGR6TDJ4aGVXOTFkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRMEVzU1VGQlFTeDVTa0ZCUVR0RlFVRkJPenM3UVVGQlFTeFJRVUZCTEVkQlFWY3NUMEZCUVN4RFFVRlJMR2RFUVVGU096dEJRVVZZTEZWQlFVRXNSMEZCWVN4UFFVRkJMRU5CUVZFc2RVSkJRVkk3TzBGQlNWQTdPenM3T3pzN01FSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN3MFFrRkJVanM3TUVKQlExWXNVMEZCUVN4SFFVRlhPenN3UWtGRFdDeFBRVUZCTEVkQlFWTTdPenM3UjBGSWFVSXNSVUZCUlN4RFFVRkRPenRCUVU5NlFqczdPenM3T3pzd1FrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTERSQ1FVRlNPenN3UWtGRFZpeFRRVUZCTEVkQlFWYzdPekJDUVVOWUxFOUJRVUVzUjBGQlV6czdNRUpCUlZRc1UwRkJRU3hIUVVORk8wbEJRVUVzWlVGQlFTeEZRVUZwUWl4RlFVRnFRanM3T3pzN1IwRk9kMElzUlVGQlJTeERRVUZET3p0QlFWVjZRanM3T3pzN096dDVRa0ZEU2l4VFFVRkJMRWRCUVZjN08zbENRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc01rSkJRVkk3TzNsQ1FVTldMRk5CUVVFc1IwRkJWenM3ZVVKQlExZ3NVMEZCUVN4SFFVRlhPenQ1UWtGRFdDeHJRa0ZCUVN4SFFVRnZRanM3T3p0SFFVeExMRVZCUVVVc1EwRkJRenM3UVVGVGVFSTdPenM3T3pzN05FSkJSVW9zVTBGQlFTeEhRVUZYT3pzMFFrRkZXQ3hSUVVGQkxFZEJRVlU3U1VGRFVqdE5RVUZGTEVsQlFVRXNSVUZCVFN4VFFVRlNPMDFCUVhOQ0xFbEJRVUVzUlVGQlRTeE5RVUUxUWp0TlFVRnpReXhQUVVGQkxFVkJRVk1zVFVGQkwwTTdUVUZCZFVRc1EwRkJRU3hQUVVGQkxFTkJRVUVzUlVGQlV5eEpRVUZvUlR0TFFVUlJMRVZCUlZJN1RVRkJSU3hKUVVGQkxFVkJRVTBzV1VGQlVqdE5RVUZ6UWl4SlFVRkJMRVZCUVUwc1QwRkJOVUk3VFVGQmMwTXNUMEZCUVN4RlFVRlRMRTlCUVM5RE8wdEJSbEU3T3pzMFFrRkxWaXhUUVVGQkxFZEJRMFU3U1VGQlFTeE5RVUZCTEVWQlFWa3NWVUZCV2p0SlFVTkJMRTlCUVVFc1JVRkJXU3hYUVVSYU96czdORUpCUjBZc1VVRkJRU3hIUVVGVkxGTkJRVUU3VjBGRFVpeEpRVUZETEVOQlFVRXNZVUZCWVN4RFFVRkRMRWxCUVdZc1EwRkJiMElzU1VGQlNTeFZRVUZLTEVOQlFXVTdUVUZCUlN4TFFVRkJMRVZCUVU4c1NVRkJReXhEUVVGQkxFdEJRVlk3UzBGQlppeERRVUZ3UWp0RlFVUlJPenMwUWtGSFZpeFRRVUZCTEVkQlFWY3NVMEZCUVR0WFFVTlVMRWxCUVVNc1EwRkJRU3hoUVVGaExFTkJRVU1zU1VGQlppeERRVUZ2UWl4SlFVRkpMRkZCUVVvc1EwRkJZVHROUVVGRkxFbEJRVUVzUlVGQlRTeEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRTFCUVZBc1EwRkJRU3hEUVVGU08wdEJRV0lzUTBGQmNFSTdSVUZFVXpzN096dEhRV2hDYVVJc1QwRkJRU3hEUVVGUkxHVkJRVkk3TzBGQmMwSjRRanM3T3pzN096c3lRa0ZEU2l4VFFVRkJMRWRCUVZjN096SkNRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc05rSkJRVkk3T3pKQ1FVTldMRTlCUVVFc1IwRkJVenM3TWtKQlJWUXNVMEZCUVN4SFFVTkZPMGxCUVVFc1pVRkJRU3hGUVVGcFFpeEZRVUZxUWpzN096SkNRVVZHTEdGQlFVRXNSMEZCWlN4VFFVRkJPMEZCUTJJc1YwRkJUenROUVVGRkxFbEJRVUVzUlVGQlRTeHRSRUZCUVN4VFFVRkJMRU5CUVZJN08wVkJSRTA3T3pzN1IwRlNXU3hGUVVGRkxFTkJRVU03TzBGQlZ6RkNPenM3T3pzN096QkNRVU5LTEZOQlFVRXNSMEZCVnpzN01FSkJRMWdzVTBGQlFTeEhRVUZYT3pzN08wZEJSbVVzUlVGQlJTeERRVUZET3p0QlFVbDZRanM3T3pzN096dG5RMEZEU2l4VFFVRkJMRWRCUVZjN08yZERRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc09FSkJRVkk3TzJkRFFVVldMRTlCUVVFc1IwRkRSVHRKUVVGQkxGVkJRVUVzUlVGQll5eHZRa0ZCWkR0SlFVTkJMRmxCUVVFc1JVRkJZeXh6UWtGRVpEczdPMmREUVVkR0xGRkJRVUVzUjBGQlZTeFRRVUZCTzBGQlExSXNVVUZCUVR0SlFVRkJMRzFDUVVGQkxFZEJRWE5DTEVsQlFVa3NVVUZCVVN4RFFVRkRMRlZCUVdJc1EwRkJkMElzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1QwRkJXQ3hEUVVGNFFqdEpRVVYwUWl4UlFVRkJMRWRCUVZjc1NVRkJTU3hoUVVGS0xFTkJRV3RDTzAxQlFVVXNWVUZCUVN4RlFVRlpMRzFDUVVGa08wdEJRV3hDTzBsQlExZ3NVVUZCVVN4RFFVRkRMRVZCUVZRc1EwRkJXU3h2UWtGQldpeEZRVUZyUXl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zU1VGQlJEdGxRVUZWTEV0QlFVTXNRMEZCUVN4aFFVRkVMRU5CUVdVc1NVRkJTU3hEUVVGRExFdEJRWEJDTzAxQlFWWTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRV3hETzBsQlEwRXNTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhKUVVGYUxFTkJRV2xDTEZGQlFXcENPekJFUVVONVFpeERRVUZGTEU5QlFUTkNMRU5CUVcxRExGVkJRVzVETzBWQlRsRTdPMmREUVZGV0xHRkJRVUVzUjBGQlpTeFRRVUZETEdOQlFVUTdWMEZEWWl4SlFVRkRMRU5CUVVFc1dVRkJXU3hEUVVGRExFbEJRV1FzUTBGQmJVSXNTVUZCU1N4bFFVRktMRU5CUVc5Q08wMUJRVVVzUzBGQlFTeEZRVUZQTEdOQlFWUTdTMEZCY0VJc1EwRkJia0k3UlVGRVlUczdPenRIUVdoQ2FVSXNSVUZCUlN4RFFVRkRPenRCUVhGQ0wwSTdPenM3T3pzN0swSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4dlFrRkJVanM3SzBKQlExWXNVMEZCUVN4SFFVRlhPenNyUWtGRldDeFBRVUZCTEVkQlEwVTdTVUZCUVN4VlFVRkJMRVZCUVZrc2IwSkJRVm83U1VGRFFTeFpRVUZCTEVWQlFXTXNjMEpCUkdRN096c3JRa0ZIUml4TlFVRkJMRWRCUVZFc1UwRkJRVHRCUVVOT0xGRkJRVUU3U1VGQlFTeFJRVUZCTEVkQlFWY3NTVUZCU1N4WlFVRktMRU5CUVdsQ08wMUJRVVVzVlVGQlFTeEZRVUZaTEVsQlFVTXNRMEZCUVN4VlFVRm1PMHRCUVdwQ08wbEJRMWdzVVVGQlVTeERRVUZETEVWQlFWUXNRMEZCV1N4dlFrRkJXaXhGUVVGclF5eERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1NVRkJSRHRsUVVGVkxFdEJRVU1zUTBGQlFTeFRRVUZFTEVOQlFWY3NTVUZCU1N4RFFVRkRMRXRCUVdoQ08wMUJRVlk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVd4RE8wbEJRMEVzU1VGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4SlFVRmFMRU5CUVdsQ0xGRkJRV3BDTzNORVFVTnBRaXhEUVVGRkxFOUJRVzVDTEVOQlFUSkNMRlZCUVROQ08wVkJTazA3T3l0Q1FVMVNMRk5CUVVFc1IwRkJWeXhUUVVGRExGRkJRVVE3VjBGRFZDeEpRVUZETEVOQlFVRXNXVUZCV1N4RFFVRkRMRWxCUVdRc1EwRkJiVUlzU1VGQlNTeHRRa0ZCU2l4RFFVRjNRanROUVVGRkxFdEJRVUVzUlVGQlR5eFJRVUZVTzB0QlFYaENMRU5CUVc1Q08wVkJSRk03T3pzN1IwRmtiMElzUlVGQlJTeERRVUZET3p0QlFXMUNjRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGRhdGEpIHtcbmJ1Zi5wdXNoKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gZGF0YVsnQGlkJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSk7fS5jYWxsKHRoaXMsXCJkYXRhXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kYXRhOnR5cGVvZiBkYXRhIT09XCJ1bmRlZmluZWRcIj9kYXRhOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGxhYmVsKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGRpdiBjbGFzcz1cXFwiY2FyZCBjYXJkLWJvZHlcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBsYWJlbCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9oND48aHIvPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwibGlzdFxcXCIgY2xhc3M9XFxcImNvbC1sZy00XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctOFxcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiZGV0YWlsXFxcIiBjbGFzcz1cXFwicm93XFxcIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJsYWJlbFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgubGFiZWw6dHlwZW9mIGxhYmVsIT09XCJ1bmRlZmluZWRcIj9sYWJlbDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCJObyBPbnRvbG9naWVzXCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGEgaHJlZj1cXFwiI29udG9sb2dpZXMvbmV3XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1sZyBidG4tb3V0bGluZS1wcmltYXJ5IHctMTAwXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtcGx1c1xcXCI+PC9pPiZuYnNwO1xcbkFkZCBPbnRvbG9neTwvYT48dWwgY2xhc3M9XFxcImxpc3QtZ3JvdXAgbXQtMlxcXCI+PC91bD48L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIExheW91dFZpZXcsIE5ld0RhdGFzZXRSb3V0ZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkxheW91dFZpZXcgPSByZXF1aXJlKCcuL3ZpZXdzL2xheW91dCcpO1xuXG5OZXdEYXRhc2V0Um91dGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTmV3RGF0YXNldFJvdXRlLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBOZXdEYXRhc2V0Um91dGUoKSB7XG4gICAgcmV0dXJuIE5ld0RhdGFzZXRSb3V0ZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE5ld0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUudGl0bGUgPSAnTWFnZWxsYW4gLSBOZXcgT250b2xvZ3knO1xuXG4gIE5ld0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUuYnJlYWRjcnVtYnMgPSBbXG4gICAge1xuICAgICAgdGV4dDogJ0hvbWUnLFxuICAgICAgaHJlZjogJyMnXG4gICAgfSwge1xuICAgICAgdGV4dDogJ09udG9sb2dpZXMnLFxuICAgICAgaHJlZjogJyNvbnRvbG9naWVzJ1xuICAgIH0sIHtcbiAgICAgIHRleHQ6ICdOZXcnXG4gICAgfVxuICBdO1xuXG4gIE5ld0RhdGFzZXRSb3V0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnb250b2xvZ3knKS5yZXF1ZXN0KCdtb2RlbCcpLnRoZW4oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBOZXdEYXRhc2V0Um91dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5zaG93KG5ldyBMYXlvdXRWaWV3KHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBOZXdEYXRhc2V0Um91dGU7XG5cbn0pKHJlcXVpcmUoJ2huX3JvdXRpbmcvbGliL3JvdXRlJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5ld0RhdGFzZXRSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDI5dWRHOXNiMmQ1TDI1bGR5OXliM1YwWlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZiMjUwYjJ4dloza3ZibVYzTDNKdmRYUmxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3hKUVVGQkxESkNRVUZCTzBWQlFVRTdPenRCUVVGQkxGVkJRVUVzUjBGQllTeFBRVUZCTEVOQlFWRXNaMEpCUVZJN08wRkJTVkE3T3pzN096czdORUpCUlVvc1MwRkJRU3hIUVVGUE96czBRa0ZGVUN4WFFVRkJMRWRCUVdFN1NVRkRXRHROUVVGRkxFbEJRVUVzUlVGQlRTeE5RVUZTTzAxQlFXZENMRWxCUVVFc1JVRkJUU3hIUVVGMFFqdExRVVJYTEVWQlJWZzdUVUZCUlN4SlFVRkJMRVZCUVUwc1dVRkJVanROUVVGelFpeEpRVUZCTEVWQlFVMHNZVUZCTlVJN1MwRkdWeXhGUVVkWU8wMUJRVVVzU1VGQlFTeEZRVUZOTEV0QlFWSTdTMEZJVnpzN096UkNRVTFpTEV0QlFVRXNSMEZCVHl4VFFVRkJPMWRCUTB3c1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRlZCUVhaQ0xFTkJRV3RETEVOQlFVTXNUMEZCYmtNc1EwRkJNa01zVDBGQk0wTXNRMEZEUVN4RFFVRkRMRWxCUkVRc1EwRkRUU3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNTMEZCUkR0bFFVRlhMRXRCUVVNc1EwRkJRU3hMUVVGRUxFZEJRVk03VFVGQmNFSTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJSRTQ3UlVGRVN6czdORUpCU1ZBc1RVRkJRU3hIUVVGUkxGTkJRVUU3VjBGRFRpeEpRVUZETEVOQlFVRXNVMEZCVXl4RFFVRkRMRWxCUVZnc1EwRkJaMElzU1VGQlNTeFZRVUZLTEVOQlFXVTdUVUZCUlN4TFFVRkJMRVZCUVU4c1NVRkJReXhEUVVGQkxFdEJRVlk3UzBGQlppeERRVUZvUWp0RlFVUk5PenM3TzBkQlpHOUNMRTlCUVVFc1EwRkJVU3h6UWtGQlVqczdRVUZ0UWpsQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgTWFyaW9uZXR0ZSwgTmV3T250b2xvZ3lMYXlvdXQsIFVwbG9hZFdpZGdldCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG5NYXJpb25ldHRlID0gcmVxdWlyZSgnYmFja2JvbmUubWFyaW9uZXR0ZScpO1xuXG5VcGxvYWRXaWRnZXQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoVXBsb2FkV2lkZ2V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBVcGxvYWRXaWRnZXQoKSB7XG4gICAgcmV0dXJuIFVwbG9hZFdpZGdldC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFVwbG9hZFdpZGdldC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy91cGxvYWQnKTtcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdmb3JtLWdyb3VwJztcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2hhbmdlIGlucHV0W3R5cGU9ZmlsZV0nOiAnb25JbnB1dENoYW5nZSdcbiAgfTtcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLm9uSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGZpbGUsIGZpbGVSZWFkZXI7XG4gICAgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25GaWxlTG9hZGVkKGZpbGVSZWFkZXIucmVzdWx0KTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmV0dXJuIGZpbGVSZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgfTtcblxuICBVcGxvYWRXaWRnZXQucHJvdG90eXBlLm9uRmlsZUxvYWRlZCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgcGFyc2VkO1xuICAgIHBhcnNlZCA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcigncGFyc2UnLCBwYXJzZWQpO1xuICB9O1xuXG4gIHJldHVybiBVcGxvYWRXaWRnZXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5OZXdPbnRvbG9neUxheW91dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChOZXdPbnRvbG9neUxheW91dCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gTmV3T250b2xvZ3lMYXlvdXQoKSB7XG4gICAgdGhpcy5vbkpzb25VcGxvYWQgPSBiaW5kKHRoaXMub25Kc29uVXBsb2FkLCB0aGlzKTtcbiAgICByZXR1cm4gTmV3T250b2xvZ3lMYXlvdXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBOZXdPbnRvbG9neUxheW91dC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9sYXlvdXQnKTtcblxuICBOZXdPbnRvbG9neUxheW91dC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NvbnRhaW5lcic7XG5cbiAgTmV3T250b2xvZ3lMYXlvdXQucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBTdWJtaXRCdXR0b246IHt9XG4gIH07XG5cbiAgTmV3T250b2xvZ3lMYXlvdXQucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgdXBsb2FkUmVnaW9uOiAnW2RhdGEtcmVnaW9uPXVwbG9hZF0nXG4gIH07XG5cbiAgTmV3T250b2xvZ3lMYXlvdXQucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVwbG9hZFdpZGdldDtcbiAgICB1cGxvYWRXaWRnZXQgPSBuZXcgVXBsb2FkV2lkZ2V0KCk7XG4gICAgdXBsb2FkV2lkZ2V0Lm9uKCdwYXJzZScsIHRoaXMub25Kc29uVXBsb2FkKTtcbiAgICB0aGlzLnVwbG9hZFJlZ2lvbi5zaG93KHVwbG9hZFdpZGdldCk7XG4gICAgcmV0dXJuIHRoaXMuZGlzYWJsZVN1Ym1pdCgpO1xuICB9O1xuXG4gIE5ld09udG9sb2d5TGF5b3V0LnByb3RvdHlwZS5vbkpzb25VcGxvYWQgPSBmdW5jdGlvbihwYXJzZWRKc29uKSB7XG4gICAgdGhpcy5tb2RlbC5zZXQoJ2NvbnRleHQnLCBwYXJzZWRKc29uWydAY29udGV4dCddKTtcbiAgICB0aGlzLm1vZGVsLnNldCgnZ3JhcGgnLCBwYXJzZWRKc29uWydAZ3JhcGgnXSk7XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlU3VibWl0KCk7XG4gIH07XG5cbiAgTmV3T250b2xvZ3lMYXlvdXQucHJvdG90eXBlLm9uU3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGE7XG4gICAgZGF0YSA9IEJhY2tib25lLlN5cGhvbi5zZXJpYWxpemUodGhpcyk7XG4gICAgZGF0YS5pZCA9IGJ1aWxkVW5pcXVlSWQoJ29uXycpO1xuICAgIHRoaXMubW9kZWwuc2V0KGRhdGEpO1xuICAgIHJldHVybiB0aGlzLnNhdmVUb0RleGllKCk7XG4gIH07XG5cbiAgTmV3T250b2xvZ3lMYXlvdXQucHJvdG90eXBlLnNhdmVUb0RleGllID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhYmxlO1xuICAgIHRhYmxlID0gJ29udG9sb2dpZXMnO1xuICAgIHJldHVybiB3aW5kb3cuZGJbdGFibGVdLmFkZCh0aGlzLm1vZGVsLnRvSlNPTigpKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1vZGVsX2lkKSB7XG4gICAgICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdhcHAnKS50cmlnZ2VyKCdyZWRpcmVjdCcsICcjb250b2xvZ2llcycpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSlbXCJjYXRjaFwiXSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdFUlJPUiBDQVVHSFQnKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBOZXdPbnRvbG9neUxheW91dDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTmV3T250b2xvZ3lMYXlvdXQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyOXVkRzlzYjJkNUwyNWxkeTkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMjl1ZEc5c2IyZDVMMjVsZHk5MmFXVjNjeTlzWVhsdmRYUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc01rTkJRVUU3UlVGQlFUczdPenRCUVVGQkxGVkJRVUVzUjBGQllTeFBRVUZCTEVOQlFWRXNjVUpCUVZJN08wRkJUVkE3T3pzN096czdlVUpCUTBvc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTeHZRa0ZCVWpzN2VVSkJRMVlzVTBGQlFTeEhRVUZYT3p0NVFrRkZXQ3hOUVVGQkxFZEJRMFU3U1VGQlFTeDVRa0ZCUVN4RlFVRXlRaXhsUVVFelFqczdPM2xDUVVWR0xHRkJRVUVzUjBGQlpTeFRRVUZETEVOQlFVUTdRVUZIWWl4UlFVRkJPMGxCUVVFc1NVRkJRU3hIUVVGUExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCVFN4RFFVRkJMRU5CUVVFN1NVRkhkRUlzU1VGQlFTeERRVUZqTEVsQlFXUTdRVUZCUVN4aFFVRkJPenRKUVVkQkxGVkJRVUVzUjBGQllTeEpRVUZKTEZWQlFVb3NRMEZCUVR0SlFVTmlMRlZCUVZVc1EwRkJReXhOUVVGWUxFZEJRVzlDTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHRsUVVGSExFdEJRVU1zUTBGQlFTeFpRVUZFTEVOQlFXTXNWVUZCVlN4RFFVRkRMRTFCUVhwQ08wMUJRVWc3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJPMWRCUTNCQ0xGVkJRVlVzUTBGQlF5eFZRVUZZTEVOQlFYTkNMRWxCUVhSQ08wVkJXR0U3TzNsQ1FXVm1MRmxCUVVFc1IwRkJZeXhUUVVGRExFbEJRVVE3UVVGRFdpeFJRVUZCTzBsQlFVRXNUVUZCUVN4SFFVRlRMRWxCUVVrc1EwRkJReXhMUVVGTUxFTkJRVmNzU1VGQldEdFhRVU5VTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1QwRkJWQ3hGUVVGclFpeE5RVUZzUWp0RlFVWlpPenM3TzBkQmRFSlhMRVZCUVVVc1EwRkJRenM3UVVFMlFuaENPenM3T3pzN096czRRa0ZEU2l4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxHOUNRVUZTT3pzNFFrRkRWaXhUUVVGQkxFZEJRVmM3T3poQ1FVVllMRk5CUVVFc1IwRkRSVHRKUVVGQkxGbEJRVUVzUlVGQll5eEZRVUZrT3pzN09FSkJSVVlzVDBGQlFTeEhRVU5GTzBsQlFVRXNXVUZCUVN4RlFVRmpMSE5DUVVGa096czdPRUpCUlVZc1VVRkJRU3hIUVVGVkxGTkJRVUU3UVVGRFVpeFJRVUZCTzBsQlFVRXNXVUZCUVN4SFFVRmxMRWxCUVVrc1dVRkJTaXhEUVVGQk8wbEJRMllzV1VGQldTeERRVUZETEVWQlFXSXNRMEZCWjBJc1QwRkJhRUlzUlVGQmVVSXNTVUZCUXl4RFFVRkJMRmxCUVRGQ08wbEJRMEVzU1VGQlF5eERRVUZCTEZsQlFWa3NRMEZCUXl4SlFVRmtMRU5CUVcxQ0xGbEJRVzVDTzFkQlEwRXNTVUZCUXl4RFFVRkJMR0ZCUVVRc1EwRkJRVHRGUVVwUk96czRRa0ZOVml4WlFVRkJMRWRCUVdNc1UwRkJReXhWUVVGRU8wbEJSVm9zU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1UwRkJXQ3hGUVVGelFpeFZRVUZYTEVOQlFVRXNWVUZCUVN4RFFVRnFRenRKUVVOQkxFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1JVRkJiMElzVlVGQlZ5eERRVUZCTEZGQlFVRXNRMEZCTDBJN1YwRkRRU3hKUVVGRExFTkJRVUVzV1VGQlJDeERRVUZCTzBWQlNsazdPemhDUVUxa0xGRkJRVUVzUjBGQlZTeFRRVUZCTzBGQlExSXNVVUZCUVR0SlFVRkJMRWxCUVVFc1IwRkJWU3hSUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFXaENMRU5CUVRCQ0xFbEJRVEZDTzBsQlExWXNTVUZCU1N4RFFVRkRMRVZCUVV3c1IwRkJWU3hoUVVGQkxFTkJRV01zUzBGQlpEdEpRVU5XTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExFbEJRVmc3VjBGRFFTeEpRVUZETEVOQlFVRXNWMEZCUkN4RFFVRkJPMFZCU2xFN096aENRVlZXTEZkQlFVRXNSMEZCWVN4VFFVRkJPMEZCUTFnc1VVRkJRVHRKUVVGQkxFdEJRVUVzUjBGQlVUdFhRVVZTTEUxQlFVMHNRMEZCUXl4RlFVRkhMRU5CUVVFc1MwRkJRU3hEUVVGTkxFTkJRVU1zUjBGQmFrSXNRMEZCY1VJc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eE5RVUZRTEVOQlFVRXNRMEZCY2tJc1EwRkRRU3hEUVVGRExFbEJSRVFzUTBGRFRTeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVNc1VVRkJSRHRsUVVGakxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhMUVVGMlFpeERRVUUyUWl4RFFVRkRMRTlCUVRsQ0xFTkJRWE5ETEZWQlFYUkRMRVZCUVd0RUxHRkJRV3hFTzAxQlFXUTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJSRTRzUTBGSFFTeEZRVUZETEV0QlFVUXNSVUZJUVN4RFFVZFBMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eEhRVUZFTzJWQlFWTXNUMEZCVHl4RFFVRkRMRWRCUVZJc1EwRkJXU3hqUVVGYU8wMUJRVlE3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CU0ZBN1JVRklWenM3T3p0SFFXaERhVUlzUlVGQlJTeERRVUZET3p0QlFUQkRia01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX21peGluc1tcImZvcm1Hcm91cFwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxmaWVsZHNldFwiICsgKGphZGUuY2xzKFsnZm9ybS1ncm91cCcsb3B0cy5mb3JtR3JvdXBDc3NdLCBbbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBvcHRzLmxhYmVsKVxue1xuYnVmLnB1c2goXCI8bGFiZWwgY2xhc3M9XFxcImZvcm0tY29udHJvbC1sYWJlbFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvcHRzLmxhYmVsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2xhYmVsPlwiKTtcbn1cbmJsb2NrICYmIGJsb2NrKCk7XG5idWYucHVzaChcIjwvZmllbGRzZXQ+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJmb3JtSW5wdXRcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuamFkZV9taXhpbnNbXCJmb3JtR3JvdXBcIl0uY2FsbCh7XG5ibG9jazogZnVuY3Rpb24oKXtcbmJ1Zi5wdXNoKFwiPGlucHV0XCIgKyAoamFkZS5hdHRycyhqYWRlLm1lcmdlKFt7XCJwbGFjZWhvbGRlclwiOiBqYWRlLmVzY2FwZShvcHRzLnBsYWNlaG9sZGVyKSxcIm5hbWVcIjogamFkZS5lc2NhcGUob3B0cy5uYW1lKSxcInR5cGVcIjogamFkZS5lc2NhcGUob3B0cy50eXBlKSxcInZhbHVlXCI6IGphZGUuZXNjYXBlKG9wdHMudmFsdWUpLFwiY2xhc3NcIjogXCJmb3JtLWNvbnRyb2xcIn0sYXR0cmlidXRlc10pLCBmYWxzZSkpICsgXCIvPlwiKTtcbn1cbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5idWYucHVzaChcIlwiKTtcblxuXG5cblxuYnVmLnB1c2goXCJcIik7XG5qYWRlX21peGluc1tcImJ1dHRvblwiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24ob3B0cyl7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5idWYucHVzaChcIjxidXR0b25cIiArIChqYWRlLmF0dHJzKGphZGUubWVyZ2UoW3tcInR5cGVcIjogXCJidXR0b25cIixcImNsYXNzXCI6IFwiYnRuXCJ9LGF0dHJpYnV0ZXNdKSwgZmFsc2UpKSArIFwiPlwiKTtcbmlmICggb3B0cy5pY29uKVxue1xuYnVmLnB1c2goXCI8aVwiICsgKGphZGUuY2xzKFsnZmEnLCdmYS1mdycsb3B0cy5pY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPiZuYnNwO1wiKTtcbn1cbmJ1Zi5wdXNoKChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9wdHMudGV4dCkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9idXR0b24+XCIpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKG9wdHMpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCEoIG9wdHMudGV4dCkpXG57XG5vcHRzLnRleHQgPSAnU3VibWl0J1xufVxuaWYgKCEoIG9wdHMuaWNvbikpXG57XG5vcHRzLmljb24gPSAnZmEtY2hlY2snXG59XG5qYWRlX21peGluc1tcImJ1dHRvblwiXS5jYWxsKHtcbmF0dHJpYnV0ZXM6IGphZGUubWVyZ2UoW3tcImRhdGEtY2xpY2tcIjogXCJzdWJtaXRcIixcImNsYXNzXCI6IFwiYnRuLW91dGxpbmUtc3VjY2Vzc1wifSxhdHRyaWJ1dGVzXSlcbn0sIG9wdHMpO1xufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmQgY2FyZC1ib2R5XFxcIj48ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGg0IGNsYXNzPVxcXCJjYXJkLXRpdGxlXFxcIj5OZXcgT250b2xvZ3k8L2g0PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiZm9ybUlucHV0XCJdKHsgbGFiZWw6ICdMYWJlbCcsIHBsYWNlaG9sZGVyOiAnTGFiZWwnLCBuYW1lOiAnbGFiZWwnLCB0eXBlOiAndGV4dCcgfSk7XG5qYWRlX21peGluc1tcImZvcm1JbnB1dFwiXSh7IGxhYmVsOiAnUHJlZml4JywgcGxhY2Vob2xkZXI6ICdQcmVmaXgnLCBuYW1lOiAncHJlZml4JywgdHlwZTogJ3RleHQnIH0pO1xuYnVmLnB1c2goXCI8L2Rpdj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJ1cGxvYWRcXFwiIGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PGhyLz48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTIgdGV4dC1yaWdodFxcXCI+XCIpO1xuamFkZV9taXhpbnNbXCJzdWJtaXRCdXR0b25cIl0oe30pO1xuYnVmLnB1c2goXCI8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5cIik7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIGlkPVxcXCJmaWxlX3VwbG9hZFxcXCIgZGF0YS10aXRsZT1cXFwiRHJhZyBhbmQgZHJvcCBhIEpTT04tTEQgZGF0YXNldFxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbC1maWxlXFxcIi8+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBMaXN0Um91dGUsIE5ld1JvdXRlLCBPbnRvbG9neVJvdXRlcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbnJlcXVpcmUoJy4vZmFjdG9yeScpO1xuXG5yZXF1aXJlKCcuL2ltcG9ydGVyJyk7XG5cbkxpc3RSb3V0ZSA9IHJlcXVpcmUoJy4vbGlzdC9yb3V0ZScpO1xuXG5OZXdSb3V0ZSA9IHJlcXVpcmUoJy4vbmV3L3JvdXRlJyk7XG5cbk9udG9sb2d5Um91dGVyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE9udG9sb2d5Um91dGVyLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBPbnRvbG9neVJvdXRlcigpIHtcbiAgICByZXR1cm4gT250b2xvZ3lSb3V0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBPbnRvbG9neVJvdXRlci5wcm90b3R5cGUucm91dGVzID0ge1xuICAgICdvbnRvbG9naWVzKC8pJzogJ2xpc3QnLFxuICAgICdvbnRvbG9naWVzLzppZC9zZWFyY2goLyknOiAnc2VhcmNoJyxcbiAgICAnb250b2xvZ2llcy9uZXcoLyknOiAnbmV3J1xuICB9O1xuXG4gIE9udG9sb2d5Um91dGVyLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBMaXN0Um91dGUoe1xuICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lclxuICAgIH0pO1xuICB9O1xuXG4gIE9udG9sb2d5Um91dGVyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihpZCkge1xuICAgIHJldHVybiBjb25zb2xlLmxvZygnU0VBUkNIJyk7XG4gIH07XG5cbiAgT250b2xvZ3lSb3V0ZXIucHJvdG90eXBlW1wibmV3XCJdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBOZXdSb3V0ZSh7XG4gICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIE9udG9sb2d5Um91dGVyO1xuXG59KShyZXF1aXJlKCdobl9yb3V0aW5nL2xpYi9yb3V0ZXInKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gT250b2xvZ3lSb3V0ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyOXVkRzlzYjJkNUwzSnZkWFJsY2k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOWhjSEF2WTI5bVptVmxMMjF2WkhWc1pYTXZiMjUwYjJ4dloza3ZjbTkxZEdWeUxtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeEpRVUZCTEcxRFFVRkJPMFZCUVVFN096dEJRVUZCTEU5QlFVRXNRMEZCVVN4WFFVRlNPenRCUVVOQkxFOUJRVUVzUTBGQlVTeFpRVUZTT3p0QlFVVkJMRk5CUVVFc1IwRkJXU3hQUVVGQkxFTkJRVkVzWTBGQlVqczdRVUZEV2l4UlFVRkJMRWRCUVZjc1QwRkJRU3hEUVVGUkxHRkJRVkk3TzBGQlNVdzdPenM3T3pzN01rSkJSVW9zVFVGQlFTeEhRVU5GTzBsQlFVRXNaVUZCUVN4RlFVRTBRaXhOUVVFMVFqdEpRVU5CTERCQ1FVRkJMRVZCUVRSQ0xGRkJSRFZDTzBsQlJVRXNiVUpCUVVFc1JVRkJORUlzUzBGR05VSTdPenN5UWtGSlJpeEpRVUZCTEVkQlFVMHNVMEZCUVR0WFFVTktMRWxCUVVrc1UwRkJTaXhEUVVGak8wMUJRVVVzVTBGQlFTeEZRVUZYTEVsQlFVTXNRMEZCUVN4VFFVRmtPMHRCUVdRN1JVRkVTVHM3TWtKQlNVNHNUVUZCUVN4SFFVRlJMRk5CUVVNc1JVRkJSRHRYUVVOT0xFOUJRVThzUTBGQlF5eEhRVUZTTEVOQlFWa3NVVUZCV2p0RlFVUk5PenMwUWtGSFVpeExRVUZCTEVkQlFVc3NVMEZCUVR0WFFVTklMRWxCUVVrc1VVRkJTaXhEUVVGaE8wMUJRVVVzVTBGQlFTeEZRVUZYTEVsQlFVTXNRMEZCUVN4VFFVRmtPMHRCUVdJN1JVRkVSenM3T3p0SFFXUnpRaXhQUVVGQkxFTkJRVkVzZFVKQlFWSTdPMEZCYlVJM1FpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgU2VhcmNoUmVzdWx0Q29sbGVjdGlvbiwgU2VhcmNoUmVzdWx0RGVjb3JhdG9yLCBTZWFyY2hSZXN1bHRNb2RlbCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblNlYXJjaFJlc3VsdERlY29yYXRvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChTZWFyY2hSZXN1bHREZWNvcmF0b3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFNlYXJjaFJlc3VsdERlY29yYXRvcigpIHtcbiAgICByZXR1cm4gU2VhcmNoUmVzdWx0RGVjb3JhdG9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgU2VhcmNoUmVzdWx0RGVjb3JhdG9yLnByb3RvdHlwZS5pY29uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5mb1R5cGU7XG4gICAgbmZvVHlwZSA9IHRoaXMuZ2V0KCdkYXRhJylbJ0B0eXBlJ107XG4gICAgc3dpdGNoIChuZm9UeXBlKSB7XG4gICAgICBjYXNlIFwibmZvOkZvbGRlclwiOlxuICAgICAgICByZXR1cm4gJ2ZhLWZvbGRlci1vcGVuLW8nO1xuICAgICAgY2FzZSBcIm5mbzpEb2N1bWVudFwiOlxuICAgICAgICByZXR1cm4gJ2ZhLWZpbGUtbyc7XG4gICAgICBjYXNlIFwibmZvOkltYWdlXCI6XG4gICAgICAgIHJldHVybiAnZmEtZmlsZS1pbWFnZS1vJztcbiAgICAgIGNhc2UgXCJuZm86UGxhaW5UZXh0RG9jdW1lbnRcIjpcbiAgICAgICAgcmV0dXJuICdmYS1maWxlLXRleHQtbyc7XG4gICAgICBjYXNlIFwibmZvOlNwcmVhZHNoZWV0XCI6XG4gICAgICAgIHJldHVybiAnZmEtZmlsZS1leGNlbC1vJztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFNlYXJjaFJlc3VsdERlY29yYXRvcjtcblxufSkoTW4uRGVjb3JhdG9yKTtcblxuU2VhcmNoUmVzdWx0TW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU2VhcmNoUmVzdWx0TW9kZWwsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFNlYXJjaFJlc3VsdE1vZGVsKCkge1xuICAgIHJldHVybiBTZWFyY2hSZXN1bHRNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFNlYXJjaFJlc3VsdE1vZGVsLnByb3RvdHlwZS5kZWNvcmF0b3IgPSBTZWFyY2hSZXN1bHREZWNvcmF0b3I7XG5cbiAgU2VhcmNoUmVzdWx0TW9kZWwucHJvdG90eXBlLnN0cmluZ2lmeUpzb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSwgbnVsbCwgMik7XG4gIH07XG5cbiAgcmV0dXJuIFNlYXJjaFJlc3VsdE1vZGVsO1xuXG59KShCYWNrYm9uZS5Nb2RlbCk7XG5cblNlYXJjaFJlc3VsdENvbGxlY3Rpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU2VhcmNoUmVzdWx0Q29sbGVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gU2VhcmNoUmVzdWx0Q29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gU2VhcmNoUmVzdWx0Q29sbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFNlYXJjaFJlc3VsdENvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gU2VhcmNoUmVzdWx0TW9kZWw7XG5cbiAgcmV0dXJuIFNlYXJjaFJlc3VsdENvbGxlY3Rpb247XG5cbn0pKEJhY2tib25lLkNvbGxlY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgTW9kZWw6IFNlYXJjaFJlc3VsdE1vZGVsLFxuICBDb2xsZWN0aW9uOiBTZWFyY2hSZXN1bHRDb2xsZWN0aW9uXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOWxiblJwZEdsbGN5NWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTloY0hBdlkyOW1abVZsTDIxdlpIVnNaWE12YzJWaGNtTm9MMlZ1ZEdsMGFXVnpMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkZRU3hKUVVGQkxHZEZRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3TzJ0RFFVVktMRWxCUVVFc1IwRkJUU3hUUVVGQk8wRkJRMG9zVVVGQlFUdEpRVUZCTEU5QlFVRXNSMEZCVlN4SlFVRkRMRU5CUVVFc1IwRkJSQ3hEUVVGTExFMUJRVXdzUTBGQllTeERRVUZCTEU5QlFVRTdRVUZGYUVJc1dVRkJUeXhQUVVGUU8wRkJRVUVzVjBGRFFTeFpRVVJCTzJWQlF6aENPMEZCUkRsQ0xGZEJSVUVzWTBGR1FUdGxRVVU0UWp0QlFVWTVRaXhYUVVkQkxGZEJTRUU3WlVGSE9FSTdRVUZJT1VJc1YwRkpRU3gxUWtGS1FUdGxRVWs0UWp0QlFVbzVRaXhYUVV0QkxHbENRVXhCTzJWQlN6aENPMEZCVERsQ08wVkJTRWc3T3pzN1IwRkdORUlzUlVGQlJTeERRVUZET3p0QlFXTnFRenM3T3pzN096czRRa0ZIU2l4VFFVRkJMRWRCUVZjN096aENRVWxZTEdGQlFVRXNSMEZCWlN4VFFVRkJPMEZCUVVjc1YwRkJUeXhKUVVGSkxFTkJRVU1zVTBGQlRDeERRVUZsTEVsQlFVTXNRMEZCUVN4TlFVRkVMRU5CUVVFc1EwRkJaaXhGUVVFd1FpeEpRVUV4UWl4RlFVRm5ReXhEUVVGb1F6dEZRVUZXT3pzN08wZEJVR1VzVVVGQlVTeERRVUZET3p0QlFWZHVRenM3T3pzN096dHRRMEZEU2l4TFFVRkJMRWRCUVU4N096czdSMEZFTkVJc1VVRkJVU3hEUVVGRE96dEJRVXM1UXl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVORk8wVkJRVUVzUzBGQlFTeEZRVUZaTEdsQ1FVRmFPMFZCUTBFc1ZVRkJRU3hGUVVGWkxITkNRVVJhSW4wPVxuIiwidmFyIENzdlZpZXdlcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNzdlZpZXdlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDc3ZWaWV3ZXIsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENzdlZpZXdlcigpIHtcbiAgICByZXR1cm4gQ3N2Vmlld2VyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgQ3N2Vmlld2VyLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2NzdicpO1xuXG4gIENzdlZpZXdlci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBDc3ZWaWV3ZXIucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVybDtcbiAgICB1cmwgPSB0aGlzLm1vZGVsLmdldCgndmlld3MnKS5jc3Y7XG4gICAgcmV0dXJuIHRoaXMubG9hZENzdih1cmwpO1xuICB9O1xuXG4gIENzdlZpZXdlci5wcm90b3R5cGUubG9hZENzdiA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciB4aHI7XG4gICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgeGhyLm9ubG9hZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHN0YXR1cztcbiAgICAgICAgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMjAwID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJztcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckNzdih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIHJldHVybiB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIENzdlZpZXdlci5wcm90b3R5cGUucmVuZGVyQ3N2ID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHZhciBjb250YWluZXIsIHBhcnNlZENTVjtcbiAgICBwYXJzZWRDU1YgPSBkMy5jc3ZQYXJzZVJvd3ModGV4dCk7XG4gICAgcmV0dXJuIGNvbnRhaW5lciA9IGQzLnNlbGVjdCgnLmNzdi12aWV3ZXInKS5hcHBlbmQoJ3RhYmxlJykuc2VsZWN0QWxsKCd0cicpLmRhdGEocGFyc2VkQ1NWKS5lbnRlcigpLmFwcGVuZCgndHInKS5zZWxlY3RBbGwoJ3RkJykuZGF0YShmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4gZDtcbiAgICB9KS5lbnRlcigpLmFwcGVuZCgndGQnKS50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBkO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBDc3ZWaWV3ZXI7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENzdlZpZXdlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDNObFlYSmphQzltWVdObGRITmxZWEpqYUM5MmFXVjNjeTlqYzNaV2FXVjNaWEl1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5amMzWldhV1YzWlhJdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVOQkxFbEJRVUVzVTBGQlFUdEZRVUZCT3pzN1FVRkJUVHM3T3pzN096dHpRa0ZEU2l4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxHbENRVUZTT3p0elFrRkRWaXhUUVVGQkxFZEJRVmM3TzNOQ1FVVllMRkZCUVVFc1IwRkJWU3hUUVVGQk8wRkJRMUlzVVVGQlFUdEpRVUZCTEVkQlFVRXNSMEZCVFN4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFZEJRVkFzUTBGQlZ5eFBRVUZZTEVOQlFXMUNMRU5CUVVNN1YwRkRNVUlzU1VGQlF5eERRVUZCTEU5QlFVUXNRMEZCVXl4SFFVRlVPMFZCUmxFN08zTkNRVWxXTEU5QlFVRXNSMEZCVXl4VFFVRkRMRWRCUVVRN1FVRkpVQ3hSUVVGQk8wbEJRVUVzUjBGQlFTeEhRVUZOTEVsQlFVazdTVUZEVml4SFFVRkhMRU5CUVVNc1NVRkJTaXhEUVVGVExFdEJRVlFzUlVGQlowSXNSMEZCYUVJc1JVRkJjVUlzU1VGQmNrSTdTVUZEUVN4SFFVRkhMRU5CUVVNc1dVRkJTaXhIUVVGdFFqdEpRVWR1UWl4SFFVRkhMRU5CUVVNc1RVRkJTaXhIUVVGaExFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUXl4RFFVRkVPMEZCUTFnc1dVRkJRVHRSUVVGQkxFMUJRVUVzUjBGQldTeEhRVUZITEVOQlFVTXNUVUZCU2l4TFFVRmpMRWRCUVdwQ0xFZEJRVEJDTEZOQlFURkNMRWRCUVhsRE8xRkJSMnhFTEVsQlFXMURMRTFCUVVFc1MwRkJWU3hUUVVFM1F6dEJRVUZCTEdsQ1FVRlBMRXRCUVVNc1EwRkJRU3hUUVVGRUxFTkJRVmNzUjBGQlJ5eERRVUZETEZGQlFXWXNSVUZCVURzN1RVRktWenRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRTdWMEZQWWl4SFFVRkhMRU5CUVVNc1NVRkJTaXhEUVVGQk8wVkJhRUpQT3p0elFrRnJRbFFzVTBGQlFTeEhRVUZYTEZOQlFVTXNTVUZCUkR0QlFVbFVMRkZCUVVFN1NVRkJRU3hUUVVGQkxFZEJRVmtzUlVGQlJTeERRVUZETEZsQlFVZ3NRMEZCWjBJc1NVRkJhRUk3VjBGRFdpeFRRVUZCTEVkQlFWa3NSVUZCUlN4RFFVRkRMRTFCUVVnc1EwRkJWU3hoUVVGV0xFTkJRMW9zUTBGQlF5eE5RVVJYTEVOQlEwb3NUMEZFU1N4RFFVVmFMRU5CUVVNc1UwRkdWeXhEUVVWRUxFbEJSa01zUTBGSFdpeERRVUZETEVsQlNGY3NRMEZIVGl4VFFVaE5MRU5CU1Zvc1EwRkJReXhMUVVwWExFTkJRVUVzUTBGTFdpeERRVUZETEUxQlRGY3NRMEZMU2l4SlFVeEpMRU5CVFZvc1EwRkJReXhUUVU1WExFTkJUVVFzU1VGT1F5eERRVTlhTEVOQlFVTXNTVUZRVnl4RFFVOU9MRk5CUVVNc1EwRkJSRHRoUVVGUE8wbEJRVkFzUTBGUVRTeERRVkZhTEVOQlFVTXNTMEZTVnl4RFFVRkJMRU5CVVVvc1EwRkJReXhOUVZKSExFTkJVVWtzU1VGU1NpeERRVkZUTEVOQlFVTXNTVUZTVml4RFFWRmxMRk5CUVVNc1EwRkJSRHRoUVVGUE8wbEJRVkFzUTBGU1pqdEZRVXhJT3pzN08wZEJNVUpYTEVWQlFVVXNRMEZCUXpzN1FVRXlRek5DTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsIlxuLyoqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IHdoZW4gcGFzc2luZyBpbiBjdXN0b20gdGVtcGxhdGVzIGZvclxuICogbGlzdEl0ZW1UZW1wbGF0ZSBhbmQgb3JkZXJCeVRlbXBsYXRlIHRvIGtlZXAgdGhlIGNsYXNzZXMgYXNcbiAqIHRoZXkgYXJlIHVzZWQgaW4gdGhlIGNvZGUgYXQgb3RoZXIgbG9jYXRpb25zIGFzIHdlbGwuXG4gKi9cbnZhciBhcHBseUZpbHRlcnMsIGNyZWF0ZUVtcHR5RmFjZXRDb2xsZWN0aW9uLCBjcmVhdGVGYWNldFVJLCBkZWZhdWx0cywgZmlsdGVyLCBmaWx0ZXJTaW5nbGVJdGVtLCBnZXRGaWx0ZXJCeUlkLCBpbml0RmFjZXRDb3VudCwgb3JkZXIsIHJlc2V0RmFjZXRDb3VudCwgc2V0WmVyb0NvdW50cywgc2V0dGluZ3MsIHNob3dNb3JlUmVzdWx0cywgc29ydEZhY2V0Q29sbGVjdGlvbiwgdG9nZ2xlRmlsdGVyLCB1cGRhdGVGYWNldENvbGxlY3Rpb24sIHVwZGF0ZUZhY2V0VUksIHVwZGF0ZVJlc3VsdHM7XG5cbmRlZmF1bHRzID0ge1xuICBpdGVtczogW1xuICAgIHtcbiAgICAgIGE6IDIsXG4gICAgICBiOiAxLFxuICAgICAgYzogMlxuICAgIH0sIHtcbiAgICAgIGE6IDIsXG4gICAgICBiOiAyLFxuICAgICAgYzogMVxuICAgIH0sIHtcbiAgICAgIGE6IDEsXG4gICAgICBiOiAxLFxuICAgICAgYzogMVxuICAgIH0sIHtcbiAgICAgIGE6IDMsXG4gICAgICBiOiAzLFxuICAgICAgYzogMVxuICAgIH1cbiAgXSxcbiAgZmFjZXRzOiB7XG4gICAgJ2EnOiAnVGl0bGUgQScsXG4gICAgJ2InOiAnVGl0bGUgQicsXG4gICAgJ2MnOiAnVGl0bGUgQydcbiAgfSxcbiAgZmFjZXRFbGVtZW50OiAnI2ZhY2V0cycsXG4gIGxpc3RJdGVtVGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiZmFjZXRpdGVtXCIgaWQ9XCI8JT0gaWQgJT5cIj48JT0gbmFtZSAlPiA8c3BhbiBjbGFzcz1cImZhY2V0aXRlbWNvdW50XCI+KDwlPSBjb3VudCAlPik8L3NwYW4+PC9kaXY+JyxcbiAgY291bnRUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ZmFjZXR0b3RhbGNvdW50PlJlc3VsdHM8L2Rpdj4nLFxuICByZXN1bHRUZW1wbGF0ZUJ5cGFzczogbnVsbCxcbiAgb3JkZXJCeU9wdGlvbnM6IHtcbiAgICAnYSc6ICdieSBBJyxcbiAgICAnYic6ICdieSBCJyxcbiAgICAnUkFORE9NJzogJ2J5IHJhbmRvbSdcbiAgfSxcbiAgc3RhdGU6IHtcbiAgICBvcmRlckJ5OiBmYWxzZSxcbiAgICBmaWx0ZXJzOiB7fVxuICB9LFxuICBlbmFibGVQYWdpbmF0aW9uOiB0cnVlLFxuICBwYWdpbmF0aW9uQ291bnQ6IDIwXG59O1xuXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgZmlyc3QgZnVuY3Rpb24gLyB2YXJpYWJsZSB0aGF0IGdldHMgZXhwb3J0ZWQgaW50byB0aGVcbiAqIGpRdWVyeSBuYW1lc3BhY2UuIFBhc3MgaW4geW91ciBvd24gc2V0dGluZ3MgKHNlZSBhYm92ZSkgdG8gaW5pdGlhbGl6ZVxuICogdGhlIGZhY2V0ZWQgc2VhcmNoXG4gKi9cblxuc2V0dGluZ3MgPSB7fTtcblxuXG4vKipcbiAqIFRoZSBmb2xsb3dpbmcgc2VjdGlvbiBjb250YWlucyB0aGUgbG9naWMgb2YgdGhlIGZhY2V0ZWQgc2VhcmNoXG4gKi9cblxuXG4vKipcbiAqIGluaXRpYWxpemVzIGFsbCBmYWNldHMgYW5kIHRoZWlyIGluZGl2aWR1YWwgZmlsdGVyc1xuICovXG5cbmNyZWF0ZUVtcHR5RmFjZXRDb2xsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gIHZhciBmYWNldCwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gIHJlZiA9IHNldHRpbmdzLmZhY2V0cztcbiAgcmVzdWx0cyA9IFtdO1xuICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICBmYWNldCA9IHJlZltqXTtcbiAgICByZXN1bHRzLnB1c2goc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV0gPSB7fSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuXG5zZXRaZXJvQ291bnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhdHRyS2V5LCBmYWNldCwgZmFjZXRpdGVtLCBpdGVtLCBqLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgcmVmID0gc2V0dGluZ3MuaXRlbXM7XG4gIHJlc3VsdHMgPSBbXTtcbiAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgaXRlbSA9IHJlZltqXTtcbiAgICBpdGVtID0gaXRlbS5kYXRhO1xuICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaywgbGVuMSwgcmVmMSwgcmVzdWx0czE7XG4gICAgICByZWYxID0gc2V0dGluZ3MuZmFjZXRzO1xuICAgICAgcmVzdWx0czEgPSBbXTtcbiAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICBmYWNldCA9IHJlZjFba107XG4gICAgICAgIGlmICgkLmlzQXJyYXkoaXRlbVtmYWNldC5hdHRyaWJ1dGVdKSkge1xuICAgICAgICAgIHJlc3VsdHMxLnB1c2goKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGwsIGxlbjIsIHJlZjIsIHJlc3VsdHMyO1xuICAgICAgICAgICAgcmVmMiA9IGl0ZW1bZmFjZXQuYXR0cmlidXRlXTtcbiAgICAgICAgICAgIHJlc3VsdHMyID0gW107XG4gICAgICAgICAgICBmb3IgKGwgPSAwLCBsZW4yID0gcmVmMi5sZW5ndGg7IGwgPCBsZW4yOyBsKyspIHtcbiAgICAgICAgICAgICAgZmFjZXRpdGVtID0gcmVmMltsXTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmYWNldGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0czIucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXQuYXR0cmlidXRlXVtmYWNldGl0ZW1bJ0BpZCddXSA9IHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbltmYWNldC5hdHRyaWJ1dGVdW2ZhY2V0aXRlbVsnQGlkJ11dIHx8IHtcbiAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgaWQ6IF8udW5pcXVlSWQoJ2ZhY2V0XycpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0czIucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXQuYXR0cmlidXRlXVtmYWNldGl0ZW1dID0gc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV1bZmFjZXRpdGVtXSB8fCB7XG4gICAgICAgICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgICAgICAgIGlkOiBfLnVuaXF1ZUlkKCdmYWNldF8nKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0czI7XG4gICAgICAgICAgfSkoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW1bZmFjZXQuYXR0cmlidXRlXSA9PT0gJ29iamVjdCcgJiYgKGl0ZW1bZmFjZXQuYXR0cmlidXRlXVsnQGlkJ10gfHwgaXRlbVtmYWNldC5hdHRyaWJ1dGVdWydAdmFsdWUnXSkpIHtcbiAgICAgICAgICBhdHRyS2V5ID0gaXRlbVtmYWNldC5hdHRyaWJ1dGVdWydAaWQnXSA/ICdAaWQnIDogJ0B2YWx1ZSc7XG4gICAgICAgICAgcmVzdWx0czEucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXQuYXR0cmlidXRlXVtpdGVtW2ZhY2V0LmF0dHJpYnV0ZV1bYXR0cktleV1dID0gc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV1baXRlbVtmYWNldC5hdHRyaWJ1dGVdW2F0dHJLZXldXSB8fCB7XG4gICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgIGlkOiBfLnVuaXF1ZUlkKCdmYWNldF8nKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpdGVtW2ZhY2V0LmF0dHJpYnV0ZV0gIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmVzdWx0czEucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXQuYXR0cmlidXRlXVtpdGVtW2ZhY2V0LmF0dHJpYnV0ZV1dID0gc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV1baXRlbVtmYWNldC5hdHRyaWJ1dGVdXSB8fCB7XG4gICAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgICBpZDogXy51bmlxdWVJZCgnZmFjZXRfJylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzMS5wdXNoKHZvaWQgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0czE7XG4gICAgfSkoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuXG5zb3J0RmFjZXRDb2xsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlbCwgZmFjZXQsIGZhY2V0dGl0bGUsIGosIGxlbiwgcmVmLCByZXN1bHRzLCBzb3J0ZWQsIHNvcnRlZHN0b3JlO1xuICByZWYgPSBzZXR0aW5ncy5mYWNldENvbGxlY3Rpb247XG4gIHJlc3VsdHMgPSBbXTtcbiAgZm9yIChmYWNldHRpdGxlIGluIHJlZikge1xuICAgIGZhY2V0ID0gcmVmW2ZhY2V0dGl0bGVdO1xuICAgIHNvcnRlZCA9IF8ua2V5cyhzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXR0aXRsZV0pLnNvcnQoKTtcbiAgICBpZiAoc2V0dGluZ3MuZmFjZXRfU29ydE9wdGlvbiAmJiBzZXR0aW5ncy5mYWNldF9Tb3J0T3B0aW9uW2ZhY2V0dGl0bGVdKSB7XG4gICAgICBzb3J0ZWQgPSBfLnVuaW9uKHNldHRpbmdzLmZhY2V0X1NvcnRPcHRpb25bZmFjZXR0aXRsZV0sIHNvcnRlZCk7XG4gICAgfVxuICAgIHNvcnRlZHN0b3JlID0ge307XG4gICAgZm9yIChqID0gMCwgbGVuID0gc29ydGVkLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICBlbCA9IHNvcnRlZFtqXTtcbiAgICAgIHNvcnRlZHN0b3JlW2VsXSA9IHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbltmYWNldHRpdGxlXVtlbF07XG4gICAgfVxuICAgIHJlc3VsdHMucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXR0aXRsZV0gPSBzb3J0ZWRzdG9yZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuXG5pbml0RmFjZXRDb3VudCA9IGZ1bmN0aW9uKCkge1xuICBjcmVhdGVFbXB0eUZhY2V0Q29sbGVjdGlvbigpO1xuICBzZXRaZXJvQ291bnRzKCk7XG4gIHJldHVybiBzb3J0RmFjZXRDb2xsZWN0aW9uKCk7XG59O1xuXG5cbi8qKlxuICogcmVzZXRzIHRoZSBmYWNldCBjb3VudFxuICovXG5cbnJlc2V0RmFjZXRDb3VudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZmFjZXRuYW1lLCBpdGVtbmFtZSwgaXRlbXMsIHJlZiwgcmVzdWx0cywgdmFsdWU7XG4gIHJlZiA9IHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbjtcbiAgcmVzdWx0cyA9IFtdO1xuICBmb3IgKGZhY2V0bmFtZSBpbiByZWYpIHtcbiAgICBpdGVtcyA9IHJlZltmYWNldG5hbWVdO1xuICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0czE7XG4gICAgICByZXN1bHRzMSA9IFtdO1xuICAgICAgZm9yIChpdGVtbmFtZSBpbiBpdGVtcykge1xuICAgICAgICB2YWx1ZSA9IGl0ZW1zW2l0ZW1uYW1lXTtcbiAgICAgICAgcmVzdWx0czEucHVzaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb25bZmFjZXRuYW1lXVtpdGVtbmFtZV0uY291bnQgPSAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzMTtcbiAgICB9KSgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0cztcbn07XG5cblxuLyoqXG4gKiBGaWx0ZXJzIGFsbCBpdGVtcyBmcm9tIHRoZSBzZXR0aW5ncyBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnRseVxuICogc2V0IGZpbHRlcnMgYW5kIHN0b3JlcyB0aGUgcmVzdWx0cyBpbiB0aGUgc2V0dGluZ3MuY3VycmVudFJlc3VsdHMuXG4gKiBUaGUgbnVtYmVyIG9mIGl0ZW1zIGluIGVhY2ggZmlsdGVyIGZyb20gZWFjaCBmYWNldCBpcyBhbHNvIHVwZGF0ZWRcbiAqL1xuXG5maWx0ZXJTaW5nbGVJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICB2YXIgYXR0cktleSwgZiwgZmFjZXQsIGZpbHRlciwgZmlsdGVyc0FwcGx5LCBpbnRlcnMsIGosIGxlbiwgcmVmLCByZWYxO1xuICBmaWx0ZXJzQXBwbHkgPSB0cnVlO1xuICBpdGVtID0gaXRlbS5kYXRhO1xuICByZWYgPSBzZXR0aW5ncy5zdGF0ZS5maWx0ZXJzO1xuICBmb3IgKGZhY2V0IGluIHJlZikge1xuICAgIGZpbHRlciA9IHJlZltmYWNldF07XG4gICAgaWYgKCQuaXNBcnJheShpdGVtW2ZhY2V0XSkpIHtcbiAgICAgIGlmIChpdGVtW2ZhY2V0XVswXSAmJiB0eXBlb2YgaXRlbVtmYWNldF1bMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJlZjEgPSBpdGVtW2ZhY2V0XTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGYgPSByZWYxW2pdO1xuICAgICAgICAgIGlmIChmaWx0ZXIubGVuZ3RoICYmIF8uaW5kZXhPZihmaWx0ZXIsIGZbJ0BpZCddKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGZpbHRlcnNBcHBseSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW50ZXJzID0gXy5pbnRlcnNlY3Rpb24oaXRlbVtmYWNldF0sIGZpbHRlcik7XG4gICAgICAgIGlmIChpbnRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZmlsdGVyc0FwcGx5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtW2ZhY2V0XSA9PT0gJ29iamVjdCcgJiYgKGl0ZW1bZmFjZXRdWydAaWQnXSB8fCBpdGVtW2ZhY2V0XVsnQHZhbHVlJ10pKSB7XG4gICAgICBhdHRyS2V5ID0gaXRlbVtmYWNldF1bJ0BpZCddID8gJ0BpZCcgOiAnQHZhbHVlJztcbiAgICAgIGlmIChmaWx0ZXIubGVuZ3RoICYmIF8uaW5kZXhPZihmaWx0ZXIsIGl0ZW1bZmFjZXRdW2F0dHJLZXldKSA9PT0gLTEpIHtcbiAgICAgICAgZmlsdGVyc0FwcGx5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChmaWx0ZXIubGVuZ3RoICYmIF8uaW5kZXhPZihmaWx0ZXIsIGl0ZW1bZmFjZXRdKSA9PT0gLTEpIHtcbiAgICAgICAgZmlsdGVyc0FwcGx5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmaWx0ZXJzQXBwbHk7XG59O1xuXG5hcHBseUZpbHRlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNldHRpbmdzLmN1cnJlbnRSZXN1bHRzID0gXy5zZWxlY3Qoc2V0dGluZ3MuaXRlbXMsIGZpbHRlclNpbmdsZUl0ZW0pO1xufTtcblxudXBkYXRlRmFjZXRDb2xsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhdHRyS2V5LCBmYWNldCwgaXRlbSwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XG4gIHJlZiA9IHNldHRpbmdzLmZhY2V0cztcbiAgcmVzdWx0cyA9IFtdO1xuICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICBmYWNldCA9IHJlZltqXTtcbiAgICByZXN1bHRzLnB1c2goKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGssIGxlbjEsIHJlZjEsIHJlc3VsdHMxO1xuICAgICAgcmVmMSA9IHNldHRpbmdzLmN1cnJlbnRSZXN1bHRzO1xuICAgICAgcmVzdWx0czEgPSBbXTtcbiAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICBpdGVtID0gcmVmMVtrXTtcbiAgICAgICAgaXRlbSA9IGl0ZW0uZGF0YTtcbiAgICAgICAgaWYgKCQuaXNBcnJheShpdGVtW2ZhY2V0LmF0dHJpYnV0ZV0pKSB7XG4gICAgICAgICAgcmVzdWx0czEucHVzaChfLmVhY2goaXRlbVtmYWNldC5hdHRyaWJ1dGVdLCBmdW5jdGlvbihmYWNldGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmFjZXRpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV1bZmFjZXRpdGVtWydAaWQnXV0uY291bnQgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbltmYWNldC5hdHRyaWJ1dGVdW2ZhY2V0aXRlbV0uY291bnQgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW1bZmFjZXQuYXR0cmlidXRlXSA9PT0gJ29iamVjdCcgJiYgKGl0ZW1bZmFjZXQuYXR0cmlidXRlXVsnQGlkJ10gfHwgaXRlbVtmYWNldC5hdHRyaWJ1dGVdWydAdmFsdWUnXSkpIHtcbiAgICAgICAgICBhdHRyS2V5ID0gaXRlbVtmYWNldC5hdHRyaWJ1dGVdWydAaWQnXSA/ICdAaWQnIDogJ0B2YWx1ZSc7XG4gICAgICAgICAgaWYgKGl0ZW1bZmFjZXQuYXR0cmlidXRlXVthdHRyS2V5XSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzMS5wdXNoKHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbltmYWNldC5hdHRyaWJ1dGVdW2l0ZW1bZmFjZXQuYXR0cmlidXRlXVthdHRyS2V5XV0uY291bnQgKz0gMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMxLnB1c2godm9pZCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGl0ZW1bZmFjZXQuYXR0cmlidXRlXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzMS5wdXNoKHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbltmYWNldC5hdHRyaWJ1dGVdW2l0ZW1bZmFjZXQuYXR0cmlidXRlXV0uY291bnQgKz0gMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMxLnB1c2godm9pZCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzMTtcbiAgICB9KSgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0cztcbn07XG5cbmZpbHRlciA9IGZ1bmN0aW9uKCkge1xuICBhcHBseUZpbHRlcnMoKTtcbiAgcmVzZXRGYWNldENvdW50KCk7XG4gIHVwZGF0ZUZhY2V0Q29sbGVjdGlvbigpO1xuICBzZXR0aW5ncy5zdGF0ZS5zaG93blJlc3VsdHMgPSAwO1xufTtcblxuXG4vKipcbiAqIE9yZGVycyB0aGUgY3VycmVudFJlc3VsdHMgYWNjb3JkaW5nIHRvIHRoZSBzZXR0aW5ncy5zdGF0ZS5vcmRlckJ5IHZhcmlhYmxlXG4gKi9cblxub3JkZXIgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHNldHRpbmdzLnN0YXRlLm9yZGVyQnkpIHtcbiAgICAkKCcuYWN0aXZlb3JkZXJieScpLnJlbW92ZUNsYXNzKCdhY3RpdmVvcmRlcmJ5Jyk7XG4gICAgJCgnI29yZGVyYnlfJyArIHNldHRpbmdzLnN0YXRlLm9yZGVyQnkpLmFkZENsYXNzKCdhY3RpdmVvcmRlcmJ5Jyk7XG4gICAgcmV0dXJuIHNldHRpbmdzLmN1cnJlbnRSZXN1bHRzID0gXy5zb3J0Qnkoc2V0dGluZ3MuY3VycmVudFJlc3VsdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmIChzZXR0aW5ncy5zdGF0ZS5vcmRlckJ5ID09PSAnUkFORE9NJykge1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1bc2V0dGluZ3Muc3RhdGUub3JkZXJCeV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBUaGUgZ2l2ZW4gZmFjZXRuYW1lIGFuZCBmaWx0ZXJuYW1lIGFyZSBhY3RpdmF0ZWQgb3IgZGVhY3RpdmF0ZWRcbiAqIGRlcGVuZGluZyBvbiB3aGF0IHRoZXkgd2VyZSBiZWZvcmVoYW5kLiBUaGlzIGNhdXNlcyB0aGUgaXRlbXMgdG9cbiAqIGJlIGZpbHRlcmVkIGFnYWluIGFuZCB0aGUgVUkgaXMgdXBkYXRlZCBhY2NvcmRpbmdseS5cbiAqL1xuXG50b2dnbGVGaWx0ZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gIHNldHRpbmdzLnN0YXRlLmZpbHRlcnNba2V5XSA9IHNldHRpbmdzLnN0YXRlLmZpbHRlcnNba2V5XSB8fCBbXTtcbiAgaWYgKF8uaW5kZXhPZihzZXR0aW5ncy5zdGF0ZS5maWx0ZXJzW2tleV0sIHZhbHVlKSA9PT0gLTEpIHtcbiAgICBzZXR0aW5ncy5zdGF0ZS5maWx0ZXJzW2tleV0ucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc2V0dGluZ3Muc3RhdGUuZmlsdGVyc1trZXldID0gXy53aXRob3V0KHNldHRpbmdzLnN0YXRlLmZpbHRlcnNba2V5XSwgdmFsdWUpO1xuICAgIGlmIChzZXR0aW5ncy5zdGF0ZS5maWx0ZXJzW2tleV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgc2V0dGluZ3Muc3RhdGUuZmlsdGVyc1trZXldO1xuICAgIH1cbiAgfVxuICBmaWx0ZXIoKTtcbn07XG5cblxuLyoqXG4gKiBUaGUgZm9sbG93aW5nIHNlY3Rpb24gY29udGFpbnMgdGhlIHByZXNlbnRhdGlvbiBvZiB0aGUgZmFjZXRlZCBzZWFyY2hcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBvbmx5IGNhbGxlZCBvbmNlLCBpdCBjcmVhdGVzIHRoZSBmYWNldHMgdWkuXG4gKi9cblxuY3JlYXRlRmFjZXRVSSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYm90dG9tLCBib3R0b21Db250YWluZXIsIGNvbnRhaW5lcnRlbXBsYXRlLCBjb3VudEh0bWwsIGRlc2VsZWN0LCBkZXNlbGVjdFRlbXBsYXRlLCBmYWNldCwgZmFjZXRDb250YWluZXIsIGZhY2V0SHRtbCwgZmFjZXRJdGVtLCBmYWNldEl0ZW1IdG1sLCBmYWNldExpc3RDb250YWluZXIsIGZhY2V0VGl0bGVUZW1wbGF0ZSwgZmFjZXRsaXN0LCBpdGVtSHRtbCwgaXRlbXRlbXBsYXRlLCBqLCBsZW4sIG9yZGVyQnlUZW1wbGF0ZSwgb3JkZXJ0ZW1wbGF0ZSwgcmVmLCB0aXRsZXRlbXBsYXRlO1xuICBmYWNldENvbnRhaW5lciA9ICc8ZGl2IGNsYXNzPWZhY2V0c2VhcmNoIGlkPTwlPSBpZCAlPiA+PC9kaXY+JztcbiAgZmFjZXRUaXRsZVRlbXBsYXRlID0gJzxoMyBjbGFzcz1mYWNldHRpdGxlPjxpIGNsYXNzPVwiaWNvblwiPjwvaT48JT0gdGl0bGUgJT48aSBjbGFzcz1cImZhIGZhLWZ3IGhlbHBcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9XCI8JT0gdG9vbHRpcCAlPlwiPjwvaT48YnI+PHNwYW4gY2xhc3M9XCJwcmVmaXggPCU9IHByZWZpeCAlPlwiPjwlPSBwcmVmaXggJT4gOiA8JT0gX2lkICU+PC9zcGFuPjwvaDM+JztcbiAgZmFjZXRMaXN0Q29udGFpbmVyID0gJzxkaXYgY2xhc3M9ZmFjZXRsaXN0PjwvZGl2Pic7XG4gIGl0ZW10ZW1wbGF0ZSA9IF8udGVtcGxhdGUoc2V0dGluZ3MubGlzdEl0ZW1UZW1wbGF0ZSk7XG4gIHRpdGxldGVtcGxhdGUgPSBfLnRlbXBsYXRlKGZhY2V0VGl0bGVUZW1wbGF0ZSk7XG4gIGNvbnRhaW5lcnRlbXBsYXRlID0gXy50ZW1wbGF0ZShmYWNldENvbnRhaW5lcik7XG4gICQoc2V0dGluZ3MuZmFjZXRFbGVtZW50KS5odG1sKCcnKTtcbiAgcmVmID0gc2V0dGluZ3MuZmFjZXRzO1xuICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICBmYWNldCA9IHJlZltqXTtcbiAgICBmYWNldEh0bWwgPSAkKGNvbnRhaW5lcnRlbXBsYXRlKHtcbiAgICAgIGlkOiBmYWNldC5hdHRyaWJ1dGVcbiAgICB9KSk7XG4gICAgZmFjZXRJdGVtID0ge1xuICAgICAgdGl0bGU6IGZhY2V0LmxhYmVsLFxuICAgICAgdG9vbHRpcDogZmFjZXQudG9vbHRpcCxcbiAgICAgIHByZWZpeDogZmFjZXQucHJlZml4LFxuICAgICAgX2lkOiBmYWNldC5faWRcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKGZhY2V0SXRlbSk7XG4gICAgZmFjZXRJdGVtSHRtbCA9ICQodGl0bGV0ZW1wbGF0ZShmYWNldEl0ZW0pKTtcbiAgICBmYWNldEh0bWwuYXBwZW5kKGZhY2V0SXRlbUh0bWwpO1xuICAgIGZhY2V0bGlzdCA9ICQoZmFjZXRMaXN0Q29udGFpbmVyKTtcbiAgICBfLmVhY2goc2V0dGluZ3MuZmFjZXRDb2xsZWN0aW9uW2ZhY2V0LmF0dHJpYnV0ZV0sIGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVybmFtZSkge1xuICAgICAgdmFyIGZpbHRlcml0ZW0sIGl0ZW0sIHNwbGl0TmFtZTtcbiAgICAgIHNwbGl0TmFtZSA9IGZpbHRlcm5hbWUudHJpbSgpLnNwbGl0KCcvJyk7XG4gICAgICBmaWx0ZXJuYW1lID0gc3BsaXROYW1lLnBvcCgpO1xuICAgICAgZmlsdGVybmFtZSB8fCAoZmlsdGVybmFtZSA9IHNwbGl0TmFtZS5wb3AoKSk7XG4gICAgICBpdGVtID0ge1xuICAgICAgICBpZDogZmlsdGVyLmlkLFxuICAgICAgICBuYW1lOiBmaWx0ZXJuYW1lLFxuICAgICAgICBjb3VudDogZmlsdGVyLmNvdW50XG4gICAgICB9O1xuICAgICAgZmlsdGVyaXRlbSA9ICQoaXRlbXRlbXBsYXRlKGl0ZW0pKTtcbiAgICAgIGlmIChfLmluZGV4T2Yoc2V0dGluZ3Muc3RhdGUuZmlsdGVyc1tmYWNldC5hdHRyaWJ1dGVdLCBmaWx0ZXJuYW1lKSA+PSAwKSB7XG4gICAgICAgIGZpbHRlcml0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZWZhY2V0Jyk7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS5jb3VudCA9PT0gMCkge1xuICAgICAgICBmaWx0ZXJpdGVtLmFkZENsYXNzKCduby1tYXRjaCcpO1xuICAgICAgfVxuICAgICAgZmFjZXRsaXN0LmFwcGVuZChmaWx0ZXJpdGVtKTtcbiAgICB9KTtcbiAgICBmYWNldEh0bWwuYXBwZW5kKGZhY2V0bGlzdCk7XG4gICAgJChzZXR0aW5ncy5mYWNldEVsZW1lbnQpLmFwcGVuZChmYWNldEh0bWwpO1xuICAgICQoJ1tkYXRhLXRvZ2dsZT10b29sdGlwXScpLnRvb2x0aXAoKTtcbiAgfVxuICAkKCcuZmFjZXRpdGVtJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgZmlsdGVyO1xuICAgIGZpbHRlciA9IGdldEZpbHRlckJ5SWQodGhpcy5pZCk7XG4gICAgdG9nZ2xlRmlsdGVyKGZpbHRlci5mYWNldG5hbWUsIGZpbHRlci5maWx0ZXJuYW1lKTtcbiAgICBvcmRlcigpO1xuICAgIHVwZGF0ZUZhY2V0VUkoKTtcbiAgICB1cGRhdGVSZXN1bHRzKCk7XG4gIH0pO1xuICBib3R0b21Db250YWluZXIgPSAnPGRpdiBjbGFzcz1ib3R0b21saW5lPjwvZGl2Pic7XG4gIGJvdHRvbSA9ICQoYm90dG9tQ29udGFpbmVyKTtcbiAgY291bnRIdG1sID0gXy50ZW1wbGF0ZShzZXR0aW5ncy5jb3VudFRlbXBsYXRlLCB7XG4gICAgY291bnQ6IHNldHRpbmdzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aCB8fCAwXG4gIH0pO1xuICAkKGJvdHRvbSkuYXBwZW5kKGNvdW50SHRtbCk7XG4gIG9yZGVyQnlUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPW9yZGVyYnk+PHNwYW4gY2xhc3M9XCJvcmRlcmJ5LXRpdGxlXCI+U29ydCBieTogPC9zcGFuPjx1bD48JSBfLmVhY2gob3B0aW9ucywgZnVuY3Rpb24odmFsdWUsIGtleSkgeyAlPicgKyAnPGxpIGNsYXNzPW9yZGVyYnlpdGVtIGlkPW9yZGVyYnlfPCU9IGtleSAlPj4nICsgJzwlPSB2YWx1ZSAlPiA8L2xpPiA8JSB9KTsgJT48L3VsPjwvZGl2Pic7XG4gIG9yZGVydGVtcGxhdGUgPSBfLnRlbXBsYXRlKG9yZGVyQnlUZW1wbGF0ZSk7XG4gIGl0ZW1IdG1sID0gJChvcmRlcnRlbXBsYXRlKHtcbiAgICAnb3B0aW9ucyc6IHNldHRpbmdzLm9yZGVyQnlPcHRpb25zXG4gIH0pKTtcbiAgJChib3R0b20pLmFwcGVuZChpdGVtSHRtbCk7XG4gICQoc2V0dGluZ3MuZmFjZXRFbGVtZW50KS5hcHBlbmQoYm90dG9tKTtcbiAgJCgnLm9yZGVyYnlpdGVtJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICB2YXIgaWQ7XG4gICAgaWQgPSB0aGlzLmlkLnN1YnN0cig4KTtcbiAgICBpZiAoc2V0dGluZ3Muc3RhdGUub3JkZXJCeSA9PT0gaWQpIHtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZW9yZGVyYnknKTtcbiAgICB9XG4gIH0pO1xuICAkKCcub3JkZXJieWl0ZW0nKS5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgIHZhciBpZDtcbiAgICBpZCA9IHRoaXMuaWQuc3Vic3RyKDgpO1xuICAgIHNldHRpbmdzLnN0YXRlLm9yZGVyQnkgPSBpZDtcbiAgICBzZXR0aW5ncy5zdGF0ZS5zaG93blJlc3VsdHMgPSAwO1xuICAgIG9yZGVyKCk7XG4gICAgdXBkYXRlUmVzdWx0cygpO1xuICB9KTtcbiAgZGVzZWxlY3RUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPWRlc2VsZWN0c3RhcnRvdmVyPkRlc2VsZWN0IGFsbCBmaWx0ZXJzPC9kaXY+JztcbiAgZGVzZWxlY3QgPSAkKGRlc2VsZWN0VGVtcGxhdGUpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgc2V0dGluZ3Muc3RhdGUuZmlsdGVycyA9IHt9O1xuICAgIGpRdWVyeS5mYWNldFVwZGF0ZSgpO1xuICB9KTtcbiAgJChib3R0b20pLmFwcGVuZChkZXNlbGVjdCk7XG59O1xuXG5cbi8qKlxuICogZ2V0IGEgZmFjZXRuYW1lIGFuZCBmaWx0ZXJuYW1lIGJ5IHRoZSB1bmlxdWUgaWQgdGhhdCBpcyBjcmVhdGVkIGluIHRoZSBiZWdpbm5pbmdcbiAqL1xuXG5nZXRGaWx0ZXJCeUlkID0gZnVuY3Rpb24oaWQpIHtcbiAgdmFyIHJlc3VsdDtcbiAgcmVzdWx0ID0gZmFsc2U7XG4gIF8uZWFjaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb24sIGZ1bmN0aW9uKGZhY2V0LCBmYWNldG5hbWUpIHtcbiAgICBfLmVhY2goZmFjZXQsIGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVybmFtZSkge1xuICAgICAgaWYgKGZpbHRlci5pZCA9PT0gaWQpIHtcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICdmYWNldG5hbWUnOiBmYWNldG5hbWUsXG4gICAgICAgICAgJ2ZpbHRlcm5hbWUnOiBmaWx0ZXJuYW1lXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgb25seSBjYWxsZWQgd2hlbmV2ZXIgYSBmaWx0ZXIgaGFzIGJlZW4gYWRkZWQgb3IgcmVtb3ZlZFxuICogSXQgYWRkcyBhIGNsYXNzIHRvIHRoZSBhY3RpdmUgZmlsdGVycyBhbmQgc2hvd3MgdGhlIGNvcnJlY3QgbnVtYmVyIGZvciBlYWNoXG4gKi9cblxudXBkYXRlRmFjZXRVSSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgY291bnRIdG1sLCBpdGVtdGVtcGxhdGU7XG4gIGl0ZW10ZW1wbGF0ZSA9IF8udGVtcGxhdGUoc2V0dGluZ3MubGlzdEl0ZW1UZW1wbGF0ZSk7XG4gIF8uZWFjaChzZXR0aW5ncy5mYWNldENvbGxlY3Rpb24sIGZ1bmN0aW9uKGZhY2V0LCBmYWNldG5hbWUpIHtcbiAgICBfLmVhY2goZmFjZXQsIGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVybmFtZSkge1xuICAgICAgdmFyIGZpbHRlcml0ZW0sIGl0ZW0sIHNwbGl0TmFtZTtcbiAgICAgIHNwbGl0TmFtZSA9IGZpbHRlcm5hbWUudHJpbSgpLnNwbGl0KCcvJyk7XG4gICAgICBmaWx0ZXJuYW1lID0gc3BsaXROYW1lLnBvcCgpO1xuICAgICAgZmlsdGVybmFtZSB8fCAoZmlsdGVybmFtZSA9IHNwbGl0TmFtZS5wb3AoKSk7XG4gICAgICBpdGVtID0ge1xuICAgICAgICBpZDogZmlsdGVyLmlkLFxuICAgICAgICBuYW1lOiBmaWx0ZXJuYW1lLFxuICAgICAgICBjb3VudDogZmlsdGVyLmNvdW50XG4gICAgICB9O1xuICAgICAgZmlsdGVyaXRlbSA9ICQoaXRlbXRlbXBsYXRlKGl0ZW0pKS5odG1sKCk7XG4gICAgICAkKCcjJyArIGZpbHRlci5pZCkuaHRtbChmaWx0ZXJpdGVtKTtcbiAgICAgIGlmIChzZXR0aW5ncy5zdGF0ZS5maWx0ZXJzW2ZhY2V0bmFtZV0gJiYgXy5pbmRleE9mKHNldHRpbmdzLnN0YXRlLmZpbHRlcnNbZmFjZXRuYW1lXSwgZmlsdGVybmFtZSkgPj0gMCkge1xuICAgICAgICAkKCcjJyArIGZpbHRlci5pZCkuYWRkQ2xhc3MoJ2FjdGl2ZWZhY2V0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCcjJyArIGZpbHRlci5pZCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZWZhY2V0Jyk7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVyLmNvdW50ID09PSAwKSB7XG4gICAgICAgICQoJyMnICsgZmlsdGVyLmlkKS5hZGRDbGFzcygnbm8tbWF0Y2gnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJyMnICsgZmlsdGVyLmlkKS5yZW1vdmVDbGFzcygnbm8tbWF0Y2gnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGNvdW50SHRtbCA9IF8udGVtcGxhdGUoc2V0dGluZ3MuY291bnRUZW1wbGF0ZSwge1xuICAgIGNvdW50OiBzZXR0aW5ncy5jdXJyZW50UmVzdWx0cy5sZW5ndGhcbiAgfSk7XG4gICQoc2V0dGluZ3MuZmFjZXRFbGVtZW50ICsgJyAuZmFjZXR0b3RhbGNvdW50JykucmVwbGFjZVdpdGgoY291bnRIdG1sKTtcbn07XG5cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB0aGUgbGlzdCBvZiByZXN1bHRzIGFjY29yZGluZyB0byB0aGUgZmlsdGVycyB0aGF0IGhhdmUgYmVlbiBzZXRcbiAqL1xuXG51cGRhdGVSZXN1bHRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBub1Jlc3VsdHM7XG4gIG5vUmVzdWx0cyA9ICc8ZGl2IGNsYXNzPXJlc3VsdHM+U29ycnksIGJ1dCBubyBpdGVtcyBtYXRjaCB0aGVzZSBjcml0ZXJpYTwvZGl2Pic7XG4gIHNob3dNb3JlUmVzdWx0cygpO1xufTtcblxuc2hvd01vcmVSZXN1bHRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtSHRtbDtcbiAgdmFyIGksIGl0ZW0sIGl0ZW1IdG1sLCBzaG93TW9yZVRlbXBsYXRlLCBzaG93Tm93Q291bnQ7XG4gIHNob3dOb3dDb3VudCA9IHNldHRpbmdzLmVuYWJsZVBhZ2luYXRpb24gPyBNYXRoLm1pbihzZXR0aW5ncy5jdXJyZW50UmVzdWx0cy5sZW5ndGggLSBzZXR0aW5ncy5zdGF0ZS5zaG93blJlc3VsdHMsIHNldHRpbmdzLnBhZ2luYXRpb25Db3VudCkgOiBzZXR0aW5ncy5jdXJyZW50UmVzdWx0cy5sZW5ndGg7XG4gIGl0ZW1IdG1sID0gJyc7XG4gIGlmIChzZXR0aW5ncy5iZWZvcmVSZXN1bHRSZW5kZXIpIHtcbiAgICBzZXR0aW5ncy5iZWZvcmVSZXN1bHRSZW5kZXIoKTtcbiAgfVxuICBpID0gc2V0dGluZ3Muc3RhdGUuc2hvd25SZXN1bHRzO1xuICB3aGlsZSAoaSA8IHNldHRpbmdzLnN0YXRlLnNob3duUmVzdWx0cyArIHNob3dOb3dDb3VudCkge1xuICAgIGl0ZW0gPSBzZXR0aW5ncy5jdXJyZW50UmVzdWx0c1tpXTtcbiAgICBpZiAoc2V0dGluZ3MucmVzdWx0VGVtcGxhdGVCeXBhc3MpIHtcbiAgICAgIHNldHRpbmdzLnJlc3VsdFRlbXBsYXRlQnlwYXNzKGl0ZW0pO1xuICAgIH1cbiAgICBpKys7XG4gIH1cbiAgcmV0dXJuIHNob3dNb3JlVGVtcGxhdGUgPSAnPGEgaWQ9c2hvd21vcmVidXR0b24+U2hvdyBtb3JlPC9hPic7XG59O1xuXG5qUXVlcnkuZmFjZXRlbGl6ZSA9ICQuZmFjZXRlbGl6ZSA9IGZ1bmN0aW9uKHVzZXJzZXR0aW5ncykge1xuICAkLmV4dGVuZChzZXR0aW5ncywgZGVmYXVsdHMsIHVzZXJzZXR0aW5ncyk7XG4gIHNldHRpbmdzLmN1cnJlbnRSZXN1bHRzID0gW107XG4gIHNldHRpbmdzLmZhY2V0Q29sbGVjdGlvbiA9IHt9O1xuICAkKHNldHRpbmdzLmZhY2V0RWxlbWVudCkuZGF0YSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XG4gIHdpbmRvdy5zdGF0ZSA9IHNldHRpbmdzLnN0YXRlO1xuICBpbml0RmFjZXRDb3VudCgpO1xuICBmaWx0ZXIoKTtcbiAgb3JkZXIoKTtcbiAgdXBkYXRlUmVzdWx0cygpO1xuICBjcmVhdGVGYWNldFVJKCk7XG4gIHJldHVybiBzZXR0aW5ncy5zdGF0ZTtcbn07XG5cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBzZWNvbmQgZnVuY3Rpb24gLyB2YXJpYWJsZSB0aGF0IGdldHMgZXhwb3J0ZWQgaW50byB0aGVcbiAqIGpRdWVyeSBuYW1lc3BhY2UuIFVzZSBpdCB0byB1cGRhdGUgZXZlcnl0aGluZyBpZiB5b3UgbWVzc2VkIHdpdGhcbiAqIHRoZSBzZXR0aW5ncyBvYmplY3RcbiAqL1xuXG5qUXVlcnkuZmFjZXRVcGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgZmlsdGVyKCk7XG4gIG9yZGVyKCk7XG4gIHVwZGF0ZUZhY2V0VUkoKTtcbiAgdXBkYXRlUmVzdWx0cygpO1xufTtcblxualF1ZXJ5LmNsZWFyRmFjZXRzID0gZnVuY3Rpb24oKSB7XG4gIHNldHRpbmdzLnN0YXRlLmZpbHRlcnMgPSB7fTtcbiAgalF1ZXJ5LmZhY2V0VXBkYXRlKCk7XG59O1xuXG5yZXR1cm47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5bGJtZHBibVV1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5bGJtZHBibVV1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdRVUZEUVRzN096czdRVUZCUVN4SlFVRkJPenRCUVU5QkxGRkJRVUVzUjBGRFJUdEZRVUZCTEV0QlFVRXNSVUZCVHp0SlFVRkRPMDFCUVVNc1EwRkJRU3hGUVVGRkxFTkJRVWc3VFVGQlN5eERRVUZCTEVWQlFVVXNRMEZCVUR0TlFVRlRMRU5CUVVFc1JVRkJSU3hEUVVGWU8wdEJRVVFzUlVGQlpUdE5RVUZETEVOQlFVRXNSVUZCUlN4RFFVRklPMDFCUVVzc1EwRkJRU3hGUVVGRkxFTkJRVkE3VFVGQlV5eERRVUZCTEVWQlFVVXNRMEZCV0R0TFFVRm1MRVZCUVRaQ08wMUJRVU1zUTBGQlFTeEZRVUZGTEVOQlFVZzdUVUZCU3l4RFFVRkJMRVZCUVVVc1EwRkJVRHROUVVGVExFTkJRVUVzUlVGQlJTeERRVUZZTzB0QlFUZENMRVZCUVRKRE8wMUJRVU1zUTBGQlFTeEZRVUZGTEVOQlFVZzdUVUZCU3l4RFFVRkJMRVZCUVVVc1EwRkJVRHROUVVGVExFTkJRVUVzUlVGQlJTeERRVUZZTzB0QlFUTkRPMGRCUVZBN1JVRkRRU3hOUVVGQkxFVkJRVkU3U1VGQlF5eEhRVUZCTEVWQlFVc3NVMEZCVGp0SlFVRnBRaXhIUVVGQkxFVkJRVXNzVTBGQmRFSTdTVUZCYVVNc1IwRkJRU3hGUVVGTExGTkJRWFJETzBkQlJGSTdSVUZGUVN4WlFVRkJMRVZCUVdNc1UwRkdaRHRGUVVkQkxHZENRVUZCTEVWQlFXdENMRFJIUVVoc1FqdEZRVWxCTEdGQlFVRXNSVUZCWlN3d1EwRktaanRGUVV0QkxHOUNRVUZCTEVWQlFYTkNMRWxCVEhSQ08wVkJUVUVzWTBGQlFTeEZRVU5GTzBsQlFVRXNSMEZCUVN4RlFVRkxMRTFCUVV3N1NVRkRRU3hIUVVGQkxFVkJRVXNzVFVGRVREdEpRVVZCTEZGQlFVRXNSVUZCVlN4WFFVWldPMGRCVUVZN1JVRlZRU3hMUVVGQkxFVkJRMFU3U1VGQlFTeFBRVUZCTEVWQlFWTXNTMEZCVkR0SlFVTkJMRTlCUVVFc1JVRkJVeXhGUVVSVU8wZEJXRVk3UlVGaFFTeG5Ra0ZCUVN4RlFVRnJRaXhKUVdKc1FqdEZRV05CTEdWQlFVRXNSVUZCYVVJc1JVRmtha0k3T3pzN1FVRm5Ra1k3T3pzN096dEJRVTFCTEZGQlFVRXNSMEZCVnpzN08wRkJSVmc3T3pzN08wRkJTVUU3T3pzN1FVRlBRU3d3UWtGQlFTeEhRVUUyUWl4VFFVRkJPMEZCUXpOQ0xFMUJRVUU3UVVGQlFUdEJRVUZCTzA5QlFVRXNjVU5CUVVFN08ybENRVU5GTEZGQlFWRXNRMEZCUXl4bFFVRm5RaXhEUVVGQkxFdEJRVXNzUTBGQlF5eFRRVUZPTEVOQlFYcENMRWRCUVRSRE8wRkJSRGxET3p0QlFVUXlRanM3UVVGTk4wSXNZVUZCUVN4SFFVRm5RaXhUUVVGQk8wRkJSMlFzVFVGQlFUdEJRVUZCTzBGQlFVRTdUMEZCUVN4eFEwRkJRVHM3U1VGSFJTeEpRVUZCTEVkQlFVOHNTVUZCU1N4RFFVRkRPenM3UVVGSFdqdEJRVUZCTzFkQlFVRXNkME5CUVVFN08xRkJSMFVzU1VGQlJ5eERRVUZETEVOQlFVTXNUMEZCUml4RFFVRlZMRWxCUVVzc1EwRkJRU3hMUVVGTExFTkJRVU1zVTBGQlRpeERRVUZtTEVOQlFVZzdPenRCUVVWRk8wRkJRVUU3YVVKQlFVRXNkME5CUVVFN08yTkJSVVVzU1VGQlJ5eFBRVUZQTEZOQlFWQXNTMEZCYjBJc1VVRkJka0k3T0VKQlEwVXNVVUZCVVN4RFFVRkRMR1ZCUVdkQ0xFTkJRVUVzUzBGQlN5eERRVUZETEZOQlFVNHNRMEZCYVVJc1EwRkJRU3hUUVVGVkxFTkJRVUVzUzBGQlFTeERRVUZXTEVOQlFURkRMRWRCUVRoRUxGRkJRVkVzUTBGQlF5eGxRVUZuUWl4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV2xDTEVOQlFVRXNVMEZCVlN4RFFVRkJMRXRCUVVFc1EwRkJWaXhEUVVFeFF5eEpRVU0xUkR0clFrRkJRU3hMUVVGQkxFVkJRVThzUTBGQlVEdHJRa0ZEUVN4RlFVRkJMRVZCUVVrc1EwRkJReXhEUVVGRExGRkJRVVlzUTBGQlZ5eFJRVUZZTEVOQlJFbzdiVUpCUmtvN1pVRkJRU3hOUVVGQk96aENRVTFGTEZGQlFWRXNRMEZCUXl4bFFVRm5RaXhEUVVGQkxFdEJRVXNzUTBGQlF5eFRRVUZPTEVOQlFXbENMRU5CUVVFc1UwRkJRU3hEUVVFeFF5eEhRVUYxUkN4UlFVRlJMRU5CUVVNc1pVRkJaMElzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxGTkJRVUVzUTBGQk1VTXNTVUZEY2tRN2EwSkJRVUVzUzBGQlFTeEZRVUZQTEVOQlFWQTdhMEpCUTBFc1JVRkJRU3hGUVVGSkxFTkJRVU1zUTBGQlF5eFJRVUZHTEVOQlFWY3NVVUZCV0N4RFFVUktPMjFDUVZCS096dEJRVVpHT3p0blFrRkdSanRUUVVGQkxFMUJaVXNzU1VGQlJ5eFBRVUZQTEVsQlFVc3NRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGYUxFdEJRV2xETEZGQlFXcERMRWxCUVRaRExFTkJRVU1zU1VGQlN5eERRVUZCTEV0QlFVc3NRMEZCUXl4VFFVRk9MRU5CUVdsQ0xFTkJRVUVzUzBGQlFTeERRVUYwUWl4SlFVRm5ReXhKUVVGTExFTkJRVUVzUzBGQlN5eERRVUZETEZOQlFVNHNRMEZCYVVJc1EwRkJRU3hSUVVGQkxFTkJRWFpFTEVOQlFXaEVPMVZCUjBnc1QwRkJRU3hIUVVGaExFbEJRVXNzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxFdEJRVUVzUTBGQmVrSXNSMEZCY1VNc1MwRkJja01zUjBGQlowUTdkMEpCUlRGRUxGRkJRVkVzUTBGQlF5eGxRVUZuUWl4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV2xDTEVOQlFVRXNTVUZCU3l4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV2xDTEVOQlFVRXNUMEZCUVN4RFFVRjBRaXhEUVVFeFF5eEhRVUUwUlN4UlFVRlJMRU5CUVVNc1pVRkJaMElzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxFbEJRVXNzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxFOUJRVUVzUTBGQmRFSXNRMEZCTVVNc1NVRkRNVVU3V1VGQlFTeExRVUZCTEVWQlFVOHNRMEZCVUR0WlFVTkJMRVZCUVVFc1JVRkJTU3hEUVVGRExFTkJRVU1zVVVGQlJpeERRVUZYTEZGQlFWZ3NRMEZFU2p0aFFVNURPMU5CUVVFc1RVRkJRVHRWUVZkSUxFbEJRVWNzU1VGQlN5eERRVUZCTEV0QlFVc3NRMEZCUXl4VFFVRk9MRU5CUVV3c1MwRkJlVUlzVFVGQk5VSTdNRUpCUTBVc1VVRkJVU3hEUVVGRExHVkJRV2RDTEVOQlFVRXNTMEZCU3l4RFFVRkRMRk5CUVU0c1EwRkJhVUlzUTBGQlFTeEpRVUZMTEVOQlFVRXNTMEZCU3l4RFFVRkRMRk5CUVU0c1EwRkJUQ3hEUVVFeFF5eEhRVUZ0UlN4UlFVRlJMRU5CUVVNc1pVRkJaMElzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxFbEJRVXNzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRk1MRU5CUVRGRExFbEJRMnBGTzJOQlFVRXNTMEZCUVN4RlFVRlBMRU5CUVZBN1kwRkRRU3hGUVVGQkxFVkJRVWtzUTBGQlF5eERRVUZETEZGQlFVWXNRMEZCVnl4UlFVRllMRU5CUkVvN1pVRkdTanRYUVVGQkxFMUJRVUU3YTBOQlFVRTdWMEZZUnpzN1FVRnNRbEE3T3p0QlFVNUdPenRCUVVoak96dEJRVFpEYUVJc2JVSkJRVUVzUjBGQmMwSXNVMEZCUVR0QlFVVndRaXhOUVVGQk8wRkJRVUU3UVVGQlFUdFBRVUZCTEdsQ1FVRkJPenRKUVVWRkxFMUJRVUVzUjBGQlV5eERRVUZETEVOQlFVTXNTVUZCUml4RFFVRlBMRkZCUVZFc1EwRkJReXhsUVVGblFpeERRVUZCTEZWQlFVRXNRMEZCYUVNc1EwRkJORU1zUTBGQlF5eEpRVUUzUXl4RFFVRkJPMGxCUlZRc1NVRkJSeXhSUVVGUkxFTkJRVU1zWjBKQlFWUXNTVUZCT0VJc1VVRkJVU3hEUVVGRExHZENRVUZwUWl4RFFVRkJMRlZCUVVFc1EwRkJNMFE3VFVGRFJTeE5RVUZCTEVkQlFWTXNRMEZCUXl4RFFVRkRMRXRCUVVZc1EwRkJVU3hSUVVGUkxFTkJRVU1zWjBKQlFXbENMRU5CUVVFc1ZVRkJRU3hEUVVGc1F5eEZRVUVyUXl4TlFVRXZReXhGUVVSWU96dEpRVWRCTEZkQlFVRXNSMEZCWXp0QlFVVmtMRk5CUVVFc2QwTkJRVUU3TzAxQlEwVXNWMEZCV1N4RFFVRkJMRVZCUVVFc1EwRkJXaXhIUVVGclFpeFJRVUZSTEVOQlFVTXNaVUZCWjBJc1EwRkJRU3hWUVVGQkxFTkJRVmtzUTBGQlFTeEZRVUZCTzBGQlJIcEVPMmxDUVVkQkxGRkJRVkVzUTBGQlF5eGxRVUZuUWl4RFFVRkJMRlZCUVVFc1EwRkJla0lzUjBGQmRVTTdRVUZhZWtNN08wRkJSbTlDT3p0QlFXbENkRUlzWTBGQlFTeEhRVUZwUWl4VFFVRkJPMFZCUjJZc01FSkJRVUVzUTBGQlFUdEZRVWRCTEdGQlFVRXNRMEZCUVR0VFFVZEJMRzFDUVVGQkxFTkJRVUU3UVVGVVpUczdPMEZCVjJwQ096czdPMEZCU1VFc1pVRkJRU3hIUVVGclFpeFRRVUZCTzBGQlEyaENMRTFCUVVFN1FVRkJRVHRCUVVGQk8wOUJRVUVzWjBKQlFVRTdPenM3UVVGRFJUdFhRVUZCTEdsQ1FVRkJPenR6UWtGRFJTeFJRVUZSTEVOQlFVTXNaVUZCWjBJc1EwRkJRU3hUUVVGQkxFTkJRVmNzUTBGQlFTeFJRVUZCTEVOQlFWTXNRMEZCUXl4TFFVRTVReXhIUVVGelJEdEJRVVI0UkRzN08wRkJSRVk3TzBGQlJHZENPenM3UVVGTGJFSTdPenM3T3p0QlFVMUJMR2RDUVVGQkxFZEJRVzFDTEZOQlFVTXNTVUZCUkR0QlFVVnFRaXhOUVVGQk8wVkJRVUVzV1VGQlFTeEhRVUZsTzBWQlIyWXNTVUZCUVN4SFFVRlBMRWxCUVVrc1EwRkJRenRCUVVkYU8wRkJRVUVzVDBGQlFTeFpRVUZCT3p0SlFVbEZMRWxCUVVjc1EwRkJReXhEUVVGRExFOUJRVVlzUTBGQlZTeEpRVUZMTEVOQlFVRXNTMEZCUVN4RFFVRm1MRU5CUVVnN1RVRkZSU3hKUVVGSExFbEJRVXNzUTBGQlFTeExRVUZCTEVOQlFVOHNRMEZCUVN4RFFVRkJMRU5CUVZvc1NVRkJhMElzVDBGQlR5eEpRVUZMTEVOQlFVRXNTMEZCUVN4RFFVRlBMRU5CUVVFc1EwRkJRU3hEUVVGdVFpeExRVUV3UWl4UlFVRXZRenRCUVVORk8wRkJRVUVzWVVGQlFTeHpRMEZCUVRzN1ZVRkZSU3hKUVVGSExFMUJRVTBzUTBGQlF5eE5RVUZRTEVsQlFXdENMRU5CUVVNc1EwRkJReXhQUVVGR0xFTkJRVlVzVFVGQlZpeEZRVUZyUWl4RFFVRkZMRU5CUVVFc1MwRkJRU3hEUVVGd1FpeERRVUZCTEV0QlFTdENMRU5CUVVNc1EwRkJja1E3V1VGRFJTeFpRVUZCTEVkQlFXVXNUVUZFYWtJN08wRkJSa1lzVTBGRVJqdFBRVUZCTEUxQlFVRTdVVUZQUlN4TlFVRkJMRWRCUVZNc1EwRkJReXhEUVVGRExGbEJRVVlzUTBGQlpTeEpRVUZMTEVOQlFVRXNTMEZCUVN4RFFVRndRaXhGUVVFMFFpeE5RVUUxUWp0UlFVTlVMRWxCUVVjc1RVRkJUU3hEUVVGRExFMUJRVkFzUzBGQmFVSXNRMEZCY0VJN1ZVRkRSU3haUVVGQkxFZEJRV1VzVFVGRWFrSTdVMEZTUmp0UFFVWkdPMHRCUVVFc1RVRmhTeXhKUVVGSExFOUJRVThzU1VGQlN5eERRVUZCTEV0QlFVRXNRMEZCV2l4TFFVRjFRaXhSUVVGMlFpeEpRVUZ0UXl4RFFVRkRMRWxCUVVzc1EwRkJRU3hMUVVGQkxFTkJRVThzUTBGQlFTeExRVUZCTEVOQlFWb3NTVUZCYzBJc1NVRkJTeXhEUVVGQkxFdEJRVUVzUTBGQlR5eERRVUZCTEZGQlFVRXNRMEZCYmtNc1EwRkJkRU03VFVGSFNDeFBRVUZCTEVkQlFXRXNTVUZCU3l4RFFVRkJMRXRCUVVFc1EwRkJUeXhEUVVGQkxFdEJRVUVzUTBGQlppeEhRVUV5UWl4TFFVRXpRaXhIUVVGelF6dE5RVVZvUkN4SlFVRkhMRTFCUVUwc1EwRkJReXhOUVVGUUxFbEJRV3RDTEVOQlFVTXNRMEZCUXl4UFFVRkdMRU5CUVZVc1RVRkJWaXhGUVVGclFpeEpRVUZMTEVOQlFVRXNTMEZCUVN4RFFVRlBMRU5CUVVFc1QwRkJRU3hEUVVFNVFpeERRVUZCTEV0QlFUSkRMRU5CUVVNc1EwRkJha1U3VVVGRFJTeFpRVUZCTEVkQlFXVXNUVUZFYWtJN1QwRk1SenRMUVVGQkxFMUJRVUU3VFVGVFNDeEpRVUZITEUxQlFVMHNRMEZCUXl4TlFVRlFMRWxCUVd0Q0xFTkJRVU1zUTBGQlF5eFBRVUZHTEVOQlFWVXNUVUZCVml4RlFVRnJRaXhKUVVGTExFTkJRVUVzUzBGQlFTeERRVUYyUWl4RFFVRkJMRXRCUVd0RExFTkJRVU1zUTBGQmVFUTdVVUZEUlN4WlFVRkJMRWRCUVdVc1RVRkVha0k3VDBGVVJ6czdRVUZxUWxBN1FVRTRRa0VzVTBGQlR6dEJRWFJEVlRzN1FVRXlRMjVDTEZsQlFVRXNSMEZCWlN4VFFVRkJPMU5CUTJJc1VVRkJVU3hEUVVGRExHTkJRVlFzUjBGQk1FSXNRMEZCUXl4RFFVRkRMRTFCUVVZc1EwRkJVeXhSUVVGUkxFTkJRVU1zUzBGQmJFSXNSVUZCZVVJc1owSkJRWHBDTzBGQlJHSTdPMEZCUzJZc2NVSkJRVUVzUjBGQmQwSXNVMEZCUVR0QlFVZDBRaXhOUVVGQk8wRkJRVUU3UVVGQlFUdFBRVUZCTEhGRFFVRkJPenM3TzBGQlNVVTdRVUZCUVR0WFFVRkJMSGREUVVGQk96dFJRVVZGTEVsQlFVRXNSMEZCVHl4SlFVRkpMRU5CUVVNN1VVRkpXaXhKUVVGSExFTkJRVU1zUTBGQlF5eFBRVUZHTEVOQlFWVXNTVUZCU3l4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV1lzUTBGQlNEdDNRa0ZEUlN4RFFVRkRMRU5CUVVNc1NVRkJSaXhEUVVGUExFbEJRVXNzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRmFMRVZCUVRoQ0xGTkJRVU1zVTBGQlJEdFpRVVUxUWl4SlFVRkhMRTlCUVU4c1UwRkJVQ3hMUVVGeFFpeFJRVUY0UWp0eFFrRkRSU3hSUVVGUkxFTkJRVU1zWlVGQlowSXNRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGcFFpeERRVUZCTEZOQlFWVXNRMEZCUVN4TFFVRkJMRU5CUVZZc1EwRkJhVUlzUTBGQlF5eExRVUUxUkN4SlFVRnhSU3hGUVVSMlJUdGhRVUZCTEUxQlFVRTdZMEZKUlN4UlFVRlJMRU5CUVVNc1pVRkJaMElzUTBGQlFTeExRVUZMTEVOQlFVTXNVMEZCVGl4RFFVRnBRaXhEUVVGQkxGTkJRVUVzUTBGQlZTeERRVUZETEV0QlFYSkVMRWxCUVRoRUxFVkJTbWhGT3p0VlFVWTBRaXhEUVVFNVFpeEhRVVJHTzFOQlFVRXNUVUZWU3l4SlFVRkhMRTlCUVU4c1NVRkJTeXhEUVVGQkxFdEJRVXNzUTBGQlF5eFRRVUZPTEVOQlFWb3NTMEZCYVVNc1VVRkJha01zU1VGQk5rTXNRMEZCUXl4SlFVRkxMRU5CUVVFc1MwRkJTeXhEUVVGRExGTkJRVTRzUTBGQmFVSXNRMEZCUVN4TFFVRkJMRU5CUVhSQ0xFbEJRV2RETEVsQlFVc3NRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGcFFpeERRVUZCTEZGQlFVRXNRMEZCZGtRc1EwRkJhRVE3VlVGRlNDeFBRVUZCTEVkQlFXRXNTVUZCU3l4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV2xDTEVOQlFVRXNTMEZCUVN4RFFVRjZRaXhIUVVGeFF5eExRVUZ5UXl4SFFVRm5SRHRWUVVVeFJDeEpRVUZITEVsQlFVc3NRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGcFFpeERRVUZCTEU5QlFVRXNRMEZCZEVJc1MwRkJhME1zVFVGQmNrTTdNRUpCUTBVc1VVRkJVU3hEUVVGRExHVkJRV2RDTEVOQlFVRXNTMEZCU3l4RFFVRkRMRk5CUVU0c1EwRkJhVUlzUTBGQlFTeEpRVUZMTEVOQlFVRXNTMEZCU3l4RFFVRkRMRk5CUVU0c1EwRkJhVUlzUTBGQlFTeFBRVUZCTEVOQlFYUkNMRU5CUVN0Q0xFTkJRVU1zUzBGQk1VVXNTVUZCYlVZc1IwRkVja1k3VjBGQlFTeE5RVUZCTzJ0RFFVRkJPMWRCU2tjN1UwRkJRU3hOUVVGQk8xVkJVVWdzU1VGQlJ5eEpRVUZMTEVOQlFVRXNTMEZCU3l4RFFVRkRMRk5CUVU0c1EwRkJUQ3hMUVVGNVFpeE5RVUUxUWpzd1FrRkRSU3hSUVVGUkxFTkJRVU1zWlVGQlowSXNRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGcFFpeERRVUZCTEVsQlFVc3NRMEZCUVN4TFFVRkxMRU5CUVVNc1UwRkJUaXhEUVVGTUxFTkJRWE5DTEVOQlFVTXNTMEZCYWtVc1NVRkJNRVVzUjBGRU5VVTdWMEZCUVN4TlFVRkJPMnREUVVGQk8xZEJVa2M3TzBGQmFFSlFPenM3UVVGS1JqczdRVUZJYzBJN08wRkJiME40UWl4TlFVRkJMRWRCUVZNc1UwRkJRVHRGUVVkUUxGbEJRVUVzUTBGQlFUdEZRVk5CTEdWQlFVRXNRMEZCUVR0RlFVZEJMSEZDUVVGQkxFTkJRVUU3UlVGSFFTeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRmxCUVdZc1IwRkJPRUk3UVVGc1FuWkNPenM3UVVGeFFsUTdPenM3UVVGSlFTeExRVUZCTEVkQlFWRXNVMEZCUVR0RlFVTk9MRWxCUVVjc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZzUWp0SlFVZEZMRU5CUVVFc1EwRkJSU3huUWtGQlJpeERRVUZ0UWl4RFFVRkRMRmRCUVhCQ0xFTkJRV2RETEdWQlFXaERPMGxCUTBFc1EwRkJRU3hEUVVGRkxGZEJRVUVzUjBGQll5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVM5Q0xFTkJRWFZETEVOQlFVTXNVVUZCZUVNc1EwRkJhVVFzWlVGQmFrUTdWMEZIUVN4UlFVRlJMRU5CUVVNc1kwRkJWQ3hIUVVFd1FpeERRVUZETEVOQlFVTXNUVUZCUml4RFFVRlRMRkZCUVZFc1EwRkJReXhqUVVGc1FpeEZRVUZyUXl4VFFVRkRMRWxCUVVRN1RVRkRNVVFzU1VGQlJ5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1MwRkJNRUlzVVVGQk4wSTdaVUZEUlN4SlFVRkpMRU5CUVVNc1RVRkJUQ3hEUVVGQkxFTkJRVUVzUjBGQlowSXNUVUZFYkVJN1QwRkJRU3hOUVVGQk8yVkJSMFVzU1VGQlN5eERRVUZCTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhGUVVoUU96dEpRVVF3UkN4RFFVRnNReXhGUVZBMVFqczdRVUZFVFRzN08wRkJZMUk3T3pzN096dEJRVTFCTEZsQlFVRXNSMEZCWlN4VFFVRkRMRWRCUVVRc1JVRkJUU3hMUVVGT08wVkJRMklzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRlJMRU5CUVVFc1IwRkJRU3hEUVVGMlFpeEhRVUU0UWl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVkVzUTBGQlFTeEhRVUZCTEVOQlFYWkNMRWxCUVN0Q08wVkJSVGRFTEVsQlFVY3NRMEZCUXl4RFFVRkRMRTlCUVVZc1EwRkJWU3hSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFWRXNRMEZCUVN4SFFVRkJMRU5CUVdwRExFVkJRWFZETEV0QlFYWkRMRU5CUVVFc1MwRkJhVVFzUTBGQlF5eERRVUZ5UkR0SlFVTkZMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlVTeERRVUZCTEVkQlFVRXNRMEZCU1N4RFFVRkRMRWxCUVRWQ0xFTkJRV2xETEV0QlFXcERMRVZCUkVZN1IwRkJRU3hOUVVGQk8wbEJTVVVzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRlJMRU5CUVVFc1IwRkJRU3hEUVVGMlFpeEhRVUU0UWl4RFFVRkRMRU5CUVVNc1QwRkJSaXhEUVVGVkxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVVN4RFFVRkJMRWRCUVVFc1EwRkJha01zUlVGQmRVTXNTMEZCZGtNN1NVRkRPVUlzU1VGQlJ5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVZFc1EwRkJRU3hIUVVGQkxFTkJRVWtzUTBGQlF5eE5RVUUxUWl4TFFVRnpReXhEUVVGNlF6dE5RVU5GTEU5QlFVOHNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGUkxFTkJRVUVzUjBGQlFTeEZRVVJvUXp0TFFVeEdPenRGUVZGQkxFMUJRVUVzUTBGQlFUdEJRVmhoT3pzN1FVRmpaanM3T3pzN1FVRkpRVHM3T3p0QlFVbEJMR0ZCUVVFc1IwRkJaMElzVTBGQlFUdEJRVVZrTEUxQlFVRTdSVUZCUVN4alFVRkJMRWRCUVdsQ08wVkJRMnBDTEd0Q1FVRkJMRWRCUVhGQ08wVkJRM0pDTEd0Q1FVRkJMRWRCUVhGQ08wVkJSM0pDTEZsQlFVRXNSMEZCWlN4RFFVRkRMRU5CUVVNc1VVRkJSaXhEUVVGWExGRkJRVkVzUTBGQlF5eG5Ra0ZCY0VJN1JVRkRaaXhoUVVGQkxFZEJRV2RDTEVOQlFVTXNRMEZCUXl4UlFVRkdMRU5CUVZjc2EwSkJRVmc3UlVGRGFFSXNhVUpCUVVFc1IwRkJiMElzUTBGQlF5eERRVUZETEZGQlFVWXNRMEZCVnl4alFVRllPMFZCUTNCQ0xFTkJRVUVzUTBGQlJTeFJRVUZSTEVOQlFVTXNXVUZCV0N4RFFVRjNRaXhEUVVGRExFbEJRWHBDTEVOQlFUaENMRVZCUVRsQ08wRkJTMEU3UVVGQlFTeFBRVUZCTEhGRFFVRkJPenRKUVVORkxGTkJRVUVzUjBGQldTeERRVUZCTEVOQlFVVXNhVUpCUVVFc1EwRkJhMEk3VFVGQlFTeEZRVUZCTEVWQlFVa3NTMEZCU3l4RFFVRkRMRk5CUVZZN1MwRkJiRUlzUTBGQlJqdEpRVWRhTEZOQlFVRXNSMEZEUlR0TlFVRkJMRXRCUVVFc1JVRkJWU3hMUVVGTExFTkJRVU1zUzBGQmFFSTdUVUZEUVN4UFFVRkJMRVZCUVZVc1MwRkJTeXhEUVVGRExFOUJSR2hDTzAxQlJVRXNUVUZCUVN4RlFVRlZMRXRCUVVzc1EwRkJReXhOUVVab1FqdE5RVWRCTEVkQlFVRXNSVUZCVlN4TFFVRkxMRU5CUVVNc1IwRklhRUk3TzBsQlVVWXNUMEZCVHl4RFFVRkRMRWRCUVZJc1EwRkJXU3hUUVVGYU8wbEJSVUVzWVVGQlFTeEhRVUZuUWl4RFFVRkJMRU5CUVVVc1lVRkJRU3hEUVVGakxGTkJRV1FzUTBGQlJqdEpRVU5vUWl4VFFVRlRMRU5CUVVNc1RVRkJWaXhEUVVGcFFpeGhRVUZxUWp0SlFVTkJMRk5CUVVFc1IwRkJXU3hEUVVGQkxFTkJRVVVzYTBKQlFVWTdTVUZKV2l4RFFVRkRMRU5CUVVNc1NVRkJSaXhEUVVGUExGRkJRVkVzUTBGQlF5eGxRVUZuUWl4RFFVRkJMRXRCUVVzc1EwRkJReXhUUVVGT0xFTkJRV2hETEVWQlFXdEVMRk5CUVVNc1RVRkJSQ3hGUVVGVExGVkJRVlE3UVVGSmFFUXNWVUZCUVR0TlFVRkJMRk5CUVVFc1IwRkJZeXhWUVVGVkxFTkJRVU1zU1VGQldDeERRVUZCTEVOQlFXbENMRU5CUVVNc1MwRkJiRUlzUTBGQmQwSXNSMEZCZUVJN1RVRkRaQ3hWUVVGQkxFZEJRV01zVTBGQlV5eERRVUZETEVkQlFWWXNRMEZCUVR0TlFVTmtMR1ZCUVVFc1lVRkJaU3hUUVVGVExFTkJRVU1zUjBGQlZpeERRVUZCTzAxQlJXWXNTVUZCUVN4SFFVTkZPMUZCUVVFc1JVRkJRU3hGUVVGSkxFMUJRVTBzUTBGQlF5eEZRVUZZTzFGQlEwRXNTVUZCUVN4RlFVRk5MRlZCUkU0N1VVRkZRU3hMUVVGQkxFVkJRVThzVFVGQlRTeERRVUZETEV0QlJtUTdPMDFCVTBZc1ZVRkJRU3hIUVVGaExFTkJRVUVzUTBGQlJTeFpRVUZCTEVOQlFXRXNTVUZCWWl4RFFVRkdPMDFCUTJJc1NVRkJSeXhEUVVGRExFTkJRVU1zVDBGQlJpeERRVUZWTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJVU3hEUVVGQkxFdEJRVXNzUTBGQlF5eFRRVUZPTEVOQlFXcERMRVZCUVcxRUxGVkJRVzVFTEVOQlFVRXNTVUZCYTBVc1EwRkJja1U3VVVGRFJTeFZRVUZWTEVOQlFVTXNVVUZCV0N4RFFVRnZRaXhoUVVGd1FpeEZRVVJHT3p0TlFVZEJMRWxCUVVjc1NVRkJTU3hEUVVGRExFdEJRVXdzUzBGQll5eERRVUZxUWp0UlFVTkZMRlZCUVZVc1EwRkJReXhSUVVGWUxFTkJRVzlDTEZWQlFYQkNMRVZCUkVZN08wMUJTVUVzVTBGQlV5eERRVUZETEUxQlFWWXNRMEZCYVVJc1ZVRkJha0k3U1VFeFFtZEVMRU5CUVd4RU8wbEJPRUpCTEZOQlFWTXNRMEZCUXl4TlFVRldMRU5CUVdsQ0xGTkJRV3BDTzBsQlEwRXNRMEZCUVN4RFFVRkZMRkZCUVZFc1EwRkJReXhaUVVGWUxFTkJRWGRDTEVOQlFVTXNUVUZCZWtJc1EwRkJaME1zVTBGQmFFTTdTVUZIUVN4RFFVRkJMRU5CUVVVc2RVSkJRVVlzUTBGQk1FSXNRMEZCUXl4UFFVRXpRaXhEUVVGQk8wRkJka1JHTzBWQk5rUkJMRU5CUVVFc1EwRkJSU3haUVVGR0xFTkJRV1VzUTBGQlF5eExRVUZvUWl4RFFVRnpRaXhUUVVGRExFdEJRVVE3U1VGRGNFSTdTVUZEUVN4TlFVRkJMRWRCUVZNc1lVRkJRU3hEUVVGakxFbEJRVU1zUTBGQlFTeEZRVUZtTzBsQlExUXNXVUZCUVN4RFFVRmhMRTFCUVUwc1EwRkJReXhUUVVGd1FpeEZRVUVyUWl4TlFVRk5MRU5CUVVNc1ZVRkJkRU03U1VGRlFTeExRVUZCTEVOQlFVRTdTVUZEUVN4aFFVRkJMRU5CUVVFN1NVRkRRU3hoUVVGQkxFTkJRVUU3UlVGUWIwSXNRMEZCZEVJN1JVRmxRU3hsUVVGQkxFZEJRV3RDTzBWQlEyeENMRTFCUVVFc1IwRkJVeXhEUVVGQkxFTkJRVVVzWlVGQlJqdEZRVU5VTEZOQlFVRXNSMEZCV1N4RFFVRkRMRU5CUVVNc1VVRkJSaXhEUVVGWExGRkJRVkVzUTBGQlF5eGhRVUZ3UWl4RlFVRnRRenRKUVVGQkxFdEJRVUVzUlVGQlR5eFJRVUZSTEVOQlFVTXNZMEZCWXl4RFFVRkRMRTFCUVhoQ0xFbEJRV3RETEVOQlFYcERPMGRCUVc1RE8wVkJRMW9zUTBGQlFTeERRVUZGTEUxQlFVWXNRMEZCVXl4RFFVRkRMRTFCUVZZc1EwRkJhVUlzVTBGQmFrSTdSVUZMUVN4bFFVRkJMRWRCUVd0Q0xHbElRVUZCTEVkQlFXOUlMRGhEUVVGd1NDeEhRVUZ4U3p0RlFVVjJUQ3hoUVVGQkxFZEJRV2RDTEVOQlFVTXNRMEZCUXl4UlFVRkdMRU5CUVZjc1pVRkJXRHRGUVVOb1FpeFJRVUZCTEVkQlFWY3NRMEZCUVN4RFFVRkZMR0ZCUVVFc1EwRkJZenRKUVVGQkxGTkJRVUVzUlVGQlZ5eFJRVUZSTEVOQlFVTXNZMEZCY0VJN1IwRkJaQ3hEUVVGR08wVkJRMWdzUTBGQlFTeERRVUZGTEUxQlFVWXNRMEZCVXl4RFFVRkRMRTFCUVZZc1EwRkJhVUlzVVVGQmFrSTdSVUZEUVN4RFFVRkJMRU5CUVVVc1VVRkJVU3hEUVVGRExGbEJRVmdzUTBGQmQwSXNRMEZCUXl4TlFVRjZRaXhEUVVGblF5eE5RVUZvUXp0RlFVTkJMRU5CUVVFc1EwRkJSU3hqUVVGR0xFTkJRV2xDTEVOQlFVTXNTVUZCYkVJc1EwRkJkVUlzVTBGQlFUdEJRVU55UWl4UlFVRkJPMGxCUVVFc1JVRkJRU3hIUVVGTExFbEJRVU1zUTBGQlFTeEZRVUZGTEVOQlFVTXNUVUZCU2l4RFFVRlhMRU5CUVZnN1NVRkRUQ3hKUVVGSExGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4TFFVRXdRaXhGUVVFM1FqdE5RVU5GTEVOQlFVRXNRMEZCUlN4SlFVRkdMRU5CUVU4c1EwRkJReXhSUVVGU0xFTkJRV2xDTEdWQlFXcENMRVZCUkVZN08wVkJSbkZDTEVOQlFYWkNPMFZCVTBFc1EwRkJRU3hEUVVGRkxHTkJRVVlzUTBGQmFVSXNRMEZCUXl4TFFVRnNRaXhEUVVGM1FpeFRRVUZETEV0QlFVUTdRVUZEZEVJc1VVRkJRVHRKUVVGQkxFVkJRVUVzUjBGQlN5eEpRVUZETEVOQlFVRXNSVUZCUlN4RFFVRkRMRTFCUVVvc1EwRkJWeXhEUVVGWU8wbEJRMHdzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRWRCUVhsQ08wbEJSWHBDTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1dVRkJaaXhIUVVFNFFqdEpRVU01UWl4TFFVRkJMRU5CUVVFN1NVRkRRU3hoUVVGQkxFTkJRVUU3UlVGT2MwSXNRMEZCZUVJN1JVRlpRU3huUWtGQlFTeEhRVUZ0UWp0RlFVTnVRaXhSUVVGQkxFZEJRVmNzUTBGQlFTeERRVUZGTEdkQ1FVRkdMRU5CUVcxQ0xFTkJRVU1zUzBGQmNFSXNRMEZCTUVJc1UwRkJReXhMUVVGRU8wbEJRMjVETEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhIUVVGNVFqdEpRVU42UWl4TlFVRk5MRU5CUVVNc1YwRkJVQ3hEUVVGQk8wVkJSbTFETEVOQlFURkNPMFZCVVZnc1EwRkJRU3hEUVVGRkxFMUJRVVlzUTBGQlV5eERRVUZETEUxQlFWWXNRMEZCYVVJc1VVRkJha0k3UVVGMlNXTTdPenRCUVRKSmFFSTdPenM3UVVGSlFTeGhRVUZCTEVkQlFXZENMRk5CUVVNc1JVRkJSRHRCUVVOa0xFMUJRVUU3UlVGQlFTeE5RVUZCTEVkQlFWTTdSVUZEVkN4RFFVRkRMRU5CUVVNc1NVRkJSaXhEUVVGUExGRkJRVkVzUTBGQlF5eGxRVUZvUWl4RlFVRnBReXhUUVVGRExFdEJRVVFzUlVGQlVTeFRRVUZTTzBsQlF5OUNMRU5CUVVNc1EwRkJReXhKUVVGR0xFTkJRVThzUzBGQlVDeEZRVUZqTEZOQlFVTXNUVUZCUkN4RlFVRlRMRlZCUVZRN1RVRkRXaXhKUVVGSExFMUJRVTBzUTBGQlF5eEZRVUZRTEV0QlFXRXNSVUZCYUVJN1VVRkRSU3hOUVVGQkxFZEJRMFU3VlVGQlFTeFhRVUZCTEVWQlFXTXNVMEZCWkR0VlFVTkJMRmxCUVVFc1JVRkJZeXhWUVVSa08xVkJSa283TzBsQlJGa3NRMEZCWkR0RlFVUXJRaXhEUVVGcVF6dFRRVkZCTzBGQlZtTTdPenRCUVZsb1FqczdPenM3UVVGTlFTeGhRVUZCTEVkQlFXZENMRk5CUVVFN1FVRkhaQ3hOUVVGQk8wVkJRVUVzV1VGQlFTeEhRVUZsTEVOQlFVTXNRMEZCUXl4UlFVRkdMRU5CUVZjc1VVRkJVU3hEUVVGRExHZENRVUZ3UWp0RlFVbG1MRU5CUVVNc1EwRkJReXhKUVVGR0xFTkJRVThzVVVGQlVTeERRVUZETEdWQlFXaENMRVZCUVdsRExGTkJRVU1zUzBGQlJDeEZRVUZSTEZOQlFWSTdTVUZETDBJc1EwRkJReXhEUVVGRExFbEJRVVlzUTBGQlR5eExRVUZRTEVWQlFXTXNVMEZCUXl4TlFVRkVMRVZCUVZNc1ZVRkJWRHRCUVV0YUxGVkJRVUU3VFVGQlFTeFRRVUZCTEVkQlFXTXNWVUZCVlN4RFFVRkRMRWxCUVZnc1EwRkJRU3hEUVVGcFFpeERRVUZETEV0QlFXeENMRU5CUVhkQ0xFZEJRWGhDTzAxQlEyUXNWVUZCUVN4SFFVRmpMRk5CUVZNc1EwRkJReXhIUVVGV0xFTkJRVUU3VFVGRFpDeGxRVUZCTEdGQlFXVXNVMEZCVXl4RFFVRkRMRWRCUVZZc1EwRkJRVHROUVVsbUxFbEJRVUVzUjBGRFJUdFJRVUZCTEVWQlFVRXNSVUZCU1N4TlFVRk5MRU5CUVVNc1JVRkJXRHRSUVVOQkxFbEJRVUVzUlVGQlRTeFZRVVJPTzFGQlJVRXNTMEZCUVN4RlFVRlBMRTFCUVUwc1EwRkJReXhMUVVaa096dE5RVTFHTEZWQlFVRXNSMEZCWVN4RFFVRkJMRU5CUVVVc1dVRkJRU3hEUVVGaExFbEJRV0lzUTBGQlJpeERRVUZ4UWl4RFFVRkRMRWxCUVhSQ0xFTkJRVUU3VFVGRFlpeERRVUZCTEVOQlFVVXNSMEZCUVN4SFFVRk5MRTFCUVUwc1EwRkJReXhGUVVGbUxFTkJRV3RDTEVOQlFVTXNTVUZCYmtJc1EwRkJkMElzVlVGQmVFSTdUVUZKUVN4SlFVRkhMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlVTeERRVUZCTEZOQlFVRXNRMEZCZGtJc1NVRkJjME1zUTBGQlF5eERRVUZETEU5QlFVWXNRMEZCVlN4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVkVzUTBGQlFTeFRRVUZCTEVOQlFXcERMRVZCUVRaRExGVkJRVGRETEVOQlFVRXNTVUZCTkVRc1EwRkJja2M3VVVGRFJTeERRVUZCTEVOQlFVVXNSMEZCUVN4SFFVRk5MRTFCUVUwc1EwRkJReXhGUVVGbUxFTkJRV3RDTEVOQlFVTXNVVUZCYmtJc1EwRkJORUlzWVVGQk5VSXNSVUZFUmp0UFFVRkJMRTFCUVVFN1VVRkhSU3hEUVVGQkxFTkJRVVVzUjBGQlFTeEhRVUZOTEUxQlFVMHNRMEZCUXl4RlFVRm1MRU5CUVd0Q0xFTkJRVU1zVjBGQmJrSXNRMEZCSzBJc1lVRkJMMElzUlVGSVJqczdUVUZQUVN4SlFVRkhMRTFCUVUwc1EwRkJReXhMUVVGUUxFdEJRV2RDTEVOQlFXNUNPMUZCUTBVc1EwRkJRU3hEUVVGRkxFZEJRVUVzUjBGQlRTeE5RVUZOTEVOQlFVTXNSVUZCWml4RFFVRnJRaXhEUVVGRExGRkJRVzVDTEVOQlFUUkNMRlZCUVRWQ0xFVkJSRVk3VDBGQlFTeE5RVUZCTzFGQlIwVXNRMEZCUVN4RFFVRkZMRWRCUVVFc1IwRkJUU3hOUVVGTkxFTkJRVU1zUlVGQlppeERRVUZyUWl4RFFVRkRMRmRCUVc1Q0xFTkJRU3RDTEZWQlFTOUNMRVZCU0VZN08wbEJPVUpaTEVOQlFXUTdSVUZFSzBJc1EwRkJha003UlVGNVEwRXNVMEZCUVN4SFFVRlpMRU5CUVVNc1EwRkJReXhSUVVGR0xFTkJRVmNzVVVGQlVTeERRVUZETEdGQlFYQkNMRVZCUVcxRE8wbEJRVUVzUzBGQlFTeEZRVUZQTEZGQlFWRXNRMEZCUXl4alFVRmpMRU5CUVVNc1RVRkJMMEk3UjBGQmJrTTdSVUZEV2l4RFFVRkJMRU5CUVVVc1VVRkJVU3hEUVVGRExGbEJRVlFzUjBGQmQwSXNiVUpCUVRGQ0xFTkJRVGhETEVOQlFVTXNWMEZCTDBNc1EwRkJNa1FzVTBGQk0wUTdRVUZxUkdNN096dEJRVzlFYUVJN096czdRVUZMUVN4aFFVRkJMRWRCUVdkQ0xGTkJRVUU3UVVGRFpDeE5RVUZCTzBWQlFVRXNVMEZCUVN4SFFVRlpPMFZCUlZvc1pVRkJRU3hEUVVGQk8wRkJTR003TzBGQlRXaENMR1ZCUVVFc1IwRkJhMElzVTBGQlFUdEZRVU5vUWp0QlFVRkJMRTFCUVVFN1JVRkhRU3haUVVGQkxFZEJRV3RDTEZGQlFWRXNRMEZCUXl4blFrRkJXaXhIUVVGclF5eEpRVUZKTEVOQlFVTXNSMEZCVEN4RFFVRlRMRkZCUVZFc1EwRkJReXhqUVVGakxFTkJRVU1zVFVGQmVFSXNSMEZCYTBNc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFpRVUV4UkN4RlFVRjVSU3hSUVVGUkxFTkJRVU1zWlVGQmJFWXNRMEZCYkVNc1IwRkJNRWtzVVVGQlVTeERRVUZETEdOQlFXTXNRMEZCUXp0RlFVTnFUQ3hSUVVGQkxFZEJRVmM3UlVGSFdDeEpRVUZITEZGQlFWRXNRMEZCUXl4clFrRkJXanRKUVVORkxGRkJRVkVzUTBGQlF5eHJRa0ZCVkN4RFFVRkJMRVZCUkVZN08wVkJTVUVzUTBGQlFTeEhRVUZKTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkRia0lzVTBGQlRTeERRVUZCTEVkQlFVa3NVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhaUVVGbUxFZEJRVGhDTEZsQlFYaERPMGxCUlVVc1NVRkJRU3hIUVVGUExGRkJRVkVzUTBGQlF5eGpRVUZsTEVOQlFVRXNRMEZCUVR0SlFVOHZRaXhKUVVGSExGRkJRVkVzUTBGQlF5eHZRa0ZCV2p0TlFVTkZMRkZCUVZFc1EwRkJReXh2UWtGQlZDeERRVUU0UWl4SlFVRTVRaXhGUVVSR096dEpRVVZCTEVOQlFVRTdSVUZZUmp0VFFXbENRU3huUWtGQlFTeEhRVUZ0UWp0QlFUbENTRHM3UVVFclEyeENMRTFCUVUwc1EwRkJReXhWUVVGUUxFZEJRMEVzUTBGQlF5eERRVUZETEZWQlFVWXNSMEZCWlN4VFFVRkRMRmxCUVVRN1JVRkhZaXhEUVVGRExFTkJRVU1zVFVGQlJpeERRVUZUTEZGQlFWUXNSVUZCYlVJc1VVRkJia0lzUlVGQk5rSXNXVUZCTjBJN1JVRkhRU3hSUVVGUkxFTkJRVU1zWTBGQlZDeEhRVUV3UWp0RlFVY3hRaXhSUVVGUkxFTkJRVU1zWlVGQlZDeEhRVUV5UWp0RlFVY3pRaXhEUVVGQkxFTkJRVVVzVVVGQlVTeERRVUZETEZsQlFWZ3NRMEZCZDBJc1EwRkJReXhKUVVGNlFpeERRVUU0UWl4VlFVRTVRaXhGUVVFd1F5eFJRVUV4UXp0RlFVZEJMRTFCUVUwc1EwRkJReXhMUVVGUUxFZEJRV1VzVVVGQlVTeERRVUZETzBWQlIzaENMR05CUVVFc1EwRkJRVHRGUVVOQkxFMUJRVUVzUTBGQlFUdEZRVU5CTEV0QlFVRXNRMEZCUVR0RlFVTkJMR0ZCUVVFc1EwRkJRVHRGUVVOQkxHRkJRVUVzUTBGQlFUdFRRVU5CTEZGQlFWRXNRMEZCUXp0QlFYWkNTVHM3TzBGQmVVSm1PenM3T3pzN1FVRk5RU3hOUVVGTkxFTkJRVU1zVjBGQlVDeEhRVUZ4UWl4VFFVRkJPMFZCUTI1Q0xFMUJRVUVzUTBGQlFUdEZRVU5CTEV0QlFVRXNRMEZCUVR0RlFVTkJMR0ZCUVVFc1EwRkJRVHRGUVVOQkxHRkJRVUVzUTBGQlFUdEJRVXB0UWpzN1FVRlRja0lzVFVGQlRTeERRVUZETEZkQlFWQXNSMEZCY1VJc1UwRkJRVHRGUVVOdVFpeFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVdZc1IwRkJlVUk3UlVGRGVrSXNUVUZCVFN4RFFVRkRMRmRCUVZBc1EwRkJRVHRCUVVadFFqczdRVUZQY2tJaWZRPT1cbiIsInZhciBKc29uTERHcmFwaFZpZXcsIGpzb25WaXMsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuanNvblZpcyA9IHJlcXVpcmUoJ2pzb25sZC12aXMnKTtcblxuanNvblZpc1tcImRlZmF1bHRcIl0oZDMpO1xuXG5Kc29uTERHcmFwaFZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoSnNvbkxER3JhcGhWaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBKc29uTERHcmFwaFZpZXcoKSB7XG4gICAgdGhpcy5pbml0SnNvbkNoYXJ0ID0gYmluZCh0aGlzLmluaXRKc29uQ2hhcnQsIHRoaXMpO1xuICAgIHJldHVybiBKc29uTERHcmFwaFZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBKc29uTERHcmFwaFZpZXcucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZ3JhcGgnKTtcblxuICBKc29uTERHcmFwaFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjYXJkIGNhcmQtYm9keSc7XG5cbiAgSnNvbkxER3JhcGhWaWV3LnByb3RvdHlwZS5ncmFwaE9wdGlvbnMgPSB7XG4gICAgdzogODAwLFxuICAgIGg6IDMwMCxcbiAgICBtYXhMYWJlbFdpZHRoOiAyNTAsXG4gICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAyNTAsXG4gICAgdHJhbnNpdGlvbkVhc2U6ICdjdWJpYy1pbi1vdXQnLFxuICAgIG1pblJhZGl1czogNSxcbiAgICBzY2FsaW5nRmFjdG9yOiAxLjVcbiAgfTtcblxuICBKc29uTERHcmFwaFZpZXcucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQodGhpcy5pbml0SnNvbkNoYXJ0LCAxMDApO1xuICB9O1xuXG4gIEpzb25MREdyYXBoVmlldy5wcm90b3R5cGUuaW5pdEpzb25DaGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlYWNoLCBpLCBqc29uLCBsZW4sIHJlc3VsdHM7XG4gICAganNvbiA9IHRoaXMub3B0aW9ucy5qc29uO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSBqc29uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVhY2ggPSBqc29uW2ldO1xuICAgICAgICByZXN1bHRzLnB1c2goZDMuanNvbmxkVmlzKGVhY2gsICdbZGF0YS1kaXNwbGF5PWdyYXBoXScsIHRoaXMuZ3JhcGhPcHRpb25zKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGQzLmpzb25sZFZpcyh0aGlzLm9wdGlvbnMuanNvbiwgJ1tkYXRhLWRpc3BsYXk9Z3JhcGhdJywgdGhpcy5ncmFwaE9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gSnNvbkxER3JhcGhWaWV3O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBKc29uTERHcmFwaFZpZXc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5bmNtRndhQzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdmMyVmhjbU5vTDJaaFkyVjBjMlZoY21Ob0wzWnBaWGR6TDJkeVlYQm9MbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkxRU3hKUVVGQkxIZENRVUZCTzBWQlFVRTdPenM3UVVGQlFTeFBRVUZCTEVkQlFWVXNUMEZCUVN4RFFVRlJMRmxCUVZJN08wRkJRMVlzVDBGQlR5eEZRVUZETEU5QlFVUXNSVUZCVUN4RFFVRm5RaXhGUVVGb1FqczdRVUZKVFRzN096czdPenM3TkVKQlEwb3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3h0UWtGQlVqczdORUpCUTFZc1UwRkJRU3hIUVVGWE96czBRa0ZGV0N4WlFVRkJMRWRCUTBVN1NVRkJRU3hEUVVGQkxFVkJRVzlDTEVkQlFYQkNPMGxCUTBFc1EwRkJRU3hGUVVGdlFpeEhRVVJ3UWp0SlFVVkJMR0ZCUVVFc1JVRkJiMElzUjBGR2NFSTdTVUZIUVN4clFrRkJRU3hGUVVGdlFpeEhRVWh3UWp0SlFVbEJMR05CUVVFc1JVRkJiMElzWTBGS2NFSTdTVUZMUVN4VFFVRkJMRVZCUVc5Q0xFTkJUSEJDTzBsQlRVRXNZVUZCUVN4RlFVRnZRaXhIUVU1d1FqczdPelJDUVZGR0xGRkJRVUVzUjBGQlZTeFRRVUZCTzFkQlExSXNWVUZCUVN4RFFVRlhMRWxCUVVNc1EwRkJRU3hoUVVGYUxFVkJRVEpDTEVkQlFUTkNPMFZCUkZFN096UkNRVWxXTEdGQlFVRXNSMEZCWlN4VFFVRkJPMEZCU1dJc1VVRkJRVHRKUVVGQkxFbEJRVUVzUjBGQlR5eEpRVUZETEVOQlFVRXNUMEZCVHl4RFFVRkRPMGxCUldoQ0xFbEJRVWNzUzBGQlN5eERRVUZETEU5QlFVNHNRMEZCWXl4SlFVRmtMRU5CUVVnN1FVRkRSVHRYUVVGQkxITkRRVUZCT3p0eFFrRkRSU3hGUVVGRkxFTkJRVU1zVTBGQlNDeERRVUZoTEVsQlFXSXNSVUZCYlVJc2MwSkJRVzVDTEVWQlFUSkRMRWxCUVVNc1EwRkJRU3haUVVFMVF6dEJRVVJHTzNGQ1FVUkdPMHRCUVVFc1RVRkJRVHRoUVV0RkxFVkJRVVVzUTBGQlF5eFRRVUZJTEVOQlFXRXNTVUZCUXl4RFFVRkJMRTlCUVU4c1EwRkJReXhKUVVGMFFpeEZRVUUwUWl4elFrRkJOVUlzUlVGQmIwUXNTVUZCUXl4RFFVRkJMRmxCUVhKRUxFVkJURVk3TzBWQlRtRTdPenM3UjBGcVFtRXNSVUZCUlN4RFFVRkRPenRCUVdkRGFrTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEZhY2V0U2VhcmNoSGVhZGVyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmFjZXRTZWFyY2hIZWFkZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRmFjZXRTZWFyY2hIZWFkZXIsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEZhY2V0U2VhcmNoSGVhZGVyKCkge1xuICAgIHJldHVybiBGYWNldFNlYXJjaEhlYWRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZhY2V0U2VhcmNoSGVhZGVyLnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2hlYWRlcicpO1xuXG4gIEZhY2V0U2VhcmNoSGVhZGVyLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnY2FyZCBjYXJkLWJvZHknO1xuXG4gIEZhY2V0U2VhcmNoSGVhZGVyLnByb3RvdHlwZS51aSA9IHtcbiAgICBjbGVhcjogJ1tkYXRhLWNsaWNrPWNsZWFyXScsXG4gICAgbGlzdDogJ1tkYXRhLWNsaWNrPWxpc3RdJyxcbiAgICB2aWV3ZXI6ICdbZGF0YS1jbGljaz12aWV3ZXJdJ1xuICB9O1xuXG4gIEZhY2V0U2VhcmNoSGVhZGVyLnByb3RvdHlwZS50cmlnZ2VycyA9IHtcbiAgICAnY2xpY2sgQHVpLmNsZWFyJzogJ2NsZWFyJyxcbiAgICAnY2xpY2sgQHVpLmxpc3QnOiAnbGlzdCcsXG4gICAgJ2NsaWNrIEB1aS52aWV3ZXInOiAndmlld2VyJ1xuICB9O1xuXG4gIHJldHVybiBGYWNldFNlYXJjaEhlYWRlcjtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmFjZXRTZWFyY2hIZWFkZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5b1pXRmtaWEl1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5b1pXRmtaWEl1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVU5CTEVsQlFVRXNhVUpCUVVFN1JVRkJRVHM3TzBGQlFVMDdPenM3T3pzN09FSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4dlFrRkJVanM3T0VKQlExWXNVMEZCUVN4SFFVRlhPenM0UWtGRldDeEZRVUZCTEVkQlEwVTdTVUZCUVN4TFFVRkJMRVZCUVZFc2IwSkJRVkk3U1VGRFFTeEpRVUZCTEVWQlFWRXNiVUpCUkZJN1NVRkZRU3hOUVVGQkxFVkJRVkVzY1VKQlJsSTdPenM0UWtGSlJpeFJRVUZCTEVkQlEwVTdTVUZCUVN4cFFrRkJRU3hGUVVGdlFpeFBRVUZ3UWp0SlFVTkJMR2RDUVVGQkxFVkJRVzlDTEUxQlJIQkNPMGxCUlVFc2EwSkJRVUVzUlVGQmIwSXNVVUZHY0VJN096czdPMGRCVmpSQ0xFVkJRVVVzUTBGQlF6czdRVUZuUW01RExFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgUmVzdWx0RGV0YWlsVmlldywgU1RMVmlld2VyLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblNUTFZpZXdlciA9IHJlcXVpcmUoJy4vc3RsVmlld2VyJyk7XG5cblJlc3VsdERldGFpbFZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoUmVzdWx0RGV0YWlsVmlldywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUmVzdWx0RGV0YWlsVmlldygpIHtcbiAgICB0aGlzLm9uSW1hZ2VPdXQgPSBiaW5kKHRoaXMub25JbWFnZU91dCwgdGhpcyk7XG4gICAgdGhpcy5vbkltYWdlSW4gPSBiaW5kKHRoaXMub25JbWFnZUluLCB0aGlzKTtcbiAgICByZXR1cm4gUmVzdWx0RGV0YWlsVmlldy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFJlc3VsdERldGFpbFZpZXcucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZGV0YWlsJyk7XG5cbiAgUmVzdWx0RGV0YWlsVmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5IHJkZi12aWV3ZXItZGV0YWlsJztcblxuICBSZXN1bHREZXRhaWxWaWV3LnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrIFtkYXRhLWNsaWNrPWNsb3NlXSc6ICdjbG9zZVZpZXcnLFxuICAgICdtb3VzZW92ZXIgaW1nJzogJ29uSW1hZ2VJbicsXG4gICAgJ21vdXNlb3V0IGltZyc6ICdvbkltYWdlT3V0J1xuICB9O1xuXG4gIFJlc3VsdERldGFpbFZpZXcucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgdmlld2VyUmVnaW9uOiAnW2RhdGEtcmVnaW9uPXZpZXdlcl0nXG4gIH07XG5cbiAgUmVzdWx0RGV0YWlsVmlldy5wcm90b3R5cGUub25JbWFnZUluID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMudHJpZ2dlcignc2hvdzp1bmRlcmxheScpO1xuICAgIGlmICh0aGlzLmRyaWZ0KSB7XG4gICAgICByZXR1cm4gdGhpcy5kcmlmdC5lbmFibGUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZHJpZnQgPSBuZXcgRHJpZnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW1nJyksIHtcbiAgICAgIGNvbnRhaW5JbmxpbmU6IHRydWUsXG4gICAgICBpbmxpbmVQYW5lOiAyMDAsXG4gICAgICBwYW5lQ29udGFpbmVyOiAkKCcuZHJpZnQtY29udGVudCcpWzBdLFxuICAgICAgem9vbUZhY3RvcjogNSxcbiAgICAgIGhvdmVyQm91bmRpbmdCb3g6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICBSZXN1bHREZXRhaWxWaWV3LnByb3RvdHlwZS5vbkltYWdlT3V0ID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMudHJpZ2dlcignaGlkZTp1bmRlcmxheScpO1xuICAgIHJldHVybiB0aGlzLmRyaWZ0LmRpc2FibGUoKTtcbiAgfTtcblxuICBSZXN1bHREZXRhaWxWaWV3LnByb3RvdHlwZS5jbG9zZVZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcuZHJpZnQtY29udGVudCcpLmh0bWwoJycpO1xuICAgIHRoaXMudHJpZ2dlcignaGlkZTp1bmRlcmxheScpO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIoJ2hpZGUnKTtcbiAgfTtcblxuICBSZXN1bHREZXRhaWxWaWV3LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm1vZGVsLmdldCgndmlld3MnKS5kaWNvbSkge1xuICAgICAgcmV0dXJuIHRoaXMubG9hZERpY29tKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGVsLmdldCgndmlld3MnKS5zdGwpIHtcbiAgICAgIHJldHVybiB0aGlzLnZpZXdlclJlZ2lvbi5zaG93KG5ldyBTVExWaWV3ZXIoe1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbFxuICAgICAgfSkpO1xuICAgIH1cbiAgfTtcblxuICBSZXN1bHREZXRhaWxWaWV3LnByb3RvdHlwZS5mZXRjaERpY29tID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIHN0cjJhYiwgeGhyO1xuICAgIHN0cjJhYiA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdmFyIGJ1ZiwgYnVmVmlldywgaSwgc3RyTGVuO1xuICAgICAgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGggKiAyKTtcbiAgICAgIGJ1ZlZpZXcgPSBuZXcgVWludDE2QXJyYXkoYnVmKTtcbiAgICAgIGkgPSAwO1xuICAgICAgc3RyTGVuID0gc3RyLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpIDwgc3RyTGVuKSB7XG4gICAgICAgIGJ1ZlZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9O1xuICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdDtcbiAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgIHhoci5vbmxvYWQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBzdGF0dXM7XG4gICAgICAgIHN0YXR1cyA9IHhoci5zdGF0dXMgPT09IDIwMCA/ICdzdWNjZXNzJyA6ICdlcnJvcic7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5yZW5kZXJEaWNvbShzdHIyYWIoeGhyLnJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmV0dXJuIHhoci5zZW5kKCk7XG4gIH07XG5cbiAgUmVzdWx0RGV0YWlsVmlldy5wcm90b3R5cGUubG9hZERpY29tID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVybDtcbiAgICB1cmwgPSB0aGlzLm1vZGVsLmdldCgndmlld3MnKS5kaWNvbTtcbiAgICBpZiAoX3Muc3RhcnRzV2l0aCh1cmwsICdmaWxlOi8vJykpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdiYWNrZ3JvdW5kJykucmVxdWVzdCgnZmlsZScsIHVybCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRpY29tQnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckRpY29tKGRpY29tQnVmZmVyKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ0ZFVENIIEZST00gU0VSVkVSJyk7XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaERpY29tKGVuY29kZVVSSSh1cmwpKTtcbiAgICB9XG4gIH07XG5cbiAgUmVzdWx0RGV0YWlsVmlldy5wcm90b3R5cGUucmVuZGVyRGljb20gPSBmdW5jdGlvbihwaXhlbERhdGEpIHtcbiAgICB2YXIgZWxlbWVudCwgaGVpZ2h0LCBpbWFnZU9iamVjdCwgd2lkdGg7XG4gICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWNvbUltYWdlJyk7XG4gICAgY29ybmVyc3RvbmUuZW5hYmxlKGVsZW1lbnQpO1xuICAgIHdpZHRoID0gMjU2O1xuICAgIGhlaWdodCA9IDI1NjtcbiAgICBpbWFnZU9iamVjdCA9IHtcbiAgICAgIGltYWdlSWQ6ICcxMjM0NScsXG4gICAgICBtaW5QaXhlbFZhbHVlOiAwLFxuICAgICAgbWF4UGl4ZWxWYWx1ZTogMjU3LFxuICAgICAgc2xvcGU6IDEuMCxcbiAgICAgIGludGVyY2VwdDogMCxcbiAgICAgIHdpbmRvd0NlbnRlcjogMTI3LFxuICAgICAgd2luZG93V2lkdGg6IDI1NixcbiAgICAgIGdldFBpeGVsRGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwaXhlbERhdGE7XG4gICAgICB9LFxuICAgICAgcm93czogaGVpZ2h0LFxuICAgICAgY29sdW1uczogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGNvbG9yOiBmYWxzZSxcbiAgICAgIGNvbHVtblBpeGVsU3BhY2luZzogLjg5ODQzNzUsXG4gICAgICByb3dQaXhlbFNwYWNpbmc6IC44OTg0Mzc1LFxuICAgICAgc2l6ZUluQnl0ZXM6IHdpZHRoICogaGVpZ2h0ICogMlxuICAgIH07XG4gICAgcmV0dXJuIGNvcm5lcnN0b25lLmRpc3BsYXlJbWFnZShlbGVtZW50LCBpbWFnZU9iamVjdCk7XG4gIH07XG5cbiAgUmVzdWx0RGV0YWlsVmlldy5wcm90b3R5cGUubG9hZENzdiA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciB4aHI7XG4gICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgeGhyLm9ubG9hZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHN0YXR1cztcbiAgICAgICAgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMjAwID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJztcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckNzdih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIHJldHVybiB4aHIuc2VuZCgpO1xuICB9O1xuXG4gIFJlc3VsdERldGFpbFZpZXcucHJvdG90eXBlLnJlbmRlckNzdiA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB2YXIgY29udGFpbmVyLCBwYXJzZWRDU1Y7XG4gICAgY29uc29sZS5sb2coJ1JFTkRFUiBDU1YnKTtcbiAgICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgICBwYXJzZWRDU1YgPSBkMy5jc3ZQYXJzZVJvd3ModGV4dCk7XG4gICAgcmV0dXJuIGNvbnRhaW5lciA9IGQzLnNlbGVjdCgnLmRyaWZ0LWNvbnRlbnQnKS5hcHBlbmQoJ3RhYmxlJykuc2VsZWN0QWxsKCd0cicpLmRhdGEocGFyc2VkQ1NWKS5lbnRlcigpLmFwcGVuZCgndHInKS5zZWxlY3RBbGwoJ3RkJykuZGF0YShmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4gZDtcbiAgICB9KS5lbnRlcigpLmFwcGVuZCgndGQnKS50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBkO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBSZXN1bHREZXRhaWxWaWV3O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZXN1bHREZXRhaWxWaWV3O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOW1ZV05sZEhObFlYSmphQzkyYVdWM2N5OXBkR1Z0UkdWMFlXbHNMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5elpXRnlZMmd2Wm1GalpYUnpaV0Z5WTJndmRtbGxkM012YVhSbGJVUmxkR0ZwYkM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3d5UWtGQlFUdEZRVUZCT3pzN08wRkJRVUVzVTBGQlFTeEhRVUZaTEU5QlFVRXNRMEZCVVN4aFFVRlNPenRCUVVsT096czdPenM3T3pzN05rSkJRMG9zVVVGQlFTeEhRVUZWTEU5QlFVRXNRMEZCVVN4dlFrRkJVanM3TmtKQlExWXNVMEZCUVN4SFFVRlhPenMyUWtGRldDeE5RVUZCTEVkQlEwVTdTVUZCUVN3d1FrRkJRU3hGUVVFMFFpeFhRVUUxUWp0SlFVTkJMR1ZCUVVFc1JVRkJhVUlzVjBGRWFrSTdTVUZGUVN4alFVRkJMRVZCUVdkQ0xGbEJSbWhDT3pzN05rSkJTVVlzVDBGQlFTeEhRVU5GTzBsQlFVRXNXVUZCUVN4RlFVRmpMSE5DUVVGa096czdOa0pCUlVZc1UwRkJRU3hIUVVGWExGTkJRVU1zUTBGQlJEdEpRVU5VTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1pVRkJWRHRKUVVOQkxFbEJRVEJDTEVsQlFVTXNRMEZCUVN4TFFVRXpRanRCUVVGQkxHRkJRVThzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4TlFVRlFMRU5CUVVFc1JVRkJVRHM3VjBGRFFTeEpRVUZETEVOQlFVRXNTMEZCUkN4SFFVRlRMRWxCUVVrc1MwRkJTaXhEUVVGVkxGRkJRVkVzUTBGQlF5eGhRVUZVTEVOQlFYVkNMRXRCUVhaQ0xFTkJRVllzUlVGQmVVTTdUVUZEYUVRc1lVRkJRU3hGUVVGbExFbEJSR2xETzAxQlJXaEVMRlZCUVVFc1JVRkJXU3hIUVVadlF6dE5RVWRvUkN4aFFVRkJMRVZCUVdVc1EwRkJRU3hEUVVGRkxHZENRVUZHTEVOQlFXOUNMRU5CUVVFc1EwRkJRU3hEUVVoaE8wMUJTV2hFTEZWQlFVRXNSVUZCV1N4RFFVcHZRenROUVV0b1JDeG5Ra0ZCUVN4RlFVRnJRaXhKUVV3NFFqdExRVUY2UXp0RlFVaEJPenMyUWtGWFdDeFZRVUZCTEVkQlFWa3NVMEZCUXl4RFFVRkVPMGxCUTFZc1NVRkJReXhEUVVGQkxFOUJRVVFzUTBGQlV5eGxRVUZVTzFkQlEwRXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhQUVVGUUxFTkJRVUU3UlVGR1ZUczdOa0pCU1Zvc1UwRkJRU3hIUVVGWExGTkJRVUU3U1VGRFZDeERRVUZCTEVOQlFVVXNaMEpCUVVZc1EwRkJiVUlzUTBGQlF5eEpRVUZ3UWl4RFFVRjVRaXhGUVVGNlFqdEpRVU5CTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1pVRkJWRHRYUVVOQkxFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNUVUZCVkR0RlFVaFRPenMyUWtGTFdDeFJRVUZCTEVkQlFWVXNVMEZCUVR0SlFVZFNMRWxCUVhWQ0xFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJiVUlzUTBGQlF5eExRVUV6UXp0QlFVRkJMR0ZCUVU4c1NVRkJReXhEUVVGQkxGTkJRVVFzUTBGQlFTeEZRVUZRT3p0SlFVZEJMRWxCUVhWRUxFbEJRVU1zUTBGQlFTeExRVUZMTEVOQlFVTXNSMEZCVUN4RFFVRlhMRTlCUVZnc1EwRkJiVUlzUTBGQlF5eEhRVUV6UlR0aFFVRkJMRWxCUVVNc1EwRkJRU3haUVVGWkxFTkJRVU1zU1VGQlpDeERRVUZ0UWl4SlFVRkpMRk5CUVVvc1EwRkJZenRSUVVGRkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNTMEZCVmp0UFFVRmtMRU5CUVc1Q0xFVkJRVUU3TzBWQlRsRTdPelpDUVd0Q1ZpeFZRVUZCTEVkQlFWa3NVMEZCUXl4SFFVRkVPMEZCUlZZc1VVRkJRVHRKUVVGQkxFMUJRVUVzUjBGQlV5eFRRVUZETEVkQlFVUTdRVUZEVUN4VlFVRkJPMDFCUVVFc1IwRkJRU3hIUVVGTkxFbEJRVWtzVjBGQlNpeERRVUZuUWl4SFFVRkhMRU5CUVVNc1RVRkJTaXhIUVVGaExFTkJRVGRDTzAxQlJVNHNUMEZCUVN4SFFVRlZMRWxCUVVrc1YwRkJTaXhEUVVGblFpeEhRVUZvUWp0TlFVTldMRU5CUVVFc1IwRkJTVHROUVVOS0xFMUJRVUVzUjBGQlV5eEhRVUZITEVOQlFVTTdRVUZEWWl4aFFVRk5MRU5CUVVFc1IwRkJTU3hOUVVGV08xRkJRMFVzVDBGQlVTeERRVUZCTEVOQlFVRXNRMEZCVWl4SFFVRmhMRWRCUVVjc1EwRkJReXhWUVVGS0xFTkJRV1VzUTBGQlpqdFJRVU5pTEVOQlFVRTdUVUZHUmp0QlFVZEJMR0ZCUVU4N1NVRlVRVHRKUVdGVUxFZEJRVUVzUjBGQlRTeEpRVUZKTzBsQlExWXNSMEZCUnl4RFFVRkRMRWxCUVVvc1EwRkJVeXhMUVVGVUxFVkJRV2RDTEVkQlFXaENMRVZCUVhGQ0xFbEJRWEpDTzBsQlEwRXNSMEZCUnl4RFFVRkRMRmxCUVVvc1IwRkJiVUk3U1VGSGJrSXNSMEZCUnl4RFFVRkRMRTFCUVVvc1IwRkJZU3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNRMEZCUkR0QlFVTllMRmxCUVVFN1VVRkJRU3hOUVVGQkxFZEJRVmtzUjBGQlJ5eERRVUZETEUxQlFVb3NTMEZCWXl4SFFVRnFRaXhIUVVFd1FpeFRRVUV4UWl4SFFVRjVRenRSUVVkc1JDeEpRVUUyUXl4TlFVRkJMRXRCUVZVc1UwRkJka1E3UVVGQlFTeHBRa0ZCVHl4TFFVRkRMRU5CUVVFc1YwRkJSQ3hEUVVGaExFMUJRVUVzUTBGQlR5eEhRVUZITEVOQlFVTXNVVUZCV0N4RFFVRmlMRVZCUVZBN08wMUJTbGM3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJPMWRCVDJJc1IwRkJSeXhEUVVGRExFbEJRVW9zUTBGQlFUdEZRVE5DVlRzN05rSkJOa0phTEZOQlFVRXNSMEZCVnl4VFFVRkJPMEZCUTFRc1VVRkJRVHRKUVVGQkxFZEJRVUVzUjBGQlRTeEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWRCUVZBc1EwRkJWeXhQUVVGWUxFTkJRVzFDTEVOQlFVTTdTVUZGTVVJc1NVRkJSeXhGUVVGRkxFTkJRVU1zVlVGQlNDeERRVUZqTEVkQlFXUXNSVUZCYlVJc1UwRkJia0lzUTBGQlNEdGhRVVZGTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhEUVVGMVFpeFpRVUYyUWl4RFFVRnZReXhEUVVGRExFOUJRWEpETEVOQlFUWkRMRTFCUVRkRExFVkJRWEZFTEVkQlFYSkVMRU5CUVhsRUxFTkJRVU1zU1VGQk1VUXNRMEZCSzBRc1EwRkJRU3hUUVVGQkxFdEJRVUU3WlVGQlFTeFRRVUZETEZkQlFVUTdhVUpCUVdsQ0xFdEJRVU1zUTBGQlFTeFhRVUZFTEVOQlFXRXNWMEZCWWp0UlFVRnFRanROUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCTDBRc1JVRkdSanRMUVVGQkxFMUJRVUU3VFVGTFJTeFBRVUZQTEVOQlFVTXNSMEZCVWl4RFFVRlpMRzFDUVVGYU8yRkJRMEVzU1VGQlF5eERRVUZCTEZWQlFVUXNRMEZCV1N4VFFVRkJMRU5CUVZVc1IwRkJWaXhEUVVGYUxFVkJUa1k3TzBWQlNGTTdPelpDUVZkWUxGZEJRVUVzUjBGQllTeFRRVUZETEZOQlFVUTdRVUZMV0N4UlFVRkJPMGxCUVVFc1QwRkJRU3hIUVVGVkxGRkJRVkVzUTBGQlF5eGpRVUZVTEVOQlFYZENMRmxCUVhoQ08wbEJRMVlzVjBGQlZ5eERRVUZETEUxQlFWb3NRMEZCYlVJc1QwRkJia0k3U1VGSlFTeExRVUZCTEVkQlFWRTdTVUZEVWl4TlFVRkJMRWRCUVZNN1NVRkZWQ3hYUVVGQkxFZEJRMFU3VFVGQlFTeFBRVUZCTEVWQlFWTXNUMEZCVkR0TlFVTkJMR0ZCUVVFc1JVRkJaU3hEUVVSbU8wMUJSVUVzWVVGQlFTeEZRVUZsTEVkQlJtWTdUVUZIUVN4TFFVRkJMRVZCUVU4c1IwRklVRHROUVVsQkxGTkJRVUVzUlVGQlZ5eERRVXBZTzAxQlMwRXNXVUZCUVN4RlFVRmpMRWRCVEdRN1RVRk5RU3hYUVVGQkxFVkJRV0VzUjBGT1lqdE5RVTlCTEZsQlFVRXNSVUZCWXl4VFFVRkJPMEZCUVVjc1pVRkJUenROUVVGV0xFTkJVR1E3VFVGUlFTeEpRVUZCTEVWQlFVMHNUVUZTVGp0TlFWTkJMRTlCUVVFc1JVRkJVeXhMUVZSVU8wMUJWVUVzVFVGQlFTeEZRVUZSTEUxQlZsSTdUVUZYUVN4TFFVRkJMRVZCUVU4c1MwRllVRHROUVZsQkxFdEJRVUVzUlVGQlR5eExRVnBRTzAxQllVRXNhMEpCUVVFc1JVRkJiMElzVVVGaWNFSTdUVUZqUVN4bFFVRkJMRVZCUVdsQ0xGRkJaR3BDTzAxQlpVRXNWMEZCUVN4RlFVRmhMRXRCUVVFc1IwRkJVU3hOUVVGU0xFZEJRV2xDTEVOQlpqbENPenRYUVcxQ1JpeFhRVUZYTEVOQlFVTXNXVUZCV2l4RFFVRjVRaXhQUVVGNlFpeEZRVUZyUXl4WFFVRnNRenRGUVdwRFZ6czdOa0pCYzBOaUxFOUJRVUVzUjBGQlV5eFRRVUZETEVkQlFVUTdRVUZKVUN4UlFVRkJPMGxCUVVFc1IwRkJRU3hIUVVGTkxFbEJRVWs3U1VGRFZpeEhRVUZITEVOQlFVTXNTVUZCU2l4RFFVRlRMRXRCUVZRc1JVRkJaMElzUjBGQmFFSXNSVUZCY1VJc1NVRkJja0k3U1VGRFFTeEhRVUZITEVOQlFVTXNXVUZCU2l4SFFVRnRRanRKUVVkdVFpeEhRVUZITEVOQlFVTXNUVUZCU2l4SFFVRmhMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlF5eERRVUZFTzBGQlExZ3NXVUZCUVR0UlFVRkJMRTFCUVVFc1IwRkJXU3hIUVVGSExFTkJRVU1zVFVGQlNpeExRVUZqTEVkQlFXcENMRWRCUVRCQ0xGTkJRVEZDTEVkQlFYbERPMUZCUjJ4RUxFbEJRVzFETEUxQlFVRXNTMEZCVlN4VFFVRTNRenRCUVVGQkxHbENRVUZQTEV0QlFVTXNRMEZCUVN4VFFVRkVMRU5CUVZjc1IwRkJSeXhEUVVGRExGRkJRV1lzUlVGQlVEczdUVUZLVnp0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUU3VjBGUFlpeEhRVUZITEVOQlFVTXNTVUZCU2l4RFFVRkJPMFZCYUVKUE96czJRa0ZyUWxRc1UwRkJRU3hIUVVGWExGTkJRVU1zU1VGQlJEdEJRVU5VTEZGQlFVRTdTVUZCUVN4UFFVRlBMRU5CUVVNc1IwRkJVaXhEUVVGWkxGbEJRVm83U1VGRFFTeFBRVUZQTEVOQlFVTXNSMEZCVWl4RFFVRlpMRWxCUVZvN1NVRkZRU3hUUVVGQkxFZEJRVmtzUlVGQlJTeERRVUZETEZsQlFVZ3NRMEZCWjBJc1NVRkJhRUk3VjBGRFdpeFRRVUZCTEVkQlFWa3NSVUZCUlN4RFFVRkRMRTFCUVVnc1EwRkJWU3huUWtGQlZpeERRVU5hTEVOQlFVTXNUVUZFVnl4RFFVTktMRTlCUkVrc1EwRkZXaXhEUVVGRExGTkJSbGNzUTBGRlJDeEpRVVpETEVOQlIxb3NRMEZCUXl4SlFVaFhMRU5CUjA0c1UwRklUU3hEUVVsYUxFTkJRVU1zUzBGS1Z5eERRVUZCTEVOQlMxb3NRMEZCUXl4TlFVeFhMRU5CUzBvc1NVRk1TU3hEUVUxYUxFTkJRVU1zVTBGT1Z5eERRVTFFTEVsQlRrTXNRMEZQV2l4RFFVRkRMRWxCVUZjc1EwRlBUaXhUUVVGRExFTkJRVVE3WVVGQlR6dEpRVUZRTEVOQlVFMHNRMEZSV2l4RFFVRkRMRXRCVWxjc1EwRkJRU3hEUVZGS0xFTkJRVU1zVFVGU1J5eERRVkZKTEVsQlVrb3NRMEZSVXl4RFFVRkRMRWxCVWxZc1EwRlJaU3hUUVVGRExFTkJRVVE3WVVGQlR6dEpRVUZRTEVOQlVtWTdSVUZNU0RzN096dEhRV3hLYTBJc1JVRkJSU3hEUVVGRE96dEJRVzFMYkVNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgRGV0YWlsVmlldywgRmFjZXRlZFZpZXdMYXlvdXQsIEhlYWRlclZpZXcsIFJlY29yZExpc3QsIFJlY29yZExpc3RMYXlvdXQsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxucmVxdWlyZSgnLi9lbmdpbmUnKTtcblxuUmVjb3JkTGlzdCA9IHJlcXVpcmUoJy4vcmVjb3JkTGlzdCcpO1xuXG5SZWNvcmRMaXN0TGF5b3V0ID0gcmVxdWlyZSgnLi9yZWNvcmRMaXN0TGF5b3V0Jyk7XG5cbkRldGFpbFZpZXcgPSByZXF1aXJlKCcuL2l0ZW1EZXRhaWwnKTtcblxuSGVhZGVyVmlldyA9IHJlcXVpcmUoJy4vaGVhZGVyJyk7XG5cbkZhY2V0ZWRWaWV3TGF5b3V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZhY2V0ZWRWaWV3TGF5b3V0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGYWNldGVkVmlld0xheW91dCgpIHtcbiAgICB0aGlzLmluaXRGYWNldFZpZXcgPSBiaW5kKHRoaXMuaW5pdEZhY2V0VmlldywgdGhpcyk7XG4gICAgdGhpcy5zaG93SXRlbSA9IGJpbmQodGhpcy5zaG93SXRlbSwgdGhpcyk7XG4gICAgdGhpcy5zaG93UmVjb3JkTGlzdExheW91dCA9IGJpbmQodGhpcy5zaG93UmVjb3JkTGlzdExheW91dCwgdGhpcyk7XG4gICAgdGhpcy5zaG93UmVjb3JkTGlzdCA9IGJpbmQodGhpcy5zaG93UmVjb3JkTGlzdCwgdGhpcyk7XG4gICAgcmV0dXJuIEZhY2V0ZWRWaWV3TGF5b3V0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgRmFjZXRlZFZpZXdMYXlvdXQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvbGF5b3V0Jyk7XG5cbiAgRmFjZXRlZFZpZXdMYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXItZmx1aWQnO1xuXG4gIEZhY2V0ZWRWaWV3TGF5b3V0LnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrIGgzLmZhY2V0dGl0bGUnOiAndG9nZ2xlQ29sbGFwc2VGYWNldCdcbiAgfTtcblxuICBGYWNldGVkVmlld0xheW91dC5wcm90b3R5cGUudG9nZ2xlQ29sbGFwc2VGYWNldCA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5mYWNldHNlYXJjaCcpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgfTtcblxuICBGYWNldGVkVmlld0xheW91dC5wcm90b3R5cGUucmVnaW9ucyA9IHtcbiAgICBsaXN0UmVnaW9uOiAnW2RhdGEtcmVnaW9uPXJlY29yZC1saXN0XScsXG4gICAgaGVhZGVyUmVnaW9uOiAnW2RhdGEtcmVnaW9uPWhlYWRlcl0nLFxuICAgIGRldGFpbFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1kZXRhaWxdJ1xuICB9O1xuXG4gIEZhY2V0ZWRWaWV3TGF5b3V0LnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoZWFkZXJWaWV3O1xuICAgIGhlYWRlclZpZXcgPSBuZXcgSGVhZGVyVmlldyh7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbFxuICAgIH0pO1xuICAgIGhlYWRlclZpZXcub24oJ2NsZWFyJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBqUXVlcnkuY2xlYXJGYWNldHMoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIGhlYWRlclZpZXcub24oJ2xpc3QnLCB0aGlzLnNob3dSZWNvcmRMaXN0KTtcbiAgICBoZWFkZXJWaWV3Lm9uKCd2aWV3ZXInLCB0aGlzLnNob3dSZWNvcmRMaXN0TGF5b3V0KTtcbiAgICB0aGlzLmhlYWRlclJlZ2lvbi5zaG93KGhlYWRlclZpZXcpO1xuICAgIHNldFRpbWVvdXQodGhpcy5pbml0RmFjZXRWaWV3LCAxMDApO1xuICAgIHJldHVybiB0aGlzLnNob3dSZWNvcmRMaXN0KCk7XG4gIH07XG5cbiAgRmFjZXRlZFZpZXdMYXlvdXQucHJvdG90eXBlLnNob3dSZWNvcmRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxpc3RWaWV3O1xuICAgIGxpc3RWaWV3ID0gbmV3IFJlY29yZExpc3Qoe1xuICAgICAgY29sbGVjdGlvbjogdGhpcy5jb2xsZWN0aW9uXG4gICAgfSk7XG4gICAgbGlzdFZpZXcub24oJ2NoaWxkdmlldzpzaG93OnJlbGF0aW9uJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldywgaWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dJdGVtKGlkKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gIH07XG5cbiAgRmFjZXRlZFZpZXdMYXlvdXQucHJvdG90eXBlLnNob3dSZWNvcmRMaXN0TGF5b3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxpc3RWaWV3O1xuICAgIGxpc3RWaWV3ID0gbmV3IFJlY29yZExpc3RMYXlvdXQoe1xuICAgICAgY29sbGVjdGlvbjogdGhpcy5jb2xsZWN0aW9uXG4gICAgfSk7XG4gICAgbGlzdFZpZXcub24oJ2NoaWxkdmlldzpzaG93OnJlbGF0aW9uJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldywgaWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dJdGVtKGlkKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHJldHVybiB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gIH07XG5cbiAgRmFjZXRlZFZpZXdMYXlvdXQucHJvdG90eXBlLnNob3dJdGVtID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgZWwsIGksIGl0ZW0sIGxlbiwgcmVmO1xuICAgIGl0ZW0gPSBudWxsO1xuICAgIHJlZiA9IHRoaXMub3B0aW9ucy5pdGVtcy5tb2RlbHM7XG4gICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBlbCA9IHJlZltpXTtcbiAgICAgIGlmIChlbC5nZXQoJ2RhdGEnKVsnQGlkJ10gPT09IGlkKSB7XG4gICAgICAgIGl0ZW0gPSBlbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5kZXRhaWxWaWV3ICYmIHRoaXMuZGV0YWlsVmlldy5tb2RlbC5pZCA9PT0gaXRlbS5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGV0YWlsVmlldy50cmlnZ2VyKCdoaWRlJyk7XG4gICAgfVxuICAgIHRoaXMuZGV0YWlsVmlldyA9IG5ldyBEZXRhaWxWaWV3KHtcbiAgICAgIG1vZGVsOiBpdGVtXG4gICAgfSk7XG4gICAgdGhpcy5kZXRhaWxWaWV3Lm9uKCdzaG93OnVuZGVybGF5JywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy4kKCcuZHJpZnQtdW5kZXJsYXknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLmRldGFpbFZpZXcub24oJ2hpZGU6dW5kZXJsYXknLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLiQoJy5kcmlmdC11bmRlcmxheScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHRoaXMuZGV0YWlsVmlldy5vbignaGlkZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBfdGhpcy5kZXRhaWxSZWdpb24uJGVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMuZGV0YWlsUmVnaW9uLmVtcHR5KCk7XG4gICAgICAgICAgcmV0dXJuIGRlbGV0ZSBfdGhpcy5kZXRhaWxWaWV3O1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgdGhpcy5kZXRhaWxSZWdpb24uc2hvdyh0aGlzLmRldGFpbFZpZXcpO1xuICAgIHJldHVybiB0aGlzLmRldGFpbFJlZ2lvbi4kZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICB9O1xuXG4gIEZhY2V0ZWRWaWV3TGF5b3V0LnByb3RvdHlwZS5pbml0RmFjZXRWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYsIGZhY2V0cywgaSwgbGVuLCBvcmRlckJ5T3B0aW9ucywgc2V0dGluZ3MsIHN0YXRlO1xuICAgIGZhY2V0cyA9IHRoaXMub3B0aW9ucy5mYWNldENvbGxlY3Rpb24uZ2V0RW5hYmxlZCgpO1xuICAgIG9yZGVyQnlPcHRpb25zID0ge307XG4gICAgZm9yIChpID0gMCwgbGVuID0gZmFjZXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBmID0gZmFjZXRzW2ldO1xuICAgICAgb3JkZXJCeU9wdGlvbnNbZi5hdHRyaWJ1dGVdID0gZi5sYWJlbDtcbiAgICB9XG4gICAgc2V0dGluZ3MgPSB7XG4gICAgICBpdGVtczogdGhpcy5vcHRpb25zLml0ZW1zLnRvSlNPTigpLFxuICAgICAgZmFjZXRzOiBmYWNldHMsXG4gICAgICByZXN1bHRFbGVtZW50OiAnI3Jlc3VsdHMnLFxuICAgICAgZmFjZXRFbGVtZW50OiAnI2ZhY2V0cycsXG4gICAgICByZXN1bHRUZW1wbGF0ZTogJ3BsYWNlaG9sZGVyJyxcbiAgICAgIHJlc3VsdFRlbXBsYXRlQnlwYXNzOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuY29sbGVjdGlvbi5hZGQoaXRlbSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSxcbiAgICAgIGJlZm9yZVJlc3VsdFJlbmRlcjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuY29sbGVjdGlvbi5yZXNldChbXSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSxcbiAgICAgIHBhZ2luYXRpb25Db3VudDogNTAsXG4gICAgICBvcmRlckJ5T3B0aW9uczogb3JkZXJCeU9wdGlvbnNcbiAgICB9O1xuICAgIHN0YXRlID0gJC5mYWNldGVsaXplKHNldHRpbmdzKTtcbiAgfTtcblxuICByZXR1cm4gRmFjZXRlZFZpZXdMYXlvdXQ7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhY2V0ZWRWaWV3TGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOW1ZV05sZEhObFlYSmphQzkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOW1ZV05sZEhObFlYSmphQzkyYVdWM2N5OXNZWGx2ZFhRdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzZFVWQlFVRTdSVUZCUVRzN096dEJRVUZCTEU5QlFVRXNRMEZCVVN4VlFVRlNPenRCUVVOQkxGVkJRVUVzUjBGQllTeFBRVUZCTEVOQlFWRXNZMEZCVWpzN1FVRkRZaXhuUWtGQlFTeEhRVUZ0UWl4UFFVRkJMRU5CUVZFc2IwSkJRVkk3TzBGQlEyNUNMRlZCUVVFc1IwRkJZU3hQUVVGQkxFTkJRVkVzWTBGQlVqczdRVUZEWWl4VlFVRkJMRWRCUVdFc1QwRkJRU3hEUVVGUkxGVkJRVkk3TzBGQlNWQTdPenM3T3pzN096czdPemhDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNiMEpCUVZJN096aENRVU5XTEZOQlFVRXNSMEZCVnpzN09FSkJSVmdzVFVGQlFTeEhRVU5GTzBsQlFVRXNjVUpCUVVFc1JVRkJkVUlzY1VKQlFYWkNPenM3T0VKQlJVWXNiVUpCUVVFc1IwRkJjVUlzVTBGQlF5eERRVUZFTzFkQlEyNUNMRU5CUVVFc1EwRkJSU3hEUVVGRExFTkJRVU1zWVVGQlNpeERRVUZyUWl4RFFVRkRMRTlCUVc1Q0xFTkJRVEpDTEdOQlFUTkNMRU5CUVRCRExFTkJRVU1zVjBGQk0wTXNRMEZCZFVRc1VVRkJka1E3UlVGRWJVSTdPemhDUVVkeVFpeFBRVUZCTEVkQlEwVTdTVUZCUVN4VlFVRkJMRVZCUVdNc01rSkJRV1E3U1VGRFFTeFpRVUZCTEVWQlFXTXNjMEpCUkdRN1NVRkZRU3haUVVGQkxFVkJRV01zYzBKQlJtUTdPenM0UWtGSlJpeFJRVUZCTEVkQlFWVXNVMEZCUVR0QlFVbFNMRkZCUVVFN1NVRkJRU3hWUVVGQkxFZEJRV0VzU1VGQlNTeFZRVUZLTEVOQlFXVTdUVUZCUlN4TFFVRkJMRVZCUVU4c1NVRkJReXhEUVVGQkxFdEJRVlk3UzBGQlpqdEpRVWRpTEZWQlFWVXNRMEZCUXl4RlFVRllMRU5CUVdNc1QwRkJaQ3hGUVVGMVFpeERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVFN1pVRkJSeXhOUVVGTkxFTkJRVU1zVjBGQlVDeERRVUZCTzAxQlFVZzdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRWFpDTzBsQlIwRXNWVUZCVlN4RFFVRkRMRVZCUVZnc1EwRkJZeXhOUVVGa0xFVkJRWE5DTEVsQlFVTXNRMEZCUVN4alFVRjJRanRKUVVOQkxGVkJRVlVzUTBGQlF5eEZRVUZZTEVOQlFXTXNVVUZCWkN4RlFVRjNRaXhKUVVGRExFTkJRVUVzYjBKQlFYcENPMGxCUjBFc1NVRkJReXhEUVVGQkxGbEJRVmtzUTBGQlF5eEpRVUZrTEVOQlFXMUNMRlZCUVc1Q08wbEJSMEVzVlVGQlFTeERRVUZYTEVsQlFVTXNRMEZCUVN4aFFVRmFMRVZCUVRKQ0xFZEJRVE5DTzFkQlNVRXNTVUZCUXl4RFFVRkJMR05CUVVRc1EwRkJRVHRGUVhKQ1VUczdPRUpCZFVKV0xHTkJRVUVzUjBGQlowSXNVMEZCUVR0QlFVTmtMRkZCUVVFN1NVRkJRU3hSUVVGQkxFZEJRVmNzU1VGQlNTeFZRVUZLTEVOQlFXVTdUVUZCUlN4VlFVRkJMRVZCUVZrc1NVRkJReXhEUVVGQkxGVkJRV1k3UzBGQlpqdEpRVU5ZTEZGQlFWRXNRMEZCUXl4RlFVRlVMRU5CUVZrc2VVSkJRVm9zUlVGQmRVTXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFbEJRVVFzUlVGQlR5eEZRVUZRTzJWQlFXTXNTMEZCUXl4RFFVRkJMRkZCUVVRc1EwRkJWU3hGUVVGV08wMUJRV1E3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVhaRE8xZEJSMEVzU1VGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4SlFVRmFMRU5CUVdsQ0xGRkJRV3BDTzBWQlRHTTdPemhDUVU5b1FpeHZRa0ZCUVN4SFFVRnpRaXhUUVVGQk8wRkJRM0JDTEZGQlFVRTdTVUZCUVN4UlFVRkJMRWRCUVZjc1NVRkJTU3huUWtGQlNpeERRVUZ4UWp0TlFVRkZMRlZCUVVFc1JVRkJXU3hKUVVGRExFTkJRVUVzVlVGQlpqdExRVUZ5UWp0SlFVTllMRkZCUVZFc1EwRkJReXhGUVVGVUxFTkJRVmtzZVVKQlFWb3NSVUZCZFVNc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEVsQlFVUXNSVUZCVHl4RlFVRlFPMlZCUVdNc1MwRkJReXhEUVVGQkxGRkJRVVFzUTBGQlZTeEZRVUZXTzAxQlFXUTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRWFpETzFkQlEwRXNTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhKUVVGYUxFTkJRV2xDTEZGQlFXcENPMFZCU0c5Q096czRRa0ZMZEVJc1VVRkJRU3hIUVVGVkxGTkJRVU1zUlVGQlJEdEJRVWRTTEZGQlFVRTdTVUZCUVN4SlFVRkJMRWRCUVU4N1FVRkhVRHRCUVVGQkxGTkJRVUVzY1VOQlFVRTdPMDFCUTBVc1NVRkJSeXhGUVVGRkxFTkJRVU1zUjBGQlNDeERRVUZQTEUxQlFWQXNRMEZCWlN4RFFVRkJMRXRCUVVFc1EwRkJaaXhMUVVGNVFpeEZRVUUxUWp0UlFVTkZMRWxCUVVFc1IwRkJUenRCUVVOUUxHTkJSa1k3TzBGQlJFWTdTVUZOUVN4SlFVRkJMRU5CUVdNc1NVRkJaRHRCUVVGQkxHRkJRVUU3TzBsQlIwRXNTVUZCYzBNc1NVRkJReXhEUVVGQkxGVkJRVVFzU1VGQlpTeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRXRCUVVzc1EwRkJReXhGUVVGc1FpeExRVUYzUWl4SlFVRkpMRU5CUVVNc1JVRkJiRVk3UVVGQlFTeGhRVUZQTEVsQlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1QwRkJXaXhEUVVGdlFpeE5RVUZ3UWl4RlFVRlFPenRKUVVkQkxFbEJRVU1zUTBGQlFTeFZRVUZFTEVkQlFXTXNTVUZCU1N4VlFVRktMRU5CUVdVN1RVRkJSU3hMUVVGQkxFVkJRVThzU1VGQlZEdExRVUZtTzBsQlIyUXNTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhGUVVGYUxFTkJRV1VzWlVGQlppeEZRVUZuUXl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVUU3WlVGQlJ5eExRVUZETEVOQlFVRXNRMEZCUkN4RFFVRkhMR2xDUVVGSUxFTkJRWEZDTEVOQlFVTXNVVUZCZEVJc1EwRkJLMElzVVVGQkwwSTdUVUZCU0R0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGQmFFTTdTVUZEUVN4SlFVRkRMRU5CUVVFc1ZVRkJWU3hEUVVGRExFVkJRVm9zUTBGQlpTeGxRVUZtTEVWQlFXZERMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVUZITEV0QlFVTXNRMEZCUVN4RFFVRkVMRU5CUVVjc2FVSkJRVWdzUTBGQmNVSXNRMEZCUXl4WFFVRjBRaXhEUVVGclF5eFJRVUZzUXp0TlFVRklPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUZvUXp0SlFWTkJMRWxCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zUlVGQldpeERRVUZsTEUxQlFXWXNSVUZCZFVJc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZCTzFGQlEzSkNMRXRCUVVNc1EwRkJRU3haUVVGWkxFTkJRVU1zUjBGQlJ5eERRVUZETEZkQlFXeENMRU5CUVRoQ0xGRkJRVGxDTzJWQlEwRXNWVUZCUVN4RFFVRlpMRk5CUVVFN1ZVRkRWaXhMUVVGRExFTkJRVUVzV1VGQldTeERRVUZETEV0QlFXUXNRMEZCUVR0cFFrRkRRU3hQUVVGUExFdEJRVU1zUTBGQlFUdFJRVVpGTEVOQlFWb3NSVUZIUVN4SFFVaEJPMDFCUm5GQ08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRjJRanRKUVZGQkxFbEJRVU1zUTBGQlFTeFpRVUZaTEVOQlFVTXNTVUZCWkN4RFFVRnRRaXhKUVVGRExFTkJRVUVzVlVGQmNFSTdWMEZEUVN4SlFVRkRMRU5CUVVFc1dVRkJXU3hEUVVGRExFZEJRVWNzUTBGQlF5eFJRVUZzUWl4RFFVRXlRaXhSUVVFelFqdEZRWGhEVVRzN09FSkJNRU5XTEdGQlFVRXNSMEZCWlN4VFFVRkJPMEZCUjJJc1VVRkJRVHRKUVVGQkxFMUJRVUVzUjBGQlV5eEpRVUZETEVOQlFVRXNUMEZCVHl4RFFVRkRMR1ZCUVdVc1EwRkJReXhWUVVGNlFpeERRVUZCTzBsQlIxUXNZMEZCUVN4SFFVRnBRanRCUVVOcVFpeFRRVUZCTEhkRFFVRkJPenROUVVGQkxHTkJRV1VzUTBGQlFTeERRVUZETEVOQlFVTXNVMEZCUml4RFFVRm1MRWRCUVRoQ0xFTkJRVU1zUTBGQlF6dEJRVUZvUXp0SlFVVkJMRkZCUVVFc1IwRkRSVHROUVVGQkxFdEJRVUVzUlVGQlR5eEpRVUZETEVOQlFVRXNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGbUxFTkJRVUVzUTBGQlVEdE5RVU5CTEUxQlFVRXNSVUZCVVN4TlFVUlNPMDFCUlVFc1lVRkJRU3hGUVVGbExGVkJSbVk3VFVGSFFTeFpRVUZCTEVWQlFXVXNVMEZJWmp0TlFVbEJMR05CUVVFc1JVRkJaMElzWVVGS2FFSTdUVUZMUVN4dlFrRkJRU3hGUVVGelFpeERRVUZCTEZOQlFVRXNTMEZCUVR0bFFVRkJMRk5CUVVNc1NVRkJSRHRwUWtGQlZTeExRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRWRCUVZvc1EwRkJaMElzU1VGQmFFSTdVVUZCVmp0TlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGTWRFSTdUVUZOUVN4clFrRkJRU3hGUVVGdlFpeERRVUZCTEZOQlFVRXNTMEZCUVR0bFFVRkJMRk5CUVVFN2FVSkJRVWNzUzBGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4TFFVRmFMRU5CUVd0Q0xFVkJRV3hDTzFGQlFVZzdUVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJUbkJDTzAxQlUwRXNaVUZCUVN4RlFVRnBRaXhGUVZScVFqdE5RV0ZCTEdOQlFVRXNSVUZCWjBJc1kwRmlhRUk3TzBsQmVVSkdMRXRCUVVFc1IwRkJVU3hEUVVGRExFTkJRVU1zVlVGQlJpeERRVUZoTEZGQlFXSTdSVUZ1UTBzN096czdSMEUxUm1Vc1JVRkJSU3hEUVVGRE96dEJRWEZKYmtNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgUmVjb3JkTGlzdCwgUmVjb3JkVmlld2VyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuUmVjb3JkVmlld2VyID0gcmVxdWlyZSgnLi9yZWNvcmRWaWV3ZXInKTtcblxuUmVjb3JkTGlzdCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChSZWNvcmRMaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSZWNvcmRMaXN0KCkge1xuICAgIHJldHVybiBSZWNvcmRMaXN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgUmVjb3JkTGlzdC5wcm90b3R5cGUudGFnTmFtZSA9ICd1bCc7XG5cbiAgUmVjb3JkTGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2xpc3QtZ3JvdXAgcmVjb3JkLWxpc3QtZ3JvdXAnO1xuXG4gIFJlY29yZExpc3QucHJvdG90eXBlLmNoaWxkVmlldyA9IFJlY29yZFZpZXdlcjtcblxuICBSZWNvcmRMaXN0LnByb3RvdHlwZS5jaGlsZFZpZXdPcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhZ05hbWU6ICdsaScsXG4gICAgICBjbGFzc05hbWU6ICdsaXN0LWdyb3VwLWl0ZW0nXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gUmVjb3JkTGlzdDtcblxufSkoTW4uQ29sbGVjdGlvblZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlY29yZExpc3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5eVpXTnZjbVJNYVhOMExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTl6WldGeVkyZ3ZabUZqWlhSelpXRnlZMmd2ZG1sbGQzTXZjbVZqYjNKa1RHbHpkQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTeDNRa0ZCUVR0RlFVRkJPenM3UVVGQlFTeFpRVUZCTEVkQlFXVXNUMEZCUVN4RFFVRlJMR2RDUVVGU096dEJRVWxVT3pzN096czdPM1ZDUVVOS0xFOUJRVUVzUjBGQldUczdkVUpCUTFvc1UwRkJRU3hIUVVGWk96dDFRa0ZEV2l4VFFVRkJMRWRCUVZrN08zVkNRVVZhTEdkQ1FVRkJMRWRCUVd0Q0xGTkJRVUU3UVVGRGFFSXNWMEZCVHp0TlFVRkZMRTlCUVVFc1JVRkJVeXhKUVVGWU8wMUJRV2xDTEZOQlFVRXNSVUZCVnl4cFFrRkJOVUk3TzBWQlJGTTdPenM3UjBGTVN5eEZRVUZGTEVOQlFVTTdPMEZCVlRWQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgUmVjb3JkTGlzdENoaWxkLCBSZWNvcmRMaXN0TGF5b3V0LCBSZWNvcmRMaXN0VmlldywgUmVjb3JkVmlld2VyLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuUmVjb3JkVmlld2VyID0gcmVxdWlyZSgnLi9yZWNvcmRWaWV3ZXInKTtcblxuUmVjb3JkTGlzdENoaWxkID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZExpc3RDaGlsZCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUmVjb3JkTGlzdENoaWxkKCkge1xuICAgIHJldHVybiBSZWNvcmRMaXN0Q2hpbGQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRMaXN0Q2hpbGQucHJvdG90eXBlLnRhZ05hbWUgPSAnYSc7XG5cbiAgUmVjb3JkTGlzdENoaWxkLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtJztcblxuICBSZWNvcmRMaXN0Q2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcmVjb3JkX2xpc3RfY2hpbGQnKTtcblxuICBSZWNvcmRMaXN0Q2hpbGQucHJvdG90eXBlLmJlaGF2aW9ycyA9IHtcbiAgICBTZWxlY3RhYmxlQ2hpbGQ6IHt9XG4gIH07XG5cbiAgcmV0dXJuIFJlY29yZExpc3RDaGlsZDtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cblJlY29yZExpc3RWaWV3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZExpc3RWaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSZWNvcmRMaXN0VmlldygpIHtcbiAgICByZXR1cm4gUmVjb3JkTGlzdFZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRMaXN0Vmlldy5wcm90b3R5cGUudGFnTmFtZSA9ICd1bCc7XG5cbiAgUmVjb3JkTGlzdFZpZXcucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwIHJlY29yZC1saXN0LWdyb3VwJztcblxuICBSZWNvcmRMaXN0Vmlldy5wcm90b3R5cGUuY2hpbGRWaWV3ID0gUmVjb3JkTGlzdENoaWxkO1xuXG4gIHJldHVybiBSZWNvcmRMaXN0VmlldztcblxufSkoTW4uQ29sbGVjdGlvblZpZXcpO1xuXG5SZWNvcmRMaXN0TGF5b3V0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZExpc3RMYXlvdXQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFJlY29yZExpc3RMYXlvdXQoKSB7XG4gICAgcmV0dXJuIFJlY29yZExpc3RMYXlvdXQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRMaXN0TGF5b3V0LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3JlY29yZF9saXN0X2xheW91dCcpO1xuXG4gIFJlY29yZExpc3RMYXlvdXQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIFJlY29yZExpc3RMYXlvdXQucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgbGlzdFJlZ2lvbjogJ1tkYXRhLXJlZ2lvbj1saXN0XScsXG4gICAgZGV0YWlsUmVnaW9uOiAnW2RhdGEtcmVnaW9uPWRldGFpbF0nXG4gIH07XG5cbiAgUmVjb3JkTGlzdExheW91dC5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGlzdFZpZXcsIHJlZjtcbiAgICBsaXN0VmlldyA9IG5ldyBSZWNvcmRMaXN0Vmlldyh7XG4gICAgICBjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICB9KTtcbiAgICBsaXN0Vmlldy5vbignY2hpbGR2aWV3OnNlbGVjdGVkJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0RhdGFzZXQodmlldy5tb2RlbCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLmxpc3RSZWdpb24uc2hvdyhsaXN0Vmlldyk7XG4gICAgcmV0dXJuIChyZWYgPSB0aGlzLmNvbGxlY3Rpb24uYXQoMCkpICE9IG51bGwgPyByZWYudHJpZ2dlcignc2VsZWN0ZWQnKSA6IHZvaWQgMDtcbiAgfTtcblxuICBSZWNvcmRMaXN0TGF5b3V0LnByb3RvdHlwZS5zaG93RGF0YXNldCA9IGZ1bmN0aW9uKGRhdGFzZXQpIHtcbiAgICB2YXIgZGV0YWlsVmlldztcbiAgICBkZXRhaWxWaWV3ID0gbmV3IFJlY29yZFZpZXdlcih7XG4gICAgICBtb2RlbDogZGF0YXNldFxuICAgIH0pO1xuICAgIHRoaXMuZGV0YWlsUmVnaW9uLnNob3coZGV0YWlsVmlldyk7XG4gICAgZGV0YWlsVmlldy5vbignc2hvdzp1bmRlcmxheScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJCgnLmRyaWZ0LXVuZGVybGF5JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIGRldGFpbFZpZXcub24oJ2hpZGU6dW5kZXJsYXknLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICQoJy5kcmlmdC11bmRlcmxheScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBSZWNvcmRMaXN0TGF5b3V0O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWNvcmRMaXN0TGF5b3V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOW1ZV05sZEhObFlYSmphQzkyYVdWM2N5OXlaV052Y21STWFYTjBUR0Y1YjNWMExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTl6WldGeVkyZ3ZabUZqWlhSelpXRnlZMmd2ZG1sbGQzTXZjbVZqYjNKa1RHbHpkRXhoZVc5MWRDNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNTVUZCUVN3clJFRkJRVHRGUVVGQk96czdRVUZCUVN4WlFVRkJMRWRCUVdVc1QwRkJRU3hEUVVGUkxHZENRVUZTT3p0QlFVbFVPenM3T3pzN096UkNRVU5LTEU5QlFVRXNSMEZCV1RzN05FSkJRMW9zVTBGQlFTeEhRVUZaT3pzMFFrRkRXaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEN0Q1FVRlNPenMwUWtGRlZpeFRRVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVdsQ0xFVkJRV3BDT3pzN096dEhRVTR3UWl4RlFVRkZMRU5CUVVNN08wRkJWVE5DT3pzN096czdPekpDUVVOS0xFOUJRVUVzUjBGQldUczdNa0pCUTFvc1UwRkJRU3hIUVVGWk96c3lRa0ZEV2l4VFFVRkJMRWRCUVZrN096czdSMEZJWlN4RlFVRkZMRU5CUVVNN08wRkJUekZDT3pzN096czdPelpDUVVOS0xGRkJRVUVzUjBGQlZTeFBRVUZCTEVOQlFWRXNaME5CUVZJN096WkNRVU5XTEZOQlFVRXNSMEZCVnpzN05rSkJSVmdzVDBGQlFTeEhRVU5GTzBsQlFVRXNWVUZCUVN4RlFVRmpMRzlDUVVGa08wbEJRMEVzV1VGQlFTeEZRVUZqTEhOQ1FVUmtPenM3TmtKQmEwTkdMRkZCUVVFc1IwRkJWU3hUUVVGQk8wRkJRMUlzVVVGQlFUdEpRVUZCTEZGQlFVRXNSMEZCVnl4SlFVRkpMR05CUVVvc1EwRkJiVUk3VFVGQlJTeFZRVUZCTEVWQlFWa3NTVUZCUXl4RFFVRkJMRlZCUVdZN1MwRkJia0k3U1VGRFdDeFJRVUZSTEVOQlFVTXNSVUZCVkN4RFFVRlpMRzlDUVVGYUxFVkJRV3RETEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhKUVVGRU8yVkJRVlVzUzBGQlF5eERRVUZCTEZkQlFVUXNRMEZCWVN4SlFVRkpMRU5CUVVNc1MwRkJiRUk3VFVGQlZqdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJiRU03U1VGRFFTeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRWxCUVZvc1EwRkJhVUlzVVVGQmFrSTdjMFJCUTJsQ0xFTkJRVVVzVDBGQmJrSXNRMEZCTWtJc1ZVRkJNMEk3UlVGS1VUczdOa0pCVFZZc1YwRkJRU3hIUVVGaExGTkJRVU1zVDBGQlJEdEJRVU5ZTEZGQlFVRTdTVUZCUVN4VlFVRkJMRWRCUVdFc1NVRkJTU3haUVVGS0xFTkJRV2xDTzAxQlFVVXNTMEZCUVN4RlFVRlBMRTlCUVZRN1MwRkJha0k3U1VGRFlpeEpRVUZETEVOQlFVRXNXVUZCV1N4RFFVRkRMRWxCUVdRc1EwRkJiVUlzVlVGQmJrSTdTVUZEUVN4VlFVRlZMRU5CUVVNc1JVRkJXQ3hEUVVGakxHVkJRV1FzUlVGQkswSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk8yVkJRVWNzUTBGQlFTeERRVUZGTEdsQ1FVRkdMRU5CUVc5Q0xFTkJRVU1zVVVGQmNrSXNRMEZCT0VJc1VVRkJPVUk3VFVGQlNEdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFc1EwRkJMMEk3VjBGRFFTeFZRVUZWTEVOQlFVTXNSVUZCV0N4RFFVRmpMR1ZCUVdRc1JVRkJLMElzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkJPMlZCUVVjc1EwRkJRU3hEUVVGRkxHbENRVUZHTEVOQlFXOUNMRU5CUVVNc1YwRkJja0lzUTBGQmFVTXNVVUZCYWtNN1RVRkJTRHRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCTDBJN1JVRktWenM3T3p0SFFUZERaMElzUlVGQlJTeERRVUZET3p0QlFYRkViRU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBDc3ZWaWV3ZXIsIEpzb25HcmFwaCwgSnNvblZpZXdlciwgUmVjb3JkVmlld2VyLCBSZWNvcmRWaWV3ZXJTZWxlY3RvciwgVGFibGVWaWV3LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbkpzb25WaWV3ZXIgPSByZXF1aXJlKCdsaWIvdmlld3MvanNvbl92aWV3ZXInKTtcblxuSnNvbkdyYXBoID0gcmVxdWlyZSgnLi9ncmFwaCcpO1xuXG5UYWJsZVZpZXcgPSByZXF1aXJlKCcuL3RhYmxlJyk7XG5cbkNzdlZpZXdlciA9IHJlcXVpcmUoJy4vY3N2Vmlld2VyJyk7XG5cblJlY29yZFZpZXdlclNlbGVjdG9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZFZpZXdlclNlbGVjdG9yLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSZWNvcmRWaWV3ZXJTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gUmVjb3JkVmlld2VyU2VsZWN0b3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRWaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUubmF2SXRlbXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY3N2Vmlld2VyLCBpdGVtcztcbiAgICBpdGVtcyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWNvbjogJ2ZhLXRhYmxlJyxcbiAgICAgICAgdGV4dDogJ1RhYmxlJyxcbiAgICAgICAgdHJpZ2dlcjogJ3RhYmxlJyxcbiAgICAgICAgXCJkZWZhdWx0XCI6IHRydWVcbiAgICAgIH0sIHtcbiAgICAgICAgaWNvbjogJ2ZhLWNvZGUnLFxuICAgICAgICB0ZXh0OiAnSlNPTicsXG4gICAgICAgIHRyaWdnZXI6ICdqc29uJ1xuICAgICAgfSwge1xuICAgICAgICBpY29uOiAnZmEtc2l0ZW1hcCcsXG4gICAgICAgIHRleHQ6ICdHcmFwaCcsXG4gICAgICAgIHRyaWdnZXI6ICdncmFwaCdcbiAgICAgIH1cbiAgICBdO1xuICAgIGNzdlZpZXdlciA9IHtcbiAgICAgIGljb246ICdmYS1maWxlLWV4Y2VsLW8nLFxuICAgICAgdGV4dDogJ0NTVicsXG4gICAgICB0cmlnZ2VyOiAnY3N2J1xuICAgIH07XG4gICAgaWYgKHRoaXMubW9kZWwuZ2V0KCd2aWV3cycpLmNzdikge1xuICAgICAgaXRlbXMucHVzaChjc3ZWaWV3ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgUmVjb3JkVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLm5hdkV2ZW50cyA9IHtcbiAgICAndGFibGUnOiAnc2hvd1RhYmxlJyxcbiAgICAnanNvbic6ICdzaG93SnNvbicsXG4gICAgJ2dyYXBoJzogJ3Nob3dHcmFwaCcsXG4gICAgJ2Nzdic6ICdzaG93Q3N2J1xuICB9O1xuXG4gIFJlY29yZFZpZXdlclNlbGVjdG9yLnByb3RvdHlwZS5zaG93VGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UmVnaW9uLnNob3cobmV3IFRhYmxlVmlldyh7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbFxuICAgIH0pKTtcbiAgfTtcblxuICBSZWNvcmRWaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUuc2hvd0pzb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50UmVnaW9uLnNob3cobmV3IEpzb25WaWV3ZXIoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KSk7XG4gIH07XG5cbiAgUmVjb3JkVmlld2VyU2VsZWN0b3IucHJvdG90eXBlLnNob3dHcmFwaCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgSnNvbkdyYXBoKHtcbiAgICAgIGpzb246IHRoaXMubW9kZWwudG9KU09OKClbJ2RhdGEnXVxuICAgIH0pKTtcbiAgfTtcblxuICBSZWNvcmRWaWV3ZXJTZWxlY3Rvci5wcm90b3R5cGUuc2hvd0NzdiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRSZWdpb24uc2hvdyhuZXcgQ3N2Vmlld2VyKHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBSZWNvcmRWaWV3ZXJTZWxlY3RvcjtcblxufSkocmVxdWlyZSgnbGliL3ZpZXdzL25hdicpKTtcblxuUmVjb3JkVmlld2VyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZFZpZXdlciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gUmVjb3JkVmlld2VyKCkge1xuICAgIHRoaXMub25JbWFnZU91dCA9IGJpbmQodGhpcy5vbkltYWdlT3V0LCB0aGlzKTtcbiAgICB0aGlzLm9uSW1hZ2VJbiA9IGJpbmQodGhpcy5vbkltYWdlSW4sIHRoaXMpO1xuICAgIHJldHVybiBSZWNvcmRWaWV3ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRWaWV3ZXIucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcmVjb3JkX3ZpZXdlcicpO1xuXG4gIFJlY29yZFZpZXdlci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ2NhcmQgY2FyZC1ib2R5JztcblxuICBSZWNvcmRWaWV3ZXIucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgdmlld2VyUmVnaW9uOiAnW2RhdGEtcmVnaW9uPXZpZXdlcl0nXG4gIH07XG5cbiAgUmVjb3JkVmlld2VyLnByb3RvdHlwZS5iZWhhdmlvcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2JqO1xuICAgIHJldHVybiBvYmogPSB7XG4gICAgICBUb29sdGlwczoge30sXG4gICAgICBDbGlja2FibGVSZWxhdGlvbnM6IHt9LFxuICAgICAgRmxhc2hlczoge1xuICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0NvcGllZCBKU09OIHRvIGNsaXBib2FyZC4nLFxuICAgICAgICAgIHRpbWVvdXQ6IDEwMDBcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgY29weWluZyBKU09OIHRvIGNsaXBib2FyZC4nLFxuICAgICAgICAgIHRpbWVvdXQ6IDEwMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgUmVjb3JkVmlld2VyLnByb3RvdHlwZS5vbkNsaXBib2FyZFN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mbGFzaFN1Y2Nlc3MoKTtcbiAgfTtcblxuICBSZWNvcmRWaWV3ZXIucHJvdG90eXBlLm9uQ2xpcGJvYXJkRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mbGFzaEVycm9yKCk7XG4gIH07XG5cbiAgUmVjb3JkVmlld2VyLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdlclJlZ2lvbi5zaG93KG5ldyBSZWNvcmRWaWV3ZXJTZWxlY3Rvcih7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbFxuICAgIH0pKTtcbiAgfTtcblxuICBSZWNvcmRWaWV3ZXIucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnbW91c2VvdmVyIGltZyc6ICdvbkltYWdlSW4nLFxuICAgICdtb3VzZW91dCBpbWcnOiAnb25JbWFnZU91dCdcbiAgfTtcblxuICBSZWNvcmRWaWV3ZXIucHJvdG90eXBlLm9uSW1hZ2VJbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnRyaWdnZXIoJ3Nob3c6dW5kZXJsYXknKTtcbiAgICBpZiAodGhpcy5kcmlmdCkge1xuICAgICAgcmV0dXJuIHRoaXMuZHJpZnQuZW5hYmxlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRyaWZ0ID0gbmV3IERyaWZ0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLCB7XG4gICAgICBjb250YWluSW5saW5lOiB0cnVlLFxuICAgICAgaW5saW5lUGFuZTogMjAwLFxuICAgICAgcGFuZUNvbnRhaW5lcjogJCgnLmRyaWZ0LWNvbnRlbnQnKVswXSxcbiAgICAgIHpvb21GYWN0b3I6IDUsXG4gICAgICBob3ZlckJvdW5kaW5nQm94OiB0cnVlXG4gICAgfSk7XG4gIH07XG5cbiAgUmVjb3JkVmlld2VyLnByb3RvdHlwZS5vbkltYWdlT3V0ID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMudHJpZ2dlcignaGlkZTp1bmRlcmxheScpO1xuICAgIHJldHVybiB0aGlzLmRyaWZ0LmRpc2FibGUoKTtcbiAgfTtcblxuICByZXR1cm4gUmVjb3JkVmlld2VyO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWNvcmRWaWV3ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5eVpXTnZjbVJXYVdWM1pYSXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDNObFlYSmphQzltWVdObGRITmxZWEpqYUM5MmFXVjNjeTl5WldOdmNtUldhV1YzWlhJdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFbEJRVUVzSzBWQlFVRTdSVUZCUVRzN096dEJRVUZCTEZWQlFVRXNSMEZCWXl4UFFVRkJMRU5CUVZFc2RVSkJRVkk3TzBGQlEyUXNVMEZCUVN4SFFVRmpMRTlCUVVFc1EwRkJVU3hUUVVGU096dEJRVU5rTEZOQlFVRXNSMEZCWXl4UFFVRkJMRU5CUVZFc1UwRkJVanM3UVVGRFpDeFRRVUZCTEVkQlFXTXNUMEZCUVN4RFFVRlJMR0ZCUVZJN08wRkJTVkk3T3pzN096czdhVU5CUlVvc1VVRkJRU3hIUVVGVkxGTkJRVUU3UVVGRFVpeFJRVUZCTzBsQlFVRXNTMEZCUVN4SFFVRlJPMDFCUTA0N1VVRkJSU3hKUVVGQkxFVkJRVTBzVlVGQlVqdFJRVUZ6UWl4SlFVRkJMRVZCUVUwc1QwRkJOVUk3VVVGQmMwTXNUMEZCUVN4RlFVRlRMRTlCUVM5RE8xRkJRWGRFTEVOQlFVRXNUMEZCUVN4RFFVRkJMRVZCUVZNc1NVRkJha1U3VDBGRVRTeEZRVVZPTzFGQlFVVXNTVUZCUVN4RlFVRk5MRk5CUVZJN1VVRkJjMElzU1VGQlFTeEZRVUZOTEUxQlFUVkNPMUZCUVhORExFOUJRVUVzUlVGQlV5eE5RVUV2UXp0UFFVWk5MRVZCUjA0N1VVRkJSU3hKUVVGQkxFVkJRVTBzV1VGQlVqdFJRVUZ6UWl4SlFVRkJMRVZCUVUwc1QwRkJOVUk3VVVGQmMwTXNUMEZCUVN4RlFVRlRMRTlCUVM5RE8wOUJTRTA3TzBsQlQxSXNVMEZCUVN4SFFVRlpPMDFCUVVVc1NVRkJRU3hGUVVGTkxHbENRVUZTTzAxQlFUSkNMRWxCUVVFc1JVRkJUU3hMUVVGcVF6dE5RVUY1UXl4UFFVRkJMRVZCUVZNc1MwRkJiRVE3TzBsQlExb3NTVUZCZVVJc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NUMEZCV0N4RFFVRnRRaXhEUVVGRExFZEJRVGRETzAxQlFVRXNTMEZCU3l4RFFVRkRMRWxCUVU0c1EwRkJWeXhUUVVGWUxFVkJRVUU3TzBGQlJVRXNWMEZCVHp0RlFWaERPenRwUTBGaFZpeFRRVUZCTEVkQlEwVTdTVUZCUVN4UFFVRkJMRVZCUVZrc1YwRkJXanRKUVVOQkxFMUJRVUVzUlVGQldTeFZRVVJhTzBsQlJVRXNUMEZCUVN4RlFVRlpMRmRCUmxvN1NVRkhRU3hMUVVGQkxFVkJRVmtzVTBGSVdqczdPMmxEUVV0R0xGTkJRVUVzUjBGQlZ5eFRRVUZCTzFkQlExUXNTVUZCUXl4RFFVRkJMR0ZCUVdFc1EwRkJReXhKUVVGbUxFTkJRVzlDTEVsQlFVa3NVMEZCU2l4RFFVRmpPMDFCUVVVc1MwRkJRU3hGUVVGUExFbEJRVU1zUTBGQlFTeExRVUZXTzB0QlFXUXNRMEZCY0VJN1JVRkVVenM3YVVOQlIxZ3NVVUZCUVN4SFFVRlZMRk5CUVVFN1YwRkRVaXhKUVVGRExFTkJRVUVzWVVGQllTeERRVUZETEVsQlFXWXNRMEZCYjBJc1NVRkJTU3hWUVVGS0xFTkJRV1U3VFVGQlJTeExRVUZCTEVWQlFVOHNTVUZCUXl4RFFVRkJMRXRCUVZZN1MwRkJaaXhEUVVGd1FqdEZRVVJST3p0cFEwRkhWaXhUUVVGQkxFZEJRVmNzVTBGQlFUdFhRVU5VTEVsQlFVTXNRMEZCUVN4aFFVRmhMRU5CUVVNc1NVRkJaaXhEUVVGdlFpeEpRVUZKTEZOQlFVb3NRMEZCWXp0TlFVRkZMRWxCUVVFc1JVRkJUU3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEUxQlFWQXNRMEZCUVN4RFFVRm5RaXhEUVVGQkxFMUJRVUVzUTBGQmVFSTdTMEZCWkN4RFFVRndRanRGUVVSVE96dHBRMEZIV0N4UFFVRkJMRWRCUVZNc1UwRkJRVHRYUVVOUUxFbEJRVU1zUTBGQlFTeGhRVUZoTEVOQlFVTXNTVUZCWml4RFFVRnZRaXhKUVVGSkxGTkJRVW9zUTBGQll6dE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanRMUVVGa0xFTkJRWEJDTzBWQlJFODdPenM3UjBFNVFuZENMRTlCUVVFc1EwRkJVU3hsUVVGU096dEJRVzFETjBJN096czdPenM3T3p0NVFrRkRTaXhSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTERKQ1FVRlNPenQ1UWtGRFZpeFRRVUZCTEVkQlFWazdPM2xDUVVWYUxFOUJRVUVzUjBGRFJUdEpRVUZCTEZsQlFVRXNSVUZCWXl4elFrRkJaRHM3TzNsQ1FVVkdMRk5CUVVFc1IwRkJWeXhUUVVGQk8wRkJRMVFzVVVGQlFUdEJRVUZCTEZkQlFVOHNSMEZCUVN4SFFVTk1PMDFCUVVFc1VVRkJRU3hGUVVGVkxFVkJRVlk3VFVGRFFTeHJRa0ZCUVN4RlFVRnZRaXhGUVVSd1FqdE5RVWRCTEU5QlFVRXNSVUZEUlR0UlFVRkJMRTlCUVVFc1JVRkRSVHRWUVVGQkxFOUJRVUVzUlVGQlZTd3lRa0ZCVmp0VlFVTkJMRTlCUVVFc1JVRkJWU3hKUVVSV08xTkJSRVk3VVVGSFFTeExRVUZCTEVWQlEwVTdWVUZCUVN4UFFVRkJMRVZCUVZVc2EwTkJRVlk3VlVGRFFTeFBRVUZCTEVWQlFWVXNTVUZFVmp0VFFVcEdPMDlCU2tZN08wVkJSazg3TzNsQ1FXTllMR3RDUVVGQkxFZEJRVzlDTEZOQlFVRTdWMEZCUnl4SlFVRkRMRU5CUVVFc1dVRkJSQ3hEUVVGQk8wVkJRVWc3TzNsQ1FVTndRaXhuUWtGQlFTeEhRVUZyUWl4VFFVRkJPMWRCUVVjc1NVRkJReXhEUVVGQkxGVkJRVVFzUTBGQlFUdEZRVUZJT3p0NVFrRkZiRUlzVVVGQlFTeEhRVUZWTEZOQlFVRTdWMEZEVWl4SlFVRkRMRU5CUVVFc1dVRkJXU3hEUVVGRExFbEJRV1FzUTBGQmJVSXNTVUZCU1N4dlFrRkJTaXhEUVVGNVFqdE5RVUZGTEV0QlFVRXNSVUZCVHl4SlFVRkRMRU5CUVVFc1MwRkJWanRMUVVGNlFpeERRVUZ1UWp0RlFVUlJPenQ1UWtGSFZpeE5RVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVdsQ0xGZEJRV3BDTzBsQlEwRXNZMEZCUVN4RlFVRm5RaXhaUVVSb1FqczdPM2xDUVVkR0xGTkJRVUVzUjBGQlZ5eFRRVUZETEVOQlFVUTdTVUZEVkN4SlFVRkRMRU5CUVVFc1QwRkJSQ3hEUVVGVExHVkJRVlE3U1VGRFFTeEpRVUV3UWl4SlFVRkRMRU5CUVVFc1MwRkJNMEk3UVVGQlFTeGhRVUZQTEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1RVRkJVQ3hEUVVGQkxFVkJRVkE3TzFkQlEwRXNTVUZCUXl4RFFVRkJMRXRCUVVRc1IwRkJVeXhKUVVGSkxFdEJRVW9zUTBGQlZTeFJRVUZSTEVOQlFVTXNZVUZCVkN4RFFVRjFRaXhMUVVGMlFpeERRVUZXTEVWQlFYbERPMDFCUTJoRUxHRkJRVUVzUlVGQlpTeEpRVVJwUXp0TlFVVm9SQ3hWUVVGQkxFVkJRVmtzUjBGR2IwTTdUVUZIYUVRc1lVRkJRU3hGUVVGbExFTkJRVUVzUTBGQlJTeG5Ra0ZCUml4RFFVRnZRaXhEUVVGQkxFTkJRVUVzUTBGSVlUdE5RVWxvUkN4VlFVRkJMRVZCUVZrc1EwRktiME03VFVGTGFFUXNaMEpCUVVFc1JVRkJhMElzU1VGTU9FSTdTMEZCZWtNN1JVRklRVHM3ZVVKQlYxZ3NWVUZCUVN4SFFVRlpMRk5CUVVNc1EwRkJSRHRKUVVOV0xFbEJRVU1zUTBGQlFTeFBRVUZFTEVOQlFWTXNaVUZCVkR0WFFVTkJMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zVDBGQlVDeERRVUZCTzBWQlJsVTdPenM3UjBFeFEyRXNSVUZCUlN4RFFVRkRPenRCUVdkRU9VSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIFNUTFZpZXdlciwgbG9hZFN0bCxcbiAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5sb2FkU3RsID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgYmluYXJ5VmVjdG9yMywgbG9hZEJpbmFyeVN0bCwgbG9hZFRleHRTdGwsIG0ydmVjMywgdG9MaW5lcztcbiAgYmluYXJ5VmVjdG9yMyA9IGZ1bmN0aW9uKHZpZXcsIG9mZnNldCkge1xuICAgIHZhciB2O1xuICAgIHYgPSBuZXcgVEhSRUUuVmVjdG9yMztcbiAgICB2LnggPSB2aWV3LmdldEZsb2F0MzIob2Zmc2V0ICsgMCwgdHJ1ZSk7XG4gICAgdi55ID0gdmlldy5nZXRGbG9hdDMyKG9mZnNldCArIDQsIHRydWUpO1xuICAgIHYueiA9IHZpZXcuZ2V0RmxvYXQzMihvZmZzZXQgKyA4LCB0cnVlKTtcbiAgICByZXR1cm4gdjtcbiAgfTtcbiAgbG9hZEJpbmFyeVN0bCA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgIHZhciBnZW9tLCBpLCBub3JtYWwsIG9mZnNldCwgc2l6ZSwgdmlldztcbiAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgc2l6ZSA9IHZpZXcuZ2V0VWludDMyKDgwLCB0cnVlKTtcbiAgICBnZW9tID0gbmV3IFRIUkVFLkdlb21ldHJ5O1xuICAgIG9mZnNldCA9IDg0O1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgc2l6ZSkge1xuICAgICAgbm9ybWFsID0gYmluYXJ5VmVjdG9yMyh2aWV3LCBvZmZzZXQpO1xuICAgICAgZ2VvbS52ZXJ0aWNlcy5wdXNoKGJpbmFyeVZlY3RvcjModmlldywgb2Zmc2V0ICsgMTIpKTtcbiAgICAgIGdlb20udmVydGljZXMucHVzaChiaW5hcnlWZWN0b3IzKHZpZXcsIG9mZnNldCArIDI0KSk7XG4gICAgICBnZW9tLnZlcnRpY2VzLnB1c2goYmluYXJ5VmVjdG9yMyh2aWV3LCBvZmZzZXQgKyAzNikpO1xuICAgICAgZ2VvbS5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhpICogMywgaSAqIDMgKyAxLCBpICogMyArIDIsIG5vcm1hbCkpO1xuICAgICAgb2Zmc2V0ICs9IDQgKiAzICogNCArIDI7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBnZW9tO1xuICB9O1xuICBtMnZlYzMgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHZhciB2O1xuICAgIHYgPSBuZXcgVEhSRUUuVmVjdG9yMztcbiAgICB2LnggPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgICB2LnkgPSBwYXJzZUZsb2F0KG1hdGNoWzJdKTtcbiAgICB2LnogPSBwYXJzZUZsb2F0KG1hdGNoWzNdKTtcbiAgICByZXR1cm4gdjtcbiAgfTtcbiAgdG9MaW5lcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGgsIGksIGxpbmUsIGxpbmVzO1xuICAgIGxpbmVzID0gW107XG4gICAgaCA9IDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhcnJheS5sZW5ndGgpIHtcbiAgICAgIGlmIChhcnJheVtpXSA9PT0gMTApIHtcbiAgICAgICAgbGluZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYXJyYXkuc3ViYXJyYXkoaCwgaSkpO1xuICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICBoID0gaSArIDE7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIGxpbmVzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBhcnJheS5zdWJhcnJheShoKSkpO1xuICAgIHJldHVybiBsaW5lcztcbiAgfTtcbiAgbG9hZFRleHRTdGwgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICB2YXIgYmFzZSwgZmFjZXRSZWcsIGdlb20sIGluZGV4LCBsaW5lcywgbm9ybWFsLCBzY2FuLCBzY2FuT2ssIHYxLCB2MiwgdjMsIHZlcnRleFJlZztcbiAgICBsaW5lcyA9IHRvTGluZXMobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgaW5kZXggPSAwO1xuICAgIHNjYW4gPSBmdW5jdGlvbihyZWdleHApIHtcbiAgICAgIHZhciByO1xuICAgICAgd2hpbGUgKGxpbmVzW2luZGV4XS5tYXRjaCgvXlxccyokLykpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICAgIHIgPSBsaW5lc1tpbmRleF0ubWF0Y2gocmVnZXhwKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG4gICAgc2Nhbk9rID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHIgPSBzY2FuKHJlZ2V4cCk7XG4gICAgICBpZiAoIXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgdGV4dCBzdGw6ICcgKyByZWdleHAudG9TdHJpbmcoKSArICc9PiAobGluZSAnICsgaW5kZXggLSAxICsgJyknICsgJ1snICsgbGluZXNbaW5kZXggLSAxXSArICddJyk7XG4gICAgICB9XG4gICAgICBpbmRleCsrO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcbiAgICBmYWNldFJlZyA9IC9eXFxzKmZhY2V0XFxzK25vcm1hbFxccysoW15cXHNdKylcXHMrKFteXFxzXSspXFxzKyhbXlxcc10rKS87XG4gICAgdmVydGV4UmVnID0gL15cXHMqdmVydGV4XFxzKyhbXnNdKylcXHMrKFteXFxzXSspXFxzKyhbXlxcc10rKS87XG4gICAgZ2VvbSA9IG5ldyBUSFJFRS5HZW9tZXRyeTtcbiAgICBzY2FuT2soL15cXHMqc29saWRcXHMoLiopLyk7XG4gICAgd2hpbGUgKCFzY2FuKC9eXFxzKmVuZHNvbGlkLykpIHtcbiAgICAgIG5vcm1hbCA9IHNjYW5PayhmYWNldFJlZyk7XG4gICAgICBzY2FuT2soL15cXHMqb3V0ZXJcXHMrbG9vcC8pO1xuICAgICAgdjEgPSBzY2FuT2sodmVydGV4UmVnKTtcbiAgICAgIHYyID0gc2Nhbk9rKHZlcnRleFJlZyk7XG4gICAgICB2MyA9IHNjYW5Payh2ZXJ0ZXhSZWcpO1xuICAgICAgc2Nhbk9rKC9cXHMqZW5kbG9vcC8pO1xuICAgICAgc2Nhbk9rKC9cXHMqZW5kZmFjZXQvKTtcbiAgICAgIGJhc2UgPSBnZW9tLnZlcnRpY2VzLmxlbmd0aDtcbiAgICAgIGdlb20udmVydGljZXMucHVzaChtMnZlYzModjEpKTtcbiAgICAgIGdlb20udmVydGljZXMucHVzaChtMnZlYzModjIpKTtcbiAgICAgIGdlb20udmVydGljZXMucHVzaChtMnZlYzModjMpKTtcbiAgICAgIGdlb20uZmFjZXMucHVzaChuZXcgVEhSRUUuRmFjZTMoYmFzZSwgYmFzZSArIDEsIGJhc2UgKyAyLCBtMnZlYzMobm9ybWFsKSkpO1xuICAgIH1cbiAgICByZXR1cm4gZ2VvbTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgIHZhciBleDtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ2xvYWQgYXMgdGV4dCBzdGwnKTtcbiAgICAgIHJldHVybiBsb2FkVGV4dFN0bChidWZmZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBleCA9IGVycm9yO1xuICAgICAgY29uc29sZS5sb2coZXgpO1xuICAgICAgY29uc29sZS5sb2coJ2xvYWQgYXMgYmluYXJ5IHN0bCcpO1xuICAgICAgcmV0dXJuIGxvYWRCaW5hcnlTdGwoYnVmZmVyKTtcbiAgICB9XG4gIH07XG59KSgpO1xuXG5TVExWaWV3ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoU1RMVmlld2VyLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTVExWaWV3ZXIoKSB7XG4gICAgdGhpcy5idWlsZFNjZW5lID0gYmluZCh0aGlzLmJ1aWxkU2NlbmUsIHRoaXMpO1xuICAgIHRoaXMub3BlbkZpbGUgPSBiaW5kKHRoaXMub3BlbkZpbGUsIHRoaXMpO1xuICAgIHJldHVybiBTVExWaWV3ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTVExWaWV3ZXIucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvc3RsX3ZpZXdlcicpO1xuXG4gIFNUTFZpZXdlci5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Jvdyc7XG5cbiAgU1RMVmlld2VyLnByb3RvdHlwZS51aSA9IHtcbiAgICB2aWV3OiAnW2RhdGEtcmVnaW9uPXN0bC12aWV3ZXJdJ1xuICB9O1xuXG4gIFNUTFZpZXdlci5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdkcmFnb3ZlciBAdWkudmlldyc6ICdvbkRyYWdPdmVyJyxcbiAgICAnZHJvcCBAdWkudmlldyc6ICdvbkRyb3AnXG4gIH07XG5cbiAgU1RMVmlld2VyLnByb3RvdHlwZS5vbkRyYWdPdmVyID0gZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIgPSAnY29weSc7XG4gIH07XG5cbiAgU1RMVmlld2VyLnByb3RvdHlwZS5vbkRyb3AgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGZpbGU7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZmlsZSA9IGUub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXNbMF07XG4gICAgdGhpcy5vcGVuRmlsZShmaWxlKTtcbiAgfTtcblxuICBTVExWaWV3ZXIucHJvdG90eXBlLm9uUmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVybDtcbiAgICBzZXRUaW1lb3V0KHRoaXMuYnVpbGRTY2VuZSwgMTApO1xuICAgIHVybCA9IHRoaXMubW9kZWwuZ2V0KCd2aWV3cycpLnN0bDtcbiAgICBjb25zb2xlLmxvZyh1cmwpO1xuICAgIHJldHVybiBCYWNrYm9uZS5SYWRpby5jaGFubmVsKCdiYWNrZ3JvdW5kJykucmVxdWVzdCgnZmlsZScsIHVybCkudGhlbigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzdGxCdWZmZXIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciwgZ2VvbSwgdG9BcnJheUJ1ZmZlcjtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZFVENIRUQgRklMRSEnKTtcbiAgICAgICAgY29uc29sZS5sb2coc3RsQnVmZmVyKTtcbiAgICAgICAgdG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKGJ1Zikge1xuICAgICAgICAgIHZhciBhYiwgaSwgdmlldztcbiAgICAgICAgICBhYiA9IG5ldyBBcnJheUJ1ZmZlcihidWYubGVuZ3RoKTtcbiAgICAgICAgICB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYWIpO1xuICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgIHdoaWxlIChpIDwgYnVmLmxlbmd0aCkge1xuICAgICAgICAgICAgdmlld1tpXSA9IGJ1ZltpXTtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFiO1xuICAgICAgICB9O1xuICAgICAgICBidWZmZXIgPSB0b0FycmF5QnVmZmVyKHN0bEJ1ZmZlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBUlJBWSBCVUZGRVInKTtcbiAgICAgICAgY29uc29sZS5sb2coYnVmZmVyKTtcbiAgICAgICAgZ2VvbSA9IGxvYWRTVEwoYnVmZmVyKTtcbiAgICAgICAgX3RoaXMuc2NlbmUucmVtb3ZlKF90aGlzLmN1cnJlbnRPYmopO1xuICAgICAgICBfdGhpcy5jdXJyZW50T2JqID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgX3RoaXMubWF0ZXJpYWwpO1xuICAgICAgICByZXR1cm4gX3RoaXMuc2NlbmUuYWRkKF90aGlzLmN1cnJlbnRPYmopO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgU1RMVmlld2VyLnByb3RvdHlwZS5vcGVuRmlsZSA9IGZ1bmN0aW9uKHN0bEJ1ZmZlcikge1xuICAgIHZhciBvbkxvYWQsIHJlYWRlcjtcbiAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIG9uTG9hZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciwgZ2VvbTtcbiAgICAgICAgYnVmZmVyID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICBnZW9tID0gbG9hZFNUTChidWZmZXIpO1xuICAgICAgICBfdGhpcy5zY2VuZS5yZW1vdmUoX3RoaXMuY3VycmVudE9iaik7XG4gICAgICAgIF90aGlzLmN1cnJlbnRPYmogPSBuZXcgVEhSRUUuTWVzaChnZW9tLCBfdGhpcy5tYXRlcmlhbCk7XG4gICAgICAgIF90aGlzLnNjZW5lLmFkZChfdGhpcy5jdXJyZW50T2JqKTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvbkxvYWQsIGZhbHNlKTtcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoc3RsQnVmZmVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBTVExWaWV3ZXIucHJvdG90eXBlLnNjZW5lQ29uZmlnID0ge1xuICAgIHNpemU6IHtcbiAgICAgIHdpZHRoOiA4MDAsXG4gICAgICBoZWlnaHQ6IDgwMFxuICAgIH0sXG4gICAgY2FtZXJhOiB7XG4gICAgICBwb3M6IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgejogODBcbiAgICAgIH1cbiAgICB9LFxuICAgIGxpZ2h0czogW1xuICAgICAge1xuICAgICAgICBjb2xvcjogMHhmZmZmZmYsXG4gICAgICAgIHBvczoge1xuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMTAwLFxuICAgICAgICAgIHo6IDEwMFxuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgICAgcG9zOiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAtMTAwLFxuICAgICAgICAgIHo6IC0xMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF0sXG4gICAgbWF0ZXJpYWw6IHtcbiAgICAgIGNvbG9yOiAweDAwOTE5OSxcbiAgICAgIHNwZWN1bGFyOiAweDAzMDMwM1xuICAgIH1cbiAgfTtcblxuICBTVExWaWV3ZXIucHJvdG90eXBlLmJ1aWxkU2NlbmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FtZXJhLCBjb250cm9scywgaiwgbCwgbGVuLCBsaWdodCwgbG9vcGVyLCBwb3MsIHJhdGlvLCByZWYsIHJlbmRlcmVyLCB2aWV3O1xuICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcbiAgICByZW5kZXJlci5zZXRTaXplKHRoaXMuc2NlbmVDb25maWcuc2l6ZS53aWR0aCwgdGhpcy5zY2VuZUNvbmZpZy5zaXplLmhlaWdodCk7XG4gICAgdmlldyA9IHRoaXMudWkudmlld1swXTtcbiAgICB2aWV3LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgIHJhdGlvID0gdGhpcy5zY2VuZUNvbmZpZy5zaXplLndpZHRoIC8gdGhpcy5zY2VuZUNvbmZpZy5zaXplLmhlaWdodDtcbiAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIHJhdGlvLCAxLCAxMDAwKTtcbiAgICBwb3MgPSB0aGlzLnNjZW5lQ29uZmlnLmNhbWVyYS5wb3M7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnNldChwb3MueCwgcG9zLnksIHBvcy56KTtcbiAgICBjb250cm9scyA9IG5ldyBUSFJFRS5PcmJpdENvbnRyb2xzKGNhbWVyYSwgdmlldyk7XG4gICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZTtcbiAgICB0aGlzLnNjZW5lLmFkZChuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NjY2NjY2KSk7XG4gICAgcmVmID0gdGhpcy5zY2VuZUNvbmZpZy5saWdodHM7XG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICBsID0gcmVmW2pdO1xuICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodChsLmNvbG9yKTtcbiAgICAgIGxpZ2h0LnBvc2l0aW9uLnNldChsLnBvcy54LCBsLnBvcy55LCBsLnBvcy56KTtcbiAgICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh0aGlzLnNjZW5lQ29uZmlnLm1hdGVyaWFsKTtcbiAgICB0aGlzLmN1cnJlbnRPYmogPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuR2VvbWV0cnksIHRoaXMubWF0ZXJpYWwpO1xuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuY3VycmVudE9iaik7XG4gICAgbG9vcGVyID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wZXIpO1xuICAgICAgICBjb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgcmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyKF90aGlzLnNjZW5lLCBjYW1lcmEpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICBsb29wZXIoKTtcbiAgfTtcblxuICByZXR1cm4gU1RMVmlld2VyO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTVExWaWV3ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5emRHeFdhV1YzWlhJdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM05sWVhKamFDOW1ZV05sZEhObFlYSmphQzkyYVdWM2N5OXpkR3hXYVdWM1pYSXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVZEJMRWxCUVVFc2EwSkJRVUU3UlVGQlFUczdPenRCUVVGQkxFOUJRVUVzUjBGQllTeERRVUZCTEZOQlFVRTdRVUZGV0N4TlFVRkJPMFZCUVVFc1lVRkJRU3hIUVVGblFpeFRRVUZETEVsQlFVUXNSVUZCVHl4TlFVRlFPMEZCUTJRc1VVRkJRVHRKUVVGQkxFTkJRVUVzUjBGQlNTeEpRVUZMTEV0QlFVc3NRMEZCUXp0SlFVTm1MRU5CUVVNc1EwRkJReXhEUVVGR0xFZEJRVTBzU1VGQlNTeERRVUZETEZWQlFVd3NRMEZCWjBJc1RVRkJRU3hIUVVGVExFTkJRWHBDTEVWQlFUUkNMRWxCUVRWQ08wbEJRMDRzUTBGQlF5eERRVUZETEVOQlFVWXNSMEZCVFN4SlFVRkpMRU5CUVVNc1ZVRkJUQ3hEUVVGblFpeE5RVUZCTEVkQlFWTXNRMEZCZWtJc1JVRkJORUlzU1VGQk5VSTdTVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJSaXhIUVVGTkxFbEJRVWtzUTBGQlF5eFZRVUZNTEVOQlFXZENMRTFCUVVFc1IwRkJVeXhEUVVGNlFpeEZRVUUwUWl4SlFVRTFRanRYUVVOT08wVkJUR003UlVGUGFFSXNZVUZCUVN4SFFVRm5RaXhUUVVGRExFMUJRVVE3UVVGRlpDeFJRVUZCTzBsQlFVRXNTVUZCUVN4SFFVRlBMRWxCUVVrc1VVRkJTaXhEUVVGaExFMUJRV0k3U1VGRFVDeEpRVUZCTEVkQlFVOHNTVUZCU1N4RFFVRkRMRk5CUVV3c1EwRkJaU3hGUVVGbUxFVkJRVzFDTEVsQlFXNUNPMGxCUTFBc1NVRkJRU3hIUVVGUExFbEJRVXNzUzBGQlN5eERRVUZETzBsQlEyeENMRTFCUVVFc1IwRkJVenRKUVVOVUxFTkJRVUVzUjBGQlNUdEJRVU5LTEZkQlFVMHNRMEZCUVN4SFFVRkpMRWxCUVZZN1RVRkRSU3hOUVVGQkxFZEJRVk1zWVVGQlFTeERRVUZqTEVsQlFXUXNSVUZCYjBJc1RVRkJjRUk3VFVGRFZDeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVdRc1EwRkJiVUlzWVVGQlFTeERRVUZqTEVsQlFXUXNSVUZCYjBJc1RVRkJRU3hIUVVGVExFVkJRVGRDTEVOQlFXNUNPMDFCUTBFc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZrTEVOQlFXMUNMR0ZCUVVFc1EwRkJZeXhKUVVGa0xFVkJRVzlDTEUxQlFVRXNSMEZCVXl4RlFVRTNRaXhEUVVGdVFqdE5RVU5CTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJaQ3hEUVVGdFFpeGhRVUZCTEVOQlFXTXNTVUZCWkN4RlFVRnZRaXhOUVVGQkxFZEJRVk1zUlVGQk4wSXNRMEZCYmtJN1RVRkRRU3hKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFWZ3NRMEZCWjBJc1NVRkJTeXhMUVVGTExFTkJRVU1zUzBGQldDeERRVUZyUWl4RFFVRkJMRWRCUVVrc1EwRkJkRUlzUlVGQmVVSXNRMEZCUVN4SFFVRkpMRU5CUVVvc1IwRkJVU3hEUVVGcVF5eEZRVUZ2UXl4RFFVRkJMRWRCUVVrc1EwRkJTaXhIUVVGUkxFTkJRVFZETEVWQlFTdERMRTFCUVM5RExFTkJRV2hDTzAxQlEwRXNUVUZCUVN4SlFVRlZMRU5CUVVFc1IwRkJTU3hEUVVGS0xFZEJRVkVzUTBGQlVpeEhRVUZaTzAxQlEzUkNMRU5CUVVFN1NVRlFSanRYUVZGQk8wVkJabU03UlVGcFFtaENMRTFCUVVFc1IwRkJVeXhUUVVGRExFdEJRVVE3UVVGRFVDeFJRVUZCTzBsQlFVRXNRMEZCUVN4SFFVRkpMRWxCUVVzc1MwRkJTeXhEUVVGRE8wbEJRMllzUTBGQlF5eERRVUZETEVOQlFVWXNSMEZCVFN4VlFVRkJMRU5CUVZjc1MwRkJUU3hEUVVGQkxFTkJRVUVzUTBGQmFrSTdTVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJSaXhIUVVGTkxGVkJRVUVzUTBGQlZ5eExRVUZOTEVOQlFVRXNRMEZCUVN4RFFVRnFRanRKUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZHTEVkQlFVMHNWVUZCUVN4RFFVRlhMRXRCUVUwc1EwRkJRU3hEUVVGQkxFTkJRV3BDTzFkQlEwNDdSVUZNVHp0RlFVOVVMRTlCUVVFc1IwRkJWU3hUUVVGRExFdEJRVVE3UVVGRFVpeFJRVUZCTzBsQlFVRXNTMEZCUVN4SFFVRlJPMGxCUTFJc1EwRkJRU3hIUVVGSk8wbEJRMG9zUTBGQlFTeEhRVUZKTzBGQlEwb3NWMEZCVFN4RFFVRkJMRWRCUVVrc1MwRkJTeXhEUVVGRExFMUJRV2hDTzAxQlEwVXNTVUZCUnl4TFFVRk5MRU5CUVVFc1EwRkJRU3hEUVVGT0xFdEJRVmtzUlVGQlpqdFJRVU5GTEVsQlFVRXNSMEZCVHl4TlFVRk5MRU5CUVVNc1dVRkJXU3hEUVVGRExFdEJRWEJDTEVOQlFUQkNMRWxCUVRGQ0xFVkJRV2RETEV0QlFVc3NRMEZCUXl4UlFVRk9MRU5CUVdVc1EwRkJaaXhGUVVGclFpeERRVUZzUWl4RFFVRm9RenRSUVVOUUxFdEJRVXNzUTBGQlF5eEpRVUZPTEVOQlFWY3NTVUZCV0R0UlFVTkJMRU5CUVVFc1IwRkJTU3hEUVVGQkxFZEJRVWtzUlVGSVZqczdUVUZKUVN4RFFVRkJPMGxCVEVZN1NVRk5RU3hMUVVGTExFTkJRVU1zU1VGQlRpeERRVUZYTEUxQlFVMHNRMEZCUXl4WlFVRlpMRU5CUVVNc1MwRkJjRUlzUTBGQk1FSXNTVUZCTVVJc1JVRkJaME1zUzBGQlN5eERRVUZETEZGQlFVNHNRMEZCWlN4RFFVRm1MRU5CUVdoRExFTkJRVmc3VjBGRFFUdEZRVmhSTzBWQllWWXNWMEZCUVN4SFFVRmpMRk5CUVVNc1RVRkJSRHRCUVVOYUxGRkJRVUU3U1VGQlFTeExRVUZCTEVkQlFWRXNUMEZCUVN4RFFVRlJMRWxCUVVrc1ZVRkJTaXhEUVVGbExFMUJRV1lzUTBGQlVqdEpRVU5TTEV0QlFVRXNSMEZCVVR0SlFVVlNMRWxCUVVFc1IwRkJUeXhUUVVGRExFMUJRVVE3UVVGRFRDeFZRVUZCTzBGQlFVRXNZVUZCVFN4TFFVRk5MRU5CUVVFc1MwRkJRU3hEUVVGTkxFTkJRVU1zUzBGQllpeERRVUZ0UWl4UFFVRnVRaXhEUVVGT08xRkJRMFVzUzBGQlFUdE5RVVJHTzAxQlJVRXNRMEZCUVN4SFFVRkpMRXRCUVUwc1EwRkJRU3hMUVVGQkxFTkJRVTBzUTBGQlF5eExRVUZpTEVOQlFXMUNMRTFCUVc1Q08yRkJRMG83U1VGS1N6dEpRVTFRTEUxQlFVRXNSMEZCVXl4VFFVRkRMRTFCUVVRN1FVRkRVQ3hWUVVGQk8wMUJRVUVzUTBGQlFTeEhRVUZKTEVsQlFVRXNRMEZCU3l4TlFVRk1PMDFCUTBvc1NVRkJSeXhEUVVGRExFTkJRVW83UVVGRFJTeGpRVUZOTEVsQlFVa3NTMEZCU2l4RFFVRlZMR2RDUVVGQkxFZEJRVzFDTEUxQlFVMHNRMEZCUXl4UlFVRlFMRU5CUVVFc1EwRkJia0lzUjBGQmRVTXNWMEZCZGtNc1IwRkJjVVFzUzBGQmNrUXNSMEZCTmtRc1EwRkJOMFFzUjBGQmFVVXNSMEZCYWtVc1IwRkJkVVVzUjBGQmRrVXNSMEZCTmtVc1MwRkJUU3hEUVVGQkxFdEJRVUVzUjBGQlVTeERRVUZTTEVOQlFXNUdMRWRCUVdkSExFZEJRVEZITEVWQlJGSTdPMDFCUlVFc1MwRkJRVHRoUVVOQk8wbEJURTg3U1VGUFZDeFJRVUZCTEVkQlFWYzdTVUZEV0N4VFFVRkJMRWRCUVZrN1NVRkRXaXhKUVVGQkxFZEJRVThzU1VGQlN5eExRVUZMTEVOQlFVTTdTVUZEYkVJc1RVRkJRU3hEUVVGUExHbENRVUZRTzBGQlEwRXNWMEZCVFN4RFFVRkRMRWxCUVVFc1EwRkJTeXhqUVVGTUxFTkJRVkE3VFVGRFJTeE5RVUZCTEVkQlFWTXNUVUZCUVN4RFFVRlBMRkZCUVZBN1RVRkRWQ3hOUVVGQkxFTkJRVThzYTBKQlFWQTdUVUZEUVN4RlFVRkJMRWRCUVVzc1RVRkJRU3hEUVVGUExGTkJRVkE3VFVGRFRDeEZRVUZCTEVkQlFVc3NUVUZCUVN4RFFVRlBMRk5CUVZBN1RVRkRUQ3hGUVVGQkxFZEJRVXNzVFVGQlFTeERRVUZQTEZOQlFWQTdUVUZEVEN4TlFVRkJMRU5CUVU4c1dVRkJVRHROUVVOQkxFMUJRVUVzUTBGQlR5eGhRVUZRTzAxQlEwRXNTVUZCUVN4SFFVRlBMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU03VFVGRGNrSXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGa0xFTkJRVzFDTEUxQlFVRXNRMEZCVHl4RlFVRlFMRU5CUVc1Q08wMUJRMEVzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRmtMRU5CUVcxQ0xFMUJRVUVzUTBGQlR5eEZRVUZRTEVOQlFXNUNPMDFCUTBFc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZrTEVOQlFXMUNMRTFCUVVFc1EwRkJUeXhGUVVGUUxFTkJRVzVDTzAxQlEwRXNTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGWUxFTkJRV2RDTEVsQlFVc3NTMEZCU3l4RFFVRkRMRXRCUVZnc1EwRkJhMElzU1VGQmJFSXNSVUZCZDBJc1NVRkJRU3hIUVVGUExFTkJRUzlDTEVWQlFXdERMRWxCUVVFc1IwRkJUeXhEUVVGNlF5eEZRVUUwUXl4TlFVRkJMRU5CUVU4c1RVRkJVQ3hEUVVFMVF5eERRVUZvUWp0SlFWcEdPMWRCWVVFN1JVRnNRMWs3VTBGdlEyUXNVMEZCUXl4TlFVRkVPMEZCUTBVc1VVRkJRVHRCUVVGQk8wMUJRMFVzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4clFrRkJXanRCUVVOQkxHRkJRVThzVjBGQlFTeERRVUZaTEUxQlFWb3NSVUZHVkR0TFFVRkJMR0ZCUVVFN1RVRkhUVHROUVVOS0xFOUJRVThzUTBGQlF5eEhRVUZTTEVOQlFWa3NSVUZCV2p0TlFVTkJMRTlCUVU4c1EwRkJReXhIUVVGU0xFTkJRVmtzYjBKQlFWbzdRVUZEUVN4aFFVRlBMR0ZCUVVFc1EwRkJZeXhOUVVGa0xFVkJUbFE3TzBWQlJFWTdRVUZzUmxjc1EwRkJRU3hEUVVGSUxFTkJRVUU3TzBGQmFVZEtPenM3T3pzN096czdjMEpCUTBvc1VVRkJRU3hIUVVGVkxFOUJRVUVzUTBGQlVTeDNRa0ZCVWpzN2MwSkJRMVlzVTBGQlFTeEhRVUZYT3p0elFrRkZXQ3hGUVVGQkxFZEJRMFU3U1VGQlFTeEpRVUZCTEVWQlFWRXNNRUpCUVZJN096dHpRa0ZGUml4TlFVRkJMRWRCUTBVN1NVRkJRU3h0UWtGQlFTeEZRVUZ6UWl4WlFVRjBRanRKUVVOQkxHVkJRVUVzUlVGQmMwSXNVVUZFZEVJN096dHpRa0ZOUml4VlFVRkJMRWRCUVZrc1UwRkJReXhEUVVGRU8wbEJRMVlzUTBGQlF5eERRVUZETEdWQlFVWXNRMEZCUVR0SlFVTkJMRU5CUVVNc1EwRkJReXhqUVVGR0xFTkJRVUU3U1VGRFFTeERRVUZETEVOQlFVTXNZVUZCWVN4RFFVRkRMRmxCUVdoQ0xFZEJRU3RDTzBWQlNISkNPenR6UWtGTldpeE5RVUZCTEVkQlFWRXNVMEZCUXl4RFFVRkVPMEZCUTA0c1VVRkJRVHRKUVVGQkxFTkJRVU1zUTBGQlF5eGxRVUZHTEVOQlFVRTdTVUZEUVN4RFFVRkRMRU5CUVVNc1kwRkJSaXhEUVVGQk8wbEJRMEVzU1VGQlFTeEhRVUZQTEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1dVRkJXU3hEUVVGRExFdEJRVTBzUTBGQlFTeERRVUZCTzBsQlF6RkRMRWxCUVVNc1EwRkJRU3hSUVVGRUxFTkJRVlVzU1VGQlZqdEZRVXBOT3p0elFrRlJVaXhSUVVGQkxFZEJRVlVzVTBGQlFUdEJRVU5TTEZGQlFVRTdTVUZCUVN4VlFVRkJMRU5CUVZrc1NVRkJReXhEUVVGQkxGVkJRV0lzUlVGQmVVSXNSVUZCZWtJN1NVRkZRU3hIUVVGQkxFZEJRVTBzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1QwRkJXQ3hEUVVGdFFpeERRVUZETzBsQlJURkNMRTlCUVU4c1EwRkJReXhIUVVGU0xFTkJRVmtzUjBGQldqdFhRVVZCTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJaaXhEUVVGMVFpeFpRVUYyUWl4RFFVRnZReXhEUVVGRExFOUJRWEpETEVOQlFUWkRMRTFCUVRkRExFVkJRWEZFTEVkQlFYSkVMRU5CUTBFc1EwRkJReXhKUVVSRUxFTkJRMDBzUTBGQlFTeFRRVUZCTEV0QlFVRTdZVUZCUVN4VFFVRkRMRk5CUVVRN1FVRkRTaXhaUVVGQk8xRkJRVUVzVDBGQlR5eERRVUZETEVkQlFWSXNRMEZCV1N4bFFVRmFPMUZCUTBFc1QwRkJUeXhEUVVGRExFZEJRVklzUTBGQldTeFRRVUZhTzFGQlIwRXNZVUZCUVN4SFFVRm5RaXhUUVVGRExFZEJRVVE3UVVGRFpDeGpRVUZCTzFWQlFVRXNSVUZCUVN4SFFVRkxMRWxCUVVrc1YwRkJTaXhEUVVGblFpeEhRVUZITEVOQlFVTXNUVUZCY0VJN1ZVRkRUQ3hKUVVGQkxFZEJRVThzU1VGQlNTeFZRVUZLTEVOQlFXVXNSVUZCWmp0VlFVTlFMRU5CUVVFc1IwRkJTVHRCUVVOS0xHbENRVUZOTEVOQlFVRXNSMEZCU1N4SFFVRkhMRU5CUVVNc1RVRkJaRHRaUVVORkxFbEJRVXNzUTBGQlFTeERRVUZCTEVOQlFVd3NSMEZCVlN4SFFVRkpMRU5CUVVFc1EwRkJRVHRaUVVOa0xFVkJRVVU3VlVGR1NqdHBRa0ZIUVR0UlFWQmpPMUZCVTJoQ0xFMUJRVUVzUjBGQlV5eGhRVUZCTEVOQlFXTXNVMEZCWkR0UlFVVlVMRTlCUVU4c1EwRkJReXhIUVVGU0xFTkJRVmtzWTBGQldqdFJRVU5CTEU5QlFVOHNRMEZCUXl4SFFVRlNMRU5CUVZrc1RVRkJXanRSUVVWQkxFbEJRVUVzUjBGQlR5eFBRVUZCTEVOQlFWRXNUVUZCVWp0UlFVZFFMRXRCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zVFVGQlVDeERRVUZqTEV0QlFVTXNRMEZCUVN4VlFVRm1PMUZCUTBFc1MwRkJReXhEUVVGQkxGVkJRVVFzUjBGQll5eEpRVUZMTEV0QlFVc3NRMEZCUXl4SlFVRllMRU5CUVdsQ0xFbEJRV3BDTEVWQlFYVkNMRXRCUVVNc1EwRkJRU3hSUVVGNFFqdGxRVU5rTEV0QlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1IwRkJVQ3hEUVVGWExFdEJRVU1zUTBGQlFTeFZRVUZhTzAxQmVFSkpPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVVJPTzBWQlVGRTdPM05DUVc5RFZpeFJRVUZCTEVkQlFWVXNVMEZCUXl4VFFVRkVPMEZCUlZJc1VVRkJRVHRKUVVGQkxFMUJRVUVzUjBGQlV5eEpRVUZKTEZWQlFVb3NRMEZCUVR0SlFVZFVMRTFCUVVFc1IwRkJVeXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNRMEZCUkR0QlFVTlFMRmxCUVVFN1VVRkJRU3hOUVVGQkxFZEJRVk1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXp0UlFVTnNRaXhKUVVGQkxFZEJRVThzVDBGQlFTeERRVUZSTEUxQlFWSTdVVUZIVUN4TFFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFMUJRVkFzUTBGQll5eExRVUZETEVOQlFVRXNWVUZCWmp0UlFVTkJMRXRCUVVNc1EwRkJRU3hWUVVGRUxFZEJRV01zU1VGQlN5eExRVUZMTEVOQlFVTXNTVUZCV0N4RFFVRnBRaXhKUVVGcVFpeEZRVUYxUWl4TFFVRkRMRU5CUVVFc1VVRkJlRUk3VVVGRFpDeExRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRWRCUVZBc1EwRkJWeXhMUVVGRExFTkJRVUVzVlVGQldqdE5RVkJQTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRVHRKUVZkVUxFMUJRVTBzUTBGQlF5eG5Ra0ZCVUN4RFFVRjNRaXhOUVVGNFFpeEZRVUZuUXl4TlFVRm9ReXhGUVVGM1F5eExRVUY0UXp0SlFVZEJMRTFCUVUwc1EwRkJReXhwUWtGQlVDeERRVUY1UWl4VFFVRjZRanRCUVVOQkxGZEJRVTg3UlVGd1FrTTdPM05DUVhWQ1ZpeFhRVUZCTEVkQlJVVTdTVUZCUVN4SlFVRkJMRVZCUTBVN1RVRkJRU3hMUVVGQkxFVkJRVkVzUjBGQlVqdE5RVU5CTEUxQlFVRXNSVUZCVVN4SFFVUlNPMHRCUkVZN1NVRkpRU3hOUVVGQkxFVkJRMFU3VFVGQlFTeEhRVUZCTEVWQlEwVTdVVUZCUVN4RFFVRkJMRVZCUVVjc1EwRkJTRHRSUVVOQkxFTkJRVUVzUlVGQlJ5eERRVVJJTzFGQlJVRXNRMEZCUVN4RlFVRkhMRVZCUmtnN1QwRkVSanRMUVV4R08wbEJWMEVzVFVGQlFTeEZRVUZSTzAxQlEwbzdVVUZCUVN4TFFVRkJMRVZCUVU4c1VVRkJVRHRSUVVOQkxFZEJRVUVzUlVGRFJUdFZRVUZCTEVOQlFVRXNSVUZCUnl4RFFVRklPMVZCUTBFc1EwRkJRU3hGUVVGSExFZEJSRWc3VlVGRlFTeERRVUZCTEVWQlFVY3NSMEZHU0R0VFFVWkdPMDlCUkVrc1JVRlBTanRSUVVGQkxFdEJRVUVzUlVGQlR5eFJRVUZRTzFGQlEwRXNSMEZCUVN4RlFVTkZPMVZCUVVFc1EwRkJRU3hGUVVGSExFTkJRVWc3VlVGRFFTeERRVUZCTEVWQlFVY3NRMEZCUXl4SFFVUktPMVZCUlVFc1EwRkJRU3hGUVVGSExFTkJRVU1zUjBGR1NqdFRRVVpHTzA5QlVFazdTMEZZVWp0SlFUQkNRU3hSUVVGQkxFVkJRMFU3VFVGQlFTeExRVUZCTEVWQlFWVXNVVUZCVmp0TlFVTkJMRkZCUVVFc1JVRkJWU3hSUVVSV08wdEJNMEpHT3pzN2MwSkJLMEpHTEZWQlFVRXNSMEZCV1N4VFFVRkJPMEZCUjFZc1VVRkJRVHRKUVVGQkxGRkJRVUVzUjBGQlZ5eEpRVUZKTEV0QlFVc3NRMEZCUXl4aFFVRldMRU5CUVVFN1NVRkRXQ3hSUVVGUkxFTkJRVU1zVDBGQlZDeERRVUZwUWl4SlFVRkRMRU5CUVVFc1YwRkJWeXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZ1UXl4RlFVRXdReXhKUVVGRExFTkJRVUVzVjBGQlZ5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRTFSRHRKUVVkQkxFbEJRVUVzUjBGQlR5eEpRVUZETEVOQlFVRXNSVUZCUlN4RFFVRkRMRWxCUVVzc1EwRkJRU3hEUVVGQk8wbEJRMmhDTEVsQlFVa3NRMEZCUXl4WFFVRk1MRU5CUVdsQ0xGRkJRVkVzUTBGQlF5eFZRVUV4UWp0SlFVZEJMRXRCUVVFc1IwRkJVeXhKUVVGRExFTkJRVUVzVjBGQlZ5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRnNRaXhIUVVFd1FpeEpRVUZETEVOQlFVRXNWMEZCVnl4RFFVRkRMRWxCUVVrc1EwRkJRenRKUVVOeVJDeE5RVUZCTEVkQlFWTXNTVUZCU3l4TFFVRkxMRU5CUVVNc2FVSkJRVmdzUTBGQk9FSXNSVUZCT1VJc1JVRkJhME1zUzBGQmJFTXNSVUZCZVVNc1EwRkJla01zUlVGQk5FTXNTVUZCTlVNN1NVRkRWQ3hIUVVGQkxFZEJRVTBzU1VGQlF5eERRVUZCTEZkQlFWY3NRMEZCUXl4TlFVRk5MRU5CUVVNN1NVRkRNVUlzVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4SFFVRm9RaXhEUVVGdlFpeEhRVUZITEVOQlFVTXNRMEZCZUVJc1JVRkJNa0lzUjBGQlJ5eERRVUZETEVOQlFTOUNMRVZCUVd0RExFZEJRVWNzUTBGQlF5eERRVUYwUXp0SlFVdEJMRkZCUVVFc1IwRkJWeXhKUVVGTExFdEJRVXNzUTBGQlF5eGhRVUZZTEVOQlFUQkNMRTFCUVRGQ0xFVkJRV3RETEVsQlFXeERPMGxCUjFnc1NVRkJReXhEUVVGQkxFdEJRVVFzUjBGQlV5eEpRVUZMTEV0QlFVc3NRMEZCUXp0SlFVTndRaXhKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4SlFVRkxMRXRCUVVzc1EwRkJReXhaUVVGWUxFTkJRWGxDTEZGQlFYcENMRU5CUVZnN1FVRkhRVHRCUVVGQkxGTkJRVUVzY1VOQlFVRTdPMDFCUTBVc1MwRkJRU3hIUVVGUkxFbEJRVXNzUzBGQlN5eERRVUZETEdkQ1FVRllMRU5CUVRaQ0xFTkJRVU1zUTBGQlF5eExRVUV2UWp0TlFVTlNMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zUjBGQlppeERRVUZ0UWl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRWHBDTEVWQlFUUkNMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQmJFTXNSVUZCY1VNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUV6UXp0TlFVTkJMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUjBGQlVDeERRVUZYTEV0QlFWZzdRVUZJUmp0SlFVMUJMRWxCUVVNc1EwRkJRU3hSUVVGRUxFZEJRVmtzU1VGQlN5eExRVUZMTEVOQlFVTXNhVUpCUVZnc1EwRkJPRUlzU1VGQlF5eERRVUZCTEZkQlFWY3NRMEZCUXl4UlFVRXpRenRKUVVkYUxFbEJRVU1zUTBGQlFTeFZRVUZFTEVkQlFXTXNTVUZCU3l4TFFVRkxMRU5CUVVNc1NVRkJXQ3hEUVVGcFFpeEpRVUZMTEV0QlFVc3NRMEZCUXl4UlFVRTFRaXhGUVVGMVF5eEpRVUZETEVOQlFVRXNVVUZCZUVNN1NVRkRaQ3hKUVVGRExFTkJRVUVzUzBGQlN5eERRVUZETEVkQlFWQXNRMEZCVnl4SlFVRkRMRU5CUVVFc1ZVRkJXanRKUVVkQkxFMUJRVUVzUjBGQlV5eERRVUZCTEZOQlFVRXNTMEZCUVR0aFFVRkJMRk5CUVVFN1VVRkRVQ3h4UWtGQlFTeERRVUZ6UWl4TlFVRjBRanRSUVVOQkxGRkJRVkVzUTBGQlF5eE5RVUZVTEVOQlFVRTdVVUZEUVN4UlFVRlJMRU5CUVVNc1MwRkJWQ3hEUVVGQk8xRkJRMEVzVVVGQlVTeERRVUZETEUxQlFWUXNRMEZCWjBJc1MwRkJReXhEUVVGQkxFdEJRV3BDTEVWQlFYZENMRTFCUVhoQ08wMUJTazg3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJPMGxCVVZRc1RVRkJRU3hEUVVGQk8wVkJMME5WT3pzN08wZEJlRWhWTEVWQlFVVXNRMEZCUXpzN1FVRTRTek5DTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBSZWNvcmRUYWJsZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblJlY29yZFRhYmxlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFJlY29yZFRhYmxlLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBSZWNvcmRUYWJsZSgpIHtcbiAgICByZXR1cm4gUmVjb3JkVGFibGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBSZWNvcmRUYWJsZS5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy90YWJsZScpO1xuXG4gIFJlY29yZFRhYmxlLnByb3RvdHlwZS50YWdOYW1lID0gJ3RhYmxlJztcblxuICBSZWNvcmRUYWJsZS5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3RhYmxlIHRhYmxlLXJlc3BvbnNpdmUgYXR0ci10YWJsZSc7XG5cbiAgUmVjb3JkVGFibGUucHJvdG90eXBlLnVpID0ge1xuICAgIHRvZ2dsZUFnZ3JlZ2F0ZXM6ICdbZGF0YS1jbGljaz10b2dnbGUtYWdnZWdhdGVzXSdcbiAgfTtcblxuICBSZWNvcmRUYWJsZS5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayBAdWkudG9nZ2xlQWdncmVnYXRlcyc6ICd0b2dnbGVBZ2dyZWdhdGVzJ1xuICB9O1xuXG4gIFJlY29yZFRhYmxlLnByb3RvdHlwZS5hZ2dyZWdhdGVzU2hvd24gPSBmYWxzZTtcblxuICBSZWNvcmRUYWJsZS5wcm90b3R5cGUudG9nZ2xlQWdncmVnYXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmFnZ3JlZ2F0ZXNTaG93bikge1xuICAgICAgdGhpcy51aS50b2dnbGVBZ2dyZWdhdGVzLnRleHQoJ1Nob3cgRWxlbWVudHMnKTtcbiAgICAgIHRoaXMuJCgnW2RhdGEtdG9nZ2xlPWFnZ3JlZ2F0ZXNdJykuaGlkZSgpO1xuICAgICAgcmV0dXJuIHRoaXMuYWdncmVnYXRlc1Nob3duID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudWkudG9nZ2xlQWdncmVnYXRlcy50ZXh0KCdIaWRlIEVsZW1lbnRzJyk7XG4gICAgICB0aGlzLiQoJ1tkYXRhLXRvZ2dsZT1hZ2dyZWdhdGVzXScpLnNob3coKTtcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0ZXNTaG93biA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBSZWNvcmRUYWJsZTtcblxufSkoTW4uTGF5b3V0Vmlldyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVjb3JkVGFibGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dllYQndMMk52Wm1abFpTOXRiMlIxYkdWekwzTmxZWEpqYUM5bVlXTmxkSE5sWVhKamFDOTJhV1YzY3k5MFlXSnNaUzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5aGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdmMyVmhjbU5vTDJaaFkyVjBjMlZoY21Ob0wzWnBaWGR6TDNSaFlteGxMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxGZEJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3ZDBKQlEwb3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3h0UWtGQlVqczdkMEpCUTFZc1QwRkJRU3hIUVVGWk96dDNRa0ZEV2l4VFFVRkJMRWRCUVZrN08zZENRVVZhTEVWQlFVRXNSMEZEUlR0SlFVRkJMR2RDUVVGQkxFVkJRV3RDTEN0Q1FVRnNRanM3TzNkQ1FVVkdMRTFCUVVFc1IwRkRSVHRKUVVGQkxEUkNRVUZCTEVWQlFUaENMR3RDUVVFNVFqczdPM2RDUVVkR0xHVkJRVUVzUjBGQmFVSTdPM2RDUVVOcVFpeG5Ra0ZCUVN4SFFVRnJRaXhUUVVGQk8wbEJRMmhDTEVsQlFVY3NTVUZCUXl4RFFVRkJMR1ZCUVVvN1RVRkRSU3hKUVVGRExFTkJRVUVzUlVGQlJTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExFbEJRWEpDTEVOQlFUQkNMR1ZCUVRGQ08wMUJRMEVzU1VGQlF5eERRVUZCTEVOQlFVUXNRMEZCUnl3d1FrRkJTQ3hEUVVFNFFpeERRVUZETEVsQlFTOUNMRU5CUVVFN1lVRkRRU3hKUVVGRExFTkJRVUVzWlVGQlJDeEhRVUZ0UWl4TlFVaHlRanRMUVVGQkxFMUJRVUU3VFVGTlJTeEpRVUZETEVOQlFVRXNSVUZCUlN4RFFVRkRMR2RDUVVGblFpeERRVUZETEVsQlFYSkNMRU5CUVRCQ0xHVkJRVEZDTzAxQlEwRXNTVUZCUXl4RFFVRkJMRU5CUVVRc1EwRkJSeXd3UWtGQlNDeERRVUU0UWl4RFFVRkRMRWxCUVM5Q0xFTkJRVUU3WVVGRFFTeEpRVUZETEVOQlFVRXNaVUZCUkN4SFFVRnRRaXhMUVZKeVFqczdSVUZFWjBJN096czdSMEZpVFN4RlFVRkZMRU5CUVVNN08wRkJNRUkzUWl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyIGNzdi12aWV3ZXJcXFwiPjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChBcnJheSwgZGF0YSwgdW5kZWZpbmVkLCB2aWV3cykge1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3cgaGVhZGVyXFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxpIGRhdGEtY2xpY2s9XFxcImNsb3NlXFxcIiBjbGFzcz1cXFwiZmEgZmEtMnggZmEtdGltZXMgZGV0YWlsLWNsb3NlXFxcIj48L2k+PC9kaXY+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyIG10LTJcXFwiPjxoNCBjbGFzcz1cXFwiY2FyZC10aXRsZVxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBkYXRhWydyZGZzOmxhYmVsJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvaDQ+PC9kaXY+PC9kaXY+XCIpO1xuaWYgKCB2aWV3cy5pbWcpXG57XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyIHRleHQtY2VudGVyXFxcIj48aW1nXCIgKyAoamFkZS5hdHRyKFwiZGF0YS16b29tXCIsIHZpZXdzLmltZywgdHJ1ZSwgZmFsc2UpKSArIChqYWRlLmF0dHIoXCJzcmNcIiwgdmlld3MuaW1nLCB0cnVlLCBmYWxzZSkpICsgXCIgc3R5bGU9XFxcIm1heC1oZWlnaHQ6MzByZW07XFxcIiBjbGFzcz1cXFwiaW1nLXRodW1ibmFpbFxcXCIvPjwvZGl2PjwvZGl2PlwiKTtcbn1cbmlmICggdmlld3MucGRmKVxue1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMiB0ZXh0LWNlbnRlclxcXCI+PGlmcmFtZVwiICsgKGphZGUuYXR0cihcInNyY1wiLCB2aWV3cy5wZGYsIHRydWUsIGZhbHNlKSkgKyBcIiBzdHlsZT1cXFwibWluLWhlaWdodDozMHJlbTtcXFwiIGNsYXNzPVxcXCJ3LTEwMFxcXCI+PC9pZnJhbWU+PC9kaXY+PC9kaXY+XCIpO1xufVxuaWYgKCB2aWV3cy5hdWRpbylcbntcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCB2aWV3cy5hdWRpbywgdHJ1ZSwgZmFsc2UpKSArIFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgdy0xMDBcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mdyBmYS1maWxlLWF1ZGlvLW9cXFwiPjwvaT4mbmJzcDtcXG5MaXN0ZW48L2E+PC9kaXY+PC9kaXY+XCIpO1xufVxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgZGF0YS1yZWdpb249XFxcInZpZXdlclxcXCIgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PC9kaXY+PC9kaXY+XCIpO1xuaWYgKCB2aWV3cy5kaWNvbSlcbntcbmJ1Zi5wdXNoKFwiPHAgY2xhc3M9XFxcImxlYWRcXFwiPkRJQ09NIFZJRVdFUjwvcD48ZGl2IGlkPVxcXCJkaWNvbUltYWdlXFxcIiBzdHlsZT1cXFwid2lkdGg6NTEycHg7aGVpZ2h0OjUxMnB4O1xcXCI+PC9kaXY+XCIpO1xufVxuaWYgKCB2aWV3cy52aWRlbylcbntcbmJ1Zi5wdXNoKFwiPHZpZGVvIHdpZHRoPVxcXCIzMjBcXFwiIGhlaWdodD1cXFwiMjQwXFxcIiBjb250cm9scz1cXFwiXFxcIj48c291cmNlXCIgKyAoamFkZS5hdHRyKFwic3JjXCIsIHZpZXdzLnZpZGVvLCB0cnVlLCBmYWxzZSkpICsgXCIgdHlwZT1cXFwidmlkZW8vbXA0XFxcIi8+WW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIHZpZGVvIHRhZy48L3ZpZGVvPlwiKTtcbn1cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwicm93IG10LTJcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMlxcXCI+PHRhYmxlIGNsYXNzPVxcXCJ0YWJsZSB0YWJsZS1yZXNwb25zaXZlIGF0dHItdGFibGVcXFwiPlwiKTtcbmphZGVfbWl4aW5zW1wiYXJyYXlSb3dcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKGF0dHIpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCBkYXRhW2F0dHJdKVxue1xuaWYgKCB0eXBlb2YoZGF0YVthdHRyXVswXSkgPT0gJ29iamVjdCcpXG57XG5idWYucHVzaChcIjx0cj48dGQ+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gYXR0cikgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiOjwvdGQ+PHRkPjxhIGRhdGEtY2xpY2s9XFxcInRvZ2dsZS1hZ2dlZ2F0ZXNcXFwiPlNob3cgRWxlbWVudHM8L2E+Jm5ic3A7IChcIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBkYXRhW2F0dHJdLmxlbmd0aCkgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiIGl0ZW1zKTwvdGQ+PC90cj48dHIgZGF0YS10b2dnbGU9XFxcImFnZ3JlZ2F0ZXNcXFwiIHN0eWxlPVxcXCJkaXNwbGF5Om5vbmU7XFxcIiBjbGFzcz1cXFwiYWdncmVnYXRlLWxpc3RcXFwiPjx0ZD48L3RkPjx0ZD5cIik7XG4vLyBpdGVyYXRlIGRhdGFbYXR0cl1cbjsoZnVuY3Rpb24oKXtcbiAgdmFyICQkb2JqID0gZGF0YVthdHRyXTtcbiAgaWYgKCdudW1iZXInID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcblxuICAgIGZvciAodmFyICRpbmRleCA9IDAsICQkbCA9ICQkb2JqLmxlbmd0aDsgJGluZGV4IDwgJCRsOyAkaW5kZXgrKykge1xuICAgICAgdmFyIG9iaiA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPGFcIiArIChqYWRlLmF0dHIoXCJkYXRhLXJlbGF0aW9uXCIsIG9ialsnQGlkJ10sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9ialsnQGlkJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT4sICZuYnNwO1wiKTtcbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICB2YXIgJCRsID0gMDtcbiAgICBmb3IgKHZhciAkaW5kZXggaW4gJCRvYmopIHtcbiAgICAgICQkbCsrOyAgICAgIHZhciBvYmogPSAkJG9ialskaW5kZXhdO1xuXG5idWYucHVzaChcIjxhXCIgKyAoamFkZS5hdHRyKFwiZGF0YS1yZWxhdGlvblwiLCBvYmpbJ0BpZCddLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBvYmpbJ0BpZCddKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L2E+LCAmbmJzcDtcIik7XG4gICAgfVxuXG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cbmJ1Zi5wdXNoKFwiPC90ZD48L3RyPlwiKTtcbn1cbmVsc2VcbntcbmJ1Zi5wdXNoKFwiPHRyPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBhdHRyKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI6PC90ZD48dGQ+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gZGF0YVthdHRyXS5qb2luKCcsICcpKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI8L3RkPjwvdHI+XCIpO1xufVxufVxufTtcbmphZGVfbWl4aW5zW1wiYXR0clJvd1wiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24oYXR0cil7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoIGRhdGFbYXR0cl0pXG57XG5idWYucHVzaChcIjx0cj48dGQ+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gYXR0cikgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiOjwvdGQ+PHRkPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGRhdGFbYXR0cl0pID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjwvdGQ+PC90cj5cIik7XG59XG59O1xuamFkZV9taXhpbnNbXCJpZFJvd1wiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24oYXR0cil7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoIGRhdGFbYXR0cl0pXG57XG5idWYucHVzaChcIjx0cj48dGQ+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gYXR0cikgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiOjwvdGQ+PHRkPjxhXCIgKyAoamFkZS5hdHRyKFwiZGF0YS1yZWxhdGlvblwiLCBkYXRhW2F0dHJdWydAaWQnXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGRhdGFbYXR0cl1bJ0BpZCddKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI8L2E+PC90ZD48L3RyPlwiKTtcbn1cbn07XG5qYWRlX21peGluc1tcInZhbHVlUm93XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihhdHRyKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICggZGF0YVthdHRyXSlcbntcbmJ1Zi5wdXNoKFwiPHRyPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBhdHRyKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI6PC90ZD48dGQ+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBkYXRhW2F0dHJdWydAdmFsdWUnXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC90ZD48L3RyPlwiKTtcbn1cbn07XG5idWYucHVzaChcIlwiKTtcbi8vIGl0ZXJhdGUgZGF0YVxuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBkYXRhO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIga2V5ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyBrZXkgPCAkJGw7IGtleSsrKSB7XG4gICAgICB2YXIgdmFsID0gJCRvYmpba2V5XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KHZhbCkpXG57XG5qYWRlX21peGluc1tcImFycmF5Um93XCJdKGtleSk7XG59XG5lbHNlIGlmICggdHlwZW9mIHZhbCA9PSAnb2JqZWN0JylcbntcbmlmICggdmFsWydAaWQnXSlcbntcbmphZGVfbWl4aW5zW1wiaWRSb3dcIl0oa2V5KTtcbn1cbmlmICggdmFsWydAdmFsdWUnXSlcbntcbmphZGVfbWl4aW5zW1widmFsdWVSb3dcIl0oa2V5KTtcbn1cbn1cbmVsc2VcbntcbmphZGVfbWl4aW5zW1wiYXR0clJvd1wiXShrZXkpO1xufVxuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyIGtleSBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIHZhbCA9ICQkb2JqW2tleV07XG5cbmlmICggQXJyYXkuaXNBcnJheSh2YWwpKVxue1xuamFkZV9taXhpbnNbXCJhcnJheVJvd1wiXShrZXkpO1xufVxuZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT0gJ29iamVjdCcpXG57XG5pZiAoIHZhbFsnQGlkJ10pXG57XG5qYWRlX21peGluc1tcImlkUm93XCJdKGtleSk7XG59XG5pZiAoIHZhbFsnQHZhbHVlJ10pXG57XG5qYWRlX21peGluc1tcInZhbHVlUm93XCJdKGtleSk7XG59XG59XG5lbHNlXG57XG5qYWRlX21peGluc1tcImF0dHJSb3dcIl0oa2V5KTtcbn1cbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L3RhYmxlPjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcIkFycmF5XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5BcnJheTp0eXBlb2YgQXJyYXkhPT1cInVuZGVmaW5lZFwiP0FycmF5OnVuZGVmaW5lZCxcImRhdGFcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmRhdGE6dHlwZW9mIGRhdGEhPT1cInVuZGVmaW5lZFwiP2RhdGE6dW5kZWZpbmVkLFwidW5kZWZpbmVkXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC51bmRlZmluZWQ6dHlwZW9mIHVuZGVmaW5lZCE9PVwidW5kZWZpbmVkXCI/dW5kZWZpbmVkOnVuZGVmaW5lZCxcInZpZXdzXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC52aWV3czp0eXBlb2Ygdmlld3MhPT1cInVuZGVmaW5lZFwiP3ZpZXdzOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGRhdGEtZGlzcGxheT1cXFwiZ3JhcGhcXFwiIGNsYXNzPVxcXCJsZF9fZ3JhcGhcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChpZCkge1xuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy02IHRleHQteHMtbGVmdFxcXCI+PGEgZGF0YS1jbGljaz1cXFwiY2xlYXJcXFwiIGNsYXNzPVxcXCJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtdGltZXMtY2lyY2xlLW9cXFwiPjwvaT4mbmJzcDtcXG5DbGVhciBGaWx0ZXJzPC9hPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy02IHRleHQtcmlnaHRcXFwiPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCBcIiNkYXRhc2V0cy9cIiArIChpZCkgKyBcIi9jYXB0dXJlXCIsIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgbXItMlxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWZ3IGZhLXBhcGVyY2xpcFxcXCI+PC9pPiZuYnNwO1xcbktub3dsZWRnZSBDYXB0dXJlPC9hPjxhXCIgKyAoamFkZS5hdHRyKFwiaHJlZlwiLCBcIiNkYXRhc2V0cy9cIiArIChpZCkgKyBcIi9jb25maWdcIiwgdHJ1ZSwgZmFsc2UpKSArIFwiIGNsYXNzPVxcXCJidG4gYnRuLW91dGxpbmUtc2Vjb25kYXJ5XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtZncgZmEtY29nXFxcIj48L2k+Jm5ic3A7XFxuQ29uZmlndXJhdGlvbjwvYT48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJpZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguaWQ6dHlwZW9mIGlkIT09XCJ1bmRlZmluZWRcIj9pZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuYnVmLnB1c2goXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPjxkaXYgY2xhc3M9XFxcImNvbC1sZy0zXFxcIj48ZGl2IGlkPVxcXCJmYWNldHNcXFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy05IHBsLTBcXFwiPjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwiaGVhZGVyXFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyIHBiLTNcXFwiPjwvZGl2PjxkaXYgZGF0YS1yZWdpb249XFxcInJlY29yZC1saXN0XFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJjb2wtbGctMTJcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgZGF0YS1yZWdpb249XFxcImRldGFpbFxcXCIgY2xhc3M9XFxcInJkZi1kZXRhaWxcXFwiPjxkaXYgY2xhc3M9XFxcImNhcmQgY2FyZC1ib2R5XFxcIj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPlJERiBWaWV3ZXI8L2g0PjxwIGNsYXNzPVxcXCJsZWFkXFxcIj5DbGljayBhIG5vZGUgdG8gZGV0YWlscy48L3A+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiZHJpZnQtdW5kZXJsYXlcXFwiPjxkaXYgY2xhc3M9XFxcImRyaWZ0LWJhY2tncm91bmRcXFwiPjwvZGl2PjxkaXYgY2xhc3M9XFxcImRyaWZ0LWNvbnRlbnRcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PlwiKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkYXRhLCBpY29uKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTJcXFwiPjxpXCIgKyAoamFkZS5jbHMoWydmYScsJ2ZhLWZ3JyxpY29uXSwgW251bGwsbnVsbCx0cnVlXSkpICsgXCI+PC9pPjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbC1sZy0xMFxcXCI+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBkYXRhWydyZGZzOmxhYmVsJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvZGl2PjwvZGl2PlwiKTt9LmNhbGwodGhpcyxcImRhdGFcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmRhdGE6dHlwZW9mIGRhdGEhPT1cInVuZGVmaW5lZFwiP2RhdGE6dW5kZWZpbmVkLFwiaWNvblwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguaWNvbjp0eXBlb2YgaWNvbiE9PVwidW5kZWZpbmVkXCI/aWNvbjp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWRlL3J1bnRpbWVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGVtcGxhdGUobG9jYWxzKSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcbjt2YXIgbG9jYWxzX2Zvcl93aXRoID0gKGxvY2FscyB8fCB7fSk7KGZ1bmN0aW9uIChkYXRhLCBpY29uKSB7XG5idWYucHVzaChcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPlwiKTtcbmlmICggaWNvbilcbntcbmJ1Zi5wdXNoKFwiPGlcIiArIChqYWRlLmNscyhbJ2ZhJywnZmEtZncnLGljb25dLCBbbnVsbCxudWxsLHRydWVdKSkgKyBcIj48L2k+Jm5ic3A7XCIpO1xufVxuYnVmLnB1c2goXCI8YVwiICsgKGphZGUuYXR0cihcImRhdGEtcmVsYXRpb25cIiwgZGF0YVsnQGlkJ10sIHRydWUsIGZhbHNlKSkgKyBcIiBjbGFzcz1cXFwiY3Vyc29yLXBvaW50ZXJcXFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gZGF0YVsnQGlkJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT48L2g0PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+PGRpdiBkYXRhLXJlZ2lvbj1cXFwidmlld2VyXFxcIiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJkYXRhXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kYXRhOnR5cGVvZiBkYXRhIT09XCJ1bmRlZmluZWRcIj9kYXRhOnVuZGVmaW5lZCxcImljb25cIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLmljb246dHlwZW9mIGljb24hPT1cInVuZGVmaW5lZFwiP2ljb246dW5kZWZpbmVkKSk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn07IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkZS9ydW50aW1lXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRlbXBsYXRlKGxvY2Fscykge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLWxnLTEyXFxcIj48ZGl2IGRhdGEtcmVnaW9uPVxcXCJzdGwtdmlld2VyXFxcIiBjbGFzcz1cXFwic3RsLXZpZXdlclxcXCI+PC9kaXY+PC9kaXY+XCIpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKEFycmF5LCBkYXRhLCB1bmRlZmluZWQpIHtcbmJ1Zi5wdXNoKFwiXCIpO1xuamFkZV9taXhpbnNbXCJhcnJheVJvd1wiXSA9IGphZGVfaW50ZXJwID0gZnVuY3Rpb24oYXR0cil7XG52YXIgYmxvY2sgPSAodGhpcyAmJiB0aGlzLmJsb2NrKSwgYXR0cmlidXRlcyA9ICh0aGlzICYmIHRoaXMuYXR0cmlidXRlcykgfHwge307XG5pZiAoIGRhdGFbYXR0cl0pXG57XG5pZiAoIHR5cGVvZihkYXRhW2F0dHJdWzBdKSA9PSAnb2JqZWN0JylcbntcbmJ1Zi5wdXNoKFwiPHRyPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBhdHRyKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI6PC90ZD48dGQ+PGEgZGF0YS1jbGljaz1cXFwidG9nZ2xlLWFnZ2VnYXRlc1xcXCI+U2hvdyBFbGVtZW50czwvYT4mbmJzcDsgKFwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGRhdGFbYXR0cl0ubGVuZ3RoKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCIgaXRlbXMpPC90ZD48L3RyPjx0ciBkYXRhLXRvZ2dsZT1cXFwiYWdncmVnYXRlc1xcXCIgc3R5bGU9XFxcImRpc3BsYXk6bm9uZTtcXFwiIGNsYXNzPVxcXCJhZ2dyZWdhdGUtbGlzdFxcXCI+PHRkPjwvdGQ+PHRkPlwiKTtcbi8vIGl0ZXJhdGUgZGF0YVthdHRyXVxuOyhmdW5jdGlvbigpe1xuICB2YXIgJCRvYmogPSBkYXRhW2F0dHJdO1xuICBpZiAoJ251bWJlcicgPT0gdHlwZW9mICQkb2JqLmxlbmd0aCkge1xuXG4gICAgZm9yICh2YXIgJGluZGV4ID0gMCwgJCRsID0gJCRvYmoubGVuZ3RoOyAkaW5kZXggPCAkJGw7ICRpbmRleCsrKSB7XG4gICAgICB2YXIgb2JqID0gJCRvYmpbJGluZGV4XTtcblxuYnVmLnB1c2goXCI8YVwiICsgKGphZGUuYXR0cihcImRhdGEtcmVsYXRpb25cIiwgb2JqWydAaWQnXSwgdHJ1ZSwgZmFsc2UpKSArIFwiPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gb2JqWydAaWQnXSkgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9hPiwgJm5ic3A7XCIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIHZhciAkJGwgPSAwO1xuICAgIGZvciAodmFyICRpbmRleCBpbiAkJG9iaikge1xuICAgICAgJCRsKys7ICAgICAgdmFyIG9iaiA9ICQkb2JqWyRpbmRleF07XG5cbmJ1Zi5wdXNoKFwiPGFcIiArIChqYWRlLmF0dHIoXCJkYXRhLXJlbGF0aW9uXCIsIG9ialsnQGlkJ10sIHRydWUsIGZhbHNlKSkgKyBcIj5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IG9ialsnQGlkJ10pID8gXCJcIiA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT4sICZuYnNwO1wiKTtcbiAgICB9XG5cbiAgfVxufSkuY2FsbCh0aGlzKTtcblxuYnVmLnB1c2goXCI8L3RkPjwvdHI+XCIpO1xufVxuZWxzZVxue1xuYnVmLnB1c2goXCI8dHI+PHRkPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGF0dHIpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjo8L3RkPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBkYXRhW2F0dHJdLmpvaW4oJywgJykpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjwvdGQ+PC90cj5cIik7XG59XG59XG59O1xuamFkZV9taXhpbnNbXCJhdHRyUm93XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihhdHRyKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICggZGF0YVthdHRyXSlcbntcbmJ1Zi5wdXNoKFwiPHRyPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBhdHRyKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI6PC90ZD48dGQ+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gZGF0YVthdHRyXSkgPT0gbnVsbCA/ICcnIDogamFkZV9pbnRlcnApKSArIFwiPC90ZD48L3RyPlwiKTtcbn1cbn07XG5qYWRlX21peGluc1tcImlkUm93XCJdID0gamFkZV9pbnRlcnAgPSBmdW5jdGlvbihhdHRyKXtcbnZhciBibG9jayA9ICh0aGlzICYmIHRoaXMuYmxvY2spLCBhdHRyaWJ1dGVzID0gKHRoaXMgJiYgdGhpcy5hdHRyaWJ1dGVzKSB8fCB7fTtcbmlmICggZGF0YVthdHRyXSlcbntcbmJ1Zi5wdXNoKFwiPHRyPjx0ZD5cIiArIChqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBhdHRyKSA9PSBudWxsID8gJycgOiBqYWRlX2ludGVycCkpICsgXCI6PC90ZD48dGQ+PGFcIiArIChqYWRlLmF0dHIoXCJkYXRhLXJlbGF0aW9uXCIsIGRhdGFbYXR0cl1bJ0BpZCddLCB0cnVlLCBmYWxzZSkpICsgXCI+XCIgKyAoamFkZS5lc2NhcGUoKGphZGVfaW50ZXJwID0gZGF0YVthdHRyXVsnQGlkJ10pID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjwvYT48L3RkPjwvdHI+XCIpO1xufVxufTtcbmphZGVfbWl4aW5zW1widmFsdWVSb3dcIl0gPSBqYWRlX2ludGVycCA9IGZ1bmN0aW9uKGF0dHIpe1xudmFyIGJsb2NrID0gKHRoaXMgJiYgdGhpcy5ibG9jayksIGF0dHJpYnV0ZXMgPSAodGhpcyAmJiB0aGlzLmF0dHJpYnV0ZXMpIHx8IHt9O1xuaWYgKCBkYXRhW2F0dHJdKVxue1xuYnVmLnB1c2goXCI8dHI+PHRkPlwiICsgKGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IGF0dHIpID09IG51bGwgPyAnJyA6IGphZGVfaW50ZXJwKSkgKyBcIjo8L3RkPjx0ZD5cIiArIChqYWRlLmVzY2FwZShudWxsID09IChqYWRlX2ludGVycCA9IGRhdGFbYXR0cl1bJ0B2YWx1ZSddKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpICsgXCI8L3RkPjwvdHI+XCIpO1xufVxufTtcbmJ1Zi5wdXNoKFwiXCIpO1xuLy8gaXRlcmF0ZSBkYXRhXG47KGZ1bmN0aW9uKCl7XG4gIHZhciAkJG9iaiA9IGRhdGE7XG4gIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgJCRvYmoubGVuZ3RoKSB7XG5cbiAgICBmb3IgKHZhciBrZXkgPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7IGtleSA8ICQkbDsga2V5KyspIHtcbiAgICAgIHZhciB2YWwgPSAkJG9ialtrZXldO1xuXG5pZiAoIEFycmF5LmlzQXJyYXkodmFsKSlcbntcbmphZGVfbWl4aW5zW1wiYXJyYXlSb3dcIl0oa2V5KTtcbn1cbmVsc2UgaWYgKCB0eXBlb2YgdmFsID09ICdvYmplY3QnKVxue1xuaWYgKCB2YWxbJ0BpZCddKVxue1xuamFkZV9taXhpbnNbXCJpZFJvd1wiXShrZXkpO1xufVxuaWYgKCB2YWxbJ0B2YWx1ZSddKVxue1xuamFkZV9taXhpbnNbXCJ2YWx1ZVJvd1wiXShrZXkpO1xufVxufVxuZWxzZVxue1xuamFkZV9taXhpbnNbXCJhdHRyUm93XCJdKGtleSk7XG59XG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgdmFyICQkbCA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluICQkb2JqKSB7XG4gICAgICAkJGwrKzsgICAgICB2YXIgdmFsID0gJCRvYmpba2V5XTtcblxuaWYgKCBBcnJheS5pc0FycmF5KHZhbCkpXG57XG5qYWRlX21peGluc1tcImFycmF5Um93XCJdKGtleSk7XG59XG5lbHNlIGlmICggdHlwZW9mIHZhbCA9PSAnb2JqZWN0JylcbntcbmlmICggdmFsWydAaWQnXSlcbntcbmphZGVfbWl4aW5zW1wiaWRSb3dcIl0oa2V5KTtcbn1cbmlmICggdmFsWydAdmFsdWUnXSlcbntcbmphZGVfbWl4aW5zW1widmFsdWVSb3dcIl0oa2V5KTtcbn1cbn1cbmVsc2VcbntcbmphZGVfbWl4aW5zW1wiYXR0clJvd1wiXShrZXkpO1xufVxuICAgIH1cblxuICB9XG59KS5jYWxsKHRoaXMpO1xufS5jYWxsKHRoaXMsXCJBcnJheVwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGguQXJyYXk6dHlwZW9mIEFycmF5IT09XCJ1bmRlZmluZWRcIj9BcnJheTp1bmRlZmluZWQsXCJkYXRhXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kYXRhOnR5cGVvZiBkYXRhIT09XCJ1bmRlZmluZWRcIj9kYXRhOnVuZGVmaW5lZCxcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgudW5kZWZpbmVkOnR5cGVvZiB1bmRlZmluZWQhPT1cInVuZGVmaW5lZFwiP3VuZGVmaW5lZDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufTsiLCJ2YXIgRW50aXRpZXMsIFNlYXJjaFJlc3VsdEZhY3RvcnksXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5FbnRpdGllcyA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTtcblxuU2VhcmNoUmVzdWx0RmFjdG9yeSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChTZWFyY2hSZXN1bHRGYWN0b3J5LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTZWFyY2hSZXN1bHRGYWN0b3J5KCkge1xuICAgIHJldHVybiBTZWFyY2hSZXN1bHRGYWN0b3J5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgU2VhcmNoUmVzdWx0RmFjdG9yeS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnc2VhcmNoOnJlc3VsdCBjb2xsZWN0aW9uJzogJ2dldENvbGxlY3Rpb24nXG4gIH07XG5cbiAgU2VhcmNoUmVzdWx0RmFjdG9yeS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlZENvbGxlY3Rpb24gPSBuZXcgRW50aXRpZXMuQ29sbGVjdGlvbigpO1xuICB9O1xuXG4gIFNlYXJjaFJlc3VsdEZhY3RvcnkucHJvdG90eXBlLmdldENvbGxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmNhY2hlZENvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIFNlYXJjaFJlc3VsdEZhY3Rvcnk7XG5cbn0pKE1hcmlvbmV0dGUuU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IFNlYXJjaFJlc3VsdEZhY3RvcnkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDNObFlYSmphQzltWVdOMGIzSjVMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDJGd2NDOWpiMlptWldVdmJXOWtkV3hsY3k5elpXRnlZMmd2Wm1GamRHOXllUzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzU1VGQlFTdzJRa0ZCUVR0RlFVRkJPenM3UVVGQlFTeFJRVUZCTEVkQlFWY3NUMEZCUVN4RFFVRlJMRmxCUVZJN08wRkJTVXc3T3pzN096czdaME5CUlVvc1lVRkJRU3hIUVVORk8wbEJRVUVzTUVKQlFVRXNSVUZCTkVJc1pVRkJOVUk3T3p0blEwRkZSaXhWUVVGQkxFZEJRVmtzVTBGQlFUdFhRVU5XTEVsQlFVTXNRMEZCUVN4blFrRkJSQ3hIUVVGdlFpeEpRVUZKTEZGQlFWRXNRMEZCUXl4VlFVRmlMRU5CUVVFN1JVRkVWanM3WjBOQlIxb3NZVUZCUVN4SFFVRmxMRk5CUVVFN1FVRkRZaXhYUVVGUExFbEJRVWtzVDBGQlNpeERRVUZaTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhQUVVGRUxFVkJRVlVzVFVGQlZqdEJRVU5xUWl4bFFVRlBMRTlCUVVFc1EwRkJVU3hMUVVGRExFTkJRVUVzWjBKQlFWUTdUVUZFVlR0SlFVRkJMRU5CUVVFc1EwRkJRU3hEUVVGQkxFbEJRVUVzUTBGQldqdEZRVVJOT3pzN08wZEJVbWxDTEZWQlFWVXNRMEZCUXpzN1FVRmpOME1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJc1NVRkJTU3h0UWtGQlNpeERRVUZCSW4wPVxuIiwidmFyIEFic3RyYWN0UnVsZUVudGl0aWVzLCBWaWV3ZXJSdWxlQ29sbGVjdGlvbiwgVmlld2VyUnVsZURlY29yYXRvciwgVmlld2VyUnVsZU1vZGVsLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQWJzdHJhY3RSdWxlRW50aXRpZXMgPSByZXF1aXJlKCcuLi9hYnN0cmFjdF9ydWxlL2VudGl0aWVzJyk7XG5cblZpZXdlclJ1bGVEZWNvcmF0b3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoVmlld2VyUnVsZURlY29yYXRvciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gVmlld2VyUnVsZURlY29yYXRvcigpIHtcbiAgICByZXR1cm4gVmlld2VyUnVsZURlY29yYXRvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFZpZXdlclJ1bGVEZWNvcmF0b3IucHJvdG90eXBlLmljb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJ2ZhLWdsb2JlJztcbiAgfTtcblxuICByZXR1cm4gVmlld2VyUnVsZURlY29yYXRvcjtcblxufSkoTW4uRGVjb3JhdG9yKTtcblxuVmlld2VyUnVsZU1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFZpZXdlclJ1bGVNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gVmlld2VyUnVsZU1vZGVsKCkge1xuICAgIHJldHVybiBWaWV3ZXJSdWxlTW9kZWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBWaWV3ZXJSdWxlTW9kZWwucHJvdG90eXBlLmRlY29yYXRvciA9IFZpZXdlclJ1bGVEZWNvcmF0b3I7XG5cbiAgVmlld2VyUnVsZU1vZGVsLnByb3RvdHlwZS5yYWRpb0NoYW5uZWwgPSAndmlld2VyOnJ1bGUnO1xuXG4gIHJldHVybiBWaWV3ZXJSdWxlTW9kZWw7XG5cbn0pKEFic3RyYWN0UnVsZUVudGl0aWVzLk1vZGVsKTtcblxuVmlld2VyUnVsZU1vZGVsLnNldHVwKCk7XG5cblZpZXdlclJ1bGVDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFZpZXdlclJ1bGVDb2xsZWN0aW9uLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBWaWV3ZXJSdWxlQ29sbGVjdGlvbigpIHtcbiAgICByZXR1cm4gVmlld2VyUnVsZUNvbGxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBWaWV3ZXJSdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUubW9kZWwgPSBWaWV3ZXJSdWxlTW9kZWw7XG5cbiAgVmlld2VyUnVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnRhcmdldF9vYmplY3QgPSAndmlld3MnO1xuXG4gIHJldHVybiBWaWV3ZXJSdWxlQ29sbGVjdGlvbjtcblxufSkoQWJzdHJhY3RSdWxlRW50aXRpZXMuQ29sbGVjdGlvbik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBNb2RlbDogVmlld2VyUnVsZU1vZGVsLFxuICBDb2xsZWN0aW9uOiBWaWV3ZXJSdWxlQ29sbGVjdGlvblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDNacFpYZGxjbDl5ZFd4bEwyVnVkR2wwYVdWekxtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMkZ3Y0M5amIyWm1aV1V2Ylc5a2RXeGxjeTkyYVdWM1pYSmZjblZzWlM5bGJuUnBkR2xsY3k1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3huUmtGQlFUdEZRVUZCT3pzN1FVRkJRU3h2UWtGQlFTeEhRVUYxUWl4UFFVRkJMRU5CUVZFc01rSkJRVkk3TzBGQlMycENPenM3T3pzN08yZERRVVZLTEVsQlFVRXNSMEZCVFN4VFFVRkJPMEZCUTBvc1YwRkJUenRGUVVSSU96czdPMGRCUmpCQ0xFVkJRVVVzUTBGQlF6czdRVUZSTDBJN096czdPenM3TkVKQlIwb3NVMEZCUVN4SFFVRlhPenMwUWtGSFdDeFpRVUZCTEVkQlFXTTdPenM3UjBGT1l5eHZRa0ZCYjBJc1EwRkJRenM3UVVGVmJrUXNaVUZCWlN4RFFVRkRMRXRCUVdoQ0xFTkJRVUU3TzBGQlMwMDdPenM3T3pzN2FVTkJRMG9zUzBGQlFTeEhRVUZQT3p0cFEwRkhVQ3hoUVVGQkxFZEJRV1U3T3pzN1IwRkthMElzYjBKQlFXOUNMRU5CUVVNN08wRkJVWGhFTEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUTBVN1JVRkJRU3hMUVVGQkxFVkJRVmtzWlVGQldqdEZRVU5CTEZWQlFVRXNSVUZCV1N4dlFrRkVXaUo5XG4iLCJ2YXIgRGV4aWVGYWN0b3J5LCBFbnRpdGllcywgVmlld2VyUnVsZUZhY3RvcnksXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5FbnRpdGllcyA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTtcblxuRGV4aWVGYWN0b3J5ID0gcmVxdWlyZSgnLi4vYmFzZS9kZXhpZUZhY3RvcnknKTtcblxuVmlld2VyUnVsZUZhY3RvcnkgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoVmlld2VyUnVsZUZhY3RvcnksIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIFZpZXdlclJ1bGVGYWN0b3J5KCkge1xuICAgIHJldHVybiBWaWV3ZXJSdWxlRmFjdG9yeS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFZpZXdlclJ1bGVGYWN0b3J5LnByb3RvdHlwZS50YWJsZU5hbWUgPSAndmlld2VyX3J1bGVzJztcblxuICBWaWV3ZXJSdWxlRmFjdG9yeS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAndmlld2VyOnJ1bGUgY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJyxcbiAgICAndmlld2VyOnJ1bGUgc2F2ZSc6ICdzYXZlTW9kZWwnLFxuICAgICd2aWV3ZXI6cnVsZSBkZXN0cm95JzogJ2Rlc3Ryb3lNb2RlbCdcbiAgfTtcblxuICBWaWV3ZXJSdWxlRmFjdG9yeS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlZENvbGxlY3Rpb24gPSBuZXcgRW50aXRpZXMuQ29sbGVjdGlvbigpO1xuICB9O1xuXG4gIHJldHVybiBWaWV3ZXJSdWxlRmFjdG9yeTtcblxufSkoRGV4aWVGYWN0b3J5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgVmlld2VyUnVsZUZhY3RvcnkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2WVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDNacFpYZGxjbDl5ZFd4bEwyWmhZM1J2Y25rdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMM1pwWlhkbGNsOXlkV3hsTDJaaFkzUnZjbmt1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEVsQlFVRXNlVU5CUVVFN1JVRkJRVHM3TzBGQlFVRXNVVUZCUVN4SFFVRlhMRTlCUVVFc1EwRkJVU3haUVVGU096dEJRVU5ZTEZsQlFVRXNSMEZCWjBJc1QwRkJRU3hEUVVGUkxITkNRVUZTT3p0QlFVbFdPenM3T3pzN096aENRVWRLTEZOQlFVRXNSMEZCVnpzN09FSkJSMWdzWVVGQlFTeEhRVU5GTzBsQlFVRXNkMEpCUVVFc1JVRkJNa0lzWlVGQk0wSTdTVUZEUVN4clFrRkJRU3hGUVVFeVFpeFhRVVF6UWp0SlFVVkJMSEZDUVVGQkxFVkJRVEpDTEdOQlJqTkNPenM3T0VKQlNVWXNWVUZCUVN4SFFVRlpMRk5CUVVFN1YwRkRWaXhKUVVGRExFTkJRVUVzWjBKQlFVUXNSMEZCYjBJc1NVRkJTU3hSUVVGUkxFTkJRVU1zVlVGQllpeERRVUZCTzBWQlJGWTdPenM3UjBGWWEwSTdPMEZCWjBKb1F5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaXhKUVVGSkxHbENRVUZLTEVOQlFVRWlmUT09XG4iLCIvLyBCYWNrYm9uZS5CYWJ5U2l0dGVyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyB2MC4xLjExXG4vL1xuLy8gQ29weXJpZ2h0IChjKTIwMTYgRGVyaWNrIEJhaWxleSwgTXV0ZWQgU29sdXRpb25zLCBMTEMuXG4vLyBEaXN0cmlidXRlZCB1bmRlciBNSVQgbGljZW5zZVxuLy9cbi8vIGh0dHA6Ly9naXRodWIuY29tL21hcmlvbmV0dGVqcy9iYWNrYm9uZS5iYWJ5c2l0dGVyXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ2JhY2tib25lJywgJ3VuZGVyc2NvcmUnXSwgZnVuY3Rpb24oQmFja2JvbmUsIF8pIHtcbiAgICAgIHJldHVybiBmYWN0b3J5KEJhY2tib25lLCBfKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgQmFja2JvbmUgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpO1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShCYWNrYm9uZSwgXyk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShyb290LkJhY2tib25lLCByb290Ll8pO1xuICB9XG5cbn0odGhpcywgZnVuY3Rpb24oQmFja2JvbmUsIF8pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBwcmV2aW91c0NoaWxkVmlld0NvbnRhaW5lciA9IEJhY2tib25lLkNoaWxkVmlld0NvbnRhaW5lcjtcblxuICAvLyBCYWJ5U2l0dGVyLkNoaWxkVmlld0NvbnRhaW5lclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBQcm92aWRlIGEgY29udGFpbmVyIHRvIHN0b3JlLCByZXRyaWV2ZSBhbmRcbiAgLy8gc2h1dCBkb3duIGNoaWxkIHZpZXdzLlxuICBcbiAgQmFja2JvbmUuQ2hpbGRWaWV3Q29udGFpbmVyID0gKGZ1bmN0aW9uIChCYWNrYm9uZSwgXykge1xuICBcbiAgICAvLyBDb250YWluZXIgQ29uc3RydWN0b3JcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgdmFyIENvbnRhaW5lciA9IGZ1bmN0aW9uKHZpZXdzKXtcbiAgICAgIHRoaXMuX3ZpZXdzID0ge307XG4gICAgICB0aGlzLl9pbmRleEJ5TW9kZWwgPSB7fTtcbiAgICAgIHRoaXMuX2luZGV4QnlDdXN0b20gPSB7fTtcbiAgICAgIHRoaXMuX3VwZGF0ZUxlbmd0aCgpO1xuICBcbiAgICAgIF8uZWFjaCh2aWV3cywgdGhpcy5hZGQsIHRoaXMpO1xuICAgIH07XG4gIFxuICAgIC8vIENvbnRhaW5lciBNZXRob2RzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgXy5leHRlbmQoQ29udGFpbmVyLnByb3RvdHlwZSwge1xuICBcbiAgICAgIC8vIEFkZCBhIHZpZXcgdG8gdGhpcyBjb250YWluZXIuIFN0b3JlcyB0aGUgdmlld1xuICAgICAgLy8gYnkgYGNpZGAgYW5kIG1ha2VzIGl0IHNlYXJjaGFibGUgYnkgdGhlIG1vZGVsXG4gICAgICAvLyBjaWQgKGFuZCBtb2RlbCBpdHNlbGYpLiBPcHRpb25hbGx5IHNwZWNpZnlcbiAgICAgIC8vIGEgY3VzdG9tIGtleSB0byBzdG9yZSBhbiByZXRyaWV2ZSB0aGUgdmlldy5cbiAgICAgIGFkZDogZnVuY3Rpb24odmlldywgY3VzdG9tSW5kZXgpe1xuICAgICAgICB2YXIgdmlld0NpZCA9IHZpZXcuY2lkO1xuICBcbiAgICAgICAgLy8gc3RvcmUgdGhlIHZpZXdcbiAgICAgICAgdGhpcy5fdmlld3Nbdmlld0NpZF0gPSB2aWV3O1xuICBcbiAgICAgICAgLy8gaW5kZXggaXQgYnkgbW9kZWxcbiAgICAgICAgaWYgKHZpZXcubW9kZWwpe1xuICAgICAgICAgIHRoaXMuX2luZGV4QnlNb2RlbFt2aWV3Lm1vZGVsLmNpZF0gPSB2aWV3Q2lkO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBpbmRleCBieSBjdXN0b21cbiAgICAgICAgaWYgKGN1c3RvbUluZGV4KXtcbiAgICAgICAgICB0aGlzLl9pbmRleEJ5Q3VzdG9tW2N1c3RvbUluZGV4XSA9IHZpZXdDaWQ7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxlbmd0aCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gRmluZCBhIHZpZXcgYnkgdGhlIG1vZGVsIHRoYXQgd2FzIGF0dGFjaGVkIHRvXG4gICAgICAvLyBpdC4gVXNlcyB0aGUgbW9kZWwncyBgY2lkYCB0byBmaW5kIGl0LlxuICAgICAgZmluZEJ5TW9kZWw6IGZ1bmN0aW9uKG1vZGVsKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEJ5TW9kZWxDaWQobW9kZWwuY2lkKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gRmluZCBhIHZpZXcgYnkgdGhlIGBjaWRgIG9mIHRoZSBtb2RlbCB0aGF0IHdhcyBhdHRhY2hlZCB0b1xuICAgICAgLy8gaXQuIFVzZXMgdGhlIG1vZGVsJ3MgYGNpZGAgdG8gZmluZCB0aGUgdmlldyBgY2lkYCBhbmRcbiAgICAgIC8vIHJldHJpZXZlIHRoZSB2aWV3IHVzaW5nIGl0LlxuICAgICAgZmluZEJ5TW9kZWxDaWQ6IGZ1bmN0aW9uKG1vZGVsQ2lkKXtcbiAgICAgICAgdmFyIHZpZXdDaWQgPSB0aGlzLl9pbmRleEJ5TW9kZWxbbW9kZWxDaWRdO1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kQnlDaWQodmlld0NpZCk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIEZpbmQgYSB2aWV3IGJ5IGEgY3VzdG9tIGluZGV4ZXIuXG4gICAgICBmaW5kQnlDdXN0b206IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgdmFyIHZpZXdDaWQgPSB0aGlzLl9pbmRleEJ5Q3VzdG9tW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEJ5Q2lkKHZpZXdDaWQpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBGaW5kIGJ5IGluZGV4LiBUaGlzIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGFcbiAgICAgIC8vIHN0YWJsZSBpbmRleC5cbiAgICAgIGZpbmRCeUluZGV4OiBmdW5jdGlvbihpbmRleCl7XG4gICAgICAgIHJldHVybiBfLnZhbHVlcyh0aGlzLl92aWV3cylbaW5kZXhdO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyByZXRyaWV2ZSBhIHZpZXcgYnkgaXRzIGBjaWRgIGRpcmVjdGx5XG4gICAgICBmaW5kQnlDaWQ6IGZ1bmN0aW9uKGNpZCl7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWV3c1tjaWRdO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBSZW1vdmUgYSB2aWV3XG4gICAgICByZW1vdmU6IGZ1bmN0aW9uKHZpZXcpe1xuICAgICAgICB2YXIgdmlld0NpZCA9IHZpZXcuY2lkO1xuICBcbiAgICAgICAgLy8gZGVsZXRlIG1vZGVsIGluZGV4XG4gICAgICAgIGlmICh2aWV3Lm1vZGVsKXtcbiAgICAgICAgICBkZWxldGUgdGhpcy5faW5kZXhCeU1vZGVsW3ZpZXcubW9kZWwuY2lkXTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZGVsZXRlIGN1c3RvbSBpbmRleFxuICAgICAgICBfLmFueSh0aGlzLl9pbmRleEJ5Q3VzdG9tLCBmdW5jdGlvbihjaWQsIGtleSkge1xuICAgICAgICAgIGlmIChjaWQgPT09IHZpZXdDaWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9pbmRleEJ5Q3VzdG9tW2tleV07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICBcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSB2aWV3IGZyb20gdGhlIGNvbnRhaW5lclxuICAgICAgICBkZWxldGUgdGhpcy5fdmlld3Nbdmlld0NpZF07XG4gIFxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxlbmd0aFxuICAgICAgICB0aGlzLl91cGRhdGVMZW5ndGgoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIENhbGwgYSBtZXRob2Qgb24gZXZlcnkgdmlldyBpbiB0aGUgY29udGFpbmVyLFxuICAgICAgLy8gcGFzc2luZyBwYXJhbWV0ZXJzIHRvIHRoZSBjYWxsIG1ldGhvZCBvbmUgYXQgYVxuICAgICAgLy8gdGltZSwgbGlrZSBgZnVuY3Rpb24uY2FsbGAuXG4gICAgICBjYWxsOiBmdW5jdGlvbihtZXRob2Qpe1xuICAgICAgICB0aGlzLmFwcGx5KG1ldGhvZCwgXy50YWlsKGFyZ3VtZW50cykpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBBcHBseSBhIG1ldGhvZCBvbiBldmVyeSB2aWV3IGluIHRoZSBjb250YWluZXIsXG4gICAgICAvLyBwYXNzaW5nIHBhcmFtZXRlcnMgdG8gdGhlIGNhbGwgbWV0aG9kIG9uZSBhdCBhXG4gICAgICAvLyB0aW1lLCBsaWtlIGBmdW5jdGlvbi5hcHBseWAuXG4gICAgICBhcHBseTogZnVuY3Rpb24obWV0aG9kLCBhcmdzKXtcbiAgICAgICAgXy5lYWNoKHRoaXMuX3ZpZXdzLCBmdW5jdGlvbih2aWV3KXtcbiAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHZpZXdbbWV0aG9kXSkpe1xuICAgICAgICAgICAgdmlld1ttZXRob2RdLmFwcGx5KHZpZXcsIGFyZ3MgfHwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgYC5sZW5ndGhgIGF0dHJpYnV0ZSBvbiB0aGlzIGNvbnRhaW5lclxuICAgICAgX3VwZGF0ZUxlbmd0aDogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBfLnNpemUodGhpcy5fdmlld3MpO1xuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICAvLyBCb3Jyb3dpbmcgdGhpcyBjb2RlIGZyb20gQmFja2JvbmUuQ29sbGVjdGlvbjpcbiAgICAvLyBodHRwOi8vYmFja2JvbmVqcy5vcmcvZG9jcy9iYWNrYm9uZS5odG1sI3NlY3Rpb24tMTA2XG4gICAgLy9cbiAgICAvLyBNaXggaW4gbWV0aG9kcyBmcm9tIFVuZGVyc2NvcmUsIGZvciBpdGVyYXRpb24sIGFuZCBvdGhlclxuICAgIC8vIGNvbGxlY3Rpb24gcmVsYXRlZCBmZWF0dXJlcy5cbiAgICB2YXIgbWV0aG9kcyA9IFsnZm9yRWFjaCcsICdlYWNoJywgJ21hcCcsICdmaW5kJywgJ2RldGVjdCcsICdmaWx0ZXInLFxuICAgICAgJ3NlbGVjdCcsICdyZWplY3QnLCAnZXZlcnknLCAnYWxsJywgJ3NvbWUnLCAnYW55JywgJ2luY2x1ZGUnLFxuICAgICAgJ2NvbnRhaW5zJywgJ2ludm9rZScsICd0b0FycmF5JywgJ2ZpcnN0JywgJ2luaXRpYWwnLCAncmVzdCcsXG4gICAgICAnbGFzdCcsICd3aXRob3V0JywgJ2lzRW1wdHknLCAncGx1Y2snLCAncmVkdWNlJ107XG4gIFxuICAgIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIENvbnRhaW5lci5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmlld3MgPSBfLnZhbHVlcyh0aGlzLl92aWV3cyk7XG4gICAgICAgIHZhciBhcmdzID0gW3ZpZXdzXS5jb25jYXQoXy50b0FycmF5KGFyZ3VtZW50cykpO1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgXG4gICAgLy8gcmV0dXJuIHRoZSBwdWJsaWMgQVBJXG4gICAgcmV0dXJuIENvbnRhaW5lcjtcbiAgfSkoQmFja2JvbmUsIF8pO1xuICBcblxuICBCYWNrYm9uZS5DaGlsZFZpZXdDb250YWluZXIuVkVSU0lPTiA9ICcwLjEuMTEnO1xuXG4gIEJhY2tib25lLkNoaWxkVmlld0NvbnRhaW5lci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIEJhY2tib25lLkNoaWxkVmlld0NvbnRhaW5lciA9IHByZXZpb3VzQ2hpbGRWaWV3Q29udGFpbmVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBCYWNrYm9uZS5DaGlsZFZpZXdDb250YWluZXI7XG5cbn0pKTtcbiIsIi8vIE1hcmlvbmV0dGVKUyAoQmFja2JvbmUuTWFyaW9uZXR0ZSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHYyLjQuN1xuLy9cbi8vIENvcHlyaWdodCAoYykyMDE2IERlcmljayBCYWlsZXksIE11dGVkIFNvbHV0aW9ucywgTExDLlxuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcbi8vXG4vLyBodHRwOi8vbWFyaW9uZXR0ZWpzLmNvbVxuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWydiYWNrYm9uZScsICd1bmRlcnNjb3JlJywgJ2JhY2tib25lLndyZXFyJywgJ2JhY2tib25lLmJhYnlzaXR0ZXInXSwgZnVuY3Rpb24oQmFja2JvbmUsIF8pIHtcbiAgICAgIHJldHVybiAocm9vdC5NYXJpb25ldHRlID0gcm9vdC5NbiA9IGZhY3Rvcnkocm9vdCwgQmFja2JvbmUsIF8pKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgQmFja2JvbmUgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpO1xuICAgIHZhciBXcmVxciA9IHJlcXVpcmUoJ2JhY2tib25lLndyZXFyJyk7XG4gICAgdmFyIEJhYnlTaXR0ZXIgPSByZXF1aXJlKCdiYWNrYm9uZS5iYWJ5c2l0dGVyJyk7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJvb3QsIEJhY2tib25lLCBfKTtcbiAgfSBlbHNlIHtcbiAgICByb290Lk1hcmlvbmV0dGUgPSByb290Lk1uID0gZmFjdG9yeShyb290LCByb290LkJhY2tib25lLCByb290Ll8pO1xuICB9XG5cbn0odGhpcywgZnVuY3Rpb24ocm9vdCwgQmFja2JvbmUsIF8pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBwcmV2aW91c01hcmlvbmV0dGUgPSByb290Lk1hcmlvbmV0dGU7XG4gIHZhciBwcmV2aW91c01uID0gcm9vdC5NbjtcblxuICB2YXIgTWFyaW9uZXR0ZSA9IEJhY2tib25lLk1hcmlvbmV0dGUgPSB7fTtcblxuICBNYXJpb25ldHRlLlZFUlNJT04gPSAnMi40LjcnO1xuXG4gIE1hcmlvbmV0dGUubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuTWFyaW9uZXR0ZSA9IHByZXZpb3VzTWFyaW9uZXR0ZTtcbiAgICByb290Lk1uID0gcHJldmlvdXNNbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBHZXQgdGhlIERlZmVycmVkIGNyZWF0b3IgZm9yIGxhdGVyIHVzZVxuICBNYXJpb25ldHRlLkRlZmVycmVkID0gQmFja2JvbmUuJC5EZWZlcnJlZDtcblxuICBNYXJpb25ldHRlLkZFQVRVUkVTID0ge1xuICB9O1xuICBcbiAgTWFyaW9uZXR0ZS5pc0VuYWJsZWQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuICEhTWFyaW9uZXR0ZS5GRUFUVVJFU1tuYW1lXTtcbiAgfTtcbiAgXG4gIC8qIGpzaGludCB1bnVzZWQ6IGZhbHNlICovLyogZ2xvYmFsIGNvbnNvbGUgKi9cbiAgXG4gIC8vIEhlbHBlcnNcbiAgLy8gLS0tLS0tLVxuICBcbiAgLy8gTWFyaW9uZXR0ZS5leHRlbmRcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIEJvcnJvdyB0aGUgQmFja2JvbmUgYGV4dGVuZGAgbWV0aG9kIHNvIHdlIGNhbiB1c2UgaXQgYXMgbmVlZGVkXG4gIE1hcmlvbmV0dGUuZXh0ZW5kID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kO1xuICBcbiAgLy8gTWFyaW9uZXR0ZS5pc05vZGVBdHRhY2hlZFxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAvLyBEZXRlcm1pbmUgaWYgYGVsYCBpcyBhIGNoaWxkIG9mIHRoZSBkb2N1bWVudFxuICBNYXJpb25ldHRlLmlzTm9kZUF0dGFjaGVkID0gZnVuY3Rpb24oZWwpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuJC5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGVsKTtcbiAgfTtcbiAgXG4gIC8vIE1lcmdlIGBrZXlzYCBmcm9tIGBvcHRpb25zYCBvbnRvIGB0aGlzYFxuICBNYXJpb25ldHRlLm1lcmdlT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGtleXMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHsgcmV0dXJuOyB9XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIGtleXMpKTtcbiAgfTtcbiAgXG4gIC8vIE1hcmlvbmV0dGUuZ2V0T3B0aW9uXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAvLyBSZXRyaWV2ZSBhbiBvYmplY3QsIGZ1bmN0aW9uIG9yIG90aGVyIHZhbHVlIGZyb20gYSB0YXJnZXRcbiAgLy8gb2JqZWN0IG9yIGl0cyBgb3B0aW9uc2AsIHdpdGggYG9wdGlvbnNgIHRha2luZyBwcmVjZWRlbmNlLlxuICBNYXJpb25ldHRlLmdldE9wdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9uTmFtZSkge1xuICAgIGlmICghdGFyZ2V0IHx8ICFvcHRpb25OYW1lKSB7IHJldHVybjsgfVxuICAgIGlmICh0YXJnZXQub3B0aW9ucyAmJiAodGFyZ2V0Lm9wdGlvbnNbb3B0aW9uTmFtZV0gIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIHJldHVybiB0YXJnZXQub3B0aW9uc1tvcHRpb25OYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRhcmdldFtvcHRpb25OYW1lXTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBQcm94eSBgTWFyaW9uZXR0ZS5nZXRPcHRpb25gXG4gIE1hcmlvbmV0dGUucHJveHlHZXRPcHRpb24gPSBmdW5jdGlvbihvcHRpb25OYW1lKSB7XG4gICAgcmV0dXJuIE1hcmlvbmV0dGUuZ2V0T3B0aW9uKHRoaXMsIG9wdGlvbk5hbWUpO1xuICB9O1xuICBcbiAgLy8gU2ltaWxhciB0byBgXy5yZXN1bHRgLCB0aGlzIGlzIGEgc2ltcGxlIGhlbHBlclxuICAvLyBJZiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHdlIGNhbGwgaXQgd2l0aCBjb250ZXh0XG4gIC8vIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGUgdmFsdWUuIElmIHRoZSB2YWx1ZSBpc1xuICAvLyB1bmRlZmluZWQgcmV0dXJuIGEgZGVmYXVsdCB2YWx1ZVxuICBNYXJpb25ldHRlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0LCBwYXJhbXMpIHtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSBwYXJhbXMgPyB2YWx1ZS5hcHBseShjb250ZXh0LCBwYXJhbXMpIDogdmFsdWUuY2FsbChjb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuICBcbiAgLy8gTWFyaW9uZXR0ZS5ub3JtYWxpemVNZXRob2RzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIFBhc3MgaW4gYSBtYXBwaW5nIG9mIGV2ZW50cyA9PiBmdW5jdGlvbnMgb3IgZnVuY3Rpb24gbmFtZXNcbiAgLy8gYW5kIHJldHVybiBhIG1hcHBpbmcgb2YgZXZlbnRzID0+IGZ1bmN0aW9uc1xuICBNYXJpb25ldHRlLm5vcm1hbGl6ZU1ldGhvZHMgPSBmdW5jdGlvbihoYXNoKSB7XG4gICAgcmV0dXJuIF8ucmVkdWNlKGhhc2gsIGZ1bmN0aW9uKG5vcm1hbGl6ZWRIYXNoLCBtZXRob2QsIG5hbWUpIHtcbiAgICAgIGlmICghXy5pc0Z1bmN0aW9uKG1ldGhvZCkpIHtcbiAgICAgICAgbWV0aG9kID0gdGhpc1ttZXRob2RdO1xuICAgICAgfVxuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICBub3JtYWxpemVkSGFzaFtuYW1lXSA9IG1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub3JtYWxpemVkSGFzaDtcbiAgICB9LCB7fSwgdGhpcyk7XG4gIH07XG4gIFxuICAvLyB1dGlsaXR5IG1ldGhvZCBmb3IgcGFyc2luZyBAdWkuIHN5bnRheCBzdHJpbmdzXG4gIC8vIGludG8gYXNzb2NpYXRlZCBzZWxlY3RvclxuICBNYXJpb25ldHRlLm5vcm1hbGl6ZVVJU3RyaW5nID0gZnVuY3Rpb24odWlTdHJpbmcsIHVpKSB7XG4gICAgcmV0dXJuIHVpU3RyaW5nLnJlcGxhY2UoL0B1aVxcLlthLXpBLVotXyQwLTldKi9nLCBmdW5jdGlvbihyKSB7XG4gICAgICByZXR1cm4gdWlbci5zbGljZSg0KV07XG4gICAgfSk7XG4gIH07XG4gIFxuICAvLyBhbGxvd3MgZm9yIHRoZSB1c2Ugb2YgdGhlIEB1aS4gc3ludGF4IHdpdGhpblxuICAvLyBhIGdpdmVuIGtleSBmb3IgdHJpZ2dlcnMgYW5kIGV2ZW50c1xuICAvLyBzd2FwcyB0aGUgQHVpIHdpdGggdGhlIGFzc29jaWF0ZWQgc2VsZWN0b3IuXG4gIC8vIFJldHVybnMgYSBuZXcsIG5vbi1tdXRhdGVkLCBwYXJzZWQgZXZlbnRzIGhhc2guXG4gIE1hcmlvbmV0dGUubm9ybWFsaXplVUlLZXlzID0gZnVuY3Rpb24oaGFzaCwgdWkpIHtcbiAgICByZXR1cm4gXy5yZWR1Y2UoaGFzaCwgZnVuY3Rpb24obWVtbywgdmFsLCBrZXkpIHtcbiAgICAgIHZhciBub3JtYWxpemVkS2V5ID0gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSVN0cmluZyhrZXksIHVpKTtcbiAgICAgIG1lbW9bbm9ybWFsaXplZEtleV0gPSB2YWw7XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9LCB7fSk7XG4gIH07XG4gIFxuICAvLyBhbGxvd3MgZm9yIHRoZSB1c2Ugb2YgdGhlIEB1aS4gc3ludGF4IHdpdGhpblxuICAvLyBhIGdpdmVuIHZhbHVlIGZvciByZWdpb25zXG4gIC8vIHN3YXBzIHRoZSBAdWkgd2l0aCB0aGUgYXNzb2NpYXRlZCBzZWxlY3RvclxuICBNYXJpb25ldHRlLm5vcm1hbGl6ZVVJVmFsdWVzID0gZnVuY3Rpb24oaGFzaCwgdWksIHByb3BlcnRpZXMpIHtcbiAgICBfLmVhY2goaGFzaCwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgIGlmIChfLmlzU3RyaW5nKHZhbCkpIHtcbiAgICAgICAgaGFzaFtrZXldID0gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSVN0cmluZyh2YWwsIHVpKTtcbiAgICAgIH0gZWxzZSBpZiAoXy5pc09iamVjdCh2YWwpICYmIF8uaXNBcnJheShwcm9wZXJ0aWVzKSkge1xuICAgICAgICBfLmV4dGVuZCh2YWwsIE1hcmlvbmV0dGUubm9ybWFsaXplVUlWYWx1ZXMoXy5waWNrKHZhbCwgcHJvcGVydGllcyksIHVpKSk7XG4gICAgICAgIC8qIFZhbHVlIGlzIGFuIG9iamVjdCwgYW5kIHdlIGdvdCBhbiBhcnJheSBvZiBlbWJlZGRlZCBwcm9wZXJ0eSBuYW1lcyB0byBub3JtYWxpemUuICovXG4gICAgICAgIF8uZWFjaChwcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbCA9IHZhbFtwcm9wZXJ0eV07XG4gICAgICAgICAgaWYgKF8uaXNTdHJpbmcocHJvcGVydHlWYWwpKSB7XG4gICAgICAgICAgICB2YWxbcHJvcGVydHldID0gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSVN0cmluZyhwcm9wZXJ0eVZhbCwgdWkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGhhc2g7XG4gIH07XG4gIFxuICAvLyBNaXggaW4gbWV0aG9kcyBmcm9tIFVuZGVyc2NvcmUsIGZvciBpdGVyYXRpb24sIGFuZCBvdGhlclxuICAvLyBjb2xsZWN0aW9uIHJlbGF0ZWQgZmVhdHVyZXMuXG4gIC8vIEJvcnJvd2luZyB0aGlzIGNvZGUgZnJvbSBCYWNrYm9uZS5Db2xsZWN0aW9uOlxuICAvLyBodHRwOi8vYmFja2JvbmVqcy5vcmcvZG9jcy9iYWNrYm9uZS5odG1sI3NlY3Rpb24tMTIxXG4gIE1hcmlvbmV0dGUuYWN0QXNDb2xsZWN0aW9uID0gZnVuY3Rpb24ob2JqZWN0LCBsaXN0UHJvcGVydHkpIHtcbiAgICB2YXIgbWV0aG9kcyA9IFsnZm9yRWFjaCcsICdlYWNoJywgJ21hcCcsICdmaW5kJywgJ2RldGVjdCcsICdmaWx0ZXInLFxuICAgICAgJ3NlbGVjdCcsICdyZWplY3QnLCAnZXZlcnknLCAnYWxsJywgJ3NvbWUnLCAnYW55JywgJ2luY2x1ZGUnLFxuICAgICAgJ2NvbnRhaW5zJywgJ2ludm9rZScsICd0b0FycmF5JywgJ2ZpcnN0JywgJ2luaXRpYWwnLCAncmVzdCcsXG4gICAgICAnbGFzdCcsICd3aXRob3V0JywgJ2lzRW1wdHknLCAncGx1Y2snXTtcbiAgXG4gICAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgb2JqZWN0W21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxpc3QgPSBfLnZhbHVlcyhfLnJlc3VsdCh0aGlzLCBsaXN0UHJvcGVydHkpKTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbbGlzdF0uY29uY2F0KF8udG9BcnJheShhcmd1bWVudHMpKTtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG4gIFxuICB2YXIgZGVwcmVjYXRlID0gTWFyaW9uZXR0ZS5kZXByZWNhdGUgPSBmdW5jdGlvbihtZXNzYWdlLCB0ZXN0KSB7XG4gICAgaWYgKF8uaXNPYmplY3QobWVzc2FnZSkpIHtcbiAgICAgIG1lc3NhZ2UgPSAoXG4gICAgICAgIG1lc3NhZ2UucHJldiArICcgaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiAnICtcbiAgICAgICAgJ1BsZWFzZSB1c2UgJyArIG1lc3NhZ2UubmV4dCArICcgaW5zdGVhZC4nICtcbiAgICAgICAgKG1lc3NhZ2UudXJsID8gJyBTZWU6ICcgKyBtZXNzYWdlLnVybCA6ICcnKVxuICAgICAgKTtcbiAgICB9XG4gIFxuICAgIGlmICgodGVzdCA9PT0gdW5kZWZpbmVkIHx8ICF0ZXN0KSAmJiAhZGVwcmVjYXRlLl9jYWNoZVttZXNzYWdlXSkge1xuICAgICAgZGVwcmVjYXRlLl93YXJuKCdEZXByZWNhdGlvbiB3YXJuaW5nOiAnICsgbWVzc2FnZSk7XG4gICAgICBkZXByZWNhdGUuX2NhY2hlW21lc3NhZ2VdID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIFxuICBkZXByZWNhdGUuX2NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgPyBjb25zb2xlIDoge307XG4gIGRlcHJlY2F0ZS5fd2FybiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3YXJuID0gZGVwcmVjYXRlLl9jb25zb2xlLndhcm4gfHwgZGVwcmVjYXRlLl9jb25zb2xlLmxvZyB8fCBmdW5jdGlvbigpIHt9O1xuICAgIHJldHVybiB3YXJuLmFwcGx5KGRlcHJlY2F0ZS5fY29uc29sZSwgYXJndW1lbnRzKTtcbiAgfTtcbiAgZGVwcmVjYXRlLl9jYWNoZSA9IHt9O1xuICBcbiAgLyoganNoaW50IG1heHN0YXRlbWVudHM6IDE0LCBtYXhjb21wbGV4aXR5OiA3ICovXG4gIFxuICAvLyBUcmlnZ2VyIE1ldGhvZFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuICBcbiAgTWFyaW9uZXR0ZS5fdHJpZ2dlck1ldGhvZCA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBzcGxpdCB0aGUgZXZlbnQgbmFtZSBvbiB0aGUgXCI6XCJcbiAgICB2YXIgc3BsaXR0ZXIgPSAvKF58OikoXFx3KS9naTtcbiAgXG4gICAgLy8gdGFrZSB0aGUgZXZlbnQgc2VjdGlvbiAoXCJzZWN0aW9uMTpzZWN0aW9uMjpzZWN0aW9uM1wiKVxuICAgIC8vIGFuZCB0dXJuIGl0IGluIHRvIHVwcGVyY2FzZSBuYW1lXG4gICAgZnVuY3Rpb24gZ2V0RXZlbnROYW1lKG1hdGNoLCBwcmVmaXgsIGV2ZW50TmFtZSkge1xuICAgICAgcmV0dXJuIGV2ZW50TmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvbnRleHQsIGV2ZW50LCBhcmdzKSB7XG4gICAgICB2YXIgbm9FdmVudEFyZyA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuICAgICAgaWYgKG5vRXZlbnRBcmcpIHtcbiAgICAgICAgYXJncyA9IGV2ZW50O1xuICAgICAgICBldmVudCA9IGFyZ3NbMF07XG4gICAgICB9XG4gIFxuICAgICAgLy8gZ2V0IHRoZSBtZXRob2QgbmFtZSBmcm9tIHRoZSBldmVudCBuYW1lXG4gICAgICB2YXIgbWV0aG9kTmFtZSA9ICdvbicgKyBldmVudC5yZXBsYWNlKHNwbGl0dGVyLCBnZXRFdmVudE5hbWUpO1xuICAgICAgdmFyIG1ldGhvZCA9IGNvbnRleHRbbWV0aG9kTmFtZV07XG4gICAgICB2YXIgcmVzdWx0O1xuICBcbiAgICAgIC8vIGNhbGwgdGhlIG9uTWV0aG9kTmFtZSBpZiBpdCBleGlzdHNcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24obWV0aG9kKSkge1xuICAgICAgICAvLyBwYXNzIGFsbCBhcmdzLCBleGNlcHQgdGhlIGV2ZW50IG5hbWVcbiAgICAgICAgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KGNvbnRleHQsIG5vRXZlbnRBcmcgPyBfLnJlc3QoYXJncykgOiBhcmdzKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyB0cmlnZ2VyIHRoZSBldmVudCwgaWYgYSB0cmlnZ2VyIG1ldGhvZCBleGlzdHNcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oY29udGV4dC50cmlnZ2VyKSkge1xuICAgICAgICBpZiAobm9FdmVudEFyZyArIGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvbnRleHQudHJpZ2dlci5hcHBseShjb250ZXh0LCBub0V2ZW50QXJnID8gYXJncyA6IFtldmVudF0uY29uY2F0KF8uZHJvcChhcmdzLCAwKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRleHQudHJpZ2dlcihldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH0pKCk7XG4gIFxuICAvLyBUcmlnZ2VyIGFuIGV2ZW50IGFuZC9vciBhIGNvcnJlc3BvbmRpbmcgbWV0aG9kIG5hbWUuIEV4YW1wbGVzOlxuICAvL1xuICAvLyBgdGhpcy50cmlnZ2VyTWV0aG9kKFwiZm9vXCIpYCB3aWxsIHRyaWdnZXIgdGhlIFwiZm9vXCIgZXZlbnQgYW5kXG4gIC8vIGNhbGwgdGhlIFwib25Gb29cIiBtZXRob2QuXG4gIC8vXG4gIC8vIGB0aGlzLnRyaWdnZXJNZXRob2QoXCJmb286YmFyXCIpYCB3aWxsIHRyaWdnZXIgdGhlIFwiZm9vOmJhclwiIGV2ZW50IGFuZFxuICAvLyBjYWxsIHRoZSBcIm9uRm9vQmFyXCIgbWV0aG9kLlxuICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2QgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHJldHVybiBNYXJpb25ldHRlLl90cmlnZ2VyTWV0aG9kKHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG4gIFxuICAvLyB0cmlnZ2VyTWV0aG9kT24gaW52b2tlcyB0cmlnZ2VyTWV0aG9kIG9uIGEgc3BlY2lmaWMgY29udGV4dFxuICAvL1xuICAvLyBlLmcuIGBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbih2aWV3LCAnc2hvdycpYFxuICAvLyB3aWxsIHRyaWdnZXIgYSBcInNob3dcIiBldmVudCBvciBpbnZva2Ugb25TaG93IHRoZSB2aWV3LlxuICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbiA9IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICB2YXIgZm5jID0gXy5pc0Z1bmN0aW9uKGNvbnRleHQudHJpZ2dlck1ldGhvZCkgP1xuICAgICAgICAgICAgICAgICAgY29udGV4dC50cmlnZ2VyTWV0aG9kIDpcbiAgICAgICAgICAgICAgICAgIE1hcmlvbmV0dGUudHJpZ2dlck1ldGhvZDtcbiAgXG4gICAgcmV0dXJuIGZuYy5hcHBseShjb250ZXh0LCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gIH07XG4gIFxuICAvLyBET00gUmVmcmVzaFxuICAvLyAtLS0tLS0tLS0tLVxuICBcbiAgLy8gTW9uaXRvciBhIHZpZXcncyBzdGF0ZSwgYW5kIGFmdGVyIGl0IGhhcyBiZWVuIHJlbmRlcmVkIGFuZCBzaG93blxuICAvLyBpbiB0aGUgRE9NLCB0cmlnZ2VyIGEgXCJkb206cmVmcmVzaFwiIGV2ZW50IGV2ZXJ5IHRpbWUgaXQgaXNcbiAgLy8gcmUtcmVuZGVyZWQuXG4gIFxuICBNYXJpb25ldHRlLk1vbml0b3JET01SZWZyZXNoID0gZnVuY3Rpb24odmlldykge1xuICAgIGlmICh2aWV3Ll9pc0RvbVJlZnJlc2hNb25pdG9yZWQpIHsgcmV0dXJuOyB9XG4gICAgdmlldy5faXNEb21SZWZyZXNoTW9uaXRvcmVkID0gdHJ1ZTtcbiAgXG4gICAgLy8gdHJhY2sgd2hlbiB0aGUgdmlldyBoYXMgYmVlbiBzaG93biBpbiB0aGUgRE9NLFxuICAgIC8vIHVzaW5nIGEgTWFyaW9uZXR0ZS5SZWdpb24gKG9yIGJ5IG90aGVyIG1lYW5zIG9mIHRyaWdnZXJpbmcgXCJzaG93XCIpXG4gICAgZnVuY3Rpb24gaGFuZGxlU2hvdygpIHtcbiAgICAgIHZpZXcuX2lzU2hvd24gPSB0cnVlO1xuICAgICAgdHJpZ2dlckRPTVJlZnJlc2goKTtcbiAgICB9XG4gIFxuICAgIC8vIHRyYWNrIHdoZW4gdGhlIHZpZXcgaGFzIGJlZW4gcmVuZGVyZWRcbiAgICBmdW5jdGlvbiBoYW5kbGVSZW5kZXIoKSB7XG4gICAgICB2aWV3Ll9pc1JlbmRlcmVkID0gdHJ1ZTtcbiAgICAgIHRyaWdnZXJET01SZWZyZXNoKCk7XG4gICAgfVxuICBcbiAgICAvLyBUcmlnZ2VyIHRoZSBcImRvbTpyZWZyZXNoXCIgZXZlbnQgYW5kIGNvcnJlc3BvbmRpbmcgXCJvbkRvbVJlZnJlc2hcIiBtZXRob2RcbiAgICBmdW5jdGlvbiB0cmlnZ2VyRE9NUmVmcmVzaCgpIHtcbiAgICAgIGlmICh2aWV3Ll9pc1Nob3duICYmIHZpZXcuX2lzUmVuZGVyZWQgJiYgTWFyaW9uZXR0ZS5pc05vZGVBdHRhY2hlZCh2aWV3LmVsKSkge1xuICAgICAgICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbih2aWV3LCAnZG9tOnJlZnJlc2gnLCB2aWV3KTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIHZpZXcub24oe1xuICAgICAgc2hvdzogaGFuZGxlU2hvdyxcbiAgICAgIHJlbmRlcjogaGFuZGxlUmVuZGVyXG4gICAgfSk7XG4gIH07XG4gIFxuICAvKiBqc2hpbnQgbWF4cGFyYW1zOiA1ICovXG4gIFxuICAvLyBCaW5kIEVudGl0eSBFdmVudHMgJiBVbmJpbmQgRW50aXR5IEV2ZW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBUaGVzZSBtZXRob2RzIGFyZSB1c2VkIHRvIGJpbmQvdW5iaW5kIGEgYmFja2JvbmUgXCJlbnRpdHlcIiAoZS5nLiBjb2xsZWN0aW9uL21vZGVsKVxuICAvLyB0byBtZXRob2RzIG9uIGEgdGFyZ2V0IG9iamVjdC5cbiAgLy9cbiAgLy8gVGhlIGZpcnN0IHBhcmFtZXRlciwgYHRhcmdldGAsIG11c3QgaGF2ZSB0aGUgQmFja2JvbmUuRXZlbnRzIG1vZHVsZSBtaXhlZCBpbi5cbiAgLy9cbiAgLy8gVGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGBlbnRpdHlgIChCYWNrYm9uZS5Nb2RlbCwgQmFja2JvbmUuQ29sbGVjdGlvbiBvclxuICAvLyBhbnkgb2JqZWN0IHRoYXQgaGFzIEJhY2tib25lLkV2ZW50cyBtaXhlZCBpbikgdG8gYmluZCB0aGUgZXZlbnRzIGZyb20uXG4gIC8vXG4gIC8vIFRoZSB0aGlyZCBwYXJhbWV0ZXIgaXMgYSBoYXNoIG9mIHsgXCJldmVudDpuYW1lXCI6IFwiZXZlbnRIYW5kbGVyXCIgfVxuICAvLyBjb25maWd1cmF0aW9uLiBNdWx0aXBsZSBoYW5kbGVycyBjYW4gYmUgc2VwYXJhdGVkIGJ5IGEgc3BhY2UuIEFcbiAgLy8gZnVuY3Rpb24gY2FuIGJlIHN1cHBsaWVkIGluc3RlYWQgb2YgYSBzdHJpbmcgaGFuZGxlciBuYW1lLlxuICBcbiAgKGZ1bmN0aW9uKE1hcmlvbmV0dGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gIFxuICAgIC8vIEJpbmQgdGhlIGV2ZW50IHRvIGhhbmRsZXJzIHNwZWNpZmllZCBhcyBhIHN0cmluZyBvZlxuICAgIC8vIGhhbmRsZXIgbmFtZXMgb24gdGhlIHRhcmdldCBvYmplY3RcbiAgICBmdW5jdGlvbiBiaW5kRnJvbVN0cmluZ3ModGFyZ2V0LCBlbnRpdHksIGV2dCwgbWV0aG9kcykge1xuICAgICAgdmFyIG1ldGhvZE5hbWVzID0gbWV0aG9kcy5zcGxpdCgvXFxzKy8pO1xuICBcbiAgICAgIF8uZWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICBcbiAgICAgICAgdmFyIG1ldGhvZCA9IHRhcmdldFttZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcignTWV0aG9kIFwiJyArIG1ldGhvZE5hbWUgK1xuICAgICAgICAgICAgJ1wiIHdhcyBjb25maWd1cmVkIGFzIGFuIGV2ZW50IGhhbmRsZXIsIGJ1dCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgdGFyZ2V0Lmxpc3RlblRvKGVudGl0eSwgZXZ0LCBtZXRob2QpO1xuICAgICAgfSk7XG4gICAgfVxuICBcbiAgICAvLyBCaW5kIHRoZSBldmVudCB0byBhIHN1cHBsaWVkIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgZnVuY3Rpb24gYmluZFRvRnVuY3Rpb24odGFyZ2V0LCBlbnRpdHksIGV2dCwgbWV0aG9kKSB7XG4gICAgICB0YXJnZXQubGlzdGVuVG8oZW50aXR5LCBldnQsIG1ldGhvZCk7XG4gICAgfVxuICBcbiAgICAvLyBCaW5kIHRoZSBldmVudCB0byBoYW5kbGVycyBzcGVjaWZpZWQgYXMgYSBzdHJpbmcgb2ZcbiAgICAvLyBoYW5kbGVyIG5hbWVzIG9uIHRoZSB0YXJnZXQgb2JqZWN0XG4gICAgZnVuY3Rpb24gdW5iaW5kRnJvbVN0cmluZ3ModGFyZ2V0LCBlbnRpdHksIGV2dCwgbWV0aG9kcykge1xuICAgICAgdmFyIG1ldGhvZE5hbWVzID0gbWV0aG9kcy5zcGxpdCgvXFxzKy8pO1xuICBcbiAgICAgIF8uZWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgbWV0aG9kID0gdGFyZ2V0W21ldGhvZE5hbWVdO1xuICAgICAgICB0YXJnZXQuc3RvcExpc3RlbmluZyhlbnRpdHksIGV2dCwgbWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXG4gICAgLy8gQmluZCB0aGUgZXZlbnQgdG8gYSBzdXBwbGllZCBjYWxsYmFjayBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIHVuYmluZFRvRnVuY3Rpb24odGFyZ2V0LCBlbnRpdHksIGV2dCwgbWV0aG9kKSB7XG4gICAgICB0YXJnZXQuc3RvcExpc3RlbmluZyhlbnRpdHksIGV2dCwgbWV0aG9kKTtcbiAgICB9XG4gIFxuICAgIC8vIGdlbmVyaWMgbG9vcGluZyBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIGl0ZXJhdGVFdmVudHModGFyZ2V0LCBlbnRpdHksIGJpbmRpbmdzLCBmdW5jdGlvbkNhbGxiYWNrLCBzdHJpbmdDYWxsYmFjaykge1xuICAgICAgaWYgKCFlbnRpdHkgfHwgIWJpbmRpbmdzKSB7IHJldHVybjsgfVxuICBcbiAgICAgIC8vIHR5cGUtY2hlY2sgYmluZGluZ3NcbiAgICAgIGlmICghXy5pc09iamVjdChiaW5kaW5ncykpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6ICdCaW5kaW5ncyBtdXN0IGJlIGFuIG9iamVjdCBvciBmdW5jdGlvbi4nLFxuICAgICAgICAgIHVybDogJ21hcmlvbmV0dGUuZnVuY3Rpb25zLmh0bWwjbWFyaW9uZXR0ZWJpbmRlbnRpdHlldmVudHMnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICBcbiAgICAgIC8vIGFsbG93IHRoZSBiaW5kaW5ncyB0byBiZSBhIGZ1bmN0aW9uXG4gICAgICBiaW5kaW5ncyA9IE1hcmlvbmV0dGUuX2dldFZhbHVlKGJpbmRpbmdzLCB0YXJnZXQpO1xuICBcbiAgICAgIC8vIGl0ZXJhdGUgdGhlIGJpbmRpbmdzIGFuZCBiaW5kIHRoZW1cbiAgICAgIF8uZWFjaChiaW5kaW5ncywgZnVuY3Rpb24obWV0aG9kcywgZXZ0KSB7XG4gIFxuICAgICAgICAvLyBhbGxvdyBmb3IgYSBmdW5jdGlvbiBhcyB0aGUgaGFuZGxlcixcbiAgICAgICAgLy8gb3IgYSBsaXN0IG9mIGV2ZW50IG5hbWVzIGFzIGEgc3RyaW5nXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24obWV0aG9kcykpIHtcbiAgICAgICAgICBmdW5jdGlvbkNhbGxiYWNrKHRhcmdldCwgZW50aXR5LCBldnQsIG1ldGhvZHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmluZ0NhbGxiYWNrKHRhcmdldCwgZW50aXR5LCBldnQsIG1ldGhvZHMpO1xuICAgICAgICB9XG4gIFxuICAgICAgfSk7XG4gICAgfVxuICBcbiAgICAvLyBFeHBvcnQgUHVibGljIEFQSVxuICAgIE1hcmlvbmV0dGUuYmluZEVudGl0eUV2ZW50cyA9IGZ1bmN0aW9uKHRhcmdldCwgZW50aXR5LCBiaW5kaW5ncykge1xuICAgICAgaXRlcmF0ZUV2ZW50cyh0YXJnZXQsIGVudGl0eSwgYmluZGluZ3MsIGJpbmRUb0Z1bmN0aW9uLCBiaW5kRnJvbVN0cmluZ3MpO1xuICAgIH07XG4gIFxuICAgIE1hcmlvbmV0dGUudW5iaW5kRW50aXR5RXZlbnRzID0gZnVuY3Rpb24odGFyZ2V0LCBlbnRpdHksIGJpbmRpbmdzKSB7XG4gICAgICBpdGVyYXRlRXZlbnRzKHRhcmdldCwgZW50aXR5LCBiaW5kaW5ncywgdW5iaW5kVG9GdW5jdGlvbiwgdW5iaW5kRnJvbVN0cmluZ3MpO1xuICAgIH07XG4gIFxuICAgIC8vIFByb3h5IGBiaW5kRW50aXR5RXZlbnRzYFxuICAgIE1hcmlvbmV0dGUucHJveHlCaW5kRW50aXR5RXZlbnRzID0gZnVuY3Rpb24oZW50aXR5LCBiaW5kaW5ncykge1xuICAgICAgcmV0dXJuIE1hcmlvbmV0dGUuYmluZEVudGl0eUV2ZW50cyh0aGlzLCBlbnRpdHksIGJpbmRpbmdzKTtcbiAgICB9O1xuICBcbiAgICAvLyBQcm94eSBgdW5iaW5kRW50aXR5RXZlbnRzYFxuICAgIE1hcmlvbmV0dGUucHJveHlVbmJpbmRFbnRpdHlFdmVudHMgPSBmdW5jdGlvbihlbnRpdHksIGJpbmRpbmdzKSB7XG4gICAgICByZXR1cm4gTWFyaW9uZXR0ZS51bmJpbmRFbnRpdHlFdmVudHModGhpcywgZW50aXR5LCBiaW5kaW5ncyk7XG4gICAgfTtcbiAgfSkoTWFyaW9uZXR0ZSk7XG4gIFxuXG4gIC8vIEVycm9yXG4gIC8vIC0tLS0tXG4gIFxuICB2YXIgZXJyb3JQcm9wcyA9IFsnZGVzY3JpcHRpb24nLCAnZmlsZU5hbWUnLCAnbGluZU51bWJlcicsICduYW1lJywgJ21lc3NhZ2UnLCAnbnVtYmVyJ107XG4gIFxuICBNYXJpb25ldHRlLkVycm9yID0gTWFyaW9uZXR0ZS5leHRlbmQuY2FsbChFcnJvciwge1xuICAgIHVybFJvb3Q6ICdodHRwOi8vbWFyaW9uZXR0ZWpzLmNvbS9kb2NzL3YnICsgTWFyaW9uZXR0ZS5WRVJTSU9OICsgJy8nLFxuICBcbiAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24obWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgaWYgKF8uaXNPYmplY3QobWVzc2FnZSkpIHtcbiAgICAgICAgb3B0aW9ucyA9IG1lc3NhZ2U7XG4gICAgICAgIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgXG4gICAgICB2YXIgZXJyb3IgPSBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICAgICAgXy5leHRlbmQodGhpcywgXy5waWNrKGVycm9yLCBlcnJvclByb3BzKSwgXy5waWNrKG9wdGlvbnMsIGVycm9yUHJvcHMpKTtcbiAgXG4gICAgICB0aGlzLmNhcHR1cmVTdGFja1RyYWNlKCk7XG4gIFxuICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgIHRoaXMudXJsID0gdGhpcy51cmxSb290ICsgb3B0aW9ucy51cmw7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgY2FwdHVyZVN0YWNrVHJhY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIE1hcmlvbmV0dGUuRXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAnOiAnICsgdGhpcy5tZXNzYWdlICsgKHRoaXMudXJsID8gJyBTZWU6ICcgKyB0aGlzLnVybCA6ICcnKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgTWFyaW9uZXR0ZS5FcnJvci5leHRlbmQgPSBNYXJpb25ldHRlLmV4dGVuZDtcbiAgXG4gIC8vIENhbGxiYWNrc1xuICAvLyAtLS0tLS0tLS1cbiAgXG4gIC8vIEEgc2ltcGxlIHdheSBvZiBtYW5hZ2luZyBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzXG4gIC8vIGFuZCBleGVjdXRpbmcgdGhlbSBhdCBhIGxhdGVyIHBvaW50IGluIHRpbWUsIHVzaW5nIGpRdWVyeSdzXG4gIC8vIGBEZWZlcnJlZGAgb2JqZWN0LlxuICBNYXJpb25ldHRlLkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RlZmVycmVkID0gTWFyaW9uZXR0ZS5EZWZlcnJlZCgpO1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xuICB9O1xuICBcbiAgXy5leHRlbmQoTWFyaW9uZXR0ZS5DYWxsYmFja3MucHJvdG90eXBlLCB7XG4gIFxuICAgIC8vIEFkZCBhIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkLiBDYWxsYmFja3MgYWRkZWQgaGVyZSBhcmVcbiAgICAvLyBndWFyYW50ZWVkIHRvIGV4ZWN1dGUsIGV2ZW4gaWYgdGhleSBhcmUgYWRkZWQgYWZ0ZXIgdGhlXG4gICAgLy8gYHJ1bmAgbWV0aG9kIGlzIGNhbGxlZC5cbiAgICBhZGQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCBjb250ZXh0T3ZlcnJpZGUpIHtcbiAgICAgIHZhciBwcm9taXNlID0gXy5yZXN1bHQodGhpcy5fZGVmZXJyZWQsICdwcm9taXNlJyk7XG4gIFxuICAgICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goe2NiOiBjYWxsYmFjaywgY3R4OiBjb250ZXh0T3ZlcnJpZGV9KTtcbiAgXG4gICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oYXJncykge1xuICAgICAgICBpZiAoY29udGV4dE92ZXJyaWRlKSB7IGFyZ3MuY29udGV4dCA9IGNvbnRleHRPdmVycmlkZTsgfVxuICAgICAgICBjYWxsYmFjay5jYWxsKGFyZ3MuY29udGV4dCwgYXJncy5vcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIC8vIFJ1biBhbGwgcmVnaXN0ZXJlZCBjYWxsYmFja3Mgd2l0aCB0aGUgY29udGV4dCBzcGVjaWZpZWQuXG4gICAgLy8gQWRkaXRpb25hbCBjYWxsYmFja3MgY2FuIGJlIGFkZGVkIGFmdGVyIHRoaXMgaGFzIGJlZW4gcnVuXG4gICAgLy8gYW5kIHRoZXkgd2lsbCBzdGlsbCBiZSBleGVjdXRlZC5cbiAgICBydW46IGZ1bmN0aW9uKG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgICAgIHRoaXMuX2RlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICBjb250ZXh0OiBjb250ZXh0XG4gICAgICB9KTtcbiAgICB9LFxuICBcbiAgICAvLyBSZXNldHMgdGhlIGxpc3Qgb2YgY2FsbGJhY2tzIHRvIGJlIHJ1biwgYWxsb3dpbmcgdGhlIHNhbWUgbGlzdFxuICAgIC8vIHRvIGJlIHJ1biBtdWx0aXBsZSB0aW1lcyAtIHdoZW5ldmVyIHRoZSBgcnVuYCBtZXRob2QgaXMgY2FsbGVkLlxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3M7XG4gICAgICB0aGlzLl9kZWZlcnJlZCA9IE1hcmlvbmV0dGUuRGVmZXJyZWQoKTtcbiAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xuICBcbiAgICAgIF8uZWFjaChjYWxsYmFja3MsIGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgIHRoaXMuYWRkKGNiLmNiLCBjYi5jdHgpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIENvbnRyb2xsZXJcbiAgLy8gLS0tLS0tLS0tLVxuICBcbiAgLy8gQSBtdWx0aS1wdXJwb3NlIG9iamVjdCB0byB1c2UgYXMgYSBjb250cm9sbGVyIGZvclxuICAvLyBtb2R1bGVzIGFuZCByb3V0ZXJzLCBhbmQgYXMgYSBtZWRpYXRvciBmb3Igd29ya2Zsb3dcbiAgLy8gYW5kIGNvb3JkaW5hdGlvbiBvZiBvdGhlciBvYmplY3RzLCB2aWV3cywgYW5kIG1vcmUuXG4gIE1hcmlvbmV0dGUuQ29udHJvbGxlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMuaW5pdGlhbGl6ZSkpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSh0aGlzLm9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgXG4gIE1hcmlvbmV0dGUuQ29udHJvbGxlci5leHRlbmQgPSBNYXJpb25ldHRlLmV4dGVuZDtcbiAgXG4gIC8vIENvbnRyb2xsZXIgTWV0aG9kc1xuICAvLyAtLS0tLS0tLS0tLS0tLVxuICBcbiAgLy8gRW5zdXJlIGl0IGNhbiB0cmlnZ2VyIGV2ZW50cyB3aXRoIEJhY2tib25lLkV2ZW50c1xuICBfLmV4dGVuZChNYXJpb25ldHRlLkNvbnRyb2xsZXIucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMsIHtcbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgIE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QodGhpcywgJ2JlZm9yZTpkZXN0cm95JywgYXJndW1lbnRzKTtcbiAgICAgIE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QodGhpcywgJ2Rlc3Ryb3knLCBhcmd1bWVudHMpO1xuICBcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgdGhpcy5vZmYoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIGltcG9ydCB0aGUgYHRyaWdnZXJNZXRob2RgIHRvIHRyaWdnZXIgZXZlbnRzIHdpdGggY29ycmVzcG9uZGluZ1xuICAgIC8vIG1ldGhvZHMgaWYgdGhlIG1ldGhvZCBleGlzdHNcbiAgICB0cmlnZ2VyTWV0aG9kOiBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2QsXG4gIFxuICAgIC8vIEEgaGFuZHkgd2F5IHRvIG1lcmdlIG9wdGlvbnMgb250byB0aGUgaW5zdGFuY2VcbiAgICBtZXJnZU9wdGlvbnM6IE1hcmlvbmV0dGUubWVyZ2VPcHRpb25zLFxuICBcbiAgICAvLyBQcm94eSBgZ2V0T3B0aW9uYCB0byBlbmFibGUgZ2V0dGluZyBvcHRpb25zIGZyb20gdGhpcyBvciB0aGlzLm9wdGlvbnMgYnkgbmFtZS5cbiAgICBnZXRPcHRpb246IE1hcmlvbmV0dGUucHJveHlHZXRPcHRpb25cbiAgXG4gIH0pO1xuICBcbiAgLy8gT2JqZWN0XG4gIC8vIC0tLS0tLVxuICBcbiAgLy8gQSBCYXNlIENsYXNzIHRoYXQgb3RoZXIgQ2xhc3NlcyBzaG91bGQgZGVzY2VuZCBmcm9tLlxuICAvLyBPYmplY3QgYm9ycm93cyBtYW55IGNvbnZlbnRpb25zIGFuZCB1dGlsaXRpZXMgZnJvbSBCYWNrYm9uZS5cbiAgTWFyaW9uZXR0ZS5PYmplY3QgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gXy5leHRlbmQoe30sIF8ucmVzdWx0KHRoaXMsICdvcHRpb25zJyksIG9wdGlvbnMpO1xuICBcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbiAgXG4gIE1hcmlvbmV0dGUuT2JqZWN0LmV4dGVuZCA9IE1hcmlvbmV0dGUuZXh0ZW5kO1xuICBcbiAgLy8gT2JqZWN0IE1ldGhvZHNcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIEVuc3VyZSBpdCBjYW4gdHJpZ2dlciBldmVudHMgd2l0aCBCYWNrYm9uZS5FdmVudHNcbiAgXy5leHRlbmQoTWFyaW9uZXR0ZS5PYmplY3QucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMsIHtcbiAgXG4gICAgLy90aGlzIGlzIGEgbm9vcCBtZXRob2QgaW50ZW5kZWQgdG8gYmUgb3ZlcnJpZGRlbiBieSBjbGFzc2VzIHRoYXQgZXh0ZW5kIGZyb20gdGhpcyBiYXNlXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fSxcbiAgXG4gICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIFxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6ZGVzdHJveScsIG9wdGlvbnMpO1xuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdkZXN0cm95Jywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICBcbiAgICAvLyBJbXBvcnQgdGhlIGB0cmlnZ2VyTWV0aG9kYCB0byB0cmlnZ2VyIGV2ZW50cyB3aXRoIGNvcnJlc3BvbmRpbmdcbiAgICAvLyBtZXRob2RzIGlmIHRoZSBtZXRob2QgZXhpc3RzXG4gICAgdHJpZ2dlck1ldGhvZDogTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kLFxuICBcbiAgICAvLyBBIGhhbmR5IHdheSB0byBtZXJnZSBvcHRpb25zIG9udG8gdGhlIGluc3RhbmNlXG4gICAgbWVyZ2VPcHRpb25zOiBNYXJpb25ldHRlLm1lcmdlT3B0aW9ucyxcbiAgXG4gICAgLy8gUHJveHkgYGdldE9wdGlvbmAgdG8gZW5hYmxlIGdldHRpbmcgb3B0aW9ucyBmcm9tIHRoaXMgb3IgdGhpcy5vcHRpb25zIGJ5IG5hbWUuXG4gICAgZ2V0T3B0aW9uOiBNYXJpb25ldHRlLnByb3h5R2V0T3B0aW9uLFxuICBcbiAgICAvLyBQcm94eSBgYmluZEVudGl0eUV2ZW50c2AgdG8gZW5hYmxlIGJpbmRpbmcgdmlldydzIGV2ZW50cyBmcm9tIGFub3RoZXIgZW50aXR5LlxuICAgIGJpbmRFbnRpdHlFdmVudHM6IE1hcmlvbmV0dGUucHJveHlCaW5kRW50aXR5RXZlbnRzLFxuICBcbiAgICAvLyBQcm94eSBgdW5iaW5kRW50aXR5RXZlbnRzYCB0byBlbmFibGUgdW5iaW5kaW5nIHZpZXcncyBldmVudHMgZnJvbSBhbm90aGVyIGVudGl0eS5cbiAgICB1bmJpbmRFbnRpdHlFdmVudHM6IE1hcmlvbmV0dGUucHJveHlVbmJpbmRFbnRpdHlFdmVudHNcbiAgfSk7XG4gIFxuICAvKiBqc2hpbnQgbWF4Y29tcGxleGl0eTogMTYsIG1heHN0YXRlbWVudHM6IDQ1LCBtYXhsZW46IDEyMCAqL1xuICBcbiAgLy8gUmVnaW9uXG4gIC8vIC0tLS0tLVxuICBcbiAgLy8gTWFuYWdlIHRoZSB2aXN1YWwgcmVnaW9ucyBvZiB5b3VyIGNvbXBvc2l0ZSBhcHBsaWNhdGlvbi4gU2VlXG4gIC8vIGh0dHA6Ly9sb3N0ZWNoaWVzLmNvbS9kZXJpY2tiYWlsZXkvMjAxMS8xMi8xMi9jb21wb3NpdGUtanMtYXBwcy1yZWdpb25zLWFuZC1yZWdpb24tbWFuYWdlcnMvXG4gIFxuICBNYXJpb25ldHRlLlJlZ2lvbiA9IE1hcmlvbmV0dGUuT2JqZWN0LmV4dGVuZCh7XG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgXG4gICAgICAvLyBzZXQgb3B0aW9ucyB0ZW1wb3JhcmlseSBzbyB0aGF0IHdlIGNhbiBnZXQgYGVsYC5cbiAgICAgIC8vIG9wdGlvbnMgd2lsbCBiZSBvdmVycmlkZW4gYnkgT2JqZWN0LmNvbnN0cnVjdG9yXG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgdGhpcy5lbCA9IHRoaXMuZ2V0T3B0aW9uKCdlbCcpO1xuICBcbiAgICAgIC8vIEhhbmRsZSB3aGVuIHRoaXMuZWwgaXMgcGFzc2VkIGluIGFzIGEgJCB3cmFwcGVkIGVsZW1lbnQuXG4gICAgICB0aGlzLmVsID0gdGhpcy5lbCBpbnN0YW5jZW9mIEJhY2tib25lLiQgPyB0aGlzLmVsWzBdIDogdGhpcy5lbDtcbiAgXG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3Ioe1xuICAgICAgICAgIG5hbWU6ICdOb0VsRXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBbiBcImVsXCIgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIGEgcmVnaW9uLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy4kZWwgPSB0aGlzLmdldEVsKHRoaXMuZWwpO1xuICAgICAgTWFyaW9uZXR0ZS5PYmplY3QuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuICBcbiAgICAvLyBEaXNwbGF5cyBhIGJhY2tib25lIHZpZXcgaW5zdGFuY2UgaW5zaWRlIG9mIHRoZSByZWdpb24uXG4gICAgLy8gSGFuZGxlcyBjYWxsaW5nIHRoZSBgcmVuZGVyYCBtZXRob2QgZm9yIHlvdS4gUmVhZHMgY29udGVudFxuICAgIC8vIGRpcmVjdGx5IGZyb20gdGhlIGBlbGAgYXR0cmlidXRlLiBBbHNvIGNhbGxzIGFuIG9wdGlvbmFsXG4gICAgLy8gYG9uU2hvd2AgYW5kIGBvbkRlc3Ryb3lgIG1ldGhvZCBvbiB5b3VyIHZpZXcsIGp1c3QgYWZ0ZXIgc2hvd2luZ1xuICAgIC8vIG9yIGp1c3QgYmVmb3JlIGRlc3Ryb3lpbmcgdGhlIHZpZXcsIHJlc3BlY3RpdmVseS5cbiAgICAvLyBUaGUgYHByZXZlbnREZXN0cm95YCBvcHRpb24gY2FuIGJlIHVzZWQgdG8gcHJldmVudCBhIHZpZXcgZnJvbVxuICAgIC8vIHRoZSBvbGQgdmlldyBiZWluZyBkZXN0cm95ZWQgb24gc2hvdy5cbiAgICAvLyBUaGUgYGZvcmNlU2hvd2Agb3B0aW9uIGNhbiBiZSB1c2VkIHRvIGZvcmNlIGEgdmlldyB0byBiZVxuICAgIC8vIHJlLXJlbmRlcmVkIGlmIGl0J3MgYWxyZWFkeSBzaG93biBpbiB0aGUgcmVnaW9uLlxuICAgIHNob3c6IGZ1bmN0aW9uKHZpZXcsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghdGhpcy5fZW5zdXJlRWxlbWVudCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICB0aGlzLl9lbnN1cmVWaWV3SXNJbnRhY3Qodmlldyk7XG4gICAgICBNYXJpb25ldHRlLk1vbml0b3JET01SZWZyZXNoKHZpZXcpO1xuICBcbiAgICAgIHZhciBzaG93T3B0aW9ucyAgICAgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIGlzRGlmZmVyZW50VmlldyA9IHZpZXcgIT09IHRoaXMuY3VycmVudFZpZXc7XG4gICAgICB2YXIgcHJldmVudERlc3Ryb3kgID0gISFzaG93T3B0aW9ucy5wcmV2ZW50RGVzdHJveTtcbiAgICAgIHZhciBmb3JjZVNob3cgICAgICAgPSAhIXNob3dPcHRpb25zLmZvcmNlU2hvdztcbiAgXG4gICAgICAvLyBXZSBhcmUgb25seSBjaGFuZ2luZyB0aGUgdmlldyBpZiB0aGVyZSBpcyBhIGN1cnJlbnQgdmlldyB0byBjaGFuZ2UgdG8gYmVnaW4gd2l0aFxuICAgICAgdmFyIGlzQ2hhbmdpbmdWaWV3ID0gISF0aGlzLmN1cnJlbnRWaWV3O1xuICBcbiAgICAgIC8vIE9ubHkgZGVzdHJveSB0aGUgY3VycmVudCB2aWV3IGlmIHdlIGRvbid0IHdhbnQgdG8gYHByZXZlbnREZXN0cm95YCBhbmQgaWZcbiAgICAgIC8vIHRoZSB2aWV3IGdpdmVuIGluIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBkaWZmZXJlbnQgdGhhbiBgY3VycmVudFZpZXdgXG4gICAgICB2YXIgX3Nob3VsZERlc3Ryb3lWaWV3ID0gaXNEaWZmZXJlbnRWaWV3ICYmICFwcmV2ZW50RGVzdHJveTtcbiAgXG4gICAgICAvLyBPbmx5IHNob3cgdGhlIHZpZXcgZ2l2ZW4gaW4gdGhlIGZpcnN0IGFyZ3VtZW50IGlmIGl0IGlzIGRpZmZlcmVudCB0aGFuXG4gICAgICAvLyB0aGUgY3VycmVudCB2aWV3IG9yIGlmIHdlIHdhbnQgdG8gcmUtc2hvdyB0aGUgdmlldy4gTm90ZSB0aGF0IGlmXG4gICAgICAvLyBgX3Nob3VsZERlc3Ryb3lWaWV3YCBpcyB0cnVlLCB0aGVuIGBfc2hvdWxkU2hvd1ZpZXdgIGlzIGFsc28gbmVjZXNzYXJpbHkgdHJ1ZS5cbiAgICAgIHZhciBfc2hvdWxkU2hvd1ZpZXcgPSBpc0RpZmZlcmVudFZpZXcgfHwgZm9yY2VTaG93O1xuICBcbiAgICAgIGlmIChpc0NoYW5naW5nVmlldykge1xuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpzd2FwT3V0JywgdGhpcy5jdXJyZW50VmlldywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHRoaXMuY3VycmVudFZpZXcgJiYgaXNEaWZmZXJlbnRWaWV3KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRWaWV3Ll9wYXJlbnQ7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKF9zaG91bGREZXN0cm95Vmlldykge1xuICAgICAgICB0aGlzLmVtcHR5KCk7XG4gIFxuICAgICAgLy8gQSBgZGVzdHJveWAgZXZlbnQgaXMgYXR0YWNoZWQgdG8gdGhlIGNsZWFuIHVwIG1hbnVhbGx5IHJlbW92ZWQgdmlld3MuXG4gICAgICAvLyBXZSBuZWVkIHRvIGRldGFjaCB0aGlzIGV2ZW50IHdoZW4gYSBuZXcgdmlldyBpcyBnb2luZyB0byBiZSBzaG93biBhcyBpdFxuICAgICAgLy8gaXMgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgICAgfSBlbHNlIGlmIChpc0NoYW5naW5nVmlldyAmJiBfc2hvdWxkU2hvd1ZpZXcpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Vmlldy5vZmYoJ2Rlc3Ryb3knLCB0aGlzLmVtcHR5LCB0aGlzKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoX3Nob3VsZFNob3dWaWV3KSB7XG4gIFxuICAgICAgICAvLyBXZSBuZWVkIHRvIGxpc3RlbiBmb3IgaWYgYSB2aWV3IGlzIGRlc3Ryb3llZFxuICAgICAgICAvLyBpbiBhIHdheSBvdGhlciB0aGFuIHRocm91Z2ggdGhlIHJlZ2lvbi5cbiAgICAgICAgLy8gSWYgdGhpcyBoYXBwZW5zIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSByZWZlcmVuY2VcbiAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnRWaWV3IHNpbmNlIG9uY2UgYSB2aWV3IGhhcyBiZWVuIGRlc3Ryb3llZFxuICAgICAgICAvLyB3ZSBjYW4gbm90IHJldXNlIGl0LlxuICAgICAgICB2aWV3Lm9uY2UoJ2Rlc3Ryb3knLCB0aGlzLmVtcHR5LCB0aGlzKTtcbiAgXG4gICAgICAgIC8vIG1ha2UgdGhpcyByZWdpb24gdGhlIHZpZXcncyBwYXJlbnQsXG4gICAgICAgIC8vIEl0J3MgaW1wb3J0YW50IHRoYXQgdGhpcyBwYXJlbnQgYmluZGluZyBoYXBwZW5zIGJlZm9yZSByZW5kZXJpbmdcbiAgICAgICAgLy8gc28gdGhhdCBhbnkgZXZlbnRzIHRoZSBjaGlsZCBtYXkgdHJpZ2dlciBkdXJpbmcgcmVuZGVyIGNhbiBhbHNvIGJlXG4gICAgICAgIC8vIHRyaWdnZXJlZCBvbiB0aGUgY2hpbGQncyBhbmNlc3RvciB2aWV3c1xuICAgICAgICB2aWV3Ll9wYXJlbnQgPSB0aGlzO1xuICAgICAgICB0aGlzLl9yZW5kZXJWaWV3KHZpZXcpO1xuICBcbiAgICAgICAgaWYgKGlzQ2hhbmdpbmdWaWV3KSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6c3dhcCcsIHZpZXcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gIFxuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpzaG93JywgdmlldywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIE1hcmlvbmV0dGUudHJpZ2dlck1ldGhvZE9uKHZpZXcsICdiZWZvcmU6c2hvdycsIHZpZXcsIHRoaXMsIG9wdGlvbnMpO1xuICBcbiAgICAgICAgaWYgKGlzQ2hhbmdpbmdWaWV3KSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdzd2FwT3V0JywgdGhpcy5jdXJyZW50VmlldywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIEFuIGFycmF5IG9mIHZpZXdzIHRoYXQgd2UncmUgYWJvdXQgdG8gZGlzcGxheVxuICAgICAgICB2YXIgYXR0YWNoZWRSZWdpb24gPSBNYXJpb25ldHRlLmlzTm9kZUF0dGFjaGVkKHRoaXMuZWwpO1xuICBcbiAgICAgICAgLy8gVGhlIHZpZXdzIHRoYXQgd2UncmUgYWJvdXQgdG8gYXR0YWNoIHRvIHRoZSBkb2N1bWVudFxuICAgICAgICAvLyBJdCdzIGltcG9ydGFudCB0aGF0IHdlIHByZXZlbnQgX2dldE5lc3RlZFZpZXdzIGZyb20gYmVpbmcgZXhlY3V0ZWQgdW5uZWNlc3NhcmlseVxuICAgICAgICAvLyBhcyBpdCdzIGEgcG90ZW50aWFsbHktc2xvdyBtZXRob2RcbiAgICAgICAgdmFyIGRpc3BsYXllZFZpZXdzID0gW107XG4gIFxuICAgICAgICB2YXIgYXR0YWNoT3B0aW9ucyA9IF8uZXh0ZW5kKHtcbiAgICAgICAgICB0cmlnZ2VyQmVmb3JlQXR0YWNoOiB0aGlzLnRyaWdnZXJCZWZvcmVBdHRhY2gsXG4gICAgICAgICAgdHJpZ2dlckF0dGFjaDogdGhpcy50cmlnZ2VyQXR0YWNoXG4gICAgICAgIH0sIHNob3dPcHRpb25zKTtcbiAgXG4gICAgICAgIGlmIChhdHRhY2hlZFJlZ2lvbiAmJiBhdHRhY2hPcHRpb25zLnRyaWdnZXJCZWZvcmVBdHRhY2gpIHtcbiAgICAgICAgICBkaXNwbGF5ZWRWaWV3cyA9IHRoaXMuX2Rpc3BsYXllZFZpZXdzKHZpZXcpO1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJBdHRhY2goZGlzcGxheWVkVmlld3MsICdiZWZvcmU6Jyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHRoaXMuYXR0YWNoSHRtbCh2aWV3KTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IHZpZXc7XG4gIFxuICAgICAgICBpZiAoYXR0YWNoZWRSZWdpb24gJiYgYXR0YWNoT3B0aW9ucy50cmlnZ2VyQXR0YWNoKSB7XG4gICAgICAgICAgZGlzcGxheWVkVmlld3MgPSB0aGlzLl9kaXNwbGF5ZWRWaWV3cyh2aWV3KTtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyQXR0YWNoKGRpc3BsYXllZFZpZXdzKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzQ2hhbmdpbmdWaWV3KSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdzd2FwJywgdmlldywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnc2hvdycsIHZpZXcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbih2aWV3LCAnc2hvdycsIHZpZXcsIHRoaXMsIG9wdGlvbnMpO1xuICBcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgdHJpZ2dlckJlZm9yZUF0dGFjaDogdHJ1ZSxcbiAgICB0cmlnZ2VyQXR0YWNoOiB0cnVlLFxuICBcbiAgICBfdHJpZ2dlckF0dGFjaDogZnVuY3Rpb24odmlld3MsIHByZWZpeCkge1xuICAgICAgdmFyIGV2ZW50TmFtZSA9IChwcmVmaXggfHwgJycpICsgJ2F0dGFjaCc7XG4gICAgICBfLmVhY2godmlld3MsIGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgZXZlbnROYW1lLCB2aWV3LCB0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gIFxuICAgIF9kaXNwbGF5ZWRWaWV3czogZnVuY3Rpb24odmlldykge1xuICAgICAgcmV0dXJuIF8udW5pb24oW3ZpZXddLCBfLnJlc3VsdCh2aWV3LCAnX2dldE5lc3RlZFZpZXdzJykgfHwgW10pO1xuICAgIH0sXG4gIFxuICAgIF9yZW5kZXJWaWV3OiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICBpZiAoIXZpZXcuc3VwcG9ydHNSZW5kZXJMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2JlZm9yZTpyZW5kZXInLCB2aWV3KTtcbiAgICAgIH1cbiAgICAgIHZpZXcucmVuZGVyKCk7XG4gICAgICBpZiAoIXZpZXcuc3VwcG9ydHNSZW5kZXJMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ3JlbmRlcicsIHZpZXcpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIF9lbnN1cmVFbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghXy5pc09iamVjdCh0aGlzLmVsKSkge1xuICAgICAgICB0aGlzLiRlbCA9IHRoaXMuZ2V0RWwodGhpcy5lbCk7XG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbFswXTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoIXRoaXMuJGVsIHx8IHRoaXMuJGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAodGhpcy5nZXRPcHRpb24oJ2FsbG93TWlzc2luZ0VsJykpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3IoJ0FuIFwiZWxcIiAnICsgdGhpcy4kZWwuc2VsZWN0b3IgKyAnIG11c3QgZXhpc3QgaW4gRE9NJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gIFxuICAgIF9lbnN1cmVWaWV3SXNJbnRhY3Q6IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgIGlmICghdmlldykge1xuICAgICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcih7XG4gICAgICAgICAgbmFtZTogJ1ZpZXdOb3RWYWxpZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1RoZSB2aWV3IHBhc3NlZCBpcyB1bmRlZmluZWQgYW5kIHRoZXJlZm9yZSBpbnZhbGlkLiBZb3UgbXVzdCBwYXNzIGEgdmlldyBpbnN0YW5jZSB0byBzaG93LidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHZpZXcuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3Ioe1xuICAgICAgICAgIG5hbWU6ICdWaWV3RGVzdHJveWVkRXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWaWV3IChjaWQ6IFwiJyArIHZpZXcuY2lkICsgJ1wiKSBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZCBhbmQgY2Fubm90IGJlIHVzZWQuJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgaG93IHRoZSByZWdpb24gZmluZHMgdGhlIERPTVxuICAgIC8vIGVsZW1lbnQgdGhhdCBpdCBtYW5hZ2VzLiBSZXR1cm4gYSBqUXVlcnkgc2VsZWN0b3Igb2JqZWN0IHNjb3BlZFxuICAgIC8vIHRvIGEgcHJvdmlkZWQgcGFyZW50IGVsIG9yIHRoZSBkb2N1bWVudCBpZiBub25lIGV4aXN0cy5cbiAgICBnZXRFbDogZnVuY3Rpb24oZWwpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS4kKGVsLCBNYXJpb25ldHRlLl9nZXRWYWx1ZSh0aGlzLm9wdGlvbnMucGFyZW50RWwsIHRoaXMpKTtcbiAgICB9LFxuICBcbiAgICAvLyBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgaG93IHRoZSBuZXcgdmlldyBpc1xuICAgIC8vIGFwcGVuZGVkIHRvIHRoZSBgJGVsYCB0aGF0IHRoZSByZWdpb24gaXMgbWFuYWdpbmdcbiAgICBhdHRhY2hIdG1sOiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICB0aGlzLiRlbC5jb250ZW50cygpLmRldGFjaCgpO1xuICBcbiAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodmlldy5lbCk7XG4gICAgfSxcbiAgXG4gICAgLy8gRGVzdHJveSB0aGUgY3VycmVudCB2aWV3LCBpZiB0aGVyZSBpcyBvbmUuIElmIHRoZXJlIGlzIG5vXG4gICAgLy8gY3VycmVudCB2aWV3LCBpdCBkb2VzIG5vdGhpbmcgYW5kIHJldHVybnMgaW1tZWRpYXRlbHkuXG4gICAgZW1wdHk6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciB2aWV3ID0gdGhpcy5jdXJyZW50VmlldztcbiAgXG4gICAgICB2YXIgZW1wdHlPcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciBwcmV2ZW50RGVzdHJveSAgPSAhIWVtcHR5T3B0aW9ucy5wcmV2ZW50RGVzdHJveTtcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHZpZXcgaW4gdGhlIHJlZ2lvblxuICAgICAgLy8gd2Ugc2hvdWxkIG5vdCByZW1vdmUgYW55dGhpbmdcbiAgICAgIGlmICghdmlldykgeyByZXR1cm4gdGhpczsgfVxuICBcbiAgICAgIHZpZXcub2ZmKCdkZXN0cm95JywgdGhpcy5lbXB0eSwgdGhpcyk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTplbXB0eScsIHZpZXcpO1xuICAgICAgaWYgKCFwcmV2ZW50RGVzdHJveSkge1xuICAgICAgICB0aGlzLl9kZXN0cm95VmlldygpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdlbXB0eScsIHZpZXcpO1xuICBcbiAgICAgIC8vIFJlbW92ZSByZWdpb24gcG9pbnRlciB0byB0aGUgY3VycmVudFZpZXdcbiAgICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRWaWV3O1xuICBcbiAgICAgIGlmIChwcmV2ZW50RGVzdHJveSkge1xuICAgICAgICB0aGlzLiRlbC5jb250ZW50cygpLmRldGFjaCgpO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIGNhbGwgJ2Rlc3Ryb3knIG9yICdyZW1vdmUnLCBkZXBlbmRpbmcgb24gd2hpY2ggaXMgZm91bmRcbiAgICAvLyBvbiB0aGUgdmlldyAoaWYgc2hvd2luZyBhIHJhdyBCYWNrYm9uZSB2aWV3IG9yIGEgTWFyaW9uZXR0ZSBWaWV3KVxuICAgIF9kZXN0cm95VmlldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmlldyA9IHRoaXMuY3VycmVudFZpZXc7XG4gICAgICBpZiAodmlldy5pc0Rlc3Ryb3llZCkgeyByZXR1cm47IH1cbiAgXG4gICAgICBpZiAoIXZpZXcuc3VwcG9ydHNEZXN0cm95TGlmZWN5Y2xlKSB7XG4gICAgICAgIE1hcmlvbmV0dGUudHJpZ2dlck1ldGhvZE9uKHZpZXcsICdiZWZvcmU6ZGVzdHJveScsIHZpZXcpO1xuICAgICAgfVxuICAgICAgaWYgKHZpZXcuZGVzdHJveSkge1xuICAgICAgICB2aWV3LmRlc3Ryb3koKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcucmVtb3ZlKCk7XG4gIFxuICAgICAgICAvLyBhcHBlbmRpbmcgaXNEZXN0cm95ZWQgdG8gcmF3IEJhY2tib25lIFZpZXcgYWxsb3dzIHJlZ2lvbnNcbiAgICAgICAgLy8gdG8gdGhyb3cgYSBWaWV3RGVzdHJveWVkRXJyb3IgZm9yIHRoaXMgdmlld1xuICAgICAgICB2aWV3LmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmlldy5zdXBwb3J0c0Rlc3Ryb3lMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2Rlc3Ryb3knLCB2aWV3KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBBdHRhY2ggYW4gZXhpc3RpbmcgdmlldyB0byB0aGUgcmVnaW9uLiBUaGlzXG4gICAgLy8gd2lsbCBub3QgY2FsbCBgcmVuZGVyYCBvciBgb25TaG93YCBmb3IgdGhlIG5ldyB2aWV3LFxuICAgIC8vIGFuZCB3aWxsIG5vdCByZXBsYWNlIHRoZSBjdXJyZW50IEhUTUwgZm9yIHRoZSBgZWxgXG4gICAgLy8gb2YgdGhlIHJlZ2lvbi5cbiAgICBhdHRhY2hWaWV3OiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50Vmlldykge1xuICAgICAgICBkZWxldGUgdGhpcy5jdXJyZW50Vmlldy5fcGFyZW50O1xuICAgICAgfVxuICAgICAgdmlldy5fcGFyZW50ID0gdGhpcztcbiAgICAgIHRoaXMuY3VycmVudFZpZXcgPSB2aWV3O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gQ2hlY2tzIHdoZXRoZXIgYSB2aWV3IGlzIGN1cnJlbnRseSBwcmVzZW50IHdpdGhpblxuICAgIC8vIHRoZSByZWdpb24uIFJldHVybnMgYHRydWVgIGlmIHRoZXJlIGlzIGFuZCBgZmFsc2VgIGlmXG4gICAgLy8gbm8gdmlldyBpcyBwcmVzZW50LlxuICAgIGhhc1ZpZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdXJyZW50VmlldztcbiAgICB9LFxuICBcbiAgICAvLyBSZXNldCB0aGUgcmVnaW9uIGJ5IGRlc3Ryb3lpbmcgYW55IGV4aXN0aW5nIHZpZXcgYW5kXG4gICAgLy8gY2xlYXJpbmcgb3V0IHRoZSBjYWNoZWQgYCRlbGAuIFRoZSBuZXh0IHRpbWUgYSB2aWV3XG4gICAgLy8gaXMgc2hvd24gdmlhIHRoaXMgcmVnaW9uLCB0aGUgcmVnaW9uIHdpbGwgcmUtcXVlcnkgdGhlXG4gICAgLy8gRE9NIGZvciB0aGUgcmVnaW9uJ3MgYGVsYC5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVtcHR5KCk7XG4gIFxuICAgICAgaWYgKHRoaXMuJGVsKSB7XG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbC5zZWxlY3RvcjtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGUgdGhpcy4kZWw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIFxuICB9LFxuICBcbiAgLy8gU3RhdGljIE1ldGhvZHNcbiAge1xuICBcbiAgICAvLyBCdWlsZCBhbiBpbnN0YW5jZSBvZiBhIHJlZ2lvbiBieSBwYXNzaW5nIGluIGEgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAvLyBhbmQgYSBkZWZhdWx0IHJlZ2lvbiBjbGFzcyB0byB1c2UgaWYgbm9uZSBpcyBzcGVjaWZpZWQgaW4gdGhlIGNvbmZpZy5cbiAgICAvL1xuICAgIC8vIFRoZSBjb25maWcgb2JqZWN0IHNob3VsZCBlaXRoZXIgYmUgYSBzdHJpbmcgYXMgYSBqUXVlcnkgRE9NIHNlbGVjdG9yLFxuICAgIC8vIGEgUmVnaW9uIGNsYXNzIGRpcmVjdGx5LCBvciBhbiBvYmplY3QgbGl0ZXJhbCB0aGF0IHNwZWNpZmllcyBhIHNlbGVjdG9yLFxuICAgIC8vIGEgY3VzdG9tIHJlZ2lvbkNsYXNzLCBhbmQgYW55IG9wdGlvbnMgdG8gYmUgc3VwcGxpZWQgdG8gdGhlIHJlZ2lvbjpcbiAgICAvL1xuICAgIC8vIGBgYGpzXG4gICAgLy8ge1xuICAgIC8vICAgc2VsZWN0b3I6IFwiI2Zvb1wiLFxuICAgIC8vICAgcmVnaW9uQ2xhc3M6IE15Q3VzdG9tUmVnaW9uLFxuICAgIC8vICAgYWxsb3dNaXNzaW5nRWw6IGZhbHNlXG4gICAgLy8gfVxuICAgIC8vIGBgYFxuICAgIC8vXG4gICAgYnVpbGRSZWdpb246IGZ1bmN0aW9uKHJlZ2lvbkNvbmZpZywgRGVmYXVsdFJlZ2lvbkNsYXNzKSB7XG4gICAgICBpZiAoXy5pc1N0cmluZyhyZWdpb25Db25maWcpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZFJlZ2lvbkZyb21TZWxlY3RvcihyZWdpb25Db25maWcsIERlZmF1bHRSZWdpb25DbGFzcyk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHJlZ2lvbkNvbmZpZy5zZWxlY3RvciB8fCByZWdpb25Db25maWcuZWwgfHwgcmVnaW9uQ29uZmlnLnJlZ2lvbkNsYXNzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWlsZFJlZ2lvbkZyb21PYmplY3QocmVnaW9uQ29uZmlnLCBEZWZhdWx0UmVnaW9uQ2xhc3MpO1xuICAgICAgfVxuICBcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ocmVnaW9uQ29uZmlnKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGRSZWdpb25Gcm9tUmVnaW9uQ2xhc3MocmVnaW9uQ29uZmlnKTtcbiAgICAgIH1cbiAgXG4gICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6ICdJbXByb3BlciByZWdpb24gY29uZmlndXJhdGlvbiB0eXBlLicsXG4gICAgICAgIHVybDogJ21hcmlvbmV0dGUucmVnaW9uLmh0bWwjcmVnaW9uLWNvbmZpZ3VyYXRpb24tdHlwZXMnXG4gICAgICB9KTtcbiAgICB9LFxuICBcbiAgICAvLyBCdWlsZCB0aGUgcmVnaW9uIGZyb20gYSBzdHJpbmcgc2VsZWN0b3IgbGlrZSAnI2Zvby1yZWdpb24nXG4gICAgX2J1aWxkUmVnaW9uRnJvbVNlbGVjdG9yOiBmdW5jdGlvbihzZWxlY3RvciwgRGVmYXVsdFJlZ2lvbkNsYXNzKSB7XG4gICAgICByZXR1cm4gbmV3IERlZmF1bHRSZWdpb25DbGFzcyh7ZWw6IHNlbGVjdG9yfSk7XG4gICAgfSxcbiAgXG4gICAgLy8gQnVpbGQgdGhlIHJlZ2lvbiBmcm9tIGEgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAvLyBgYGBqc1xuICAgIC8vIHsgc2VsZWN0b3I6ICcjZm9vJywgcmVnaW9uQ2xhc3M6IEZvb1JlZ2lvbiwgYWxsb3dNaXNzaW5nRWw6IGZhbHNlIH1cbiAgICAvLyBgYGBcbiAgICBfYnVpbGRSZWdpb25Gcm9tT2JqZWN0OiBmdW5jdGlvbihyZWdpb25Db25maWcsIERlZmF1bHRSZWdpb25DbGFzcykge1xuICAgICAgdmFyIFJlZ2lvbkNsYXNzID0gcmVnaW9uQ29uZmlnLnJlZ2lvbkNsYXNzIHx8IERlZmF1bHRSZWdpb25DbGFzcztcbiAgICAgIHZhciBvcHRpb25zID0gXy5vbWl0KHJlZ2lvbkNvbmZpZywgJ3NlbGVjdG9yJywgJ3JlZ2lvbkNsYXNzJyk7XG4gIFxuICAgICAgaWYgKHJlZ2lvbkNvbmZpZy5zZWxlY3RvciAmJiAhb3B0aW9ucy5lbCkge1xuICAgICAgICBvcHRpb25zLmVsID0gcmVnaW9uQ29uZmlnLnNlbGVjdG9yO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBuZXcgUmVnaW9uQ2xhc3Mob3B0aW9ucyk7XG4gICAgfSxcbiAgXG4gICAgLy8gQnVpbGQgdGhlIHJlZ2lvbiBkaXJlY3RseSBmcm9tIGEgZ2l2ZW4gYFJlZ2lvbkNsYXNzYFxuICAgIF9idWlsZFJlZ2lvbkZyb21SZWdpb25DbGFzczogZnVuY3Rpb24oUmVnaW9uQ2xhc3MpIHtcbiAgICAgIHJldHVybiBuZXcgUmVnaW9uQ2xhc3MoKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gUmVnaW9uIE1hbmFnZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIE1hbmFnZSBvbmUgb3IgbW9yZSByZWxhdGVkIGBNYXJpb25ldHRlLlJlZ2lvbmAgb2JqZWN0cy5cbiAgTWFyaW9uZXR0ZS5SZWdpb25NYW5hZ2VyID0gTWFyaW9uZXR0ZS5Db250cm9sbGVyLmV4dGVuZCh7XG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX3JlZ2lvbnMgPSB7fTtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgXG4gICAgICBNYXJpb25ldHRlLkNvbnRyb2xsZXIuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgXG4gICAgICB0aGlzLmFkZFJlZ2lvbnModGhpcy5nZXRPcHRpb24oJ3JlZ2lvbnMnKSk7XG4gICAgfSxcbiAgXG4gICAgLy8gQWRkIG11bHRpcGxlIHJlZ2lvbnMgdXNpbmcgYW4gb2JqZWN0IGxpdGVyYWwgb3IgYVxuICAgIC8vIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYmplY3QgbGl0ZXJhbCwgd2hlcmVcbiAgICAvLyBlYWNoIGtleSBiZWNvbWVzIHRoZSByZWdpb24gbmFtZSwgYW5kIGVhY2ggdmFsdWUgaXNcbiAgICAvLyB0aGUgcmVnaW9uIGRlZmluaXRpb24uXG4gICAgYWRkUmVnaW9uczogZnVuY3Rpb24ocmVnaW9uRGVmaW5pdGlvbnMsIGRlZmF1bHRzKSB7XG4gICAgICByZWdpb25EZWZpbml0aW9ucyA9IE1hcmlvbmV0dGUuX2dldFZhbHVlKHJlZ2lvbkRlZmluaXRpb25zLCB0aGlzLCBhcmd1bWVudHMpO1xuICBcbiAgICAgIHJldHVybiBfLnJlZHVjZShyZWdpb25EZWZpbml0aW9ucywgZnVuY3Rpb24ocmVnaW9ucywgZGVmaW5pdGlvbiwgbmFtZSkge1xuICAgICAgICBpZiAoXy5pc1N0cmluZyhkZWZpbml0aW9uKSkge1xuICAgICAgICAgIGRlZmluaXRpb24gPSB7c2VsZWN0b3I6IGRlZmluaXRpb259O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZpbml0aW9uLnNlbGVjdG9yKSB7XG4gICAgICAgICAgZGVmaW5pdGlvbiA9IF8uZGVmYXVsdHMoe30sIGRlZmluaXRpb24sIGRlZmF1bHRzKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgcmVnaW9uc1tuYW1lXSA9IHRoaXMuYWRkUmVnaW9uKG5hbWUsIGRlZmluaXRpb24pO1xuICAgICAgICByZXR1cm4gcmVnaW9ucztcbiAgICAgIH0sIHt9LCB0aGlzKTtcbiAgICB9LFxuICBcbiAgICAvLyBBZGQgYW4gaW5kaXZpZHVhbCByZWdpb24gdG8gdGhlIHJlZ2lvbiBtYW5hZ2VyLFxuICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlZ2lvbiBpbnN0YW5jZVxuICAgIGFkZFJlZ2lvbjogZnVuY3Rpb24obmFtZSwgZGVmaW5pdGlvbikge1xuICAgICAgdmFyIHJlZ2lvbjtcbiAgXG4gICAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIE1hcmlvbmV0dGUuUmVnaW9uKSB7XG4gICAgICAgIHJlZ2lvbiA9IGRlZmluaXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWdpb24gPSBNYXJpb25ldHRlLlJlZ2lvbi5idWlsZFJlZ2lvbihkZWZpbml0aW9uLCBNYXJpb25ldHRlLlJlZ2lvbik7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6YWRkOnJlZ2lvbicsIG5hbWUsIHJlZ2lvbik7XG4gIFxuICAgICAgcmVnaW9uLl9wYXJlbnQgPSB0aGlzO1xuICAgICAgdGhpcy5fc3RvcmUobmFtZSwgcmVnaW9uKTtcbiAgXG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2FkZDpyZWdpb24nLCBuYW1lLCByZWdpb24pO1xuICAgICAgcmV0dXJuIHJlZ2lvbjtcbiAgICB9LFxuICBcbiAgICAvLyBHZXQgYSByZWdpb24gYnkgbmFtZVxuICAgIGdldDogZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lvbnNbbmFtZV07XG4gICAgfSxcbiAgXG4gICAgLy8gR2V0cyBhbGwgdGhlIHJlZ2lvbnMgY29udGFpbmVkIHdpdGhpblxuICAgIC8vIHRoZSBgcmVnaW9uTWFuYWdlcmAgaW5zdGFuY2UuXG4gICAgZ2V0UmVnaW9uczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLl9yZWdpb25zKTtcbiAgICB9LFxuICBcbiAgICAvLyBSZW1vdmUgYSByZWdpb24gYnkgbmFtZVxuICAgIHJlbW92ZVJlZ2lvbjogZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIHJlZ2lvbiA9IHRoaXMuX3JlZ2lvbnNbbmFtZV07XG4gICAgICB0aGlzLl9yZW1vdmUobmFtZSwgcmVnaW9uKTtcbiAgXG4gICAgICByZXR1cm4gcmVnaW9uO1xuICAgIH0sXG4gIFxuICAgIC8vIEVtcHR5IGFsbCByZWdpb25zIGluIHRoZSByZWdpb24gbWFuYWdlciwgYW5kXG4gICAgLy8gcmVtb3ZlIHRoZW1cbiAgICByZW1vdmVSZWdpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWdpb25zID0gdGhpcy5nZXRSZWdpb25zKCk7XG4gICAgICBfLmVhY2godGhpcy5fcmVnaW9ucywgZnVuY3Rpb24ocmVnaW9uLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZShuYW1lLCByZWdpb24pO1xuICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgcmV0dXJuIHJlZ2lvbnM7XG4gICAgfSxcbiAgXG4gICAgLy8gRW1wdHkgYWxsIHJlZ2lvbnMgaW4gdGhlIHJlZ2lvbiBtYW5hZ2VyLCBidXRcbiAgICAvLyBsZWF2ZSB0aGVtIGF0dGFjaGVkXG4gICAgZW1wdHlSZWdpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWdpb25zID0gdGhpcy5nZXRSZWdpb25zKCk7XG4gICAgICBfLmludm9rZShyZWdpb25zLCAnZW1wdHknKTtcbiAgICAgIHJldHVybiByZWdpb25zO1xuICAgIH0sXG4gIFxuICAgIC8vIERlc3Ryb3kgYWxsIHJlZ2lvbnMgYW5kIHNodXQgZG93biB0aGUgcmVnaW9uXG4gICAgLy8gbWFuYWdlciBlbnRpcmVseVxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5yZW1vdmVSZWdpb25zKCk7XG4gICAgICByZXR1cm4gTWFyaW9uZXR0ZS5Db250cm9sbGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgXG4gICAgLy8gaW50ZXJuYWwgbWV0aG9kIHRvIHN0b3JlIHJlZ2lvbnNcbiAgICBfc3RvcmU6IGZ1bmN0aW9uKG5hbWUsIHJlZ2lvbikge1xuICAgICAgaWYgKCF0aGlzLl9yZWdpb25zW25hbWVdKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoKys7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5fcmVnaW9uc1tuYW1lXSA9IHJlZ2lvbjtcbiAgICB9LFxuICBcbiAgICAvLyBpbnRlcm5hbCBtZXRob2QgdG8gcmVtb3ZlIGEgcmVnaW9uXG4gICAgX3JlbW92ZTogZnVuY3Rpb24obmFtZSwgcmVnaW9uKSB7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpyZW1vdmU6cmVnaW9uJywgbmFtZSwgcmVnaW9uKTtcbiAgICAgIHJlZ2lvbi5lbXB0eSgpO1xuICAgICAgcmVnaW9uLnN0b3BMaXN0ZW5pbmcoKTtcbiAgXG4gICAgICBkZWxldGUgcmVnaW9uLl9wYXJlbnQ7XG4gICAgICBkZWxldGUgdGhpcy5fcmVnaW9uc1tuYW1lXTtcbiAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3JlbW92ZTpyZWdpb24nLCBuYW1lLCByZWdpb24pO1xuICAgIH1cbiAgfSk7XG4gIFxuICBNYXJpb25ldHRlLmFjdEFzQ29sbGVjdGlvbihNYXJpb25ldHRlLlJlZ2lvbk1hbmFnZXIucHJvdG90eXBlLCAnX3JlZ2lvbnMnKTtcbiAgXG5cbiAgLy8gVGVtcGxhdGUgQ2FjaGVcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIE1hbmFnZSB0ZW1wbGF0ZXMgc3RvcmVkIGluIGA8c2NyaXB0PmAgYmxvY2tzLFxuICAvLyBjYWNoaW5nIHRoZW0gZm9yIGZhc3RlciBhY2Nlc3MuXG4gIE1hcmlvbmV0dGUuVGVtcGxhdGVDYWNoZSA9IGZ1bmN0aW9uKHRlbXBsYXRlSWQpIHtcbiAgICB0aGlzLnRlbXBsYXRlSWQgPSB0ZW1wbGF0ZUlkO1xuICB9O1xuICBcbiAgLy8gVGVtcGxhdGVDYWNoZSBvYmplY3QtbGV2ZWwgbWV0aG9kcy4gTWFuYWdlIHRoZSB0ZW1wbGF0ZVxuICAvLyBjYWNoZXMgZnJvbSB0aGVzZSBtZXRob2QgY2FsbHMgaW5zdGVhZCBvZiBjcmVhdGluZ1xuICAvLyB5b3VyIG93biBUZW1wbGF0ZUNhY2hlIGluc3RhbmNlc1xuICBfLmV4dGVuZChNYXJpb25ldHRlLlRlbXBsYXRlQ2FjaGUsIHtcbiAgICB0ZW1wbGF0ZUNhY2hlczoge30sXG4gIFxuICAgIC8vIEdldCB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIGJ5IGlkLiBFaXRoZXJcbiAgICAvLyByZXRyaWV2ZXMgdGhlIGNhY2hlZCB2ZXJzaW9uLCBvciBsb2FkcyBpdFxuICAgIC8vIGZyb20gdGhlIERPTS5cbiAgICBnZXQ6IGZ1bmN0aW9uKHRlbXBsYXRlSWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjYWNoZWRUZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVDYWNoZXNbdGVtcGxhdGVJZF07XG4gIFxuICAgICAgaWYgKCFjYWNoZWRUZW1wbGF0ZSkge1xuICAgICAgICBjYWNoZWRUZW1wbGF0ZSA9IG5ldyBNYXJpb25ldHRlLlRlbXBsYXRlQ2FjaGUodGVtcGxhdGVJZCk7XG4gICAgICAgIHRoaXMudGVtcGxhdGVDYWNoZXNbdGVtcGxhdGVJZF0gPSBjYWNoZWRUZW1wbGF0ZTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gY2FjaGVkVGVtcGxhdGUubG9hZChvcHRpb25zKTtcbiAgICB9LFxuICBcbiAgICAvLyBDbGVhciB0ZW1wbGF0ZXMgZnJvbSB0aGUgY2FjaGUuIElmIG5vIGFyZ3VtZW50c1xuICAgIC8vIGFyZSBzcGVjaWZpZWQsIGNsZWFycyBhbGwgdGVtcGxhdGVzOlxuICAgIC8vIGBjbGVhcigpYFxuICAgIC8vXG4gICAgLy8gSWYgYXJndW1lbnRzIGFyZSBzcGVjaWZpZWQsIGNsZWFycyBlYWNoIG9mIHRoZVxuICAgIC8vIHNwZWNpZmllZCB0ZW1wbGF0ZXMgZnJvbSB0aGUgY2FjaGU6XG4gICAgLy8gYGNsZWFyKFwiI3QxXCIsIFwiI3QyXCIsIFwiLi4uXCIpYFxuICAgIGNsZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGFyZ3MgPSBfLnRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgXG4gICAgICBpZiAobGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy50ZW1wbGF0ZUNhY2hlc1thcmdzW2ldXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUNhY2hlcyA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBUZW1wbGF0ZUNhY2hlIGluc3RhbmNlIG1ldGhvZHMsIGFsbG93aW5nIGVhY2hcbiAgLy8gdGVtcGxhdGUgY2FjaGUgb2JqZWN0IHRvIG1hbmFnZSBpdHMgb3duIHN0YXRlXG4gIC8vIGFuZCBrbm93IHdoZXRoZXIgb3Igbm90IGl0IGhhcyBiZWVuIGxvYWRlZFxuICBfLmV4dGVuZChNYXJpb25ldHRlLlRlbXBsYXRlQ2FjaGUucHJvdG90eXBlLCB7XG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBsb2FkIHRoZSB0ZW1wbGF0ZVxuICAgIGxvYWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIC8vIEd1YXJkIGNsYXVzZSB0byBwcmV2ZW50IGxvYWRpbmcgdGhpcyB0ZW1wbGF0ZSBtb3JlIHRoYW4gb25jZVxuICAgICAgaWYgKHRoaXMuY29tcGlsZWRUZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlZFRlbXBsYXRlO1xuICAgICAgfVxuICBcbiAgICAgIC8vIExvYWQgdGhlIHRlbXBsYXRlIGFuZCBjb21waWxlIGl0XG4gICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLmxvYWRUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlSWQsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5jb21waWxlZFRlbXBsYXRlID0gdGhpcy5jb21waWxlVGVtcGxhdGUodGVtcGxhdGUsIG9wdGlvbnMpO1xuICBcbiAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVkVGVtcGxhdGU7XG4gICAgfSxcbiAgXG4gICAgLy8gTG9hZCBhIHRlbXBsYXRlIGZyb20gdGhlIERPTSwgYnkgZGVmYXVsdC4gT3ZlcnJpZGVcbiAgICAvLyB0aGlzIG1ldGhvZCB0byBwcm92aWRlIHlvdXIgb3duIHRlbXBsYXRlIHJldHJpZXZhbFxuICAgIC8vIEZvciBhc3luY2hyb25vdXMgbG9hZGluZyB3aXRoIEFNRC9SZXF1aXJlSlMsIGNvbnNpZGVyXG4gICAgLy8gdXNpbmcgYSB0ZW1wbGF0ZS1sb2FkZXIgcGx1Z2luIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJpb25ldHRlanMvYmFja2JvbmUubWFyaW9uZXR0ZS93aWtpL1VzaW5nLW1hcmlvbmV0dGUtd2l0aC1yZXF1aXJlanNcbiAgICBsb2FkVGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlSWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciAkdGVtcGxhdGUgPSBCYWNrYm9uZS4kKHRlbXBsYXRlSWQpO1xuICBcbiAgICAgIGlmICghJHRlbXBsYXRlLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcih7XG4gICAgICAgICAgbmFtZTogJ05vVGVtcGxhdGVFcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBmaW5kIHRlbXBsYXRlOiBcIicgKyB0ZW1wbGF0ZUlkICsgJ1wiJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAkdGVtcGxhdGUuaHRtbCgpO1xuICAgIH0sXG4gIFxuICAgIC8vIFByZS1jb21waWxlIHRoZSB0ZW1wbGF0ZSBiZWZvcmUgY2FjaGluZyBpdC4gT3ZlcnJpZGVcbiAgICAvLyB0aGlzIG1ldGhvZCBpZiB5b3UgZG8gbm90IG5lZWQgdG8gcHJlLWNvbXBpbGUgYSB0ZW1wbGF0ZVxuICAgIC8vIChKU1QgLyBSZXF1aXJlSlMgZm9yIGV4YW1wbGUpIG9yIGlmIHlvdSB3YW50IHRvIGNoYW5nZVxuICAgIC8vIHRoZSB0ZW1wbGF0ZSBlbmdpbmUgdXNlZCAoSGFuZGViYXJzLCBldGMpLlxuICAgIGNvbXBpbGVUZW1wbGF0ZTogZnVuY3Rpb24ocmF3VGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBfLnRlbXBsYXRlKHJhd1RlbXBsYXRlLCBvcHRpb25zKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gUmVuZGVyZXJcbiAgLy8gLS0tLS0tLS1cbiAgXG4gIC8vIFJlbmRlciBhIHRlbXBsYXRlIHdpdGggZGF0YSBieSBwYXNzaW5nIGluIHRoZSB0ZW1wbGF0ZVxuICAvLyBzZWxlY3RvciBhbmQgdGhlIGRhdGEgdG8gcmVuZGVyLlxuICBNYXJpb25ldHRlLlJlbmRlcmVyID0ge1xuICBcbiAgICAvLyBSZW5kZXIgYSB0ZW1wbGF0ZSB3aXRoIGRhdGEuIFRoZSBgdGVtcGxhdGVgIHBhcmFtZXRlciBpc1xuICAgIC8vIHBhc3NlZCB0byB0aGUgYFRlbXBsYXRlQ2FjaGVgIG9iamVjdCB0byByZXRyaWV2ZSB0aGVcbiAgICAvLyB0ZW1wbGF0ZSBmdW5jdGlvbi4gT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcHJvdmlkZSB5b3VyIG93blxuICAgIC8vIGN1c3RvbSByZW5kZXJpbmcgYW5kIHRlbXBsYXRlIGhhbmRsaW5nIGZvciBhbGwgb2YgTWFyaW9uZXR0ZS5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKHRlbXBsYXRlLCBkYXRhKSB7XG4gICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBNYXJpb25ldHRlLkVycm9yKHtcbiAgICAgICAgICBuYW1lOiAnVGVtcGxhdGVOb3RGb3VuZEVycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQ2Fubm90IHJlbmRlciB0aGUgdGVtcGxhdGUgc2luY2UgaXRzIGZhbHNlLCBudWxsIG9yIHVuZGVmaW5lZC4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICBcbiAgICAgIHZhciB0ZW1wbGF0ZUZ1bmMgPSBfLmlzRnVuY3Rpb24odGVtcGxhdGUpID8gdGVtcGxhdGUgOiBNYXJpb25ldHRlLlRlbXBsYXRlQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcbiAgXG4gICAgICByZXR1cm4gdGVtcGxhdGVGdW5jKGRhdGEpO1xuICAgIH1cbiAgfTtcbiAgXG5cbiAgLyoganNoaW50IG1heGxlbjogMTE0LCBub25ldzogZmFsc2UgKi9cbiAgLy8gVmlld1xuICAvLyAtLS0tXG4gIFxuICAvLyBUaGUgY29yZSB2aWV3IGNsYXNzIHRoYXQgb3RoZXIgTWFyaW9uZXR0ZSB2aWV3cyBleHRlbmQgZnJvbS5cbiAgTWFyaW9uZXR0ZS5WaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgIGlzRGVzdHJveWVkOiBmYWxzZSxcbiAgICBzdXBwb3J0c1JlbmRlckxpZmVjeWNsZTogdHJ1ZSxcbiAgICBzdXBwb3J0c0Rlc3Ryb3lMaWZlY3ljbGU6IHRydWUsXG4gIFxuICAgIGNvbnN0cnVjdG9yOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB0aGlzLnJlbmRlciA9IF8uYmluZCh0aGlzLnJlbmRlciwgdGhpcyk7XG4gIFxuICAgICAgb3B0aW9ucyA9IE1hcmlvbmV0dGUuX2dldFZhbHVlKG9wdGlvbnMsIHRoaXMpO1xuICBcbiAgICAgIC8vIHRoaXMgZXhwb3NlcyB2aWV3IG9wdGlvbnMgdG8gdGhlIHZpZXcgaW5pdGlhbGl6ZXJcbiAgICAgIC8vIHRoaXMgaXMgYSBiYWNrZmlsbCBzaW5jZSBiYWNrYm9uZSByZW1vdmVkIHRoZSBhc3NpZ25tZW50XG4gICAgICAvLyBvZiB0aGlzLm9wdGlvbnNcbiAgICAgIC8vIGF0IHNvbWUgcG9pbnQgaG93ZXZlciB0aGlzIG1heSBiZSByZW1vdmVkXG4gICAgICB0aGlzLm9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgXy5yZXN1bHQodGhpcywgJ29wdGlvbnMnKSwgb3B0aW9ucyk7XG4gIFxuICAgICAgdGhpcy5fYmVoYXZpb3JzID0gTWFyaW9uZXR0ZS5CZWhhdmlvcnModGhpcyk7XG4gIFxuICAgICAgQmFja2JvbmUuVmlldy5jYWxsKHRoaXMsIHRoaXMub3B0aW9ucyk7XG4gIFxuICAgICAgTWFyaW9uZXR0ZS5Nb25pdG9yRE9NUmVmcmVzaCh0aGlzKTtcbiAgICB9LFxuICBcbiAgICAvLyBHZXQgdGhlIHRlbXBsYXRlIGZvciB0aGlzIHZpZXdcbiAgICAvLyBpbnN0YW5jZS4gWW91IGNhbiBzZXQgYSBgdGVtcGxhdGVgIGF0dHJpYnV0ZSBpbiB0aGUgdmlld1xuICAgIC8vIGRlZmluaXRpb24gb3IgcGFzcyBhIGB0ZW1wbGF0ZTogXCJ3aGF0ZXZlclwiYCBwYXJhbWV0ZXIgaW5cbiAgICAvLyB0byB0aGUgY29uc3RydWN0b3Igb3B0aW9ucy5cbiAgICBnZXRUZW1wbGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oJ3RlbXBsYXRlJyk7XG4gICAgfSxcbiAgXG4gICAgLy8gU2VyaWFsaXplIGEgbW9kZWwgYnkgcmV0dXJuaW5nIGl0cyBhdHRyaWJ1dGVzLiBDbG9uZXNcbiAgICAvLyB0aGUgYXR0cmlidXRlcyB0byBhbGxvdyBtb2RpZmljYXRpb24uXG4gICAgc2VyaWFsaXplTW9kZWw6IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICByZXR1cm4gbW9kZWwudG9KU09OLmFwcGx5KG1vZGVsLCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gICAgfSxcbiAgXG4gICAgLy8gTWl4IGluIHRlbXBsYXRlIGhlbHBlciBtZXRob2RzLiBMb29rcyBmb3IgYVxuICAgIC8vIGB0ZW1wbGF0ZUhlbHBlcnNgIGF0dHJpYnV0ZSwgd2hpY2ggY2FuIGVpdGhlciBiZSBhblxuICAgIC8vIG9iamVjdCBsaXRlcmFsLCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYmplY3RcbiAgICAvLyBsaXRlcmFsLiBBbGwgbWV0aG9kcyBhbmQgYXR0cmlidXRlcyBmcm9tIHRoaXMgb2JqZWN0XG4gICAgLy8gYXJlIGNvcGllcyB0byB0aGUgb2JqZWN0IHBhc3NlZCBpbi5cbiAgICBtaXhpblRlbXBsYXRlSGVscGVyczogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICB0YXJnZXQgPSB0YXJnZXQgfHwge307XG4gICAgICB2YXIgdGVtcGxhdGVIZWxwZXJzID0gdGhpcy5nZXRPcHRpb24oJ3RlbXBsYXRlSGVscGVycycpO1xuICAgICAgdGVtcGxhdGVIZWxwZXJzID0gTWFyaW9uZXR0ZS5fZ2V0VmFsdWUodGVtcGxhdGVIZWxwZXJzLCB0aGlzKTtcbiAgICAgIHJldHVybiBfLmV4dGVuZCh0YXJnZXQsIHRlbXBsYXRlSGVscGVycyk7XG4gICAgfSxcbiAgXG4gICAgLy8gbm9ybWFsaXplIHRoZSBrZXlzIG9mIHBhc3NlZCBoYXNoIHdpdGggdGhlIHZpZXdzIGB1aWAgc2VsZWN0b3JzLlxuICAgIC8vIGB7XCJAdWkuZm9vXCI6IFwiYmFyXCJ9YFxuICAgIG5vcm1hbGl6ZVVJS2V5czogZnVuY3Rpb24oaGFzaCkge1xuICAgICAgdmFyIHVpQmluZGluZ3MgPSBfLnJlc3VsdCh0aGlzLCAnX3VpQmluZGluZ3MnKTtcbiAgICAgIHJldHVybiBNYXJpb25ldHRlLm5vcm1hbGl6ZVVJS2V5cyhoYXNoLCB1aUJpbmRpbmdzIHx8IF8ucmVzdWx0KHRoaXMsICd1aScpKTtcbiAgICB9LFxuICBcbiAgICAvLyBub3JtYWxpemUgdGhlIHZhbHVlcyBvZiBwYXNzZWQgaGFzaCB3aXRoIHRoZSB2aWV3cyBgdWlgIHNlbGVjdG9ycy5cbiAgICAvLyBge2ZvbzogXCJAdWkuYmFyXCJ9YFxuICAgIG5vcm1hbGl6ZVVJVmFsdWVzOiBmdW5jdGlvbihoYXNoLCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgdWkgPSBfLnJlc3VsdCh0aGlzLCAndWknKTtcbiAgICAgIHZhciB1aUJpbmRpbmdzID0gXy5yZXN1bHQodGhpcywgJ191aUJpbmRpbmdzJyk7XG4gICAgICByZXR1cm4gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSVZhbHVlcyhoYXNoLCB1aUJpbmRpbmdzIHx8IHVpLCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuICBcbiAgICAvLyBDb25maWd1cmUgYHRyaWdnZXJzYCB0byBmb3J3YXJkIERPTSBldmVudHMgdG8gdmlld1xuICAgIC8vIGV2ZW50cy4gYHRyaWdnZXJzOiB7XCJjbGljayAuZm9vXCI6IFwiZG86Zm9vXCJ9YFxuICAgIGNvbmZpZ3VyZVRyaWdnZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy50cmlnZ2VycykgeyByZXR1cm47IH1cbiAgXG4gICAgICAvLyBBbGxvdyBgdHJpZ2dlcnNgIHRvIGJlIGNvbmZpZ3VyZWQgYXMgYSBmdW5jdGlvblxuICAgICAgdmFyIHRyaWdnZXJzID0gdGhpcy5ub3JtYWxpemVVSUtleXMoXy5yZXN1bHQodGhpcywgJ3RyaWdnZXJzJykpO1xuICBcbiAgICAgIC8vIENvbmZpZ3VyZSB0aGUgdHJpZ2dlcnMsIHByZXZlbnQgZGVmYXVsdFxuICAgICAgLy8gYWN0aW9uIGFuZCBzdG9wIHByb3BhZ2F0aW9uIG9mIERPTSBldmVudHNcbiAgICAgIHJldHVybiBfLnJlZHVjZSh0cmlnZ2VycywgZnVuY3Rpb24oZXZlbnRzLCB2YWx1ZSwga2V5KSB7XG4gICAgICAgIGV2ZW50c1trZXldID0gdGhpcy5fYnVpbGRWaWV3VHJpZ2dlcih2YWx1ZSk7XG4gICAgICAgIHJldHVybiBldmVudHM7XG4gICAgICB9LCB7fSwgdGhpcyk7XG4gICAgfSxcbiAgXG4gICAgLy8gT3ZlcnJpZGluZyBCYWNrYm9uZS5WaWV3J3MgZGVsZWdhdGVFdmVudHMgdG8gaGFuZGxlXG4gICAgLy8gdGhlIGB0cmlnZ2Vyc2AsIGBtb2RlbEV2ZW50c2AsIGFuZCBgY29sbGVjdGlvbkV2ZW50c2AgY29uZmlndXJhdGlvblxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIHRoaXMuX2RlbGVnYXRlRE9NRXZlbnRzKGV2ZW50cyk7XG4gICAgICB0aGlzLmJpbmRFbnRpdHlFdmVudHModGhpcy5tb2RlbCwgdGhpcy5nZXRPcHRpb24oJ21vZGVsRXZlbnRzJykpO1xuICAgICAgdGhpcy5iaW5kRW50aXR5RXZlbnRzKHRoaXMuY29sbGVjdGlvbiwgdGhpcy5nZXRPcHRpb24oJ2NvbGxlY3Rpb25FdmVudHMnKSk7XG4gIFxuICAgICAgXy5lYWNoKHRoaXMuX2JlaGF2aW9ycywgZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICAgICAgYmVoYXZpb3IuYmluZEVudGl0eUV2ZW50cyh0aGlzLm1vZGVsLCBiZWhhdmlvci5nZXRPcHRpb24oJ21vZGVsRXZlbnRzJykpO1xuICAgICAgICBiZWhhdmlvci5iaW5kRW50aXR5RXZlbnRzKHRoaXMuY29sbGVjdGlvbiwgYmVoYXZpb3IuZ2V0T3B0aW9uKCdjb2xsZWN0aW9uRXZlbnRzJykpO1xuICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gaW50ZXJuYWwgbWV0aG9kIHRvIGRlbGVnYXRlIERPTSBldmVudHMgYW5kIHRyaWdnZXJzXG4gICAgX2RlbGVnYXRlRE9NRXZlbnRzOiBmdW5jdGlvbihldmVudHNBcmcpIHtcbiAgICAgIHZhciBldmVudHMgPSBNYXJpb25ldHRlLl9nZXRWYWx1ZShldmVudHNBcmcgfHwgdGhpcy5ldmVudHMsIHRoaXMpO1xuICBcbiAgICAgIC8vIG5vcm1hbGl6ZSB1aSBrZXlzXG4gICAgICBldmVudHMgPSB0aGlzLm5vcm1hbGl6ZVVJS2V5cyhldmVudHMpO1xuICAgICAgaWYgKF8uaXNVbmRlZmluZWQoZXZlbnRzQXJnKSkge3RoaXMuZXZlbnRzID0gZXZlbnRzO31cbiAgXG4gICAgICB2YXIgY29tYmluZWRFdmVudHMgPSB7fTtcbiAgXG4gICAgICAvLyBsb29rIHVwIGlmIHRoaXMgdmlldyBoYXMgYmVoYXZpb3IgZXZlbnRzXG4gICAgICB2YXIgYmVoYXZpb3JFdmVudHMgPSBfLnJlc3VsdCh0aGlzLCAnYmVoYXZpb3JFdmVudHMnKSB8fCB7fTtcbiAgICAgIHZhciB0cmlnZ2VycyA9IHRoaXMuY29uZmlndXJlVHJpZ2dlcnMoKTtcbiAgICAgIHZhciBiZWhhdmlvclRyaWdnZXJzID0gXy5yZXN1bHQodGhpcywgJ2JlaGF2aW9yVHJpZ2dlcnMnKSB8fCB7fTtcbiAgXG4gICAgICAvLyBiZWhhdmlvciBldmVudHMgd2lsbCBiZSBvdmVycmlkZW4gYnkgdmlldyBldmVudHMgYW5kIG9yIHRyaWdnZXJzXG4gICAgICBfLmV4dGVuZChjb21iaW5lZEV2ZW50cywgYmVoYXZpb3JFdmVudHMsIGV2ZW50cywgdHJpZ2dlcnMsIGJlaGF2aW9yVHJpZ2dlcnMpO1xuICBcbiAgICAgIEJhY2tib25lLlZpZXcucHJvdG90eXBlLmRlbGVnYXRlRXZlbnRzLmNhbGwodGhpcywgY29tYmluZWRFdmVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIE92ZXJyaWRpbmcgQmFja2JvbmUuVmlldydzIHVuZGVsZWdhdGVFdmVudHMgdG8gaGFuZGxlIHVuYmluZGluZ1xuICAgIC8vIHRoZSBgdHJpZ2dlcnNgLCBgbW9kZWxFdmVudHNgLCBhbmQgYGNvbGxlY3Rpb25FdmVudHNgIGNvbmZpZ1xuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgQmFja2JvbmUuVmlldy5wcm90b3R5cGUudW5kZWxlZ2F0ZUV2ZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICBcbiAgICAgIHRoaXMudW5iaW5kRW50aXR5RXZlbnRzKHRoaXMubW9kZWwsIHRoaXMuZ2V0T3B0aW9uKCdtb2RlbEV2ZW50cycpKTtcbiAgICAgIHRoaXMudW5iaW5kRW50aXR5RXZlbnRzKHRoaXMuY29sbGVjdGlvbiwgdGhpcy5nZXRPcHRpb24oJ2NvbGxlY3Rpb25FdmVudHMnKSk7XG4gIFxuICAgICAgXy5lYWNoKHRoaXMuX2JlaGF2aW9ycywgZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICAgICAgYmVoYXZpb3IudW5iaW5kRW50aXR5RXZlbnRzKHRoaXMubW9kZWwsIGJlaGF2aW9yLmdldE9wdGlvbignbW9kZWxFdmVudHMnKSk7XG4gICAgICAgIGJlaGF2aW9yLnVuYmluZEVudGl0eUV2ZW50cyh0aGlzLmNvbGxlY3Rpb24sIGJlaGF2aW9yLmdldE9wdGlvbignY29sbGVjdGlvbkV2ZW50cycpKTtcbiAgICAgIH0sIHRoaXMpO1xuICBcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIGhlbHBlciBtZXRob2QgdG8gdmVyaWZ5IHdoZXRoZXIgdGhlIHZpZXcgaGFzbid0IGJlZW4gZGVzdHJveWVkXG4gICAgX2Vuc3VyZVZpZXdJc0ludGFjdDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcih7XG4gICAgICAgICAgbmFtZTogJ1ZpZXdEZXN0cm95ZWRFcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogJ1ZpZXcgKGNpZDogXCInICsgdGhpcy5jaWQgKyAnXCIpIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkIGFuZCBjYW5ub3QgYmUgdXNlZC4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8vIERlZmF1bHQgYGRlc3Ryb3lgIGltcGxlbWVudGF0aW9uLCBmb3IgcmVtb3ZpbmcgYSB2aWV3IGZyb20gdGhlXG4gICAgLy8gRE9NIGFuZCB1bmJpbmRpbmcgaXQuIFJlZ2lvbnMgd2lsbCBjYWxsIHRoaXMgbWV0aG9kXG4gICAgLy8gZm9yIHlvdS4gWW91IGNhbiBzcGVjaWZ5IGFuIGBvbkRlc3Ryb3lgIG1ldGhvZCBpbiB5b3VyIHZpZXcgdG9cbiAgICAvLyBhZGQgY3VzdG9tIGNvZGUgdGhhdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHZpZXcgaXMgZGVzdHJveWVkLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHsgcmV0dXJuIHRoaXM7IH1cbiAgXG4gICAgICB2YXIgYXJncyA9IF8udG9BcnJheShhcmd1bWVudHMpO1xuICBcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZC5hcHBseSh0aGlzLCBbJ2JlZm9yZTpkZXN0cm95J10uY29uY2F0KGFyZ3MpKTtcbiAgXG4gICAgICAvLyBtYXJrIGFzIGRlc3Ryb3llZCBiZWZvcmUgZG9pbmcgdGhlIGFjdHVhbCBkZXN0cm95LCB0b1xuICAgICAgLy8gcHJldmVudCBpbmZpbml0ZSBsb29wcyB3aXRoaW4gXCJkZXN0cm95XCIgZXZlbnQgaGFuZGxlcnNcbiAgICAgIC8vIHRoYXQgYXJlIHRyeWluZyB0byBkZXN0cm95IG90aGVyIHZpZXdzXG4gICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZC5hcHBseSh0aGlzLCBbJ2Rlc3Ryb3knXS5jb25jYXQoYXJncykpO1xuICBcbiAgICAgIC8vIHVuYmluZCBVSSBlbGVtZW50c1xuICAgICAgdGhpcy51bmJpbmRVSUVsZW1lbnRzKCk7XG4gIFxuICAgICAgdGhpcy5pc1JlbmRlcmVkID0gZmFsc2U7XG4gIFxuICAgICAgLy8gcmVtb3ZlIHRoZSB2aWV3IGZyb20gdGhlIERPTVxuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgXG4gICAgICAvLyBDYWxsIGRlc3Ryb3kgb24gZWFjaCBiZWhhdmlvciBhZnRlclxuICAgICAgLy8gZGVzdHJveWluZyB0aGUgdmlldy5cbiAgICAgIC8vIFRoaXMgdW5iaW5kcyBldmVudCBsaXN0ZW5lcnNcbiAgICAgIC8vIHRoYXQgYmVoYXZpb3JzIGhhdmUgcmVnaXN0ZXJlZCBmb3IuXG4gICAgICBfLmludm9rZSh0aGlzLl9iZWhhdmlvcnMsICdkZXN0cm95JywgYXJncyk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgYmluZFVJRWxlbWVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fYmluZFVJRWxlbWVudHMoKTtcbiAgICAgIF8uaW52b2tlKHRoaXMuX2JlaGF2aW9ycywgdGhpcy5fYmluZFVJRWxlbWVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIFRoaXMgbWV0aG9kIGJpbmRzIHRoZSBlbGVtZW50cyBzcGVjaWZpZWQgaW4gdGhlIFwidWlcIiBoYXNoIGluc2lkZSB0aGUgdmlldydzIGNvZGUgd2l0aFxuICAgIC8vIHRoZSBhc3NvY2lhdGVkIGpRdWVyeSBzZWxlY3RvcnMuXG4gICAgX2JpbmRVSUVsZW1lbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy51aSkgeyByZXR1cm47IH1cbiAgXG4gICAgICAvLyBzdG9yZSB0aGUgdWkgaGFzaCBpbiBfdWlCaW5kaW5ncyBzbyB0aGV5IGNhbiBiZSByZXNldCBsYXRlclxuICAgICAgLy8gYW5kIHNvIHJlLXJlbmRlcmluZyB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gZmluZCB0aGUgYmluZGluZ3NcbiAgICAgIGlmICghdGhpcy5fdWlCaW5kaW5ncykge1xuICAgICAgICB0aGlzLl91aUJpbmRpbmdzID0gdGhpcy51aTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBnZXQgdGhlIGJpbmRpbmdzIHJlc3VsdCwgYXMgYSBmdW5jdGlvbiBvciBvdGhlcndpc2VcbiAgICAgIHZhciBiaW5kaW5ncyA9IF8ucmVzdWx0KHRoaXMsICdfdWlCaW5kaW5ncycpO1xuICBcbiAgICAgIC8vIGVtcHR5IHRoZSB1aSBzbyB3ZSBkb24ndCBoYXZlIGFueXRoaW5nIHRvIHN0YXJ0IHdpdGhcbiAgICAgIHRoaXMudWkgPSB7fTtcbiAgXG4gICAgICAvLyBiaW5kIGVhY2ggb2YgdGhlIHNlbGVjdG9yc1xuICAgICAgXy5lYWNoKGJpbmRpbmdzLCBmdW5jdGlvbihzZWxlY3Rvciwga2V5KSB7XG4gICAgICAgIHRoaXMudWlba2V5XSA9IHRoaXMuJChzZWxlY3Rvcik7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LFxuICBcbiAgICAvLyBUaGlzIG1ldGhvZCB1bmJpbmRzIHRoZSBlbGVtZW50cyBzcGVjaWZpZWQgaW4gdGhlIFwidWlcIiBoYXNoXG4gICAgdW5iaW5kVUlFbGVtZW50czogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl91bmJpbmRVSUVsZW1lbnRzKCk7XG4gICAgICBfLmludm9rZSh0aGlzLl9iZWhhdmlvcnMsIHRoaXMuX3VuYmluZFVJRWxlbWVudHMpO1xuICAgIH0sXG4gIFxuICAgIF91bmJpbmRVSUVsZW1lbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy51aSB8fCAhdGhpcy5fdWlCaW5kaW5ncykgeyByZXR1cm47IH1cbiAgXG4gICAgICAvLyBkZWxldGUgYWxsIG9mIHRoZSBleGlzdGluZyB1aSBiaW5kaW5nc1xuICAgICAgXy5lYWNoKHRoaXMudWksIGZ1bmN0aW9uKCRlbCwgbmFtZSkge1xuICAgICAgICBkZWxldGUgdGhpcy51aVtuYW1lXTtcbiAgICAgIH0sIHRoaXMpO1xuICBcbiAgICAgIC8vIHJlc2V0IHRoZSB1aSBlbGVtZW50IHRvIHRoZSBvcmlnaW5hbCBiaW5kaW5ncyBjb25maWd1cmF0aW9uXG4gICAgICB0aGlzLnVpID0gdGhpcy5fdWlCaW5kaW5ncztcbiAgICAgIGRlbGV0ZSB0aGlzLl91aUJpbmRpbmdzO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBjcmVhdGUgYW4gZXZlbnQgaGFuZGxlciBmb3IgYSBnaXZlbiBgdHJpZ2dlckRlZmAgbGlrZVxuICAgIC8vICdjbGljazpmb28nXG4gICAgX2J1aWxkVmlld1RyaWdnZXI6IGZ1bmN0aW9uKHRyaWdnZXJEZWYpIHtcbiAgXG4gICAgICB2YXIgb3B0aW9ucyA9IF8uZGVmYXVsdHMoe30sIHRyaWdnZXJEZWYsIHtcbiAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWUsXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gIFxuICAgICAgdmFyIGV2ZW50TmFtZSA9IF8uaXNPYmplY3QodHJpZ2dlckRlZikgPyBvcHRpb25zLmV2ZW50IDogdHJpZ2dlckRlZjtcbiAgXG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0ICYmIG9wdGlvbnMucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbiAmJiBvcHRpb25zLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgIHZpZXc6IHRoaXMsXG4gICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgY29sbGVjdGlvbjogdGhpcy5jb2xsZWN0aW9uXG4gICAgICAgIH07XG4gIFxuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoZXZlbnROYW1lLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfSxcbiAgXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmV0ID0gQmFja2JvbmUuVmlldy5wcm90b3R5cGUuc2V0RWxlbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICBcbiAgICAgIC8vIHByb3h5IGJlaGF2aW9yICRlbCB0byB0aGUgdmlldydzICRlbC5cbiAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgYSB2aWV3J3MgJGVsIHByb3h5XG4gICAgICAvLyBpcyBub3Qgc2V0IHVudGlsIGFmdGVyIHNldEVsZW1lbnQgaXMgY2FsbGVkLlxuICAgICAgXy5pbnZva2UodGhpcy5fYmVoYXZpb3JzLCAncHJveHlWaWV3UHJvcGVydGllcycsIHRoaXMpO1xuICBcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcbiAgXG4gICAgLy8gaW1wb3J0IHRoZSBgdHJpZ2dlck1ldGhvZGAgdG8gdHJpZ2dlciBldmVudHMgd2l0aCBjb3JyZXNwb25kaW5nXG4gICAgLy8gbWV0aG9kcyBpZiB0aGUgbWV0aG9kIGV4aXN0c1xuICAgIHRyaWdnZXJNZXRob2Q6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJldCA9IE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QodGhpcywgYXJndW1lbnRzKTtcbiAgXG4gICAgICB0aGlzLl90cmlnZ2VyRXZlbnRPbkJlaGF2aW9ycyhhcmd1bWVudHMpO1xuICAgICAgdGhpcy5fdHJpZ2dlckV2ZW50T25QYXJlbnRMYXlvdXQoYXJndW1lbnRzWzBdLCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gIFxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9LFxuICBcbiAgICBfdHJpZ2dlckV2ZW50T25CZWhhdmlvcnM6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgIHZhciB0cmlnZ2VyTWV0aG9kID0gTWFyaW9uZXR0ZS5fdHJpZ2dlck1ldGhvZDtcbiAgICAgIHZhciBiZWhhdmlvcnMgPSB0aGlzLl9iZWhhdmlvcnM7XG4gICAgICAvLyBVc2UgZ29vZCBvbCcgZm9yIGFzIHRoaXMgaXMgYSB2ZXJ5IGhvdCBmdW5jdGlvblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGJlaGF2aW9ycyAmJiBiZWhhdmlvcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJpZ2dlck1ldGhvZChiZWhhdmlvcnNbaV0sIGFyZ3MpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIF90cmlnZ2VyRXZlbnRPblBhcmVudExheW91dDogZnVuY3Rpb24oZXZlbnROYW1lLCBhcmdzKSB7XG4gICAgICB2YXIgbGF5b3V0VmlldyA9IHRoaXMuX3BhcmVudExheW91dFZpZXcoKTtcbiAgICAgIGlmICghbGF5b3V0Vmlldykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gaW52b2tlIHRyaWdnZXJNZXRob2Qgb24gcGFyZW50IHZpZXdcbiAgICAgIHZhciBldmVudFByZWZpeCA9IE1hcmlvbmV0dGUuZ2V0T3B0aW9uKGxheW91dFZpZXcsICdjaGlsZFZpZXdFdmVudFByZWZpeCcpO1xuICAgICAgdmFyIHByZWZpeGVkRXZlbnROYW1lID0gZXZlbnRQcmVmaXggKyAnOicgKyBldmVudE5hbWU7XG4gICAgICB2YXIgY2FsbEFyZ3MgPSBbdGhpc10uY29uY2F0KGFyZ3MpO1xuICBcbiAgICAgIE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QobGF5b3V0VmlldywgcHJlZml4ZWRFdmVudE5hbWUsIGNhbGxBcmdzKTtcbiAgXG4gICAgICAvLyBjYWxsIHRoZSBwYXJlbnQgdmlldydzIGNoaWxkRXZlbnRzIGhhbmRsZXJcbiAgICAgIHZhciBjaGlsZEV2ZW50cyA9IE1hcmlvbmV0dGUuZ2V0T3B0aW9uKGxheW91dFZpZXcsICdjaGlsZEV2ZW50cycpO1xuICBcbiAgICAgIC8vIHNpbmNlIGNoaWxkRXZlbnRzIGNhbiBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiB1c2UgTWFyaW9uZXR0ZS5fZ2V0VmFsdWVcbiAgICAgIC8vIHRvIGhhbmRsZSB0aGUgYWJzdGFjdGlvbiBmb3IgdXMuXG4gICAgICBjaGlsZEV2ZW50cyA9IE1hcmlvbmV0dGUuX2dldFZhbHVlKGNoaWxkRXZlbnRzLCBsYXlvdXRWaWV3KTtcbiAgICAgIHZhciBub3JtYWxpemVkQ2hpbGRFdmVudHMgPSBsYXlvdXRWaWV3Lm5vcm1hbGl6ZU1ldGhvZHMoY2hpbGRFdmVudHMpO1xuICBcbiAgICAgIGlmIChub3JtYWxpemVkQ2hpbGRFdmVudHMgJiYgXy5pc0Z1bmN0aW9uKG5vcm1hbGl6ZWRDaGlsZEV2ZW50c1tldmVudE5hbWVdKSkge1xuICAgICAgICBub3JtYWxpemVkQ2hpbGRFdmVudHNbZXZlbnROYW1lXS5hcHBseShsYXlvdXRWaWV3LCBjYWxsQXJncyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhbnkgdmlld3MgdGhhdCBhcmUgaW1tZWRpYXRlXG4gICAgLy8gY2hpbGRyZW4gb2YgdGhpcyB2aWV3XG4gICAgX2dldEltbWVkaWF0ZUNoaWxkcmVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICBcbiAgICAvLyBSZXR1cm5zIGFuIGFycmF5IG9mIGV2ZXJ5IG5lc3RlZCB2aWV3IHdpdGhpbiB0aGlzIHZpZXdcbiAgICBfZ2V0TmVzdGVkVmlld3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fZ2V0SW1tZWRpYXRlQ2hpbGRyZW4oKTtcbiAgXG4gICAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCkgeyByZXR1cm4gY2hpbGRyZW47IH1cbiAgXG4gICAgICByZXR1cm4gXy5yZWR1Y2UoY2hpbGRyZW4sIGZ1bmN0aW9uKG1lbW8sIHZpZXcpIHtcbiAgICAgICAgaWYgKCF2aWV3Ll9nZXROZXN0ZWRWaWV3cykgeyByZXR1cm4gbWVtbzsgfVxuICAgICAgICByZXR1cm4gbWVtby5jb25jYXQodmlldy5fZ2V0TmVzdGVkVmlld3MoKSk7XG4gICAgICB9LCBjaGlsZHJlbik7XG4gICAgfSxcbiAgXG4gICAgLy8gV2FsayB0aGUgX3BhcmVudCB0cmVlIHVudGlsIHdlIGZpbmQgYSBsYXlvdXQgdmlldyAoaWYgb25lIGV4aXN0cykuXG4gICAgLy8gUmV0dXJucyB0aGUgcGFyZW50IGxheW91dCB2aWV3IGhpZXJhcmNoaWNhbGx5IGNsb3Nlc3QgdG8gdGhpcyB2aWV3LlxuICAgIF9wYXJlbnRMYXlvdXRWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJlbnQgID0gdGhpcy5fcGFyZW50O1xuICBcbiAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE1hcmlvbmV0dGUuTGF5b3V0Vmlldykge1xuICAgICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9wYXJlbnQ7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gSW1wb3J0cyB0aGUgXCJub3JtYWxpemVNZXRob2RzXCIgdG8gdHJhbnNmb3JtIGhhc2hlcyBvZlxuICAgIC8vIGV2ZW50cz0+ZnVuY3Rpb24gcmVmZXJlbmNlcy9uYW1lcyB0byBhIGhhc2ggb2YgZXZlbnRzPT5mdW5jdGlvbiByZWZlcmVuY2VzXG4gICAgbm9ybWFsaXplTWV0aG9kczogTWFyaW9uZXR0ZS5ub3JtYWxpemVNZXRob2RzLFxuICBcbiAgICAvLyBBIGhhbmR5IHdheSB0byBtZXJnZSBwYXNzZWQtaW4gb3B0aW9ucyBvbnRvIHRoZSBpbnN0YW5jZVxuICAgIG1lcmdlT3B0aW9uczogTWFyaW9uZXR0ZS5tZXJnZU9wdGlvbnMsXG4gIFxuICAgIC8vIFByb3h5IGBnZXRPcHRpb25gIHRvIGVuYWJsZSBnZXR0aW5nIG9wdGlvbnMgZnJvbSB0aGlzIG9yIHRoaXMub3B0aW9ucyBieSBuYW1lLlxuICAgIGdldE9wdGlvbjogTWFyaW9uZXR0ZS5wcm94eUdldE9wdGlvbixcbiAgXG4gICAgLy8gUHJveHkgYGJpbmRFbnRpdHlFdmVudHNgIHRvIGVuYWJsZSBiaW5kaW5nIHZpZXcncyBldmVudHMgZnJvbSBhbm90aGVyIGVudGl0eS5cbiAgICBiaW5kRW50aXR5RXZlbnRzOiBNYXJpb25ldHRlLnByb3h5QmluZEVudGl0eUV2ZW50cyxcbiAgXG4gICAgLy8gUHJveHkgYHVuYmluZEVudGl0eUV2ZW50c2AgdG8gZW5hYmxlIHVuYmluZGluZyB2aWV3J3MgZXZlbnRzIGZyb20gYW5vdGhlciBlbnRpdHkuXG4gICAgdW5iaW5kRW50aXR5RXZlbnRzOiBNYXJpb25ldHRlLnByb3h5VW5iaW5kRW50aXR5RXZlbnRzXG4gIH0pO1xuICBcbiAgLy8gSXRlbSBWaWV3XG4gIC8vIC0tLS0tLS0tLVxuICBcbiAgLy8gQSBzaW5nbGUgaXRlbSB2aWV3IGltcGxlbWVudGF0aW9uIHRoYXQgY29udGFpbnMgY29kZSBmb3IgcmVuZGVyaW5nXG4gIC8vIHdpdGggdW5kZXJzY29yZS5qcyB0ZW1wbGF0ZXMsIHNlcmlhbGl6aW5nIHRoZSB2aWV3J3MgbW9kZWwgb3IgY29sbGVjdGlvbixcbiAgLy8gYW5kIGNhbGxpbmcgc2V2ZXJhbCBtZXRob2RzIG9uIGV4dGVuZGVkIHZpZXdzLCBzdWNoIGFzIGBvblJlbmRlcmAuXG4gIE1hcmlvbmV0dGUuSXRlbVZpZXcgPSBNYXJpb25ldHRlLlZpZXcuZXh0ZW5kKHtcbiAgXG4gICAgLy8gU2V0dGluZyB1cCB0aGUgaW5oZXJpdGFuY2UgY2hhaW4gd2hpY2ggYWxsb3dzIGNoYW5nZXMgdG9cbiAgICAvLyBNYXJpb25ldHRlLlZpZXcucHJvdG90eXBlLmNvbnN0cnVjdG9yIHdoaWNoIGFsbG93cyBvdmVycmlkaW5nXG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgTWFyaW9uZXR0ZS5WaWV3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgXG4gICAgLy8gU2VyaWFsaXplIHRoZSBtb2RlbCBvciBjb2xsZWN0aW9uIGZvciB0aGUgdmlldy4gSWYgYSBtb2RlbCBpc1xuICAgIC8vIGZvdW5kLCB0aGUgdmlldydzIGBzZXJpYWxpemVNb2RlbGAgaXMgY2FsbGVkLiBJZiBhIGNvbGxlY3Rpb24gaXMgZm91bmQsXG4gICAgLy8gZWFjaCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvbiBpcyBzZXJpYWxpemVkIGJ5IGNhbGxpbmdcbiAgICAvLyB0aGUgdmlldydzIGBzZXJpYWxpemVDb2xsZWN0aW9uYCBhbmQgcHV0IGludG8gYW4gYGl0ZW1zYCBhcnJheSBpblxuICAgIC8vIHRoZSByZXN1bHRpbmcgZGF0YS4gSWYgYm90aCBhcmUgZm91bmQsIGRlZmF1bHRzIHRvIHRoZSBtb2RlbC5cbiAgICAvLyBZb3UgY2FuIG92ZXJyaWRlIHRoZSBgc2VyaWFsaXplRGF0YWAgbWV0aG9kIGluIHlvdXIgb3duIHZpZXcgZGVmaW5pdGlvbixcbiAgICAvLyB0byBwcm92aWRlIGN1c3RvbSBzZXJpYWxpemF0aW9uIGZvciB5b3VyIHZpZXcncyBkYXRhLlxuICAgIHNlcmlhbGl6ZURhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLm1vZGVsICYmICF0aGlzLmNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICBcbiAgICAgIHZhciBhcmdzID0gW3RoaXMubW9kZWwgfHwgdGhpcy5jb2xsZWN0aW9uXTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGFyZ3MucHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0aGlzLm1vZGVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZU1vZGVsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpdGVtczogdGhpcy5zZXJpYWxpemVDb2xsZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gU2VyaWFsaXplIGEgY29sbGVjdGlvbiBieSBzZXJpYWxpemluZyBlYWNoIG9mIGl0cyBtb2RlbHMuXG4gICAgc2VyaWFsaXplQ29sbGVjdGlvbjogZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGNvbGxlY3Rpb24udG9KU09OLmFwcGx5KGNvbGxlY3Rpb24sIF8ucmVzdChhcmd1bWVudHMpKTtcbiAgICB9LFxuICBcbiAgICAvLyBSZW5kZXIgdGhlIHZpZXcsIGRlZmF1bHRpbmcgdG8gdW5kZXJzY29yZS5qcyB0ZW1wbGF0ZXMuXG4gICAgLy8gWW91IGNhbiBvdmVycmlkZSB0aGlzIGluIHlvdXIgdmlldyBkZWZpbml0aW9uIHRvIHByb3ZpZGVcbiAgICAvLyBhIHZlcnkgc3BlY2lmaWMgcmVuZGVyaW5nIGZvciB5b3VyIHZpZXcuIEluIGdlbmVyYWwsIHRob3VnaCxcbiAgICAvLyB5b3Ugc2hvdWxkIG92ZXJyaWRlIHRoZSBgTWFyaW9uZXR0ZS5SZW5kZXJlcmAgb2JqZWN0IHRvXG4gICAgLy8gY2hhbmdlIGhvdyBNYXJpb25ldHRlIHJlbmRlcnMgdmlld3MuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2Vuc3VyZVZpZXdJc0ludGFjdCgpO1xuICBcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbmRlcicsIHRoaXMpO1xuICBcbiAgICAgIHRoaXMuX3JlbmRlclRlbXBsYXRlKCk7XG4gICAgICB0aGlzLmlzUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgdGhpcy5iaW5kVUlFbGVtZW50cygpO1xuICBcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgncmVuZGVyJywgdGhpcyk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHJlbmRlciB0aGUgdGVtcGxhdGUgd2l0aCB0aGUgc2VyaWFsaXplZCBkYXRhXG4gICAgLy8gYW5kIHRlbXBsYXRlIGhlbHBlcnMgdmlhIHRoZSBgTWFyaW9uZXR0ZS5SZW5kZXJlcmAgb2JqZWN0LlxuICAgIC8vIFRocm93cyBhbiBgVW5kZWZpbmVkVGVtcGxhdGVFcnJvcmAgZXJyb3IgaWYgdGhlIHRlbXBsYXRlIGlzXG4gICAgLy8gYW55IGZhbHNlbHkgdmFsdWUgYnV0IGxpdGVyYWwgYGZhbHNlYC5cbiAgICBfcmVuZGVyVGVtcGxhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZSgpO1xuICBcbiAgICAgIC8vIEFsbG93IHRlbXBsYXRlLWxlc3MgaXRlbSB2aWV3c1xuICAgICAgaWYgKHRlbXBsYXRlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgTWFyaW9uZXR0ZS5FcnJvcih7XG4gICAgICAgICAgbmFtZTogJ1VuZGVmaW5lZFRlbXBsYXRlRXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdDYW5ub3QgcmVuZGVyIHRoZSB0ZW1wbGF0ZSBzaW5jZSBpdCBpcyBudWxsIG9yIHVuZGVmaW5lZC4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEFkZCBpbiBlbnRpdHkgZGF0YSBhbmQgdGVtcGxhdGUgaGVscGVyc1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLm1peGluVGVtcGxhdGVIZWxwZXJzKHRoaXMuc2VyaWFsaXplRGF0YSgpKTtcbiAgXG4gICAgICAvLyBSZW5kZXIgYW5kIGFkZCB0byBlbFxuICAgICAgdmFyIGh0bWwgPSBNYXJpb25ldHRlLlJlbmRlcmVyLnJlbmRlcih0ZW1wbGF0ZSwgZGF0YSwgdGhpcyk7XG4gICAgICB0aGlzLmF0dGFjaEVsQ29udGVudChodG1sKTtcbiAgXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICBcbiAgICAvLyBBdHRhY2hlcyB0aGUgY29udGVudCBvZiBhIGdpdmVuIHZpZXcuXG4gICAgLy8gVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gdG8gb3B0aW1pemUgcmVuZGVyaW5nLFxuICAgIC8vIG9yIHRvIHJlbmRlciBpbiBhIG5vbiBzdGFuZGFyZCB3YXkuXG4gICAgLy9cbiAgICAvLyBGb3IgZXhhbXBsZSwgdXNpbmcgYGlubmVySFRNTGAgaW5zdGVhZCBvZiBgJGVsLmh0bWxgXG4gICAgLy9cbiAgICAvLyBgYGBqc1xuICAgIC8vIGF0dGFjaEVsQ29udGVudDogZnVuY3Rpb24oaHRtbCkge1xuICAgIC8vICAgdGhpcy5lbC5pbm5lckhUTUwgPSBodG1sO1xuICAgIC8vICAgcmV0dXJuIHRoaXM7XG4gICAgLy8gfVxuICAgIC8vIGBgYFxuICAgIGF0dGFjaEVsQ29udGVudDogZnVuY3Rpb24oaHRtbCkge1xuICAgICAgdGhpcy4kZWwuaHRtbChodG1sKTtcbiAgXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0pO1xuICBcbiAgLyoganNoaW50IG1heHN0YXRlbWVudHM6IDIwLCBtYXhjb21wbGV4aXR5OiA3ICovXG4gIFxuICAvLyBDb2xsZWN0aW9uIFZpZXdcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAvLyBBIHZpZXcgdGhhdCBpdGVyYXRlcyBvdmVyIGEgQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyBhbmQgcmVuZGVycyBhbiBpbmRpdmlkdWFsIGNoaWxkIHZpZXcgZm9yIGVhY2ggbW9kZWwuXG4gIE1hcmlvbmV0dGUuQ29sbGVjdGlvblZpZXcgPSBNYXJpb25ldHRlLlZpZXcuZXh0ZW5kKHtcbiAgXG4gICAgLy8gdXNlZCBhcyB0aGUgcHJlZml4IGZvciBjaGlsZCB2aWV3IGV2ZW50c1xuICAgIC8vIHRoYXQgYXJlIGZvcndhcmRlZCB0aHJvdWdoIHRoZSBjb2xsZWN0aW9udmlld1xuICAgIGNoaWxkVmlld0V2ZW50UHJlZml4OiAnY2hpbGR2aWV3JyxcbiAgXG4gICAgLy8gZmxhZyBmb3IgbWFpbnRhaW5pbmcgdGhlIHNvcnRlZCBvcmRlciBvZiB0aGUgY29sbGVjdGlvblxuICAgIHNvcnQ6IHRydWUsXG4gIFxuICAgIC8vIGNvbnN0cnVjdG9yXG4gICAgLy8gb3B0aW9uIHRvIHBhc3MgYHtzb3J0OiBmYWxzZX1gIHRvIHByZXZlbnQgdGhlIGBDb2xsZWN0aW9uVmlld2AgZnJvbVxuICAgIC8vIG1haW50YWluaW5nIHRoZSBzb3J0ZWQgb3JkZXIgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgLy8gVGhpcyB3aWxsIGZhbGxiYWNrIG9udG8gYXBwZW5kaW5nIGNoaWxkVmlldydzIHRvIHRoZSBlbmQuXG4gICAgLy9cbiAgICAvLyBvcHRpb24gdG8gcGFzcyBge2NvbXBhcmF0b3I6IGNvbXBGdW5jdGlvbigpfWAgdG8gYWxsb3cgdGhlIGBDb2xsZWN0aW9uVmlld2BcbiAgICAvLyB0byB1c2UgYSBjdXN0b20gc29ydCBvcmRlciBmb3IgdGhlIGNvbGxlY3Rpb24uXG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub25jZSgncmVuZGVyJywgdGhpcy5faW5pdGlhbEV2ZW50cyk7XG4gICAgICB0aGlzLl9pbml0Q2hpbGRWaWV3U3RvcmFnZSgpO1xuICBcbiAgICAgIE1hcmlvbmV0dGUuVmlldy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICBcbiAgICAgIHRoaXMub24oe1xuICAgICAgICAnYmVmb3JlOnNob3cnOiAgIHRoaXMuX29uQmVmb3JlU2hvd0NhbGxlZCxcbiAgICAgICAgJ3Nob3cnOiAgICAgICAgICB0aGlzLl9vblNob3dDYWxsZWQsXG4gICAgICAgICdiZWZvcmU6YXR0YWNoJzogdGhpcy5fb25CZWZvcmVBdHRhY2hDYWxsZWQsXG4gICAgICAgICdhdHRhY2gnOiAgICAgICAgdGhpcy5fb25BdHRhY2hDYWxsZWRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5pbml0UmVuZGVyQnVmZmVyKCk7XG4gICAgfSxcbiAgXG4gICAgLy8gSW5zdGVhZCBvZiBpbnNlcnRpbmcgZWxlbWVudHMgb25lIGJ5IG9uZSBpbnRvIHRoZSBwYWdlLFxuICAgIC8vIGl0J3MgbXVjaCBtb3JlIHBlcmZvcm1hbnQgdG8gaW5zZXJ0IGVsZW1lbnRzIGludG8gYSBkb2N1bWVudFxuICAgIC8vIGZyYWdtZW50IGFuZCB0aGVuIGluc2VydCB0aGF0IGRvY3VtZW50IGZyYWdtZW50IGludG8gdGhlIHBhZ2VcbiAgICBpbml0UmVuZGVyQnVmZmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2J1ZmZlcmVkQ2hpbGRyZW4gPSBbXTtcbiAgICB9LFxuICBcbiAgICBzdGFydEJ1ZmZlcmluZzogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmluaXRSZW5kZXJCdWZmZXIoKTtcbiAgICAgIHRoaXMuaXNCdWZmZXJpbmcgPSB0cnVlO1xuICAgIH0sXG4gIFxuICAgIGVuZEJ1ZmZlcmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBPbmx5IHRyaWdnZXIgYXR0YWNoIGlmIGFscmVhZHkgc2hvd24gYW5kIGF0dGFjaGVkLCBvdGhlcndpc2UgUmVnaW9uI3Nob3coKSBoYW5kbGVzIHRoaXMuXG4gICAgICB2YXIgY2FuVHJpZ2dlckF0dGFjaCA9IHRoaXMuX2lzU2hvd24gJiYgTWFyaW9uZXR0ZS5pc05vZGVBdHRhY2hlZCh0aGlzLmVsKTtcbiAgICAgIHZhciBuZXN0ZWRWaWV3cztcbiAgXG4gICAgICB0aGlzLmlzQnVmZmVyaW5nID0gZmFsc2U7XG4gIFxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgdGhpcy5fdHJpZ2dlck1ldGhvZE1hbnkodGhpcy5fYnVmZmVyZWRDaGlsZHJlbiwgdGhpcywgJ2JlZm9yZTpzaG93Jyk7XG4gICAgICB9XG4gICAgICBpZiAoY2FuVHJpZ2dlckF0dGFjaCAmJiB0aGlzLl90cmlnZ2VyQmVmb3JlQXR0YWNoKSB7XG4gICAgICAgIG5lc3RlZFZpZXdzID0gdGhpcy5fZ2V0TmVzdGVkVmlld3MoKTtcbiAgICAgICAgdGhpcy5fdHJpZ2dlck1ldGhvZE1hbnkobmVzdGVkVmlld3MsIHRoaXMsICdiZWZvcmU6YXR0YWNoJyk7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5hdHRhY2hCdWZmZXIodGhpcywgdGhpcy5fY3JlYXRlQnVmZmVyKCkpO1xuICBcbiAgICAgIGlmIChjYW5UcmlnZ2VyQXR0YWNoICYmIHRoaXMuX3RyaWdnZXJBdHRhY2gpIHtcbiAgICAgICAgbmVzdGVkVmlld3MgPSB0aGlzLl9nZXROZXN0ZWRWaWV3cygpO1xuICAgICAgICB0aGlzLl90cmlnZ2VyTWV0aG9kTWFueShuZXN0ZWRWaWV3cywgdGhpcywgJ2F0dGFjaCcpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgdGhpcy5fdHJpZ2dlck1ldGhvZE1hbnkodGhpcy5fYnVmZmVyZWRDaGlsZHJlbiwgdGhpcywgJ3Nob3cnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5pdFJlbmRlckJ1ZmZlcigpO1xuICAgIH0sXG4gIFxuICAgIF90cmlnZ2VyTWV0aG9kTWFueTogZnVuY3Rpb24odGFyZ2V0cywgc291cmNlLCBldmVudE5hbWUpIHtcbiAgICAgIHZhciBhcmdzID0gXy5kcm9wKGFyZ3VtZW50cywgMyk7XG4gIFxuICAgICAgXy5lYWNoKHRhcmdldHMsIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbi5hcHBseSh0YXJnZXQsIFt0YXJnZXQsIGV2ZW50TmFtZSwgdGFyZ2V0LCBzb3VyY2VdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9KTtcbiAgICB9LFxuICBcbiAgICAvLyBDb25maWd1cmVkIHRoZSBpbml0aWFsIGV2ZW50cyB0aGF0IHRoZSBjb2xsZWN0aW9uIHZpZXdcbiAgICAvLyBiaW5kcyB0by5cbiAgICBfaW5pdGlhbEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jb2xsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCAnYWRkJywgdGhpcy5fb25Db2xsZWN0aW9uQWRkKTtcbiAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sICdyZW1vdmUnLCB0aGlzLl9vbkNvbGxlY3Rpb25SZW1vdmUpO1xuICAgICAgICB0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwgJ3Jlc2V0JywgdGhpcy5yZW5kZXIpO1xuICBcbiAgICAgICAgaWYgKHRoaXMuZ2V0T3B0aW9uKCdzb3J0JykpIHtcbiAgICAgICAgICB0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwgJ3NvcnQnLCB0aGlzLl9zb3J0Vmlld3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gSGFuZGxlIGEgY2hpbGQgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICBfb25Db2xsZWN0aW9uQWRkOiBmdW5jdGlvbihjaGlsZCwgY29sbGVjdGlvbiwgb3B0cykge1xuICAgICAgLy8gYGluZGV4YCBpcyBwcmVzZW50IHdoZW4gYWRkaW5nIHdpdGggYGF0YCBzaW5jZSBCQiAxLjI7IGluZGV4T2YgZmFsbGJhY2sgZm9yIDwgMS4yXG4gICAgICB2YXIgaW5kZXggPSBvcHRzLmF0ICE9PSB1bmRlZmluZWQgJiYgKG9wdHMuaW5kZXggfHwgY29sbGVjdGlvbi5pbmRleE9mKGNoaWxkKSk7XG4gIFxuICAgICAgLy8gV2hlbiBmaWx0ZXJlZCBvciB3aGVuIHRoZXJlIGlzIG5vIGluaXRpYWwgaW5kZXgsIGNhbGN1bGF0ZSBpbmRleC5cbiAgICAgIGlmICh0aGlzLmdldE9wdGlvbignZmlsdGVyJykgfHwgaW5kZXggPT09IGZhbHNlKSB7XG4gICAgICAgIGluZGV4ID0gXy5pbmRleE9mKHRoaXMuX2ZpbHRlcmVkU29ydGVkTW9kZWxzKGluZGV4KSwgY2hpbGQpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0aGlzLl9zaG91bGRBZGRDaGlsZChjaGlsZCwgaW5kZXgpKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUVtcHR5VmlldygpO1xuICAgICAgICB2YXIgQ2hpbGRWaWV3ID0gdGhpcy5nZXRDaGlsZFZpZXcoY2hpbGQpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKGNoaWxkLCBDaGlsZFZpZXcsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBnZXQgdGhlIGNoaWxkIHZpZXcgYnkgbW9kZWwgaXQgaG9sZHMsIGFuZCByZW1vdmUgaXRcbiAgICBfb25Db2xsZWN0aW9uUmVtb3ZlOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgdmFyIHZpZXcgPSB0aGlzLmNoaWxkcmVuLmZpbmRCeU1vZGVsKG1vZGVsKTtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGRWaWV3KHZpZXcpO1xuICAgICAgdGhpcy5jaGVja0VtcHR5KCk7XG4gICAgfSxcbiAgXG4gICAgX29uQmVmb3JlU2hvd0NhbGxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZXNldCBhdHRhY2ggZXZlbnQgZmxhZ3MgYXQgdGhlIHRvcCBvZiB0aGUgUmVnaW9uI3Nob3coKSBldmVudCBsaWZlY3ljbGU7IGlmIHRoZSBSZWdpb24nc1xuICAgICAgLy8gc2hvdygpIG9wdGlvbnMgcGVybWl0IG9uQmVmb3JlQXR0YWNoL29uQXR0YWNoIGV2ZW50cywgdGhlc2UgZmxhZ3Mgd2lsbCBiZSBzZXQgdHJ1ZSBhZ2Fpbi5cbiAgICAgIHRoaXMuX3RyaWdnZXJCZWZvcmVBdHRhY2ggPSB0aGlzLl90cmlnZ2VyQXR0YWNoID0gZmFsc2U7XG4gICAgICB0aGlzLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oY2hpbGRWaWV3KSB7XG4gICAgICAgIE1hcmlvbmV0dGUudHJpZ2dlck1ldGhvZE9uKGNoaWxkVmlldywgJ2JlZm9yZTpzaG93JywgY2hpbGRWaWV3KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIF9vblNob3dDYWxsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGNoaWxkVmlldykge1xuICAgICAgICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbihjaGlsZFZpZXcsICdzaG93JywgY2hpbGRWaWV3KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIC8vIElmIGR1cmluZyBSZWdpb24jc2hvdygpIG9uQmVmb3JlQXR0YWNoIHdhcyBmaXJlZCwgY29udGludWUgZmlyaW5nIGl0IGZvciBjaGlsZCB2aWV3c1xuICAgIF9vbkJlZm9yZUF0dGFjaENhbGxlZDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl90cmlnZ2VyQmVmb3JlQXR0YWNoID0gdHJ1ZTtcbiAgICB9LFxuICBcbiAgICAvLyBJZiBkdXJpbmcgUmVnaW9uI3Nob3coKSBvbkF0dGFjaCB3YXMgZmlyZWQsIGNvbnRpbnVlIGZpcmluZyBpdCBmb3IgY2hpbGQgdmlld3NcbiAgICBfb25BdHRhY2hDYWxsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fdHJpZ2dlckF0dGFjaCA9IHRydWU7XG4gICAgfSxcbiAgXG4gICAgLy8gUmVuZGVyIGNoaWxkcmVuIHZpZXdzLiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0b1xuICAgIC8vIHByb3ZpZGUgeW91ciBvd24gaW1wbGVtZW50YXRpb24gb2YgYSByZW5kZXIgZnVuY3Rpb24gZm9yXG4gICAgLy8gdGhlIGNvbGxlY3Rpb24gdmlldy5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fZW5zdXJlVmlld0lzSW50YWN0KCk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpyZW5kZXInLCB0aGlzKTtcbiAgICAgIHRoaXMuX3JlbmRlckNoaWxkcmVuKCk7XG4gICAgICB0aGlzLmlzUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdyZW5kZXInLCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIFJlb3JkZXIgRE9NIGFmdGVyIHNvcnRpbmcuIFdoZW4geW91ciBlbGVtZW50J3MgcmVuZGVyaW5nXG4gICAgLy8gZG8gbm90IHVzZSB0aGVpciBpbmRleCwgeW91IGNhbiBwYXNzIHJlb3JkZXJPblNvcnQ6IHRydWVcbiAgICAvLyB0byBvbmx5IHJlb3JkZXIgdGhlIERPTSBhZnRlciBhIHNvcnQgaW5zdGVhZCBvZiByZW5kZXJpbmdcbiAgICAvLyBhbGwgdGhlIGNvbGxlY3Rpb25WaWV3XG4gICAgcmVvcmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgdmFyIG1vZGVscyA9IHRoaXMuX2ZpbHRlcmVkU29ydGVkTW9kZWxzKCk7XG4gIFxuICAgICAgaWYgKCFtb2RlbHMubGVuZ3RoICYmIHRoaXMuX3Nob3dpbmdFbXB0eVZpZXcpIHsgcmV0dXJuIHRoaXM7IH1cbiAgXG4gICAgICB2YXIgYW55TW9kZWxzQWRkZWQgPSBfLnNvbWUobW9kZWxzLCBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gIWNoaWxkcmVuLmZpbmRCeU1vZGVsKG1vZGVsKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIElmIHRoZXJlIGFyZSBhbnkgbmV3IG1vZGVscyBhZGRlZCBkdWUgdG8gZmlsdGVyaW5nXG4gICAgICAvLyBXZSBuZWVkIHRvIGFkZCBjaGlsZCB2aWV3c1xuICAgICAgLy8gU28gcmVuZGVyIGFzIG5vcm1hbFxuICAgICAgaWYgKGFueU1vZGVsc0FkZGVkKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnZXQgdGhlIERPTSBub2RlcyBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgbW9kZWxzXG4gICAgICAgIHZhciBlbHNUb1Jlb3JkZXIgPSBfLm1hcChtb2RlbHMsIGZ1bmN0aW9uKG1vZGVsLCBpbmRleCkge1xuICAgICAgICAgIHZhciB2aWV3ID0gY2hpbGRyZW4uZmluZEJ5TW9kZWwobW9kZWwpO1xuICAgICAgICAgIHZpZXcuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgICAgcmV0dXJuIHZpZXcuZWw7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgLy8gZmluZCB0aGUgdmlld3MgdGhhdCB3ZXJlIGNoaWxkcmVuIGJlZm9yZSBidXQgYXJlbnQgaW4gdGhpcyBuZXcgb3JkZXJpbmdcbiAgICAgICAgdmFyIGZpbHRlcmVkT3V0Vmlld3MgPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24odmlldykge1xuICAgICAgICAgIHJldHVybiAhXy5jb250YWlucyhlbHNUb1Jlb3JkZXIsIHZpZXcuZWwpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlb3JkZXInKTtcbiAgXG4gICAgICAgIC8vIHNpbmNlIGFwcGVuZCBtb3ZlcyBlbGVtZW50cyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBET00sXG4gICAgICAgIC8vIGFwcGVuZGluZyB0aGUgZWxlbWVudHMgd2lsbCBlZmZlY3RpdmVseSByZW9yZGVyIHRoZW1cbiAgICAgICAgdGhpcy5fYXBwZW5kUmVvcmRlcmVkQ2hpbGRyZW4oZWxzVG9SZW9yZGVyKTtcbiAgXG4gICAgICAgIC8vIHJlbW92ZSBhbnkgdmlld3MgdGhhdCBoYXZlIGJlZW4gZmlsdGVyZWQgb3V0XG4gICAgICAgIF8uZWFjaChmaWx0ZXJlZE91dFZpZXdzLCB0aGlzLnJlbW92ZUNoaWxkVmlldywgdGhpcyk7XG4gICAgICAgIHRoaXMuY2hlY2tFbXB0eSgpO1xuICBcbiAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdyZW9yZGVyJyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gUmVuZGVyIHZpZXcgYWZ0ZXIgc29ydGluZy4gT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG9cbiAgICAvLyBjaGFuZ2UgaG93IHRoZSB2aWV3IHJlbmRlcnMgYWZ0ZXIgYSBgc29ydGAgb24gdGhlIGNvbGxlY3Rpb24uXG4gICAgLy8gQW4gZXhhbXBsZSBvZiB0aGlzIHdvdWxkIGJlIHRvIG9ubHkgYHJlbmRlckNoaWxkcmVuYCBpbiBhIGBDb21wb3NpdGVWaWV3YFxuICAgIC8vIHJhdGhlciB0aGFuIHRoZSBmdWxsIHZpZXcuXG4gICAgcmVzb3J0VmlldzogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoTWFyaW9uZXR0ZS5nZXRPcHRpb24odGhpcywgJ3Jlb3JkZXJPblNvcnQnKSkge1xuICAgICAgICB0aGlzLnJlb3JkZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kLiBUaGlzIGNoZWNrcyBmb3IgYW55IGNoYW5nZXMgaW4gdGhlIG9yZGVyIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIC8vIElmIHRoZSBpbmRleCBvZiBhbnkgdmlldyBkb2Vzbid0IG1hdGNoLCBpdCB3aWxsIHJlbmRlci5cbiAgICBfc29ydFZpZXdzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtb2RlbHMgPSB0aGlzLl9maWx0ZXJlZFNvcnRlZE1vZGVscygpO1xuICBcbiAgICAgIC8vIGNoZWNrIGZvciBhbnkgY2hhbmdlcyBpbiBzb3J0IG9yZGVyIG9mIHZpZXdzXG4gICAgICB2YXIgb3JkZXJDaGFuZ2VkID0gXy5maW5kKG1vZGVscywgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmNoaWxkcmVuLmZpbmRCeU1vZGVsKGl0ZW0pO1xuICAgICAgICByZXR1cm4gIXZpZXcgfHwgdmlldy5faW5kZXggIT09IGluZGV4O1xuICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgaWYgKG9yZGVyQ2hhbmdlZCkge1xuICAgICAgICB0aGlzLnJlc29ydFZpZXcoKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCByZWZlcmVuY2UgdG8gd2hhdCBpbmRleCBhIGBlbXB0eVZpZXdgIGlzLlxuICAgIF9lbXB0eVZpZXdJbmRleDogLTEsXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZC4gU2VwYXJhdGVkIHNvIHRoYXQgQ29tcG9zaXRlVmlldyBjYW4gYXBwZW5kIHRvIHRoZSBjaGlsZFZpZXdDb250YWluZXJcbiAgICAvLyBpZiBuZWNlc3NhcnlcbiAgICBfYXBwZW5kUmVvcmRlcmVkQ2hpbGRyZW46IGZ1bmN0aW9uKGNoaWxkcmVuKSB7XG4gICAgICB0aGlzLiRlbC5hcHBlbmQoY2hpbGRyZW4pO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZC4gU2VwYXJhdGVkIHNvIHRoYXQgQ29tcG9zaXRlVmlldyBjYW4gaGF2ZVxuICAgIC8vIG1vcmUgY29udHJvbCBvdmVyIGV2ZW50cyBiZWluZyB0cmlnZ2VyZWQsIGFyb3VuZCB0aGUgcmVuZGVyaW5nXG4gICAgLy8gcHJvY2Vzc1xuICAgIF9yZW5kZXJDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRlc3Ryb3lFbXB0eVZpZXcoKTtcbiAgICAgIHRoaXMuZGVzdHJveUNoaWxkcmVuKHtjaGVja0VtcHR5OiBmYWxzZX0pO1xuICBcbiAgICAgIGlmICh0aGlzLmlzRW1wdHkodGhpcy5jb2xsZWN0aW9uKSkge1xuICAgICAgICB0aGlzLnNob3dFbXB0eVZpZXcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbmRlcjpjb2xsZWN0aW9uJywgdGhpcyk7XG4gICAgICAgIHRoaXMuc3RhcnRCdWZmZXJpbmcoKTtcbiAgICAgICAgdGhpcy5zaG93Q29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLmVuZEJ1ZmZlcmluZygpO1xuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3JlbmRlcjpjb2xsZWN0aW9uJywgdGhpcyk7XG4gIFxuICAgICAgICAvLyBJZiB3ZSBoYXZlIHNob3duIGNoaWxkcmVuIGFuZCBub25lIGhhdmUgcGFzc2VkIHRoZSBmaWx0ZXIsIHNob3cgdGhlIGVtcHR5IHZpZXdcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4uaXNFbXB0eSgpICYmIHRoaXMuZ2V0T3B0aW9uKCdmaWx0ZXInKSkge1xuICAgICAgICAgIHRoaXMuc2hvd0VtcHR5VmlldygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGxvb3AgdGhyb3VnaCBjb2xsZWN0aW9uIGFuZCBzaG93IGVhY2ggY2hpbGQgdmlldy5cbiAgICBzaG93Q29sbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgQ2hpbGRWaWV3O1xuICBcbiAgICAgIHZhciBtb2RlbHMgPSB0aGlzLl9maWx0ZXJlZFNvcnRlZE1vZGVscygpO1xuICBcbiAgICAgIF8uZWFjaChtb2RlbHMsIGZ1bmN0aW9uKGNoaWxkLCBpbmRleCkge1xuICAgICAgICBDaGlsZFZpZXcgPSB0aGlzLmdldENoaWxkVmlldyhjaGlsZCk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoY2hpbGQsIENoaWxkVmlldywgaW5kZXgpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSxcbiAgXG4gICAgLy8gQWxsb3cgdGhlIGNvbGxlY3Rpb24gdG8gYmUgc29ydGVkIGJ5IGEgY3VzdG9tIHZpZXcgY29tcGFyYXRvclxuICAgIF9maWx0ZXJlZFNvcnRlZE1vZGVsczogZnVuY3Rpb24oYWRkZWRBdCkge1xuICAgICAgdmFyIHZpZXdDb21wYXJhdG9yID0gdGhpcy5nZXRWaWV3Q29tcGFyYXRvcigpO1xuICAgICAgdmFyIG1vZGVscyA9IHRoaXMuY29sbGVjdGlvbi5tb2RlbHM7XG4gICAgICBhZGRlZEF0ID0gTWF0aC5taW4oTWF0aC5tYXgoYWRkZWRBdCwgMCksIG1vZGVscy5sZW5ndGggLSAxKTtcbiAgXG4gICAgICBpZiAodmlld0NvbXBhcmF0b3IpIHtcbiAgICAgICAgdmFyIGFkZGVkTW9kZWw7XG4gICAgICAgIC8vIFByZXNlcnZlIGBhdGAgbG9jYXRpb24sIGV2ZW4gZm9yIGEgc29ydGVkIHZpZXdcbiAgICAgICAgaWYgKGFkZGVkQXQpIHtcbiAgICAgICAgICBhZGRlZE1vZGVsID0gbW9kZWxzW2FkZGVkQXRdO1xuICAgICAgICAgIG1vZGVscyA9IG1vZGVscy5zbGljZSgwLCBhZGRlZEF0KS5jb25jYXQobW9kZWxzLnNsaWNlKGFkZGVkQXQgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kZWxzID0gdGhpcy5fc29ydE1vZGVsc0J5KG1vZGVscywgdmlld0NvbXBhcmF0b3IpO1xuICAgICAgICBpZiAoYWRkZWRNb2RlbCkge1xuICAgICAgICAgIG1vZGVscy5zcGxpY2UoYWRkZWRBdCwgMCwgYWRkZWRNb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBGaWx0ZXIgYWZ0ZXIgc29ydGluZyBpbiBjYXNlIHRoZSBmaWx0ZXIgdXNlcyB0aGUgaW5kZXhcbiAgICAgIGlmICh0aGlzLmdldE9wdGlvbignZmlsdGVyJykpIHtcbiAgICAgICAgbW9kZWxzID0gXy5maWx0ZXIobW9kZWxzLCBmdW5jdGlvbihtb2RlbCwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2hvdWxkQWRkQ2hpbGQobW9kZWwsIGluZGV4KTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIG1vZGVscztcbiAgICB9LFxuICBcbiAgICBfc29ydE1vZGVsc0J5OiBmdW5jdGlvbihtb2RlbHMsIGNvbXBhcmF0b3IpIHtcbiAgICAgIGlmICh0eXBlb2YgY29tcGFyYXRvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1vZGVscywgZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgICByZXR1cm4gbW9kZWwuZ2V0KGNvbXBhcmF0b3IpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAoY29tcGFyYXRvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIF8uc29ydEJ5KG1vZGVscywgY29tcGFyYXRvciwgdGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbW9kZWxzLnNvcnQoXy5iaW5kKGNvbXBhcmF0b3IsIHRoaXMpKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gc2hvdyBhbiBlbXB0eSB2aWV3IGluIHBsYWNlIG9mXG4gICAgLy8gYSBjb2xsZWN0aW9uIG9mIGNoaWxkIHZpZXdzLCB3aGVuIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5XG4gICAgc2hvd0VtcHR5VmlldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgRW1wdHlWaWV3ID0gdGhpcy5nZXRFbXB0eVZpZXcoKTtcbiAgXG4gICAgICBpZiAoRW1wdHlWaWV3ICYmICF0aGlzLl9zaG93aW5nRW1wdHlWaWV3KSB7XG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbmRlcjplbXB0eScpO1xuICBcbiAgICAgICAgdGhpcy5fc2hvd2luZ0VtcHR5VmlldyA9IHRydWU7XG4gICAgICAgIHZhciBtb2RlbCA9IG5ldyBCYWNrYm9uZS5Nb2RlbCgpO1xuICAgICAgICB0aGlzLmFkZEVtcHR5Vmlldyhtb2RlbCwgRW1wdHlWaWV3KTtcbiAgXG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgncmVuZGVyOmVtcHR5Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGRlc3Ryb3kgYW4gZXhpc3RpbmcgZW1wdHlWaWV3IGluc3RhbmNlXG4gICAgLy8gaWYgb25lIGV4aXN0cy4gQ2FsbGVkIHdoZW4gYSBjb2xsZWN0aW9uIHZpZXcgaGFzIGJlZW5cbiAgICAvLyByZW5kZXJlZCBlbXB0eSwgYW5kIHRoZW4gYSBjaGlsZCBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICBkZXN0cm95RW1wdHlWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl9zaG93aW5nRW1wdHlWaWV3KSB7XG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbW92ZTplbXB0eScpO1xuICBcbiAgICAgICAgdGhpcy5kZXN0cm95Q2hpbGRyZW4oKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3Nob3dpbmdFbXB0eVZpZXc7XG4gIFxuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3JlbW92ZTplbXB0eScpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8vIFJldHJpZXZlIHRoZSBlbXB0eSB2aWV3IGNsYXNzXG4gICAgZ2V0RW1wdHlWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbignZW1wdHlWaWV3Jyk7XG4gICAgfSxcbiAgXG4gICAgLy8gUmVuZGVyIGFuZCBzaG93IHRoZSBlbXB0eVZpZXcuIFNpbWlsYXIgdG8gYWRkQ2hpbGQgbWV0aG9kXG4gICAgLy8gYnV0IFwiYWRkOmNoaWxkXCIgZXZlbnRzIGFyZSBub3QgZmlyZWQsIGFuZCB0aGUgZXZlbnQgZnJvbVxuICAgIC8vIGVtcHR5VmlldyBhcmUgbm90IGZvcndhcmRlZFxuICAgIGFkZEVtcHR5VmlldzogZnVuY3Rpb24oY2hpbGQsIEVtcHR5Vmlldykge1xuICAgICAgLy8gT25seSB0cmlnZ2VyIGF0dGFjaCBpZiBhbHJlYWR5IHNob3duLCBhdHRhY2hlZCwgYW5kIG5vdCBidWZmZXJpbmcsIG90aGVyd2lzZSBlbmRCdWZmZXIoKSBvclxuICAgICAgLy8gUmVnaW9uI3Nob3coKSBoYW5kbGVzIHRoaXMuXG4gICAgICB2YXIgY2FuVHJpZ2dlckF0dGFjaCA9IHRoaXMuX2lzU2hvd24gJiYgIXRoaXMuaXNCdWZmZXJpbmcgJiYgTWFyaW9uZXR0ZS5pc05vZGVBdHRhY2hlZCh0aGlzLmVsKTtcbiAgICAgIHZhciBuZXN0ZWRWaWV3cztcbiAgXG4gICAgICAvLyBnZXQgdGhlIGVtcHR5Vmlld09wdGlvbnMsIGZhbGxpbmcgYmFjayB0byBjaGlsZFZpZXdPcHRpb25zXG4gICAgICB2YXIgZW1wdHlWaWV3T3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9uKCdlbXB0eVZpZXdPcHRpb25zJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9wdGlvbignY2hpbGRWaWV3T3B0aW9ucycpO1xuICBcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oZW1wdHlWaWV3T3B0aW9ucykpIHtcbiAgICAgICAgZW1wdHlWaWV3T3B0aW9ucyA9IGVtcHR5Vmlld09wdGlvbnMuY2FsbCh0aGlzLCBjaGlsZCwgdGhpcy5fZW1wdHlWaWV3SW5kZXgpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIGJ1aWxkIHRoZSBlbXB0eSB2aWV3XG4gICAgICB2YXIgdmlldyA9IHRoaXMuYnVpbGRDaGlsZFZpZXcoY2hpbGQsIEVtcHR5VmlldywgZW1wdHlWaWV3T3B0aW9ucyk7XG4gIFxuICAgICAgdmlldy5fcGFyZW50ID0gdGhpcztcbiAgXG4gICAgICAvLyBQcm94eSBlbXB0eVZpZXcgZXZlbnRzXG4gICAgICB0aGlzLnByb3h5Q2hpbGRFdmVudHModmlldyk7XG4gIFxuICAgICAgdmlldy5vbmNlKCdyZW5kZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdHJpZ2dlciB0aGUgJ2JlZm9yZTpzaG93JyBldmVudCBvbiBgdmlld2AgaWYgdGhlIGNvbGxlY3Rpb24gdmlldyBoYXMgYWxyZWFkeSBiZWVuIHNob3duXG4gICAgICAgIGlmICh0aGlzLl9pc1Nob3duKSB7XG4gICAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2JlZm9yZTpzaG93Jywgdmlldyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIFRyaWdnZXIgYGJlZm9yZTphdHRhY2hgIGZvbGxvd2luZyBgcmVuZGVyYCB0byBhdm9pZCBhZGRpbmcgbG9naWMgYW5kIGV2ZW50IHRyaWdnZXJzXG4gICAgICAgIC8vIHRvIHB1YmxpYyBtZXRob2QgYHJlbmRlckNoaWxkVmlldygpYC5cbiAgICAgICAgaWYgKGNhblRyaWdnZXJBdHRhY2ggJiYgdGhpcy5fdHJpZ2dlckJlZm9yZUF0dGFjaCkge1xuICAgICAgICAgIG5lc3RlZFZpZXdzID0gdGhpcy5fZ2V0Vmlld0FuZE5lc3RlZCh2aWV3KTtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyTWV0aG9kTWFueShuZXN0ZWRWaWV3cywgdGhpcywgJ2JlZm9yZTphdHRhY2gnKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgLy8gU3RvcmUgdGhlIGBlbXB0eVZpZXdgIGxpa2UgYSBgY2hpbGRWaWV3YCBzbyB3ZSBjYW4gcHJvcGVybHkgcmVtb3ZlIGFuZC9vciBjbG9zZSBpdCBsYXRlclxuICAgICAgdGhpcy5jaGlsZHJlbi5hZGQodmlldyk7XG4gICAgICB0aGlzLnJlbmRlckNoaWxkVmlldyh2aWV3LCB0aGlzLl9lbXB0eVZpZXdJbmRleCk7XG4gIFxuICAgICAgLy8gVHJpZ2dlciBgYXR0YWNoYFxuICAgICAgaWYgKGNhblRyaWdnZXJBdHRhY2ggJiYgdGhpcy5fdHJpZ2dlckF0dGFjaCkge1xuICAgICAgICBuZXN0ZWRWaWV3cyA9IHRoaXMuX2dldFZpZXdBbmROZXN0ZWQodmlldyk7XG4gICAgICAgIHRoaXMuX3RyaWdnZXJNZXRob2RNYW55KG5lc3RlZFZpZXdzLCB0aGlzLCAnYXR0YWNoJyk7XG4gICAgICB9XG4gICAgICAvLyBjYWxsIHRoZSAnc2hvdycgbWV0aG9kIGlmIHRoZSBjb2xsZWN0aW9uIHZpZXcgaGFzIGFscmVhZHkgYmVlbiBzaG93blxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ3Nob3cnLCB2aWV3KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBSZXRyaWV2ZSB0aGUgYGNoaWxkVmlld2AgY2xhc3MsIGVpdGhlciBmcm9tIGB0aGlzLm9wdGlvbnMuY2hpbGRWaWV3YFxuICAgIC8vIG9yIGZyb20gdGhlIGBjaGlsZFZpZXdgIGluIHRoZSBvYmplY3QgZGVmaW5pdGlvbi4gVGhlIFwib3B0aW9uc1wiXG4gICAgLy8gdGFrZXMgcHJlY2VkZW5jZS5cbiAgICAvLyBUaGlzIG1ldGhvZCByZWNlaXZlcyB0aGUgbW9kZWwgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgaW5zdGFuY2VcbiAgICAvLyBjcmVhdGVkIGZyb20gdGhpcyBgY2hpbGRWaWV3YC4gT3ZlcnJpZGluZyBtZXRob2RzIG1heSB1c2UgdGhlIGNoaWxkXG4gICAgLy8gdG8gZGV0ZXJtaW5lIHdoYXQgYGNoaWxkVmlld2AgY2xhc3MgdG8gcmV0dXJuLlxuICAgIGdldENoaWxkVmlldzogZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgIHZhciBjaGlsZFZpZXcgPSB0aGlzLmdldE9wdGlvbignY2hpbGRWaWV3Jyk7XG4gIFxuICAgICAgaWYgKCFjaGlsZFZpZXcpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3Ioe1xuICAgICAgICAgIG5hbWU6ICdOb0NoaWxkVmlld0Vycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQSBcImNoaWxkVmlld1wiIG11c3QgYmUgc3BlY2lmaWVkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gY2hpbGRWaWV3O1xuICAgIH0sXG4gIFxuICAgIC8vIFJlbmRlciB0aGUgY2hpbGQncyB2aWV3IGFuZCBhZGQgaXQgdG8gdGhlXG4gICAgLy8gSFRNTCBmb3IgdGhlIGNvbGxlY3Rpb24gdmlldyBhdCBhIGdpdmVuIGluZGV4LlxuICAgIC8vIFRoaXMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgaW5kaWNlcyBvZiBsYXRlciB2aWV3cyBpbiB0aGUgY29sbGVjdGlvblxuICAgIC8vIGluIG9yZGVyIHRvIGtlZXAgdGhlIGNoaWxkcmVuIGluIHN5bmMgd2l0aCB0aGUgY29sbGVjdGlvbi5cbiAgICBhZGRDaGlsZDogZnVuY3Rpb24oY2hpbGQsIENoaWxkVmlldywgaW5kZXgpIHtcbiAgICAgIHZhciBjaGlsZFZpZXdPcHRpb25zID0gdGhpcy5nZXRPcHRpb24oJ2NoaWxkVmlld09wdGlvbnMnKTtcbiAgICAgIGNoaWxkVmlld09wdGlvbnMgPSBNYXJpb25ldHRlLl9nZXRWYWx1ZShjaGlsZFZpZXdPcHRpb25zLCB0aGlzLCBbY2hpbGQsIGluZGV4XSk7XG4gIFxuICAgICAgdmFyIHZpZXcgPSB0aGlzLmJ1aWxkQ2hpbGRWaWV3KGNoaWxkLCBDaGlsZFZpZXcsIGNoaWxkVmlld09wdGlvbnMpO1xuICBcbiAgICAgIC8vIGluY3JlbWVudCBpbmRpY2VzIG9mIHZpZXdzIGFmdGVyIHRoaXMgb25lXG4gICAgICB0aGlzLl91cGRhdGVJbmRpY2VzKHZpZXcsIHRydWUsIGluZGV4KTtcbiAgXG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTphZGQ6Y2hpbGQnLCB2aWV3KTtcbiAgICAgIHRoaXMuX2FkZENoaWxkVmlldyh2aWV3LCBpbmRleCk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2FkZDpjaGlsZCcsIHZpZXcpO1xuICBcbiAgICAgIHZpZXcuX3BhcmVudCA9IHRoaXM7XG4gIFxuICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kLiBUaGlzIGRlY3JlbWVudHMgb3IgaW5jcmVtZW50cyB0aGUgaW5kaWNlcyBvZiB2aWV3cyBhZnRlciB0aGVcbiAgICAvLyBhZGRlZC9yZW1vdmVkIHZpZXcgdG8ga2VlcCBpbiBzeW5jIHdpdGggdGhlIGNvbGxlY3Rpb24uXG4gICAgX3VwZGF0ZUluZGljZXM6IGZ1bmN0aW9uKHZpZXcsIGluY3JlbWVudCwgaW5kZXgpIHtcbiAgICAgIGlmICghdGhpcy5nZXRPcHRpb24oJ3NvcnQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGluY3JlbWVudCkge1xuICAgICAgICAvLyBhc3NpZ24gdGhlIGluZGV4IHRvIHRoZSB2aWV3XG4gICAgICAgIHZpZXcuX2luZGV4ID0gaW5kZXg7XG4gICAgICB9XG4gIFxuICAgICAgLy8gdXBkYXRlIHRoZSBpbmRleGVzIG9mIHZpZXdzIGFmdGVyIHRoaXMgb25lXG4gICAgICB0aGlzLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24obGF0ZXJWaWV3KSB7XG4gICAgICAgIGlmIChsYXRlclZpZXcuX2luZGV4ID49IHZpZXcuX2luZGV4KSB7XG4gICAgICAgICAgbGF0ZXJWaWV3Ll9pbmRleCArPSBpbmNyZW1lbnQgPyAxIDogLTE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIE1ldGhvZC4gQWRkIHRoZSB2aWV3IHRvIGNoaWxkcmVuIGFuZCByZW5kZXIgaXQgYXRcbiAgICAvLyB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgX2FkZENoaWxkVmlldzogZnVuY3Rpb24odmlldywgaW5kZXgpIHtcbiAgICAgIC8vIE9ubHkgdHJpZ2dlciBhdHRhY2ggaWYgYWxyZWFkeSBzaG93biwgYXR0YWNoZWQsIGFuZCBub3QgYnVmZmVyaW5nLCBvdGhlcndpc2UgZW5kQnVmZmVyKCkgb3JcbiAgICAgIC8vIFJlZ2lvbiNzaG93KCkgaGFuZGxlcyB0aGlzLlxuICAgICAgdmFyIGNhblRyaWdnZXJBdHRhY2ggPSB0aGlzLl9pc1Nob3duICYmICF0aGlzLmlzQnVmZmVyaW5nICYmIE1hcmlvbmV0dGUuaXNOb2RlQXR0YWNoZWQodGhpcy5lbCk7XG4gICAgICB2YXIgbmVzdGVkVmlld3M7XG4gIFxuICAgICAgLy8gc2V0IHVwIHRoZSBjaGlsZCB2aWV3IGV2ZW50IGZvcndhcmRpbmdcbiAgICAgIHRoaXMucHJveHlDaGlsZEV2ZW50cyh2aWV3KTtcbiAgXG4gICAgICB2aWV3Lm9uY2UoJ3JlbmRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB0cmlnZ2VyIHRoZSAnYmVmb3JlOnNob3cnIGV2ZW50IG9uIGB2aWV3YCBpZiB0aGUgY29sbGVjdGlvbiB2aWV3IGhhcyBhbHJlYWR5IGJlZW4gc2hvd25cbiAgICAgICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgIXRoaXMuaXNCdWZmZXJpbmcpIHtcbiAgICAgICAgICBNYXJpb25ldHRlLnRyaWdnZXJNZXRob2RPbih2aWV3LCAnYmVmb3JlOnNob3cnLCB2aWV3KTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gVHJpZ2dlciBgYmVmb3JlOmF0dGFjaGAgZm9sbG93aW5nIGByZW5kZXJgIHRvIGF2b2lkIGFkZGluZyBsb2dpYyBhbmQgZXZlbnQgdHJpZ2dlcnNcbiAgICAgICAgLy8gdG8gcHVibGljIG1ldGhvZCBgcmVuZGVyQ2hpbGRWaWV3KClgLlxuICAgICAgICBpZiAoY2FuVHJpZ2dlckF0dGFjaCAmJiB0aGlzLl90cmlnZ2VyQmVmb3JlQXR0YWNoKSB7XG4gICAgICAgICAgbmVzdGVkVmlld3MgPSB0aGlzLl9nZXRWaWV3QW5kTmVzdGVkKHZpZXcpO1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJNZXRob2RNYW55KG5lc3RlZFZpZXdzLCB0aGlzLCAnYmVmb3JlOmF0dGFjaCcpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgXG4gICAgICAvLyBTdG9yZSB0aGUgY2hpbGQgdmlldyBpdHNlbGYgc28gd2UgY2FuIHByb3Blcmx5IHJlbW92ZSBhbmQvb3IgZGVzdHJveSBpdCBsYXRlclxuICAgICAgdGhpcy5jaGlsZHJlbi5hZGQodmlldyk7XG4gICAgICB0aGlzLnJlbmRlckNoaWxkVmlldyh2aWV3LCBpbmRleCk7XG4gIFxuICAgICAgLy8gVHJpZ2dlciBgYXR0YWNoYFxuICAgICAgaWYgKGNhblRyaWdnZXJBdHRhY2ggJiYgdGhpcy5fdHJpZ2dlckF0dGFjaCkge1xuICAgICAgICBuZXN0ZWRWaWV3cyA9IHRoaXMuX2dldFZpZXdBbmROZXN0ZWQodmlldyk7XG4gICAgICAgIHRoaXMuX3RyaWdnZXJNZXRob2RNYW55KG5lc3RlZFZpZXdzLCB0aGlzLCAnYXR0YWNoJyk7XG4gICAgICB9XG4gICAgICAvLyBUcmlnZ2VyIGBzaG93YFxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24gJiYgIXRoaXMuaXNCdWZmZXJpbmcpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ3Nob3cnLCB2aWV3KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyByZW5kZXIgdGhlIGNoaWxkIHZpZXdcbiAgICByZW5kZXJDaGlsZFZpZXc6IGZ1bmN0aW9uKHZpZXcsIGluZGV4KSB7XG4gICAgICBpZiAoIXZpZXcuc3VwcG9ydHNSZW5kZXJMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2JlZm9yZTpyZW5kZXInLCB2aWV3KTtcbiAgICAgIH1cbiAgICAgIHZpZXcucmVuZGVyKCk7XG4gICAgICBpZiAoIXZpZXcuc3VwcG9ydHNSZW5kZXJMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ3JlbmRlcicsIHZpZXcpO1xuICAgICAgfVxuICAgICAgdGhpcy5hdHRhY2hIdG1sKHRoaXMsIHZpZXcsIGluZGV4KTtcbiAgICAgIHJldHVybiB2aWV3O1xuICAgIH0sXG4gIFxuICAgIC8vIEJ1aWxkIGEgYGNoaWxkVmlld2AgZm9yIGEgbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgYnVpbGRDaGlsZFZpZXc6IGZ1bmN0aW9uKGNoaWxkLCBDaGlsZFZpZXdDbGFzcywgY2hpbGRWaWV3T3B0aW9ucykge1xuICAgICAgdmFyIG9wdGlvbnMgPSBfLmV4dGVuZCh7bW9kZWw6IGNoaWxkfSwgY2hpbGRWaWV3T3B0aW9ucyk7XG4gICAgICB2YXIgY2hpbGRWaWV3ID0gbmV3IENoaWxkVmlld0NsYXNzKG9wdGlvbnMpO1xuICAgICAgTWFyaW9uZXR0ZS5Nb25pdG9yRE9NUmVmcmVzaChjaGlsZFZpZXcpO1xuICAgICAgcmV0dXJuIGNoaWxkVmlldztcbiAgICB9LFxuICBcbiAgICAvLyBSZW1vdmUgdGhlIGNoaWxkIHZpZXcgYW5kIGRlc3Ryb3kgaXQuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBhbHNvIHVwZGF0ZXMgdGhlIGluZGljZXMgb2ZcbiAgICAvLyBsYXRlciB2aWV3cyBpbiB0aGUgY29sbGVjdGlvbiBpbiBvcmRlciB0byBrZWVwXG4gICAgLy8gdGhlIGNoaWxkcmVuIGluIHN5bmMgd2l0aCB0aGUgY29sbGVjdGlvbi5cbiAgICByZW1vdmVDaGlsZFZpZXc6IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgIGlmICghdmlldykgeyByZXR1cm4gdmlldzsgfVxuICBcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbW92ZTpjaGlsZCcsIHZpZXcpO1xuICBcbiAgICAgIGlmICghdmlldy5zdXBwb3J0c0Rlc3Ryb3lMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2JlZm9yZTpkZXN0cm95Jywgdmlldyk7XG4gICAgICB9XG4gICAgICAvLyBjYWxsICdkZXN0cm95JyBvciAncmVtb3ZlJywgZGVwZW5kaW5nIG9uIHdoaWNoIGlzIGZvdW5kXG4gICAgICBpZiAodmlldy5kZXN0cm95KSB7XG4gICAgICAgIHZpZXcuZGVzdHJveSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIGlmICghdmlldy5zdXBwb3J0c0Rlc3Ryb3lMaWZlY3ljbGUpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kT24odmlldywgJ2Rlc3Ryb3knLCB2aWV3KTtcbiAgICAgIH1cbiAgXG4gICAgICBkZWxldGUgdmlldy5fcGFyZW50O1xuICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKHZpZXcpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5yZW1vdmUodmlldyk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3JlbW92ZTpjaGlsZCcsIHZpZXcpO1xuICBcbiAgICAgIC8vIGRlY3JlbWVudCB0aGUgaW5kZXggb2Ygdmlld3MgYWZ0ZXIgdGhpcyBvbmVcbiAgICAgIHRoaXMuX3VwZGF0ZUluZGljZXModmlldywgZmFsc2UpO1xuICBcbiAgICAgIHJldHVybiB2aWV3O1xuICAgIH0sXG4gIFxuICAgIC8vIGNoZWNrIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5XG4gICAgaXNFbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuY29sbGVjdGlvbiB8fCB0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoID09PSAwO1xuICAgIH0sXG4gIFxuICAgIC8vIElmIGVtcHR5LCBzaG93IHRoZSBlbXB0eSB2aWV3XG4gICAgY2hlY2tFbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pc0VtcHR5KHRoaXMuY29sbGVjdGlvbikpIHtcbiAgICAgICAgdGhpcy5zaG93RW1wdHlWaWV3KCk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLy8gWW91IG1pZ2h0IG5lZWQgdG8gb3ZlcnJpZGUgdGhpcyBpZiB5b3UndmUgb3ZlcnJpZGRlbiBhdHRhY2hIdG1sXG4gICAgYXR0YWNoQnVmZmVyOiBmdW5jdGlvbihjb2xsZWN0aW9uVmlldywgYnVmZmVyKSB7XG4gICAgICBjb2xsZWN0aW9uVmlldy4kZWwuYXBwZW5kKGJ1ZmZlcik7XG4gICAgfSxcbiAgXG4gICAgLy8gQ3JlYXRlIGEgZnJhZ21lbnQgYnVmZmVyIGZyb20gdGhlIGN1cnJlbnRseSBidWZmZXJlZCBjaGlsZHJlblxuICAgIF9jcmVhdGVCdWZmZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGVsQnVmZmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgXy5lYWNoKHRoaXMuX2J1ZmZlcmVkQ2hpbGRyZW4sIGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgZWxCdWZmZXIuYXBwZW5kQ2hpbGQoYi5lbCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBlbEJ1ZmZlcjtcbiAgICB9LFxuICBcbiAgICAvLyBBcHBlbmQgdGhlIEhUTUwgdG8gdGhlIGNvbGxlY3Rpb24ncyBgZWxgLlxuICAgIC8vIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGRvIHNvbWV0aGluZyBvdGhlclxuICAgIC8vIHRoYW4gYC5hcHBlbmRgLlxuICAgIGF0dGFjaEh0bWw6IGZ1bmN0aW9uKGNvbGxlY3Rpb25WaWV3LCBjaGlsZFZpZXcsIGluZGV4KSB7XG4gICAgICBpZiAoY29sbGVjdGlvblZpZXcuaXNCdWZmZXJpbmcpIHtcbiAgICAgICAgLy8gYnVmZmVyaW5nIGhhcHBlbnMgb24gcmVzZXQgZXZlbnRzIGFuZCBpbml0aWFsIHJlbmRlcnNcbiAgICAgICAgLy8gaW4gb3JkZXIgdG8gcmVkdWNlIHRoZSBudW1iZXIgb2YgaW5zZXJ0cyBpbnRvIHRoZVxuICAgICAgICAvLyBkb2N1bWVudCwgd2hpY2ggYXJlIGV4cGVuc2l2ZS5cbiAgICAgICAgY29sbGVjdGlvblZpZXcuX2J1ZmZlcmVkQ2hpbGRyZW4uc3BsaWNlKGluZGV4LCAwLCBjaGlsZFZpZXcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSByZW5kZXJlZCB0aGUgbWFpbiBjb2xsZWN0aW9uLCBhcHBlbmRcbiAgICAgICAgLy8gdGhlIG5ldyBjaGlsZCBpbnRvIHRoZSBjb3JyZWN0IG9yZGVyIGlmIHdlIG5lZWQgdG8uIE90aGVyd2lzZVxuICAgICAgICAvLyBhcHBlbmQgdG8gdGhlIGVuZC5cbiAgICAgICAgaWYgKCFjb2xsZWN0aW9uVmlldy5faW5zZXJ0QmVmb3JlKGNoaWxkVmlldywgaW5kZXgpKSB7XG4gICAgICAgICAgY29sbGVjdGlvblZpZXcuX2luc2VydEFmdGVyKGNoaWxkVmlldyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QuIENoZWNrIHdoZXRoZXIgd2UgbmVlZCB0byBpbnNlcnQgdGhlIHZpZXcgaW50b1xuICAgIC8vIHRoZSBjb3JyZWN0IHBvc2l0aW9uLlxuICAgIF9pbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkVmlldywgaW5kZXgpIHtcbiAgICAgIHZhciBjdXJyZW50VmlldztcbiAgICAgIHZhciBmaW5kUG9zaXRpb24gPSB0aGlzLmdldE9wdGlvbignc29ydCcpICYmIChpbmRleCA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAoZmluZFBvc2l0aW9uKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIHZpZXcgYWZ0ZXIgdGhpcyBvbmVcbiAgICAgICAgY3VycmVudFZpZXcgPSB0aGlzLmNoaWxkcmVuLmZpbmQoZnVuY3Rpb24odmlldykge1xuICAgICAgICAgIHJldHVybiB2aWV3Ll9pbmRleCA9PT0gaW5kZXggKyAxO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoY3VycmVudFZpZXcpIHtcbiAgICAgICAgY3VycmVudFZpZXcuJGVsLmJlZm9yZShjaGlsZFZpZXcuZWwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kLiBBcHBlbmQgYSB2aWV3IHRvIHRoZSBlbmQgb2YgdGhlICRlbFxuICAgIF9pbnNlcnRBZnRlcjogZnVuY3Rpb24oY2hpbGRWaWV3KSB7XG4gICAgICB0aGlzLiRlbC5hcHBlbmQoY2hpbGRWaWV3LmVsKTtcbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gc2V0IHVwIHRoZSBgY2hpbGRyZW5gIG9iamVjdCBmb3JcbiAgICAvLyBzdG9yaW5nIGFsbCBvZiB0aGUgY2hpbGQgdmlld3NcbiAgICBfaW5pdENoaWxkVmlld1N0b3JhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jaGlsZHJlbiA9IG5ldyBCYWNrYm9uZS5DaGlsZFZpZXdDb250YWluZXIoKTtcbiAgICB9LFxuICBcbiAgICAvLyBIYW5kbGUgY2xlYW51cCBhbmQgb3RoZXIgZGVzdHJveWluZyBuZWVkcyBmb3IgdGhlIGNvbGxlY3Rpb24gb2Ygdmlld3NcbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7IHJldHVybiB0aGlzOyB9XG4gIFxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6ZGVzdHJveTpjb2xsZWN0aW9uJyk7XG4gICAgICB0aGlzLmRlc3Ryb3lDaGlsZHJlbih7Y2hlY2tFbXB0eTogZmFsc2V9KTtcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnZGVzdHJveTpjb2xsZWN0aW9uJyk7XG4gIFxuICAgICAgcmV0dXJuIE1hcmlvbmV0dGUuVmlldy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIERlc3Ryb3kgdGhlIGNoaWxkIHZpZXdzIHRoYXQgdGhpcyBjb2xsZWN0aW9uIHZpZXdcbiAgICAvLyBpcyBob2xkaW5nIG9uIHRvLCBpZiBhbnlcbiAgICBkZXN0cm95Q2hpbGRyZW46IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBkZXN0cm95T3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgc2hvdWxkQ2hlY2tFbXB0eSA9IHRydWU7XG4gICAgICB2YXIgY2hpbGRWaWV3cyA9IHRoaXMuY2hpbGRyZW4ubWFwKF8uaWRlbnRpdHkpO1xuICBcbiAgICAgIGlmICghXy5pc1VuZGVmaW5lZChkZXN0cm95T3B0aW9ucy5jaGVja0VtcHR5KSkge1xuICAgICAgICBzaG91bGRDaGVja0VtcHR5ID0gZGVzdHJveU9wdGlvbnMuY2hlY2tFbXB0eTtcbiAgICAgIH1cbiAgXG4gICAgICB0aGlzLmNoaWxkcmVuLmVhY2godGhpcy5yZW1vdmVDaGlsZFZpZXcsIHRoaXMpO1xuICBcbiAgICAgIGlmIChzaG91bGRDaGVja0VtcHR5KSB7XG4gICAgICAgIHRoaXMuY2hlY2tFbXB0eSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkVmlld3M7XG4gICAgfSxcbiAgXG4gICAgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIGNoaWxkIHNob3VsZCBiZSBzaG93blxuICAgIC8vIFJldHVybiBmYWxzZSBvdGhlcndpc2VcbiAgICAvLyBUaGUgZmlsdGVyIHdpbGwgYmUgcGFzc2VkIChjaGlsZCwgaW5kZXgsIGNvbGxlY3Rpb24pXG4gICAgLy8gV2hlcmVcbiAgICAvLyAgJ2NoaWxkJyBpcyB0aGUgZ2l2ZW4gbW9kZWxcbiAgICAvLyAgJ2luZGV4JyBpcyB0aGUgaW5kZXggb2YgdGhhdCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvblxuICAgIC8vICAnY29sbGVjdGlvbicgaXMgdGhlIGNvbGxlY3Rpb24gcmVmZXJlbmNlZCBieSB0aGlzIENvbGxlY3Rpb25WaWV3XG4gICAgX3Nob3VsZEFkZENoaWxkOiBmdW5jdGlvbihjaGlsZCwgaW5kZXgpIHtcbiAgICAgIHZhciBmaWx0ZXIgPSB0aGlzLmdldE9wdGlvbignZmlsdGVyJyk7XG4gICAgICByZXR1cm4gIV8uaXNGdW5jdGlvbihmaWx0ZXIpIHx8IGZpbHRlci5jYWxsKHRoaXMsIGNoaWxkLCBpbmRleCwgdGhpcy5jb2xsZWN0aW9uKTtcbiAgICB9LFxuICBcbiAgICAvLyBTZXQgdXAgdGhlIGNoaWxkIHZpZXcgZXZlbnQgZm9yd2FyZGluZy4gVXNlcyBhIFwiY2hpbGR2aWV3OlwiXG4gICAgLy8gcHJlZml4IGluIGZyb250IG9mIGFsbCBmb3J3YXJkZWQgZXZlbnRzLlxuICAgIHByb3h5Q2hpbGRFdmVudHM6IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgIHZhciBwcmVmaXggPSB0aGlzLmdldE9wdGlvbignY2hpbGRWaWV3RXZlbnRQcmVmaXgnKTtcbiAgXG4gICAgICAvLyBGb3J3YXJkIGFsbCBjaGlsZCB2aWV3IGV2ZW50cyB0aHJvdWdoIHRoZSBwYXJlbnQsXG4gICAgICAvLyBwcmVwZW5kaW5nIFwiY2hpbGR2aWV3OlwiIHRvIHRoZSBldmVudCBuYW1lXG4gICAgICB0aGlzLmxpc3RlblRvKHZpZXcsICdhbGwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBfLnRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIHJvb3RFdmVudCA9IGFyZ3NbMF07XG4gICAgICAgIHZhciBjaGlsZEV2ZW50cyA9IHRoaXMubm9ybWFsaXplTWV0aG9kcyhfLnJlc3VsdCh0aGlzLCAnY2hpbGRFdmVudHMnKSk7XG4gIFxuICAgICAgICBhcmdzWzBdID0gcHJlZml4ICsgJzonICsgcm9vdEV2ZW50O1xuICAgICAgICBhcmdzLnNwbGljZSgxLCAwLCB2aWV3KTtcbiAgXG4gICAgICAgIC8vIGNhbGwgY29sbGVjdGlvblZpZXcgY2hpbGRFdmVudCBpZiBkZWZpbmVkXG4gICAgICAgIGlmICh0eXBlb2YgY2hpbGRFdmVudHMgIT09ICd1bmRlZmluZWQnICYmIF8uaXNGdW5jdGlvbihjaGlsZEV2ZW50c1tyb290RXZlbnRdKSkge1xuICAgICAgICAgIGNoaWxkRXZlbnRzW3Jvb3RFdmVudF0uYXBwbHkodGhpcywgYXJncy5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIF9nZXRJbW1lZGlhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXy52YWx1ZXModGhpcy5jaGlsZHJlbi5fdmlld3MpO1xuICAgIH0sXG4gIFxuICAgIF9nZXRWaWV3QW5kTmVzdGVkOiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAvLyBUaGlzIHdpbGwgbm90IGZhaWwgb24gQmFja2JvbmUuVmlldyB3aGljaCBkb2VzIG5vdCBoYXZlICNfZ2V0TmVzdGVkVmlld3MuXG4gICAgICByZXR1cm4gW3ZpZXddLmNvbmNhdChfLnJlc3VsdCh2aWV3LCAnX2dldE5lc3RlZFZpZXdzJykgfHwgW10pO1xuICAgIH0sXG4gIFxuICAgIGdldFZpZXdDb21wYXJhdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbigndmlld0NvbXBhcmF0b3InKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLyoganNoaW50IG1heHN0YXRlbWVudHM6IDE3LCBtYXhsZW46IDExNyAqL1xuICBcbiAgLy8gQ29tcG9zaXRlIFZpZXdcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgXG4gIC8vIFVzZWQgZm9yIHJlbmRlcmluZyBhIGJyYW5jaC1sZWFmLCBoaWVyYXJjaGljYWwgc3RydWN0dXJlLlxuICAvLyBFeHRlbmRzIGRpcmVjdGx5IGZyb20gQ29sbGVjdGlvblZpZXcgYW5kIGFsc28gcmVuZGVycyBhblxuICAvLyBhIGNoaWxkIHZpZXcgYXMgYG1vZGVsVmlld2AsIGZvciB0aGUgdG9wIGxlYWZcbiAgTWFyaW9uZXR0ZS5Db21wb3NpdGVWaWV3ID0gTWFyaW9uZXR0ZS5Db2xsZWN0aW9uVmlldy5leHRlbmQoe1xuICBcbiAgICAvLyBTZXR0aW5nIHVwIHRoZSBpbmhlcml0YW5jZSBjaGFpbiB3aGljaCBhbGxvd3MgY2hhbmdlcyB0b1xuICAgIC8vIE1hcmlvbmV0dGUuQ29sbGVjdGlvblZpZXcucHJvdG90eXBlLmNvbnN0cnVjdG9yIHdoaWNoIGFsbG93cyBvdmVycmlkaW5nXG4gICAgLy8gb3B0aW9uIHRvIHBhc3MgJ3tzb3J0OiBmYWxzZX0nIHRvIHByZXZlbnQgdGhlIENvbXBvc2l0ZVZpZXcgZnJvbVxuICAgIC8vIG1haW50YWluaW5nIHRoZSBzb3J0ZWQgb3JkZXIgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgLy8gVGhpcyB3aWxsIGZhbGxiYWNrIG9udG8gYXBwZW5kaW5nIGNoaWxkVmlldydzIHRvIHRoZSBlbmQuXG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgTWFyaW9uZXR0ZS5Db2xsZWN0aW9uVmlldy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIENvbmZpZ3VyZWQgdGhlIGluaXRpYWwgZXZlbnRzIHRoYXQgdGhlIGNvbXBvc2l0ZSB2aWV3XG4gICAgLy8gYmluZHMgdG8uIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHByZXZlbnQgdGhlIGluaXRpYWxcbiAgICAvLyBldmVudHMsIG9yIHRvIGFkZCB5b3VyIG93biBpbml0aWFsIGV2ZW50cy5cbiAgICBfaW5pdGlhbEV2ZW50czogZnVuY3Rpb24oKSB7XG4gIFxuICAgICAgLy8gQmluZCBvbmx5IGFmdGVyIGNvbXBvc2l0ZSB2aWV3IGlzIHJlbmRlcmVkIHRvIGF2b2lkIGFkZGluZyBjaGlsZCB2aWV3c1xuICAgICAgLy8gdG8gbm9uZXhpc3RlbnQgY2hpbGRWaWV3Q29udGFpbmVyXG4gIFxuICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbikge1xuICAgICAgICB0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwgJ2FkZCcsIHRoaXMuX29uQ29sbGVjdGlvbkFkZCk7XG4gICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCAncmVtb3ZlJywgdGhpcy5fb25Db2xsZWN0aW9uUmVtb3ZlKTtcbiAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sICdyZXNldCcsIHRoaXMuX3JlbmRlckNoaWxkcmVuKTtcbiAgXG4gICAgICAgIGlmICh0aGlzLmdldE9wdGlvbignc29ydCcpKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sICdzb3J0JywgdGhpcy5fc29ydFZpZXdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8vIFJldHJpZXZlIHRoZSBgY2hpbGRWaWV3YCB0byBiZSB1c2VkIHdoZW4gcmVuZGVyaW5nIGVhY2ggb2ZcbiAgICAvLyB0aGUgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24uIFRoZSBkZWZhdWx0IGlzIHRvIHJldHVyblxuICAgIC8vIGB0aGlzLmNoaWxkVmlld2Agb3IgTWFyaW9uZXR0ZS5Db21wb3NpdGVWaWV3IGlmIG5vIGBjaGlsZFZpZXdgXG4gICAgLy8gaGFzIGJlZW4gZGVmaW5lZFxuICAgIGdldENoaWxkVmlldzogZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgIHZhciBjaGlsZFZpZXcgPSB0aGlzLmdldE9wdGlvbignY2hpbGRWaWV3JykgfHwgdGhpcy5jb25zdHJ1Y3RvcjtcbiAgXG4gICAgICByZXR1cm4gY2hpbGRWaWV3O1xuICAgIH0sXG4gIFxuICAgIC8vIFNlcmlhbGl6ZSB0aGUgbW9kZWwgZm9yIHRoZSB2aWV3LlxuICAgIC8vIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGBzZXJpYWxpemVEYXRhYCBtZXRob2QgaW4geW91ciBvd24gdmlld1xuICAgIC8vIGRlZmluaXRpb24sIHRvIHByb3ZpZGUgY3VzdG9tIHNlcmlhbGl6YXRpb24gZm9yIHlvdXIgdmlldydzIGRhdGEuXG4gICAgc2VyaWFsaXplRGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGF0YSA9IHt9O1xuICBcbiAgICAgIGlmICh0aGlzLm1vZGVsKSB7XG4gICAgICAgIGRhdGEgPSBfLnBhcnRpYWwodGhpcy5zZXJpYWxpemVNb2RlbCwgdGhpcy5tb2RlbCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICBcbiAgICAvLyBSZW5kZXJzIHRoZSBtb2RlbCBhbmQgdGhlIGNvbGxlY3Rpb24uXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2Vuc3VyZVZpZXdJc0ludGFjdCgpO1xuICAgICAgdGhpcy5faXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5yZXNldENoaWxkVmlld0NvbnRhaW5lcigpO1xuICBcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbmRlcicsIHRoaXMpO1xuICBcbiAgICAgIHRoaXMuX3JlbmRlclRlbXBsYXRlKCk7XG4gICAgICB0aGlzLl9yZW5kZXJDaGlsZHJlbigpO1xuICBcbiAgICAgIHRoaXMuX2lzUmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdyZW5kZXInLCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIF9yZW5kZXJDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pc1JlbmRlcmVkIHx8IHRoaXMuX2lzUmVuZGVyaW5nKSB7XG4gICAgICAgIE1hcmlvbmV0dGUuQ29sbGVjdGlvblZpZXcucHJvdG90eXBlLl9yZW5kZXJDaGlsZHJlbi5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8vIFJlbmRlciB0aGUgcm9vdCB0ZW1wbGF0ZSB0aGF0IHRoZSBjaGlsZHJlblxuICAgIC8vIHZpZXdzIGFyZSBhcHBlbmRlZCB0b1xuICAgIF9yZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgZGF0YSA9IHRoaXMuc2VyaWFsaXplRGF0YSgpO1xuICAgICAgZGF0YSA9IHRoaXMubWl4aW5UZW1wbGF0ZUhlbHBlcnMoZGF0YSk7XG4gIFxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6cmVuZGVyOnRlbXBsYXRlJyk7XG4gIFxuICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZSgpO1xuICAgICAgdmFyIGh0bWwgPSBNYXJpb25ldHRlLlJlbmRlcmVyLnJlbmRlcih0ZW1wbGF0ZSwgZGF0YSwgdGhpcyk7XG4gICAgICB0aGlzLmF0dGFjaEVsQ29udGVudChodG1sKTtcbiAgXG4gICAgICAvLyB0aGUgdWkgYmluZGluZ3MgaXMgZG9uZSBoZXJlIGFuZCBub3QgYXQgdGhlIGVuZCBvZiByZW5kZXIgc2luY2UgdGhleVxuICAgICAgLy8gd2lsbCBub3QgYmUgYXZhaWxhYmxlIHVudGlsIGFmdGVyIHRoZSBtb2RlbCBpcyByZW5kZXJlZCwgYnV0IHNob3VsZCBiZVxuICAgICAgLy8gYXZhaWxhYmxlIGJlZm9yZSB0aGUgY29sbGVjdGlvbiBpcyByZW5kZXJlZC5cbiAgICAgIHRoaXMuYmluZFVJRWxlbWVudHMoKTtcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgncmVuZGVyOnRlbXBsYXRlJyk7XG4gICAgfSxcbiAgXG4gICAgLy8gQXR0YWNoZXMgdGhlIGNvbnRlbnQgb2YgdGhlIHJvb3QuXG4gICAgLy8gVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gdG8gb3B0aW1pemUgcmVuZGVyaW5nLFxuICAgIC8vIG9yIHRvIHJlbmRlciBpbiBhIG5vbiBzdGFuZGFyZCB3YXkuXG4gICAgLy9cbiAgICAvLyBGb3IgZXhhbXBsZSwgdXNpbmcgYGlubmVySFRNTGAgaW5zdGVhZCBvZiBgJGVsLmh0bWxgXG4gICAgLy9cbiAgICAvLyBgYGBqc1xuICAgIC8vIGF0dGFjaEVsQ29udGVudDogZnVuY3Rpb24oaHRtbCkge1xuICAgIC8vICAgdGhpcy5lbC5pbm5lckhUTUwgPSBodG1sO1xuICAgIC8vICAgcmV0dXJuIHRoaXM7XG4gICAgLy8gfVxuICAgIC8vIGBgYFxuICAgIGF0dGFjaEVsQ29udGVudDogZnVuY3Rpb24oaHRtbCkge1xuICAgICAgdGhpcy4kZWwuaHRtbChodG1sKTtcbiAgXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICBcbiAgICAvLyBZb3UgbWlnaHQgbmVlZCB0byBvdmVycmlkZSB0aGlzIGlmIHlvdSd2ZSBvdmVycmlkZGVuIGF0dGFjaEh0bWxcbiAgICBhdHRhY2hCdWZmZXI6IGZ1bmN0aW9uKGNvbXBvc2l0ZVZpZXcsIGJ1ZmZlcikge1xuICAgICAgdmFyICRjb250YWluZXIgPSB0aGlzLmdldENoaWxkVmlld0NvbnRhaW5lcihjb21wb3NpdGVWaWV3KTtcbiAgICAgICRjb250YWluZXIuYXBwZW5kKGJ1ZmZlcik7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kLiBBcHBlbmQgYSB2aWV3IHRvIHRoZSBlbmQgb2YgdGhlICRlbC5cbiAgICAvLyBPdmVyaWRkZW4gZnJvbSBDb2xsZWN0aW9uVmlldyB0byBlbnN1cmUgdmlldyBpcyBhcHBlbmRlZCB0b1xuICAgIC8vIGNoaWxkVmlld0NvbnRhaW5lclxuICAgIF9pbnNlcnRBZnRlcjogZnVuY3Rpb24oY2hpbGRWaWV3KSB7XG4gICAgICB2YXIgJGNvbnRhaW5lciA9IHRoaXMuZ2V0Q2hpbGRWaWV3Q29udGFpbmVyKHRoaXMsIGNoaWxkVmlldyk7XG4gICAgICAkY29udGFpbmVyLmFwcGVuZChjaGlsZFZpZXcuZWwpO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZC4gQXBwZW5kIHJlb3JkZXJlZCBjaGlsZFZpZXcnLlxuICAgIC8vIE92ZXJpZGRlbiBmcm9tIENvbGxlY3Rpb25WaWV3IHRvIGVuc3VyZSByZW9yZGVyZWQgdmlld3NcbiAgICAvLyBhcmUgYXBwZW5kZWQgdG8gY2hpbGRWaWV3Q29udGFpbmVyXG4gICAgX2FwcGVuZFJlb3JkZXJlZENoaWxkcmVuOiBmdW5jdGlvbihjaGlsZHJlbikge1xuICAgICAgdmFyICRjb250YWluZXIgPSB0aGlzLmdldENoaWxkVmlld0NvbnRhaW5lcih0aGlzKTtcbiAgICAgICRjb250YWluZXIuYXBwZW5kKGNoaWxkcmVuKTtcbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gZW5zdXJlIGFuIGAkY2hpbGRWaWV3Q29udGFpbmVyYCBleGlzdHMsIGZvciB0aGVcbiAgICAvLyBgYXR0YWNoSHRtbGAgbWV0aG9kIHRvIHVzZS5cbiAgICBnZXRDaGlsZFZpZXdDb250YWluZXI6IGZ1bmN0aW9uKGNvbnRhaW5lclZpZXcsIGNoaWxkVmlldykge1xuICAgICAgaWYgKCEhY29udGFpbmVyVmlldy4kY2hpbGRWaWV3Q29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXJWaWV3LiRjaGlsZFZpZXdDb250YWluZXI7XG4gICAgICB9XG4gIFxuICAgICAgdmFyIGNvbnRhaW5lcjtcbiAgICAgIHZhciBjaGlsZFZpZXdDb250YWluZXIgPSBNYXJpb25ldHRlLmdldE9wdGlvbihjb250YWluZXJWaWV3LCAnY2hpbGRWaWV3Q29udGFpbmVyJyk7XG4gICAgICBpZiAoY2hpbGRWaWV3Q29udGFpbmVyKSB7XG4gIFxuICAgICAgICB2YXIgc2VsZWN0b3IgPSBNYXJpb25ldHRlLl9nZXRWYWx1ZShjaGlsZFZpZXdDb250YWluZXIsIGNvbnRhaW5lclZpZXcpO1xuICBcbiAgICAgICAgaWYgKHNlbGVjdG9yLmNoYXJBdCgwKSA9PT0gJ0AnICYmIGNvbnRhaW5lclZpZXcudWkpIHtcbiAgICAgICAgICBjb250YWluZXIgPSBjb250YWluZXJWaWV3LnVpW3NlbGVjdG9yLnN1YnN0cig0KV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyVmlldy4kKHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGNvbnRhaW5lci5sZW5ndGggPD0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBNYXJpb25ldHRlLkVycm9yKHtcbiAgICAgICAgICAgIG5hbWU6ICdDaGlsZFZpZXdDb250YWluZXJNaXNzaW5nRXJyb3InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBzcGVjaWZpZWQgXCJjaGlsZFZpZXdDb250YWluZXJcIiB3YXMgbm90IGZvdW5kOiAnICsgY29udGFpbmVyVmlldy5jaGlsZFZpZXdDb250YWluZXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lclZpZXcuJGVsO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnRhaW5lclZpZXcuJGNoaWxkVmlld0NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHJlc2V0IHRoZSBgJGNoaWxkVmlld0NvbnRhaW5lcmAgb24gcmVuZGVyXG4gICAgcmVzZXRDaGlsZFZpZXdDb250YWluZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuJGNoaWxkVmlld0NvbnRhaW5lcikge1xuICAgICAgICB0aGlzLiRjaGlsZFZpZXdDb250YWluZXIgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIExheW91dCBWaWV3XG4gIC8vIC0tLS0tLS0tLS0tXG4gIFxuICAvLyBVc2VkIGZvciBtYW5hZ2luZyBhcHBsaWNhdGlvbiBsYXlvdXRWaWV3cywgbmVzdGVkIGxheW91dFZpZXdzIGFuZFxuICAvLyBtdWx0aXBsZSByZWdpb25zIHdpdGhpbiBhbiBhcHBsaWNhdGlvbiBvciBzdWItYXBwbGljYXRpb24uXG4gIC8vXG4gIC8vIEEgc3BlY2lhbGl6ZWQgdmlldyBjbGFzcyB0aGF0IHJlbmRlcnMgYW4gYXJlYSBvZiBIVE1MIGFuZCB0aGVuXG4gIC8vIGF0dGFjaGVzIGBSZWdpb25gIGluc3RhbmNlcyB0byB0aGUgc3BlY2lmaWVkIGByZWdpb25zYC5cbiAgLy8gVXNlZCBmb3IgY29tcG9zaXRlIHZpZXcgbWFuYWdlbWVudCBhbmQgc3ViLWFwcGxpY2F0aW9uIGFyZWFzLlxuICBNYXJpb25ldHRlLkxheW91dFZpZXcgPSBNYXJpb25ldHRlLkl0ZW1WaWV3LmV4dGVuZCh7XG4gICAgcmVnaW9uQ2xhc3M6IE1hcmlvbmV0dGUuUmVnaW9uLFxuICBcbiAgICBvcHRpb25zOiB7XG4gICAgICBkZXN0cm95SW1tZWRpYXRlOiBmYWxzZVxuICAgIH0sXG4gIFxuICAgIC8vIHVzZWQgYXMgdGhlIHByZWZpeCBmb3IgY2hpbGQgdmlldyBldmVudHNcbiAgICAvLyB0aGF0IGFyZSBmb3J3YXJkZWQgdGhyb3VnaCB0aGUgbGF5b3V0dmlld1xuICAgIGNoaWxkVmlld0V2ZW50UHJlZml4OiAnY2hpbGR2aWV3JyxcbiAgXG4gICAgLy8gRW5zdXJlIHRoZSByZWdpb25zIGFyZSBhdmFpbGFibGUgd2hlbiB0aGUgYGluaXRpYWxpemVgIG1ldGhvZFxuICAgIC8vIGlzIGNhbGxlZC5cbiAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIFxuICAgICAgdGhpcy5fZmlyc3RSZW5kZXIgPSB0cnVlO1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZVJlZ2lvbnMob3B0aW9ucyk7XG4gIFxuICAgICAgTWFyaW9uZXR0ZS5JdGVtVmlldy5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG4gIFxuICAgIC8vIExheW91dFZpZXcncyByZW5kZXIgd2lsbCB1c2UgdGhlIGV4aXN0aW5nIHJlZ2lvbiBvYmplY3RzIHRoZVxuICAgIC8vIGZpcnN0IHRpbWUgaXQgaXMgY2FsbGVkLiBTdWJzZXF1ZW50IGNhbGxzIHdpbGwgZGVzdHJveSB0aGVcbiAgICAvLyB2aWV3cyB0aGF0IHRoZSByZWdpb25zIGFyZSBzaG93aW5nIGFuZCB0aGVuIHJlc2V0IHRoZSBgZWxgXG4gICAgLy8gZm9yIHRoZSByZWdpb25zIHRvIHRoZSBuZXdseSByZW5kZXJlZCBET00gZWxlbWVudHMuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2Vuc3VyZVZpZXdJc0ludGFjdCgpO1xuICBcbiAgICAgIGlmICh0aGlzLl9maXJzdFJlbmRlcikge1xuICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBmaXJzdCByZW5kZXIsIGRvbid0IGRvIGFueXRoaW5nIHRvXG4gICAgICAgIC8vIHJlc2V0IHRoZSByZWdpb25zXG4gICAgICAgIHRoaXMuX2ZpcnN0UmVuZGVyID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgcmVuZGVyIGNhbGwsIHRoZW4gd2UgbmVlZCB0b1xuICAgICAgICAvLyByZS1pbml0aWFsaXplIHRoZSBgZWxgIGZvciBlYWNoIHJlZ2lvblxuICAgICAgICB0aGlzLl9yZUluaXRpYWxpemVSZWdpb25zKCk7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIE1hcmlvbmV0dGUuSXRlbVZpZXcucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIEhhbmRsZSBkZXN0cm95aW5nIHJlZ2lvbnMsIGFuZCB0aGVuIGRlc3Ryb3kgdGhlIHZpZXcgaXRzZWxmLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICAgIC8vICMyMTM0OiByZW1vdmUgcGFyZW50IGVsZW1lbnQgYmVmb3JlIGRlc3Ryb3lpbmcgdGhlIGNoaWxkIHZpZXdzLCBzb1xuICAgICAgLy8gcmVtb3ZpbmcgdGhlIGNoaWxkIHZpZXdzIGRvZXNuJ3QgcmV0cmlnZ2VyIHJlcGFpbnRzXG4gICAgICBpZiAodGhpcy5nZXRPcHRpb24oJ2Rlc3Ryb3lJbW1lZGlhdGUnKSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVnaW9uTWFuYWdlci5kZXN0cm95KCk7XG4gICAgICByZXR1cm4gTWFyaW9uZXR0ZS5JdGVtVmlldy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gIFxuICAgIHNob3dDaGlsZFZpZXc6IGZ1bmN0aW9uKHJlZ2lvbk5hbWUsIHZpZXcsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZWdpb24gPSB0aGlzLmdldFJlZ2lvbihyZWdpb25OYW1lKTtcbiAgICAgIHJldHVybiByZWdpb24uc2hvdy5hcHBseShyZWdpb24sIF8ucmVzdChhcmd1bWVudHMpKTtcbiAgICB9LFxuICBcbiAgICBnZXRDaGlsZFZpZXc6IGZ1bmN0aW9uKHJlZ2lvbk5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlZ2lvbihyZWdpb25OYW1lKS5jdXJyZW50VmlldztcbiAgICB9LFxuICBcbiAgICAvLyBBZGQgYSBzaW5nbGUgcmVnaW9uLCBieSBuYW1lLCB0byB0aGUgbGF5b3V0Vmlld1xuICAgIGFkZFJlZ2lvbjogZnVuY3Rpb24obmFtZSwgZGVmaW5pdGlvbikge1xuICAgICAgdmFyIHJlZ2lvbnMgPSB7fTtcbiAgICAgIHJlZ2lvbnNbbmFtZV0gPSBkZWZpbml0aW9uO1xuICAgICAgcmV0dXJuIHRoaXMuX2J1aWxkUmVnaW9ucyhyZWdpb25zKVtuYW1lXTtcbiAgICB9LFxuICBcbiAgICAvLyBBZGQgbXVsdGlwbGUgcmVnaW9ucyBhcyBhIHtuYW1lOiBkZWZpbml0aW9uLCBuYW1lMjogZGVmMn0gb2JqZWN0IGxpdGVyYWxcbiAgICBhZGRSZWdpb25zOiBmdW5jdGlvbihyZWdpb25zKSB7XG4gICAgICB0aGlzLnJlZ2lvbnMgPSBfLmV4dGVuZCh7fSwgdGhpcy5yZWdpb25zLCByZWdpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLl9idWlsZFJlZ2lvbnMocmVnaW9ucyk7XG4gICAgfSxcbiAgXG4gICAgLy8gUmVtb3ZlIGEgc2luZ2xlIHJlZ2lvbiBmcm9tIHRoZSBMYXlvdXRWaWV3LCBieSBuYW1lXG4gICAgcmVtb3ZlUmVnaW9uOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBkZWxldGUgdGhpcy5yZWdpb25zW25hbWVdO1xuICAgICAgcmV0dXJuIHRoaXMucmVnaW9uTWFuYWdlci5yZW1vdmVSZWdpb24obmFtZSk7XG4gICAgfSxcbiAgXG4gICAgLy8gUHJvdmlkZXMgYWx0ZXJuYXRpdmUgYWNjZXNzIHRvIHJlZ2lvbnNcbiAgICAvLyBBY2NlcHRzIHRoZSByZWdpb24gbmFtZVxuICAgIC8vIGdldFJlZ2lvbignbWFpbicpXG4gICAgZ2V0UmVnaW9uOiBmdW5jdGlvbihyZWdpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZ2lvbk1hbmFnZXIuZ2V0KHJlZ2lvbik7XG4gICAgfSxcbiAgXG4gICAgLy8gR2V0IGFsbCByZWdpb25zXG4gICAgZ2V0UmVnaW9uczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWdpb25NYW5hZ2VyLmdldFJlZ2lvbnMoKTtcbiAgICB9LFxuICBcbiAgICAvLyBpbnRlcm5hbCBtZXRob2QgdG8gYnVpbGQgcmVnaW9uc1xuICAgIF9idWlsZFJlZ2lvbnM6IGZ1bmN0aW9uKHJlZ2lvbnMpIHtcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgcmVnaW9uQ2xhc3M6IHRoaXMuZ2V0T3B0aW9uKCdyZWdpb25DbGFzcycpLFxuICAgICAgICBwYXJlbnRFbDogXy5wYXJ0aWFsKF8ucmVzdWx0LCB0aGlzLCAnZWwnKVxuICAgICAgfTtcbiAgXG4gICAgICByZXR1cm4gdGhpcy5yZWdpb25NYW5hZ2VyLmFkZFJlZ2lvbnMocmVnaW9ucywgZGVmYXVsdHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBpbml0aWFsaXplIHRoZSByZWdpb25zIHRoYXQgaGF2ZSBiZWVuIGRlZmluZWQgaW4gYVxuICAgIC8vIGByZWdpb25zYCBhdHRyaWJ1dGUgb24gdGhpcyBsYXlvdXRWaWV3LlxuICAgIF9pbml0aWFsaXplUmVnaW9uczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIHJlZ2lvbnM7XG4gICAgICB0aGlzLl9pbml0UmVnaW9uTWFuYWdlcigpO1xuICBcbiAgICAgIHJlZ2lvbnMgPSBNYXJpb25ldHRlLl9nZXRWYWx1ZSh0aGlzLnJlZ2lvbnMsIHRoaXMsIFtvcHRpb25zXSkgfHwge307XG4gIFxuICAgICAgLy8gRW5hYmxlIHVzZXJzIHRvIGRlZmluZSBgcmVnaW9uc2AgYXMgaW5zdGFuY2Ugb3B0aW9ucy5cbiAgICAgIHZhciByZWdpb25PcHRpb25zID0gdGhpcy5nZXRPcHRpb24uY2FsbChvcHRpb25zLCAncmVnaW9ucycpO1xuICBcbiAgICAgIC8vIGVuYWJsZSByZWdpb24gb3B0aW9ucyB0byBiZSBhIGZ1bmN0aW9uXG4gICAgICByZWdpb25PcHRpb25zID0gTWFyaW9uZXR0ZS5fZ2V0VmFsdWUocmVnaW9uT3B0aW9ucywgdGhpcywgW29wdGlvbnNdKTtcbiAgXG4gICAgICBfLmV4dGVuZChyZWdpb25zLCByZWdpb25PcHRpb25zKTtcbiAgXG4gICAgICAvLyBOb3JtYWxpemUgcmVnaW9uIHNlbGVjdG9ycyBoYXNoIHRvIGFsbG93XG4gICAgICAvLyBhIHVzZXIgdG8gdXNlIHRoZSBAdWkuIHN5bnRheC5cbiAgICAgIHJlZ2lvbnMgPSB0aGlzLm5vcm1hbGl6ZVVJVmFsdWVzKHJlZ2lvbnMsIFsnc2VsZWN0b3InLCAnZWwnXSk7XG4gIFxuICAgICAgdGhpcy5hZGRSZWdpb25zKHJlZ2lvbnMpO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byByZS1pbml0aWFsaXplIGFsbCBvZiB0aGUgcmVnaW9ucyBieSB1cGRhdGluZyB0aGUgYGVsYCB0aGF0XG4gICAgLy8gdGhleSBwb2ludCB0b1xuICAgIF9yZUluaXRpYWxpemVSZWdpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMucmVnaW9uTWFuYWdlci5pbnZva2UoJ3Jlc2V0Jyk7XG4gICAgfSxcbiAgXG4gICAgLy8gRW5hYmxlIGVhc3kgb3ZlcnJpZGluZyBvZiB0aGUgZGVmYXVsdCBgUmVnaW9uTWFuYWdlcmBcbiAgICAvLyBmb3IgY3VzdG9taXplZCByZWdpb24gaW50ZXJhY3Rpb25zIGFuZCBidXNpbmVzcyBzcGVjaWZpY1xuICAgIC8vIHZpZXcgbG9naWMgZm9yIGJldHRlciBjb250cm9sIG92ZXIgc2luZ2xlIHJlZ2lvbnMuXG4gICAgZ2V0UmVnaW9uTWFuYWdlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IE1hcmlvbmV0dGUuUmVnaW9uTWFuYWdlcigpO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBpbml0aWFsaXplIHRoZSByZWdpb24gbWFuYWdlclxuICAgIC8vIGFuZCBhbGwgcmVnaW9ucyBpbiBpdFxuICAgIF9pbml0UmVnaW9uTWFuYWdlcjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnJlZ2lvbk1hbmFnZXIgPSB0aGlzLmdldFJlZ2lvbk1hbmFnZXIoKTtcbiAgICAgIHRoaXMucmVnaW9uTWFuYWdlci5fcGFyZW50ID0gdGhpcztcbiAgXG4gICAgICB0aGlzLmxpc3RlblRvKHRoaXMucmVnaW9uTWFuYWdlciwgJ2JlZm9yZTphZGQ6cmVnaW9uJywgZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTphZGQ6cmVnaW9uJywgbmFtZSk7XG4gICAgICB9KTtcbiAgXG4gICAgICB0aGlzLmxpc3RlblRvKHRoaXMucmVnaW9uTWFuYWdlciwgJ2FkZDpyZWdpb24nLCBmdW5jdGlvbihuYW1lLCByZWdpb24pIHtcbiAgICAgICAgdGhpc1tuYW1lXSA9IHJlZ2lvbjtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdhZGQ6cmVnaW9uJywgbmFtZSwgcmVnaW9uKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5yZWdpb25NYW5hZ2VyLCAnYmVmb3JlOnJlbW92ZTpyZWdpb24nLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnJlbW92ZTpyZWdpb24nLCBuYW1lKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5yZWdpb25NYW5hZ2VyLCAncmVtb3ZlOnJlZ2lvbicsIGZ1bmN0aW9uKG5hbWUsIHJlZ2lvbikge1xuICAgICAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdyZW1vdmU6cmVnaW9uJywgbmFtZSwgcmVnaW9uKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIFxuICAgIF9nZXRJbW1lZGlhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXy5jaGFpbih0aGlzLnJlZ2lvbk1hbmFnZXIuZ2V0UmVnaW9ucygpKVxuICAgICAgICAucGx1Y2soJ2N1cnJlbnRWaWV3JylcbiAgICAgICAgLmNvbXBhY3QoKVxuICAgICAgICAudmFsdWUoKTtcbiAgICB9XG4gIH0pO1xuICBcblxuICAvLyBCZWhhdmlvclxuICAvLyAtLS0tLS0tLVxuICBcbiAgLy8gQSBCZWhhdmlvciBpcyBhbiBpc29sYXRlZCBzZXQgb2YgRE9NIC9cbiAgLy8gdXNlciBpbnRlcmFjdGlvbnMgdGhhdCBjYW4gYmUgbWl4ZWQgaW50byBhbnkgVmlldy5cbiAgLy8gQmVoYXZpb3JzIGFsbG93IHlvdSB0byBibGFja2JveCBWaWV3IHNwZWNpZmljIGludGVyYWN0aW9uc1xuICAvLyBpbnRvIHBvcnRhYmxlIGxvZ2ljYWwgY2h1bmtzLCBrZWVwaW5nIHlvdXIgdmlld3Mgc2ltcGxlIGFuZCB5b3VyIGNvZGUgRFJZLlxuICBcbiAgTWFyaW9uZXR0ZS5CZWhhdmlvciA9IE1hcmlvbmV0dGUuT2JqZWN0LmV4dGVuZCh7XG4gICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMsIHZpZXcpIHtcbiAgICAgIC8vIFNldHVwIHJlZmVyZW5jZSB0byB0aGUgdmlldy5cbiAgICAgIC8vIHRoaXMgY29tZXMgaW4gaGFuZGxlIHdoZW4gYSBiZWhhdmlvclxuICAgICAgLy8gd2FudHMgdG8gZGlyZWN0bHkgdGFsayB1cCB0aGUgY2hhaW5cbiAgICAgIC8vIHRvIHRoZSB2aWV3LlxuICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgIHRoaXMuZGVmYXVsdHMgPSBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSB8fCB7fTtcbiAgICAgIHRoaXMub3B0aW9ucyAgPSBfLmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAvLyBDb25zdHJ1Y3QgYW4gaW50ZXJuYWwgVUkgaGFzaCB1c2luZ1xuICAgICAgLy8gdGhlIHZpZXdzIFVJIGhhc2ggYW5kIHRoZW4gdGhlIGJlaGF2aW9ycyBVSSBoYXNoLlxuICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gdXNlIFVJIGhhc2ggZWxlbWVudHNcbiAgICAgIC8vIGRlZmluZWQgaW4gdGhlIHBhcmVudCB2aWV3IGFzIHdlbGwgYXMgdGhvc2VcbiAgICAgIC8vIGRlZmluZWQgaW4gdGhlIGdpdmVuIGJlaGF2aW9yLlxuICAgICAgdGhpcy51aSA9IF8uZXh0ZW5kKHt9LCBfLnJlc3VsdCh2aWV3LCAndWknKSwgXy5yZXN1bHQodGhpcywgJ3VpJykpO1xuICBcbiAgICAgIE1hcmlvbmV0dGUuT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgXG4gICAgLy8gcHJveHkgYmVoYXZpb3IgJCBtZXRob2QgdG8gdGhlIHZpZXdcbiAgICAvLyB0aGlzIGlzIHVzZWZ1bCBmb3IgZG9pbmcganF1ZXJ5IERPTSBsb29rdXBzXG4gICAgLy8gc2NvcGVkIHRvIGJlaGF2aW9ycyB2aWV3LlxuICAgICQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudmlldy4kLmFwcGx5KHRoaXMudmlldywgYXJndW1lbnRzKTtcbiAgICB9LFxuICBcbiAgICAvLyBTdG9wcyB0aGUgYmVoYXZpb3IgZnJvbSBsaXN0ZW5pbmcgdG8gZXZlbnRzLlxuICAgIC8vIE92ZXJyaWRlcyBPYmplY3QjZGVzdHJveSB0byBwcmV2ZW50IGFkZGl0aW9uYWwgZXZlbnRzIGZyb20gYmVpbmcgdHJpZ2dlcmVkLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgcHJveHlWaWV3UHJvcGVydGllczogZnVuY3Rpb24odmlldykge1xuICAgICAgdGhpcy4kZWwgPSB2aWV3LiRlbDtcbiAgICAgIHRoaXMuZWwgPSB2aWV3LmVsO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvKiBqc2hpbnQgbWF4bGVuOiAxNDMgKi9cbiAgLy8gQmVoYXZpb3JzXG4gIC8vIC0tLS0tLS0tLVxuICBcbiAgLy8gQmVoYXZpb3JzIGlzIGEgdXRpbGl0eSBjbGFzcyB0aGF0IHRha2VzIGNhcmUgb2ZcbiAgLy8gZ2x1aW5nIHlvdXIgYmVoYXZpb3IgaW5zdGFuY2VzIHRvIHRoZWlyIGdpdmVuIFZpZXcuXG4gIC8vIFRoZSBtb3N0IGltcG9ydGFudCBwYXJ0IG9mIHRoaXMgY2xhc3MgaXMgdGhhdCB5b3VcbiAgLy8gKipNVVNUKiogb3ZlcnJpZGUgdGhlIGNsYXNzIGxldmVsIGJlaGF2aW9yc0xvb2t1cFxuICAvLyBtZXRob2QgZm9yIHRoaW5ncyB0byB3b3JrIHByb3Blcmx5LlxuICBcbiAgTWFyaW9uZXR0ZS5CZWhhdmlvcnMgPSAoZnVuY3Rpb24oTWFyaW9uZXR0ZSwgXykge1xuICAgIC8vIEJvcnJvdyBldmVudCBzcGxpdHRlciBmcm9tIEJhY2tib25lXG4gICAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcbiAgXG4gICAgZnVuY3Rpb24gQmVoYXZpb3JzKHZpZXcsIGJlaGF2aW9ycykge1xuICBcbiAgICAgIGlmICghXy5pc09iamVjdCh2aWV3LmJlaGF2aW9ycykpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuICBcbiAgICAgIC8vIEJlaGF2aW9ycyBkZWZpbmVkIG9uIGEgdmlldyBjYW4gYmUgYSBmbGF0IG9iamVjdCBsaXRlcmFsXG4gICAgICAvLyBvciBpdCBjYW4gYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gb2JqZWN0LlxuICAgICAgYmVoYXZpb3JzID0gQmVoYXZpb3JzLnBhcnNlQmVoYXZpb3JzKHZpZXcsIGJlaGF2aW9ycyB8fCBfLnJlc3VsdCh2aWV3LCAnYmVoYXZpb3JzJykpO1xuICBcbiAgICAgIC8vIFdyYXBzIHNldmVyYWwgb2YgdGhlIHZpZXcncyBtZXRob2RzXG4gICAgICAvLyBjYWxsaW5nIHRoZSBtZXRob2RzIGZpcnN0IG9uIGVhY2ggYmVoYXZpb3JcbiAgICAgIC8vIGFuZCB0aGVuIGV2ZW50dWFsbHkgY2FsbGluZyB0aGUgbWV0aG9kIG9uIHRoZSB2aWV3LlxuICAgICAgQmVoYXZpb3JzLndyYXAodmlldywgYmVoYXZpb3JzLCBfLmtleXMobWV0aG9kcykpO1xuICAgICAgcmV0dXJuIGJlaGF2aW9ycztcbiAgICB9XG4gIFxuICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgYmVoYXZpb3JUcmlnZ2VyczogZnVuY3Rpb24oYmVoYXZpb3JUcmlnZ2VycywgYmVoYXZpb3JzKSB7XG4gICAgICAgIHZhciB0cmlnZ2VyQnVpbGRlciA9IG5ldyBCZWhhdmlvclRyaWdnZXJzQnVpbGRlcih0aGlzLCBiZWhhdmlvcnMpO1xuICAgICAgICByZXR1cm4gdHJpZ2dlckJ1aWxkZXIuYnVpbGRCZWhhdmlvclRyaWdnZXJzKCk7XG4gICAgICB9LFxuICBcbiAgICAgIGJlaGF2aW9yRXZlbnRzOiBmdW5jdGlvbihiZWhhdmlvckV2ZW50cywgYmVoYXZpb3JzKSB7XG4gICAgICAgIHZhciBfYmVoYXZpb3JzRXZlbnRzID0ge307XG4gIFxuICAgICAgICBfLmVhY2goYmVoYXZpb3JzLCBmdW5jdGlvbihiLCBpKSB7XG4gICAgICAgICAgdmFyIF9ldmVudHMgPSB7fTtcbiAgICAgICAgICB2YXIgYmVoYXZpb3JFdmVudHMgPSBfLmNsb25lKF8ucmVzdWx0KGIsICdldmVudHMnKSkgfHwge307XG4gIFxuICAgICAgICAgIC8vIE5vcm1hbGl6ZSBiZWhhdmlvciBldmVudHMgaGFzaCB0byBhbGxvd1xuICAgICAgICAgIC8vIGEgdXNlciB0byB1c2UgdGhlIEB1aS4gc3ludGF4LlxuICAgICAgICAgIGJlaGF2aW9yRXZlbnRzID0gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSUtleXMoYmVoYXZpb3JFdmVudHMsIGdldEJlaGF2aW9yc1VJKGIpKTtcbiAgXG4gICAgICAgICAgdmFyIGogPSAwO1xuICAgICAgICAgIF8uZWFjaChiZWhhdmlvckV2ZW50cywgZnVuY3Rpb24oYmVoYXZpb3VyLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCAgICAgPSBrZXkubWF0Y2goZGVsZWdhdGVFdmVudFNwbGl0dGVyKTtcbiAgXG4gICAgICAgICAgICAvLyBTZXQgZXZlbnQgbmFtZSB0byBiZSBuYW1lc3BhY2VkIHVzaW5nIHRoZSB2aWV3IGNpZCxcbiAgICAgICAgICAgIC8vIHRoZSBiZWhhdmlvciBpbmRleCwgYW5kIHRoZSBiZWhhdmlvciBldmVudCBpbmRleFxuICAgICAgICAgICAgLy8gdG8gZ2VuZXJhdGUgYSBub24gY29sbGlkaW5nIGV2ZW50IG5hbWVzcGFjZVxuICAgICAgICAgICAgLy8gaHR0cDovL2FwaS5qcXVlcnkuY29tL2V2ZW50Lm5hbWVzcGFjZS9cbiAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBtYXRjaFsxXSArICcuJyArIFt0aGlzLmNpZCwgaSwgaisrLCAnICddLmpvaW4oJycpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yICA9IG1hdGNoWzJdO1xuICBcbiAgICAgICAgICAgIHZhciBldmVudEtleSAgPSBldmVudE5hbWUgKyBzZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBoYW5kbGVyICAgPSBfLmlzRnVuY3Rpb24oYmVoYXZpb3VyKSA/IGJlaGF2aW91ciA6IGJbYmVoYXZpb3VyXTtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikgeyByZXR1cm47IH1cbiAgICAgICAgICAgIF9ldmVudHNbZXZlbnRLZXldID0gXy5iaW5kKGhhbmRsZXIsIGIpO1xuICAgICAgICAgIH0sIHRoaXMpO1xuICBcbiAgICAgICAgICBfYmVoYXZpb3JzRXZlbnRzID0gXy5leHRlbmQoX2JlaGF2aW9yc0V2ZW50cywgX2V2ZW50cyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICBcbiAgICAgICAgcmV0dXJuIF9iZWhhdmlvcnNFdmVudHM7XG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgXy5leHRlbmQoQmVoYXZpb3JzLCB7XG4gIFxuICAgICAgLy8gUGxhY2Vob2xkZXIgbWV0aG9kIHRvIGJlIGV4dGVuZGVkIGJ5IHRoZSB1c2VyLlxuICAgICAgLy8gVGhlIG1ldGhvZCBzaG91bGQgZGVmaW5lIHRoZSBvYmplY3QgdGhhdCBzdG9yZXMgdGhlIGJlaGF2aW9ycy5cbiAgICAgIC8vIGkuZS5cbiAgICAgIC8vXG4gICAgICAvLyBgYGBqc1xuICAgICAgLy8gTWFyaW9uZXR0ZS5CZWhhdmlvcnMuYmVoYXZpb3JzTG9va3VwOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vICAgcmV0dXJuIEFwcC5CZWhhdmlvcnNcbiAgICAgIC8vIH1cbiAgICAgIC8vIGBgYFxuICAgICAgYmVoYXZpb3JzTG9va3VwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1hcmlvbmV0dGUuRXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBkZWZpbmUgd2hlcmUgeW91ciBiZWhhdmlvcnMgYXJlIHN0b3JlZC4nLFxuICAgICAgICAgIHVybDogJ21hcmlvbmV0dGUuYmVoYXZpb3JzLmh0bWwjYmVoYXZpb3JzbG9va3VwJ1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gVGFrZXMgY2FyZSBvZiBnZXR0aW5nIHRoZSBiZWhhdmlvciBjbGFzc1xuICAgICAgLy8gZ2l2ZW4gb3B0aW9ucyBhbmQgYSBrZXkuXG4gICAgICAvLyBJZiBhIHVzZXIgcGFzc2VzIGluIG9wdGlvbnMuYmVoYXZpb3JDbGFzc1xuICAgICAgLy8gZGVmYXVsdCB0byB1c2luZyB0aGF0LiBPdGhlcndpc2UgZGVsZWdhdGVcbiAgICAgIC8vIHRoZSBsb29rdXAgdG8gdGhlIHVzZXJzIGBiZWhhdmlvcnNMb29rdXBgIGltcGxlbWVudGF0aW9uLlxuICAgICAgZ2V0QmVoYXZpb3JDbGFzczogZnVuY3Rpb24ob3B0aW9ucywga2V5KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmJlaGF2aW9yQ2xhc3MpIHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5iZWhhdmlvckNsYXNzO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBHZXQgYmVoYXZpb3IgY2xhc3MgY2FuIGJlIGVpdGhlciBhIGZsYXQgb2JqZWN0IG9yIGEgbWV0aG9kXG4gICAgICAgIHJldHVybiBNYXJpb25ldHRlLl9nZXRWYWx1ZShCZWhhdmlvcnMuYmVoYXZpb3JzTG9va3VwLCB0aGlzLCBbb3B0aW9ucywga2V5XSlba2V5XTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBiZWhhdmlvcnMgb2JqZWN0LCBmb3IgZWFjaCBiZWhhdmlvclxuICAgICAgLy8gaW5zdGFudGlhdGUgaXQgYW5kIGdldCBpdHMgZ3JvdXBlZCBiZWhhdmlvcnMuXG4gICAgICBwYXJzZUJlaGF2aW9yczogZnVuY3Rpb24odmlldywgYmVoYXZpb3JzKSB7XG4gICAgICAgIHJldHVybiBfLmNoYWluKGJlaGF2aW9ycykubWFwKGZ1bmN0aW9uKG9wdGlvbnMsIGtleSkge1xuICAgICAgICAgIHZhciBCZWhhdmlvckNsYXNzID0gQmVoYXZpb3JzLmdldEJlaGF2aW9yQ2xhc3Mob3B0aW9ucywga2V5KTtcbiAgXG4gICAgICAgICAgdmFyIGJlaGF2aW9yID0gbmV3IEJlaGF2aW9yQ2xhc3Mob3B0aW9ucywgdmlldyk7XG4gICAgICAgICAgdmFyIG5lc3RlZEJlaGF2aW9ycyA9IEJlaGF2aW9ycy5wYXJzZUJlaGF2aW9ycyh2aWV3LCBfLnJlc3VsdChiZWhhdmlvciwgJ2JlaGF2aW9ycycpKTtcbiAgXG4gICAgICAgICAgcmV0dXJuIFtiZWhhdmlvcl0uY29uY2F0KG5lc3RlZEJlaGF2aW9ycyk7XG4gICAgICAgIH0pLmZsYXR0ZW4oKS52YWx1ZSgpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBXcmFwIHZpZXcgaW50ZXJuYWwgbWV0aG9kcyBzbyB0aGF0IHRoZXkgZGVsZWdhdGUgdG8gYmVoYXZpb3JzLiBGb3IgZXhhbXBsZSxcbiAgICAgIC8vIGBvbkRlc3Ryb3lgIHNob3VsZCB0cmlnZ2VyIGRlc3Ryb3kgb24gYWxsIG9mIHRoZSBiZWhhdmlvcnMgYW5kIHRoZW4gZGVzdHJveSBpdHNlbGYuXG4gICAgICAvLyBpLmUuXG4gICAgICAvL1xuICAgICAgLy8gYHZpZXcuZGVsZWdhdGVFdmVudHMgPSBfLnBhcnRpYWwobWV0aG9kcy5kZWxlZ2F0ZUV2ZW50cywgdmlldy5kZWxlZ2F0ZUV2ZW50cywgYmVoYXZpb3JzKTtgXG4gICAgICB3cmFwOiBmdW5jdGlvbih2aWV3LCBiZWhhdmlvcnMsIG1ldGhvZE5hbWVzKSB7XG4gICAgICAgIF8uZWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgICAgIHZpZXdbbWV0aG9kTmFtZV0gPSBfLnBhcnRpYWwobWV0aG9kc1ttZXRob2ROYW1lXSwgdmlld1ttZXRob2ROYW1lXSwgYmVoYXZpb3JzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIC8vIENsYXNzIHRvIGJ1aWxkIGhhbmRsZXJzIGZvciBgdHJpZ2dlcnNgIG9uIGJlaGF2aW9yc1xuICAgIC8vIGZvciB2aWV3c1xuICAgIGZ1bmN0aW9uIEJlaGF2aW9yVHJpZ2dlcnNCdWlsZGVyKHZpZXcsIGJlaGF2aW9ycykge1xuICAgICAgdGhpcy5fdmlldyAgICAgID0gdmlldztcbiAgICAgIHRoaXMuX2JlaGF2aW9ycyA9IGJlaGF2aW9ycztcbiAgICAgIHRoaXMuX3RyaWdnZXJzICA9IHt9O1xuICAgIH1cbiAgXG4gICAgXy5leHRlbmQoQmVoYXZpb3JUcmlnZ2Vyc0J1aWxkZXIucHJvdG90eXBlLCB7XG4gICAgICAvLyBNYWluIG1ldGhvZCB0byBidWlsZCB0aGUgdHJpZ2dlcnMgaGFzaCB3aXRoIGV2ZW50IGtleXMgYW5kIGhhbmRsZXJzXG4gICAgICBidWlsZEJlaGF2aW9yVHJpZ2dlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBfLmVhY2godGhpcy5fYmVoYXZpb3JzLCB0aGlzLl9idWlsZFRyaWdnZXJIYW5kbGVyc0ZvckJlaGF2aW9yLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyaWdnZXJzO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gYnVpbGQgYWxsIHRyaWdnZXIgaGFuZGxlcnMgZm9yIGEgZ2l2ZW4gYmVoYXZpb3JcbiAgICAgIF9idWlsZFRyaWdnZXJIYW5kbGVyc0ZvckJlaGF2aW9yOiBmdW5jdGlvbihiZWhhdmlvciwgaSkge1xuICAgICAgICB2YXIgdHJpZ2dlcnNIYXNoID0gXy5jbG9uZShfLnJlc3VsdChiZWhhdmlvciwgJ3RyaWdnZXJzJykpIHx8IHt9O1xuICBcbiAgICAgICAgdHJpZ2dlcnNIYXNoID0gTWFyaW9uZXR0ZS5ub3JtYWxpemVVSUtleXModHJpZ2dlcnNIYXNoLCBnZXRCZWhhdmlvcnNVSShiZWhhdmlvcikpO1xuICBcbiAgICAgICAgXy5lYWNoKHRyaWdnZXJzSGFzaCwgXy5iaW5kKHRoaXMuX3NldEhhbmRsZXJGb3JCZWhhdmlvciwgdGhpcywgYmVoYXZpb3IsIGkpKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGNyZWF0ZSBhbmQgYXNzaWduIHRoZSB0cmlnZ2VyIGhhbmRsZXIgZm9yIGEgZ2l2ZW5cbiAgICAgIC8vIGJlaGF2aW9yXG4gICAgICBfc2V0SGFuZGxlckZvckJlaGF2aW9yOiBmdW5jdGlvbihiZWhhdmlvciwgaSwgZXZlbnROYW1lLCB0cmlnZ2VyKSB7XG4gICAgICAgIC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgYHRoaXMuX3RyaWdnZXJzYCBoYXNoXG4gICAgICAgIHZhciB0cmlnZ2VyS2V5ID0gdHJpZ2dlci5yZXBsYWNlKC9eXFxTKy8sIGZ1bmN0aW9uKHRyaWdnZXJOYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHRyaWdnZXJOYW1lICsgJy4nICsgJ2JlaGF2aW9ydHJpZ2dlcnMnICsgaTtcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICB0aGlzLl90cmlnZ2Vyc1t0cmlnZ2VyS2V5XSA9IHRoaXMuX3ZpZXcuX2J1aWxkVmlld1RyaWdnZXIoZXZlbnROYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgZnVuY3Rpb24gZ2V0QmVoYXZpb3JzVUkoYmVoYXZpb3IpIHtcbiAgICAgIHJldHVybiBiZWhhdmlvci5fdWlCaW5kaW5ncyB8fCBiZWhhdmlvci51aTtcbiAgICB9XG4gIFxuICAgIHJldHVybiBCZWhhdmlvcnM7XG4gIFxuICB9KShNYXJpb25ldHRlLCBfKTtcbiAgXG5cbiAgLy8gQXBwIFJvdXRlclxuICAvLyAtLS0tLS0tLS0tXG4gIFxuICAvLyBSZWR1Y2UgdGhlIGJvaWxlcnBsYXRlIGNvZGUgb2YgaGFuZGxpbmcgcm91dGUgZXZlbnRzXG4gIC8vIGFuZCB0aGVuIGNhbGxpbmcgYSBzaW5nbGUgbWV0aG9kIG9uIGFub3RoZXIgb2JqZWN0LlxuICAvLyBIYXZlIHlvdXIgcm91dGVycyBjb25maWd1cmVkIHRvIGNhbGwgdGhlIG1ldGhvZCBvblxuICAvLyB5b3VyIG9iamVjdCwgZGlyZWN0bHkuXG4gIC8vXG4gIC8vIENvbmZpZ3VyZSBhbiBBcHBSb3V0ZXIgd2l0aCBgYXBwUm91dGVzYC5cbiAgLy9cbiAgLy8gQXBwIHJvdXRlcnMgY2FuIG9ubHkgdGFrZSBvbmUgYGNvbnRyb2xsZXJgIG9iamVjdC5cbiAgLy8gSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3UgZGl2aWRlIHlvdXIgY29udHJvbGxlclxuICAvLyBvYmplY3RzIGluIHRvIHNtYWxsZXIgcGllY2VzIG9mIHJlbGF0ZWQgZnVuY3Rpb25hbGl0eVxuICAvLyBhbmQgaGF2ZSBtdWx0aXBsZSByb3V0ZXJzIC8gY29udHJvbGxlcnMsIGluc3RlYWQgb2ZcbiAgLy8ganVzdCBvbmUgZ2lhbnQgcm91dGVyIGFuZCBjb250cm9sbGVyLlxuICAvL1xuICAvLyBZb3UgY2FuIGFsc28gYWRkIHN0YW5kYXJkIHJvdXRlcyB0byBhbiBBcHBSb3V0ZXIuXG4gIFxuICBNYXJpb25ldHRlLkFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuICBcbiAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXG4gICAgICBCYWNrYm9uZS5Sb3V0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgXG4gICAgICB2YXIgYXBwUm91dGVzID0gdGhpcy5nZXRPcHRpb24oJ2FwcFJvdXRlcycpO1xuICAgICAgdmFyIGNvbnRyb2xsZXIgPSB0aGlzLl9nZXRDb250cm9sbGVyKCk7XG4gICAgICB0aGlzLnByb2Nlc3NBcHBSb3V0ZXMoY29udHJvbGxlciwgYXBwUm91dGVzKTtcbiAgICAgIHRoaXMub24oJ3JvdXRlJywgdGhpcy5fcHJvY2Vzc09uUm91dGUsIHRoaXMpO1xuICAgIH0sXG4gIFxuICAgIC8vIFNpbWlsYXIgdG8gcm91dGUgbWV0aG9kIG9uIGEgQmFja2JvbmUgUm91dGVyIGJ1dFxuICAgIC8vIG1ldGhvZCBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2xsZXJcbiAgICBhcHBSb3V0ZTogZnVuY3Rpb24ocm91dGUsIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBjb250cm9sbGVyID0gdGhpcy5fZ2V0Q29udHJvbGxlcigpO1xuICAgICAgdGhpcy5fYWRkQXBwUm91dGUoY29udHJvbGxlciwgcm91dGUsIG1ldGhvZE5hbWUpO1xuICAgIH0sXG4gIFxuICAgIC8vIHByb2Nlc3MgdGhlIHJvdXRlIGV2ZW50IGFuZCB0cmlnZ2VyIHRoZSBvblJvdXRlXG4gICAgLy8gbWV0aG9kIGNhbGwsIGlmIGl0IGV4aXN0c1xuICAgIF9wcm9jZXNzT25Sb3V0ZTogZnVuY3Rpb24ocm91dGVOYW1lLCByb3V0ZUFyZ3MpIHtcbiAgICAgIC8vIG1ha2Ugc3VyZSBhbiBvblJvdXRlIGJlZm9yZSB0cnlpbmcgdG8gY2FsbCBpdFxuICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLm9uUm91dGUpKSB7XG4gICAgICAgIC8vIGZpbmQgdGhlIHBhdGggdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IHJvdXRlXG4gICAgICAgIHZhciByb3V0ZVBhdGggPSBfLmludmVydCh0aGlzLmdldE9wdGlvbignYXBwUm91dGVzJykpW3JvdXRlTmFtZV07XG4gICAgICAgIHRoaXMub25Sb3V0ZShyb3V0ZU5hbWUsIHJvdXRlUGF0aCwgcm91dGVBcmdzKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gcHJvY2VzcyB0aGUgYGFwcFJvdXRlc2AgZm9yIHRoZVxuICAgIC8vIHJvdXRlciwgYW5kIHR1cm4gdGhlbSBpbiB0byByb3V0ZXMgdGhhdCB0cmlnZ2VyIHRoZVxuICAgIC8vIHNwZWNpZmllZCBtZXRob2Qgb24gdGhlIHNwZWNpZmllZCBgY29udHJvbGxlcmAuXG4gICAgcHJvY2Vzc0FwcFJvdXRlczogZnVuY3Rpb24oY29udHJvbGxlciwgYXBwUm91dGVzKSB7XG4gICAgICBpZiAoIWFwcFJvdXRlcykgeyByZXR1cm47IH1cbiAgXG4gICAgICB2YXIgcm91dGVOYW1lcyA9IF8ua2V5cyhhcHBSb3V0ZXMpLnJldmVyc2UoKTsgLy8gQmFja2JvbmUgcmVxdWlyZXMgcmV2ZXJ0ZWQgb3JkZXIgb2Ygcm91dGVzXG4gIFxuICAgICAgXy5lYWNoKHJvdXRlTmFtZXMsIGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgICAgIHRoaXMuX2FkZEFwcFJvdXRlKGNvbnRyb2xsZXIsIHJvdXRlLCBhcHBSb3V0ZXNbcm91dGVdKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gIFxuICAgIF9nZXRDb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbignY29udHJvbGxlcicpO1xuICAgIH0sXG4gIFxuICAgIF9hZGRBcHBSb3V0ZTogZnVuY3Rpb24oY29udHJvbGxlciwgcm91dGUsIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBtZXRob2QgPSBjb250cm9sbGVyW21ldGhvZE5hbWVdO1xuICBcbiAgICAgIGlmICghbWV0aG9kKSB7XG4gICAgICAgIHRocm93IG5ldyBNYXJpb25ldHRlLkVycm9yKCdNZXRob2QgXCInICsgbWV0aG9kTmFtZSArICdcIiB3YXMgbm90IGZvdW5kIG9uIHRoZSBjb250cm9sbGVyJyk7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5yb3V0ZShyb3V0ZSwgbWV0aG9kTmFtZSwgXy5iaW5kKG1ldGhvZCwgY29udHJvbGxlcikpO1xuICAgIH0sXG4gIFxuICAgIG1lcmdlT3B0aW9uczogTWFyaW9uZXR0ZS5tZXJnZU9wdGlvbnMsXG4gIFxuICAgIC8vIFByb3h5IGBnZXRPcHRpb25gIHRvIGVuYWJsZSBnZXR0aW5nIG9wdGlvbnMgZnJvbSB0aGlzIG9yIHRoaXMub3B0aW9ucyBieSBuYW1lLlxuICAgIGdldE9wdGlvbjogTWFyaW9uZXR0ZS5wcm94eUdldE9wdGlvbixcbiAgXG4gICAgdHJpZ2dlck1ldGhvZDogTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kLFxuICBcbiAgICBiaW5kRW50aXR5RXZlbnRzOiBNYXJpb25ldHRlLnByb3h5QmluZEVudGl0eUV2ZW50cyxcbiAgXG4gICAgdW5iaW5kRW50aXR5RXZlbnRzOiBNYXJpb25ldHRlLnByb3h5VW5iaW5kRW50aXR5RXZlbnRzXG4gIH0pO1xuICBcbiAgLy8gQXBwbGljYXRpb25cbiAgLy8gLS0tLS0tLS0tLS1cbiAgXG4gIC8vIENvbnRhaW4gYW5kIG1hbmFnZSB0aGUgY29tcG9zaXRlIGFwcGxpY2F0aW9uIGFzIGEgd2hvbGUuXG4gIC8vIFN0b3JlcyBhbmQgc3RhcnRzIHVwIGBSZWdpb25gIG9iamVjdHMsIGluY2x1ZGVzIGFuXG4gIC8vIGV2ZW50IGFnZ3JlZ2F0b3IgYXMgYGFwcC52ZW50YFxuICBNYXJpb25ldHRlLkFwcGxpY2F0aW9uID0gTWFyaW9uZXR0ZS5PYmplY3QuZXh0ZW5kKHtcbiAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZVJlZ2lvbnMob3B0aW9ucyk7XG4gICAgICB0aGlzLl9pbml0Q2FsbGJhY2tzID0gbmV3IE1hcmlvbmV0dGUuQ2FsbGJhY2tzKCk7XG4gICAgICB0aGlzLnN1Ym1vZHVsZXMgPSB7fTtcbiAgICAgIF8uZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5faW5pdENoYW5uZWwoKTtcbiAgICAgIE1hcmlvbmV0dGUuT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgXG4gICAgLy8gQ29tbWFuZCBleGVjdXRpb24sIGZhY2lsaXRhdGVkIGJ5IEJhY2tib25lLldyZXFyLkNvbW1hbmRzXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNvbW1hbmRzLmV4ZWN1dGUuYXBwbHkodGhpcy5jb21tYW5kcywgYXJndW1lbnRzKTtcbiAgICB9LFxuICBcbiAgICAvLyBSZXF1ZXN0L3Jlc3BvbnNlLCBmYWNpbGl0YXRlZCBieSBCYWNrYm9uZS5XcmVxci5SZXF1ZXN0UmVzcG9uc2VcbiAgICByZXF1ZXN0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXJlcy5yZXF1ZXN0LmFwcGx5KHRoaXMucmVxcmVzLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gIFxuICAgIC8vIEFkZCBhbiBpbml0aWFsaXplciB0aGF0IGlzIGVpdGhlciBydW4gYXQgd2hlbiB0aGUgYHN0YXJ0YFxuICAgIC8vIG1ldGhvZCBpcyBjYWxsZWQsIG9yIHJ1biBpbW1lZGlhdGVseSBpZiBhZGRlZCBhZnRlciBgc3RhcnRgXG4gICAgLy8gaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQuXG4gICAgYWRkSW5pdGlhbGl6ZXI6IGZ1bmN0aW9uKGluaXRpYWxpemVyKSB7XG4gICAgICB0aGlzLl9pbml0Q2FsbGJhY2tzLmFkZChpbml0aWFsaXplcik7XG4gICAgfSxcbiAgXG4gICAgLy8ga2ljayBvZmYgYWxsIG9mIHRoZSBhcHBsaWNhdGlvbidzIHByb2Nlc3Nlcy5cbiAgICAvLyBpbml0aWFsaXplcyBhbGwgb2YgdGhlIHJlZ2lvbnMgdGhhdCBoYXZlIGJlZW4gYWRkZWRcbiAgICAvLyB0byB0aGUgYXBwLCBhbmQgcnVucyBhbGwgb2YgdGhlIGluaXRpYWxpemVyIGZ1bmN0aW9uc1xuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpzdGFydCcsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5faW5pdENhbGxiYWNrcy5ydW4ob3B0aW9ucywgdGhpcyk7XG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3N0YXJ0Jywgb3B0aW9ucyk7XG4gICAgfSxcbiAgXG4gICAgLy8gQWRkIHJlZ2lvbnMgdG8geW91ciBhcHAuXG4gICAgLy8gQWNjZXB0cyBhIGhhc2ggb2YgbmFtZWQgc3RyaW5ncyBvciBSZWdpb24gb2JqZWN0c1xuICAgIC8vIGFkZFJlZ2lvbnMoe3NvbWV0aGluZzogXCIjc29tZVJlZ2lvblwifSlcbiAgICAvLyBhZGRSZWdpb25zKHtzb21ldGhpbmc6IFJlZ2lvbi5leHRlbmQoe2VsOiBcIiNzb21lUmVnaW9uXCJ9KSB9KTtcbiAgICBhZGRSZWdpb25zOiBmdW5jdGlvbihyZWdpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVnaW9uTWFuYWdlci5hZGRSZWdpb25zKHJlZ2lvbnMpO1xuICAgIH0sXG4gIFxuICAgIC8vIEVtcHR5IGFsbCByZWdpb25zIGluIHRoZSBhcHAsIHdpdGhvdXQgcmVtb3ZpbmcgdGhlbVxuICAgIGVtcHR5UmVnaW9uczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVnaW9uTWFuYWdlci5lbXB0eVJlZ2lvbnMoKTtcbiAgICB9LFxuICBcbiAgICAvLyBSZW1vdmVzIGEgcmVnaW9uIGZyb20geW91ciBhcHAsIGJ5IG5hbWVcbiAgICAvLyBBY2NlcHRzIHRoZSByZWdpb25zIG5hbWVcbiAgICAvLyByZW1vdmVSZWdpb24oJ215UmVnaW9uJylcbiAgICByZW1vdmVSZWdpb246IGZ1bmN0aW9uKHJlZ2lvbikge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lvbk1hbmFnZXIucmVtb3ZlUmVnaW9uKHJlZ2lvbik7XG4gICAgfSxcbiAgXG4gICAgLy8gUHJvdmlkZXMgYWx0ZXJuYXRpdmUgYWNjZXNzIHRvIHJlZ2lvbnNcbiAgICAvLyBBY2NlcHRzIHRoZSByZWdpb24gbmFtZVxuICAgIC8vIGdldFJlZ2lvbignbWFpbicpXG4gICAgZ2V0UmVnaW9uOiBmdW5jdGlvbihyZWdpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWdpb25NYW5hZ2VyLmdldChyZWdpb24pO1xuICAgIH0sXG4gIFxuICAgIC8vIEdldCBhbGwgdGhlIHJlZ2lvbnMgZnJvbSB0aGUgcmVnaW9uIG1hbmFnZXJcbiAgICBnZXRSZWdpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZWdpb25NYW5hZ2VyLmdldFJlZ2lvbnMoKTtcbiAgICB9LFxuICBcbiAgICAvLyBDcmVhdGUgYSBtb2R1bGUsIGF0dGFjaGVkIHRvIHRoZSBhcHBsaWNhdGlvblxuICAgIG1vZHVsZTogZnVuY3Rpb24obW9kdWxlTmFtZXMsIG1vZHVsZURlZmluaXRpb24pIHtcbiAgXG4gICAgICAvLyBPdmVyd3JpdGUgdGhlIG1vZHVsZSBjbGFzcyBpZiB0aGUgdXNlciBzcGVjaWZpZXMgb25lXG4gICAgICB2YXIgTW9kdWxlQ2xhc3MgPSBNYXJpb25ldHRlLk1vZHVsZS5nZXRDbGFzcyhtb2R1bGVEZWZpbml0aW9uKTtcbiAgXG4gICAgICB2YXIgYXJncyA9IF8udG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICBcbiAgICAgIC8vIHNlZSB0aGUgTWFyaW9uZXR0ZS5Nb2R1bGUgb2JqZWN0IGZvciBtb3JlIGluZm9ybWF0aW9uXG4gICAgICByZXR1cm4gTW9kdWxlQ2xhc3MuY3JlYXRlLmFwcGx5KE1vZHVsZUNsYXNzLCBhcmdzKTtcbiAgICB9LFxuICBcbiAgICAvLyBFbmFibGUgZWFzeSBvdmVycmlkaW5nIG9mIHRoZSBkZWZhdWx0IGBSZWdpb25NYW5hZ2VyYFxuICAgIC8vIGZvciBjdXN0b21pemVkIHJlZ2lvbiBpbnRlcmFjdGlvbnMgYW5kIGJ1c2luZXNzLXNwZWNpZmljXG4gICAgLy8gdmlldyBsb2dpYyBmb3IgYmV0dGVyIGNvbnRyb2wgb3ZlciBzaW5nbGUgcmVnaW9ucy5cbiAgICBnZXRSZWdpb25NYW5hZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgTWFyaW9uZXR0ZS5SZWdpb25NYW5hZ2VyKCk7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGluaXRpYWxpemUgdGhlIHJlZ2lvbnMgdGhhdCBoYXZlIGJlZW4gZGVmaW5lZCBpbiBhXG4gICAgLy8gYHJlZ2lvbnNgIGF0dHJpYnV0ZSBvbiB0aGUgYXBwbGljYXRpb24gaW5zdGFuY2VcbiAgICBfaW5pdGlhbGl6ZVJlZ2lvbnM6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciByZWdpb25zID0gXy5pc0Z1bmN0aW9uKHRoaXMucmVnaW9ucykgPyB0aGlzLnJlZ2lvbnMob3B0aW9ucykgOiB0aGlzLnJlZ2lvbnMgfHwge307XG4gIFxuICAgICAgdGhpcy5faW5pdFJlZ2lvbk1hbmFnZXIoKTtcbiAgXG4gICAgICAvLyBFbmFibGUgdXNlcnMgdG8gZGVmaW5lIGByZWdpb25zYCBpbiBpbnN0YW5jZSBvcHRpb25zLlxuICAgICAgdmFyIG9wdGlvblJlZ2lvbnMgPSBNYXJpb25ldHRlLmdldE9wdGlvbihvcHRpb25zLCAncmVnaW9ucycpO1xuICBcbiAgICAgIC8vIEVuYWJsZSByZWdpb24gb3B0aW9ucyB0byBiZSBhIGZ1bmN0aW9uXG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9wdGlvblJlZ2lvbnMpKSB7XG4gICAgICAgIG9wdGlvblJlZ2lvbnMgPSBvcHRpb25SZWdpb25zLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gT3ZlcndyaXRlIGN1cnJlbnQgcmVnaW9ucyB3aXRoIHRob3NlIHBhc3NlZCBpbiBvcHRpb25zXG4gICAgICBfLmV4dGVuZChyZWdpb25zLCBvcHRpb25SZWdpb25zKTtcbiAgXG4gICAgICB0aGlzLmFkZFJlZ2lvbnMocmVnaW9ucyk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldCB1cCB0aGUgcmVnaW9uIG1hbmFnZXJcbiAgICBfaW5pdFJlZ2lvbk1hbmFnZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fcmVnaW9uTWFuYWdlciA9IHRoaXMuZ2V0UmVnaW9uTWFuYWdlcigpO1xuICAgICAgdGhpcy5fcmVnaW9uTWFuYWdlci5fcGFyZW50ID0gdGhpcztcbiAgXG4gICAgICB0aGlzLmxpc3RlblRvKHRoaXMuX3JlZ2lvbk1hbmFnZXIsICdiZWZvcmU6YWRkOnJlZ2lvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBNYXJpb25ldHRlLl90cmlnZ2VyTWV0aG9kKHRoaXMsICdiZWZvcmU6YWRkOnJlZ2lvbicsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgXG4gICAgICB0aGlzLmxpc3RlblRvKHRoaXMuX3JlZ2lvbk1hbmFnZXIsICdhZGQ6cmVnaW9uJywgZnVuY3Rpb24obmFtZSwgcmVnaW9uKSB7XG4gICAgICAgIHRoaXNbbmFtZV0gPSByZWdpb247XG4gICAgICAgIE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QodGhpcywgJ2FkZDpyZWdpb24nLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gIFxuICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9yZWdpb25NYW5hZ2VyLCAnYmVmb3JlOnJlbW92ZTpyZWdpb24nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgTWFyaW9uZXR0ZS5fdHJpZ2dlck1ldGhvZCh0aGlzLCAnYmVmb3JlOnJlbW92ZTpyZWdpb24nLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gIFxuICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9yZWdpb25NYW5hZ2VyLCAncmVtb3ZlOnJlZ2lvbicsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gICAgICAgIE1hcmlvbmV0dGUuX3RyaWdnZXJNZXRob2QodGhpcywgJ3JlbW92ZTpyZWdpb24nLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldHVwIHRoZSBXcmVxci5yYWRpbyBjaGFubmVsXG4gICAgX2luaXRDaGFubmVsOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2hhbm5lbE5hbWUgPSBfLnJlc3VsdCh0aGlzLCAnY2hhbm5lbE5hbWUnKSB8fCAnZ2xvYmFsJztcbiAgICAgIHRoaXMuY2hhbm5lbCA9IF8ucmVzdWx0KHRoaXMsICdjaGFubmVsJykgfHwgQmFja2JvbmUuV3JlcXIucmFkaW8uY2hhbm5lbCh0aGlzLmNoYW5uZWxOYW1lKTtcbiAgICAgIHRoaXMudmVudCA9IF8ucmVzdWx0KHRoaXMsICd2ZW50JykgfHwgdGhpcy5jaGFubmVsLnZlbnQ7XG4gICAgICB0aGlzLmNvbW1hbmRzID0gXy5yZXN1bHQodGhpcywgJ2NvbW1hbmRzJykgfHwgdGhpcy5jaGFubmVsLmNvbW1hbmRzO1xuICAgICAgdGhpcy5yZXFyZXMgPSBfLnJlc3VsdCh0aGlzLCAncmVxcmVzJykgfHwgdGhpcy5jaGFubmVsLnJlcXJlcztcbiAgICB9XG4gIH0pO1xuICBcbiAgLyoganNoaW50IG1heHBhcmFtczogOSAqL1xuICBcbiAgLy8gTW9kdWxlXG4gIC8vIC0tLS0tLVxuICBcbiAgLy8gQSBzaW1wbGUgbW9kdWxlIHN5c3RlbSwgdXNlZCB0byBjcmVhdGUgcHJpdmFjeSBhbmQgZW5jYXBzdWxhdGlvbiBpblxuICAvLyBNYXJpb25ldHRlIGFwcGxpY2F0aW9uc1xuICBNYXJpb25ldHRlLk1vZHVsZSA9IGZ1bmN0aW9uKG1vZHVsZU5hbWUsIGFwcCwgb3B0aW9ucykge1xuICAgIHRoaXMubW9kdWxlTmFtZSA9IG1vZHVsZU5hbWU7XG4gICAgdGhpcy5vcHRpb25zID0gXy5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgLy8gQWxsb3cgZm9yIGEgdXNlciB0byBvdmVyaWRlIHRoZSBpbml0aWFsaXplXG4gICAgLy8gZm9yIGEgZ2l2ZW4gbW9kdWxlIGluc3RhbmNlLlxuICAgIHRoaXMuaW5pdGlhbGl6ZSA9IG9wdGlvbnMuaW5pdGlhbGl6ZSB8fCB0aGlzLmluaXRpYWxpemU7XG4gIFxuICAgIC8vIFNldCB1cCBhbiBpbnRlcm5hbCBzdG9yZSBmb3Igc3ViLW1vZHVsZXMuXG4gICAgdGhpcy5zdWJtb2R1bGVzID0ge307XG4gIFxuICAgIHRoaXMuX3NldHVwSW5pdGlhbGl6ZXJzQW5kRmluYWxpemVycygpO1xuICBcbiAgICAvLyBTZXQgYW4gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHRoZSBhcHBcbiAgICAvLyB3aXRoaW4gYSBtb2R1bGUuXG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gIFxuICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5pbml0aWFsaXplKSkge1xuICAgICAgdGhpcy5pbml0aWFsaXplKG1vZHVsZU5hbWUsIGFwcCwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG4gIH07XG4gIFxuICBNYXJpb25ldHRlLk1vZHVsZS5leHRlbmQgPSBNYXJpb25ldHRlLmV4dGVuZDtcbiAgXG4gIC8vIEV4dGVuZCB0aGUgTW9kdWxlIHByb3RvdHlwZSB3aXRoIGV2ZW50cyAvIGxpc3RlblRvLCBzbyB0aGF0IHRoZSBtb2R1bGVcbiAgLy8gY2FuIGJlIHVzZWQgYXMgYW4gZXZlbnQgYWdncmVnYXRvciBvciBwdWIvc3ViLlxuICBfLmV4dGVuZChNYXJpb25ldHRlLk1vZHVsZS5wcm90b3R5cGUsIEJhY2tib25lLkV2ZW50cywge1xuICBcbiAgICAvLyBCeSBkZWZhdWx0IG1vZHVsZXMgc3RhcnQgd2l0aCB0aGVpciBwYXJlbnRzLlxuICAgIHN0YXJ0V2l0aFBhcmVudDogdHJ1ZSxcbiAgXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMgd2hlbiBleHRlbmRpbmcgTWFyaW9uZXR0ZS5Nb2R1bGUuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fSxcbiAgXG4gICAgLy8gSW5pdGlhbGl6ZXIgZm9yIGEgc3BlY2lmaWMgbW9kdWxlLiBJbml0aWFsaXplcnMgYXJlIHJ1biB3aGVuIHRoZVxuICAgIC8vIG1vZHVsZSdzIGBzdGFydGAgbWV0aG9kIGlzIGNhbGxlZC5cbiAgICBhZGRJbml0aWFsaXplcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuX2luaXRpYWxpemVyQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gICAgfSxcbiAgXG4gICAgLy8gRmluYWxpemVycyBhcmUgcnVuIHdoZW4gYSBtb2R1bGUgaXMgc3RvcHBlZC4gVGhleSBhcmUgdXNlZCB0byB0ZWFyZG93blxuICAgIC8vIGFuZCBmaW5hbGl6ZSBhbnkgdmFyaWFibGVzLCByZWZlcmVuY2VzLCBldmVudHMgYW5kIG90aGVyIGNvZGUgdGhhdCB0aGVcbiAgICAvLyBtb2R1bGUgaGFkIHNldCB1cC5cbiAgICBhZGRGaW5hbGl6ZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9maW5hbGl6ZXJDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICB9LFxuICBcbiAgICAvLyBTdGFydCB0aGUgbW9kdWxlLCBhbmQgcnVuIGFsbCBvZiBpdHMgaW5pdGlhbGl6ZXJzXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIC8vIFByZXZlbnQgcmUtc3RhcnRpbmcgYSBtb2R1bGUgdGhhdCBpcyBhbHJlYWR5IHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSB7IHJldHVybjsgfVxuICBcbiAgICAgIC8vIHN0YXJ0IHRoZSBzdWItbW9kdWxlcyAoZGVwdGgtZmlyc3QgaGllcmFyY2h5KVxuICAgICAgXy5lYWNoKHRoaXMuc3VibW9kdWxlcywgZnVuY3Rpb24obW9kKSB7XG4gICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB3ZSBzaG91bGQgc3RhcnQgdGhlIHN1Yi1tb2R1bGUgd2l0aCB0aGlzIHBhcmVudFxuICAgICAgICBpZiAobW9kLnN0YXJ0V2l0aFBhcmVudCkge1xuICAgICAgICAgIG1vZC5zdGFydChvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIFxuICAgICAgLy8gcnVuIHRoZSBjYWxsYmFja3MgdG8gXCJzdGFydFwiIHRoZSBjdXJyZW50IG1vZHVsZVxuICAgICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdiZWZvcmU6c3RhcnQnLCBvcHRpb25zKTtcbiAgXG4gICAgICB0aGlzLl9pbml0aWFsaXplckNhbGxiYWNrcy5ydW4ob3B0aW9ucywgdGhpcyk7XG4gICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgXG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3N0YXJ0Jywgb3B0aW9ucyk7XG4gICAgfSxcbiAgXG4gICAgLy8gU3RvcCB0aGlzIG1vZHVsZSBieSBydW5uaW5nIGl0cyBmaW5hbGl6ZXJzIGFuZCB0aGVuIHN0b3AgYWxsIG9mXG4gICAgLy8gdGhlIHN1Yi1tb2R1bGVzIGZvciB0aGlzIG1vZHVsZVxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaWYgd2UgYXJlIG5vdCBpbml0aWFsaXplZCwgZG9uJ3QgYm90aGVyIGZpbmFsaXppbmdcbiAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkgeyByZXR1cm47IH1cbiAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgXG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpzdG9wJyk7XG4gIFxuICAgICAgLy8gc3RvcCB0aGUgc3ViLW1vZHVsZXM7IGRlcHRoLWZpcnN0LCB0byBtYWtlIHN1cmUgdGhlXG4gICAgICAvLyBzdWItbW9kdWxlcyBhcmUgc3RvcHBlZCAvIGZpbmFsaXplZCBiZWZvcmUgcGFyZW50c1xuICAgICAgXy5pbnZva2UodGhpcy5zdWJtb2R1bGVzLCAnc3RvcCcpO1xuICBcbiAgICAgIC8vIHJ1biB0aGUgZmluYWxpemVyc1xuICAgICAgdGhpcy5fZmluYWxpemVyQ2FsbGJhY2tzLnJ1bih1bmRlZmluZWQsIHRoaXMpO1xuICBcbiAgICAgIC8vIHJlc2V0IHRoZSBpbml0aWFsaXplcnMgYW5kIGZpbmFsaXplcnNcbiAgICAgIHRoaXMuX2luaXRpYWxpemVyQ2FsbGJhY2tzLnJlc2V0KCk7XG4gICAgICB0aGlzLl9maW5hbGl6ZXJDYWxsYmFja3MucmVzZXQoKTtcbiAgXG4gICAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3N0b3AnKTtcbiAgICB9LFxuICBcbiAgICAvLyBDb25maWd1cmUgdGhlIG1vZHVsZSB3aXRoIGEgZGVmaW5pdGlvbiBmdW5jdGlvbiBhbmQgYW55IGN1c3RvbSBhcmdzXG4gICAgLy8gdGhhdCBhcmUgdG8gYmUgcGFzc2VkIGluIHRvIHRoZSBkZWZpbml0aW9uIGZ1bmN0aW9uXG4gICAgYWRkRGVmaW5pdGlvbjogZnVuY3Rpb24obW9kdWxlRGVmaW5pdGlvbiwgY3VzdG9tQXJncykge1xuICAgICAgdGhpcy5fcnVuTW9kdWxlRGVmaW5pdGlvbihtb2R1bGVEZWZpbml0aW9uLCBjdXN0b21BcmdzKTtcbiAgICB9LFxuICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2Q6IHJ1biB0aGUgbW9kdWxlIGRlZmluaXRpb24gZnVuY3Rpb24gd2l0aCB0aGUgY29ycmVjdFxuICAgIC8vIGFyZ3VtZW50c1xuICAgIF9ydW5Nb2R1bGVEZWZpbml0aW9uOiBmdW5jdGlvbihkZWZpbml0aW9uLCBjdXN0b21BcmdzKSB7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBkZWZpbml0aW9uIHNob3J0IGNpcmN1dCB0aGUgbWV0aG9kLlxuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7IHJldHVybjsgfVxuICBcbiAgICAgIC8vIGJ1aWxkIHRoZSBjb3JyZWN0IGxpc3Qgb2YgYXJndW1lbnRzIGZvciB0aGUgbW9kdWxlIGRlZmluaXRpb25cbiAgICAgIHZhciBhcmdzID0gXy5mbGF0dGVuKFtcbiAgICAgICAgdGhpcyxcbiAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgIEJhY2tib25lLFxuICAgICAgICBNYXJpb25ldHRlLFxuICAgICAgICBCYWNrYm9uZS4kLCBfLFxuICAgICAgICBjdXN0b21BcmdzXG4gICAgICBdKTtcbiAgXG4gICAgICBkZWZpbml0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0sXG4gIFxuICAgIC8vIEludGVybmFsIG1ldGhvZDogc2V0IHVwIG5ldyBjb3BpZXMgb2YgaW5pdGlhbGl6ZXJzIGFuZCBmaW5hbGl6ZXJzLlxuICAgIC8vIENhbGxpbmcgdGhpcyBtZXRob2Qgd2lsbCB3aXBlIG91dCBhbGwgZXhpc3RpbmcgaW5pdGlhbGl6ZXJzIGFuZFxuICAgIC8vIGZpbmFsaXplcnMuXG4gICAgX3NldHVwSW5pdGlhbGl6ZXJzQW5kRmluYWxpemVyczogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9pbml0aWFsaXplckNhbGxiYWNrcyA9IG5ldyBNYXJpb25ldHRlLkNhbGxiYWNrcygpO1xuICAgICAgdGhpcy5fZmluYWxpemVyQ2FsbGJhY2tzID0gbmV3IE1hcmlvbmV0dGUuQ2FsbGJhY2tzKCk7XG4gICAgfSxcbiAgXG4gICAgLy8gaW1wb3J0IHRoZSBgdHJpZ2dlck1ldGhvZGAgdG8gdHJpZ2dlciBldmVudHMgd2l0aCBjb3JyZXNwb25kaW5nXG4gICAgLy8gbWV0aG9kcyBpZiB0aGUgbWV0aG9kIGV4aXN0c1xuICAgIHRyaWdnZXJNZXRob2Q6IE1hcmlvbmV0dGUudHJpZ2dlck1ldGhvZFxuICB9KTtcbiAgXG4gIC8vIENsYXNzIG1ldGhvZHMgdG8gY3JlYXRlIG1vZHVsZXNcbiAgXy5leHRlbmQoTWFyaW9uZXR0ZS5Nb2R1bGUsIHtcbiAgXG4gICAgLy8gQ3JlYXRlIGEgbW9kdWxlLCBoYW5naW5nIG9mZiB0aGUgYXBwIHBhcmFtZXRlciBhcyB0aGUgcGFyZW50IG9iamVjdC5cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKGFwcCwgbW9kdWxlTmFtZXMsIG1vZHVsZURlZmluaXRpb24pIHtcbiAgICAgIHZhciBtb2R1bGUgPSBhcHA7XG4gIFxuICAgICAgLy8gZ2V0IHRoZSBjdXN0b20gYXJncyBwYXNzZWQgaW4gYWZ0ZXIgdGhlIG1vZHVsZSBkZWZpbml0aW9uIGFuZFxuICAgICAgLy8gZ2V0IHJpZCBvZiB0aGUgbW9kdWxlIG5hbWUgYW5kIGRlZmluaXRpb24gZnVuY3Rpb25cbiAgICAgIHZhciBjdXN0b21BcmdzID0gXy5kcm9wKGFyZ3VtZW50cywgMyk7XG4gIFxuICAgICAgLy8gU3BsaXQgdGhlIG1vZHVsZSBuYW1lcyBhbmQgZ2V0IHRoZSBudW1iZXIgb2Ygc3VibW9kdWxlcy5cbiAgICAgIC8vIGkuZS4gYW4gZXhhbXBsZSBtb2R1bGUgbmFtZSBvZiBgRG9nZS5Xb3cuQW1hemVgIHdvdWxkXG4gICAgICAvLyB0aGVuIGhhdmUgdGhlIHBvdGVudGlhbCBmb3IgMyBtb2R1bGUgZGVmaW5pdGlvbnMuXG4gICAgICBtb2R1bGVOYW1lcyA9IG1vZHVsZU5hbWVzLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgbGVuZ3RoID0gbW9kdWxlTmFtZXMubGVuZ3RoO1xuICBcbiAgICAgIC8vIHN0b3JlIHRoZSBtb2R1bGUgZGVmaW5pdGlvbiBmb3IgdGhlIGxhc3QgbW9kdWxlIGluIHRoZSBjaGFpblxuICAgICAgdmFyIG1vZHVsZURlZmluaXRpb25zID0gW107XG4gICAgICBtb2R1bGVEZWZpbml0aW9uc1tsZW5ndGggLSAxXSA9IG1vZHVsZURlZmluaXRpb247XG4gIFxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgcGFydHMgb2YgdGhlIG1vZHVsZSBkZWZpbml0aW9uXG4gICAgICBfLmVhY2gobW9kdWxlTmFtZXMsIGZ1bmN0aW9uKG1vZHVsZU5hbWUsIGkpIHtcbiAgICAgICAgdmFyIHBhcmVudE1vZHVsZSA9IG1vZHVsZTtcbiAgICAgICAgbW9kdWxlID0gdGhpcy5fZ2V0TW9kdWxlKHBhcmVudE1vZHVsZSwgbW9kdWxlTmFtZSwgYXBwLCBtb2R1bGVEZWZpbml0aW9uKTtcbiAgICAgICAgdGhpcy5fYWRkTW9kdWxlRGVmaW5pdGlvbihwYXJlbnRNb2R1bGUsIG1vZHVsZSwgbW9kdWxlRGVmaW5pdGlvbnNbaV0sIGN1c3RvbUFyZ3MpO1xuICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgLy8gUmV0dXJuIHRoZSBsYXN0IG1vZHVsZSBpbiB0aGUgZGVmaW5pdGlvbiBjaGFpblxuICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgICB9LFxuICBcbiAgICBfZ2V0TW9kdWxlOiBmdW5jdGlvbihwYXJlbnRNb2R1bGUsIG1vZHVsZU5hbWUsIGFwcCwgZGVmLCBhcmdzKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBkZWYpO1xuICAgICAgdmFyIE1vZHVsZUNsYXNzID0gdGhpcy5nZXRDbGFzcyhkZWYpO1xuICBcbiAgICAgIC8vIEdldCBhbiBleGlzdGluZyBtb2R1bGUgb2YgdGhpcyBuYW1lIGlmIHdlIGhhdmUgb25lXG4gICAgICB2YXIgbW9kdWxlID0gcGFyZW50TW9kdWxlW21vZHVsZU5hbWVdO1xuICBcbiAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgaWYgd2UgZG9uJ3QgaGF2ZSBvbmVcbiAgICAgICAgbW9kdWxlID0gbmV3IE1vZHVsZUNsYXNzKG1vZHVsZU5hbWUsIGFwcCwgb3B0aW9ucyk7XG4gICAgICAgIHBhcmVudE1vZHVsZVttb2R1bGVOYW1lXSA9IG1vZHVsZTtcbiAgICAgICAgLy8gc3RvcmUgdGhlIG1vZHVsZSBvbiB0aGUgcGFyZW50XG4gICAgICAgIHBhcmVudE1vZHVsZS5zdWJtb2R1bGVzW21vZHVsZU5hbWVdID0gbW9kdWxlO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgfSxcbiAgXG4gICAgLy8gIyMgTW9kdWxlIENsYXNzZXNcbiAgICAvL1xuICAgIC8vIE1vZHVsZSBjbGFzc2VzIGNhbiBiZSB1c2VkIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZSBkZWZpbmUgcGF0dGVybi5cbiAgICAvLyBUaGUgZXh0ZW5kIGZ1bmN0aW9uIG9mIGEgTW9kdWxlIGlzIGlkZW50aWNhbCB0byB0aGUgZXh0ZW5kIGZ1bmN0aW9uc1xuICAgIC8vIG9uIG90aGVyIEJhY2tib25lIGFuZCBNYXJpb25ldHRlIGNsYXNzZXMuXG4gICAgLy8gVGhpcyBhbGxvd3MgbW9kdWxlIGxpZmVjeWxlIGV2ZW50cyBsaWtlIGBvblN0YXJ0YCBhbmQgYG9uU3RvcGAgdG8gYmUgY2FsbGVkIGRpcmVjdGx5LlxuICAgIGdldENsYXNzOiBmdW5jdGlvbihtb2R1bGVEZWZpbml0aW9uKSB7XG4gICAgICB2YXIgTW9kdWxlQ2xhc3MgPSBNYXJpb25ldHRlLk1vZHVsZTtcbiAgXG4gICAgICBpZiAoIW1vZHVsZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIE1vZHVsZUNsYXNzO1xuICAgICAgfVxuICBcbiAgICAgIC8vIElmIGFsbCBvZiB0aGUgbW9kdWxlJ3MgZnVuY3Rpb25hbGl0eSBpcyBkZWZpbmVkIGluc2lkZSBpdHMgY2xhc3MsXG4gICAgICAvLyB0aGVuIHRoZSBjbGFzcyBjYW4gYmUgcGFzc2VkIGluIGRpcmVjdGx5LiBgTXlBcHAubW9kdWxlKFwiRm9vXCIsIEZvb01vZHVsZSlgLlxuICAgICAgaWYgKG1vZHVsZURlZmluaXRpb24ucHJvdG90eXBlIGluc3RhbmNlb2YgTW9kdWxlQ2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb247XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb24ubW9kdWxlQ2xhc3MgfHwgTW9kdWxlQ2xhc3M7XG4gICAgfSxcbiAgXG4gICAgLy8gQWRkIHRoZSBtb2R1bGUgZGVmaW5pdGlvbiBhbmQgYWRkIGEgc3RhcnRXaXRoUGFyZW50IGluaXRpYWxpemVyIGZ1bmN0aW9uLlxuICAgIC8vIFRoaXMgaXMgY29tcGxpY2F0ZWQgYmVjYXVzZSBtb2R1bGUgZGVmaW5pdGlvbnMgYXJlIGhlYXZpbHkgb3ZlcmxvYWRlZFxuICAgIC8vIGFuZCBzdXBwb3J0IGFuIGFub255bW91cyBmdW5jdGlvbiwgbW9kdWxlIGNsYXNzLCBvciBvcHRpb25zIG9iamVjdFxuICAgIF9hZGRNb2R1bGVEZWZpbml0aW9uOiBmdW5jdGlvbihwYXJlbnRNb2R1bGUsIG1vZHVsZSwgZGVmLCBhcmdzKSB7XG4gICAgICB2YXIgZm4gPSB0aGlzLl9nZXREZWZpbmUoZGVmKTtcbiAgICAgIHZhciBzdGFydFdpdGhQYXJlbnQgPSB0aGlzLl9nZXRTdGFydFdpdGhQYXJlbnQoZGVmLCBtb2R1bGUpO1xuICBcbiAgICAgIGlmIChmbikge1xuICAgICAgICBtb2R1bGUuYWRkRGVmaW5pdGlvbihmbiwgYXJncyk7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5fYWRkU3RhcnRXaXRoUGFyZW50KHBhcmVudE1vZHVsZSwgbW9kdWxlLCBzdGFydFdpdGhQYXJlbnQpO1xuICAgIH0sXG4gIFxuICAgIF9nZXRTdGFydFdpdGhQYXJlbnQ6IGZ1bmN0aW9uKGRlZiwgbW9kdWxlKSB7XG4gICAgICB2YXIgc3dwO1xuICBcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oZGVmKSAmJiAoZGVmLnByb3RvdHlwZSBpbnN0YW5jZW9mIE1hcmlvbmV0dGUuTW9kdWxlKSkge1xuICAgICAgICBzd3AgPSBtb2R1bGUuY29uc3RydWN0b3IucHJvdG90eXBlLnN0YXJ0V2l0aFBhcmVudDtcbiAgICAgICAgcmV0dXJuIF8uaXNVbmRlZmluZWQoc3dwKSA/IHRydWUgOiBzd3A7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKF8uaXNPYmplY3QoZGVmKSkge1xuICAgICAgICBzd3AgPSBkZWYuc3RhcnRXaXRoUGFyZW50O1xuICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChzd3ApID8gdHJ1ZSA6IHN3cDtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICBcbiAgICBfZ2V0RGVmaW5lOiBmdW5jdGlvbihkZWYpIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oZGVmKSAmJiAhKGRlZi5wcm90b3R5cGUgaW5zdGFuY2VvZiBNYXJpb25ldHRlLk1vZHVsZSkpIHtcbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoXy5pc09iamVjdChkZWYpKSB7XG4gICAgICAgIHJldHVybiBkZWYuZGVmaW5lO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gIFxuICAgIF9hZGRTdGFydFdpdGhQYXJlbnQ6IGZ1bmN0aW9uKHBhcmVudE1vZHVsZSwgbW9kdWxlLCBzdGFydFdpdGhQYXJlbnQpIHtcbiAgICAgIG1vZHVsZS5zdGFydFdpdGhQYXJlbnQgPSBtb2R1bGUuc3RhcnRXaXRoUGFyZW50ICYmIHN0YXJ0V2l0aFBhcmVudDtcbiAgXG4gICAgICBpZiAoIW1vZHVsZS5zdGFydFdpdGhQYXJlbnQgfHwgISFtb2R1bGUuc3RhcnRXaXRoUGFyZW50SXNDb25maWd1cmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBtb2R1bGUuc3RhcnRXaXRoUGFyZW50SXNDb25maWd1cmVkID0gdHJ1ZTtcbiAgXG4gICAgICBwYXJlbnRNb2R1bGUuYWRkSW5pdGlhbGl6ZXIoZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBpZiAobW9kdWxlLnN0YXJ0V2l0aFBhcmVudCkge1xuICAgICAgICAgIG1vZHVsZS5zdGFydChvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgXG5cbiAgcmV0dXJuIE1hcmlvbmV0dGU7XG59KSk7XG4iLCIvLyBCYWNrYm9uZS5XcmVxciAoQmFja2JvbmUuTWFyaW9uZXR0ZSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHYxLjQuMFxuLy9cbi8vIENvcHlyaWdodCAoYykyMDE2IERlcmljayBCYWlsZXksIE11dGVkIFNvbHV0aW9ucywgTExDLlxuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcbi8vXG4vLyBodHRwOi8vZ2l0aHViLmNvbS9tYXJpb25ldHRlanMvYmFja2JvbmUud3JlcXJcblxuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWydiYWNrYm9uZScsICd1bmRlcnNjb3JlJ10sIGZ1bmN0aW9uKEJhY2tib25lLCBfKSB7XG4gICAgICByZXR1cm4gZmFjdG9yeShCYWNrYm9uZSwgXyk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIEJhY2tib25lID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbiAgICB2YXIgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKTtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoQmFja2JvbmUsIF8pO1xuICB9IGVsc2Uge1xuICAgIGZhY3Rvcnkocm9vdC5CYWNrYm9uZSwgcm9vdC5fKTtcbiAgfVxuXG59KHRoaXMsIGZ1bmN0aW9uKEJhY2tib25lLCBfKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmV2aW91c1dyZXFyID0gQmFja2JvbmUuV3JlcXI7XG5cbiAgdmFyIFdyZXFyID0gQmFja2JvbmUuV3JlcXIgPSB7fTtcblxuICBCYWNrYm9uZS5XcmVxci5WRVJTSU9OID0gJzEuNC4wJztcblxuICBCYWNrYm9uZS5XcmVxci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIEJhY2tib25lLldyZXFyID0gcHJldmlvdXNXcmVxcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBIYW5kbGVyc1xuICAvLyAtLS0tLS0tLVxuICAvLyBBIHJlZ2lzdHJ5IG9mIGZ1bmN0aW9ucyB0byBjYWxsLCBnaXZlbiBhIG5hbWVcbiAgXG4gIFdyZXFyLkhhbmRsZXJzID0gKGZ1bmN0aW9uKEJhY2tib25lLCBfKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBcbiAgICAvLyBDb25zdHJ1Y3RvclxuICAgIC8vIC0tLS0tLS0tLS0tXG4gIFxuICAgIHZhciBIYW5kbGVycyA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMuX3dyZXFySGFuZGxlcnMgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzLmluaXRpYWxpemUpKXtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIEhhbmRsZXJzLmV4dGVuZCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZDtcbiAgXG4gICAgLy8gSW5zdGFuY2UgTWVtYmVyc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgXy5leHRlbmQoSGFuZGxlcnMucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMsIHtcbiAgXG4gICAgICAvLyBBZGQgbXVsdGlwbGUgaGFuZGxlcnMgdXNpbmcgYW4gb2JqZWN0IGxpdGVyYWwgY29uZmlndXJhdGlvblxuICAgICAgc2V0SGFuZGxlcnM6IGZ1bmN0aW9uKGhhbmRsZXJzKXtcbiAgICAgICAgXy5lYWNoKGhhbmRsZXJzLCBfLmJpbmQoZnVuY3Rpb24oaGFuZGxlciwgbmFtZSl7XG4gICAgICAgICAgdmFyIGNvbnRleHQgPSBudWxsO1xuICBcbiAgICAgICAgICBpZiAoXy5pc09iamVjdChoYW5kbGVyKSAmJiAhXy5pc0Z1bmN0aW9uKGhhbmRsZXIpKXtcbiAgICAgICAgICAgIGNvbnRleHQgPSBoYW5kbGVyLmNvbnRleHQ7XG4gICAgICAgICAgICBoYW5kbGVyID0gaGFuZGxlci5jYWxsYmFjaztcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIHRoaXMuc2V0SGFuZGxlcihuYW1lLCBoYW5kbGVyLCBjb250ZXh0KTtcbiAgICAgICAgfSwgdGhpcykpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBBZGQgYSBoYW5kbGVyIGZvciB0aGUgZ2l2ZW4gbmFtZSwgd2l0aCBhblxuICAgICAgLy8gb3B0aW9uYWwgY29udGV4dCB0byBydW4gdGhlIGhhbmRsZXIgd2l0aGluXG4gICAgICBzZXRIYW5kbGVyOiBmdW5jdGlvbihuYW1lLCBoYW5kbGVyLCBjb250ZXh0KXtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICBjYWxsYmFjazogaGFuZGxlcixcbiAgICAgICAgICBjb250ZXh0OiBjb250ZXh0XG4gICAgICAgIH07XG4gIFxuICAgICAgICB0aGlzLl93cmVxckhhbmRsZXJzW25hbWVdID0gY29uZmlnO1xuICBcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiaGFuZGxlcjphZGRcIiwgbmFtZSwgaGFuZGxlciwgY29udGV4dCk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIG9yIG5vdCBhIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZFxuICAgICAgaGFzSGFuZGxlcjogZnVuY3Rpb24obmFtZSl7XG4gICAgICAgIHJldHVybiAhISB0aGlzLl93cmVxckhhbmRsZXJzW25hbWVdO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBHZXQgdGhlIGN1cnJlbnRseSByZWdpc3RlcmVkIGhhbmRsZXIgZm9yXG4gICAgICAvLyB0aGUgc3BlY2lmaWVkIG5hbWUuIFRocm93cyBhbiBleGNlcHRpb24gaWZcbiAgICAgIC8vIG5vIGhhbmRsZXIgaXMgZm91bmQuXG4gICAgICBnZXRIYW5kbGVyOiBmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuX3dyZXFySGFuZGxlcnNbbmFtZV07XG4gIFxuICAgICAgICBpZiAoIWNvbmZpZyl7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gIFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4gY29uZmlnLmNhbGxiYWNrLmFwcGx5KGNvbmZpZy5jb250ZXh0LCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBSZW1vdmUgYSBoYW5kbGVyIGZvciB0aGUgc3BlY2lmaWVkIG5hbWVcbiAgICAgIHJlbW92ZUhhbmRsZXI6IGZ1bmN0aW9uKG5hbWUpe1xuICAgICAgICBkZWxldGUgdGhpcy5fd3JlcXJIYW5kbGVyc1tuYW1lXTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gUmVtb3ZlIGFsbCBoYW5kbGVycyBmcm9tIHRoaXMgcmVnaXN0cnlcbiAgICAgIHJlbW92ZUFsbEhhbmRsZXJzOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLl93cmVxckhhbmRsZXJzID0ge307XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIHJldHVybiBIYW5kbGVycztcbiAgfSkoQmFja2JvbmUsIF8pO1xuICBcbiAgLy8gV3JlcXIuQ29tbWFuZFN0b3JhZ2VcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gU3RvcmUgYW5kIHJldHJpZXZlIGNvbW1hbmRzIGZvciBleGVjdXRpb24uXG4gIFdyZXFyLkNvbW1hbmRTdG9yYWdlID0gKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gIFxuICAgIC8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgdmFyIENvbW1hbmRTdG9yYWdlID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdGhpcy5fY29tbWFuZHMgPSB7fTtcbiAgXG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMuaW5pdGlhbGl6ZSkpe1xuICAgICAgICB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgLy8gSW5zdGFuY2UgbWV0aG9kc1xuICAgIF8uZXh0ZW5kKENvbW1hbmRTdG9yYWdlLnByb3RvdHlwZSwgQmFja2JvbmUuRXZlbnRzLCB7XG4gIFxuICAgICAgLy8gR2V0IGFuIG9iamVjdCBsaXRlcmFsIGJ5IGNvbW1hbmQgbmFtZSwgdGhhdCBjb250YWluc1xuICAgICAgLy8gdGhlIGBjb21tYW5kTmFtZWAgYW5kIHRoZSBgaW5zdGFuY2VzYCBvZiBhbGwgY29tbWFuZHNcbiAgICAgIC8vIHJlcHJlc2VudGVkIGFzIGFuIGFycmF5IG9mIGFyZ3VtZW50cyB0byBwcm9jZXNzXG4gICAgICBnZXRDb21tYW5kczogZnVuY3Rpb24oY29tbWFuZE5hbWUpe1xuICAgICAgICB2YXIgY29tbWFuZHMgPSB0aGlzLl9jb21tYW5kc1tjb21tYW5kTmFtZV07XG4gIFxuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGl0LCBzbyBhZGQgaXRcbiAgICAgICAgaWYgKCFjb21tYW5kcyl7XG4gIFxuICAgICAgICAgIC8vIGJ1aWxkIHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgY29tbWFuZHMgPSB7XG4gICAgICAgICAgICBjb21tYW5kOiBjb21tYW5kTmFtZSwgXG4gICAgICAgICAgICBpbnN0YW5jZXM6IFtdXG4gICAgICAgICAgfTtcbiAgXG4gICAgICAgICAgLy8gc3RvcmUgaXRcbiAgICAgICAgICB0aGlzLl9jb21tYW5kc1tjb21tYW5kTmFtZV0gPSBjb21tYW5kcztcbiAgICAgICAgfVxuICBcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBBZGQgYSBjb21tYW5kIGJ5IG5hbWUsIHRvIHRoZSBzdG9yYWdlIGFuZCBzdG9yZSB0aGVcbiAgICAgIC8vIGFyZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICBhZGRDb21tYW5kOiBmdW5jdGlvbihjb21tYW5kTmFtZSwgYXJncyl7XG4gICAgICAgIHZhciBjb21tYW5kID0gdGhpcy5nZXRDb21tYW5kcyhjb21tYW5kTmFtZSk7XG4gICAgICAgIGNvbW1hbmQuaW5zdGFuY2VzLnB1c2goYXJncyk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIENsZWFyIGFsbCBjb21tYW5kcyBmb3IgdGhlIGdpdmVuIGBjb21tYW5kTmFtZWBcbiAgICAgIGNsZWFyQ29tbWFuZHM6IGZ1bmN0aW9uKGNvbW1hbmROYW1lKXtcbiAgICAgICAgdmFyIGNvbW1hbmQgPSB0aGlzLmdldENvbW1hbmRzKGNvbW1hbmROYW1lKTtcbiAgICAgICAgY29tbWFuZC5pbnN0YW5jZXMgPSBbXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgcmV0dXJuIENvbW1hbmRTdG9yYWdlO1xuICB9KSgpO1xuICBcbiAgLy8gV3JlcXIuQ29tbWFuZHNcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gQSBzaW1wbGUgY29tbWFuZCBwYXR0ZXJuIGltcGxlbWVudGF0aW9uLiBSZWdpc3RlciBhIGNvbW1hbmRcbiAgLy8gaGFuZGxlciBhbmQgZXhlY3V0ZSBpdC5cbiAgV3JlcXIuQ29tbWFuZHMgPSAoZnVuY3Rpb24oV3JlcXIsIF8pe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICBcbiAgICByZXR1cm4gV3JlcXIuSGFuZGxlcnMuZXh0ZW5kKHtcbiAgICAgIC8vIGRlZmF1bHQgc3RvcmFnZSB0eXBlXG4gICAgICBzdG9yYWdlVHlwZTogV3JlcXIuQ29tbWFuZFN0b3JhZ2UsXG4gIFxuICAgICAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVN0b3JhZ2UodGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5vbihcImhhbmRsZXI6YWRkXCIsIHRoaXMuX2V4ZWN1dGVDb21tYW5kcywgdGhpcyk7XG4gIFxuICAgICAgICBXcmVxci5IYW5kbGVycy5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gRXhlY3V0ZSBhIG5hbWVkIGNvbW1hbmQgd2l0aCB0aGUgc3VwcGxpZWQgYXJnc1xuICAgICAgZXhlY3V0ZTogZnVuY3Rpb24obmFtZSl7XG4gICAgICAgIG5hbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIHZhciBhcmdzID0gXy5yZXN0KGFyZ3VtZW50cyk7XG4gIFxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVyKG5hbWUpKXtcbiAgICAgICAgICB0aGlzLmdldEhhbmRsZXIobmFtZSkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdG9yYWdlLmFkZENvbW1hbmQobmFtZSwgYXJncyk7XG4gICAgICAgIH1cbiAgXG4gICAgICB9LFxuICBcbiAgICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBoYW5kbGUgYnVsayBleGVjdXRpb24gb2Ygc3RvcmVkIGNvbW1hbmRzXG4gICAgICBfZXhlY3V0ZUNvbW1hbmRzOiBmdW5jdGlvbihuYW1lLCBoYW5kbGVyLCBjb250ZXh0KXtcbiAgICAgICAgdmFyIGNvbW1hbmQgPSB0aGlzLnN0b3JhZ2UuZ2V0Q29tbWFuZHMobmFtZSk7XG4gIFxuICAgICAgICAvLyBsb29wIHRocm91Z2ggYW5kIGV4ZWN1dGUgYWxsIHRoZSBzdG9yZWQgY29tbWFuZCBpbnN0YW5jZXNcbiAgICAgICAgXy5lYWNoKGNvbW1hbmQuaW5zdGFuY2VzLCBmdW5jdGlvbihhcmdzKXtcbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhckNvbW1hbmRzKG5hbWUpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gaW5pdGlhbGl6ZSBzdG9yYWdlIGVpdGhlciBmcm9tIHRoZSB0eXBlJ3NcbiAgICAgIC8vIGBzdG9yYWdlVHlwZWAgb3IgdGhlIGluc3RhbmNlIGBvcHRpb25zLnN0b3JhZ2VUeXBlYC5cbiAgICAgIF9pbml0aWFsaXplU3RvcmFnZTogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICAgIHZhciBzdG9yYWdlO1xuICBcbiAgICAgICAgdmFyIFN0b3JhZ2VUeXBlID0gb3B0aW9ucy5zdG9yYWdlVHlwZSB8fCB0aGlzLnN0b3JhZ2VUeXBlO1xuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKFN0b3JhZ2VUeXBlKSl7XG4gICAgICAgICAgc3RvcmFnZSA9IG5ldyBTdG9yYWdlVHlwZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0b3JhZ2UgPSBTdG9yYWdlVHlwZTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gIH0pKFdyZXFyLCBfKTtcbiAgXG4gIC8vIFdyZXFyLlJlcXVlc3RSZXNwb25zZVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gQSBzaW1wbGUgcmVxdWVzdC9yZXNwb25zZSBpbXBsZW1lbnRhdGlvbi4gUmVnaXN0ZXIgYVxuICAvLyByZXF1ZXN0IGhhbmRsZXIsIGFuZCByZXR1cm4gYSByZXNwb25zZSBmcm9tIGl0XG4gIFdyZXFyLlJlcXVlc3RSZXNwb25zZSA9IChmdW5jdGlvbihXcmVxciwgXyl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gIFxuICAgIHJldHVybiBXcmVxci5IYW5kbGVycy5leHRlbmQoe1xuICAgICAgcmVxdWVzdDogZnVuY3Rpb24obmFtZSl7XG4gICAgICAgIGlmICh0aGlzLmhhc0hhbmRsZXIobmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIYW5kbGVyKG5hbWUpLmFwcGx5KHRoaXMsIF8ucmVzdChhcmd1bWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBcbiAgfSkoV3JlcXIsIF8pO1xuICBcbiAgLy8gRXZlbnQgQWdncmVnYXRvclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEEgcHViLXN1YiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBkZWNvdXBsZSB2YXJpb3VzIHBhcnRzXG4gIC8vIG9mIGFuIGFwcGxpY2F0aW9uIHRocm91Z2ggZXZlbnQtZHJpdmVuIGFyY2hpdGVjdHVyZS5cbiAgXG4gIFdyZXFyLkV2ZW50QWdncmVnYXRvciA9IChmdW5jdGlvbihCYWNrYm9uZSwgXyl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEVBID0gZnVuY3Rpb24oKXt9O1xuICBcbiAgICAvLyBDb3B5IHRoZSBgZXh0ZW5kYCBmdW5jdGlvbiB1c2VkIGJ5IEJhY2tib25lJ3MgY2xhc3Nlc1xuICAgIEVBLmV4dGVuZCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZDtcbiAgXG4gICAgLy8gQ29weSB0aGUgYmFzaWMgQmFja2JvbmUuRXZlbnRzIG9uIHRvIHRoZSBldmVudCBhZ2dyZWdhdG9yXG4gICAgXy5leHRlbmQoRUEucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMpO1xuICBcbiAgICByZXR1cm4gRUE7XG4gIH0pKEJhY2tib25lLCBfKTtcbiAgXG4gIC8vIFdyZXFyLkNoYW5uZWxcbiAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gQW4gb2JqZWN0IHRoYXQgd3JhcHMgdGhlIHRocmVlIG1lc3NhZ2luZyBzeXN0ZW1zOlxuICAvLyBFdmVudEFnZ3JlZ2F0b3IsIFJlcXVlc3RSZXNwb25zZSwgQ29tbWFuZHNcbiAgV3JlcXIuQ2hhbm5lbCA9IChmdW5jdGlvbihXcmVxcil7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gIFxuICAgIHZhciBDaGFubmVsID0gZnVuY3Rpb24oY2hhbm5lbE5hbWUpIHtcbiAgICAgIHRoaXMudmVudCAgICAgICAgPSBuZXcgQmFja2JvbmUuV3JlcXIuRXZlbnRBZ2dyZWdhdG9yKCk7XG4gICAgICB0aGlzLnJlcXJlcyAgICAgID0gbmV3IEJhY2tib25lLldyZXFyLlJlcXVlc3RSZXNwb25zZSgpO1xuICAgICAgdGhpcy5jb21tYW5kcyAgICA9IG5ldyBCYWNrYm9uZS5XcmVxci5Db21tYW5kcygpO1xuICAgICAgdGhpcy5jaGFubmVsTmFtZSA9IGNoYW5uZWxOYW1lO1xuICAgIH07XG4gIFxuICAgIF8uZXh0ZW5kKENoYW5uZWwucHJvdG90eXBlLCB7XG4gIFxuICAgICAgLy8gUmVtb3ZlIGFsbCBoYW5kbGVycyBmcm9tIHRoZSBtZXNzYWdpbmcgc3lzdGVtcyBvZiB0aGlzIGNoYW5uZWxcbiAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy52ZW50Lm9mZigpO1xuICAgICAgICB0aGlzLnZlbnQuc3RvcExpc3RlbmluZygpO1xuICAgICAgICB0aGlzLnJlcXJlcy5yZW1vdmVBbGxIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmNvbW1hbmRzLnJlbW92ZUFsbEhhbmRsZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBDb25uZWN0IGEgaGFzaCBvZiBldmVudHM7IG9uZSBmb3IgZWFjaCBtZXNzYWdpbmcgc3lzdGVtXG4gICAgICBjb25uZWN0RXZlbnRzOiBmdW5jdGlvbihoYXNoLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3QoJ3ZlbnQnLCBoYXNoLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICBcbiAgICAgIGNvbm5lY3RDb21tYW5kczogZnVuY3Rpb24oaGFzaCwgY29udGV4dCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0KCdjb21tYW5kcycsIGhhc2gsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gIFxuICAgICAgY29ubmVjdFJlcXVlc3RzOiBmdW5jdGlvbihoYXNoLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3QoJ3JlcXJlcycsIGhhc2gsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gQXR0YWNoIHRoZSBoYW5kbGVycyB0byBhIGdpdmVuIG1lc3NhZ2Ugc3lzdGVtIGB0eXBlYFxuICAgICAgX2Nvbm5lY3Q6IGZ1bmN0aW9uKHR5cGUsIGhhc2gsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCFoYXNoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gIFxuICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCB0aGlzO1xuICAgICAgICB2YXIgbWV0aG9kID0gKHR5cGUgPT09ICd2ZW50JykgPyAnb24nIDogJ3NldEhhbmRsZXInO1xuICBcbiAgICAgICAgXy5lYWNoKGhhc2gsIF8uYmluZChmdW5jdGlvbihmbiwgZXZlbnROYW1lKSB7XG4gICAgICAgICAgdGhpc1t0eXBlXVttZXRob2RdKGV2ZW50TmFtZSwgXy5iaW5kKGZuLCBjb250ZXh0KSk7XG4gICAgICAgIH0sIHRoaXMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gIFxuICAgIHJldHVybiBDaGFubmVsO1xuICB9KShXcmVxcik7XG4gIFxuICAvLyBXcmVxci5SYWRpb1xuICAvLyAtLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBBbiBvYmplY3QgdGhhdCBsZXRzIHlvdSBjb21tdW5pY2F0ZSB3aXRoIG1hbnkgY2hhbm5lbHMuXG4gIFdyZXFyLnJhZGlvID0gKGZ1bmN0aW9uKFdyZXFyLCBfKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgXG4gICAgdmFyIFJhZGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9jaGFubmVscyA9IHt9O1xuICAgICAgdGhpcy52ZW50ID0ge307XG4gICAgICB0aGlzLmNvbW1hbmRzID0ge307XG4gICAgICB0aGlzLnJlcXJlcyA9IHt9O1xuICAgICAgdGhpcy5fcHJveHlNZXRob2RzKCk7XG4gICAgfTtcbiAgXG4gICAgXy5leHRlbmQoUmFkaW8ucHJvdG90eXBlLCB7XG4gIFxuICAgICAgY2hhbm5lbDogZnVuY3Rpb24oY2hhbm5lbE5hbWUpIHtcbiAgICAgICAgaWYgKCFjaGFubmVsTmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbm5lbCBtdXN0IHJlY2VpdmUgYSBuYW1lJyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDaGFubmVsKCBjaGFubmVsTmFtZSApO1xuICAgICAgfSxcbiAgXG4gICAgICBfZ2V0Q2hhbm5lbDogZnVuY3Rpb24oY2hhbm5lbE5hbWUpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSB0aGlzLl9jaGFubmVsc1tjaGFubmVsTmFtZV07XG4gIFxuICAgICAgICBpZighY2hhbm5lbCkge1xuICAgICAgICAgIGNoYW5uZWwgPSBuZXcgV3JlcXIuQ2hhbm5lbChjaGFubmVsTmFtZSk7XG4gICAgICAgICAgdGhpcy5fY2hhbm5lbHNbY2hhbm5lbE5hbWVdID0gY2hhbm5lbDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgcmV0dXJuIGNoYW5uZWw7XG4gICAgICB9LFxuICBcbiAgICAgIF9wcm94eU1ldGhvZHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBfLmVhY2goWyd2ZW50JywgJ2NvbW1hbmRzJywgJ3JlcXJlcyddLCBfLmJpbmQoZnVuY3Rpb24oc3lzdGVtKSB7XG4gICAgICAgICAgXy5lYWNoKCBtZXNzYWdlU3lzdGVtc1tzeXN0ZW1dLCBfLmJpbmQoZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICB0aGlzW3N5c3RlbV1bbWV0aG9kXSA9IHByb3h5TWV0aG9kKHRoaXMsIHN5c3RlbSwgbWV0aG9kKTtcbiAgICAgICAgICB9LCB0aGlzKSk7XG4gICAgICAgIH0sIHRoaXMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gIFxuICAgIHZhciBtZXNzYWdlU3lzdGVtcyA9IHtcbiAgICAgIHZlbnQ6IFtcbiAgICAgICAgJ29uJyxcbiAgICAgICAgJ29mZicsXG4gICAgICAgICd0cmlnZ2VyJyxcbiAgICAgICAgJ29uY2UnLFxuICAgICAgICAnc3RvcExpc3RlbmluZycsXG4gICAgICAgICdsaXN0ZW5UbycsXG4gICAgICAgICdsaXN0ZW5Ub09uY2UnXG4gICAgICBdLFxuICBcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdleGVjdXRlJyxcbiAgICAgICAgJ3NldEhhbmRsZXInLFxuICAgICAgICAnc2V0SGFuZGxlcnMnLFxuICAgICAgICAncmVtb3ZlSGFuZGxlcicsXG4gICAgICAgICdyZW1vdmVBbGxIYW5kbGVycydcbiAgICAgIF0sXG4gIFxuICAgICAgcmVxcmVzOiBbXG4gICAgICAgICdyZXF1ZXN0JyxcbiAgICAgICAgJ3NldEhhbmRsZXInLFxuICAgICAgICAnc2V0SGFuZGxlcnMnLFxuICAgICAgICAncmVtb3ZlSGFuZGxlcicsXG4gICAgICAgICdyZW1vdmVBbGxIYW5kbGVycydcbiAgICAgIF1cbiAgICB9O1xuICBcbiAgICB2YXIgcHJveHlNZXRob2QgPSBmdW5jdGlvbihyYWRpbywgc3lzdGVtLCBtZXRob2QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjaGFubmVsTmFtZSkge1xuICAgICAgICB2YXIgbWVzc2FnZVN5c3RlbSA9IHJhZGlvLl9nZXRDaGFubmVsKGNoYW5uZWxOYW1lKVtzeXN0ZW1dO1xuICBcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VTeXN0ZW1bbWV0aG9kXS5hcHBseShtZXNzYWdlU3lzdGVtLCBfLnJlc3QoYXJndW1lbnRzKSk7XG4gICAgICB9O1xuICAgIH07XG4gIFxuICAgIHJldHVybiBuZXcgUmFkaW8oKTtcbiAgXG4gIH0pKFdyZXFyLCBfKTtcbiAgXG5cbiAgcmV0dXJuIEJhY2tib25lLldyZXFyO1xuXG59KSk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG4vLyAgICAgQmFja2JvbmUuanMgMS4yLjNcblxuLy8gICAgIChjKSAyMDEwLTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4vLyAgICAgaHR0cDovL2JhY2tib25lanMub3JnXG5cbihmdW5jdGlvbihmYWN0b3J5KSB7XG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgKGBzZWxmYCkgaW4gdGhlIGJyb3dzZXIsIG9yIGBnbG9iYWxgIG9uIHRoZSBzZXJ2ZXIuXG4gIC8vIFdlIHVzZSBgc2VsZmAgaW5zdGVhZCBvZiBgd2luZG93YCBmb3IgYFdlYldvcmtlcmAgc3VwcG9ydC5cbiAgdmFyIHJvb3QgPSAodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09IHNlbGYgJiYgc2VsZikgfHxcbiAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT0gZ2xvYmFsICYmIGdsb2JhbCk7XG5cbiAgLy8gU2V0IHVwIEJhY2tib25lIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWyd1bmRlcnNjb3JlJywgJ2pxdWVyeScsICdleHBvcnRzJ10sIGZ1bmN0aW9uKF8sICQsIGV4cG9ydHMpIHtcbiAgICAgIC8vIEV4cG9ydCBnbG9iYWwgZXZlbiBpbiBBTUQgY2FzZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCB3aXRoXG4gICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxuICAgICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG4gICAgfSk7XG5cbiAgLy8gTmV4dCBmb3IgTm9kZS5qcyBvciBDb21tb25KUy4galF1ZXJ5IG1heSBub3QgYmUgbmVlZGVkIGFzIGEgbW9kdWxlLlxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpLCAkO1xuICAgIHRyeSB7ICQgPSByZXF1aXJlKCdqcXVlcnknKTsgfSBjYXRjaChlKSB7fVxuICAgIGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG5cbiAgLy8gRmluYWxseSwgYXMgYSBicm93c2VyIGdsb2JhbC5cbiAgfSBlbHNlIHtcbiAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCB7fSwgcm9vdC5fLCAocm9vdC5qUXVlcnkgfHwgcm9vdC5aZXB0byB8fCByb290LmVuZGVyIHx8IHJvb3QuJCkpO1xuICB9XG5cbn0oZnVuY3Rpb24ocm9vdCwgQmFja2JvbmUsIF8sICQpIHtcblxuICAvLyBJbml0aWFsIFNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYEJhY2tib25lYCB2YXJpYWJsZSwgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gcmVzdG9yZWQgbGF0ZXIgb24sIGlmIGBub0NvbmZsaWN0YCBpcyB1c2VkLlxuICB2YXIgcHJldmlvdXNCYWNrYm9uZSA9IHJvb3QuQmFja2JvbmU7XG5cbiAgLy8gQ3JlYXRlIGEgbG9jYWwgcmVmZXJlbmNlIHRvIGEgY29tbW9uIGFycmF5IG1ldGhvZCB3ZSdsbCB3YW50IHRvIHVzZSBsYXRlci5cbiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgbGlicmFyeS4gS2VlcCBpbiBzeW5jIHdpdGggYHBhY2thZ2UuanNvbmAuXG4gIEJhY2tib25lLlZFUlNJT04gPSAnMS4yLjMnO1xuXG4gIC8vIEZvciBCYWNrYm9uZSdzIHB1cnBvc2VzLCBqUXVlcnksIFplcHRvLCBFbmRlciwgb3IgTXkgTGlicmFyeSAoa2lkZGluZykgb3duc1xuICAvLyB0aGUgYCRgIHZhcmlhYmxlLlxuICBCYWNrYm9uZS4kID0gJDtcblxuICAvLyBSdW5zIEJhY2tib25lLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBCYWNrYm9uZWAgdmFyaWFibGVcbiAgLy8gdG8gaXRzIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgQmFja2JvbmUgb2JqZWN0LlxuICBCYWNrYm9uZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcm9vdC5CYWNrYm9uZSA9IHByZXZpb3VzQmFja2JvbmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUhUVFBgIHRvIHN1cHBvcnQgbGVnYWN5IEhUVFAgc2VydmVycy4gU2V0dGluZyB0aGlzIG9wdGlvblxuICAvLyB3aWxsIGZha2UgYFwiUEFUQ0hcImAsIGBcIlBVVFwiYCBhbmQgYFwiREVMRVRFXCJgIHJlcXVlc3RzIHZpYSB0aGUgYF9tZXRob2RgIHBhcmFtZXRlciBhbmRcbiAgLy8gc2V0IGEgYFgtSHR0cC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgQmFja2JvbmUuZW11bGF0ZUhUVFAgPSBmYWxzZTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSlNPTmAgdG8gc3VwcG9ydCBsZWdhY3kgc2VydmVycyB0aGF0IGNhbid0IGRlYWwgd2l0aCBkaXJlY3RcbiAgLy8gYGFwcGxpY2F0aW9uL2pzb25gIHJlcXVlc3RzIC4uLiB0aGlzIHdpbGwgZW5jb2RlIHRoZSBib2R5IGFzXG4gIC8vIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgIGluc3RlYWQgYW5kIHdpbGwgc2VuZCB0aGUgbW9kZWwgaW4gYVxuICAvLyBmb3JtIHBhcmFtIG5hbWVkIGBtb2RlbGAuXG4gIEJhY2tib25lLmVtdWxhdGVKU09OID0gZmFsc2U7XG5cbiAgLy8gUHJveHkgQmFja2JvbmUgY2xhc3MgbWV0aG9kcyB0byBVbmRlcnNjb3JlIGZ1bmN0aW9ucywgd3JhcHBpbmcgdGhlIG1vZGVsJ3NcbiAgLy8gYGF0dHJpYnV0ZXNgIG9iamVjdCBvciBjb2xsZWN0aW9uJ3MgYG1vZGVsc2AgYXJyYXkgYmVoaW5kIHRoZSBzY2VuZXMuXG4gIC8vXG4gIC8vIGNvbGxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uKG1vZGVsKSB7IHJldHVybiBtb2RlbC5nZXQoJ2FnZScpID4gMTAgfSk7XG4gIC8vIGNvbGxlY3Rpb24uZWFjaCh0aGlzLmFkZFZpZXcpO1xuICAvL1xuICAvLyBgRnVuY3Rpb24jYXBwbHlgIGNhbiBiZSBzbG93IHNvIHdlIHVzZSB0aGUgbWV0aG9kJ3MgYXJnIGNvdW50LCBpZiB3ZSBrbm93IGl0LlxuICB2YXIgYWRkTWV0aG9kID0gZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QsIGF0dHJpYnV0ZSkge1xuICAgIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGNiKGl0ZXJhdGVlLCB0aGlzKSwgY29udGV4dCk7XG4gICAgICB9O1xuICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oaXRlcmF0ZWUsIGRlZmF1bHRWYWwsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGNiKGl0ZXJhdGVlLCB0aGlzKSwgZGVmYXVsdFZhbCwgY29udGV4dCk7XG4gICAgICB9O1xuICAgICAgZGVmYXVsdDogcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgYXJncy51bnNoaWZ0KHRoaXNbYXR0cmlidXRlXSk7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgdmFyIGFkZFVuZGVyc2NvcmVNZXRob2RzID0gZnVuY3Rpb24oQ2xhc3MsIG1ldGhvZHMsIGF0dHJpYnV0ZSkge1xuICAgIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihsZW5ndGgsIG1ldGhvZCkge1xuICAgICAgaWYgKF9bbWV0aG9kXSkgQ2xhc3MucHJvdG90eXBlW21ldGhvZF0gPSBhZGRNZXRob2QobGVuZ3RoLCBtZXRob2QsIGF0dHJpYnV0ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gU3VwcG9ydCBgY29sbGVjdGlvbi5zb3J0QnkoJ2F0dHInKWAgYW5kIGBjb2xsZWN0aW9uLmZpbmRXaGVyZSh7aWQ6IDF9KWAuXG4gIHZhciBjYiA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCBpbnN0YW5jZSkge1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSByZXR1cm4gaXRlcmF0ZWU7XG4gICAgaWYgKF8uaXNPYmplY3QoaXRlcmF0ZWUpICYmICFpbnN0YW5jZS5faXNNb2RlbChpdGVyYXRlZSkpIHJldHVybiBtb2RlbE1hdGNoZXIoaXRlcmF0ZWUpO1xuICAgIGlmIChfLmlzU3RyaW5nKGl0ZXJhdGVlKSkgcmV0dXJuIGZ1bmN0aW9uKG1vZGVsKSB7IHJldHVybiBtb2RlbC5nZXQoaXRlcmF0ZWUpOyB9O1xuICAgIHJldHVybiBpdGVyYXRlZTtcbiAgfTtcbiAgdmFyIG1vZGVsTWF0Y2hlciA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgdmFyIG1hdGNoZXIgPSBfLm1hdGNoZXMoYXR0cnMpO1xuICAgIHJldHVybiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgcmV0dXJuIG1hdGNoZXIobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5FdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXQgd2l0aFxuICAvLyBhIGN1c3RvbSBldmVudCBjaGFubmVsLiBZb3UgbWF5IGJpbmQgYSBjYWxsYmFjayB0byBhbiBldmVudCB3aXRoIGBvbmAgb3JcbiAgLy8gcmVtb3ZlIHdpdGggYG9mZmA7IGB0cmlnZ2VyYC1pbmcgYW4gZXZlbnQgZmlyZXMgYWxsIGNhbGxiYWNrcyBpblxuICAvLyBzdWNjZXNzaW9uLlxuICAvL1xuICAvLyAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAvLyAgICAgXy5leHRlbmQob2JqZWN0LCBCYWNrYm9uZS5FdmVudHMpO1xuICAvLyAgICAgb2JqZWN0Lm9uKCdleHBhbmQnLCBmdW5jdGlvbigpeyBhbGVydCgnZXhwYW5kZWQnKTsgfSk7XG4gIC8vICAgICBvYmplY3QudHJpZ2dlcignZXhwYW5kJyk7XG4gIC8vXG4gIHZhciBFdmVudHMgPSBCYWNrYm9uZS5FdmVudHMgPSB7fTtcblxuICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBzcGxpdCBldmVudCBzdHJpbmdzLlxuICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrLztcblxuICAvLyBJdGVyYXRlcyBvdmVyIHRoZSBzdGFuZGFyZCBgZXZlbnQsIGNhbGxiYWNrYCAoYXMgd2VsbCBhcyB0aGUgZmFuY3kgbXVsdGlwbGVcbiAgLy8gc3BhY2Utc2VwYXJhdGVkIGV2ZW50cyBgXCJjaGFuZ2UgYmx1clwiLCBjYWxsYmFja2AgYW5kIGpRdWVyeS1zdHlsZSBldmVudFxuICAvLyBtYXBzIGB7ZXZlbnQ6IGNhbGxiYWNrfWApLlxuICB2YXIgZXZlbnRzQXBpID0gZnVuY3Rpb24oaXRlcmF0ZWUsIGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdHMpIHtcbiAgICB2YXIgaSA9IDAsIG5hbWVzO1xuICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8gSGFuZGxlIGV2ZW50IG1hcHMuXG4gICAgICBpZiAoY2FsbGJhY2sgIT09IHZvaWQgMCAmJiAnY29udGV4dCcgaW4gb3B0cyAmJiBvcHRzLmNvbnRleHQgPT09IHZvaWQgMCkgb3B0cy5jb250ZXh0ID0gY2FsbGJhY2s7XG4gICAgICBmb3IgKG5hbWVzID0gXy5rZXlzKG5hbWUpOyBpIDwgbmFtZXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50c0FwaShpdGVyYXRlZSwgZXZlbnRzLCBuYW1lc1tpXSwgbmFtZVtuYW1lc1tpXV0sIG9wdHMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmFtZSAmJiBldmVudFNwbGl0dGVyLnRlc3QobmFtZSkpIHtcbiAgICAgIC8vIEhhbmRsZSBzcGFjZSBzZXBhcmF0ZWQgZXZlbnQgbmFtZXMgYnkgZGVsZWdhdGluZyB0aGVtIGluZGl2aWR1YWxseS5cbiAgICAgIGZvciAobmFtZXMgPSBuYW1lLnNwbGl0KGV2ZW50U3BsaXR0ZXIpOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZXZlbnRzID0gaXRlcmF0ZWUoZXZlbnRzLCBuYW1lc1tpXSwgY2FsbGJhY2ssIG9wdHMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaW5hbGx5LCBzdGFuZGFyZCBldmVudHMuXG4gICAgICBldmVudHMgPSBpdGVyYXRlZShldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbiAgfTtcblxuICAvLyBCaW5kIGFuIGV2ZW50IHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi4gUGFzc2luZyBgXCJhbGxcImAgd2lsbCBiaW5kXG4gIC8vIHRoZSBjYWxsYmFjayB0byBhbGwgZXZlbnRzIGZpcmVkLlxuICBFdmVudHMub24gPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHJldHVybiBpbnRlcm5hbE9uKHRoaXMsIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBHdWFyZCB0aGUgYGxpc3RlbmluZ2AgYXJndW1lbnQgZnJvbSB0aGUgcHVibGljIEFQSS5cbiAgdmFyIGludGVybmFsT24gPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0LCBsaXN0ZW5pbmcpIHtcbiAgICBvYmouX2V2ZW50cyA9IGV2ZW50c0FwaShvbkFwaSwgb2JqLl9ldmVudHMgfHwge30sIG5hbWUsIGNhbGxiYWNrLCB7XG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIGN0eDogb2JqLFxuICAgICAgICBsaXN0ZW5pbmc6IGxpc3RlbmluZ1xuICAgIH0pO1xuXG4gICAgaWYgKGxpc3RlbmluZykge1xuICAgICAgdmFyIGxpc3RlbmVycyA9IG9iai5fbGlzdGVuZXJzIHx8IChvYmouX2xpc3RlbmVycyA9IHt9KTtcbiAgICAgIGxpc3RlbmVyc1tsaXN0ZW5pbmcuaWRdID0gbGlzdGVuaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gSW52ZXJzaW9uLW9mLWNvbnRyb2wgdmVyc2lvbnMgb2YgYG9uYC4gVGVsbCAqdGhpcyogb2JqZWN0IHRvIGxpc3RlbiB0b1xuICAvLyBhbiBldmVudCBpbiBhbm90aGVyIG9iamVjdC4uLiBrZWVwaW5nIHRyYWNrIG9mIHdoYXQgaXQncyBsaXN0ZW5pbmcgdG9cbiAgLy8gZm9yIGVhc2llciB1bmJpbmRpbmcgbGF0ZXIuXG4gIEV2ZW50cy5saXN0ZW5UbyA9ICBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiB0aGlzO1xuICAgIHZhciBpZCA9IG9iai5fbGlzdGVuSWQgfHwgKG9iai5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcbiAgICB2YXIgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgbm90IGxpc3RlbmluZyB0byBhbnkgb3RoZXIgZXZlbnRzIG9uIGBvYmpgIHlldC5cbiAgICAvLyBTZXR1cCB0aGUgbmVjZXNzYXJ5IHJlZmVyZW5jZXMgdG8gdHJhY2sgdGhlIGxpc3RlbmluZyBjYWxsYmFja3MuXG4gICAgaWYgKCFsaXN0ZW5pbmcpIHtcbiAgICAgIHZhciB0aGlzSWQgPSB0aGlzLl9saXN0ZW5JZCB8fCAodGhpcy5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgICAgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdID0ge29iajogb2JqLCBvYmpJZDogaWQsIGlkOiB0aGlzSWQsIGxpc3RlbmluZ1RvOiBsaXN0ZW5pbmdUbywgY291bnQ6IDB9O1xuICAgIH1cblxuICAgIC8vIEJpbmQgY2FsbGJhY2tzIG9uIG9iaiwgYW5kIGtlZXAgdHJhY2sgb2YgdGhlbSBvbiBsaXN0ZW5pbmcuXG4gICAgaW50ZXJuYWxPbihvYmosIG5hbWUsIGNhbGxiYWNrLCB0aGlzLCBsaXN0ZW5pbmcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCBhZGRzIGEgY2FsbGJhY2sgdG8gdGhlIGBldmVudHNgIG9iamVjdC5cbiAgdmFyIG9uQXBpID0gZnVuY3Rpb24oZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdIHx8IChldmVudHNbbmFtZV0gPSBbXSk7XG4gICAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgY3R4ID0gb3B0aW9ucy5jdHgsIGxpc3RlbmluZyA9IG9wdGlvbnMubGlzdGVuaW5nO1xuICAgICAgaWYgKGxpc3RlbmluZykgbGlzdGVuaW5nLmNvdW50Kys7XG5cbiAgICAgIGhhbmRsZXJzLnB1c2goeyBjYWxsYmFjazogY2FsbGJhY2ssIGNvbnRleHQ6IGNvbnRleHQsIGN0eDogY29udGV4dCB8fCBjdHgsIGxpc3RlbmluZzogbGlzdGVuaW5nIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xuICB9O1xuXG4gIC8vIFJlbW92ZSBvbmUgb3IgbWFueSBjYWxsYmFja3MuIElmIGBjb250ZXh0YCBpcyBudWxsLCByZW1vdmVzIGFsbFxuICAvLyBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gIC8vIGNhbGxiYWNrcyBmb3IgdGhlIGV2ZW50LiBJZiBgbmFtZWAgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmRcbiAgLy8gY2FsbGJhY2tzIGZvciBhbGwgZXZlbnRzLlxuICBFdmVudHMub2ZmID0gIGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuICAgIHRoaXMuX2V2ZW50cyA9IGV2ZW50c0FwaShvZmZBcGksIHRoaXMuX2V2ZW50cywgbmFtZSwgY2FsbGJhY2ssIHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgbGlzdGVuZXJzOiB0aGlzLl9saXN0ZW5lcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUZWxsIHRoaXMgb2JqZWN0IHRvIHN0b3AgbGlzdGVuaW5nIHRvIGVpdGhlciBzcGVjaWZpYyBldmVudHMgLi4uIG9yXG4gIC8vIHRvIGV2ZXJ5IG9iamVjdCBpdCdzIGN1cnJlbnRseSBsaXN0ZW5pbmcgdG8uXG4gIEV2ZW50cy5zdG9wTGlzdGVuaW5nID0gIGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbztcbiAgICBpZiAoIWxpc3RlbmluZ1RvKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBpZHMgPSBvYmogPyBbb2JqLl9saXN0ZW5JZF0gOiBfLmtleXMobGlzdGVuaW5nVG8pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZHNbaV1dO1xuXG4gICAgICAvLyBJZiBsaXN0ZW5pbmcgZG9lc24ndCBleGlzdCwgdGhpcyBvYmplY3QgaXMgbm90IGN1cnJlbnRseVxuICAgICAgLy8gbGlzdGVuaW5nIHRvIG9iai4gQnJlYWsgb3V0IGVhcmx5LlxuICAgICAgaWYgKCFsaXN0ZW5pbmcpIGJyZWFrO1xuXG4gICAgICBsaXN0ZW5pbmcub2JqLm9mZihuYW1lLCBjYWxsYmFjaywgdGhpcyk7XG4gICAgfVxuICAgIGlmIChfLmlzRW1wdHkobGlzdGVuaW5nVG8pKSB0aGlzLl9saXN0ZW5pbmdUbyA9IHZvaWQgMDtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCByZW1vdmVzIGEgY2FsbGJhY2sgZnJvbSB0aGUgYGV2ZW50c2Agb2JqZWN0LlxuICB2YXIgb2ZmQXBpID0gZnVuY3Rpb24oZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghZXZlbnRzKSByZXR1cm47XG5cbiAgICB2YXIgaSA9IDAsIGxpc3RlbmluZztcbiAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgbGlzdGVuZXJzID0gb3B0aW9ucy5saXN0ZW5lcnM7XG5cbiAgICAvLyBEZWxldGUgYWxsIGV2ZW50cyBsaXN0ZW5lcnMgYW5kIFwiZHJvcFwiIGV2ZW50cy5cbiAgICBpZiAoIW5hbWUgJiYgIWNhbGxiYWNrICYmICFjb250ZXh0KSB7XG4gICAgICB2YXIgaWRzID0gXy5rZXlzKGxpc3RlbmVycyk7XG4gICAgICBmb3IgKDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0ZW5pbmcgPSBsaXN0ZW5lcnNbaWRzW2ldXTtcbiAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tsaXN0ZW5pbmcuaWRdO1xuICAgICAgICBkZWxldGUgbGlzdGVuaW5nLmxpc3RlbmluZ1RvW2xpc3RlbmluZy5vYmpJZF07XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyhldmVudHMpO1xuICAgIGZvciAoOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcblxuICAgICAgLy8gQmFpbCBvdXQgaWYgdGhlcmUgYXJlIG5vIGV2ZW50cyBzdG9yZWQuXG4gICAgICBpZiAoIWhhbmRsZXJzKSBicmVhaztcblxuICAgICAgLy8gUmVwbGFjZSBldmVudHMgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcuICBPdGhlcndpc2UsIGNsZWFuIHVwLlxuICAgICAgdmFyIHJlbWFpbmluZyA9IFtdO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoYW5kbGVycy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2pdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGhhbmRsZXIuY2FsbGJhY2sgJiZcbiAgICAgICAgICAgIGNhbGxiYWNrICE9PSBoYW5kbGVyLmNhbGxiYWNrLl9jYWxsYmFjayB8fFxuICAgICAgICAgICAgICBjb250ZXh0ICYmIGNvbnRleHQgIT09IGhhbmRsZXIuY29udGV4dFxuICAgICAgICApIHtcbiAgICAgICAgICByZW1haW5pbmcucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5pbmcgPSBoYW5kbGVyLmxpc3RlbmluZztcbiAgICAgICAgICBpZiAobGlzdGVuaW5nICYmIC0tbGlzdGVuaW5nLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF07XG4gICAgICAgICAgICBkZWxldGUgbGlzdGVuaW5nLmxpc3RlbmluZ1RvW2xpc3RlbmluZy5vYmpJZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0YWlsIGV2ZW50IGlmIHRoZSBsaXN0IGhhcyBhbnkgZXZlbnRzLiAgT3RoZXJ3aXNlLCBjbGVhbiB1cC5cbiAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoKSB7XG4gICAgICAgIGV2ZW50c1tuYW1lXSA9IHJlbWFpbmluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSBldmVudHNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChfLnNpemUoZXZlbnRzKSkgcmV0dXJuIGV2ZW50cztcbiAgfTtcblxuICAvLyBCaW5kIGFuIGV2ZW50IHRvIG9ubHkgYmUgdHJpZ2dlcmVkIGEgc2luZ2xlIHRpbWUuIEFmdGVyIHRoZSBmaXJzdCB0aW1lXG4gIC8vIHRoZSBjYWxsYmFjayBpcyBpbnZva2VkLCBpdHMgbGlzdGVuZXIgd2lsbCBiZSByZW1vdmVkLiBJZiBtdWx0aXBsZSBldmVudHNcbiAgLy8gYXJlIHBhc3NlZCBpbiB1c2luZyB0aGUgc3BhY2Utc2VwYXJhdGVkIHN5bnRheCwgdGhlIGhhbmRsZXIgd2lsbCBmaXJlXG4gIC8vIG9uY2UgZm9yIGVhY2ggZXZlbnQsIG5vdCBvbmNlIGZvciBhIGNvbWJpbmF0aW9uIG9mIGFsbCBldmVudHMuXG4gIEV2ZW50cy5vbmNlID0gIGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMub2ZmLCB0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMub24oZXZlbnRzLCB2b2lkIDAsIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmNlYC5cbiAgRXZlbnRzLmxpc3RlblRvT25jZSA9ICBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMuc3RvcExpc3RlbmluZywgdGhpcywgb2JqKSk7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuVG8ob2JqLCBldmVudHMpO1xuICB9O1xuXG4gIC8vIFJlZHVjZXMgdGhlIGV2ZW50IGNhbGxiYWNrcyBpbnRvIGEgbWFwIG9mIGB7ZXZlbnQ6IG9uY2VXcmFwcGVyfWAuXG4gIC8vIGBvZmZlcmAgdW5iaW5kcyB0aGUgYG9uY2VXcmFwcGVyYCBhZnRlciBpdCBoYXMgYmVlbiBjYWxsZWQuXG4gIHZhciBvbmNlTWFwID0gZnVuY3Rpb24obWFwLCBuYW1lLCBjYWxsYmFjaywgb2ZmZXIpIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBvbmNlID0gbWFwW25hbWVdID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBvZmZlcihuYW1lLCBvbmNlKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgb25jZS5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbiAgfTtcblxuICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcbiAgLy8gcGFzc2VkIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBgdHJpZ2dlcmAgaXMsIGFwYXJ0IGZyb20gdGhlIGV2ZW50IG5hbWVcbiAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cbiAgRXZlbnRzLnRyaWdnZXIgPSAgZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heCgwLCBhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXG4gICAgZXZlbnRzQXBpKHRyaWdnZXJBcGksIHRoaXMuX2V2ZW50cywgbmFtZSwgdm9pZCAwLCBhcmdzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBIYW5kbGVzIHRyaWdnZXJpbmcgdGhlIGFwcHJvcHJpYXRlIGV2ZW50IGNhbGxiYWNrcy5cbiAgdmFyIHRyaWdnZXJBcGkgPSBmdW5jdGlvbihvYmpFdmVudHMsIG5hbWUsIGNiLCBhcmdzKSB7XG4gICAgaWYgKG9iakV2ZW50cykge1xuICAgICAgdmFyIGV2ZW50cyA9IG9iakV2ZW50c1tuYW1lXTtcbiAgICAgIHZhciBhbGxFdmVudHMgPSBvYmpFdmVudHMuYWxsO1xuICAgICAgaWYgKGV2ZW50cyAmJiBhbGxFdmVudHMpIGFsbEV2ZW50cyA9IGFsbEV2ZW50cy5zbGljZSgpO1xuICAgICAgaWYgKGV2ZW50cykgdHJpZ2dlckV2ZW50cyhldmVudHMsIGFyZ3MpO1xuICAgICAgaWYgKGFsbEV2ZW50cykgdHJpZ2dlckV2ZW50cyhhbGxFdmVudHMsIFtuYW1lXS5jb25jYXQoYXJncykpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqRXZlbnRzO1xuICB9O1xuXG4gIC8vIEEgZGlmZmljdWx0LXRvLWJlbGlldmUsIGJ1dCBvcHRpbWl6ZWQgaW50ZXJuYWwgZGlzcGF0Y2ggZnVuY3Rpb24gZm9yXG4gIC8vIHRyaWdnZXJpbmcgZXZlbnRzLiBUcmllcyB0byBrZWVwIHRoZSB1c3VhbCBjYXNlcyBzcGVlZHkgKG1vc3QgaW50ZXJuYWxcbiAgLy8gQmFja2JvbmUgZXZlbnRzIGhhdmUgMyBhcmd1bWVudHMpLlxuICB2YXIgdHJpZ2dlckV2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50cywgYXJncykge1xuICAgIHZhciBldiwgaSA9IC0xLCBsID0gZXZlbnRzLmxlbmd0aCwgYTEgPSBhcmdzWzBdLCBhMiA9IGFyZ3NbMV0sIGEzID0gYXJnc1syXTtcbiAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4KTsgcmV0dXJuO1xuICAgICAgY2FzZSAxOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEpOyByZXR1cm47XG4gICAgICBjYXNlIDI6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSwgYTIpOyByZXR1cm47XG4gICAgICBjYXNlIDM6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSwgYTIsIGEzKTsgcmV0dXJuO1xuICAgICAgZGVmYXVsdDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suYXBwbHkoZXYuY3R4LCBhcmdzKTsgcmV0dXJuO1xuICAgIH1cbiAgfTtcblxuICAvLyBBbGlhc2VzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgRXZlbnRzLmJpbmQgICA9IEV2ZW50cy5vbjtcbiAgRXZlbnRzLnVuYmluZCA9IEV2ZW50cy5vZmY7XG5cbiAgLy8gQWxsb3cgdGhlIGBCYWNrYm9uZWAgb2JqZWN0IHRvIHNlcnZlIGFzIGEgZ2xvYmFsIGV2ZW50IGJ1cywgZm9yIGZvbGtzIHdob1xuICAvLyB3YW50IGdsb2JhbCBcInB1YnN1YlwiIGluIGEgY29udmVuaWVudCBwbGFjZS5cbiAgXy5leHRlbmQoQmFja2JvbmUsIEV2ZW50cyk7XG5cbiAgLy8gQmFja2JvbmUuTW9kZWxcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBCYWNrYm9uZSAqKk1vZGVscyoqIGFyZSB0aGUgYmFzaWMgZGF0YSBvYmplY3QgaW4gdGhlIGZyYW1ld29yayAtLVxuICAvLyBmcmVxdWVudGx5IHJlcHJlc2VudGluZyBhIHJvdyBpbiBhIHRhYmxlIGluIGEgZGF0YWJhc2Ugb24geW91ciBzZXJ2ZXIuXG4gIC8vIEEgZGlzY3JldGUgY2h1bmsgb2YgZGF0YSBhbmQgYSBidW5jaCBvZiB1c2VmdWwsIHJlbGF0ZWQgbWV0aG9kcyBmb3JcbiAgLy8gcGVyZm9ybWluZyBjb21wdXRhdGlvbnMgYW5kIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGF0IGRhdGEuXG5cbiAgLy8gQ3JlYXRlIGEgbmV3IG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGVzLiBBIGNsaWVudCBpZCAoYGNpZGApXG4gIC8vIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGFuZCBhc3NpZ25lZCBmb3IgeW91LlxuICB2YXIgTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbCA9IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgYXR0cnMgPSBhdHRyaWJ1dGVzIHx8IHt9O1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKHRoaXMuY2lkUHJlZml4KTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jb2xsZWN0aW9uKSB0aGlzLmNvbGxlY3Rpb24gPSBvcHRpb25zLmNvbGxlY3Rpb247XG4gICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gdGhpcy5wYXJzZShhdHRycywgb3B0aW9ucykgfHwge307XG4gICAgYXR0cnMgPSBfLmRlZmF1bHRzKHt9LCBhdHRycywgXy5yZXN1bHQodGhpcywgJ2RlZmF1bHRzJykpO1xuICAgIHRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBBdHRhY2ggYWxsIGluaGVyaXRhYmxlIG1ldGhvZHMgdG8gdGhlIE1vZGVsIHByb3RvdHlwZS5cbiAgXy5leHRlbmQoTW9kZWwucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEEgaGFzaCBvZiBhdHRyaWJ1dGVzIHdob3NlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHZhbHVlIGRpZmZlci5cbiAgICBjaGFuZ2VkOiBudWxsLFxuXG4gICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGR1cmluZyB0aGUgbGFzdCBmYWlsZWQgdmFsaWRhdGlvbi5cbiAgICB2YWxpZGF0aW9uRXJyb3I6IG51bGwsXG5cbiAgICAvLyBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgSlNPTiBgaWRgIGF0dHJpYnV0ZSBpcyBgXCJpZFwiYC4gTW9uZ29EQiBhbmRcbiAgICAvLyBDb3VjaERCIHVzZXJzIG1heSB3YW50IHRvIHNldCB0aGlzIHRvIGBcIl9pZFwiYC5cbiAgICBpZEF0dHJpYnV0ZTogJ2lkJyxcblxuICAgIC8vIFRoZSBwcmVmaXggaXMgdXNlZCB0byBjcmVhdGUgdGhlIGNsaWVudCBpZCB3aGljaCBpcyB1c2VkIHRvIGlkZW50aWZ5IG1vZGVscyBsb2NhbGx5LlxuICAgIC8vIFlvdSBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIGlmIHlvdSdyZSBleHBlcmllbmNpbmcgbmFtZSBjbGFzaGVzIHdpdGggbW9kZWwgaWRzLlxuICAgIGNpZFByZWZpeDogJ2MnLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcbiAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIEhUTUwtZXNjYXBlZCB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuICAgIC8vIG9yIHVuZGVmaW5lZC5cbiAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyBTcGVjaWFsLWNhc2VkIHByb3h5IHRvIHVuZGVyc2NvcmUncyBgXy5tYXRjaGVzYCBtZXRob2QuXG4gICAgbWF0Y2hlczogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiAhIV8uaXRlcmF0ZWUoYXR0cnMsIHRoaXMpKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBUaGlzIGlzXG4gICAgLy8gdGhlIGNvcmUgcHJpbWl0aXZlIG9wZXJhdGlvbiBvZiBhIG1vZGVsLCB1cGRhdGluZyB0aGUgZGF0YSBhbmQgbm90aWZ5aW5nXG4gICAgLy8gYW55b25lIHdobyBuZWVkcyB0byBrbm93IGFib3V0IHRoZSBjaGFuZ2UgaW4gc3RhdGUuIFRoZSBoZWFydCBvZiB0aGUgYmVhc3QuXG4gICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIHZhciBhdHRycztcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gdmFsaWRhdGlvbi5cbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgb3B0aW9ucy5cbiAgICAgIHZhciB1bnNldCAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICAgIHZhciBzaWxlbnQgICAgID0gb3B0aW9ucy5zaWxlbnQ7XG4gICAgICB2YXIgY2hhbmdlcyAgICA9IFtdO1xuICAgICAgdmFyIGNoYW5naW5nICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKCFjaGFuZ2luZykge1xuICAgICAgICB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgPSBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIHZhciBjaGFuZ2VkID0gdGhpcy5jaGFuZ2VkO1xuICAgICAgdmFyIHByZXYgICAgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIEZvciBlYWNoIGBzZXRgIGF0dHJpYnV0ZSwgdXBkYXRlIG9yIGRlbGV0ZSB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIGZvciAodmFyIGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFsID0gYXR0cnNbYXR0cl07XG4gICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuICAgICAgICAgIGNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGNoYW5nZWRbYXR0cl07XG4gICAgICAgIH1cbiAgICAgICAgdW5zZXQgPyBkZWxldGUgY3VycmVudFthdHRyXSA6IGN1cnJlbnRbYXR0cl0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgYGlkYC5cbiAgICAgIHRoaXMuaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTtcblxuICAgICAgLy8gVHJpZ2dlciBhbGwgcmVsZXZhbnQgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGgpIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuICAgICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLl9wZW5kaW5nKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3BcbiAgICAvLyBpZiB0aGUgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3QuXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHJzLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1vZGVsIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwpIHJldHVybiAhXy5pc0VtcHR5KHRoaXMuY2hhbmdlZCk7XG4gICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3JcbiAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcbiAgICAvLyBwYXJ0cyBvZiBhIHZpZXcgbmVlZCB0byBiZSB1cGRhdGVkIGFuZC9vciB3aGF0IGF0dHJpYnV0ZXMgbmVlZCB0byBiZVxuICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuICAgIC8vIGRldGVybWluaW5nIGlmIHRoZXJlICp3b3VsZCBiZSogYSBjaGFuZ2UuXG4gICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcbiAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG4gICAgICB2YXIgb2xkID0gdGhpcy5fY2hhbmdpbmcgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgOiB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICB2YXIgY2hhbmdlZCA9IHt9O1xuICAgICAgZm9yICh2YXIgYXR0ciBpbiBkaWZmKSB7XG4gICAgICAgIHZhciB2YWwgPSBkaWZmW2F0dHJdO1xuICAgICAgICBpZiAoXy5pc0VxdWFsKG9sZFthdHRyXSwgdmFsKSkgY29udGludWU7XG4gICAgICAgIGNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gXy5zaXplKGNoYW5nZWQpID8gY2hhbmdlZCA6IGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHByZXZpb3VzIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSwgcmVjb3JkZWQgYXQgdGhlIHRpbWUgdGhlIGxhc3RcbiAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQgd2FzIGZpcmVkLlxuICAgIHByZXZpb3VzOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICBpZiAoYXR0ciA9PSBudWxsIHx8ICF0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlc1thdHRyXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IGFsbCBvZiB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbW9kZWwgYXQgdGhlIHRpbWUgb2YgdGhlIHByZXZpb3VzXG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIHByZXZpb3VzQXR0cmlidXRlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgbW9kZWwgZnJvbSB0aGUgc2VydmVyLCBtZXJnaW5nIHRoZSByZXNwb25zZSB3aXRoIHRoZSBtb2RlbCdzXG4gICAgLy8gbG9jYWwgYXR0cmlidXRlcy4gQW55IGNoYW5nZWQgYXR0cmlidXRlcyB3aWxsIHRyaWdnZXIgYSBcImNoYW5nZVwiIGV2ZW50LlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3BhcnNlOiB0cnVlfSwgb3B0aW9ucyk7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIHZhciBzZXJ2ZXJBdHRycyA9IG9wdGlvbnMucGFyc2UgPyBtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSA6IHJlc3A7XG4gICAgICAgIGlmICghbW9kZWwuc2V0KHNlcnZlckF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzLCBhbmQgc3luYyB0aGUgbW9kZWwgdG8gdGhlIHNlcnZlci5cbiAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gYXR0cmlidXRlcyBoYXNoIHRoYXQgZGlmZmVycywgdGhlIG1vZGVsJ3NcbiAgICAvLyBzdGF0ZSB3aWxsIGJlIGBzZXRgIGFnYWluLlxuICAgIHNhdmU6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgdmFyIGF0dHJzO1xuICAgICAgaWYgKGtleSA9PSBudWxsIHx8IHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dmFsaWRhdGU6IHRydWUsIHBhcnNlOiB0cnVlfSwgb3B0aW9ucyk7XG4gICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcblxuICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcbiAgICAgIC8vIHRoZSBtb2RlbCB3aWxsIGJlIHZhbGlkIHdoZW4gdGhlIGF0dHJpYnV0ZXMsIGlmIGFueSwgYXJlIHNldC5cbiAgICAgIGlmIChhdHRycyAmJiAhd2FpdCkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWZ0ZXIgYSBzdWNjZXNzZnVsIHNlcnZlci1zaWRlIHNhdmUsIHRoZSBjbGllbnQgaXMgKG9wdGlvbmFsbHkpXG4gICAgICAvLyB1cGRhdGVkIHdpdGggdGhlIHNlcnZlci1zaWRlIHN0YXRlLlxuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIC8vIEVuc3VyZSBhdHRyaWJ1dGVzIGFyZSByZXN0b3JlZCBkdXJpbmcgc3luY2hyb25vdXMgc2F2ZXMuXG4gICAgICAgIG1vZGVsLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgc2VydmVyQXR0cnMgPSBvcHRpb25zLnBhcnNlID8gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucykgOiByZXNwO1xuICAgICAgICBpZiAod2FpdCkgc2VydmVyQXR0cnMgPSBfLmV4dGVuZCh7fSwgYXR0cnMsIHNlcnZlckF0dHJzKTtcbiAgICAgICAgaWYgKHNlcnZlckF0dHJzICYmICFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBTZXQgdGVtcG9yYXJ5IGF0dHJpYnV0ZXMgaWYgYHt3YWl0OiB0cnVlfWAgdG8gcHJvcGVybHkgZmluZCBuZXcgaWRzLlxuICAgICAgaWYgKGF0dHJzICYmIHdhaXQpIHRoaXMuYXR0cmlidXRlcyA9IF8uZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCBhdHRycyk7XG5cbiAgICAgIHZhciBtZXRob2QgPSB0aGlzLmlzTmV3KCkgPyAnY3JlYXRlJyA6IChvcHRpb25zLnBhdGNoID8gJ3BhdGNoJyA6ICd1cGRhdGUnKTtcbiAgICAgIGlmIChtZXRob2QgPT09ICdwYXRjaCcgJiYgIW9wdGlvbnMuYXR0cnMpIG9wdGlvbnMuYXR0cnMgPSBhdHRycztcbiAgICAgIHZhciB4aHIgPSB0aGlzLnN5bmMobWV0aG9kLCB0aGlzLCBvcHRpb25zKTtcblxuICAgICAgLy8gUmVzdG9yZSBhdHRyaWJ1dGVzLlxuICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcblxuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVzdHJveSB0aGlzIG1vZGVsIG9uIHRoZSBzZXJ2ZXIgaWYgaXQgd2FzIGFscmVhZHkgcGVyc2lzdGVkLlxuICAgIC8vIE9wdGltaXN0aWNhbGx5IHJlbW92ZXMgdGhlIG1vZGVsIGZyb20gaXRzIGNvbGxlY3Rpb24sIGlmIGl0IGhhcyBvbmUuXG4gICAgLy8gSWYgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgd2FpdHMgZm9yIHRoZSBzZXJ2ZXIgdG8gcmVzcG9uZCBiZWZvcmUgcmVtb3ZhbC5cbiAgICBkZXN0cm95OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciB3YWl0ID0gb3B0aW9ucy53YWl0O1xuXG4gICAgICB2YXIgZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtb2RlbC5zdG9wTGlzdGVuaW5nKCk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Rlc3Ryb3knLCBtb2RlbCwgbW9kZWwuY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmICh3YWl0KSBkZXN0cm95KCk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghbW9kZWwuaXNOZXcoKSkgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciB4aHIgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHtcbiAgICAgICAgXy5kZWZlcihvcHRpb25zLnN1Y2Nlc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB4aHIgPSB0aGlzLnN5bmMoJ2RlbGV0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKCF3YWl0KSBkZXN0cm95KCk7XG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZWZhdWx0IFVSTCBmb3IgdGhlIG1vZGVsJ3MgcmVwcmVzZW50YXRpb24gb24gdGhlIHNlcnZlciAtLSBpZiB5b3UncmVcbiAgICAvLyB1c2luZyBCYWNrYm9uZSdzIHJlc3RmdWwgbWV0aG9kcywgb3ZlcnJpZGUgdGhpcyB0byBjaGFuZ2UgdGhlIGVuZHBvaW50XG4gICAgLy8gdGhhdCB3aWxsIGJlIGNhbGxlZC5cbiAgICB1cmw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJhc2UgPVxuICAgICAgICBfLnJlc3VsdCh0aGlzLCAndXJsUm9vdCcpIHx8XG4gICAgICAgIF8ucmVzdWx0KHRoaXMuY29sbGVjdGlvbiwgJ3VybCcpIHx8XG4gICAgICAgIHVybEVycm9yKCk7XG4gICAgICBpZiAodGhpcy5pc05ldygpKSByZXR1cm4gYmFzZTtcbiAgICAgIHZhciBpZCA9IHRoaXMuZ2V0KHRoaXMuaWRBdHRyaWJ1dGUpO1xuICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKSArIGVuY29kZVVSSUNvbXBvbmVudChpZCk7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gdGhlIGhhc2ggb2YgYXR0cmlidXRlcyB0byBiZSBgc2V0YCBvblxuICAgIC8vIHRoZSBtb2RlbC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIHRoZSByZXNwb25zZSBhbG9uZy5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIGlkZW50aWNhbCBhdHRyaWJ1dGVzIHRvIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBBIG1vZGVsIGlzIG5ldyBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBzYXZlZCB0byB0aGUgc2VydmVyLCBhbmQgbGFja3MgYW4gaWQuXG4gICAgaXNOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBpbiBhIHZhbGlkIHN0YXRlLlxuICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgXy5kZWZhdWx0cyh7dmFsaWRhdGU6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgdGhlIG5leHQgY29tcGxldGUgc2V0IG9mIG1vZGVsIGF0dHJpYnV0ZXMsXG4gICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG4gICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuICAgICAgaWYgKCFlcnJvcikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbCwgbWFwcGVkIHRvIHRoZVxuICAvLyBudW1iZXIgb2YgYXJndW1lbnRzIHRoZXkgdGFrZS5cbiAgdmFyIG1vZGVsTWV0aG9kcyA9IHsga2V5czogMSwgdmFsdWVzOiAxLCBwYWlyczogMSwgaW52ZXJ0OiAxLCBwaWNrOiAwLFxuICAgICAgb21pdDogMCwgY2hhaW46IDEsIGlzRW1wdHk6IDEgfTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBNb2RlbCNhdHRyaWJ1dGVzYC5cbiAgYWRkVW5kZXJzY29yZU1ldGhvZHMoTW9kZWwsIG1vZGVsTWV0aG9kcywgJ2F0dHJpYnV0ZXMnKTtcblxuICAvLyBCYWNrYm9uZS5Db2xsZWN0aW9uXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBJZiBtb2RlbHMgdGVuZCB0byByZXByZXNlbnQgYSBzaW5nbGUgcm93IG9mIGRhdGEsIGEgQmFja2JvbmUgQ29sbGVjdGlvbiBpc1xuICAvLyBtb3JlIGFuYWxvZ291cyB0byBhIHRhYmxlIGZ1bGwgb2YgZGF0YSAuLi4gb3IgYSBzbWFsbCBzbGljZSBvciBwYWdlIG9mIHRoYXRcbiAgLy8gdGFibGUsIG9yIGEgY29sbGVjdGlvbiBvZiByb3dzIHRoYXQgYmVsb25nIHRvZ2V0aGVyIGZvciBhIHBhcnRpY3VsYXIgcmVhc29uXG4gIC8vIC0tIGFsbCBvZiB0aGUgbWVzc2FnZXMgaW4gdGhpcyBwYXJ0aWN1bGFyIGZvbGRlciwgYWxsIG9mIHRoZSBkb2N1bWVudHNcbiAgLy8gYmVsb25naW5nIHRvIHRoaXMgcGFydGljdWxhciBhdXRob3IsIGFuZCBzbyBvbi4gQ29sbGVjdGlvbnMgbWFpbnRhaW5cbiAgLy8gaW5kZXhlcyBvZiB0aGVpciBtb2RlbHMsIGJvdGggaW4gb3JkZXIsIGFuZCBmb3IgbG9va3VwIGJ5IGBpZGAuXG5cbiAgLy8gQ3JlYXRlIGEgbmV3ICoqQ29sbGVjdGlvbioqLCBwZXJoYXBzIHRvIGNvbnRhaW4gYSBzcGVjaWZpYyB0eXBlIG9mIGBtb2RlbGAuXG4gIC8vIElmIGEgYGNvbXBhcmF0b3JgIGlzIHNwZWNpZmllZCwgdGhlIENvbGxlY3Rpb24gd2lsbCBtYWludGFpblxuICAvLyBpdHMgbW9kZWxzIGluIHNvcnQgb3JkZXIsIGFzIHRoZXkncmUgYWRkZWQgYW5kIHJlbW92ZWQuXG4gIHZhciBDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMubW9kZWwpIHRoaXMubW9kZWwgPSBvcHRpb25zLm1vZGVsO1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmF0b3IgIT09IHZvaWQgMCkgdGhpcy5jb21wYXJhdG9yID0gb3B0aW9ucy5jb21wYXJhdG9yO1xuICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKG1vZGVscykgdGhpcy5yZXNldChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gIH07XG5cbiAgLy8gRGVmYXVsdCBvcHRpb25zIGZvciBgQ29sbGVjdGlvbiNzZXRgLlxuICB2YXIgc2V0T3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogdHJ1ZSwgbWVyZ2U6IHRydWV9O1xuICB2YXIgYWRkT3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogZmFsc2V9O1xuXG4gIC8vIFNwbGljZXMgYGluc2VydGAgaW50byBgYXJyYXlgIGF0IGluZGV4IGBhdGAuXG4gIHZhciBzcGxpY2UgPSBmdW5jdGlvbihhcnJheSwgaW5zZXJ0LCBhdCkge1xuICAgIGF0ID0gTWF0aC5taW4oTWF0aC5tYXgoYXQsIDApLCBhcnJheS5sZW5ndGgpO1xuICAgIHZhciB0YWlsID0gQXJyYXkoYXJyYXkubGVuZ3RoIC0gYXQpO1xuICAgIHZhciBsZW5ndGggPSBpbnNlcnQubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykgdGFpbFtpXSA9IGFycmF5W2kgKyBhdF07XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhcnJheVtpICsgYXRdID0gaW5zZXJ0W2ldO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0YWlsLmxlbmd0aDsgaSsrKSBhcnJheVtpICsgbGVuZ3RoICsgYXRdID0gdGFpbFtpXTtcbiAgfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLnRvSlNPTihvcHRpb25zKTsgfSk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0LlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwsIG9yIGxpc3Qgb2YgbW9kZWxzIHRvIHRoZSBzZXQuIGBtb2RlbHNgIG1heSBiZSBCYWNrYm9uZVxuICAgIC8vIE1vZGVscyBvciByYXcgSmF2YVNjcmlwdCBvYmplY3RzIHRvIGJlIGNvbnZlcnRlZCB0byBNb2RlbHMsIG9yIGFueVxuICAgIC8vIGNvbWJpbmF0aW9uIG9mIHRoZSB0d28uXG4gICAgYWRkOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChtb2RlbHMsIF8uZXh0ZW5kKHttZXJnZTogZmFsc2V9LCBvcHRpb25zLCBhZGRPcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsLCBvciBhIGxpc3Qgb2YgbW9kZWxzIGZyb20gdGhlIHNldC5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBvcHRpb25zKTtcbiAgICAgIHZhciBzaW5ndWxhciA9ICFfLmlzQXJyYXkobW9kZWxzKTtcbiAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gW21vZGVsc10gOiBfLmNsb25lKG1vZGVscyk7XG4gICAgICB2YXIgcmVtb3ZlZCA9IHRoaXMuX3JlbW92ZU1vZGVscyhtb2RlbHMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiByZW1vdmVkKSB0aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gcmVtb3ZlZFswXSA6IHJlbW92ZWQ7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSBhIGNvbGxlY3Rpb24gYnkgYHNldGAtaW5nIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCBhZGRpbmcgbmV3IG9uZXMsXG4gICAgLy8gcmVtb3ZpbmcgbW9kZWxzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LCBhbmQgbWVyZ2luZyBtb2RlbHMgdGhhdFxuICAgIC8vIGFscmVhZHkgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIGFzIG5lY2Vzc2FyeS4gU2ltaWxhciB0byAqKk1vZGVsI3NldCoqLFxuICAgIC8vIHRoZSBjb3JlIG9wZXJhdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGRhdGEgY29udGFpbmVkIGJ5IHRoZSBjb2xsZWN0aW9uLlxuICAgIHNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBpZiAobW9kZWxzID09IG51bGwpIHJldHVybjtcblxuICAgICAgb3B0aW9ucyA9IF8uZGVmYXVsdHMoe30sIG9wdGlvbnMsIHNldE9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgJiYgIXRoaXMuX2lzTW9kZWwobW9kZWxzKSkgbW9kZWxzID0gdGhpcy5wYXJzZShtb2RlbHMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogbW9kZWxzLnNsaWNlKCk7XG5cbiAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG4gICAgICBpZiAoYXQgIT0gbnVsbCkgYXQgPSArYXQ7XG4gICAgICBpZiAoYXQgPCAwKSBhdCArPSB0aGlzLmxlbmd0aCArIDE7XG5cbiAgICAgIHZhciBzZXQgPSBbXTtcbiAgICAgIHZhciB0b0FkZCA9IFtdO1xuICAgICAgdmFyIHRvUmVtb3ZlID0gW107XG4gICAgICB2YXIgbW9kZWxNYXAgPSB7fTtcblxuICAgICAgdmFyIGFkZCA9IG9wdGlvbnMuYWRkO1xuICAgICAgdmFyIG1lcmdlID0gb3B0aW9ucy5tZXJnZTtcbiAgICAgIHZhciByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcblxuICAgICAgdmFyIHNvcnQgPSBmYWxzZTtcbiAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiAoYXQgPT0gbnVsbCkgJiYgb3B0aW9ucy5zb3J0ICE9PSBmYWxzZTtcbiAgICAgIHZhciBzb3J0QXR0ciA9IF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFR1cm4gYmFyZSBvYmplY3RzIGludG8gbW9kZWwgcmVmZXJlbmNlcywgYW5kIHByZXZlbnQgaW52YWxpZCBtb2RlbHNcbiAgICAgIC8vIGZyb20gYmVpbmcgYWRkZWQuXG4gICAgICB2YXIgbW9kZWw7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXTtcblxuICAgICAgICAvLyBJZiBhIGR1cGxpY2F0ZSBpcyBmb3VuZCwgcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIGFuZFxuICAgICAgICAvLyBvcHRpb25hbGx5IG1lcmdlIGl0IGludG8gdGhlIGV4aXN0aW5nIG1vZGVsLlxuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChtb2RlbCk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgIGlmIChtZXJnZSAmJiBtb2RlbCAhPT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IHRoaXMuX2lzTW9kZWwobW9kZWwpID8gbW9kZWwuYXR0cmlidXRlcyA6IG1vZGVsO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gZXhpc3RpbmcucGFyc2UoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgZXhpc3Rpbmcuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChzb3J0YWJsZSAmJiAhc29ydCkgc29ydCA9IGV4aXN0aW5nLmhhc0NoYW5nZWQoc29ydEF0dHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIW1vZGVsTWFwW2V4aXN0aW5nLmNpZF0pIHtcbiAgICAgICAgICAgIG1vZGVsTWFwW2V4aXN0aW5nLmNpZF0gPSB0cnVlO1xuICAgICAgICAgICAgc2V0LnB1c2goZXhpc3RpbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RlbHNbaV0gPSBleGlzdGluZztcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbmV3LCB2YWxpZCBtb2RlbCwgcHVzaCBpdCB0byB0aGUgYHRvQWRkYCBsaXN0LlxuICAgICAgICB9IGVsc2UgaWYgKGFkZCkge1xuICAgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgICAgIHRvQWRkLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5fYWRkUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIG1vZGVsTWFwW21vZGVsLmNpZF0gPSB0cnVlO1xuICAgICAgICAgICAgc2V0LnB1c2gobW9kZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgc3RhbGUgbW9kZWxzLlxuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1vZGVsID0gdGhpcy5tb2RlbHNbaV07XG4gICAgICAgICAgaWYgKCFtb2RlbE1hcFttb2RlbC5jaWRdKSB0b1JlbW92ZS5wdXNoKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB0aGlzLl9yZW1vdmVNb2RlbHModG9SZW1vdmUsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWUgaWYgc29ydGluZyBpcyBuZWVkZWQsIHVwZGF0ZSBgbGVuZ3RoYCBhbmQgc3BsaWNlIGluIG5ldyBtb2RlbHMuXG4gICAgICB2YXIgb3JkZXJDaGFuZ2VkID0gZmFsc2U7XG4gICAgICB2YXIgcmVwbGFjZSA9ICFzb3J0YWJsZSAmJiBhZGQgJiYgcmVtb3ZlO1xuICAgICAgaWYgKHNldC5sZW5ndGggJiYgcmVwbGFjZSkge1xuICAgICAgICBvcmRlckNoYW5nZWQgPSB0aGlzLmxlbmd0aCAhPSBzZXQubGVuZ3RoIHx8IF8uc29tZSh0aGlzLm1vZGVscywgZnVuY3Rpb24obW9kZWwsIGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIG1vZGVsICE9PSBzZXRbaW5kZXhdO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgc3BsaWNlKHRoaXMubW9kZWxzLCBzZXQsIDApO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aDtcbiAgICAgIH0gZWxzZSBpZiAodG9BZGQubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzb3J0YWJsZSkgc29ydCA9IHRydWU7XG4gICAgICAgIHNwbGljZSh0aGlzLm1vZGVscywgdG9BZGQsIGF0ID09IG51bGwgPyB0aGlzLmxlbmd0aCA6IGF0KTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIC8vIFNpbGVudGx5IHNvcnQgdGhlIGNvbGxlY3Rpb24gaWYgYXBwcm9wcmlhdGUuXG4gICAgICBpZiAoc29ydCkgdGhpcy5zb3J0KHtzaWxlbnQ6IHRydWV9KTtcblxuICAgICAgLy8gVW5sZXNzIHNpbGVuY2VkLCBpdCdzIHRpbWUgdG8gZmlyZSBhbGwgYXBwcm9wcmlhdGUgYWRkL3NvcnQgZXZlbnRzLlxuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9BZGQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoYXQgIT0gbnVsbCkgb3B0aW9ucy5pbmRleCA9IGF0ICsgaTtcbiAgICAgICAgICBtb2RlbCA9IHRvQWRkW2ldO1xuICAgICAgICAgIG1vZGVsLnRyaWdnZXIoJ2FkZCcsIG1vZGVsLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydCB8fCBvcmRlckNoYW5nZWQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAodG9BZGQubGVuZ3RoIHx8IHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIHRoZSBhZGRlZCAob3IgbWVyZ2VkKSBtb2RlbCAob3IgbW9kZWxzKS5cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG4gICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuICAgIC8vIGFueSBncmFudWxhciBgYWRkYCBvciBgcmVtb3ZlYCBldmVudHMuIEZpcmVzIGByZXNldGAgd2hlbiBmaW5pc2hlZC5cbiAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cbiAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcbiAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICBtb2RlbHMgPSB0aGlzLmFkZChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHB1c2g6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgdW5zaGlmdDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiAwfSwgb3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2hpZnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQoMCk7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBTbGljZSBvdXQgYSBzdWItYXJyYXkgb2YgbW9kZWxzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQuXG4gICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHZhciBpZCA9IHRoaXMubW9kZWxJZCh0aGlzLl9pc01vZGVsKG9iaikgPyBvYmouYXR0cmlidXRlcyA6IG9iaik7XG4gICAgICByZXR1cm4gdGhpcy5fYnlJZFtvYmpdIHx8IHRoaXMuX2J5SWRbaWRdIHx8IHRoaXMuX2J5SWRbb2JqLmNpZF07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggKz0gdGhpcy5sZW5ndGg7XG4gICAgICByZXR1cm4gdGhpcy5tb2RlbHNbaW5kZXhdO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gbW9kZWxzIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXMgb2ZcbiAgICAvLyBgZmlsdGVyYC5cbiAgICB3aGVyZTogZnVuY3Rpb24oYXR0cnMsIGZpcnN0KSB7XG4gICAgICByZXR1cm4gdGhpc1tmaXJzdCA/ICdmaW5kJyA6ICdmaWx0ZXInXShhdHRycyk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiB0aGUgZmlyc3QgbW9kZWwgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlc1xuICAgIC8vIG9mIGBmaW5kYC5cbiAgICBmaW5kV2hlcmU6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy53aGVyZShhdHRycywgdHJ1ZSk7XG4gICAgfSxcblxuICAgIC8vIEZvcmNlIHRoZSBjb2xsZWN0aW9uIHRvIHJlLXNvcnQgaXRzZWxmLiBZb3UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgdW5kZXJcbiAgICAvLyBub3JtYWwgY2lyY3Vtc3RhbmNlcywgYXMgdGhlIHNldCB3aWxsIG1haW50YWluIHNvcnQgb3JkZXIgYXMgZWFjaCBpdGVtXG4gICAgLy8gaXMgYWRkZWQuXG4gICAgc29ydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3I7XG4gICAgICBpZiAoIWNvbXBhcmF0b3IpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3InKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBjb21wYXJhdG9yLmxlbmd0aDtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oY29tcGFyYXRvcikpIGNvbXBhcmF0b3IgPSBfLmJpbmQoY29tcGFyYXRvciwgdGhpcyk7XG5cbiAgICAgIC8vIFJ1biBzb3J0IGJhc2VkIG9uIHR5cGUgb2YgYGNvbXBhcmF0b3JgLlxuICAgICAgaWYgKGxlbmd0aCA9PT0gMSB8fCBfLmlzU3RyaW5nKGNvbXBhcmF0b3IpKSB7XG4gICAgICAgIHRoaXMubW9kZWxzID0gdGhpcy5zb3J0QnkoY29tcGFyYXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vZGVscy5zb3J0KGNvbXBhcmF0b3IpO1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUGx1Y2sgYW4gYXR0cmlidXRlIGZyb20gZWFjaCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBwbHVjazogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIF8uaW52b2tlKHRoaXMubW9kZWxzLCAnZ2V0JywgYXR0cik7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBkZWZhdWx0IHNldCBvZiBtb2RlbHMgZm9yIHRoaXMgY29sbGVjdGlvbiwgcmVzZXR0aW5nIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gd2hlbiB0aGV5IGFycml2ZS4gSWYgYHJlc2V0OiB0cnVlYCBpcyBwYXNzZWQsIHRoZSByZXNwb25zZVxuICAgIC8vIGRhdGEgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgYHJlc2V0YCBtZXRob2QgaW5zdGVhZCBvZiBgc2V0YC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHtwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLnJlc2V0ID8gJ3Jlc2V0JyA6ICdzZXQnO1xuICAgICAgICBjb2xsZWN0aW9uW21ldGhvZF0ocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgY29sbGVjdGlvbi50cmlnZ2VyKCdzeW5jJywgY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSBtb2RlbCBpbiB0aGlzIGNvbGxlY3Rpb24uIEFkZCB0aGUgbW9kZWwgdG8gdGhlXG4gICAgLy8gY29sbGVjdGlvbiBpbW1lZGlhdGVseSwgdW5sZXNzIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIGluIHdoaWNoIGNhc2Ugd2VcbiAgICAvLyB3YWl0IGZvciB0aGUgc2VydmVyIHRvIGFncmVlLlxuICAgIGNyZWF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG4gICAgICBtb2RlbCA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoIW1vZGVsKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIXdhaXQpIHRoaXMuYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24obW9kZWwsIHJlc3AsIGNhbGxiYWNrT3B0cykge1xuICAgICAgICBpZiAod2FpdCkgY29sbGVjdGlvbi5hZGQobW9kZWwsIGNhbGxiYWNrT3B0cyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwoY2FsbGJhY2tPcHRzLmNvbnRleHQsIG1vZGVsLCByZXNwLCBjYWxsYmFja09wdHMpO1xuICAgICAgfTtcbiAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gYSBsaXN0IG9mIG1vZGVscyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIHdpdGggYW4gaWRlbnRpY2FsIGxpc3Qgb2YgbW9kZWxzIGFzIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscywge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgY29tcGFyYXRvcjogdGhpcy5jb21wYXJhdG9yXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gRGVmaW5lIGhvdyB0byB1bmlxdWVseSBpZGVudGlmeSBtb2RlbHMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgbW9kZWxJZDogZnVuY3Rpb24gKGF0dHJzKSB7XG4gICAgICByZXR1cm4gYXR0cnNbdGhpcy5tb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGUgfHwgJ2lkJ107XG4gICAgfSxcblxuICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIHJlc2V0IGFsbCBpbnRlcm5hbCBzdGF0ZS4gQ2FsbGVkIHdoZW4gdGhlIGNvbGxlY3Rpb25cbiAgICAvLyBpcyBmaXJzdCBpbml0aWFsaXplZCBvciByZXNldC5cbiAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcbiAgICAgIHRoaXMuX2J5SWQgID0ge307XG4gICAgfSxcblxuICAgIC8vIFByZXBhcmUgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgKG9yIG90aGVyIG1vZGVsKSB0byBiZSBhZGRlZCB0byB0aGlzXG4gICAgLy8gY29sbGVjdGlvbi5cbiAgICBfcHJlcGFyZU1vZGVsOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMuX2lzTW9kZWwoYXR0cnMpKSB7XG4gICAgICAgIGlmICghYXR0cnMuY29sbGVjdGlvbikgYXR0cnMuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBhdHRycztcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgb3B0aW9ucy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBtb2RlbCA9IG5ldyB0aGlzLm1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgIGlmICghbW9kZWwudmFsaWRhdGlvbkVycm9yKSByZXR1cm4gbW9kZWw7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBtb2RlbC52YWxpZGF0aW9uRXJyb3IsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGJ5IGJvdGggcmVtb3ZlIGFuZCBzZXQuXG4gICAgX3JlbW92ZU1vZGVsczogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVtb3ZlZCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5nZXQobW9kZWxzW2ldKTtcbiAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKG1vZGVsKTtcbiAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcblxuICAgICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuICAgICAgICAgIG1vZGVsLnRyaWdnZXIoJ3JlbW92ZScsIG1vZGVsLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZWQucHVzaChtb2RlbCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZVJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVtb3ZlZC5sZW5ndGggPyByZW1vdmVkIDogZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIE1ldGhvZCBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3Qgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBtb2RlbCBmb3JcbiAgICAvLyB0aGUgcHVycG9zZXMgb2YgYWRkaW5nIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgIF9pc01vZGVsOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgIHJldHVybiBtb2RlbCBpbnN0YW5jZW9mIE1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYnlJZFttb2RlbC5jaWRdID0gbW9kZWw7XG4gICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcbiAgICAgIG1vZGVsLm9uKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gc2V2ZXIgYSBtb2RlbCdzIHRpZXMgdG8gYSBjb2xsZWN0aW9uLlxuICAgIF9yZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKGlkICE9IG51bGwpIGRlbGV0ZSB0aGlzLl9ieUlkW2lkXTtcbiAgICAgIGlmICh0aGlzID09PSBtb2RlbC5jb2xsZWN0aW9uKSBkZWxldGUgbW9kZWwuY29sbGVjdGlvbjtcbiAgICAgIG1vZGVsLm9mZignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBldmVyeSB0aW1lIGEgbW9kZWwgaW4gdGhlIHNldCBmaXJlcyBhbiBldmVudC5cbiAgICAvLyBTZXRzIG5lZWQgdG8gdXBkYXRlIHRoZWlyIGluZGV4ZXMgd2hlbiBtb2RlbHMgY2hhbmdlIGlkcy4gQWxsIG90aGVyXG4gICAgLy8gZXZlbnRzIHNpbXBseSBwcm94eSB0aHJvdWdoLiBcImFkZFwiIGFuZCBcInJlbW92ZVwiIGV2ZW50cyB0aGF0IG9yaWdpbmF0ZVxuICAgIC8vIGluIG90aGVyIGNvbGxlY3Rpb25zIGFyZSBpZ25vcmVkLlxuICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlbCwgY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgaWYgKChldmVudCA9PT0gJ2FkZCcgfHwgZXZlbnQgPT09ICdyZW1vdmUnKSAmJiBjb2xsZWN0aW9uICE9PSB0aGlzKSByZXR1cm47XG4gICAgICBpZiAoZXZlbnQgPT09ICdkZXN0cm95JykgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGV2ZW50ID09PSAnY2hhbmdlJykge1xuICAgICAgICB2YXIgcHJldklkID0gdGhpcy5tb2RlbElkKG1vZGVsLnByZXZpb3VzQXR0cmlidXRlcygpKTtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgICBpZiAocHJldklkICE9PSBpZCkge1xuICAgICAgICAgIGlmIChwcmV2SWQgIT0gbnVsbCkgZGVsZXRlIHRoaXMuX2J5SWRbcHJldklkXTtcbiAgICAgICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBDb2xsZWN0aW9uLlxuICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuICAvLyByaWdodCBoZXJlOlxuICB2YXIgY29sbGVjdGlvbk1ldGhvZHMgPSB7IGZvckVhY2g6IDMsIGVhY2g6IDMsIG1hcDogMywgY29sbGVjdDogMywgcmVkdWNlOiA0LFxuICAgICAgZm9sZGw6IDQsIGluamVjdDogNCwgcmVkdWNlUmlnaHQ6IDQsIGZvbGRyOiA0LCBmaW5kOiAzLCBkZXRlY3Q6IDMsIGZpbHRlcjogMyxcbiAgICAgIHNlbGVjdDogMywgcmVqZWN0OiAzLCBldmVyeTogMywgYWxsOiAzLCBzb21lOiAzLCBhbnk6IDMsIGluY2x1ZGU6IDMsIGluY2x1ZGVzOiAzLFxuICAgICAgY29udGFpbnM6IDMsIGludm9rZTogMCwgbWF4OiAzLCBtaW46IDMsIHRvQXJyYXk6IDEsIHNpemU6IDEsIGZpcnN0OiAzLFxuICAgICAgaGVhZDogMywgdGFrZTogMywgaW5pdGlhbDogMywgcmVzdDogMywgdGFpbDogMywgZHJvcDogMywgbGFzdDogMyxcbiAgICAgIHdpdGhvdXQ6IDAsIGRpZmZlcmVuY2U6IDAsIGluZGV4T2Y6IDMsIHNodWZmbGU6IDEsIGxhc3RJbmRleE9mOiAzLFxuICAgICAgaXNFbXB0eTogMSwgY2hhaW46IDEsIHNhbXBsZTogMywgcGFydGl0aW9uOiAzLCBncm91cEJ5OiAzLCBjb3VudEJ5OiAzLFxuICAgICAgc29ydEJ5OiAzLCBpbmRleEJ5OiAzfTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG4gIGFkZFVuZGVyc2NvcmVNZXRob2RzKENvbGxlY3Rpb24sIGNvbGxlY3Rpb25NZXRob2RzLCAnbW9kZWxzJyk7XG5cbiAgLy8gQmFja2JvbmUuVmlld1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG4gIC8vIGlzIHNpbXBseSBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGxvZ2ljYWwgY2h1bmsgb2YgVUkgaW4gdGhlXG4gIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuICAvLyBVSSBhcyBhICoqVmlldyoqIGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgRE9NIGV2ZW50cyBkZWNsYXJhdGl2ZWx5LCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblxuICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcbiAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cbiAgdmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuICAgIF8uZXh0ZW5kKHRoaXMsIF8ucGljayhvcHRpb25zLCB2aWV3T3B0aW9ucykpO1xuICAgIHRoaXMuX2Vuc3VyZUVsZW1lbnQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggdG8gc3BsaXQga2V5cyBmb3IgYGRlbGVnYXRlYC5cbiAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcblxuICAvLyBMaXN0IG9mIHZpZXcgb3B0aW9ucyB0byBiZSBzZXQgYXMgcHJvcGVydGllcy5cbiAgdmFyIHZpZXdPcHRpb25zID0gWydtb2RlbCcsICdjb2xsZWN0aW9uJywgJ2VsJywgJ2lkJywgJ2F0dHJpYnV0ZXMnLCAnY2xhc3NOYW1lJywgJ3RhZ05hbWUnLCAnZXZlbnRzJ107XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlZpZXcqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChWaWV3LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBgdGFnTmFtZWAgb2YgYSBWaWV3J3MgZWxlbWVudCBpcyBgXCJkaXZcImAuXG4gICAgdGFnTmFtZTogJ2RpdicsXG5cbiAgICAvLyBqUXVlcnkgZGVsZWdhdGUgZm9yIGVsZW1lbnQgbG9va3VwLCBzY29wZWQgdG8gRE9NIGVsZW1lbnRzIHdpdGhpbiB0aGVcbiAgICAvLyBjdXJyZW50IHZpZXcuIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCB0byBnbG9iYWwgbG9va3VwcyB3aGVyZSBwb3NzaWJsZS5cbiAgICAkOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyAqKnJlbmRlcioqIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgeW91ciB2aWV3IHNob3VsZCBvdmVycmlkZSwgaW4gb3JkZXJcbiAgICAvLyB0byBwb3B1bGF0ZSBpdHMgZWxlbWVudCAoYHRoaXMuZWxgKSwgd2l0aCB0aGUgYXBwcm9wcmlhdGUgSFRNTC4gVGhlXG4gICAgLy8gY29udmVudGlvbiBpcyBmb3IgKipyZW5kZXIqKiB0byBhbHdheXMgcmV0dXJuIGB0aGlzYC5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcgYnkgdGFraW5nIHRoZSBlbGVtZW50IG91dCBvZiB0aGUgRE9NLCBhbmQgcmVtb3ZpbmcgYW55XG4gICAgLy8gYXBwbGljYWJsZSBCYWNrYm9uZS5FdmVudHMgbGlzdGVuZXJzLlxuICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9yZW1vdmVFbGVtZW50KCk7XG4gICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgdGhpcyB2aWV3J3MgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudCBhbmQgYWxsIGV2ZW50IGxpc3RlbmVyc1xuICAgIC8vIGF0dGFjaGVkIHRvIGl0LiBFeHBvc2VkIGZvciBzdWJjbGFzc2VzIHVzaW5nIGFuIGFsdGVybmF0aXZlIERPTVxuICAgIC8vIG1hbmlwdWxhdGlvbiBBUEkuXG4gICAgX3JlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgfSxcblxuICAgIC8vIENoYW5nZSB0aGUgdmlldydzIGVsZW1lbnQgKGB0aGlzLmVsYCBwcm9wZXJ0eSkgYW5kIHJlLWRlbGVnYXRlIHRoZVxuICAgIC8vIHZpZXcncyBldmVudHMgb24gdGhlIG5ldyBlbGVtZW50LlxuICAgIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgdGhpcy5fc2V0RWxlbWVudChlbGVtZW50KTtcbiAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGVzIHRoZSBgdGhpcy5lbGAgYW5kIGB0aGlzLiRlbGAgcmVmZXJlbmNlcyBmb3IgdGhpcyB2aWV3IHVzaW5nIHRoZVxuICAgIC8vIGdpdmVuIGBlbGAuIGBlbGAgY2FuIGJlIGEgQ1NTIHNlbGVjdG9yIG9yIGFuIEhUTUwgc3RyaW5nLCBhIGpRdWVyeVxuICAgIC8vIGNvbnRleHQgb3IgYW4gZWxlbWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhpcyB0byB1dGlsaXplIGFuXG4gICAgLy8gYWx0ZXJuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiBBUEkgYW5kIGFyZSBvbmx5IHJlcXVpcmVkIHRvIHNldCB0aGVcbiAgICAvLyBgdGhpcy5lbGAgcHJvcGVydHkuXG4gICAgX3NldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICB0aGlzLiRlbCA9IGVsIGluc3RhbmNlb2YgQmFja2JvbmUuJCA/IGVsIDogQmFja2JvbmUuJChlbCk7XG4gICAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG4gICAgfSxcblxuICAgIC8vIFNldCBjYWxsYmFja3MsIHdoZXJlIGB0aGlzLmV2ZW50c2AgaXMgYSBoYXNoIG9mXG4gICAgLy9cbiAgICAvLyAqe1wiZXZlbnQgc2VsZWN0b3JcIjogXCJjYWxsYmFja1wifSpcbiAgICAvL1xuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgJ21vdXNlZG93biAudGl0bGUnOiAgJ2VkaXQnLFxuICAgIC8vICAgICAgICdjbGljayAuYnV0dG9uJzogICAgICdzYXZlJyxcbiAgICAvLyAgICAgICAnY2xpY2sgLm9wZW4nOiAgICAgICBmdW5jdGlvbihlKSB7IC4uLiB9XG4gICAgLy8gICAgIH1cbiAgICAvL1xuICAgIC8vIHBhaXJzLiBDYWxsYmFja3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgdmlldywgd2l0aCBgdGhpc2Agc2V0IHByb3Blcmx5LlxuICAgIC8vIFVzZXMgZXZlbnQgZGVsZWdhdGlvbiBmb3IgZWZmaWNpZW5jeS5cbiAgICAvLyBPbWl0dGluZyB0aGUgc2VsZWN0b3IgYmluZHMgdGhlIGV2ZW50IHRvIGB0aGlzLmVsYC5cbiAgICBkZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgICBldmVudHMgfHwgKGV2ZW50cyA9IF8ucmVzdWx0KHRoaXMsICdldmVudHMnKSk7XG4gICAgICBpZiAoIWV2ZW50cykgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBldmVudHMpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IGV2ZW50c1trZXldO1xuICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihtZXRob2QpKSBtZXRob2QgPSB0aGlzW21ldGhvZF07XG4gICAgICAgIGlmICghbWV0aG9kKSBjb250aW51ZTtcbiAgICAgICAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGRlbGVnYXRlRXZlbnRTcGxpdHRlcik7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUobWF0Y2hbMV0sIG1hdGNoWzJdLCBfLmJpbmQobWV0aG9kLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSB2aWV3J3MgZWxlbWVudCAob3IgYSBjaGlsZCBlbGVtZW50XG4gICAgLy8gdXNpbmcgYHNlbGVjdG9yYCkuIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLFxuICAgIC8vIGBibHVyYCwgYW5kIG5vdCBgY2hhbmdlYCwgYHN1Ym1pdGAsIGFuZCBgcmVzZXRgIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgIGRlbGVnYXRlOiBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBsaXN0ZW5lcikge1xuICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lICsgJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCwgc2VsZWN0b3IsIGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhcnMgYWxsIGNhbGxiYWNrcyBwcmV2aW91c2x5IGJvdW5kIHRvIHRoZSB2aWV3IGJ5IGBkZWxlZ2F0ZUV2ZW50c2AuXG4gICAgLy8gWW91IHVzdWFsbHkgZG9uJ3QgbmVlZCB0byB1c2UgdGhpcywgYnV0IG1heSB3aXNoIHRvIGlmIHlvdSBoYXZlIG11bHRpcGxlXG4gICAgLy8gQmFja2JvbmUgdmlld3MgYXR0YWNoZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQuXG4gICAgdW5kZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy4kZWwpIHRoaXMuJGVsLm9mZignLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBBIGZpbmVyLWdyYWluZWQgYHVuZGVsZWdhdGVFdmVudHNgIGZvciByZW1vdmluZyBhIHNpbmdsZSBkZWxlZ2F0ZWQgZXZlbnQuXG4gICAgLy8gYHNlbGVjdG9yYCBhbmQgYGxpc3RlbmVyYCBhcmUgYm90aCBvcHRpb25hbC5cbiAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBsaXN0ZW5lcikge1xuICAgICAgdGhpcy4kZWwub2ZmKGV2ZW50TmFtZSArICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQsIHNlbGVjdG9yLCBsaXN0ZW5lcik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUHJvZHVjZXMgYSBET00gZWxlbWVudCB0byBiZSBhc3NpZ25lZCB0byB5b3VyIHZpZXcuIEV4cG9zZWQgZm9yXG4gICAgLy8gc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSS5cbiAgICBfY3JlYXRlRWxlbWVudDogZnVuY3Rpb24odGFnTmFtZSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgfSxcblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBWaWV3IGhhcyBhIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgIC8vIElmIGB0aGlzLmVsYCBpcyBhIHN0cmluZywgcGFzcyBpdCB0aHJvdWdoIGAkKClgLCB0YWtlIHRoZSBmaXJzdFxuICAgIC8vIG1hdGNoaW5nIGVsZW1lbnQsIGFuZCByZS1hc3NpZ24gaXQgdG8gYGVsYC4gT3RoZXJ3aXNlLCBjcmVhdGVcbiAgICAvLyBhbiBlbGVtZW50IGZyb20gdGhlIGBpZGAsIGBjbGFzc05hbWVgIGFuZCBgdGFnTmFtZWAgcHJvcGVydGllcy5cbiAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdmFyIGF0dHJzID0gXy5leHRlbmQoe30sIF8ucmVzdWx0KHRoaXMsICdhdHRyaWJ1dGVzJykpO1xuICAgICAgICBpZiAodGhpcy5pZCkgYXR0cnMuaWQgPSBfLnJlc3VsdCh0aGlzLCAnaWQnKTtcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSBhdHRyc1snY2xhc3MnXSA9IF8ucmVzdWx0KHRoaXMsICdjbGFzc05hbWUnKTtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50KHRoaXMuX2NyZWF0ZUVsZW1lbnQoXy5yZXN1bHQodGhpcywgJ3RhZ05hbWUnKSkpO1xuICAgICAgICB0aGlzLl9zZXRBdHRyaWJ1dGVzKGF0dHJzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudChfLnJlc3VsdCh0aGlzLCAnZWwnKSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIFNldCBhdHRyaWJ1dGVzIGZyb20gYSBoYXNoIG9uIHRoaXMgdmlldydzIGVsZW1lbnQuICBFeHBvc2VkIGZvclxuICAgIC8vIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiBBUEkuXG4gICAgX3NldEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGF0dHJpYnV0ZXMpIHtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYXR0cmlidXRlcyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLnN5bmNcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIE92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gY2hhbmdlIHRoZSBtYW5uZXIgaW4gd2hpY2ggQmFja2JvbmUgcGVyc2lzdHNcbiAgLy8gbW9kZWxzIHRvIHRoZSBzZXJ2ZXIuIFlvdSB3aWxsIGJlIHBhc3NlZCB0aGUgdHlwZSBvZiByZXF1ZXN0LCBhbmQgdGhlXG4gIC8vIG1vZGVsIGluIHF1ZXN0aW9uLiBCeSBkZWZhdWx0LCBtYWtlcyBhIFJFU1RmdWwgQWpheCByZXF1ZXN0XG4gIC8vIHRvIHRoZSBtb2RlbCdzIGB1cmwoKWAuIFNvbWUgcG9zc2libGUgY3VzdG9taXphdGlvbnMgY291bGQgYmU6XG4gIC8vXG4gIC8vICogVXNlIGBzZXRUaW1lb3V0YCB0byBiYXRjaCByYXBpZC1maXJlIHVwZGF0ZXMgaW50byBhIHNpbmdsZSByZXF1ZXN0LlxuICAvLyAqIFNlbmQgdXAgdGhlIG1vZGVscyBhcyBYTUwgaW5zdGVhZCBvZiBKU09OLlxuICAvLyAqIFBlcnNpc3QgbW9kZWxzIHZpYSBXZWJTb2NrZXRzIGluc3RlYWQgb2YgQWpheC5cbiAgLy9cbiAgLy8gVHVybiBvbiBgQmFja2JvbmUuZW11bGF0ZUhUVFBgIGluIG9yZGVyIHRvIHNlbmQgYFBVVGAgYW5kIGBERUxFVEVgIHJlcXVlc3RzXG4gIC8vIGFzIGBQT1NUYCwgd2l0aCBhIGBfbWV0aG9kYCBwYXJhbWV0ZXIgY29udGFpbmluZyB0aGUgdHJ1ZSBIVFRQIG1ldGhvZCxcbiAgLy8gYXMgd2VsbCBhcyBhbGwgcmVxdWVzdHMgd2l0aCB0aGUgYm9keSBhcyBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYFxuICAvLyBpbnN0ZWFkIG9mIGBhcHBsaWNhdGlvbi9qc29uYCB3aXRoIHRoZSBtb2RlbCBpbiBhIHBhcmFtIG5hbWVkIGBtb2RlbGAuXG4gIC8vIFVzZWZ1bCB3aGVuIGludGVyZmFjaW5nIHdpdGggc2VydmVyLXNpZGUgbGFuZ3VhZ2VzIGxpa2UgKipQSFAqKiB0aGF0IG1ha2VcbiAgLy8gaXQgZGlmZmljdWx0IHRvIHJlYWQgdGhlIGJvZHkgb2YgYFBVVGAgcmVxdWVzdHMuXG4gIEJhY2tib25lLnN5bmMgPSBmdW5jdGlvbihtZXRob2QsIG1vZGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSBtZXRob2RNYXBbbWV0aG9kXTtcblxuICAgIC8vIERlZmF1bHQgb3B0aW9ucywgdW5sZXNzIHNwZWNpZmllZC5cbiAgICBfLmRlZmF1bHRzKG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSksIHtcbiAgICAgIGVtdWxhdGVIVFRQOiBCYWNrYm9uZS5lbXVsYXRlSFRUUCxcbiAgICAgIGVtdWxhdGVKU09OOiBCYWNrYm9uZS5lbXVsYXRlSlNPTlxuICAgIH0pO1xuXG4gICAgLy8gRGVmYXVsdCBKU09OLXJlcXVlc3Qgb3B0aW9ucy5cbiAgICB2YXIgcGFyYW1zID0ge3R5cGU6IHR5cGUsIGRhdGFUeXBlOiAnanNvbid9O1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSBhIFVSTC5cbiAgICBpZiAoIW9wdGlvbnMudXJsKSB7XG4gICAgICBwYXJhbXMudXJsID0gXy5yZXN1bHQobW9kZWwsICd1cmwnKSB8fCB1cmxFcnJvcigpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgdGhlIGFwcHJvcHJpYXRlIHJlcXVlc3QgZGF0YS5cbiAgICBpZiAob3B0aW9ucy5kYXRhID09IG51bGwgJiYgbW9kZWwgJiYgKG1ldGhvZCA9PT0gJ2NyZWF0ZScgfHwgbWV0aG9kID09PSAndXBkYXRlJyB8fCBtZXRob2QgPT09ICdwYXRjaCcpKSB7XG4gICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICBwYXJhbXMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYXR0cnMgfHwgbW9kZWwudG9KU09OKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBKU09OIGJ5IGVuY29kaW5nIHRoZSByZXF1ZXN0IGludG8gYW4gSFRNTC1mb3JtLlxuICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcbiAgICAgIHBhcmFtcy5kYXRhID0gcGFyYW1zLmRhdGEgPyB7bW9kZWw6IHBhcmFtcy5kYXRhfSA6IHt9O1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEhUVFAgYnkgbWltaWNraW5nIHRoZSBIVFRQIG1ldGhvZCB3aXRoIGBfbWV0aG9kYFxuICAgIC8vIEFuZCBhbiBgWC1IVFRQLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICAgIGlmIChvcHRpb25zLmVtdWxhdGVIVFRQICYmICh0eXBlID09PSAnUFVUJyB8fCB0eXBlID09PSAnREVMRVRFJyB8fCB0eXBlID09PSAnUEFUQ0gnKSkge1xuICAgICAgcGFyYW1zLnR5cGUgPSAnUE9TVCc7XG4gICAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikgcGFyYW1zLmRhdGEuX21ldGhvZCA9IHR5cGU7XG4gICAgICB2YXIgYmVmb3JlU2VuZCA9IG9wdGlvbnMuYmVmb3JlU2VuZDtcbiAgICAgIG9wdGlvbnMuYmVmb3JlU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1IVFRQLU1ldGhvZC1PdmVycmlkZScsIHR5cGUpO1xuICAgICAgICBpZiAoYmVmb3JlU2VuZCkgcmV0dXJuIGJlZm9yZVNlbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgcHJvY2VzcyBkYXRhIG9uIGEgbm9uLUdFVCByZXF1ZXN0LlxuICAgIGlmIChwYXJhbXMudHlwZSAhPT0gJ0dFVCcgJiYgIW9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5wcm9jZXNzRGF0YSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFBhc3MgYWxvbmcgYHRleHRTdGF0dXNgIGFuZCBgZXJyb3JUaHJvd25gIGZyb20galF1ZXJ5LlxuICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgIG9wdGlvbnMudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XG4gICAgICBvcHRpb25zLmVycm9yVGhyb3duID0gZXJyb3JUaHJvd247XG4gICAgICBpZiAoZXJyb3IpIGVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcbiAgICB9O1xuXG4gICAgLy8gTWFrZSB0aGUgcmVxdWVzdCwgYWxsb3dpbmcgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55IEFqYXggb3B0aW9ucy5cbiAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgPSBCYWNrYm9uZS5hamF4KF8uZXh0ZW5kKHBhcmFtcywgb3B0aW9ucykpO1xuICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnLCBtb2RlbCwgeGhyLCBvcHRpb25zKTtcbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIC8vIE1hcCBmcm9tIENSVUQgdG8gSFRUUCBmb3Igb3VyIGRlZmF1bHQgYEJhY2tib25lLnN5bmNgIGltcGxlbWVudGF0aW9uLlxuICB2YXIgbWV0aG9kTWFwID0ge1xuICAgICdjcmVhdGUnOiAnUE9TVCcsXG4gICAgJ3VwZGF0ZSc6ICdQVVQnLFxuICAgICdwYXRjaCc6ICAnUEFUQ0gnLFxuICAgICdkZWxldGUnOiAnREVMRVRFJyxcbiAgICAncmVhZCc6ICAgJ0dFVCdcbiAgfTtcblxuICAvLyBTZXQgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgYEJhY2tib25lLmFqYXhgIHRvIHByb3h5IHRocm91Z2ggdG8gYCRgLlxuICAvLyBPdmVycmlkZSB0aGlzIGlmIHlvdSdkIGxpa2UgdG8gdXNlIGEgZGlmZmVyZW50IGxpYnJhcnkuXG4gIEJhY2tib25lLmFqYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuJC5hamF4LmFwcGx5KEJhY2tib25lLiQsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQmFja2JvbmUuUm91dGVyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJvdXRlcnMgbWFwIGZhdXgtVVJMcyB0byBhY3Rpb25zLCBhbmQgZmlyZSBldmVudHMgd2hlbiByb3V0ZXMgYXJlXG4gIC8vIG1hdGNoZWQuIENyZWF0aW5nIGEgbmV3IG9uZSBzZXRzIGl0cyBgcm91dGVzYCBoYXNoLCBpZiBub3Qgc2V0IHN0YXRpY2FsbHkuXG4gIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBpZiAob3B0aW9ucy5yb3V0ZXMpIHRoaXMucm91dGVzID0gb3B0aW9ucy5yb3V0ZXM7XG4gICAgdGhpcy5fYmluZFJvdXRlcygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENhY2hlZCByZWd1bGFyIGV4cHJlc3Npb25zIGZvciBtYXRjaGluZyBuYW1lZCBwYXJhbSBwYXJ0cyBhbmQgc3BsYXR0ZWRcbiAgLy8gcGFydHMgb2Ygcm91dGUgc3RyaW5ncy5cbiAgdmFyIG9wdGlvbmFsUGFyYW0gPSAvXFwoKC4qPylcXCkvZztcbiAgdmFyIG5hbWVkUGFyYW0gICAgPSAvKFxcKFxcPyk/OlxcdysvZztcbiAgdmFyIHNwbGF0UGFyYW0gICAgPSAvXFwqXFx3Ky9nO1xuICB2YXIgZXNjYXBlUmVnRXhwICA9IC9bXFwte31cXFtcXF0rPy4sXFxcXFxcXiR8I1xcc10vZztcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuUm91dGVyKiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoUm91dGVyLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBNYW51YWxseSBiaW5kIGEgc2luZ2xlIG5hbWVkIHJvdXRlIHRvIGEgY2FsbGJhY2suIEZvciBleGFtcGxlOlxuICAgIC8vXG4gICAgLy8gICAgIHRoaXMucm91dGUoJ3NlYXJjaC86cXVlcnkvcDpudW0nLCAnc2VhcmNoJywgZnVuY3Rpb24ocXVlcnksIG51bSkge1xuICAgIC8vICAgICAgIC4uLlxuICAgIC8vICAgICB9KTtcbiAgICAvL1xuICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmICghXy5pc1JlZ0V4cChyb3V0ZSkpIHJvdXRlID0gdGhpcy5fcm91dGVUb1JlZ0V4cChyb3V0ZSk7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG5hbWUpKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmFtZTtcbiAgICAgICAgbmFtZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSB0aGlzW25hbWVdO1xuICAgICAgdmFyIHJvdXRlciA9IHRoaXM7XG4gICAgICBCYWNrYm9uZS5oaXN0b3J5LnJvdXRlKHJvdXRlLCBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgICB2YXIgYXJncyA9IHJvdXRlci5fZXh0cmFjdFBhcmFtZXRlcnMocm91dGUsIGZyYWdtZW50KTtcbiAgICAgICAgaWYgKHJvdXRlci5leGVjdXRlKGNhbGxiYWNrLCBhcmdzLCBuYW1lKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICByb3V0ZXIudHJpZ2dlci5hcHBseShyb3V0ZXIsIFsncm91dGU6JyArIG5hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgcm91dGVyLnRyaWdnZXIoJ3JvdXRlJywgbmFtZSwgYXJncyk7XG4gICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS50cmlnZ2VyKCdyb3V0ZScsIHJvdXRlciwgbmFtZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEV4ZWN1dGUgYSByb3V0ZSBoYW5kbGVyIHdpdGggdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnMuICBUaGlzIGlzIGFuXG4gICAgLy8gZXhjZWxsZW50IHBsYWNlIHRvIGRvIHByZS1yb3V0ZSBzZXR1cCBvciBwb3N0LXJvdXRlIGNsZWFudXAuXG4gICAgZXhlY3V0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGFyZ3MsIG5hbWUpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG4gICAgfSxcblxuICAgIC8vIFNpbXBsZSBwcm94eSB0byBgQmFja2JvbmUuaGlzdG9yeWAgdG8gc2F2ZSBhIGZyYWdtZW50IGludG8gdGhlIGhpc3RvcnkuXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBCaW5kIGFsbCBkZWZpbmVkIHJvdXRlcyB0byBgQmFja2JvbmUuaGlzdG9yeWAuIFdlIGhhdmUgdG8gcmV2ZXJzZSB0aGVcbiAgICAvLyBvcmRlciBvZiB0aGUgcm91dGVzIGhlcmUgdG8gc3VwcG9ydCBiZWhhdmlvciB3aGVyZSB0aGUgbW9zdCBnZW5lcmFsXG4gICAgLy8gcm91dGVzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBib3R0b20gb2YgdGhlIHJvdXRlIG1hcC5cbiAgICBfYmluZFJvdXRlczogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMucm91dGVzKSByZXR1cm47XG4gICAgICB0aGlzLnJvdXRlcyA9IF8ucmVzdWx0KHRoaXMsICdyb3V0ZXMnKTtcbiAgICAgIHZhciByb3V0ZSwgcm91dGVzID0gXy5rZXlzKHRoaXMucm91dGVzKTtcbiAgICAgIHdoaWxlICgocm91dGUgPSByb3V0ZXMucG9wKCkpICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5yb3V0ZShyb3V0ZSwgdGhpcy5yb3V0ZXNbcm91dGVdKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQ29udmVydCBhIHJvdXRlIHN0cmluZyBpbnRvIGEgcmVndWxhciBleHByZXNzaW9uLCBzdWl0YWJsZSBmb3IgbWF0Y2hpbmdcbiAgICAvLyBhZ2FpbnN0IHRoZSBjdXJyZW50IGxvY2F0aW9uIGhhc2guXG4gICAgX3JvdXRlVG9SZWdFeHA6IGZ1bmN0aW9uKHJvdXRlKSB7XG4gICAgICByb3V0ZSA9IHJvdXRlLnJlcGxhY2UoZXNjYXBlUmVnRXhwLCAnXFxcXCQmJylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShvcHRpb25hbFBhcmFtLCAnKD86JDEpPycpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2UobmFtZWRQYXJhbSwgZnVuY3Rpb24obWF0Y2gsIG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uYWwgPyBtYXRjaCA6ICcoW14vP10rKSc7XG4gICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShzcGxhdFBhcmFtLCAnKFteP10qPyknKTtcbiAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHJvdXRlICsgJyg/OlxcXFw/KFtcXFxcc1xcXFxTXSopKT8kJyk7XG4gICAgfSxcblxuICAgIC8vIEdpdmVuIGEgcm91dGUsIGFuZCBhIFVSTCBmcmFnbWVudCB0aGF0IGl0IG1hdGNoZXMsIHJldHVybiB0aGUgYXJyYXkgb2ZcbiAgICAvLyBleHRyYWN0ZWQgZGVjb2RlZCBwYXJhbWV0ZXJzLiBFbXB0eSBvciB1bm1hdGNoZWQgcGFyYW1ldGVycyB3aWxsIGJlXG4gICAgLy8gdHJlYXRlZCBhcyBgbnVsbGAgdG8gbm9ybWFsaXplIGNyb3NzLWJyb3dzZXIgYmVoYXZpb3IuXG4gICAgX2V4dHJhY3RQYXJhbWV0ZXJzOiBmdW5jdGlvbihyb3V0ZSwgZnJhZ21lbnQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSByb3V0ZS5leGVjKGZyYWdtZW50KS5zbGljZSgxKTtcbiAgICAgIHJldHVybiBfLm1hcChwYXJhbXMsIGZ1bmN0aW9uKHBhcmFtLCBpKSB7XG4gICAgICAgIC8vIERvbid0IGRlY29kZSB0aGUgc2VhcmNoIHBhcmFtcy5cbiAgICAgICAgaWYgKGkgPT09IHBhcmFtcy5sZW5ndGggLSAxKSByZXR1cm4gcGFyYW0gfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIHBhcmFtID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtKSA6IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuSGlzdG9yeVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSGFuZGxlcyBjcm9zcy1icm93c2VyIGhpc3RvcnkgbWFuYWdlbWVudCwgYmFzZWQgb24gZWl0aGVyXG4gIC8vIFtwdXNoU3RhdGVdKGh0dHA6Ly9kaXZlaW50b2h0bWw1LmluZm8vaGlzdG9yeS5odG1sKSBhbmQgcmVhbCBVUkxzLCBvclxuICAvLyBbb25oYXNoY2hhbmdlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS93aW5kb3cub25oYXNoY2hhbmdlKVxuICAvLyBhbmQgVVJMIGZyYWdtZW50cy4gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgbmVpdGhlciAob2xkIElFLCBuYXRjaCksXG4gIC8vIGZhbGxzIGJhY2sgdG8gcG9sbGluZy5cbiAgdmFyIEhpc3RvcnkgPSBCYWNrYm9uZS5IaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgIHRoaXMuY2hlY2tVcmwgPSBfLmJpbmQodGhpcy5jaGVja1VybCwgdGhpcyk7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBgSGlzdG9yeWAgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgYnJvd3Nlci5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgYSBsZWFkaW5nIGhhc2gvc2xhc2ggYW5kIHRyYWlsaW5nIHNwYWNlLlxuICB2YXIgcm91dGVTdHJpcHBlciA9IC9eWyNcXC9dfFxccyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcy5cbiAgdmFyIHJvb3RTdHJpcHBlciA9IC9eXFwvK3xcXC8rJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIHVybHMgb2YgaGFzaC5cbiAgdmFyIHBhdGhTdHJpcHBlciA9IC8jLiokLztcblxuICAvLyBIYXMgdGhlIGhpc3RvcnkgaGFuZGxpbmcgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQ/XG4gIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5IaXN0b3J5KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoSGlzdG9yeS5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgaW50ZXJ2YWwgdG8gcG9sbCBmb3IgaGFzaCBjaGFuZ2VzLCBpZiBuZWNlc3NhcnksIGlzXG4gICAgLy8gdHdlbnR5IHRpbWVzIGEgc2Vjb25kLlxuICAgIGludGVydmFsOiA1MCxcblxuICAgIC8vIEFyZSB3ZSBhdCB0aGUgYXBwIHJvb3Q/XG4gICAgYXRSb290OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoID0gdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpO1xuICAgICAgcmV0dXJuIHBhdGggPT09IHRoaXMucm9vdCAmJiAhdGhpcy5nZXRTZWFyY2goKTtcbiAgICB9LFxuXG4gICAgLy8gRG9lcyB0aGUgcGF0aG5hbWUgbWF0Y2ggdGhlIHJvb3Q/XG4gICAgbWF0Y2hSb290OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoID0gdGhpcy5kZWNvZGVGcmFnbWVudCh0aGlzLmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgIHZhciByb290ID0gcGF0aC5zbGljZSgwLCB0aGlzLnJvb3QubGVuZ3RoIC0gMSkgKyAnLyc7XG4gICAgICByZXR1cm4gcm9vdCA9PT0gdGhpcy5yb290O1xuICAgIH0sXG5cbiAgICAvLyBVbmljb2RlIGNoYXJhY3RlcnMgaW4gYGxvY2F0aW9uLnBhdGhuYW1lYCBhcmUgcGVyY2VudCBlbmNvZGVkIHNvIHRoZXkncmVcbiAgICAvLyBkZWNvZGVkIGZvciBjb21wYXJpc29uLiBgJTI1YCBzaG91bGQgbm90IGJlIGRlY29kZWQgc2luY2UgaXQgbWF5IGJlIHBhcnRcbiAgICAvLyBvZiBhbiBlbmNvZGVkIHBhcmFtZXRlci5cbiAgICBkZWNvZGVGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIHJldHVybiBkZWNvZGVVUkkoZnJhZ21lbnQucmVwbGFjZSgvJTI1L2csICclMjUyNScpKTtcbiAgICB9LFxuXG4gICAgLy8gSW4gSUU2LCB0aGUgaGFzaCBmcmFnbWVudCBhbmQgc2VhcmNoIHBhcmFtcyBhcmUgaW5jb3JyZWN0IGlmIHRoZVxuICAgIC8vIGZyYWdtZW50IGNvbnRhaW5zIGA/YC5cbiAgICBnZXRTZWFyY2g6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoID0gdGhpcy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sICcnKS5tYXRjaCgvXFw/LisvKTtcbiAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogJyc7XG4gICAgfSxcblxuICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcbiAgICAvLyBpbiBGaXJlZm94IHdoZXJlIGxvY2F0aW9uLmhhc2ggd2lsbCBhbHdheXMgYmUgZGVjb2RlZC5cbiAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHBhdGhuYW1lIGFuZCBzZWFyY2ggcGFyYW1zLCB3aXRob3V0IHRoZSByb290LlxuICAgIGdldFBhdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGggPSB0aGlzLmRlY29kZUZyYWdtZW50KFxuICAgICAgICB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lICsgdGhpcy5nZXRTZWFyY2goKVxuICAgICAgKS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoIC0gMSk7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc2xpY2UoMSkgOiBwYXRoO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQgZnJvbSB0aGUgcGF0aCBvciBoYXNoLlxuICAgIGdldEZyYWdtZW50OiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgaWYgKGZyYWdtZW50ID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShyb3V0ZVN0cmlwcGVyLCAnJyk7XG4gICAgfSxcblxuICAgIC8vIFN0YXJ0IHRoZSBoYXNoIGNoYW5nZSBoYW5kbGluZywgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgY3VycmVudCBVUkwgbWF0Y2hlc1xuICAgIC8vIGFuIGV4aXN0aW5nIHJvdXRlLCBhbmQgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChIaXN0b3J5LnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcignQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQnKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG4gICAgICAvLyBJcyBwdXNoU3RhdGUgZGVzaXJlZCAuLi4gaXMgaXQgYXZhaWxhYmxlP1xuICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcbiAgICAgIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSBmYWxzZTtcbiAgICAgIHRoaXMuX2hhc0hhc2hDaGFuZ2UgICA9ICdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdyAmJiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSB2b2lkIDAgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gNyk7XG4gICAgICB0aGlzLl91c2VIYXNoQ2hhbmdlICAgPSB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5faGFzSGFzaENoYW5nZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcbiAgICAgIHRoaXMuX3VzZVB1c2hTdGF0ZSAgICA9IHRoaXMuX3dhbnRzUHVzaFN0YXRlICYmIHRoaXMuX2hhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuZnJhZ21lbnQgICAgICAgICA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHZhciByb290ID0gdGhpcy5yb290LnNsaWNlKDAsIC0xKSB8fCAnLyc7XG4gICAgICAgICAgdGhpcy5sb2NhdGlvbi5yZXBsYWNlKHJvb3QgKyAnIycgKyB0aGlzLmdldFBhdGgoKSk7XG4gICAgICAgICAgLy8gUmV0dXJuIGltbWVkaWF0ZWx5IGFzIGJyb3dzZXIgd2lsbCBkbyByZWRpcmVjdCB0byBuZXcgdXJsXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gT3IgaWYgd2UndmUgc3RhcnRlZCBvdXQgd2l0aCBhIGhhc2gtYmFzZWQgcm91dGUsIGJ1dCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMubmF2aWdhdGUodGhpcy5nZXRIYXNoKCksIHtyZXBsYWNlOiB0cnVlfSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBQcm94eSBhbiBpZnJhbWUgdG8gaGFuZGxlIGxvY2F0aW9uIGV2ZW50cyBpZiB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAgICAvLyBzdXBwb3J0IHRoZSBgaGFzaGNoYW5nZWAgZXZlbnQsIEhUTUw1IGhpc3RvcnksIG9yIHRoZSB1c2VyIHdhbnRzXG4gICAgICAvLyBgaGFzaENoYW5nZWAgYnV0IG5vdCBgcHVzaFN0YXRlYC5cbiAgICAgIGlmICghdGhpcy5faGFzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgIXRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICB0aGlzLmlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDowJztcbiAgICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5pZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAvLyBVc2luZyBgYXBwZW5kQ2hpbGRgIHdpbGwgdGhyb3cgb24gSUUgPCA5IGlmIHRoZSBkb2N1bWVudCBpcyBub3QgcmVhZHkuXG4gICAgICAgIHZhciBpV2luZG93ID0gYm9keS5pbnNlcnRCZWZvcmUodGhpcy5pZnJhbWUsIGJvZHkuZmlyc3RDaGlsZCkuY29udGVudFdpbmRvdztcbiAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG4gICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcbiAgICAgICAgaVdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgdGhpcy5mcmFnbWVudDtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGEgY3Jvc3MtcGxhdGZvcm0gYGFkZEV2ZW50TGlzdGVuZXJgIHNoaW0gZm9yIG9sZGVyIGJyb3dzZXJzLlxuICAgICAgdmFyIGFkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbiAoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgfTtcblxuICAgICAgLy8gRGVwZW5kaW5nIG9uIHdoZXRoZXIgd2UncmUgdXNpbmcgcHVzaFN0YXRlIG9yIGhhc2hlcywgYW5kIHdoZXRoZXJcbiAgICAgIC8vICdvbmhhc2hjaGFuZ2UnIGlzIHN1cHBvcnRlZCwgZGV0ZXJtaW5lIGhvdyB3ZSBjaGVjayB0aGUgVVJMIHN0YXRlLlxuICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdXNlSGFzaENoYW5nZSAmJiAhdGhpcy5pZnJhbWUpIHtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2lsZW50KSByZXR1cm4gdGhpcy5sb2FkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIERpc2FibGUgQmFja2JvbmUuaGlzdG9yeSwgcGVyaGFwcyB0ZW1wb3JhcmlseS4gTm90IHVzZWZ1bCBpbiBhIHJlYWwgYXBwLFxuICAgIC8vIGJ1dCBwb3NzaWJseSB1c2VmdWwgZm9yIHVuaXQgdGVzdGluZyBSb3V0ZXJzLlxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQWRkIGEgY3Jvc3MtcGxhdGZvcm0gYHJlbW92ZUV2ZW50TGlzdGVuZXJgIHNoaW0gZm9yIG9sZGVyIGJyb3dzZXJzLlxuICAgICAgdmFyIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbiAoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgfTtcblxuICAgICAgLy8gUmVtb3ZlIHdpbmRvdyBsaXN0ZW5lcnMuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSkge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cCB0aGUgaWZyYW1lIGlmIG5lY2Vzc2FyeS5cbiAgICAgIGlmICh0aGlzLmlmcmFtZSkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKTtcbiAgICAgICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTb21lIGVudmlyb25tZW50cyB3aWxsIHRocm93IHdoZW4gY2xlYXJpbmcgYW4gdW5kZWZpbmVkIGludGVydmFsLlxuICAgICAgaWYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcbiAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cbiAgICBjaGVja1VybDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIElmIHRoZSB1c2VyIHByZXNzZWQgdGhlIGJhY2sgYnV0dG9uLCB0aGUgaWZyYW1lJ3MgaGFzaCB3aWxsIGhhdmVcbiAgICAgIC8vIGNoYW5nZWQgYW5kIHdlIHNob3VsZCB1c2UgdGhhdCBmb3IgY29tcGFyaXNvbi5cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEhhc2godGhpcy5pZnJhbWUuY29udGVudFdpbmRvdyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHRoaXMubmF2aWdhdGUoY3VycmVudCk7XG4gICAgICB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gQXR0ZW1wdCB0byBsb2FkIHRoZSBjdXJyZW50IFVSTCBmcmFnbWVudC4gSWYgYSByb3V0ZSBzdWNjZWVkcyB3aXRoIGFcbiAgICAvLyBtYXRjaCwgcmV0dXJucyBgdHJ1ZWAuIElmIG5vIGRlZmluZWQgcm91dGVzIG1hdGNoZXMgdGhlIGZyYWdtZW50LFxuICAgIC8vIHJldHVybnMgYGZhbHNlYC5cbiAgICBsb2FkVXJsOiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgLy8gSWYgdGhlIHJvb3QgZG9lc24ndCBtYXRjaCwgbm8gcm91dGVzIGNhbiBtYXRjaCBlaXRoZXIuXG4gICAgICBpZiAoIXRoaXMubWF0Y2hSb290KCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgcmV0dXJuIF8uc29tZSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICAvLyBOb3JtYWxpemUgdGhlIGZyYWdtZW50LlxuICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50IHx8ICcnKTtcblxuICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3Q7XG4gICAgICBpZiAoZnJhZ21lbnQgPT09ICcnIHx8IGZyYWdtZW50LmNoYXJBdCgwKSA9PT0gJz8nKSB7XG4gICAgICAgIHJvb3QgPSByb290LnNsaWNlKDAsIC0xKSB8fCAnLyc7XG4gICAgICB9XG4gICAgICB2YXIgdXJsID0gcm9vdCArIGZyYWdtZW50O1xuXG4gICAgICAvLyBTdHJpcCB0aGUgaGFzaCBhbmQgZGVjb2RlIGZvciBtYXRjaGluZy5cbiAgICAgIGZyYWdtZW50ID0gdGhpcy5kZWNvZGVGcmFnbWVudChmcmFnbWVudC5yZXBsYWNlKHBhdGhTdHJpcHBlciwgJycpKTtcblxuICAgICAgaWYgKHRoaXMuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG5cbiAgICAgIC8vIElmIHB1c2hTdGF0ZSBpcyBhdmFpbGFibGUsIHdlIHVzZSBpdCB0byBzZXQgdGhlIGZyYWdtZW50IGFzIGEgcmVhbCBVUkwuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVtvcHRpb25zLnJlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXSh7fSwgZG9jdW1lbnQudGl0bGUsIHVybCk7XG5cbiAgICAgIC8vIElmIGhhc2ggY2hhbmdlcyBoYXZlbid0IGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZCwgdXBkYXRlIHRoZSBoYXNoXG4gICAgICAvLyBmcmFnbWVudCB0byBzdG9yZSBoaXN0b3J5LlxuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcbiAgICAgICAgaWYgKHRoaXMuaWZyYW1lICYmIChmcmFnbWVudCAhPT0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpKSkge1xuICAgICAgICAgIHZhciBpV2luZG93ID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdztcblxuICAgICAgICAgIC8vIE9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGlmcmFtZSB0cmlja3MgSUU3IGFuZCBlYXJsaWVyIHRvIHB1c2ggYVxuICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgb24gaGFzaC10YWcgY2hhbmdlLiAgV2hlbiByZXBsYWNlIGlzIHRydWUsIHdlIGRvbid0XG4gICAgICAgICAgLy8gd2FudCB0aGlzLlxuICAgICAgICAgIGlmICghb3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpV2luZG93LmRvY3VtZW50Lm9wZW4oKTtcbiAgICAgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl91cGRhdGVIYXNoKGlXaW5kb3cubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICB9XG5cbiAgICAgIC8vIElmIHlvdSd2ZSB0b2xkIHVzIHRoYXQgeW91IGV4cGxpY2l0bHkgZG9uJ3Qgd2FudCBmYWxsYmFjayBoYXNoY2hhbmdlLVxuICAgICAgLy8gYmFzZWQgaGlzdG9yeSwgdGhlbiBgbmF2aWdhdGVgIGJlY29tZXMgYSBwYWdlIHJlZnJlc2guXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnRyaWdnZXIpIHJldHVybiB0aGlzLmxvYWRVcmwoZnJhZ21lbnQpO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgdGhlIGhhc2ggbG9jYXRpb24sIGVpdGhlciByZXBsYWNpbmcgdGhlIGN1cnJlbnQgZW50cnksIG9yIGFkZGluZ1xuICAgIC8vIGEgbmV3IG9uZSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuICAgIF91cGRhdGVIYXNoOiBmdW5jdGlvbihsb2NhdGlvbiwgZnJhZ21lbnQsIHJlcGxhY2UpIHtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIHZhciBocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oamF2YXNjcmlwdDp8IykuKiQvLCAnJyk7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZiArICcjJyArIGZyYWdtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgcmVxdWlyZSB0aGF0IGBoYXNoYCBjb250YWlucyBhIGxlYWRpbmcgIy5cbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjJyArIGZyYWdtZW50O1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgQmFja2JvbmUuaGlzdG9yeS5cbiAgQmFja2JvbmUuaGlzdG9yeSA9IG5ldyBIaXN0b3J5O1xuXG4gIC8vIEhlbHBlcnNcbiAgLy8gLS0tLS0tLVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4gZm9yIHN1YmNsYXNzZXMuXG4gIC8vIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG4gIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG4gIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBjaGlsZDtcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIG5ldyBzdWJjbGFzcyBpcyBlaXRoZXIgZGVmaW5lZCBieSB5b3VcbiAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcbiAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50IGNvbnN0cnVjdG9yLlxuICAgIGlmIChwcm90b1Byb3BzICYmIF8uaGFzKHByb3RvUHJvcHMsICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9O1xuICAgIH1cblxuICAgIC8vIEFkZCBzdGF0aWMgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24sIGlmIHN1cHBsaWVkLlxuICAgIF8uZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcblxuICAgIC8vIFNldCB0aGUgcHJvdG90eXBlIGNoYWluIHRvIGluaGVyaXQgZnJvbSBgcGFyZW50YCwgd2l0aG91dCBjYWxsaW5nXG4gICAgLy8gYHBhcmVudGAgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAgdmFyIFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uKCl7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfTtcbiAgICBTdXJyb2dhdGUucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgU3Vycm9nYXRlO1xuXG4gICAgLy8gQWRkIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChpbnN0YW5jZSBwcm9wZXJ0aWVzKSB0byB0aGUgc3ViY2xhc3MsXG4gICAgLy8gaWYgc3VwcGxpZWQuXG4gICAgaWYgKHByb3RvUHJvcHMpIF8uZXh0ZW5kKGNoaWxkLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG5cbiAgICAvLyBTZXQgYSBjb252ZW5pZW5jZSBwcm9wZXJ0eSBpbiBjYXNlIHRoZSBwYXJlbnQncyBwcm90b3R5cGUgaXMgbmVlZGVkXG4gICAgLy8gbGF0ZXIuXG4gICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcblxuICAgIHJldHVybiBjaGlsZDtcbiAgfTtcblxuICAvLyBTZXQgdXAgaW5oZXJpdGFuY2UgZm9yIHRoZSBtb2RlbCwgY29sbGVjdGlvbiwgcm91dGVyLCB2aWV3IGFuZCBoaXN0b3J5LlxuICBNb2RlbC5leHRlbmQgPSBDb2xsZWN0aW9uLmV4dGVuZCA9IFJvdXRlci5leHRlbmQgPSBWaWV3LmV4dGVuZCA9IEhpc3RvcnkuZXh0ZW5kID0gZXh0ZW5kO1xuXG4gIC8vIFRocm93IGFuIGVycm9yIHdoZW4gYSBVUkwgaXMgbmVlZGVkLCBhbmQgbm9uZSBpcyBzdXBwbGllZC5cbiAgdmFyIHVybEVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBIFwidXJsXCIgcHJvcGVydHkgb3IgZnVuY3Rpb24gbXVzdCBiZSBzcGVjaWZpZWQnKTtcbiAgfTtcblxuICAvLyBXcmFwIGFuIG9wdGlvbmFsIGVycm9yIGNhbGxiYWNrIHdpdGggYSBmYWxsYmFjayBlcnJvciBldmVudC5cbiAgdmFyIHdyYXBFcnJvciA9IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgaWYgKGVycm9yKSBlcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQmFja2JvbmU7XG5cbn0pKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCIvLyBkMy50aXBcbi8vIENvcHlyaWdodCAoYykgMjAxMyBKdXN0aW4gUGFsbWVyXG4vL1xuLy8gVG9vbHRpcHMgZm9yIGQzLmpzIFNWRyB2aXN1YWxpemF0aW9uc1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSB3aXRoIGQzIGFzIGEgZGVwZW5kZW5jeS5cbiAgICBkZWZpbmUoWydkMyddLCBmYWN0b3J5KVxuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGQzKSB7XG4gICAgICBkMy50aXAgPSBmYWN0b3J5KGQzKVxuICAgICAgcmV0dXJuIGQzLnRpcFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbC5cbiAgICByb290LmQzLnRpcCA9IGZhY3Rvcnkocm9vdC5kMylcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoZDMpIHtcblxuICAvLyBQdWJsaWMgLSBjb250cnVjdHMgYSBuZXcgdG9vbHRpcFxuICAvL1xuICAvLyBSZXR1cm5zIGEgdGlwXG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGlyZWN0aW9uID0gZDNfdGlwX2RpcmVjdGlvbixcbiAgICAgICAgb2Zmc2V0ICAgID0gZDNfdGlwX29mZnNldCxcbiAgICAgICAgaHRtbCAgICAgID0gZDNfdGlwX2h0bWwsXG4gICAgICAgIG5vZGUgICAgICA9IGluaXROb2RlKCksXG4gICAgICAgIHN2ZyAgICAgICA9IG51bGwsXG4gICAgICAgIHBvaW50ICAgICA9IG51bGwsXG4gICAgICAgIHRhcmdldCAgICA9IG51bGxcblxuICAgIGZ1bmN0aW9uIHRpcCh2aXMpIHtcbiAgICAgIHN2ZyA9IGdldFNWR05vZGUodmlzKVxuICAgICAgcG9pbnQgPSBzdmcuY3JlYXRlU1ZHUG9pbnQoKVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKVxuICAgIH1cblxuICAgIC8vIFB1YmxpYyAtIHNob3cgdGhlIHRvb2x0aXAgb24gdGhlIHNjcmVlblxuICAgIC8vXG4gICAgLy8gUmV0dXJucyBhIHRpcFxuICAgIHRpcC5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIGlmKGFyZ3NbYXJncy5sZW5ndGggLSAxXSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIHRhcmdldCA9IGFyZ3MucG9wKClcblxuICAgICAgdmFyIGNvbnRlbnQgPSBodG1sLmFwcGx5KHRoaXMsIGFyZ3MpLFxuICAgICAgICAgIHBvZmZzZXQgPSBvZmZzZXQuYXBwbHkodGhpcywgYXJncyksXG4gICAgICAgICAgZGlyICAgICA9IGRpcmVjdGlvbi5hcHBseSh0aGlzLCBhcmdzKSxcbiAgICAgICAgICBub2RlbCAgID0gZDMuc2VsZWN0KG5vZGUpLFxuICAgICAgICAgIGkgICAgICAgPSBkaXJlY3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgc2Nyb2xsVG9wICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsXG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdFxuXG4gICAgICBub2RlbC5odG1sKGNvbnRlbnQpXG4gICAgICAgIC5zdHlsZSh7IG9wYWNpdHk6IDEsICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnIH0pXG5cbiAgICAgIHdoaWxlKGktLSkgbm9kZWwuY2xhc3NlZChkaXJlY3Rpb25zW2ldLCBmYWxzZSlcbiAgICAgIGNvb3JkcyA9IGRpcmVjdGlvbl9jYWxsYmFja3MuZ2V0KGRpcikuYXBwbHkodGhpcylcbiAgICAgIG5vZGVsLmNsYXNzZWQoZGlyLCB0cnVlKS5zdHlsZSh7XG4gICAgICAgIHRvcDogKGNvb3Jkcy50b3AgKyAgcG9mZnNldFswXSkgKyBzY3JvbGxUb3AgKyAncHgnLFxuICAgICAgICBsZWZ0OiAoY29vcmRzLmxlZnQgKyBwb2Zmc2V0WzFdKSArIHNjcm9sbExlZnQgKyAncHgnXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljIC0gaGlkZSB0aGUgdG9vbHRpcFxuICAgIC8vXG4gICAgLy8gUmV0dXJucyBhIHRpcFxuICAgIHRpcC5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9kZWwgPSBkMy5zZWxlY3Qobm9kZSlcbiAgICAgIG5vZGVsLnN0eWxlKHsgb3BhY2l0eTogMCwgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnIH0pXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljOiBQcm94eSBhdHRyIGNhbGxzIHRvIHRoZSBkMyB0aXAgY29udGFpbmVyLiAgU2V0cyBvciBnZXRzIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAvL1xuICAgIC8vIG4gLSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAvLyB2IC0gdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgIC8vXG4gICAgLy8gUmV0dXJucyB0aXAgb3IgYXR0cmlidXRlIHZhbHVlXG4gICAgdGlwLmF0dHIgPSBmdW5jdGlvbihuLCB2KSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIgJiYgdHlwZW9mIG4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkMy5zZWxlY3Qobm9kZSkuYXR0cihuKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFyZ3MgPSAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICAgICBkMy5zZWxlY3Rpb24ucHJvdG90eXBlLmF0dHIuYXBwbHkoZDMuc2VsZWN0KG5vZGUpLCBhcmdzKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljOiBQcm94eSBzdHlsZSBjYWxscyB0byB0aGUgZDMgdGlwIGNvbnRhaW5lci4gIFNldHMgb3IgZ2V0cyBhIHN0eWxlIHZhbHVlLlxuICAgIC8vXG4gICAgLy8gbiAtIG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgLy8gdiAtIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eVxuICAgIC8vXG4gICAgLy8gUmV0dXJucyB0aXAgb3Igc3R5bGUgcHJvcGVydHkgdmFsdWVcbiAgICB0aXAuc3R5bGUgPSBmdW5jdGlvbihuLCB2KSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIgJiYgdHlwZW9mIG4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkMy5zZWxlY3Qobm9kZSkuc3R5bGUobilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhcmdzID0gIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgICAgZDMuc2VsZWN0aW9uLnByb3RvdHlwZS5zdHlsZS5hcHBseShkMy5zZWxlY3Qobm9kZSksIGFyZ3MpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aXBcbiAgICB9XG5cbiAgICAvLyBQdWJsaWM6IFNldCBvciBnZXQgdGhlIGRpcmVjdGlvbiBvZiB0aGUgdG9vbHRpcFxuICAgIC8vXG4gICAgLy8gdiAtIE9uZSBvZiBuKG5vcnRoKSwgcyhzb3V0aCksIGUoZWFzdCksIG9yIHcod2VzdCksIG53KG5vcnRod2VzdCksXG4gICAgLy8gICAgIHN3KHNvdXRod2VzdCksIG5lKG5vcnRoZWFzdCkgb3Igc2Uoc291dGhlYXN0KVxuICAgIC8vXG4gICAgLy8gUmV0dXJucyB0aXAgb3IgZGlyZWN0aW9uXG4gICAgdGlwLmRpcmVjdGlvbiA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRpcmVjdGlvblxuICAgICAgZGlyZWN0aW9uID0gdiA9PSBudWxsID8gdiA6IGQzLmZ1bmN0b3IodilcblxuICAgICAgcmV0dXJuIHRpcFxuICAgIH1cblxuICAgIC8vIFB1YmxpYzogU2V0cyBvciBnZXRzIHRoZSBvZmZzZXQgb2YgdGhlIHRpcFxuICAgIC8vXG4gICAgLy8gdiAtIEFycmF5IG9mIFt4LCB5XSBvZmZzZXRcbiAgICAvL1xuICAgIC8vIFJldHVybnMgb2Zmc2V0IG9yXG4gICAgdGlwLm9mZnNldCA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG9mZnNldFxuICAgICAgb2Zmc2V0ID0gdiA9PSBudWxsID8gdiA6IGQzLmZ1bmN0b3IodilcblxuICAgICAgcmV0dXJuIHRpcFxuICAgIH1cblxuICAgIC8vIFB1YmxpYzogc2V0cyBvciBnZXRzIHRoZSBodG1sIHZhbHVlIG9mIHRoZSB0b29sdGlwXG4gICAgLy9cbiAgICAvLyB2IC0gU3RyaW5nIHZhbHVlIG9mIHRoZSB0aXBcbiAgICAvL1xuICAgIC8vIFJldHVybnMgaHRtbCB2YWx1ZSBvciB0aXBcbiAgICB0aXAuaHRtbCA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGh0bWxcbiAgICAgIGh0bWwgPSB2ID09IG51bGwgPyB2IDogZDMuZnVuY3Rvcih2KVxuXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZDNfdGlwX2RpcmVjdGlvbigpIHsgcmV0dXJuICduJyB9XG4gICAgZnVuY3Rpb24gZDNfdGlwX29mZnNldCgpIHsgcmV0dXJuIFswLCAwXSB9XG4gICAgZnVuY3Rpb24gZDNfdGlwX2h0bWwoKSB7IHJldHVybiAnICcgfVxuXG4gICAgdmFyIGRpcmVjdGlvbl9jYWxsYmFja3MgPSBkMy5tYXAoe1xuICAgICAgbjogIGRpcmVjdGlvbl9uLFxuICAgICAgczogIGRpcmVjdGlvbl9zLFxuICAgICAgZTogIGRpcmVjdGlvbl9lLFxuICAgICAgdzogIGRpcmVjdGlvbl93LFxuICAgICAgbnc6IGRpcmVjdGlvbl9udyxcbiAgICAgIG5lOiBkaXJlY3Rpb25fbmUsXG4gICAgICBzdzogZGlyZWN0aW9uX3N3LFxuICAgICAgc2U6IGRpcmVjdGlvbl9zZVxuICAgIH0pLFxuXG4gICAgZGlyZWN0aW9ucyA9IGRpcmVjdGlvbl9jYWxsYmFja3Mua2V5cygpXG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fbigpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94Lm4ueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm4ueCAtIG5vZGUub2Zmc2V0V2lkdGggLyAyXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX3MoKSB7XG4gICAgICB2YXIgYmJveCA9IGdldFNjcmVlbkJCb3goKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiAgYmJveC5zLnksXG4gICAgICAgIGxlZnQ6IGJib3gucy54IC0gbm9kZS5vZmZzZXRXaWR0aCAvIDJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fZSgpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94LmUueSAtIG5vZGUub2Zmc2V0SGVpZ2h0IC8gMixcbiAgICAgICAgbGVmdDogYmJveC5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fdygpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94LncueSAtIG5vZGUub2Zmc2V0SGVpZ2h0IC8gMixcbiAgICAgICAgbGVmdDogYmJveC53LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX253KCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3gubncueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm53LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX25lKCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3gubmUueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fc3coKSB7XG4gICAgICB2YXIgYmJveCA9IGdldFNjcmVlbkJCb3goKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiAgYmJveC5zdy55LFxuICAgICAgICBsZWZ0OiBiYm94LnN3LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX3NlKCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3guc2UueSxcbiAgICAgICAgbGVmdDogYmJveC5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0Tm9kZSgpIHtcbiAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxuICAgICAgbm9kZS5zdHlsZSh7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJyxcbiAgICAgICAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCdcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBub2RlLm5vZGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNWR05vZGUoZWwpIHtcbiAgICAgIGVsID0gZWwubm9kZSgpXG4gICAgICBpZihlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdmcnKVxuICAgICAgICByZXR1cm4gZWxcblxuICAgICAgcmV0dXJuIGVsLm93bmVyU1ZHRWxlbWVudFxuICAgIH1cblxuICAgIC8vIFByaXZhdGUgLSBnZXRzIHRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgYSBzaGFwZVxuICAgIC8vXG4gICAgLy8gR2l2ZW4gYSBzaGFwZSBvbiB0aGUgc2NyZWVuLCB3aWxsIHJldHVybiBhbiBTVkdQb2ludCBmb3IgdGhlIGRpcmVjdGlvbnNcbiAgICAvLyBuKG5vcnRoKSwgcyhzb3V0aCksIGUoZWFzdCksIHcod2VzdCksIG5lKG5vcnRoZWFzdCksIHNlKHNvdXRoZWFzdCksIG53KG5vcnRod2VzdCksXG4gICAgLy8gc3coc291dGh3ZXN0KS5cbiAgICAvL1xuICAgIC8vICAgICstKy0rXG4gICAgLy8gICAgfCAgIHxcbiAgICAvLyAgICArICAgK1xuICAgIC8vICAgIHwgICB8XG4gICAgLy8gICAgKy0rLStcbiAgICAvL1xuICAgIC8vIFJldHVybnMgYW4gT2JqZWN0IHtuLCBzLCBlLCB3LCBudywgc3csIG5lLCBzZX1cbiAgICBmdW5jdGlvbiBnZXRTY3JlZW5CQm94KCkge1xuICAgICAgdmFyIHRhcmdldGVsICAgPSB0YXJnZXQgfHwgZDMuZXZlbnQudGFyZ2V0O1xuXG4gICAgICB3aGlsZSAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB0YXJnZXRlbC5nZXRTY3JlZW5DVE0gJiYgJ3VuZGVmaW5lZCcgPT09IHRhcmdldGVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICB0YXJnZXRlbCA9IHRhcmdldGVsLnBhcmVudE5vZGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBiYm94ICAgICAgID0ge30sXG4gICAgICAgICAgbWF0cml4ICAgICA9IHRhcmdldGVsLmdldFNjcmVlbkNUTSgpLFxuICAgICAgICAgIHRiYm94ICAgICAgPSB0YXJnZXRlbC5nZXRCQm94KCksXG4gICAgICAgICAgd2lkdGggICAgICA9IHRiYm94LndpZHRoLFxuICAgICAgICAgIGhlaWdodCAgICAgPSB0YmJveC5oZWlnaHQsXG4gICAgICAgICAgeCAgICAgICAgICA9IHRiYm94LngsXG4gICAgICAgICAgeSAgICAgICAgICA9IHRiYm94LnlcblxuICAgICAgcG9pbnQueCA9IHhcbiAgICAgIHBvaW50LnkgPSB5XG4gICAgICBiYm94Lm53ID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKG1hdHJpeClcbiAgICAgIHBvaW50LnggKz0gd2lkdGhcbiAgICAgIGJib3gubmUgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuICAgICAgcG9pbnQueSArPSBoZWlnaHRcbiAgICAgIGJib3guc2UgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuICAgICAgcG9pbnQueCAtPSB3aWR0aFxuICAgICAgYmJveC5zdyA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShtYXRyaXgpXG4gICAgICBwb2ludC55IC09IGhlaWdodCAvIDJcbiAgICAgIGJib3gudyAgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuICAgICAgcG9pbnQueCArPSB3aWR0aFxuICAgICAgYmJveC5lID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKG1hdHJpeClcbiAgICAgIHBvaW50LnggLT0gd2lkdGggLyAyXG4gICAgICBwb2ludC55IC09IGhlaWdodCAvIDJcbiAgICAgIGJib3gubiA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShtYXRyaXgpXG4gICAgICBwb2ludC55ICs9IGhlaWdodFxuICAgICAgYmJveC5zID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKG1hdHJpeClcblxuICAgICAgcmV0dXJuIGJib3hcbiAgICB9XG5cbiAgICByZXR1cm4gdGlwXG4gIH07XG5cbn0pKTtcbiIsbnVsbCwidmFyIEJpbmRCYXNlLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQmluZEJhc2UgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQmluZEJhc2UsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEJpbmRCYXNlKCkge1xuICAgIHJldHVybiBCaW5kQmFzZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEJpbmRCYXNlLnByb3RvdHlwZS51cGRhdGVBdHRycyA9IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiB0aGlzLnZpZXcubW9kZWwuc2V0KEJhY2tib25lLlN5cGhvbi5zZXJpYWxpemUodGhpcykpO1xuICB9O1xuXG4gIHJldHVybiBCaW5kQmFzZTtcblxufSkoTWFyaW9uZXR0ZS5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gQmluZEJhc2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJKbGFHRjJhVzl5Y3k5c2FXSXZZbWx1WkVKaGMyVXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdlltbHVaRUpoYzJVdVkyOW1abVZsSWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVWQkxFbEJRVUVzVVVGQlFUdEZRVUZCT3pzN1FVRkJUVHM3T3pzN096dHhRa0ZGU2l4WFFVRkJMRWRCUVdFc1UwRkJReXhEUVVGRU8wbEJRMWdzUTBGQlF5eERRVUZETEdWQlFVWXNRMEZCUVR0WFFVTkJMRWxCUVVNc1EwRkJRU3hKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFWb3NRMEZCWjBJc1VVRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZvUWl4RFFVRXdRaXhKUVVFeFFpeERRVUZvUWp0RlFVWlhPenM3TzBkQlJsRXNWVUZCVlN4RFFVRkRPenRCUVZGc1F5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgQmluZElucHV0cyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkJpbmRJbnB1dHMgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQmluZElucHV0cywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQmluZElucHV0cygpIHtcbiAgICByZXR1cm4gQmluZElucHV0cy5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEJpbmRJbnB1dHMucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnaW5wdXQgaW5wdXQnOiAndXBkYXRlQXR0cnMnXG4gIH07XG5cbiAgcmV0dXJuIEJpbmRJbnB1dHM7XG5cbn0pKHJlcXVpcmUoJy4vYmluZEJhc2UnKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQmluZElucHV0cztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdlltbHVaRWx1Y0hWMGN5NWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTl1YjJSbFgyMXZaSFZzWlhNdmFHNWZZbVZvWVhacGIzSnpMMnhwWWk5aWFXNWtTVzV3ZFhSekxtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRlFTeEpRVUZCTEZWQlFVRTdSVUZCUVRzN08wRkJRVTA3T3pzN096czdkVUpCUlVvc1RVRkJRU3hIUVVORk8wbEJRVUVzWVVGQlFTeEZRVUZuUWl4aFFVRm9RanM3T3pzN1IwRkljVUlzVDBGQlFTeERRVUZSTEZsQlFWSTdPMEZCVDNwQ0xFMUJRVTBzUTBGQlF5eFBRVUZRTEVkQlFXbENJbjA9XG4iLCJ2YXIgQ29weVRvQ2xpcGJvYXJkLFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkNvcHlUb0NsaXBib2FyZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChDb3B5VG9DbGlwYm9hcmQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIENvcHlUb0NsaXBib2FyZCgpIHtcbiAgICB0aGlzLmRlc3Ryb3lDbGlwYm9hcmQgPSBiaW5kKHRoaXMuZGVzdHJveUNsaXBib2FyZCwgdGhpcyk7XG4gICAgcmV0dXJuIENvcHlUb0NsaXBib2FyZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIENvcHlUb0NsaXBib2FyZC5wcm90b3R5cGUudWkgPSB7XG4gICAgY29weVRvQ2xpcGJvYXJkOiAnW2RhdGEtY2xpY2s9Y2xpcGJvYXJkXSdcbiAgfTtcblxuICBDb3B5VG9DbGlwYm9hcmQucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2xpY2sgQHVpLmNvcHlUb0NsaXBib2FyZCc6ICdjb3B5VG9DbGlwYm9hcmQnXG4gIH07XG5cbiAgQ29weVRvQ2xpcGJvYXJkLnByb3RvdHlwZS5jb3B5VG9DbGlwYm9hcmQgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRleHQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRleHQgPSB0aGlzLm9wdGlvbnMudGV4dDtcbiAgICB0aGlzLmNsaXBib2FyZCA9IG5ldyBDbGlwYm9hcmQoJ1tkYXRhLWNsaWNrPWNsaXBib2FyZF0nLCB7XG4gICAgICB0ZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5jbGlwYm9hcmQub24oJ3N1Y2Nlc3MnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgX3RoaXMuZGVzdHJveUNsaXBib2FyZCgpO1xuICAgICAgICByZXR1cm4gX3RoaXMudmlldy50cmlnZ2VyTWV0aG9kKCdjbGlwYm9hcmQ6c3VjY2VzcycpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuY2xpcGJvYXJkLm9uKCdlcnJvcicsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBfdGhpcy5kZXN0cm95Q2xpcGJvYXJkKCk7XG4gICAgICAgIHJldHVybiBfdGhpcy52aWV3LnRyaWdnZXJNZXRob2QoJ2NsaXBib2FyZDplcnJvcicpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgQ29weVRvQ2xpcGJvYXJkLnByb3RvdHlwZS5kZXN0cm95Q2xpcGJvYXJkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpcGJvYXJkLmRlc3Ryb3koKTtcbiAgfTtcblxuICByZXR1cm4gQ29weVRvQ2xpcGJvYXJkO1xuXG59KShNYXJpb25ldHRlLkJlaGF2aW9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb3B5VG9DbGlwYm9hcmQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJKbGFHRjJhVzl5Y3k5c2FXSXZZMjl3ZVZSdlEyeHBjR0p2WVhKa0xtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMjV2WkdWZmJXOWtkV3hsY3k5b2JsOWlaV2hoZG1sdmNuTXZiR2xpTDJOdmNIbFViME5zYVhCaWIyRnlaQzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJSMEVzU1VGQlFTeGxRVUZCTzBWQlFVRTdPenM3UVVGQlRUczdPenM3T3pzN05FSkJSVW9zUlVGQlFTeEhRVU5GTzBsQlFVRXNaVUZCUVN4RlFVRnBRaXgzUWtGQmFrSTdPenMwUWtGRlJpeE5RVUZCTEVkQlEwVTdTVUZCUVN3eVFrRkJRU3hGUVVFMlFpeHBRa0ZCTjBJN096czBRa0ZGUml4bFFVRkJMRWRCUVdsQ0xGTkJRVU1zUTBGQlJEdEJRVU5tTEZGQlFVRTdTVUZCUVN4RFFVRkRMRU5CUVVNc1kwRkJSaXhEUVVGQk8wbEJSMEVzU1VGQlFTeEhRVUZQTEVsQlFVTXNRMEZCUVN4UFFVRlBMRU5CUVVNN1NVRkRhRUlzU1VGQlF5eERRVUZCTEZOQlFVUXNSMEZCWVN4SlFVRkpMRk5CUVVvc1EwRkJZeXgzUWtGQlpDeEZRVUYzUXp0TlFVRkZMRWxCUVVFc1JVRkJUU3hUUVVGQk8yVkJRVWM3VFVGQlNDeERRVUZTTzB0QlFYaERPMGxCUjJJc1NVRkJReXhEUVVGQkxGTkJRVk1zUTBGQlF5eEZRVUZZTEVOQlFXTXNVMEZCWkN4RlFVRjVRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVRTdVVUZEZGtJc1MwRkJReXhEUVVGQkxHZENRVUZFTEVOQlFVRTdaVUZEUVN4TFFVRkRMRU5CUVVFc1NVRkJTU3hEUVVGRExHRkJRVTRzUTBGQmIwSXNiVUpCUVhCQ08wMUJSblZDTzBsQlFVRXNRMEZCUVN4RFFVRkJMRU5CUVVFc1NVRkJRU3hEUVVGNlFqdFhRVXRCTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1JVRkJXQ3hEUVVGakxFOUJRV1FzUlVGQmRVSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk8xRkJRM0pDTEV0QlFVTXNRMEZCUVN4blFrRkJSQ3hEUVVGQk8yVkJRMEVzUzBGQlF5eERRVUZCTEVsQlFVa3NRMEZCUXl4aFFVRk9MRU5CUVc5Q0xHbENRVUZ3UWp0TlFVWnhRanRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCZGtJN1JVRmlaVHM3TkVKQmEwSnFRaXhuUWtGQlFTeEhRVUZyUWl4VFFVRkJPMWRCUVVjc1NVRkJReXhEUVVGQkxGTkJRVk1zUTBGQlF5eFBRVUZZTEVOQlFVRTdSVUZCU0RzN096dEhRVEZDVlN4VlFVRlZMRU5CUVVNN08wRkJPRUo2UXl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBEb3dubG9hZEZpbGVCZWhhdmlvciwgZGVmYXVsdE9wdGlvbnMsIGRlc3Ryb3lDbGlja2VkRWxlbWVudCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbmRlc3Ryb3lDbGlja2VkRWxlbWVudCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuICQoZS5jdXJyZW50VGFyZ2V0KS5yZW1vdmUoKTtcbn07XG5cbmRlZmF1bHRPcHRpb25zID0ge1xuICBmaWxlbmFtZTogJ2Rvd25sb2FkLnR4dCcsXG4gIHR5cGU6ICd0ZXh0L3BsYWluJyxcbiAgY29udGVudDogbnVsbFxufTtcblxuRG93bmxvYWRGaWxlQmVoYXZpb3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRG93bmxvYWRGaWxlQmVoYXZpb3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIERvd25sb2FkRmlsZUJlaGF2aW9yKCkge1xuICAgIHJldHVybiBEb3dubG9hZEZpbGVCZWhhdmlvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIERvd25sb2FkRmlsZUJlaGF2aW9yLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmlldy5kb3dubG9hZEZpbGUgPSB0aGlzLmRvd25sb2FkRmlsZTtcbiAgfTtcblxuICBEb3dubG9hZEZpbGVCZWhhdmlvci5wcm90b3R5cGUuZG93bmxvYWRGaWxlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBkb3dubG9hZExpbmssIHRleHRGaWxlQXNCbG9iO1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IF8uZXh0ZW5kKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB0ZXh0RmlsZUFzQmxvYiA9IG5ldyBCbG9iKFtvcHRpb25zLmNvbnRlbnRdLCB7XG4gICAgICB0eXBlOiBvcHRpb25zLnR5cGVcbiAgICB9KTtcbiAgICBpZiAob3B0aW9ucy5wcmV2aWV3KSB7XG4gICAgICByZXR1cm4gd2luZG93Lm9wZW4od2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGV4dEZpbGVBc0Jsb2IpLCAnX2JsYW5rJyk7XG4gICAgfVxuICAgIGRvd25sb2FkTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBkb3dubG9hZExpbmsuZG93bmxvYWQgPSBvcHRpb25zLmZpbGVuYW1lO1xuICAgIGRvd25sb2FkTGluay5pbm5lckhUTUwgPSAnRG93bmxvYWQgRmlsZSc7XG4gICAgZG93bmxvYWRMaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0ZXh0RmlsZUFzQmxvYik7XG4gICAgZG93bmxvYWRMaW5rLm9uY2xpY2sgPSBkZXN0cm95Q2xpY2tlZEVsZW1lbnQ7XG4gICAgZG93bmxvYWRMaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb3dubG9hZExpbmspO1xuICAgIHJldHVybiBkb3dubG9hZExpbmsuY2xpY2soKTtcbiAgfTtcblxuICByZXR1cm4gRG93bmxvYWRGaWxlQmVoYXZpb3I7XG5cbn0pKE1hcmlvbmV0dGUuQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERvd25sb2FkRmlsZUJlaGF2aW9yO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgySmxhR0YyYVc5eWN5OXNhV0l2Wkc5M2JteHZZV1JHYVd4bExtTnZabVpsWlNJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpOVZjMlZ5Y3k5aFpXdHpZMjh2WjJsMGFIVmlMMjFoWjJWc2JHRnVMMjV2WkdWZmJXOWtkV3hsY3k5b2JsOWlaV2hoZG1sdmNuTXZiR2xpTDJSdmQyNXNiMkZrUm1sc1pTNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlJVRXNTVUZCUVN3eVJFRkJRVHRGUVVGQk96czdRVUZCUVN4eFFrRkJRU3hIUVVGM1FpeFRRVUZETEVOQlFVUTdVMEZCVHl4RFFVRkJMRU5CUVVVc1EwRkJReXhEUVVGRExHRkJRVW9zUTBGQmEwSXNRMEZCUXl4TlFVRnVRaXhEUVVGQk8wRkJRVkE3TzBGQlIzaENMR05CUVVFc1IwRkRSVHRGUVVGQkxGRkJRVUVzUlVGQlZTeGpRVUZXTzBWQlEwRXNTVUZCUVN4RlFVRlZMRmxCUkZZN1JVRkZRU3hQUVVGQkxFVkJRVlVzU1VGR1ZqczdPMEZCVFVrN096czdPenM3YVVOQlJVb3NWVUZCUVN4SFFVRlpMRk5CUVVNc1QwRkJSRHM3VFVGQlF5eFZRVUZST3p0WFFVTnVRaXhKUVVGRExFTkJRVUVzU1VGQlNTeERRVUZETEZsQlFVNHNSMEZCY1VJc1NVRkJReXhEUVVGQk8wVkJSRm83TzJsRFFVZGFMRmxCUVVFc1IwRkJZeXhUUVVGRExFOUJRVVE3UVVGSFdpeFJRVUZCT3p0TlFVaGhMRlZCUVZFN08wbEJSM0pDTEU5QlFVRXNSMEZCVlN4RFFVRkRMRU5CUVVNc1RVRkJSaXhEUVVGVExHTkJRVlFzUlVGQmVVSXNUMEZCZWtJN1NVRkhWaXhqUVVGQkxFZEJRV2xDTEVsQlFVa3NTVUZCU2l4RFFVRlRMRU5CUVVVc1QwRkJUeXhEUVVGRExFOUJRVllzUTBGQlZDeEZRVUU0UWp0TlFVRkZMRWxCUVVFc1JVRkJUU3hQUVVGUExFTkJRVU1zU1VGQmFFSTdTMEZCT1VJN1NVRkhha0lzU1VGQk1rVXNUMEZCVHl4RFFVRkRMRTlCUVc1R08wRkJRVUVzWVVGQlR5eE5RVUZOTEVOQlFVTXNTVUZCVUN4RFFVRlpMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zWlVGQldDeERRVUV5UWl4alFVRXpRaXhEUVVGYUxFVkJRWFZFTEZGQlFYWkVMRVZCUVZBN08wbEJSMEVzV1VGQlFTeEhRVUU0UWl4UlFVRlJMRU5CUVVNc1lVRkJWQ3hEUVVGMVFpeEhRVUYyUWp0SlFVTTVRaXhaUVVGWkxFTkJRVU1zVVVGQllpeEhRVUU0UWl4UFFVRlBMRU5CUVVNN1NVRkRkRU1zV1VGQldTeERRVUZETEZOQlFXSXNSMEZCT0VJN1NVRkRPVUlzV1VGQldTeERRVUZETEVsQlFXSXNSMEZCT0VJc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eGxRVUZZTEVOQlFUSkNMR05CUVROQ08wbEJRemxDTEZsQlFWa3NRMEZCUXl4UFFVRmlMRWRCUVRoQ08wbEJRemxDTEZsQlFWa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJia0lzUjBGQk9FSTdTVUZIT1VJc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZrTEVOQlFUQkNMRmxCUVRGQ08xZEJRMEVzV1VGQldTeERRVUZETEV0QlFXSXNRMEZCUVR0RlFYSkNXVHM3T3p0SFFVeHRRaXhWUVVGVkxFTkJRVU03TzBGQk9FSTVReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWlKOVxuIiwidmFyIEZsYXNoZXNCZWhhdmlvciwgX3NlbmRGbGFzaCxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbl9zZW5kRmxhc2ggPSBmdW5jdGlvbih0eXBlLCBvYmopIHtcbiAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2ZsYXNoJykudHJpZ2dlcih0eXBlLCBvYmopO1xufTtcblxuRmxhc2hlc0JlaGF2aW9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZsYXNoZXNCZWhhdmlvciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmxhc2hlc0JlaGF2aW9yKCkge1xuICAgIHJldHVybiBGbGFzaGVzQmVoYXZpb3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGbGFzaGVzQmVoYXZpb3IucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLnZpZXcuX2ZsYXNoZXMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdGhpcy52aWV3LmZsYXNoRXJyb3IgPSB0aGlzLmZsYXNoRXJyb3I7XG4gICAgcmV0dXJuIHRoaXMudmlldy5mbGFzaFN1Y2Nlc3MgPSB0aGlzLmZsYXNoU3VjY2VzcztcbiAgfTtcblxuICBGbGFzaGVzQmVoYXZpb3IucHJvdG90eXBlLmZsYXNoRXJyb3IgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIG9iaiA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gX3NlbmRGbGFzaCgnZXJyb3InLCB0aGlzLl9mbGFzaGVzWydlcnJvciddIHx8IG9iaik7XG4gIH07XG5cbiAgRmxhc2hlc0JlaGF2aW9yLnByb3RvdHlwZS5mbGFzaFN1Y2Nlc3MgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIG9iaiA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gX3NlbmRGbGFzaCgnc3VjY2VzcycsIHRoaXMuX2ZsYXNoZXNbJ3N1Y2Nlc3MnXSB8fCBvYmopO1xuICB9O1xuXG4gIHJldHVybiBGbGFzaGVzQmVoYXZpb3I7XG5cbn0pKE1hcmlvbmV0dGUuQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYXNoZXNCZWhhdmlvcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdlpteGhjMmhsY3k1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOXViMlJsWDIxdlpIVnNaWE12YUc1ZlltVm9ZWFpwYjNKekwyeHBZaTltYkdGemFHVnpMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxESkNRVUZCTzBWQlFVRTdPenRCUVVGQkxGVkJRVUVzUjBGQllTeFRRVUZETEVsQlFVUXNSVUZCVHl4SFFVRlFPMU5CUTFnc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZtTEVOQlFYVkNMRTlCUVhaQ0xFTkJRU3RDTEVOQlFVTXNUMEZCYUVNc1EwRkJkME1zU1VGQmVFTXNSVUZCT0VNc1IwRkJPVU03UVVGRVZ6czdRVUZMVURzN096czdPenMwUWtGRlNpeFZRVUZCTEVkQlFWa3NVMEZCUXl4UFFVRkVPenROUVVGRExGVkJRVkU3TzBsQlEyNUNMRWxCUVVNc1EwRkJRU3hKUVVGSkxFTkJRVU1zVVVGQlRpeEhRVUZ6UWl4SlFVRkRMRU5CUVVFN1NVRkRka0lzU1VGQlF5eERRVUZCTEVsQlFVa3NRMEZCUXl4VlFVRk9MRWRCUVhOQ0xFbEJRVU1zUTBGQlFUdFhRVU4yUWl4SlFVRkRMRU5CUVVFc1NVRkJTU3hEUVVGRExGbEJRVTRzUjBGQmMwSXNTVUZCUXl4RFFVRkJPMFZCU0dJN096UkNRVXRhTEZWQlFVRXNSMEZCV1N4VFFVRkRMRWRCUVVRN08wMUJRVU1zVFVGQlNUczdWMEZEWml4VlFVRkJMRU5CUVZjc1QwRkJXQ3hGUVVGdlFpeEpRVUZETEVOQlFVRXNVVUZCVXl4RFFVRkJMRTlCUVVFc1EwRkJWaXhKUVVGelFpeEhRVUV4UXp0RlFVUlZPenMwUWtGSFdpeFpRVUZCTEVkQlFXTXNVMEZCUXl4SFFVRkVPenROUVVGRExFMUJRVWs3TzFkQlEycENMRlZCUVVFc1EwRkJWeXhUUVVGWUxFVkJRWE5DTEVsQlFVTXNRMEZCUVN4UlFVRlRMRU5CUVVFc1UwRkJRU3hEUVVGV0xFbEJRWGRDTEVkQlFUbERPMFZCUkZrN096czdSMEZXWXl4VlFVRlZMRU5CUVVNN08wRkJaWHBETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBGb3JtU2VyaWFsaXplQmVoYXZpb3IsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Gb3JtU2VyaWFsaXplQmVoYXZpb3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRm9ybVNlcmlhbGl6ZUJlaGF2aW9yLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGb3JtU2VyaWFsaXplQmVoYXZpb3IoKSB7XG4gICAgcmV0dXJuIEZvcm1TZXJpYWxpemVCZWhhdmlvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZvcm1TZXJpYWxpemVCZWhhdmlvci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHRoaXMudmlldy5nZXRGb3JtRGF0YSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmdldEZvcm1EYXRhKG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy52aWV3LnNldEZvcm1EYXRhID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2V0Rm9ybURhdGEob3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICB9O1xuXG4gIEZvcm1TZXJpYWxpemVCZWhhdmlvci5wcm90b3R5cGUuZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIGRhdGEsIGtleSwgdmFsO1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmV4Y2x1ZGVGYWxzZXkpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5TeXBob24uc2VyaWFsaXplKHRoaXMpO1xuICAgIH1cbiAgICBkYXRhID0gQmFja2JvbmUuU3lwaG9uLnNlcmlhbGl6ZSh0aGlzKTtcbiAgICBmb3IgKGtleSBpbiBkYXRhKSB7XG4gICAgICB2YWwgPSBkYXRhW2tleV07XG4gICAgICBpZiAoIXZhbCkge1xuICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBGb3JtU2VyaWFsaXplQmVoYXZpb3IucHJvdG90eXBlLnNldEZvcm1EYXRhID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBCYWNrYm9uZS5TeXBob24uZGVzZXJpYWxpemUodGhpcywgdGhpcy5tb2RlbC5hdHRyaWJ1dGVzKTtcbiAgfTtcblxuICByZXR1cm4gRm9ybVNlcmlhbGl6ZUJlaGF2aW9yO1xuXG59KShNYXJpb25ldHRlLkJlaGF2aW9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGb3JtU2VyaWFsaXplQmVoYXZpb3I7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJKbGFHRjJhVzl5Y3k5c2FXSXZabTl5YlZObGNtbGhiR2w2WlM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOXViMlJsWDIxdlpIVnNaWE12YUc1ZlltVm9ZWFpwYjNKekwyeHBZaTltYjNKdFUyVnlhV0ZzYVhwbExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRFFTeEpRVUZCTEhGQ1FVRkJPMFZCUVVFN096dEJRVUZOT3pzN096czdPMnREUVVWS0xGVkJRVUVzUjBGQldTeFRRVUZETEU5QlFVUTdPMDFCUVVNc1ZVRkJVVHM3U1VGRGJrSXNTVUZCUXl4RFFVRkJMRWxCUVVrc1EwRkJReXhYUVVGT0xFZEJRVzlDTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJReXhQUVVGRU8yVkJRV0VzUzBGQlF5eERRVUZCTEZkQlFVUXNRMEZCWVN4UFFVRmlPMDFCUVdJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTzFkQlEzQkNMRWxCUVVNc1EwRkJRU3hKUVVGSkxFTkJRVU1zVjBGQlRpeEhRVUZ2UWl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVU1zVDBGQlJEdGxRVUZoTEV0QlFVTXNRMEZCUVN4WFFVRkVMRU5CUVdFc1QwRkJZanROUVVGaU8wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVR0RlFVWldPenRyUTBGSldpeFhRVUZCTEVkQlFXRXNVMEZCUXl4UFFVRkVPMEZCUTFnc1VVRkJRVHM3VFVGRVdTeFZRVUZST3p0SlFVTndRaXhKUVVGQkxFTkJRVEpETEU5QlFVOHNRMEZCUXl4aFFVRnVSRHRCUVVGQkxHRkJRVThzVVVGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4VFFVRm9RaXhEUVVFd1FpeEpRVUV4UWl4RlFVRlFPenRKUVVkQkxFbEJRVUVzUjBGQlR5eFJRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVdoQ0xFTkJRVEJDTEVsQlFURkNPMEZCUlZBc1UwRkJRU3hYUVVGQk96dE5RVU5GTEVsQlFXOUNMRU5CUVVrc1IwRkJlRUk3VVVGQlFTeFBRVUZQTEVsQlFVc3NRMEZCUVN4SFFVRkJMRVZCUVZvN08wRkJSRVk3UVVGSFFTeFhRVUZQTzBWQlZFazdPMnREUVZkaUxGZEJRVUVzUjBGQllTeFRRVUZETEU5QlFVUTdWMEZEV0N4UlFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRV2hDTEVOQlFUWkNMRWxCUVRkQ0xFVkJRV2RETEVsQlFVTXNRMEZCUVN4TFFVRkxMRU5CUVVNc1ZVRkJka003UlVGRVZ6czdPenRIUVdwQ2NVSXNWVUZCVlN4RFFVRkRPenRCUVhOQ0wwTXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIE1vZGVsRXZlbnRzQmVoYXZpb3IsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Nb2RlbEV2ZW50c0JlaGF2aW9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE1vZGVsRXZlbnRzQmVoYXZpb3IsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE1vZGVsRXZlbnRzQmVoYXZpb3IoKSB7XG4gICAgcmV0dXJuIE1vZGVsRXZlbnRzQmVoYXZpb3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBNb2RlbEV2ZW50c0JlaGF2aW9yLnByb3RvdHlwZS5tb2RlbEV2ZW50cyA9IHtcbiAgICAncmVxdWVzdCc6ICdvbk1vZGVsUmVxdWVzdCcsXG4gICAgJ3N5bmMnOiAnb25Nb2RlbFN5bmMnLFxuICAgICdlcnJvcic6ICdvbk1vZGVsRXJyb3InXG4gIH07XG5cbiAgTW9kZWxFdmVudHNCZWhhdmlvci5wcm90b3R5cGUub25Nb2RlbFJlcXVlc3QgPSBmdW5jdGlvbihtb2RlbCwgc3RhdHVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGJhc2U7XG4gICAgcmV0dXJuIHR5cGVvZiAoYmFzZSA9IHRoaXMudmlldykub25SZXF1ZXN0ID09PSBcImZ1bmN0aW9uXCIgPyBiYXNlLm9uUmVxdWVzdChtb2RlbCwgc3RhdHVzLCBvcHRpb25zKSA6IHZvaWQgMDtcbiAgfTtcblxuICBNb2RlbEV2ZW50c0JlaGF2aW9yLnByb3RvdHlwZS5vbk1vZGVsU3luYyA9IGZ1bmN0aW9uKG1vZGVsLCByZXNwb25zZSwgb3B0aW9ucykge1xuICAgIHZhciBiYXNlO1xuICAgIHJldHVybiB0eXBlb2YgKGJhc2UgPSB0aGlzLnZpZXcpLm9uU3luYyA9PT0gXCJmdW5jdGlvblwiID8gYmFzZS5vblN5bmMobW9kZWwsIHJlc3BvbnNlLCBvcHRpb25zKSA6IHZvaWQgMDtcbiAgfTtcblxuICBNb2RlbEV2ZW50c0JlaGF2aW9yLnByb3RvdHlwZS5vbk1vZGVsRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgcmVzcG9uc2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgYmFzZTtcbiAgICByZXR1cm4gdHlwZW9mIChiYXNlID0gdGhpcy52aWV3KS5vbkVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBiYXNlLm9uRXJyb3IobW9kZWwsIHJlc3BvbnNlLCBvcHRpb25zKSA6IHZvaWQgMDtcbiAgfTtcblxuICByZXR1cm4gTW9kZWxFdmVudHNCZWhhdmlvcjtcblxufSkoTWFyaW9uZXR0ZS5CZWhhdmlvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kZWxFdmVudHNCZWhhdmlvcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdmJXOWtaV3hGZG1WdWRITXVZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdmJXOWtaV3hGZG1WdWRITXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVTkJMRWxCUVVFc2JVSkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3WjBOQlJVb3NWMEZCUVN4SFFVTkZPMGxCUVVFc1UwRkJRU3hGUVVGWkxHZENRVUZhTzBsQlEwRXNUVUZCUVN4RlFVRlpMR0ZCUkZvN1NVRkZRU3hQUVVGQkxFVkJRVmtzWTBGR1dqczdPMmREUVVsR0xHTkJRVUVzUjBGQlowSXNVMEZCUXl4TFFVRkVMRVZCUVZFc1RVRkJVaXhGUVVGblFpeFBRVUZvUWp0QlFVTmtMRkZCUVVFN2IwVkJRVXNzUTBGQlF5eFZRVUZYTEU5QlFVOHNVVUZCVVR0RlFVUnNRanM3WjBOQlIyaENMRmRCUVVFc1IwRkJZU3hUUVVGRExFdEJRVVFzUlVGQlVTeFJRVUZTTEVWQlFXdENMRTlCUVd4Q08wRkJRMWdzVVVGQlFUdHBSVUZCU3l4RFFVRkRMRTlCUVZFc1QwRkJUeXhWUVVGVk8wVkJSSEJDT3p0blEwRkhZaXhaUVVGQkxFZEJRV01zVTBGQlF5eExRVUZFTEVWQlFWRXNVVUZCVWl4RlFVRnJRaXhQUVVGc1FqdEJRVU5hTEZGQlFVRTdhMFZCUVVzc1EwRkJReXhSUVVGVExFOUJRVThzVlVGQlZUdEZRVVJ3UWpzN096dEhRV0pyUWl4VlFVRlZMRU5CUVVNN08wRkJhMEkzUXl4TlFVRk5MRU5CUVVNc1QwRkJVQ3hIUVVGcFFpSjlcbiIsInZhciBTdWJtaXRCdXR0b25CZWhhdmlvcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cblN1Ym1pdEJ1dHRvbkJlaGF2aW9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKFN1Ym1pdEJ1dHRvbkJlaGF2aW9yLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBTdWJtaXRCdXR0b25CZWhhdmlvcigpIHtcbiAgICByZXR1cm4gU3VibWl0QnV0dG9uQmVoYXZpb3IuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBTdWJtaXRCdXR0b25CZWhhdmlvci5wcm90b3R5cGUudWkgPSB7XG4gICAgc3VibWl0OiAnW2RhdGEtY2xpY2s9c3VibWl0XSdcbiAgfTtcblxuICBTdWJtaXRCdXR0b25CZWhhdmlvci5wcm90b3R5cGUuZXZlbnRzID0ge1xuICAgICdjbGljayBAdWkuc3VibWl0Om5vdCguZGlzYWJsZWQpJzogJ29uU3VibWl0Q2xpY2snXG4gIH07XG5cbiAgU3VibWl0QnV0dG9uQmVoYXZpb3IucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLnZpZXcuZGlzYWJsZVN1Ym1pdCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZGlzYWJsZVN1Ym1pdCgpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy52aWV3LmVuYWJsZVN1Ym1pdCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZW5hYmxlU3VibWl0KCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICB9O1xuXG4gIFN1Ym1pdEJ1dHRvbkJlaGF2aW9yLnByb3RvdHlwZS5vblN1Ym1pdENsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBiYXNlO1xuICAgIHJldHVybiB0eXBlb2YgKGJhc2UgPSB0aGlzLnZpZXcpLm9uU3VibWl0ID09PSBcImZ1bmN0aW9uXCIgPyBiYXNlLm9uU3VibWl0KGUpIDogdm9pZCAwO1xuICB9O1xuXG4gIFN1Ym1pdEJ1dHRvbkJlaGF2aW9yLnByb3RvdHlwZS5kaXNhYmxlU3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudWkuc3VibWl0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICB9O1xuXG4gIFN1Ym1pdEJ1dHRvbkJlaGF2aW9yLnByb3RvdHlwZS5lbmFibGVTdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy51aS5zdWJtaXQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gIH07XG5cbiAgcmV0dXJuIFN1Ym1pdEJ1dHRvbkJlaGF2aW9yO1xuXG59KShNYXJpb25ldHRlLkJlaGF2aW9yKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdWJtaXRCdXR0b25CZWhhdmlvcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdmMzVmliV2wwUW5WMGRHOXVMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDI1dlpHVmZiVzlrZFd4bGN5OW9ibDlpWldoaGRtbHZjbk12YkdsaUwzTjFZbTFwZEVKMWRIUnZiaTVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJTMEVzU1VGQlFTeHZRa0ZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3p0cFEwRkZTaXhGUVVGQkxFZEJRMFU3U1VGQlFTeE5RVUZCTEVWQlFWRXNjVUpCUVZJN096dHBRMEZGUml4TlFVRkJMRWRCUTBVN1NVRkJRU3hwUTBGQlFTeEZRVUZ0UXl4bFFVRnVRenM3TzJsRFFVVkdMRlZCUVVFc1IwRkJXU3hUUVVGRExFOUJRVVE3TzAxQlFVTXNWVUZCVVRzN1NVRkRia0lzU1VGQlF5eERRVUZCTEVsQlFVa3NRMEZCUXl4aFFVRk9MRWRCUVhOQ0xFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUVR0bFFVRkhMRXRCUVVNc1EwRkJRU3hoUVVGRUxFTkJRVUU3VFVGQlNEdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFN1YwRkRkRUlzU1VGQlF5eERRVUZCTEVsQlFVa3NRMEZCUXl4WlFVRk9MRWRCUVhOQ0xFTkJRVUVzVTBGQlFTeExRVUZCTzJGQlFVRXNVMEZCUVR0bFFVRkhMRXRCUVVNc1EwRkJRU3haUVVGRUxFTkJRVUU3VFVGQlNEdEpRVUZCTEVOQlFVRXNRMEZCUVN4RFFVRkJMRWxCUVVFN1JVRkdXanM3YVVOQlNWb3NZVUZCUVN4SFFVRmxMRk5CUVVNc1EwRkJSRHRCUVVGUExGRkJRVUU3YlVWQlFVc3NRMEZCUXl4VFFVRlZPMFZCUVhaQ096dHBRMEZEWml4aFFVRkJMRWRCUVdVc1UwRkJRVHRYUVVGSExFbEJRVU1zUTBGQlFTeEZRVUZGTEVOQlFVTXNUVUZCVFN4RFFVRkRMRkZCUVZnc1EwRkJiMElzVlVGQmNFSTdSVUZCU0RzN2FVTkJRMllzV1VGQlFTeEhRVUZqTEZOQlFVRTdWMEZCU1N4SlFVRkRMRU5CUVVFc1JVRkJSU3hEUVVGRExFMUJRVTBzUTBGQlF5eFhRVUZZTEVOQlFYVkNMRlZCUVhaQ08wVkJRVW83T3pzN1IwRmtiVUlzVlVGQlZTeERRVUZET3p0QlFXdENPVU1zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBUb29sdGlwQmVoYXZpb3IsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5Ub29sdGlwQmVoYXZpb3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoVG9vbHRpcEJlaGF2aW9yLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBUb29sdGlwQmVoYXZpb3IoKSB7XG4gICAgcmV0dXJuIFRvb2x0aXBCZWhhdmlvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIFRvb2x0aXBCZWhhdmlvci5wcm90b3R5cGUudWkgPSB7XG4gICAgdG9vbHRpcHM6ICdbZGF0YS10b2dnbGU9dG9vbHRpcF0nXG4gIH07XG5cbiAgVG9vbHRpcEJlaGF2aW9yLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5jbGVhclRvb2x0aXBzID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jbGVhcigpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgfTtcblxuICBUb29sdGlwQmVoYXZpb3IucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aS50b29sdGlwcy50b29sdGlwKCdoaWRlJyk7XG4gICAgcmV0dXJuIHRoaXMudWkudG9vbHRpcHMudG9vbHRpcCgnZGlzcG9zZScpO1xuICB9O1xuXG4gIFRvb2x0aXBCZWhhdmlvci5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJldHVybiAocmVmID0gdGhpcy51aS50b29sdGlwcykgIT0gbnVsbCA/IHJlZi50b29sdGlwKCkgOiB2b2lkIDA7XG4gIH07XG5cbiAgVG9vbHRpcEJlaGF2aW9yLnByb3RvdHlwZS5vbkJlZm9yZURlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jbGVhcigpO1xuICB9O1xuXG4gIHJldHVybiBUb29sdGlwQmVoYXZpb3I7XG5cbn0pKE1hcmlvbmV0dGUuQmVoYXZpb3IpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvb2x0aXBCZWhhdmlvcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMkpsYUdGMmFXOXljeTlzYVdJdmRHOXZiSFJwY0hNdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgySmxhR0YyYVc5eWN5OXNhV0l2ZEc5dmJIUnBjSE11WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVU5CTEVsQlFVRXNaVUZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3pzMFFrRkZTaXhGUVVGQkxFZEJRMFU3U1VGQlFTeFJRVUZCTEVWQlFWVXNkVUpCUVZZN096czBRa0ZGUml4VlFVRkJMRWRCUVZrc1UwRkJRVHRYUVVWV0xFbEJRVU1zUTBGQlFTeEpRVUZKTEVOQlFVTXNZVUZCVGl4SFFVRnpRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVRTdaVUZCUnl4TFFVRkRMRU5CUVVFc1MwRkJSQ3hEUVVGQk8wMUJRVWc3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJPMFZCUmxvN096UkNRVWxhTEV0QlFVRXNSMEZCVHl4VFFVRkJPMGxCUTB3c1NVRkJReXhEUVVGQkxFVkJRVVVzUTBGQlF5eFJRVUZSTEVOQlFVTXNUMEZCWWl4RFFVRnhRaXhOUVVGeVFqdFhRVU5CTEVsQlFVTXNRMEZCUVN4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExFOUJRV0lzUTBGQmNVSXNVMEZCY2tJN1JVRkdTenM3TkVKQlNWQXNVVUZCUVN4SFFVRlZMRk5CUVVFN1FVRkJSeXhSUVVGQk8ybEVRVUZaTEVOQlFVVXNUMEZCWkN4RFFVRkJPMFZCUVVnN096UkNRVU5XTEdWQlFVRXNSMEZCYVVJc1UwRkJRVHRYUVVGSExFbEJRVU1zUTBGQlFTeExRVUZFTEVOQlFVRTdSVUZCU0RzN096dEhRV1JYTEZWQlFWVXNRMEZCUXpzN1FVRnJRbnBETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsIk1hcmlvbmV0dGUuRGVjb3JhdG9yID0gcmVxdWlyZSgnLi9kZWNvcmF0b3InKTtcblxuTWFyaW9uZXR0ZS5WaWV3LnByb3RvdHlwZS5zZXJpYWxpemVNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXRoaXMubW9kZWwpIHtcbiAgICByZXR1cm4ge307XG4gIH0gZWxzZSBpZiAodGhpcy5tb2RlbC5kZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5kZWNvcmF0b3IuZGVjb3JhdGUodGhpcy5tb2RlbCk7XG4gIH1cbiAgcmV0dXJuIF8uY2xvbmUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJWdWRHbDBhV1Z6TDJ4cFlpOWpiMjVtYVdjdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgyVnVkR2wwYVdWekwyeHBZaTlqYjI1bWFXY3VZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVVkJMRlZCUVZVc1EwRkJReXhUUVVGWUxFZEJRWFZDTEU5QlFVRXNRMEZCVVN4aFFVRlNPenRCUVUxMlFpeFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhqUVVFeFFpeEhRVUV5UXl4VFFVRkJPMFZCUjNwRExFbEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCVkR0QlFVTkZMRmRCUVU4c1IwRkVWRHRIUVVGQkxFMUJTMHNzU1VGQlJ5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRk5CUVdRN1FVRkRTQ3hYUVVGUExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNVMEZCVXl4RFFVRkRMRkZCUVhKQ0xFTkJRVGhDTEVsQlFVa3NRMEZCUXl4TFFVRnVReXhGUVVSS096dEJRVWxNTEZOQlFVOHNRMEZCUXl4RFFVRkRMRXRCUVVZc1EwRkJVU3hKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEZWQlFXNUNPMEZCV210REluMD1cbiIsInZhciBCYXNlRGVjb3JhdG9yO1xuXG5CYXNlRGVjb3JhdG9yID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBCYXNlRGVjb3JhdG9yKCkge31cblxuICBCYXNlRGVjb3JhdG9yLmRlY29yYXRlID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICB2YXIgZGF0YSwgZnVuYywgaSwgbGVuLCByZWY7XG4gICAgZGF0YSA9IF8uY2xvbmUobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgcmVmID0gXy5mdW5jdGlvbnModGhpcy5wcm90b3R5cGUpO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZnVuYyA9IHJlZltpXTtcbiAgICAgIGlmIChmdW5jID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZGF0YVtmdW5jXSA9IHRoaXMucHJvdG90eXBlW2Z1bmNdLmFwcGx5KG1vZGVsKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIEJhc2VEZWNvcmF0b3I7XG5cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZURlY29yYXRvcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMlZ1ZEdsMGFXVnpMMnhwWWk5a1pXTnZjbUYwYjNJdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgyVnVkR2wwYVdWekwyeHBZaTlrWldOdmNtRjBiM0l1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVWxCTEVsQlFVRTdPMEZCUVUwN096dEZRVWxLTEdGQlFVTXNRMEZCUVN4UlFVRkVMRWRCUVZjc1UwRkJReXhMUVVGRU8wRkJTVlFzVVVGQlFUdEpRVUZCTEVsQlFVRXNSMEZCVHl4RFFVRkRMRU5CUVVNc1MwRkJSaXhEUVVGUkxFdEJRVXNzUTBGQlF5eFZRVUZrTzBGQlNWQTdRVUZCUVN4VFFVRkJMSEZEUVVGQk96dE5RVWRGTEVsQlFWa3NTVUZCUVN4TFFVRlJMR0ZCUVhCQ08wRkJRVUVzYVVKQlFVRTdPMDFCUjBFc1NVRkJTeXhEUVVGQkxFbEJRVUVzUTBGQlRDeEhRVUZoTEVsQlFVTXNRMEZCUVN4VFFVRlZMRU5CUVVFc1NVRkJRU3hEUVVGTExFTkJRVU1zUzBGQmFrSXNRMEZCZFVJc1MwRkJka0k3UVVGT1pqdEJRVk5CTEZkQlFVODdSVUZxUWtVN096czdPenRCUVhGQ1lpeE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgRmxhc2hDb2xsZWN0aW9uLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmxhc2hDb2xsZWN0aW9uID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZsYXNoQ29sbGVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmxhc2hDb2xsZWN0aW9uKCkge1xuICAgIHJldHVybiBGbGFzaENvbGxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGbGFzaENvbGxlY3Rpb24ucHJvdG90eXBlLm1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xuXG4gIHJldHVybiBGbGFzaENvbGxlY3Rpb247XG5cbn0pKEJhY2tib25lLkNvbGxlY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYXNoQ29sbGVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMlpzWVhOb0wyeHBZaTlqYjJ4c1pXTjBhVzl1TG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyNXZaR1ZmYlc5a2RXeGxjeTlvYmw5bWJHRnphQzlzYVdJdlkyOXNiR1ZqZEdsdmJpNWpiMlptWldVaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlNVRXNTVUZCUVN4bFFVRkJPMFZCUVVFN096dEJRVUZOT3pzN096czdPelJDUVVOS0xFdEJRVUVzUjBGQlR5eFBRVUZCTEVOQlFWRXNVMEZCVWpzN096dEhRVVJ4UWl4UlFVRlJMRU5CUVVNN08wRkJTM1pETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBGbGFzaENvbXBvbmVudCwgRmxhc2hMaXN0LFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbnJlcXVpcmUoJy4vc2VydmljZScpO1xuXG5GbGFzaExpc3QgPSByZXF1aXJlKCcuL3ZpZXdzL2ZsYXNoTGlzdCcpO1xuXG5GbGFzaENvbXBvbmVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGbGFzaENvbXBvbmVudCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmxhc2hDb21wb25lbnQoKSB7XG4gICAgdGhpcy5zaG93TGlzdFZpZXcgPSBiaW5kKHRoaXMuc2hvd0xpc3RWaWV3LCB0aGlzKTtcbiAgICByZXR1cm4gRmxhc2hDb21wb25lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGbGFzaENvbXBvbmVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2ZsYXNoJykucmVxdWVzdCgnY29sbGVjdGlvbicpLnRoZW4oKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgICBfdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNvbGxlY3Rpb24ub24oJ3VwZGF0ZScsIF90aGlzLnNob3dMaXN0VmlldywgX3RoaXMpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgRmxhc2hDb21wb25lbnQucHJvdG90eXBlLnJhZGlvRXZlbnRzID0ge1xuICAgICdmbGFzaCBhZGQnOiAnYWRkJyxcbiAgICAnZmxhc2ggcmVzZXQnOiAncmVzZXQnLFxuICAgICdmbGFzaCBlcnJvcic6ICdlcnJvcicsXG4gICAgJ2ZsYXNoIHdhcm5pbmcnOiAnd2FybmluZycsXG4gICAgJ2ZsYXNoIHN1Y2Nlc3MnOiAnc3VjY2VzcydcbiAgfTtcblxuICBGbGFzaENvbXBvbmVudC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5hZGQob3B0aW9ucyk7XG4gIH07XG5cbiAgRmxhc2hDb21wb25lbnQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5yZXNldCgpO1xuICB9O1xuXG4gIEZsYXNoQ29tcG9uZW50LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb24uYWRkKF8uZXh0ZW5kKG9wdGlvbnMsIHtcbiAgICAgIGNvbnRleHQ6ICdkYW5nZXInXG4gICAgfSkpO1xuICB9O1xuXG4gIEZsYXNoQ29tcG9uZW50LnByb3RvdHlwZS53YXJuaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5hZGQoXy5leHRlbmQob3B0aW9ucywge1xuICAgICAgY29udGV4dDogJ3dhcm5pbmcnXG4gICAgfSkpO1xuICB9O1xuXG4gIEZsYXNoQ29tcG9uZW50LnByb3RvdHlwZS5zdWNjZXNzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbi5hZGQoXy5leHRlbmQob3B0aW9ucywge1xuICAgICAgY29udGV4dDogJ3N1Y2Nlc3MnXG4gICAgfSkpO1xuICB9O1xuXG4gIEZsYXNoQ29tcG9uZW50LnByb3RvdHlwZS5zaG93TGlzdFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMucmVuZGVyZWQpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnNob3cobmV3IEZsYXNoTGlzdCh7XG4gICAgICAgIGNvbGxlY3Rpb246IHRoaXMuY29sbGVjdGlvblxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRmxhc2hDb21wb25lbnQ7XG5cbn0pKEJhY2tib25lLk1hcmlvbmV0dGUuU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmxhc2hDb21wb25lbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJac1lYTm9MMnhwWWk5amIyMXdiMjVsYm5RdVkyOW1abVZsSWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgyWnNZWE5vTDJ4cFlpOWpiMjF3YjI1bGJuUXVZMjltWm1WbElsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRWxCUVVFc2VVSkJRVUU3UlVGQlFUczdPenRCUVVGQkxFOUJRVUVzUTBGQlVTeFhRVUZTT3p0QlFVTkJMRk5CUVVFc1IwRkJXU3hQUVVGQkxFTkJRVkVzYlVKQlFWSTdPMEZCVVU0N096czdPenM3T3pKQ1FVVktMRlZCUVVFc1IwRkJXU3hUUVVGRExFOUJRVVE3TzAxQlFVTXNWVUZCVlRzN1NVRkRja0lzU1VGQlF5eERRVUZCTEZOQlFVUXNSMEZCWVN4UFFVRlBMRU5CUVVNN1YwRkRja0lzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xFOUJRWFpDTEVOQlFTdENMRU5CUVVNc1QwRkJhRU1zUTBGQmQwTXNXVUZCZUVNc1EwRkJjVVFzUTBGQlF5eEpRVUYwUkN4RFFVRXlSQ3hEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVTXNWVUZCUkR0UlFVTjZSQ3hMUVVGRExFTkJRVUVzVlVGQlJDeEhRVUZqTzJWQlEyUXNTMEZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhGUVVGYUxFTkJRV1VzVVVGQlppeEZRVUY1UWl4TFFVRkRMRU5CUVVFc1dVRkJNVUlzUlVGQmQwTXNTMEZCZUVNN1RVRkdlVVE3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVRORU8wVkJSbFU3T3pKQ1FVMWFMRmRCUVVFc1IwRkRSVHRKUVVGQkxGZEJRVUVzUlVGQmEwSXNTMEZCYkVJN1NVRkRRU3hoUVVGQkxFVkJRV3RDTEU5QlJHeENPMGxCUlVFc1lVRkJRU3hGUVVGclFpeFBRVVpzUWp0SlFVZEJMR1ZCUVVFc1JVRkJhMElzVTBGSWJFSTdTVUZKUVN4bFFVRkJMRVZCUVd0Q0xGTkJTbXhDT3pzN01rSkJUVVlzUjBGQlFTeEhRVUZMTEZOQlFVTXNUMEZCUkRzN1RVRkJReXhWUVVGVk96dFhRVU5rTEVsQlFVTXNRMEZCUVN4VlFVRlZMRU5CUVVNc1IwRkJXaXhEUVVGblFpeFBRVUZvUWp0RlFVUkhPenN5UWtGSFRDeExRVUZCTEVkQlFVOHNVMEZCUVR0WFFVTk1MRWxCUVVNc1EwRkJRU3hWUVVGVkxFTkJRVU1zUzBGQldpeERRVUZCTzBWQlJFczdPekpDUVVkUUxFdEJRVUVzUjBGQlR5eFRRVUZETEU5QlFVUTdPMDFCUVVNc1ZVRkJVVHM3VjBGRFpDeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRWRCUVZvc1EwRkJaMElzUTBGQlF5eERRVUZETEUxQlFVWXNRMEZCVlN4UFFVRldMRVZCUVcxQ08wMUJRVVVzVDBGQlFTeEZRVUZWTEZGQlFWbzdTMEZCYmtJc1EwRkJhRUk3UlVGRVN6czdNa0pCUjFBc1QwRkJRU3hIUVVGVExGTkJRVU1zVDBGQlJEczdUVUZCUXl4VlFVRlJPenRYUVVOb1FpeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRWRCUVZvc1EwRkJaMElzUTBGQlF5eERRVUZETEUxQlFVWXNRMEZCVlN4UFFVRldMRVZCUVcxQ08wMUJRVVVzVDBGQlFTeEZRVUZWTEZOQlFWbzdTMEZCYmtJc1EwRkJhRUk3UlVGRVR6czdNa0pCUjFRc1QwRkJRU3hIUVVGVExGTkJRVU1zVDBGQlJEczdUVUZCUXl4VlFVRlJPenRYUVVOb1FpeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRWRCUVZvc1EwRkJaMElzUTBGQlF5eERRVUZETEUxQlFVWXNRMEZCVlN4UFFVRldMRVZCUVcxQ08wMUJRVVVzVDBGQlFTeEZRVUZWTEZOQlFWbzdTMEZCYmtJc1EwRkJhRUk3UlVGRVR6czdNa0pCUjFRc1dVRkJRU3hIUVVGakxGTkJRVUU3U1VGRFdpeEpRVUZCTEVOQlFVOHNTVUZCUXl4RFFVRkJMRkZCUVZJN1RVRkRSU3hKUVVGRExFTkJRVUVzVTBGQlV5eERRVUZETEVsQlFWZ3NRMEZCWjBJc1NVRkJTU3hUUVVGS0xFTkJRV003VVVGQlJTeFZRVUZCTEVWQlFWa3NTVUZCUXl4RFFVRkJMRlZCUVdZN1QwRkJaQ3hEUVVGb1FqdGhRVU5CTEVsQlFVTXNRMEZCUVN4UlFVRkVMRWRCUVZrc1MwRkdaRHM3UlVGRVdUczdPenRIUVRsQ1lTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRPenRCUVhGRGFrUXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIiwidmFyIEZsYXNoTW9kZWwsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5GbGFzaE1vZGVsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZsYXNoTW9kZWwsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIEZsYXNoTW9kZWwoKSB7XG4gICAgcmV0dXJuIEZsYXNoTW9kZWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGbGFzaE1vZGVsLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICB0aW1lb3V0OiA1MDAwLFxuICAgIGRpc21pc3NpYmxlOiB0cnVlLFxuICAgIGNvbnRleHQ6ICdpbmZvJ1xuICB9O1xuXG4gIEZsYXNoTW9kZWwucHJvdG90eXBlLmRpc21pc3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uLnJlbW92ZSh0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gRmxhc2hNb2RlbDtcblxufSkoQmFja2JvbmUuTW9kZWwpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYXNoTW9kZWw7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJac1lYTm9MMnhwWWk5dGIyUmxiQzVqYjJabVpXVWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUl2VlhObGNuTXZZV1ZyYzJOdkwyZHBkR2gxWWk5dFlXZGxiR3hoYmk5dWIyUmxYMjF2WkhWc1pYTXZhRzVmWm14aGMyZ3ZiR2xpTDIxdlpHVnNMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkpRU3hKUVVGQkxGVkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3ZFVKQlJVb3NVVUZCUVN4SFFVTkZPMGxCUVVFc1QwRkJRU3hGUVVGVExFbEJRVlE3U1VGRFFTeFhRVUZCTEVWQlFXRXNTVUZFWWp0SlFVVkJMRTlCUVVFc1JVRkJVeXhOUVVaVU96czdkVUpCVjBZc1QwRkJRU3hIUVVGVExGTkJRVUU3VjBGRFVDeEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRTFCUVZvc1EwRkJiVUlzU1VGQmJrSTdSVUZFVHpzN096dEhRV1JqTEZGQlFWRXNRMEZCUXpzN1FVRnRRbXhETEUxQlFVMHNRMEZCUXl4UFFVRlFMRWRCUVdsQ0luMD1cbiIsInZhciBGbGFzaENvbGxlY3Rpb24sIEZsYXNoU2VydmljZSxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkZsYXNoQ29sbGVjdGlvbiA9IHJlcXVpcmUoJy4vY29sbGVjdGlvbicpO1xuXG5GbGFzaFNlcnZpY2UgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoRmxhc2hTZXJ2aWNlLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGbGFzaFNlcnZpY2UoKSB7XG4gICAgcmV0dXJuIEZsYXNoU2VydmljZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZsYXNoU2VydmljZS5wcm90b3R5cGUucmFkaW9SZXF1ZXN0cyA9IHtcbiAgICAnZmxhc2ggY29sbGVjdGlvbic6ICdnZXRDb2xsZWN0aW9uJ1xuICB9O1xuXG4gIEZsYXNoU2VydmljZS5wcm90b3R5cGUuYWxlcnRzID0gbnVsbDtcblxuICBGbGFzaFNlcnZpY2UucHJvdG90eXBlLmdldENvbGxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzLmFsZXJ0cyB8fCAoX3RoaXMuYWxlcnRzID0gbmV3IEZsYXNoQ29sbGVjdGlvbigpKTtcbiAgICAgICAgcmVzb2x2ZShfdGhpcy5hbGVydHMpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIEZsYXNoU2VydmljZTtcblxufSkoQmFja2JvbmUuTWFyaW9uZXR0ZS5TZXJ2aWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgRmxhc2hTZXJ2aWNlKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJac1lYTm9MMnhwWWk5elpYSjJhV05sTG1OdlptWmxaU0lzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk5VmMyVnljeTloWld0elkyOHZaMmwwYUhWaUwyMWhaMlZzYkdGdUwyNXZaR1ZmYlc5a2RXeGxjeTlvYmw5bWJHRnphQzlzYVdJdmMyVnlkbWxqWlM1amIyWm1aV1VpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1NVRkJRU3cyUWtGQlFUdEZRVUZCT3pzN1FVRkJRU3hsUVVGQkxFZEJRV3RDTEU5QlFVRXNRMEZCVVN4alFVRlNPenRCUVZGYU96czdPenM3TzNsQ1FVVktMR0ZCUVVFc1IwRkRSVHRKUVVGQkxHdENRVUZCTEVWQlFXOUNMR1ZCUVhCQ096czdlVUpCUlVZc1RVRkJRU3hIUVVGUk96dDVRa0ZGVWl4aFFVRkJMRWRCUVdVc1UwRkJRVHRCUVVOaUxGZEJRVThzU1VGQlNTeFBRVUZLTEVOQlFWa3NRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGRExFOUJRVVFzUlVGQlV5eE5RVUZVTzFGQlEycENMRXRCUVVNc1EwRkJRU3hYUVVGRUxFdEJRVU1zUTBGQlFTeFRRVUZYTEVsQlFVa3NaVUZCU2l4RFFVRkJPMUZCUTFvc1QwRkJRU3hEUVVGUkxFdEJRVU1zUTBGQlFTeE5RVUZVTzAxQlJtbENPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUZhTzBWQlJFMDdPenM3UjBGUVZTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRPenRCUVdVdlF5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaXhKUVVGSkxGbEJRVW9zUTBGQlFTSjlcbiIsInZhciBGbGFzaENoaWxkLCBGbGFzaExpc3QsXG4gIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuRmxhc2hDaGlsZCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChGbGFzaENoaWxkLCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBGbGFzaENoaWxkKCkge1xuICAgIHRoaXMuZGlzbWlzcyA9IGJpbmQodGhpcy5kaXNtaXNzLCB0aGlzKTtcbiAgICByZXR1cm4gRmxhc2hDaGlsZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEZsYXNoQ2hpbGQucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdyb3cnO1xuXG4gIEZsYXNoQ2hpbGQucHJvdG90eXBlLnRlbXBsYXRlID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvZmxhc2hfY2hpbGQnKTtcblxuICBGbGFzaENoaWxkLnByb3RvdHlwZS5hdHRyaWJ1dGVzID0ge1xuICAgIHN0eWxlOiAnZGlzcGxheTpub25lOydcbiAgfTtcblxuICBGbGFzaENoaWxkLnByb3RvdHlwZS51aSA9IHtcbiAgICBjbG9zZTogJ1tkYXRhLWNsaWNrPWRpc21pc3NdJ1xuICB9O1xuXG4gIEZsYXNoQ2hpbGQucHJvdG90eXBlLmV2ZW50cyA9IHtcbiAgICAnY2xpY2sgQHVpLmNsb3NlJzogJ2Rpc21pc3MnXG4gIH07XG5cbiAgRmxhc2hDaGlsZC5wcm90b3R5cGUub25TaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgdGltZW91dCA9IHRoaXMubW9kZWwuZ2V0KCd0aW1lb3V0Jyk7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQodGhpcy5kaXNtaXNzLCB0aW1lb3V0KTtcbiAgfTtcblxuICBGbGFzaENoaWxkLnByb3RvdHlwZS5vbkF0dGFjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiRlbC5mYWRlSW4oKTtcbiAgfTtcblxuICBGbGFzaENoaWxkLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4kZWwuc2xpZGVUb2dnbGUoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXJpb25ldHRlLkxheW91dFZpZXcucHJvdG90eXBlLnJlbW92ZS5jYWxsKF90aGlzKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIEZsYXNoQ2hpbGQucHJvdG90eXBlLmRpc21pc3MgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJldHVybiAocmVmID0gdGhpcy5tb2RlbC5jb2xsZWN0aW9uKSAhPSBudWxsID8gcmVmLnJlbW92ZSh0aGlzLm1vZGVsKSA6IHZvaWQgMDtcbiAgfTtcblxuICByZXR1cm4gRmxhc2hDaGlsZDtcblxufSkoTWFyaW9uZXR0ZS5MYXlvdXRWaWV3KTtcblxuRmxhc2hMaXN0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEZsYXNoTGlzdCwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gRmxhc2hMaXN0KCkge1xuICAgIHJldHVybiBGbGFzaExpc3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBGbGFzaExpc3QucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdjb250YWluZXItZmx1aWQnO1xuXG4gIEZsYXNoTGlzdC5wcm90b3R5cGUuY2hpbGRWaWV3ID0gRmxhc2hDaGlsZDtcblxuICByZXR1cm4gRmxhc2hMaXN0O1xuXG59KShNYXJpb25ldHRlLkNvbGxlY3Rpb25WaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGbGFzaExpc3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJac1lYTm9MMnhwWWk5MmFXVjNjeTltYkdGemFFeHBjM1F1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDJac1lYTm9MMnhwWWk5MmFXVjNjeTltYkdGemFFeHBjM1F1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVWRCTEVsQlFVRXNjVUpCUVVFN1JVRkJRVHM3T3p0QlFVRk5PenM3T3pzN096dDFRa0ZEU2l4VFFVRkJMRWRCUVZjN08zVkNRVU5ZTEZGQlFVRXNSMEZCVlN4UFFVRkJMRU5CUVZFc2VVSkJRVkk3TzNWQ1FVVldMRlZCUVVFc1IwRkRSVHRKUVVGQkxFdEJRVUVzUlVGQlR5eGxRVUZRT3pzN2RVSkJSVVlzUlVGQlFTeEhRVU5GTzBsQlFVRXNTMEZCUVN4RlFVRlBMSE5DUVVGUU96czdkVUpCUlVZc1RVRkJRU3hIUVVORk8wbEJRVUVzYVVKQlFVRXNSVUZCYlVJc1UwRkJia0k3T3p0MVFrRkZSaXhOUVVGQkxFZEJRVkVzVTBGQlFUdEJRVU5PTEZGQlFVRTdTVUZCUVN4UFFVRkJMRWRCUVZVc1NVRkJReXhEUVVGQkxFdEJRVXNzUTBGQlF5eEhRVUZRTEVOQlFWY3NVMEZCV0R0WFFVTldMRlZCUVVFc1EwRkJXU3hKUVVGRExFTkJRVUVzVDBGQllpeEZRVUZ6UWl4UFFVRjBRanRGUVVaTk96dDFRa0ZKVWl4UlFVRkJMRWRCUVZVc1UwRkJRVHRYUVVOU0xFbEJRVU1zUTBGQlFTeEhRVUZITEVOQlFVTXNUVUZCVEN4RFFVRkJPMFZCUkZFN08zVkNRVWRXTEUxQlFVRXNSMEZCVVN4VFFVRkJPMWRCUTA0c1NVRkJReXhEUVVGQkxFZEJRVWNzUTBGQlF5eFhRVUZNTEVOQlFXdENMRU5CUVVFc1UwRkJRU3hMUVVGQk8yRkJRVUVzVTBGQlFUdGxRVU5vUWl4VlFVRlZMRU5CUVVNc1ZVRkJWU3hEUVVGRExGTkJRVk1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCZGtNc1EwRkJORU1zUzBGQk5VTTdUVUZFWjBJN1NVRkJRU3hEUVVGQkxFTkJRVUVzUTBGQlFTeEpRVUZCTEVOQlFXeENPMFZCUkUwN08zVkNRVXRTTEU5QlFVRXNSMEZCVXl4VFFVRkJPMEZCUTFBc1VVRkJRVHR6UkVGQmFVSXNRMEZCUlN4TlFVRnVRaXhEUVVFeVFpeEpRVUZETEVOQlFVRXNTMEZCTlVJN1JVRkVUenM3T3p0SFFYcENZeXhWUVVGVkxFTkJRVU03TzBGQk9FSTVRanM3T3pzN096dHpRa0ZEU2l4VFFVRkJMRWRCUVZjN08zTkNRVU5ZTEZOQlFVRXNSMEZCVnpzN096dEhRVVpYTEZWQlFWVXNRMEZCUXpzN1FVRk5ia01zVFVGQlRTeERRVUZETEU5QlFWQXNSMEZCYVVJaWZRPT1cbiIsInZhciBqYWRlID0gcmVxdWlyZShcImphZGUvcnVudGltZVwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0ZW1wbGF0ZShsb2NhbHMpIHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuO3ZhciBsb2NhbHNfZm9yX3dpdGggPSAobG9jYWxzIHx8IHt9KTsoZnVuY3Rpb24gKGNvbnRleHQsIGRpc21pc3NpYmxlLCBtZXNzYWdlLCBzdHJvbmcpIHtcbmJ1Zi5wdXNoKFwiPGRpdiBjbGFzcz1cXFwiY29sLXhzLTEyIHRleHQtY2VudGVyXFxcIj48ZGl2IHJvbGU9XFxcImFsZXJ0XFxcIlwiICsgKGphZGUuY2xzKFsnYWxlcnQnLCdhbGVydC1kaXNtaXNzaWJsZScsJ2ZhZGUnLCdpbicsXCJhbGVydC1cIiArIGNvbnRleHRdLCBbbnVsbCxudWxsLG51bGwsbnVsbCx0cnVlXSkpICsgXCI+XCIpO1xuaWYgKCBkaXNtaXNzaWJsZSlcbntcbmJ1Zi5wdXNoKFwiPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGRhdGEtY2xpY2s9XFxcImRpc21pc3NcXFwiIGFyaWEtbGFiZWw9XFxcIkNsb3NlXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiPjxzcGFuIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj7Dlzwvc3Bhbj48c3BhbiBjbGFzcz1cXFwic3Itb25seVxcXCI+Q2xvc2U8L3NwYW4+PC9idXR0b24+XCIpO1xufVxuaWYgKCBzdHJvbmcpXG57XG5idWYucHVzaChcIjxzdHJvbmc+XCIgKyAoamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBzdHJvbmcgKyBcIiBcIikgPyBcIlwiIDogamFkZV9pbnRlcnApKSArIFwiPC9zdHJvbmc+XCIpO1xufVxuaWYgKCBtZXNzYWdlKVxue1xuYnVmLnB1c2goamFkZS5lc2NhcGUobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBtZXNzYWdlKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpO1xufVxuYnVmLnB1c2goXCI8L2Rpdj48L2Rpdj5cIik7fS5jYWxsKHRoaXMsXCJjb250ZXh0XCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5jb250ZXh0OnR5cGVvZiBjb250ZXh0IT09XCJ1bmRlZmluZWRcIj9jb250ZXh0OnVuZGVmaW5lZCxcImRpc21pc3NpYmxlXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5kaXNtaXNzaWJsZTp0eXBlb2YgZGlzbWlzc2libGUhPT1cInVuZGVmaW5lZFwiP2Rpc21pc3NpYmxlOnVuZGVmaW5lZCxcIm1lc3NhZ2VcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm1lc3NhZ2U6dHlwZW9mIG1lc3NhZ2UhPT1cInVuZGVmaW5lZFwiP21lc3NhZ2U6dW5kZWZpbmVkLFwic3Ryb25nXCIgaW4gbG9jYWxzX2Zvcl93aXRoP2xvY2Fsc19mb3Jfd2l0aC5zdHJvbmc6dHlwZW9mIHN0cm9uZyE9PVwidW5kZWZpbmVkXCI/c3Ryb25nOnVuZGVmaW5lZCkpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59OyIsInZhciBPdmVybGF5Q29tcG9uZW50LCBPdmVybGF5VmlldyxcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbk92ZXJsYXlWaWV3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE92ZXJsYXlWaWV3LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBPdmVybGF5VmlldygpIHtcbiAgICByZXR1cm4gT3ZlcmxheVZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBPdmVybGF5Vmlldy5wcm90b3R5cGUudGVtcGxhdGUgPSBmYWxzZTtcblxuICBPdmVybGF5Vmlldy5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ292ZXJsYXknO1xuXG4gIE92ZXJsYXlWaWV3LnByb3RvdHlwZS5ldmVudHMgPSB7XG4gICAgJ2NsaWNrJzogJ29uQ2xpY2snXG4gIH07XG5cbiAgT3ZlcmxheVZpZXcucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnc2lkZWJhcicpLnRyaWdnZXIoJ2hpZGUnKTtcbiAgfTtcblxuICByZXR1cm4gT3ZlcmxheVZpZXc7XG5cbn0pKE1uLkxheW91dFZpZXcpO1xuXG5PdmVybGF5Q29tcG9uZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKE92ZXJsYXlDb21wb25lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE92ZXJsYXlDb21wb25lbnQoKSB7XG4gICAgcmV0dXJuIE92ZXJsYXlDb21wb25lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBPdmVybGF5Q29tcG9uZW50LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gIH07XG5cbiAgT3ZlcmxheUNvbXBvbmVudC5wcm90b3R5cGUucmFkaW9FdmVudHMgPSB7XG4gICAgJ292ZXJsYXkgcmVhZHknOiAnb25SZWFkeScsXG4gICAgJ292ZXJsYXkgc2hvdyc6ICdzaG93T3ZlcmxheScsXG4gICAgJ292ZXJsYXkgaGlkZSc6ICdoaWRlT3ZlcmxheSdcbiAgfTtcblxuICBPdmVybGF5Q29tcG9uZW50LnByb3RvdHlwZS5zaG93T3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKCcub3ZlcmxheS1yZWdpb24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gIH07XG5cbiAgT3ZlcmxheUNvbXBvbmVudC5wcm90b3R5cGUuaGlkZU92ZXJsYXkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJCgnLm92ZXJsYXktcmVnaW9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICB9O1xuXG4gIE92ZXJsYXlDb21wb25lbnQucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMudmlldykge1xuICAgICAgdGhpcy52aWV3ID0gbmV3IE92ZXJsYXlWaWV3KCk7XG4gICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuc2hvdyh0aGlzLnZpZXcpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gT3ZlcmxheUNvbXBvbmVudDtcblxufSkoTW4uU2VydmljZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gT3ZlcmxheUNvbXBvbmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYMjkyWlhKc1lYa3ZiR2xpTDJOdmJYQnZibVZ1ZEM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdlZYTmxjbk12WVdWcmMyTnZMMmRwZEdoMVlpOXRZV2RsYkd4aGJpOXViMlJsWDIxdlpIVnNaWE12YUc1ZmIzWmxjbXhoZVM5c2FXSXZZMjl0Y0c5dVpXNTBMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkRRU3hKUVVGQkxEWkNRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3TzNkQ1FVTktMRkZCUVVFc1IwRkJWVHM3ZDBKQlExWXNVMEZCUVN4SFFVRlhPenQzUWtGRldDeE5RVUZCTEVkQlEwVTdTVUZCUVN4UFFVRkJMRVZCUVZNc1UwRkJWRHM3TzNkQ1FVVkdMRTlCUVVFc1IwRkJVeXhUUVVGQk8xZEJRMUFzVVVGQlVTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRm1MRU5CUVhWQ0xGTkJRWFpDTEVOQlFXbERMRU5CUVVNc1QwRkJiRU1zUTBGQk1FTXNUVUZCTVVNN1JVRkVUenM3T3p0SFFWQmxMRVZCUVVVc1EwRkJRenM3UVVGWmRrSTdPenM3T3pzN05rSkJSVW9zVlVGQlFTeEhRVUZaTEZOQlFVTXNUMEZCUkRzN1RVRkJReXhWUVVGVk96dFhRVU55UWl4SlFVRkRMRU5CUVVFc1UwRkJSQ3hIUVVGakxFOUJRVThzUTBGQlF6dEZRVVJhT3pzMlFrRkhXaXhYUVVGQkxFZEJRMFU3U1VGQlFTeGxRVUZCTEVWQlFXdENMRk5CUVd4Q08wbEJRMEVzWTBGQlFTeEZRVUZyUWl4aFFVUnNRanRKUVVWQkxHTkJRVUVzUlVGQmEwSXNZVUZHYkVJN096czJRa0ZKUml4WFFVRkJMRWRCUVdFc1UwRkJRVHRYUVVOWUxFTkJRVUVzUTBGQlJTeHBRa0ZCUml4RFFVRnZRaXhEUVVGRExGRkJRWEpDTEVOQlFUaENMRkZCUVRsQ08wVkJSRmM3T3paQ1FVZGlMRmRCUVVFc1IwRkJZU3hUUVVGQk8xZEJRMWdzUTBGQlFTeERRVUZGTEdsQ1FVRkdMRU5CUVc5Q0xFTkJRVU1zVjBGQmNrSXNRMEZCYVVNc1VVRkJha003UlVGRVZ6czdOa0pCUjJJc1QwRkJRU3hIUVVGVExGTkJRVUU3U1VGRFVDeEpRVUZCTEVOQlFVOHNTVUZCUXl4RFFVRkJMRWxCUVZJN1RVRkRSU3hKUVVGRExFTkJRVUVzU1VGQlJDeEhRVUZSTEVsQlFVa3NWMEZCU2l4RFFVRkJPMkZCUTFJc1NVRkJReXhEUVVGQkxGTkJRVk1zUTBGQlF5eEpRVUZZTEVOQlFXZENMRWxCUVVNc1EwRkJRU3hKUVVGcVFpeEZRVVpHT3p0RlFVUlBPenM3TzBkQmFFSnZRaXhGUVVGRkxFTkJRVU03TzBGQmRVSnNReXhOUVVGTkxFTkJRVU1zVDBGQlVDeEhRVUZwUWlKOVxuIiwidmFyIE1vZGFsUmVnaW9uLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuTW9kYWxSZWdpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTW9kYWxSZWdpb24sIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsUmVnaW9uKCkge1xuICAgIHJldHVybiBNb2RhbFJlZ2lvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE1vZGFsUmVnaW9uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24odmlldywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgdmlldy5vbignaGlkZGVuOm1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZXN0cm95KCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIE1vZGFsUmVnaW9uLl9fc3VwZXJfXy5zaG93LmNhbGwodGhpcywgdmlldywgb3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIE1vZGFsUmVnaW9uO1xuXG59KShNYXJpb25ldHRlLlJlZ2lvbik7XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kYWxSZWdpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDNKbFoybHZibk12YkdsaUwzSmxaMmx2Ym5NdmJXOWtZV3d1WTI5bVptVmxJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpTDFWelpYSnpMMkZsYTNOamJ5OW5hWFJvZFdJdmJXRm5aV3hzWVc0dmJtOWtaVjl0YjJSMWJHVnpMMmh1WDNKbFoybHZibk12YkdsaUwzSmxaMmx2Ym5NdmJXOWtZV3d1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVXRCTEVsQlFVRXNWMEZCUVR0RlFVRkJPenM3UVVGQlRUczdPenM3T3p0M1FrRkZTaXhKUVVGQkxFZEJRVTBzVTBGQlF5eEpRVUZFTEVWQlFVOHNUMEZCVURzN1RVRkJUeXhWUVVGVk96dEpRVU55UWl4SlFVRkpMRU5CUVVNc1JVRkJUQ3hEUVVGUkxHTkJRVklzUlVGQmQwSXNVMEZCUVR0aFFVRkhMRWxCUVVNc1EwRkJRU3hQUVVGRUxFTkJRVUU3U1VGQlNDeERRVUY0UWp0WFFVTkJMSE5EUVVGTkxFbEJRVTRzUlVGQldTeFBRVUZhTzBWQlJrazdPenM3UjBGR2EwSXNWVUZCVlN4RFFVRkRPenRCUVZGeVF5eE5RVUZOTEVOQlFVTXNUMEZCVUN4SFFVRnBRaUo5XG4iLCJ2YXIgQmFzZVJvdXRlLFxuICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuQmFzZVJvdXRlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgZXh0ZW5kKEJhc2VSb3V0ZSwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQmFzZVJvdXRlKCkge1xuICAgIHJldHVybiBCYXNlUm91dGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBCYXNlUm91dGUucHJvdG90eXBlLmJyZWFkY3J1bWJzID0gW107XG5cbiAgQmFzZVJvdXRlLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLm9uKCdiZWZvcmU6ZW50ZXInLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5vbkJlZm9yZUVudGVyID09PSBcImZ1bmN0aW9uXCIgPyBfdGhpcy5vbkJlZm9yZUVudGVyKGFyZ3VtZW50cykgOiB2b2lkIDA7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLm9uKCdiZWZvcmU6ZmV0Y2gnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5vbkJlZm9yZUZldGNoID09PSBcImZ1bmN0aW9uXCIgPyBfdGhpcy5vbkJlZm9yZUZldGNoKGFyZ3VtZW50cykgOiB2b2lkIDA7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLm9uKCdiZWZvcmU6cmVuZGVyJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgX3RoaXMub25CZWZvcmVSZW5kZXIgPT09IFwiZnVuY3Rpb25cIiA/IF90aGlzLm9uQmVmb3JlUmVuZGVyKGFyZ3VtZW50cykgOiB2b2lkIDA7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICB0aGlzLm9uKCdmZXRjaCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIF90aGlzLm9uRmV0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IF90aGlzLm9uRmV0Y2goYXJndW1lbnRzKSA6IHZvaWQgMDtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIHRoaXMub24oJ3JlbmRlcicsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIF90aGlzLm9uUmVuZGVyID09PSBcImZ1bmN0aW9uXCIgPyBfdGhpcy5vblJlbmRlcihhcmd1bWVudHMpIDogdm9pZCAwO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gICAgdGhpcy5vbignZW50ZXInLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBfdGhpcy5vbkVudGVyID09PSBcImZ1bmN0aW9uXCIgPyBfdGhpcy5vbkVudGVyKGFyZ3VtZW50cykgOiB2b2lkIDA7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXR1cm4gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCgnc2lkZWJhcicpLnRyaWdnZXIoJ2hpZGUnKTtcbiAgfTtcblxuICBCYXNlUm91dGUucHJvdG90eXBlLl9zZXRQYWdlVGl0bGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQudGl0bGUgPSBfLnJlc3VsdCh0aGlzLCAndGl0bGUnKTtcbiAgfTtcblxuICBCYXNlUm91dGUucHJvdG90eXBlLl91cGRhdGVCcmVhZGNydW1icyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBicmVhZGNydW1icztcbiAgICBicmVhZGNydW1icyA9IF8ucmVzdWx0KHRoaXMsICdicmVhZGNydW1icycpO1xuICAgIGlmIChicmVhZGNydW1icykge1xuICAgICAgcmV0dXJuIEJhY2tib25lLlJhZGlvLmNoYW5uZWwoJ2JyZWFkY3J1bWInKS50cmlnZ2VyKCdzZXQnLCBicmVhZGNydW1icyk7XG4gICAgfVxuICB9O1xuXG4gIEJhc2VSb3V0ZS5wcm90b3R5cGUub25GZXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3NldFBhZ2VUaXRsZSgpO1xuICAgIHJldHVybiB0aGlzLl91cGRhdGVCcmVhZGNydW1icygpO1xuICB9O1xuXG4gIHJldHVybiBCYXNlUm91dGU7XG5cbn0pKEJhY2tib25lLlJvdXRpbmcuUm91dGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VSb3V0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMMVZ6WlhKekwyRmxhM05qYnk5bmFYUm9kV0l2YldGblpXeHNZVzR2Ym05a1pWOXRiMlIxYkdWekwyaHVYM0p2ZFhScGJtY3ZiR2xpTDNKdmRYUmxMbU52Wm1abFpTSXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJaTlWYzJWeWN5OWhaV3R6WTI4dloybDBhSFZpTDIxaFoyVnNiR0Z1TDI1dlpHVmZiVzlrZFd4bGN5OW9ibDl5YjNWMGFXNW5MMnhwWWk5eWIzVjBaUzVqYjJabVpXVWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJTMEVzU1VGQlFTeFRRVUZCTzBWQlFVRTdPenRCUVVGTk96czdPenM3TzNOQ1FVVktMRmRCUVVFc1IwRkJZVHM3YzBKQlJXSXNWVUZCUVN4SFFVRlpMRk5CUVVNc1QwRkJSRHRKUVVkV0xFbEJRVU1zUTBGQlFTeFBRVUZFTEVkQlFWYzdTVUZIV0N4SlFVRkRMRU5CUVVFc1UwRkJSQ3hIUVVGaExFOUJRVThzUTBGQlF6dEpRVWR5UWl4SlFVRkRMRU5CUVVFc1JVRkJSQ3hEUVVGSkxHTkJRVW9zUlVGQmIwSXNRMEZCUVN4VFFVRkJMRXRCUVVFN1lVRkJRU3hUUVVGQk96SkVRVUZITEV0QlFVTXNRMEZCUVN4alFVRmxPMDFCUVc1Q08wbEJRVUVzUTBGQlFTeERRVUZCTEVOQlFVRXNTVUZCUVN4RFFVRndRanRKUVVOQkxFbEJRVU1zUTBGQlFTeEZRVUZFTEVOQlFVa3NZMEZCU2l4RlFVRnZRaXhEUVVGQkxGTkJRVUVzUzBGQlFUdGhRVUZCTEZOQlFVRTdNa1JCUVVjc1MwRkJReXhEUVVGQkxHTkJRV1U3VFVGQmJrSTdTVUZCUVN4RFFVRkJMRU5CUVVFc1EwRkJRU3hKUVVGQkxFTkJRWEJDTzBsQlEwRXNTVUZCUXl4RFFVRkJMRVZCUVVRc1EwRkJTU3hsUVVGS0xFVkJRWEZDTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHMwUkVGQlJ5eExRVUZETEVOQlFVRXNaVUZCWjBJN1RVRkJjRUk3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVhKQ08wbEJRMEVzU1VGQlF5eERRVUZCTEVWQlFVUXNRMEZCU1N4UFFVRktMRVZCUVdFc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZCTzNGRVFVRkhMRXRCUVVNc1EwRkJRU3hSUVVGVE8wMUJRV0k3U1VGQlFTeERRVUZCTEVOQlFVRXNRMEZCUVN4SlFVRkJMRU5CUVdJN1NVRkRRU3hKUVVGRExFTkJRVUVzUlVGQlJDeERRVUZKTEZGQlFVb3NSVUZCWXl4RFFVRkJMRk5CUVVFc1MwRkJRVHRoUVVGQkxGTkJRVUU3YzBSQlFVY3NTMEZCUXl4RFFVRkJMRk5CUVZVN1RVRkJaRHRKUVVGQkxFTkJRVUVzUTBGQlFTeERRVUZCTEVsQlFVRXNRMEZCWkR0SlFVTkJMRWxCUVVNc1EwRkJRU3hGUVVGRUxFTkJRVWtzVDBGQlNpeEZRVUZoTEVOQlFVRXNVMEZCUVN4TFFVRkJPMkZCUVVFc1UwRkJRVHR4UkVGQlJ5eExRVUZETEVOQlFVRXNVVUZCVXp0TlFVRmlPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUZpTzFkQlIwRXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGbUxFTkJRWFZDTEZOQlFYWkNMRU5CUVdsRExFTkJRVU1zVDBGQmJFTXNRMEZCTUVNc1RVRkJNVU03UlVGcVFsVTdPM05DUVcxQ1dpeGhRVUZCTEVkQlFXVXNVMEZCUVR0WFFVTmlMRkZCUVZFc1EwRkJReXhMUVVGVUxFZEJRV2xDTEVOQlFVTXNRMEZCUXl4TlFVRkdMRU5CUVZNc1NVRkJWQ3hGUVVGWkxFOUJRVm83UlVGRVNqczdjMEpCUjJZc2EwSkJRVUVzUjBGQmIwSXNVMEZCUVR0QlFVTnNRaXhSUVVGQk8wbEJRVUVzVjBGQlFTeEhRVUZqTEVOQlFVTXNRMEZCUXl4TlFVRkdMRU5CUVZNc1NVRkJWQ3hGUVVGWkxHRkJRVm83U1VGRFpDeEpRVUZ2UlN4WFFVRndSVHRoUVVGQkxGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCWml4RFFVRjFRaXhaUVVGMlFpeERRVUZ2UXl4RFFVRkRMRTlCUVhKRExFTkJRVFpETEV0QlFUZERMRVZCUVc5RUxGZEJRWEJFTEVWQlFVRTdPMFZCUm10Q096dHpRa0ZKY0VJc1QwRkJRU3hIUVVGVExGTkJRVUU3U1VGRFVDeEpRVUZETEVOQlFVRXNZVUZCUkN4RFFVRkJPMWRCUTBFc1NVRkJReXhEUVVGQkxHdENRVUZFTEVOQlFVRTdSVUZHVHpzN096dEhRVGxDWVN4UlFVRlJMRU5CUVVNc1QwRkJUeXhEUVVGRE96dEJRVzlEZWtNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgQmFzZVJvdXRlcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkJhc2VSb3V0ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoQmFzZVJvdXRlciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gQmFzZVJvdXRlcigpIHtcbiAgICByZXR1cm4gQmFzZVJvdXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEJhc2VSb3V0ZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG4gIH07XG5cbiAgcmV0dXJuIEJhc2VSb3V0ZXI7XG5cbn0pKEJhY2tib25lLlJvdXRpbmcuUm91dGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlUm91dGVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUwxVnpaWEp6TDJGbGEzTmpieTluYVhSb2RXSXZiV0ZuWld4c1lXNHZibTlrWlY5dGIyUjFiR1Z6TDJodVgzSnZkWFJwYm1jdmJHbGlMM0p2ZFhSbGNpNWpiMlptWldVaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXZWWE5sY25NdllXVnJjMk52TDJkcGRHaDFZaTl0WVdkbGJHeGhiaTl1YjJSbFgyMXZaSFZzWlhNdmFHNWZjbTkxZEdsdVp5OXNhV0l2Y205MWRHVnlMbU52Wm1abFpTSmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRk5RU3hKUVVGQkxGVkJRVUU3UlVGQlFUczdPMEZCUVUwN096czdPenM3ZFVKQlJVb3NWVUZCUVN4SFFVRlpMRk5CUVVNc1QwRkJSRHRYUVVGaExFbEJRVU1zUTBGQlFTeFRRVUZFTEVkQlFXRXNUMEZCVHl4RFFVRkRPMFZCUVd4RE96czdPMGRCUmxjc1VVRkJVU3hEUVVGRExFOUJRVThzUTBGQlF6czdRVUZOTVVNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG4oZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5qYWRlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1lcmdlIHR3byBhdHRyaWJ1dGUgb2JqZWN0cyBnaXZpbmcgcHJlY2VkZW5jZVxuICogdG8gdmFsdWVzIGluIG9iamVjdCBgYmAuIENsYXNzZXMgYXJlIHNwZWNpYWwtY2FzZWRcbiAqIGFsbG93aW5nIGZvciBhcnJheXMgYW5kIG1lcmdpbmcvam9pbmluZyBhcHByb3ByaWF0ZWx5XG4gKiByZXN1bHRpbmcgaW4gYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKiBAcmV0dXJuIHtPYmplY3R9IGFcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMubWVyZ2UgPSBmdW5jdGlvbiBtZXJnZShhLCBiKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgdmFyIGF0dHJzID0gYVswXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGF0dHJzID0gbWVyZ2UoYXR0cnMsIGFbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cnM7XG4gIH1cbiAgdmFyIGFjID0gYVsnY2xhc3MnXTtcbiAgdmFyIGJjID0gYlsnY2xhc3MnXTtcblxuICBpZiAoYWMgfHwgYmMpIHtcbiAgICBhYyA9IGFjIHx8IFtdO1xuICAgIGJjID0gYmMgfHwgW107XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFjKSkgYWMgPSBbYWNdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShiYykpIGJjID0gW2JjXTtcbiAgICBhWydjbGFzcyddID0gYWMuY29uY2F0KGJjKS5maWx0ZXIobnVsbHMpO1xuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoa2V5ICE9ICdjbGFzcycpIHtcbiAgICAgIGFba2V5XSA9IGJba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYTtcbn07XG5cbi8qKlxuICogRmlsdGVyIG51bGwgYHZhbGBzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbnVsbHModmFsKSB7XG4gIHJldHVybiB2YWwgIT0gbnVsbCAmJiB2YWwgIT09ICcnO1xufVxuXG4vKipcbiAqIGpvaW4gYXJyYXkgYXMgY2xhc3Nlcy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmpvaW5DbGFzc2VzID0gam9pbkNsYXNzZXM7XG5mdW5jdGlvbiBqb2luQ2xhc3Nlcyh2YWwpIHtcbiAgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGpvaW5DbGFzc2VzKSA6XG4gICAgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JykgPyBPYmplY3Qua2V5cyh2YWwpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiB2YWxba2V5XTsgfSkgOlxuICAgIFt2YWxdKS5maWx0ZXIobnVsbHMpLmpvaW4oJyAnKTtcbn1cblxuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGNsYXNzZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gY2xhc3Nlc1xuICogQHBhcmFtIHtBcnJheS48Qm9vbGVhbj59IGVzY2FwZWRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5jbHMgPSBmdW5jdGlvbiBjbHMoY2xhc3NlcywgZXNjYXBlZCkge1xuICB2YXIgYnVmID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChlc2NhcGVkICYmIGVzY2FwZWRbaV0pIHtcbiAgICAgIGJ1Zi5wdXNoKGV4cG9ydHMuZXNjYXBlKGpvaW5DbGFzc2VzKFtjbGFzc2VzW2ldXSkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLnB1c2goam9pbkNsYXNzZXMoY2xhc3Nlc1tpXSkpO1xuICAgIH1cbiAgfVxuICB2YXIgdGV4dCA9IGpvaW5DbGFzc2VzKGJ1Zik7XG4gIGlmICh0ZXh0Lmxlbmd0aCkge1xuICAgIHJldHVybiAnIGNsYXNzPVwiJyArIHRleHQgKyAnXCInO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufTtcblxuXG5leHBvcnRzLnN0eWxlID0gZnVuY3Rpb24gKHZhbCkge1xuICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgcmV0dXJuIHN0eWxlICsgJzonICsgdmFsW3N0eWxlXTtcbiAgICB9KS5qb2luKCc7Jyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxufTtcbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBlc2NhcGVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHRlcnNlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuYXR0ciA9IGZ1bmN0aW9uIGF0dHIoa2V5LCB2YWwsIGVzY2FwZWQsIHRlcnNlKSB7XG4gIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICB2YWwgPSBleHBvcnRzLnN0eWxlKHZhbCk7XG4gIH1cbiAgaWYgKCdib29sZWFuJyA9PSB0eXBlb2YgdmFsIHx8IG51bGwgPT0gdmFsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgcmV0dXJuICcgJyArICh0ZXJzZSA/IGtleSA6IGtleSArICc9XCInICsga2V5ICsgJ1wiJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoMCA9PSBrZXkuaW5kZXhPZignZGF0YScpICYmICdzdHJpbmcnICE9IHR5cGVvZiB2YWwpIHtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkodmFsKS5pbmRleE9mKCcmJykgIT09IC0xKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NpbmNlIEphZGUgMi4wLjAsIGFtcGVyc2FuZHMgKGAmYCkgaW4gZGF0YSBhdHRyaWJ1dGVzICcgK1xuICAgICAgICAgICAgICAgICAgICd3aWxsIGJlIGVzY2FwZWQgdG8gYCZhbXA7YCcpO1xuICAgIH07XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0phZGUgd2lsbCBlbGltaW5hdGUgdGhlIGRvdWJsZSBxdW90ZXMgYXJvdW5kIGRhdGVzIGluICcgK1xuICAgICAgICAgICAgICAgICAgICdJU08gZm9ybSBhZnRlciAyLjAuMCcpO1xuICAgIH1cbiAgICByZXR1cm4gJyAnICsga2V5ICsgXCI9J1wiICsgSlNPTi5zdHJpbmdpZnkodmFsKS5yZXBsYWNlKC8nL2csICcmYXBvczsnKSArIFwiJ1wiO1xuICB9IGVsc2UgaWYgKGVzY2FwZWQpIHtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignSmFkZSB3aWxsIHN0cmluZ2lmeSBkYXRlcyBpbiBJU08gZm9ybSBhZnRlciAyLjAuMCcpO1xuICAgIH1cbiAgICByZXR1cm4gJyAnICsga2V5ICsgJz1cIicgKyBleHBvcnRzLmVzY2FwZSh2YWwpICsgJ1wiJztcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignSmFkZSB3aWxsIHN0cmluZ2lmeSBkYXRlcyBpbiBJU08gZm9ybSBhZnRlciAyLjAuMCcpO1xuICAgIH1cbiAgICByZXR1cm4gJyAnICsga2V5ICsgJz1cIicgKyB2YWwgKyAnXCInO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gYXR0cmlidXRlcyBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtPYmplY3R9IGVzY2FwZWRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5hdHRycyA9IGZ1bmN0aW9uIGF0dHJzKG9iaiwgdGVyc2Upe1xuICB2YXIgYnVmID0gW107XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXG4gIGlmIChrZXlzLmxlbmd0aCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV1cbiAgICAgICAgLCB2YWwgPSBvYmpba2V5XTtcblxuICAgICAgaWYgKCdjbGFzcycgPT0ga2V5KSB7XG4gICAgICAgIGlmICh2YWwgPSBqb2luQ2xhc3Nlcyh2YWwpKSB7XG4gICAgICAgICAgYnVmLnB1c2goJyAnICsga2V5ICsgJz1cIicgKyB2YWwgKyAnXCInKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmLnB1c2goZXhwb3J0cy5hdHRyKGtleSwgdmFsLCBmYWxzZSwgdGVyc2UpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmLmpvaW4oJycpO1xufTtcblxuLyoqXG4gKiBFc2NhcGUgdGhlIGdpdmVuIHN0cmluZyBvZiBgaHRtbGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciBqYWRlX2VuY29kZV9odG1sX3J1bGVzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90Oydcbn07XG52YXIgamFkZV9tYXRjaF9odG1sID0gL1smPD5cIl0vZztcblxuZnVuY3Rpb24gamFkZV9lbmNvZGVfY2hhcihjKSB7XG4gIHJldHVybiBqYWRlX2VuY29kZV9odG1sX3J1bGVzW2NdIHx8IGM7XG59XG5cbmV4cG9ydHMuZXNjYXBlID0gamFkZV9lc2NhcGU7XG5mdW5jdGlvbiBqYWRlX2VzY2FwZShodG1sKXtcbiAgdmFyIHJlc3VsdCA9IFN0cmluZyhodG1sKS5yZXBsYWNlKGphZGVfbWF0Y2hfaHRtbCwgamFkZV9lbmNvZGVfY2hhcik7XG4gIGlmIChyZXN1bHQgPT09ICcnICsgaHRtbCkgcmV0dXJuIGh0bWw7XG4gIGVsc2UgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogUmUtdGhyb3cgdGhlIGdpdmVuIGBlcnJgIGluIGNvbnRleHQgdG8gdGhlXG4gKiB0aGUgamFkZSBpbiBgZmlsZW5hbWVgIGF0IHRoZSBnaXZlbiBgbGluZW5vYC5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IGxpbmVub1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5yZXRocm93ID0gZnVuY3Rpb24gcmV0aHJvdyhlcnIsIGZpbGVuYW1lLCBsaW5lbm8sIHN0cil7XG4gIGlmICghKGVyciBpbnN0YW5jZW9mIEVycm9yKSkgdGhyb3cgZXJyO1xuICBpZiAoKHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgfHwgIWZpbGVuYW1lKSAmJiAhc3RyKSB7XG4gICAgZXJyLm1lc3NhZ2UgKz0gJyBvbiBsaW5lICcgKyBsaW5lbm87XG4gICAgdGhyb3cgZXJyO1xuICB9XG4gIHRyeSB7XG4gICAgc3RyID0gc3RyIHx8IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jKGZpbGVuYW1lLCAndXRmOCcpXG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgcmV0aHJvdyhlcnIsIG51bGwsIGxpbmVubylcbiAgfVxuICB2YXIgY29udGV4dCA9IDNcbiAgICAsIGxpbmVzID0gc3RyLnNwbGl0KCdcXG4nKVxuICAgICwgc3RhcnQgPSBNYXRoLm1heChsaW5lbm8gLSBjb250ZXh0LCAwKVxuICAgICwgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBsaW5lbm8gKyBjb250ZXh0KTtcblxuICAvLyBFcnJvciBjb250ZXh0XG4gIHZhciBjb250ZXh0ID0gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCkubWFwKGZ1bmN0aW9uKGxpbmUsIGkpe1xuICAgIHZhciBjdXJyID0gaSArIHN0YXJ0ICsgMTtcbiAgICByZXR1cm4gKGN1cnIgPT0gbGluZW5vID8gJyAgPiAnIDogJyAgICAnKVxuICAgICAgKyBjdXJyXG4gICAgICArICd8ICdcbiAgICAgICsgbGluZTtcbiAgfSkuam9pbignXFxuJyk7XG5cbiAgLy8gQWx0ZXIgZXhjZXB0aW9uIG1lc3NhZ2VcbiAgZXJyLnBhdGggPSBmaWxlbmFtZTtcbiAgZXJyLm1lc3NhZ2UgPSAoZmlsZW5hbWUgfHwgJ0phZGUnKSArICc6JyArIGxpbmVub1xuICAgICsgJ1xcbicgKyBjb250ZXh0ICsgJ1xcblxcbicgKyBlcnIubWVzc2FnZTtcbiAgdGhyb3cgZXJyO1xufTtcblxuZXhwb3J0cy5EZWJ1Z0l0ZW0gPSBmdW5jdGlvbiBEZWJ1Z0l0ZW0obGluZW5vLCBmaWxlbmFtZSkge1xuICB0aGlzLmxpbmVubyA9IGxpbmVubztcbiAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xufVxuXG59LHtcImZzXCI6Mn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXG59LHt9XX0se30sWzFdKSgxKVxufSk7XG59KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2Mi4xLjRcbiAqIGh0dHA6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE1LTA0LTI4VDE2OjAxWlxuICovXG5cbihmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vXG5cbnZhciBhcnIgPSBbXTtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcblx0Ly8gVXNlIHRoZSBjb3JyZWN0IGRvY3VtZW50IGFjY29yZGluZ2x5IHdpdGggd2luZG93IGFyZ3VtZW50IChzYW5kYm94KVxuXHRkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuXHR2ZXJzaW9uID0gXCIyLjEuNFwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFxuXG5cdC8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xuXHRybXNQcmVmaXggPSAvXi1tcy0vLFxuXHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvclxuXHRzZWxlY3RvcjogXCJcIixcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0cmV0dXJuIG51bSAhPSBudWxsID9cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0KCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOlxuXG5cdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcdHJldC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdC8vIChZb3UgY2FuIHNlZWQgdGhlIGFyZ3VtZW50cyB3aXRoIGFuIGFycmF5IG9mIGFyZ3MsIGJ1dCB0aGlzIGlzXG5cdC8vIG9ubHkgdXNlZCBpbnRlcm5hbGx5Lilcblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2ssIGFyZ3MgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAodGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0pKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzW2pdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24odGFyZ2V0KSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoIChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9IG51bGwgKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheShjb3B5KSkgKSApIHtcblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xuXHR9LFxuXG5cdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cblx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fSxcblxuXHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAob2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKyAxKSA+PSAwO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gTm90IHBsYWluIG9iamVjdHM6XG5cdFx0Ly8gLSBBbnkgb2JqZWN0IG9yIHZhbHVlIHdob3NlIGludGVybmFsIFtbQ2xhc3NdXSBwcm9wZXJ0eSBpcyBub3QgXCJbb2JqZWN0IE9iamVjdF1cIlxuXHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0Ly8gLSB3aW5kb3dcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBvYmogKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIG9iai5jb25zdHJ1Y3RvciAmJlxuXHRcdFx0XHQhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGZ1bmN0aW9uIGhhc24ndCByZXR1cm5lZCBhbHJlYWR5LCB3ZSdyZSBjb25maWRlbnQgdGhhdFxuXHRcdC8vIHxvYmp8IGlzIGEgcGxhaW4gb2JqZWN0LCBjcmVhdGVkIGJ5IHt9IG9yIGNvbnN0cnVjdGVkIHdpdGggbmV3IE9iamVjdFxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdHR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdH1cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMCwgaU9TPDYgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0XHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbChvYmopIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0XHR0eXBlb2Ygb2JqO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdHZhciBzY3JpcHQsXG5cdFx0XHRpbmRpcmVjdCA9IGV2YWw7XG5cblx0XHRjb2RlID0galF1ZXJ5LnRyaW0oIGNvZGUgKTtcblxuXHRcdGlmICggY29kZSApIHtcblx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHQvLyBzdHJpY3QgbW9kZSBwcmFnbWEsIGV4ZWN1dGUgY29kZSBieSBpbmplY3RpbmcgYVxuXHRcdFx0Ly8gc2NyaXB0IHRhZyBpbnRvIHRoZSBkb2N1bWVudC5cblx0XHRcdGlmICggY29kZS5pbmRleE9mKFwidXNlIHN0cmljdFwiKSA9PT0gMSApIHtcblx0XHRcdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0XHRcdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGF2b2lkIHRoZSBET00gbm9kZSBjcmVhdGlvbiwgaW5zZXJ0aW9uXG5cdFx0XHQvLyBhbmQgcmVtb3ZhbCBieSB1c2luZyBhbiBpbmRpcmVjdCBnbG9iYWwgZXZhbFxuXHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdC8vIGFyZ3MgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBvYmogKTtcblxuXHRcdGlmICggYXJncyApIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEEgc3BlY2lhbCwgZmFzdCwgY2FzZSBmb3IgdGhlIG1vc3QgY29tbW9uIHVzZSBvZiBlYWNoXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlsaWtlKCBPYmplY3QoYXJyKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRpc0FycmF5ID0gaXNBcnJheWxpa2UoIGVsZW1zICksXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcblx0Ly8gYXJndW1lbnRzLlxuXHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0XHRjb250ZXh0ID0gZm47XG5cdFx0XHRmbiA9IHRtcDtcblx0XHR9XG5cblx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRcdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0XHRyZXR1cm4gcHJveHk7XG5cdH0sXG5cblx0bm93OiBEYXRlLm5vdyxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSk7XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbihpLCBuYW1lKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlsaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9IFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjAtcHJlXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA4LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMTZcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG5cdGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuXHQvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHQvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblxuXHQvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcblx0XHQvLyBRU0EgdmFyc1xuXHRcdGksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yO1xuXG5cdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0bm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlO1xuXG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0aWYgKCAhc2VlZCAmJiBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgd2hlbiBwb3NzaWJsZSAoZS5nLiwgbm90IHVuZGVyIERvY3VtZW50RnJhZ21lbnQpXG5cdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcblx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcblx0XHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcblx0XHRcdFx0XHRcdC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFFTQSBwYXRoXG5cdFx0aWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0bmlkID0gb2xkID0gZXhwYW5kbztcblx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bmV3U2VsZWN0b3IgPSBub2RlVHlwZSAhPT0gMSAmJiBzZWxlY3RvcjtcblxuXHRcdFx0Ly8gcVNBIHdvcmtzIHN0cmFuZ2VseSBvbiBFbGVtZW50LXJvb3RlZCBxdWVyaWVzXG5cdFx0XHQvLyBXZSBjYW4gd29yayBhcm91bmQgdGhpcyBieSBzcGVjaWZ5aW5nIGFuIGV4dHJhIElEIG9uIHRoZSByb290XG5cdFx0XHQvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcblx0XHRcdC8vIElFIDggZG9lc24ndCB3b3JrIG9uIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuXHRcdFx0XHRcdG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgbmlkICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuXHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQ7XG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oXCIsXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9IGNhdGNoKHFzYUVycm9yKSB7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCAhb2xkICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBkaXYgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0ZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGRpdiA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gU2V0IG91ciBkb2N1bWVudFxuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHBhcmVudCA9IGRvYy5kZWZhdWx0VmlldztcblxuXHQvLyBTdXBwb3J0OiBJRT44XG5cdC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcblx0Ly8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuXHQvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG5cdGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcblx0XHQvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIFN1cHBvcnQgdGVzdHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjNcblx0XHRcdFx0cmV0dXJuIG0gJiYgbS5wYXJlbnROb2RlID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuMissIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS43K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsIFwiZGl2XCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvYyB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2MgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMV07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMV07XG5cblx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLikgb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkgJiYgKytkaWZmICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLFxuXHRcdFx0XHRuZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTtcblxuXHRcdFx0Ly8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gZGlyIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBubyBzZWVkIGFuZCBvbmx5IG9uZSBncm91cFxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFRha2UgYSBzaG9ydGN1dCBhbmQgc2V0IHRoZSBjb250ZXh0IGlmIHRoZSByb290IHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0cnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwcltcIjpcIl0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICgvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8pO1xuXG5cblxudmFyIHJpc1NpbXBsZSA9IC9eLlteOiNcXFtcXC4sXSokLztcblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID49IDAgKSAhPT0gbm90O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdFx0fSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclswXSA9PT0gXCI8XCIgJiYgc2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiYgc2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFswXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWzFdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWzFdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWzJdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWzBdID0gZWxlbTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9LFxuXG5cdHNpYmxpbmc6IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHRcdHZhciBtYXRjaGVkID0gW107XG5cblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cblx0XHRcdFx0XHRwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWUoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3Rvcilcblx0XHQpO1xuXHR9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKGN1ciA9IGN1cltkaXJdKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCh7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdCggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcblx0XHRtZW1vcnksXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXHRcdC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuXHRcdGZpcmluZ1N0YXJ0LFxuXHRcdC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuXHRcdGZpcmluZ0xlbmd0aCxcblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4LFxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXHRcdC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuXHRcdFx0ZmlyZWQgPSB0cnVlO1xuXHRcdFx0ZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuXHRcdFx0ZmlyaW5nU3RhcnQgPSAwO1xuXHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdGlmICggc3RhY2sgKSB7XG5cdFx0XHRcdFx0aWYgKCBzdGFjay5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBzdGFjay5zaGlmdCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0Ly8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG5cdFx0XHRcdFx0dmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0KGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0Ly8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcblx0XHRcdFx0XHQvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cblx0XHRcdFx0XHQvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nU3RhcnQgPSBzdGFydDtcblx0XHRcdFx0XHRcdGZpcmUoIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gMDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGRpc2FibGVkP1xuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHN0YWNrID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgbG9ja2VkP1xuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFzdGFjaztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpcmUoIGFyZ3MgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cblx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXG5cdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuXHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG5cdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQtLXJlbWFpbmluZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcblx0XHRpZiAoICFyZW1haW5pbmcgKSB7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0fVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cdC8vIEFkZCB0aGUgY2FsbGJhY2tcblx0alF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuXHRob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuXHRcdGlmICggaG9sZCApIHtcblx0XHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuXHRcdC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuXHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBXZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcblx0XHQvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGpRdWVyeS5hY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0ZWxlbXMgOlxuXG5cdFx0Ly8gR2V0c1xuXHRcdGJ1bGsgP1xuXHRcdFx0Zm4uY2FsbCggZWxlbXMgKSA6XG5cdFx0XHRsZW4gPyBmbiggZWxlbXNbMF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gaGF2ZSBkYXRhXG4gKi9cbmpRdWVyeS5hY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0LyoganNoaW50IC1XMDE4ICovXG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LFxuXHQvLyBPbGQgV2ViS2l0IGRvZXMgbm90IGhhdmUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zL2ZyZWV6ZSBtZXRob2QsXG5cdC8vIHJldHVybiBuZXcgZW1wdHkgb2JqZWN0IGluc3RlYWQgd2l0aCBubyBbW3NldF1dIGFjY2Vzc29yXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5jYWNoZSA9IHt9LCAwLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH0pO1xuXG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuRGF0YS5hY2NlcHRzID0galF1ZXJ5LmFjY2VwdERhdGE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXHRrZXk6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gdGhlIGtleSBmb3IgYSBmcm96ZW4gb2JqZWN0LlxuXHRcdGlmICggIURhdGEuYWNjZXB0cyggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBkZXNjcmlwdG9yID0ge30sXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGUga2V5XG5cdFx0XHR1bmxvY2sgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF1bmxvY2sgKSB7XG5cdFx0XHR1bmxvY2sgPSBEYXRhLnVpZCsrO1xuXG5cdFx0XHQvLyBTZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHsgdmFsdWU6IHVubG9jayB9O1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggb3duZXIsIGRlc2NyaXB0b3IgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBhIGxlc3Mgc2VjdXJlIGRlZmluaXRpb25cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHVubG9jaztcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggb3duZXIsIGRlc2NyaXB0b3IgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhlIGNhY2hlIG9iamVjdFxuXHRcdGlmICggIXRoaXMuY2FjaGVbIHVubG9jayBdICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5sb2NrO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHQvLyBUaGVyZSBtYXkgYmUgYW4gdW5sb2NrIGFzc2lnbmVkIHRvIHRoaXMgbm9kZSxcblx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIFwib3duZXJcIiwgY3JlYXRlIG9uZSBpbmxpbmVcblx0XHRcdC8vIGFuZCBzZXQgdGhlIHVubG9jayBhcyB0aG91Z2ggYW4gb3duZXIgZW50cnkgaGFkIGFsd2F5cyBleGlzdGVkXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZyZXNoIGFzc2lnbm1lbnRzIGJ5IG9iamVjdCBhcmUgc2hhbGxvdyBjb3BpZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIHRoaXMuY2FjaGVbIHVubG9jayBdLCBkYXRhICk7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGNvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0Ly8gRWl0aGVyIGEgdmFsaWQgY2FjaGUgaXMgZm91bmQsIG9yIHdpbGwgYmUgY3JlYXRlZC5cblx0XHQvLyBOZXcgY2FjaGVzIHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIHVubG9jayByZXR1cm5lZCxcblx0XHQvLyBhbGxvd2luZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBuZXdseSBjcmVhdGVkXG5cdFx0Ly8gZW1wdHkgZGF0YSBvYmplY3QuIEEgdmFsaWQgb3duZXIgb2JqZWN0IG11c3QgYmUgcHJvdmlkZWQuXG5cdFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZVsgdGhpcy5rZXkoIG93bmVyICkgXTtcblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRjYWNoZSA6IGNhY2hlWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoKGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKGtleSkgKTtcblx0XHR9XG5cblx0XHQvLyBbKl1XaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGNhbWVsLFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRpZiAoIGtleSBpbiBjYWNoZSApIHtcblx0XHRcdFx0XHRuYW1lID0gWyBrZXksIGNhbWVsIF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoXG5cdFx0XHR0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXSB8fCB7fVxuXHRcdCk7XG5cdH0sXG5cdGRpc2NhcmQ6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRpZiAoIG93bmVyWyB0aGlzLmV4cGFuZG8gXSApIHtcblx0XHRcdGRlbGV0ZSB0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn07XG52YXIgZGF0YV9wcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFfdXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFfdXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3VzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YV9wcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLFxuXHRcdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXG5cdFx0XHRcdC8vICouLi4gSW4gdGhlIGNhc2Ugb2YgcHJvcGVydGllcyB0aGF0IG1pZ2h0IF9hY3R1YWxseV9cblx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHQvLyB1bmNoYW5nZWQgcHJvcGVydHkuXG5cdFx0XHRcdGlmICgga2V5LmluZGV4T2YoXCItXCIpICE9PSAtMSAmJiBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhX3VzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YV9wcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1swXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWzBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59KTtcbnZhciBwbnVtID0gKC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvKS5zb3VyY2U7XG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0pKCk7XG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFxuXHRyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkkLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gc3RydW5kZWZpbmVkICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG5cdFx0ZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YV9wcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBqUXVlcnkuYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcblx0XHRcdFx0alF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YV9wcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWzBdID0gZXZlbnQ7XG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuXHRcdFx0XHRcdFx0XHQuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0cHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdG1vdXNlSG9va3M6IHtcblx0XHRwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRmb2N1czoge1xuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcblx0XHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUuXG5cdFx0Ly8gRmFrZSBvcmlnaW5hbEV2ZW50IHRvIGF2b2lkIGRvbm9yJ3Mgc3RvcFByb3BhZ2F0aW9uLCBidXQgaWYgdGhlXG5cdFx0Ly8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlLFxuXHRcdFx0XHRvcmlnaW5hbEV2ZW50OiB7fVxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0aWYgKCBidWJibGUgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guY2FsbCggZWxlbSwgZSApO1xuXHRcdH1cblx0XHRpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQpICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnByZXZlbnREZWZhdWx0ICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcFByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTUrXG5qUXVlcnkuZWFjaCh7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3gsIENocm9tZSwgU2FmYXJpXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcblx0alF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuXHRcdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcblx0XHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vbiggdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggb25lID09PSAxICkge1xuXHRcdFx0b3JpZ0ZuID0gZm47XG5cdFx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbMF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59KTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLFxuXHRydGFnTmFtZSA9IC88KFtcXHc6XSspLyxcblx0cmh0bWwgPSAvPHwmIz9cXHcrOy8sXG5cdHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHdyYXBNYXAgPSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0XHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cblx0fTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogMS54IGNvbXBhdGliaWxpdHlcbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0gfHxcblx0XHRcdGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblxuXHRpZiAoIG1hdGNoICkge1xuXHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YV9wcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgZGF0YV9wcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YV9wcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YV9wcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhX3ByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhX3VzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhX3VzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YV91c2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0dmFyIHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJlxuXHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRidWlsZEZyYWdtZW50OiBmdW5jdGlvbiggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiApIHtcblx0XHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRcdG5vZGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBlbGVtLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IG5vZGVzWyBpKysgXSkgKSB7XG5cblx0XHRcdC8vICM0MDg3IC0gSWYgb3JpZ2luIGFuZCBkZXN0aW5hdGlvbiBlbGVtZW50cyBhcmUgdGhlIHNhbWUsIGFuZCB0aGlzIGlzXG5cdFx0XHQvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApICE9PSAtMSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZnJhZ21lbnQ7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsIGtleSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zWyBpIF0pICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0a2V5ID0gZWxlbVsgZGF0YV9wcml2LmV4cGFuZG8gXTtcblxuXHRcdFx0XHRpZiAoIGtleSAmJiAoZGF0YSA9IGRhdGFfcHJpdi5jYWNoZVsga2V5IF0pICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGRhdGFfcHJpdi5jYWNoZVsga2V5IF0gKSB7XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHByaXZhdGVgIGRhdGFcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGB1c2VyYCBkYXRhXG5cdFx0XHRkZWxldGUgZGF0YV91c2VyLmNhY2hlWyBlbGVtWyBkYXRhX3VzZXIuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gdGhpc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcmcgPSBhcmd1bWVudHNbIDAgXTtcblxuXHRcdC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuXHRcdHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRhcmcgPSB0aGlzLnBhcmVudE5vZGU7XG5cblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7XG5cblx0XHRcdGlmICggYXJnICkge1xuXHRcdFx0XHRhcmcucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBGb3JjZSByZW1vdmFsIGlmIHRoZXJlIHdhcyBubyBuZXcgY29udGVudCAoZS5nLiwgZnJvbSBlbXB0eSBhcmd1bWVudHMpXG5cdFx0cmV0dXJuIGFyZyAmJiAoYXJnLmxlbmd0aCB8fCBhcmcubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCk7XG5cdH0sXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHR9LFxuXG5cdGRvbU1hbmlwOiBmdW5jdGlvbiggYXJncywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2V0ID0gdGhpcyxcblx0XHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gc2V0LmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5kb21NYW5pcCggYXJncywgY2FsbGJhY2sgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIGFyZ3MsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgdGhpcyApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZpcnN0ICkge1xuXHRcdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHRcdFx0XHQvLyBqUXVlcnkubWVyZ2UgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFfcHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcblx0ZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcblx0dmFyIHN0eWxlLFxuXHRcdGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuXHRcdC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG5cdFx0ZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuXHRcdFx0Ly8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdGltaXphdGlvbikgdW50aWwgc29tZXRoaW5nIGJldHRlciBjb21lcyBhbG9uZyxcblx0XHRcdC8vIHNpbmNlIGl0IHdhcyByZW1vdmVkIGZyb20gc3BlY2lmaWNhdGlvbiBhbmQgc3VwcG9ydGVkIG9ubHkgaW4gRkZcblx0XHRcdHN0eWxlLmRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sIFwiZGlzcGxheVwiICk7XG5cblx0Ly8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsXG5cdC8vIHNvIHVzZSBcImRldGFjaFwiIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50XG5cdGVsZW0uZGV0YWNoKCk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbi8qKlxuICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdHZhciBkb2MgPSBkb2N1bWVudCxcblx0XHRkaXNwbGF5ID0gZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF07XG5cblx0aWYgKCAhZGlzcGxheSApIHtcblx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXG5cdFx0Ly8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiB8fCAhZGlzcGxheSApIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlXG5cdFx0XHRpZnJhbWUgPSAoaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSkuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlXG5cdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdGRvYy5jbG9zZSgpO1xuXG5cdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0aWZyYW1lLmRldGFjaCgpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheVxuXHRcdGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTtcblx0fVxuXG5cdHJldHVybiBkaXNwbGF5O1xufVxudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHRpZiAoIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cdH1cblxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0aWYgKCByZXQgPT09IFwiXCIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBpT1MgPCA2XG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIGlPUyA8IDYgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHNcblx0XHQvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFx0Ly8gU3VwcG9ydDogSUVcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICh0aGlzLmdldCA9IGhvb2tGbikuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcblx0XHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O1wiICtcblx0XHRcInBvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO1wiICtcblx0XHRcdFwiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYsIG51bGwgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogbm9kZS5qcyBqc2RvbVxuXHQvLyBEb24ndCBhc3N1bWUgdGhhdCBnZXRDb21wdXRlZFN0eWxlIGlzIGEgcHJvcGVydHkgb2YgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdFx0fSxcblx0XHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XHRcImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRcdGRpdi5zdHlsZS53aWR0aCA9IFwiMXB4XCI7XG5cdFx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2LCBudWxsICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KSgpO1xuXG5cbi8vIEEgbWV0aG9kIGZvciBxdWlja2x5IHN3YXBwaW5nIGluL291dCBDU1MgcHJvcGVydGllcyB0byBnZXQgY29ycmVjdCBjYWxjdWxhdGlvbnMuXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhclxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKC4qKSRcIiwgXCJpXCIgKSxcblx0cnJlbE51bSA9IG5ldyBSZWdFeHAoIFwiXihbKy1dKT0oXCIgKyBwbnVtICsgXCIpXCIsIFwiaVwiICksXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuXHRcdG9yaWdOYW1lID0gbmFtZSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb3JpZ05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG5cdHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuXHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0JvcmRlckJveCApIHtcblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHQvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3Nhcnlcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuXHRcdGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblx0XHRcdC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcblx0XHRcdC8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3Rcblx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZVxuXHRcdFx0Ly8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXNcblx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBkZWZhdWx0RGlzcGxheShlbGVtLm5vZGVOYW1lKSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCBcIlwiIDogXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG5cdFx0XHRcdHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gKSB7XG5cdFx0XHRcdHZhbHVlICs9IFwicHhcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCAodmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIGVsZW0uc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJiBlbGVtLm9mZnNldFdpZHRoID09PSAwID9cblx0XHRcdFx0XHRqUXVlcnkuc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgP1xuXHRcdFx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KSA6IDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCh7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgXCJzd2luZ1wiO1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJlxuXHRcdFx0XHQoIXR3ZWVuLmVsZW0uc3R5bGUgfHwgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwpICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9XG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJmeG51bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG5cdHJydW4gPSAvcXVldWVIb29rcyQvLFxuXHRhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdHR3ZWVuZXJzID0ge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICksXG5cdFx0XHRcdHRhcmdldCA9IHR3ZWVuLmN1cigpLFxuXHRcdFx0XHRwYXJ0cyA9IHJmeG51bS5leGVjKCB2YWx1ZSApLFxuXHRcdFx0XHR1bml0ID0gcGFydHMgJiYgcGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdFx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdFx0XHRzdGFydCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiArdGFyZ2V0ICkgJiZcblx0XHRcdFx0XHRyZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG5cdFx0XHRcdHNjYWxlID0gMSxcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwO1xuXG5cdFx0XHRpZiAoIHN0YXJ0ICYmIHN0YXJ0WyAzIF0gIT09IHVuaXQgKSB7XG5cdFx0XHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHRcdFx0dW5pdCA9IHVuaXQgfHwgc3RhcnRbIDMgXTtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0XHRcdHBhcnRzID0gcGFydHMgfHwgW107XG5cblx0XHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0c3RhcnQgPSArdGFyZ2V0IHx8IDE7XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdFx0XHQvLyBBZGp1c3QgYW5kIGFwcGx5XG5cdFx0XHRcdFx0c3RhcnQgPSBzdGFydCAvIHNjYWxlO1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCksXG5cdFx0XHRcdC8vIGJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2hcblx0XHRcdFx0fSB3aGlsZSAoIHNjYWxlICE9PSAoc2NhbGUgPSB0d2Vlbi5jdXIoKSAvIHRhcmdldCkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0d2VlbiBwcm9wZXJ0aWVzXG5cdFx0XHRpZiAoIHBhcnRzICkge1xuXHRcdFx0XHRzdGFydCA9IHR3ZWVuLnN0YXJ0ID0gK3N0YXJ0IHx8ICt0YXJnZXQgfHwgMDtcblx0XHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHRcdC8vIElmIGEgKz0vLT0gdG9rZW4gd2FzIHByb3ZpZGVkLCB3ZSdyZSBkb2luZyBhIHJlbGF0aXZlIGFuaW1hdGlvblxuXHRcdFx0XHR0d2Vlbi5lbmQgPSBwYXJ0c1sgMSBdID9cblx0XHRcdFx0XHRzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuXHRcdFx0XHRcdCtwYXJ0c1sgMiBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH07XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9KTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cblx0XHRpZiAoIGNoZWNrRGlzcGxheSA9PT0gXCJpbmxpbmVcIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cgYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0c3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9KSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IGFuaW1hdGlvblByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9KVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5zcGxpdChcIiBcIik7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0gPSB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/IG9wdC5kdXJhdGlvbiA6XG5cdFx0b3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPyBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcblx0c2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG5cdHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoICF0aW1lcklkICkge1xuXHRcdHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59KSgpO1xuXG5cbnZhciBub2RlSG9vaywgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID9cblx0XHRcdFx0dW5kZWZpbmVkIDpcblx0XHRcdFx0cmV0O1xuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59KTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fSxcblxuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsIG5vdHhtbCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuXHRcdGlmICggbm90eG1sICkge1xuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHQoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdGVsZW1bIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmhhc0F0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgfHwgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRlbGVtLnRhYkluZGV4IDpcblx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59KTtcblxuXG5cblxudmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHQvLyBUaGUgZGlzanVuY3Rpb24gaGVyZSBpcyBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIHJlbW92ZUNsYXNzKVxuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiIFwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPj0gMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRcdHdoaWxlICggKGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdKSApIHtcblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gc3RydW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdC8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgdGhpcy5jbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogZGF0YV9wcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGlmICggdGhpc1tpXS5ub2RlVHlwZSA9PT0gMSAmJiAoXCIgXCIgKyB0aGlzW2ldLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKHJjbGFzcywgXCIgXCIpLmluZGV4T2YoIGNsYXNzTmFtZSApID49IDAgKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1swXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKHJyZXR1cm4sIFwiXCIpIDpcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFNi05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PT0gbnVsbCApICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIG9wdGlvbi52YWx1ZSwgdmFsdWVzICkgPj0gMCkgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaChbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoZWxlbSkudmFsKCksIHZhbHVlICkgPj0gMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxualF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiKS5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH0sXG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyB0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDogdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0pO1xuXG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICgvXFw/Lyk7XG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXRcbmpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiggZGF0YSApIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG59O1xuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sLCB0bXA7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0eG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXHRydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBEb2N1bWVudCBsb2NhdGlvblxuXHRhamF4TG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuXHQvLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcblx0YWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoZGVlcCA9IHt9KSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWzBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgc1sgXCJ0aHJvd3NcIiBdICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBhamF4TG9jYXRpb24sXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL3htbC8sXG5cdFx0XHRodG1sOiAvaHRtbC8sXG5cdFx0XHRqc29uOiAvanNvbi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXHRcdFx0Ly8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzXG5cdFx0XHRwYXJ0cyxcblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG5cdFx0XHRzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG5cdFx0XHRcdCggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcblx0XHRcdFx0XHQoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cblx0XHRcdFx0XHRcdCggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0Ly8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuXHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSk7XG5cdH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdHVybDogdXJsLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9KS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSkuZW5kKCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cblx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSlcblx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9KVxuXHRcdC5tYXAoZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9KS5nZXQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2goIGUgKSB7fVxufTtcblxudmFyIHhocklkID0gMCxcblx0eGhyQ2FsbGJhY2tzID0ge30sXG5cdHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFx0Ly8gZmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MClcbi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm9cbmlmICggd2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHR3aW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG5cdFx0XHR4aHJDYWxsYmFja3NbIGtleSBdKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKSxcblx0XHRcdFx0XHRpZCA9ICsreGhySWQ7XG5cblx0XHRcdFx0eGhyLm9wZW4oIG9wdGlvbnMudHlwZSwgb3B0aW9ucy51cmwsIG9wdGlvbnMuYXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQgKTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdHhoclN1Y2Nlc3NTdGF0dXNbIHhoci5zdGF0dXMgXSB8fCB4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKCMxMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiID8ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHR9IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0eGhyLm9uZXJyb3IgPSBjYWxsYmFjayhcImVycm9yXCIpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjayhcImFib3J0XCIpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvKD86amF2YXxlY21hKXNjcmlwdC9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0pO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KFwiPHNjcmlwdD5cIikucHJvcCh7XG5cdFx0XHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmICEoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgcmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIGZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBSZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSk7XG5cblxuXG5cbi8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0dmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLFxuXHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZihcIiBcIik7XG5cblx0aWYgKCBvZmYgPj0gMCApIHtcblx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIGlmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWRcblx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0fSkuY29tcGxldGUoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBjYWxsYmFjaywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59KTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9KS5sZW5ndGg7XG59O1xuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoXCJhdXRvXCIpID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgY3VyT2Zmc2V0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpXG5cdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR9XG5cdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdH07XG5cdH0sXG5cblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuXHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblxuXHRcdFx0Ly8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG5cdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaTw3KywgQ2hyb21lPDM3K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSwgZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0pO1xufSk7XG5cblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxlbmd0aDtcbn07XG5cbmpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSk7XG59XG5cblxuXG5cbnZhclxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoIHR5cGVvZiBub0dsb2JhbCA9PT0gc3RydW5kZWZpbmVkICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG5cbn0pKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YyID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn07XG4vKiBnbG9iYWxzIGQzICovXG4vKiBlc2xpbnQgbm8tc2hhZG93OiBcIm9mZlwiICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChkMykge1xuICBkMy5qc29ubGRWaXMgPSBqc29ubGRWaXM7XG59O1xuXG52YXIgX2QgPSByZXF1aXJlKCdkMycpO1xuXG52YXIgX2QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZCk7XG5cbnZhciBfZDNUaXAgPSByZXF1aXJlKCdkMy10aXAnKTtcblxudmFyIF9kM1RpcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kM1RpcCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xufVxuXG4oMCwgX2QzVGlwMi5kZWZhdWx0KShfZDIuZGVmYXVsdCk7XG5cbmZ1bmN0aW9uIGpzb25sZFZpcyhqc29ubGQsIHNlbGVjdG9yKSB7XG4gIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuICBpZiAoIWpzb25sZCAmJiAhc2VsZWN0b3IpIHJldHVybiBqc29ubGRWaXM7XG5cbiAgdmFyIGggPSBjb25maWcuaCB8fCA2MDAsXG4gICAgICB3ID0gY29uZmlnLncgfHwgODAwLFxuICAgICAgbWF4TGFiZWxXaWR0aCA9IGNvbmZpZy5tYXhMYWJlbFdpZHRoIHx8IDI1MCxcbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IGNvbmZpZy50cmFuc2l0aW9uRHVyYXRpb24gfHwgNzUwLFxuICAgICAgdHJhbnNpdGlvbkVhc2UgPSBjb25maWcudHJhbnNpdGlvbkVhc2UgfHwgJ2N1YmljLWluLW91dCcsXG4gICAgICBtaW5SYWRpdXMgPSBjb25maWcubWluUmFkaXVzIHx8IDUsXG4gICAgICBzY2FsaW5nRmFjdG9yID0gY29uZmlnLnNjYWxpbmdGYWN0b3IgfHwgMixcbiAgICAgIGkgPSAwLFxuICAgICAgdHJlZSA9IF9kMi5kZWZhdWx0LmxheW91dC50cmVlKCkuc2l6ZShbaCwgd10pLFxuICAgICAgZGlhZ29uYWwgPSBfZDIuZGVmYXVsdC5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIFtkLnksIGQueF07XG4gIH0pLFxuICAgICAgc3ZnID0gX2QyLmRlZmF1bHQuc2VsZWN0KHNlbGVjdG9yKS5hcHBlbmQoJ3N2ZycpLmF0dHIoJ3dpZHRoJywgdykuYXR0cignaGVpZ2h0JywgaCkuYXBwZW5kKCdnJykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWF4TGFiZWxXaWR0aCArICcsMCknKSxcbiAgICAgIHRpcCA9IF9kMi5kZWZhdWx0LnRpcCgpLmRpcmVjdGlvbihmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gJ3cnIDogJ2UnO1xuICB9KS5vZmZzZXQoZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IFswLCAtM10gOiBbMCwgM107XG4gIH0pLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gJzxzcGFuPicgKyBkLnZhbHVlRXh0ZW5kZWQgKyAnPC9zcGFuPic7XG4gIH0pO1xuICBzdmcuY2FsbCh0aXApO1xuXG4gIHZhciByb290ID0ganNvbmxkVHJlZShqc29ubGQpO1xuICByb290LngwID0gaCAvIDI7XG4gIHJvb3QueTAgPSAwO1xuICByb290LmNoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xuXG4gIGZ1bmN0aW9uIGNoYW5nZVNWR1dpZHRoKG5ld1dpZHRoKSB7XG4gICAgaWYgKHcgIT09IG5ld1dpZHRoKSBfZDIuZGVmYXVsdC5zZWxlY3Qoc2VsZWN0b3IgKyAnID4gc3ZnJykuYXR0cignd2lkdGgnLCBuZXdXaWR0aCk7XG4gIH1cblxuICBmdW5jdGlvbiBqc29ubGRUcmVlKHNvdXJjZSkge1xuICAgIHZhciB0cmVlID0ge307XG4gICAgaWYgKCdAaWQnIGluIHNvdXJjZSkge1xuICAgICAgdHJlZS5pc0lkTm9kZSA9IHRydWU7XG4gICAgICB0cmVlLm5hbWUgPSBzb3VyY2VbJ0BpZCddO1xuICAgICAgaWYgKHRyZWUubmFtZS5sZW5ndGggPiBtYXhMYWJlbFdpZHRoIC8gOSkge1xuICAgICAgICB0cmVlLnZhbHVlRXh0ZW5kZWQgPSB0cmVlLm5hbWU7XG4gICAgICAgIHRyZWUubmFtZSA9ICfigKYnICsgdHJlZS52YWx1ZUV4dGVuZGVkLnNsaWNlKC1NYXRoLmZsb29yKG1heExhYmVsV2lkdGggLyA5KSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWUuaXNJZE5vZGUgPSB0cnVlO1xuICAgICAgdHJlZS5pc0JsYW5rTm9kZSA9IHRydWU7XG4gICAgICAvLyByYW5kb20gaWQsIGNhbiByZXBsYWNlIHdpdGggYWN0dWFsIHV1aWQgZ2VuZXJhdG9yIGlmIG5lZWRlZFxuICAgICAgdHJlZS5uYW1lID0gJ186YicgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDEwKS5zbGljZSgtNyk7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChrZXkgPT09ICdAaWQnIHx8IGtleSA9PT0gJ0Bjb250ZXh0JyB8fCBzb3VyY2Vba2V5XSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgdmFyIHZhbHVlRXh0ZW5kZWQgPSB2b2lkIDAsXG4gICAgICAgICAgdmFsdWUgPSB2b2lkIDA7XG4gICAgICBpZiAoX3R5cGVvZihzb3VyY2Vba2V5XSkgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHNvdXJjZVtrZXldKSkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgY2hpbGRyZW46IFtqc29ubGRUcmVlKHNvdXJjZVtrZXldKV1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlW2tleV0pKSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgICBjaGlsZHJlbjogc291cmNlW2tleV0ubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihpdGVtKSkgPT09ICdvYmplY3QnKSByZXR1cm4ganNvbmxkVHJlZShpdGVtKTtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IGl0ZW0gfTtcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlRXh0ZW5kZWQgPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZUV4dGVuZGVkO1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gbWF4TGFiZWxXaWR0aCAvIDkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIE1hdGguZmxvb3IobWF4TGFiZWxXaWR0aCAvIDkpKSArICfigKYnO1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdmFsdWVFeHRlbmRlZDogdmFsdWVFeHRlbmRlZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHRyZWUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICByZXR1cm4gdHJlZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UpIHtcbiAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKSxcbiAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC55ID0gZC5kZXB0aCAqIG1heExhYmVsV2lkdGg7XG4gICAgfSk7XG4gICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKCdnLm5vZGUnKS5kYXRhKG5vZGVzLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpO1xuICAgIH0pLFxuICAgICAgICBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbm9kZScpLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBzb3VyY2UueTAgKyAnLCcgKyBzb3VyY2UueDAgKyAnKSc7XG4gICAgfSkub24oJ2NsaWNrJywgY2xpY2spO1xuICAgIG5vZGVFbnRlci5hcHBlbmQoJ2NpcmNsZScpLmF0dHIoJ3InLCAwKS5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmlzSWROb2RlID8gJzJweCcgOiAnMXB4JztcbiAgICB9KS5zdHlsZSgnc3Ryb2tlJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmlzSWROb2RlID8gJyNGN0NBMTgnIDogJyM0RUNEQzQnO1xuICAgIH0pLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLmlzSWROb2RlKSByZXR1cm4gZC5fY2hpbGRyZW4gPyAnI0Y1RDc2RScgOiAnd2hpdGUnO1xuICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gJyM4NkUyRDUnIDogJ3doaXRlJztcbiAgICB9KS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLnZhbHVlRXh0ZW5kZWQpIHRpcC5zaG93KGQpO1xuICAgIH0pLm9uKCdtb3VzZW91dCcsIHRpcC5oaWRlKTtcbiAgICBub2RlRW50ZXIuYXBwZW5kKCd0ZXh0JykuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YXIgc3BhY2luZyA9IGNvbXB1dGVSYWRpdXMoZCkgKyA1O1xuICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtc3BhY2luZyA6IHNwYWNpbmc7XG4gICAgfSkuYXR0cignZHknLCAnNCcpLmF0dHIoJ3RleHQtYW5jaG9yJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gJ2VuZCcgOiAnc3RhcnQnO1xuICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLm5hbWUgKyAoZC52YWx1ZSA/ICc6ICcgKyBkLnZhbHVlIDogJycpO1xuICAgIH0pLnN0eWxlKCdmaWxsLW9wYWNpdHknLCAwKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChkLnZhbHVlRXh0ZW5kZWQpIHRpcC5zaG93KGQpO1xuICAgIH0pLm9uKCdtb3VzZW91dCcsIHRpcC5oaWRlKTtcbiAgICB2YXIgbWF4U3BhbiA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIG5vZGVzLm1hcChmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGQueSArIG1heExhYmVsV2lkdGg7XG4gICAgfSkpO1xuICAgIGlmIChtYXhTcGFuICsgbWF4TGFiZWxXaWR0aCArIDIwID4gdykge1xuICAgICAgY2hhbmdlU1ZHV2lkdGgobWF4U3BhbiArIG1heExhYmVsV2lkdGgpO1xuICAgICAgX2QyLmRlZmF1bHQuc2VsZWN0KHNlbGVjdG9yKS5ub2RlKCkuc2Nyb2xsTGVmdCA9IHNvdXJjZS55MDtcbiAgICB9XG5cbiAgICB2YXIgbm9kZVVwZGF0ZSA9IG5vZGUudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRyYW5zaXRpb25EdXJhdGlvbikuZWFzZSh0cmFuc2l0aW9uRWFzZSkuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnkgKyAnLCcgKyBkLnggKyAnKSc7XG4gICAgfSk7XG4gICAgbm9kZVVwZGF0ZS5zZWxlY3QoJ2NpcmNsZScpLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGNvbXB1dGVSYWRpdXMoZCk7XG4gICAgfSkuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC5pc0lkTm9kZSA/ICcycHgnIDogJzFweCc7XG4gICAgfSkuc3R5bGUoJ3N0cm9rZScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC5pc0lkTm9kZSA/ICcjRjdDQTE4JyA6ICcjNEVDREM0JztcbiAgICB9KS5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICBpZiAoZC5pc0lkTm9kZSkgcmV0dXJuIGQuX2NoaWxkcmVuID8gJyNGNUQ3NkUnIDogJ3doaXRlJztcbiAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/ICcjODZFMkQ1JyA6ICd3aGl0ZSc7XG4gICAgfSk7XG4gICAgbm9kZVVwZGF0ZS5zZWxlY3QoJ3RleHQnKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMSk7XG5cbiAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKS5lYXNlKHRyYW5zaXRpb25FYXNlKS5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgc291cmNlLnkgKyAnLCcgKyBzb3VyY2UueCArICcpJztcbiAgICB9KS5yZW1vdmUoKTtcbiAgICBub2RlRXhpdC5zZWxlY3QoJ2NpcmNsZScpLmF0dHIoJ3InLCAwKTtcbiAgICBub2RlRXhpdC5zZWxlY3QoJ3RleHQnKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMCk7XG5cbiAgICB2YXIgbGluayA9IHN2Zy5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmRhdGEobGlua3MsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XG4gICAgfSk7XG4gICAgbGluay5lbnRlcigpLmluc2VydCgncGF0aCcsICdnJykuYXR0cignY2xhc3MnLCAnbGluaycpLmF0dHIoJ2QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbyA9IHsgeDogc291cmNlLngwLCB5OiBzb3VyY2UueTAgfTtcbiAgICAgIHJldHVybiBkaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xuICAgIH0pO1xuICAgIGxpbmsudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRyYW5zaXRpb25EdXJhdGlvbikuZWFzZSh0cmFuc2l0aW9uRWFzZSkuYXR0cignZCcsIGRpYWdvbmFsKTtcbiAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKS5lYXNlKHRyYW5zaXRpb25FYXNlKS5hdHRyKCdkJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54LCB5OiBzb3VyY2UueSB9O1xuICAgICAgcmV0dXJuIGRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XG4gICAgfSkucmVtb3ZlKCk7XG5cbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgICBkLngwID0gZC54O1xuICAgICAgZC55MCA9IGQueTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVSYWRpdXMoZCkge1xuICAgIGlmIChkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuKSByZXR1cm4gbWluUmFkaXVzICsgbnVtRW5kTm9kZXMoZCkgLyBzY2FsaW5nRmFjdG9yO1xuICAgIHJldHVybiBtaW5SYWRpdXM7XG4gIH1cblxuICBmdW5jdGlvbiBudW1FbmROb2RlcyhuKSB7XG4gICAgdmFyIG51bSA9IDA7XG4gICAgaWYgKG4uY2hpbGRyZW4pIG4uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgcmV0dXJuIG51bSArPSBudW1FbmROb2RlcyhjKTtcbiAgICB9KTtlbHNlIGlmIChuLl9jaGlsZHJlbikgbi5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgcmV0dXJuIG51bSArPSBudW1FbmROb2RlcyhjKTtcbiAgICB9KTtlbHNlIG51bSsrO1xuICAgIHJldHVybiBudW07XG4gIH1cblxuICBmdW5jdGlvbiBjbGljayhkKSB7XG4gICAgaWYgKGQuY2hpbGRyZW4pIHtcbiAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcbiAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkLmNoaWxkcmVuID0gZC5fY2hpbGRyZW47XG4gICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIHVwZGF0ZShkKTtcblxuICAgIC8vIGZhc3QtZm9yd2FyZCBibGFuayBub2Rlc1xuICAgIGlmIChkLmNoaWxkcmVuKSB7XG4gICAgICBkLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5pc0JsYW5rTm9kZSAmJiBjaGlsZC5fY2hpbGRyZW4pIGNsaWNrKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcbiAgICBpZiAoZC5jaGlsZHJlbikge1xuICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xuICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XG4gICAgICBkLmNoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgdXBkYXRlKHJvb3QpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1wemIyNXNaQzEyYVhNdWFuTWlYU3dpYm1GdFpYTWlPbHNpVDJKcVpXTjBJaXdpWkdWbWFXNWxVSEp2Y0dWeWRIa2lMQ0psZUhCdmNuUnpJaXdpZG1Gc2RXVWlMQ0pmZEhsd1pXOW1JaXdpVTNsdFltOXNJaXdpYVhSbGNtRjBiM0lpTENKdlltb2lMQ0pqYjI1emRISjFZM1J2Y2lJc0ltUmxabUYxYkhRaUxDSmtNeUlzSW1wemIyNXNaRlpwY3lJc0lsOWtJaXdpY21WeGRXbHlaU0lzSWw5a01pSXNJbDlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRaUxDSmZaRE5VYVhBaUxDSmZaRE5VYVhBeUlpd2lYMTlsYzAxdlpIVnNaU0lzSW1wemIyNXNaQ0lzSW5ObGJHVmpkRzl5SWl3aVkyOXVabWxuSWl3aVlYSm5kVzFsYm5Seklpd2liR1Z1WjNSb0lpd2lkVzVrWldacGJtVmtJaXdpYUNJc0luY2lMQ0p0WVhoTVlXSmxiRmRwWkhSb0lpd2lkSEpoYm5OcGRHbHZia1IxY21GMGFXOXVJaXdpZEhKaGJuTnBkR2x2YmtWaGMyVWlMQ0p0YVc1U1lXUnBkWE1pTENKelkyRnNhVzVuUm1GamRHOXlJaXdpYVNJc0luUnlaV1VpTENKc1lYbHZkWFFpTENKemFYcGxJaXdpWkdsaFoyOXVZV3dpTENKemRtY2lMQ0p3Y205cVpXTjBhVzl1SWl3aVpDSXNJbmtpTENKNElpd2ljMlZzWldOMElpd2lZWEJ3Wlc1a0lpd2lZWFIwY2lJc0luUnBjQ0lzSW1ScGNtVmpkR2x2YmlJc0ltTm9hV3hrY21WdUlpd2lYMk5vYVd4a2NtVnVJaXdpYjJabWMyVjBJaXdpYUhSdGJDSXNJblpoYkhWbFJYaDBaVzVrWldRaUxDSmpZV3hzSWl3aWNtOXZkQ0lzSW1wemIyNXNaRlJ5WldVaUxDSjRNQ0lzSW5rd0lpd2labTl5UldGamFDSXNJbU52Ykd4aGNITmxJaXdpWTJoaGJtZGxVMVpIVjJsa2RHZ2lMQ0p1WlhkWGFXUjBhQ0lzSW5OdmRYSmpaU0lzSW1selNXUk9iMlJsSWl3aWJtRnRaU0lzSW5Oc2FXTmxJaXdpVFdGMGFDSXNJbVpzYjI5eUlpd2lhWE5DYkdGdWEwNXZaR1VpTENKeVlXNWtiMjBpTENKMGIxTjBjbWx1WnlJc0ltdGxlWE1pTENKclpYa2lMQ0pCY25KaGVTSXNJbWx6UVhKeVlYa2lMQ0p3ZFhOb0lpd2liV0Z3SWl3aWFYUmxiU0lzSW5Wd1pHRjBaU0lzSW01dlpHVnpJaXdpY21WMlpYSnpaU0lzSW14cGJtdHpJaXdpWkdWd2RHZ2lMQ0p1YjJSbElpd2ljMlZzWldOMFFXeHNJaXdpWkdGMFlTSXNJbWxrSWl3aWJtOWtaVVZ1ZEdWeUlpd2laVzUwWlhJaUxDSnZiaUlzSW1Oc2FXTnJJaXdpYzNSNWJHVWlMQ0p6YUc5M0lpd2lhR2xrWlNJc0luTndZV05wYm1jaUxDSmpiMjF3ZFhSbFVtRmthWFZ6SWl3aWRHVjRkQ0lzSW0xaGVGTndZVzRpTENKdFlYZ2lMQ0poY0hCc2VTSXNJbk5qY205c2JFeGxablFpTENKdWIyUmxWWEJrWVhSbElpd2lkSEpoYm5OcGRHbHZiaUlzSW1SMWNtRjBhVzl1SWl3aVpXRnpaU0lzSW01dlpHVkZlR2wwSWl3aVpYaHBkQ0lzSW5KbGJXOTJaU0lzSW14cGJtc2lMQ0owWVhKblpYUWlMQ0pwYm5ObGNuUWlMQ0p2SWl3aWJuVnRSVzVrVG05a1pYTWlMQ0p1SWl3aWJuVnRJaXdpWXlJc0ltTm9hV3hrSWwwc0ltMWhjSEJwYm1keklqb2lRVUZCUVRzN096dEJRVVZCUVN4UFFVRlBReXhqUVVGUUxFTkJRWE5DUXl4UFFVRjBRaXhGUVVFclFpeFpRVUV2UWl4RlFVRTJRenRCUVVNelEwTXNVMEZCVHp0QlFVUnZReXhEUVVFM1F6czdRVUZKUVN4SlFVRkpReXhWUVVGVkxFOUJRVTlETEUxQlFWQXNTMEZCYTBJc1ZVRkJiRUlzU1VGQlowTXNVMEZCVDBFc1QwRkJUME1zVVVGQlpDeE5RVUV5UWl4UlFVRXpSQ3hIUVVGelJTeFZRVUZWUXl4SFFVRldMRVZCUVdVN1FVRkJSU3huUWtGQlkwRXNSMEZCWkN3d1EwRkJZMEVzUjBGQlpEdEJRVUZ2UWl4RFFVRXpSeXhIUVVFNFJ5eFZRVUZWUVN4SFFVRldMRVZCUVdVN1FVRkJSU3hUUVVGUFFTeFBRVUZQTEU5QlFVOUdMRTFCUVZBc1MwRkJhMElzVlVGQmVrSXNTVUZCZFVORkxFbEJRVWxETEZkQlFVb3NTMEZCYjBKSUxFMUJRVE5FTEVkQlFXOUZMRkZCUVhCRkxGVkJRWE5HUlN4SFFVRjBSaXd3UTBGQmMwWkJMRWRCUVhSR0xFTkJRVkE3UVVGQmJVY3NRMEZCYUZBN1FVRkRRVHRCUVVOQk96dEJRVVZCVEN4UlFVRlJUeXhQUVVGU0xFZEJRV3RDTEZWQlFWVkRMRVZCUVZZc1JVRkJZenRCUVVNNVFrRXNTMEZCUjBNc1UwRkJTQ3hIUVVGbFFTeFRRVUZtTzBGQlEwUXNRMEZHUkRzN1FVRkpRU3hKUVVGSlF5eExRVUZMUXl4UlFVRlJMRWxCUVZJc1EwRkJWRHM3UVVGRlFTeEpRVUZKUXl4TlFVRk5ReXgxUWtGQmRVSklMRVZCUVhaQ0xFTkJRVlk3TzBGQlJVRXNTVUZCU1Vrc1UwRkJVMGdzVVVGQlVTeFJRVUZTTEVOQlFXSTdPMEZCUlVFc1NVRkJTVWtzVlVGQlZVWXNkVUpCUVhWQ1F5eE5RVUYyUWl4RFFVRmtPenRCUVVWQkxGTkJRVk5FTEhOQ1FVRlVMRU5CUVdkRFVpeEhRVUZvUXl4RlFVRnhRenRCUVVGRkxGTkJRVTlCTEU5QlFVOUJMRWxCUVVsWExGVkJRVmdzUjBGQmQwSllMRWRCUVhoQ0xFZEJRVGhDTEVWQlFVVkZMRk5CUVZOR0xFZEJRVmdzUlVGQmNrTTdRVUZCZDBRN08wRkJSUzlHTEVOQlFVTXNSMEZCUjFVc1VVRkJVVklzVDBGQldpeEZRVUZ4UWtzc1NVRkJTVXdzVDBGQmVrSTdPMEZCUlVFc1UwRkJVMFVzVTBGQlZDeERRVUZ0UWxFc1RVRkJia0lzUlVGQk1rSkRMRkZCUVROQ0xFVkJRWEZETzBGQlEyNURMRTFCUVVsRExGTkJRVk5ETEZWQlFWVkRMRTFCUVZZc1NVRkJiMElzUTBGQmNFSXNTVUZCZVVKRUxGVkJRVlVzUTBGQlZpeE5RVUZwUWtVc1UwRkJNVU1zUjBGQmMwUXNSVUZCZEVRc1IwRkJNa1JHTEZWQlFWVXNRMEZCVml4RFFVRjRSVHM3UVVGRlFTeE5RVUZKTEVOQlFVTklMRTFCUVVRc1NVRkJWeXhEUVVGRFF5eFJRVUZvUWl4RlFVRXdRaXhQUVVGUFZDeFRRVUZRT3p0QlFVVXhRaXhOUVVGSll5eEpRVUZKU2l4UFFVRlBTU3hEUVVGUUxFbEJRVmtzUjBGQmNFSTdRVUZCUVN4TlFVTkpReXhKUVVGSlRDeFBRVUZQU3l4RFFVRlFMRWxCUVZrc1IwRkVjRUk3UVVGQlFTeE5RVVZKUXl4blFrRkJaMEpPTEU5QlFVOU5MR0ZCUVZBc1NVRkJkMElzUjBGR05VTTdRVUZCUVN4TlFVZEpReXh4UWtGQmNVSlFMRTlCUVU5UExHdENRVUZRTEVsQlFUWkNMRWRCU0hSRU8wRkJRVUVzVFVGSlNVTXNhVUpCUVdsQ1VpeFBRVUZQVVN4alFVRlFMRWxCUVhsQ0xHTkJTamxETzBGQlFVRXNUVUZMU1VNc1dVRkJXVlFzVDBGQlQxTXNVMEZCVUN4SlFVRnZRaXhEUVV4d1F6dEJRVUZCTEUxQlRVbERMR2RDUVVGblFsWXNUMEZCVDFVc1lVRkJVQ3hKUVVGM1FpeERRVTQxUXp0QlFVRkJMRTFCVDBsRExFbEJRVWtzUTBGUVVqdEJRVUZCTEUxQlVVbERMRTlCUVU5dVFpeEpRVUZKVEN4UFFVRktMRU5CUVZsNVFpeE5RVUZhTEVOQlFXMUNSQ3hKUVVGdVFpeEhRVUV3UWtVc1NVRkJNVUlzUTBGQkswSXNRMEZCUTFZc1EwRkJSQ3hGUVVGSlF5eERRVUZLTEVOQlFTOUNMRU5CVWxnN1FVRkJRU3hOUVZOSlZTeFhRVUZYZEVJc1NVRkJTVXdzVDBGQlNpeERRVUZaTkVJc1IwRkJXaXhEUVVGblFrUXNVVUZCYUVJc1IwRkJNa0pGTEZWQlFUTkNMRU5CUVhORExGVkJRVlZETEVOQlFWWXNSVUZCWVR0QlFVTm9SU3hYUVVGUExFTkJRVU5CTEVWQlFVVkRMRU5CUVVnc1JVRkJUVVFzUlVGQlJVVXNRMEZCVWl4RFFVRlFPMEZCUTBRc1IwRkdZeXhEUVZSbU8wRkJRVUVzVFVGWlNVb3NUVUZCVFhaQ0xFbEJRVWxNTEU5QlFVb3NRMEZCV1dsRExFMUJRVm9zUTBGQmJVSjBRaXhSUVVGdVFpeEZRVUUyUW5WQ0xFMUJRVGRDTEVOQlFXOURMRXRCUVhCRExFVkJRVEpEUXl4SlFVRXpReXhEUVVGblJDeFBRVUZvUkN4RlFVRjVSR3hDTEVOQlFYcEVMRVZCUVRSRWEwSXNTVUZCTlVRc1EwRkJhVVVzVVVGQmFrVXNSVUZCTWtWdVFpeERRVUV6UlN4RlFVRTRSV3RDTEUxQlFUbEZMRU5CUVhGR0xFZEJRWEpHTEVWQlFUQkdReXhKUVVFeFJpeERRVUVyUml4WFFVRXZSaXhGUVVFMFJ5eGxRVUZsYWtJc1lVRkJaaXhIUVVFclFpeExRVUV6U1N4RFFWcFdPMEZCUVVFc1RVRmhTV3RDTEUxQlFVMHZRaXhKUVVGSlRDeFBRVUZLTEVOQlFWbHZReXhIUVVGYUxFZEJRV3RDUXl4VFFVRnNRaXhEUVVFMFFpeFZRVUZWVUN4RFFVRldMRVZCUVdFN1FVRkRha1FzVjBGQlQwRXNSVUZCUlZFc1VVRkJSaXhKUVVGalVpeEZRVUZGVXl4VFFVRm9RaXhIUVVFMFFpeEhRVUUxUWl4SFFVRnJReXhIUVVGNlF6dEJRVU5FTEVkQlJsTXNSVUZGVUVNc1RVRkdUeXhEUVVWQkxGVkJRVlZXTEVOQlFWWXNSVUZCWVR0QlFVTnlRaXhYUVVGUFFTeEZRVUZGVVN4UlFVRkdMRWxCUVdOU0xFVkJRVVZUTEZOQlFXaENMRWRCUVRSQ0xFTkJRVU1zUTBGQlJDeEZRVUZKTEVOQlFVTXNRMEZCVEN4RFFVRTFRaXhIUVVGelF5eERRVUZETEVOQlFVUXNSVUZCU1N4RFFVRktMRU5CUVRkRE8wRkJRMFFzUjBGS1V5eEZRVWxRU2l4SlFVcFBMRU5CU1VZc1QwRktSU3hGUVVsUExGRkJTbEFzUlVGSmFVSk5MRWxCU21wQ0xFTkJTWE5DTEZWQlFWVllMRU5CUVZZc1JVRkJZVHRCUVVNelF5eFhRVUZQTEZkQlFWZEJMRVZCUVVWWkxHRkJRV0lzUjBGQk5rSXNVMEZCY0VNN1FVRkRSQ3hIUVU1VExFTkJZbFk3UVVGdlFrRmtMRTFCUVVsbExFbEJRVW9zUTBGQlUxQXNSMEZCVkRzN1FVRkZRU3hOUVVGSlVTeFBRVUZQUXl4WFFVRlhia01zVFVGQldDeERRVUZZTzBGQlEwRnJReXhQUVVGTFJTeEZRVUZNTEVkQlFWVTVRaXhKUVVGSkxFTkJRV1E3UVVGRFFUUkNMRTlCUVV0SExFVkJRVXdzUjBGQlZTeERRVUZXTzBGQlEwRklMRTlCUVV0T0xGRkJRVXdzUTBGQlkxVXNUMEZCWkN4RFFVRnpRa01zVVVGQmRFSTdPMEZCUlVFc1YwRkJVME1zWTBGQlZDeERRVUYzUWtNc1VVRkJlRUlzUlVGQmEwTTdRVUZEYUVNc1VVRkJTV3hETEUxQlFVMXJReXhSUVVGV0xFVkJRVzlDT1VNc1NVRkJTVXdzVDBGQlNpeERRVUZaYVVNc1RVRkJXaXhEUVVGdFFuUkNMRmRCUVZjc1VVRkJPVUlzUlVGQmQwTjNRaXhKUVVGNFF5eERRVUUyUXl4UFFVRTNReXhGUVVGelJHZENMRkZCUVhSRU8wRkJRM0pDT3p0QlFVVkVMRmRCUVZOT0xGVkJRVlFzUTBGQmIwSlBMRTFCUVhCQ0xFVkJRVFJDTzBGQlF6RkNMRkZCUVVrMVFpeFBRVUZQTEVWQlFWZzdRVUZEUVN4UlFVRkpMRk5CUVZNMFFpeE5RVUZpTEVWQlFYRkNPMEZCUTI1Q05VSXNWMEZCU3paQ0xGRkJRVXdzUjBGQlowSXNTVUZCYUVJN1FVRkRRVGRDTEZkQlFVczRRaXhKUVVGTUxFZEJRVmxHTEU5QlFVOHNTMEZCVUN4RFFVRmFPMEZCUTBFc1ZVRkJTVFZDTEV0QlFVczRRaXhKUVVGTUxFTkJRVlY0UXl4TlFVRldMRWRCUVcxQ1NTeG5Ra0ZCWjBJc1EwRkJka01zUlVGQk1FTTdRVUZEZUVOTkxHRkJRVXRyUWl4aFFVRk1MRWRCUVhGQ2JFSXNTMEZCU3poQ0xFbEJRVEZDTzBGQlEwRTVRaXhoUVVGTE9FSXNTVUZCVEN4SFFVRlpMRTFCUVUwNVFpeExRVUZMYTBJc1lVRkJUQ3hEUVVGdFFtRXNTMEZCYmtJc1EwRkJlVUlzUTBGQlEwTXNTMEZCUzBNc1MwRkJUQ3hEUVVGWGRrTXNaMEpCUVdkQ0xFTkJRVE5DTEVOQlFURkNMRU5CUVd4Q08wRkJRMFE3UVVGRFJpeExRVkJFTEUxQlQwODdRVUZEVEUwc1YwRkJTelpDTEZGQlFVd3NSMEZCWjBJc1NVRkJhRUk3UVVGRFFUZENMRmRCUVV0clF5eFhRVUZNTEVkQlFXMUNMRWxCUVc1Q08wRkJRMEU3UVVGRFFXeERMRmRCUVVzNFFpeEpRVUZNTEVkQlFWa3NVVUZCVVVVc1MwRkJTMGNzVFVGQlRDeEhRVUZqUXl4UlFVRmtMRU5CUVhWQ0xFVkJRWFpDTEVWQlFUSkNUQ3hMUVVFelFpeERRVUZwUXl4RFFVRkRMRU5CUVd4RExFTkJRWEJDTzBGQlEwUTdPMEZCUlVRc1VVRkJTV3BDTEZkQlFWY3NSVUZCWmp0QlFVTkJMME1zVjBGQlQzTkZMRWxCUVZBc1EwRkJXVlFzVFVGQldpeEZRVUZ2UWtvc1QwRkJjRUlzUTBGQk5FSXNWVUZCVldNc1IwRkJWaXhGUVVGbE8wRkJRM3BETEZWQlFVbEJMRkZCUVZFc1MwRkJVaXhKUVVGcFFrRXNVVUZCVVN4VlFVRjZRaXhKUVVGMVExWXNUMEZCVDFVc1IwRkJVQ3hOUVVGblFpeEpRVUV6UkN4RlFVRnBSVHRCUVVOcVJTeFZRVUZKY0VJc1owSkJRV2RDTEV0QlFVc3NRMEZCZWtJN1FVRkJRU3hWUVVOSmFFUXNVVUZCVVN4TFFVRkxMRU5CUkdwQ08wRkJSVUVzVlVGQlNVTXNVVUZCVVhsRUxFOUJRVTlWTEVkQlFWQXNRMEZCVWl4TlFVRjVRaXhSUVVGNlFpeEpRVUZ4UXl4RFFVRkRReXhOUVVGTlF5eFBRVUZPTEVOQlFXTmFMRTlCUVU5VkxFZEJRVkFzUTBGQlpDeERRVUV4UXl4RlFVRnpSVHRCUVVOd1JYaENMR2xDUVVGVE1rSXNTVUZCVkN4RFFVRmpPMEZCUTFwWUxHZENRVUZOVVN4SFFVUk5PMEZCUlZwNFFpeHZRa0ZCVlN4RFFVRkRUeXhYUVVGWFR5eFBRVUZQVlN4SFFVRlFMRU5CUVZnc1EwRkJSRHRCUVVaRkxGTkJRV1E3UVVGSlJDeFBRVXhFTEUxQlMwOHNTVUZCU1VNc1RVRkJUVU1zVDBGQlRpeERRVUZqV2l4UFFVRlBWU3hIUVVGUUxFTkJRV1FzUTBGQlNpeEZRVUZuUXp0QlFVTnlRM2hDTEdsQ1FVRlRNa0lzU1VGQlZDeERRVUZqTzBGQlExcFlMR2RDUVVGTlVTeEhRVVJOTzBGQlJWcDRRaXh2UWtGQlZXTXNUMEZCVDFVc1IwRkJVQ3hGUVVGWlNTeEhRVUZhTEVOQlFXZENMRlZCUVZWRExFbEJRVllzUlVGQlowSTdRVUZEZUVNc1owSkJRVWtzUTBGQlF5eFBRVUZQUVN4SlFVRlFMRXRCUVdkQ0xGZEJRV2hDTEVkQlFUaENMRmRCUVRsQ0xFZEJRVFJEZUVVc1VVRkJVWGRGTEVsQlFWSXNRMEZCTjBNc1RVRkJaMFVzVVVGQmNFVXNSVUZCT0VVc1QwRkJUM1JDTEZkQlFWZHpRaXhKUVVGWUxFTkJRVkE3UVVGRE9VVXNiVUpCUVU4c1JVRkJSV0lzVFVGQlRXRXNTVUZCVWl4RlFVRlFPMEZCUTBRc1YwRklVenRCUVVaRkxGTkJRV1E3UVVGUFJDeFBRVkpOTEUxQlVVRTdRVUZEVEhwQ0xIZENRVUZuUWxVc1QwRkJUMVVzUjBGQlVDeERRVUZvUWp0QlFVTkJjRVVzWjBKQlFWRm5SQ3hoUVVGU08wRkJRMEVzV1VGQlNXaEVMRTFCUVUxdlFpeE5RVUZPTEVkQlFXVkpMR2RDUVVGblFpeERRVUZ1UXl4RlFVRnpRenRCUVVOd1EzaENMR3RDUVVGUlFTeE5RVUZOTmtRc1MwRkJUaXhEUVVGWkxFTkJRVm9zUlVGQlpVTXNTMEZCUzBNc1MwRkJUQ3hEUVVGWGRrTXNaMEpCUVdkQ0xFTkJRVE5DTEVOQlFXWXNTVUZCWjBRc1IwRkJlRVE3UVVGRFFXOUNMRzFDUVVGVE1rSXNTVUZCVkN4RFFVRmpPMEZCUTFwWUxHdENRVUZOVVN4SFFVUk5PMEZCUlZwd1JTeHRRa0ZCVDBFc1MwRkdTenRCUVVkYVowUXNNa0pCUVdWQk8wRkJTRWdzVjBGQlpEdEJRVXRFTEZOQlVFUXNUVUZQVHp0QlFVTk1TaXh0UWtGQlV6SkNMRWxCUVZRc1EwRkJZenRCUVVOYVdDeHJRa0ZCVFZFc1IwRkVUVHRCUVVWYWNFVXNiVUpCUVU5Qk8wRkJSa3NzVjBGQlpEdEJRVWxFTzBGQlEwWTdRVUZEUml4TFFXeERSRHM3UVVGdlEwRXNVVUZCU1RSRExGTkJRVk40UWl4TlFVRmlMRVZCUVhGQ1ZTeExRVUZMWXl4UlFVRk1MRWRCUVdkQ1FTeFJRVUZvUWp0QlFVTnlRaXhYUVVGUFpDeEpRVUZRTzBGQlEwUTdPMEZCUlVRc1YwRkJVelJETEUxQlFWUXNRMEZCWjBKb1FpeE5RVUZvUWl4RlFVRjNRanRCUVVOMFFpeFJRVUZKYVVJc1VVRkJVVGRETEV0QlFVczJReXhMUVVGTUxFTkJRVmQ2UWl4SlFVRllMRVZCUVdsQ01FSXNUMEZCYWtJc1JVRkJXanRCUVVGQkxGRkJRMGxETEZGQlFWRXZReXhMUVVGTEswTXNTMEZCVEN4RFFVRlhSaXhMUVVGWUxFTkJSRm83UVVGRlFVRXNWVUZCVFhKQ0xFOUJRVTRzUTBGQll5eFZRVUZWYkVJc1EwRkJWaXhGUVVGaE8wRkJRM3BDTEdGQlFVOUJMRVZCUVVWRExFTkJRVVlzUjBGQlRVUXNSVUZCUlRCRExFdEJRVVlzUjBGQlZYUkVMR0ZCUVhaQ08wRkJRMFFzUzBGR1JEdEJRVWRCTEZGQlFVbDFSQ3hQUVVGUE4wTXNTVUZCU1RoRExGTkJRVW9zUTBGQll5eFJRVUZrTEVWQlFYZENReXhKUVVGNFFpeERRVUUyUWs0c1MwRkJOMElzUlVGQmIwTXNWVUZCVlhaRExFTkJRVllzUlVGQllUdEJRVU14UkN4aFFVRlBRU3hGUVVGRk9FTXNSVUZCUml4TFFVRlRPVU1zUlVGQlJUaERMRVZCUVVZc1IwRkJUeXhGUVVGRmNrUXNRMEZCYkVJc1EwRkJVRHRCUVVORUxFdEJSbFVzUTBGQldEdEJRVUZCTEZGQlIwbHpSQ3haUVVGWlNpeExRVUZMU3l4TFFVRk1MRWRCUVdFMVF5eE5RVUZpTEVOQlFXOUNMRWRCUVhCQ0xFVkJRWGxDUXl4SlFVRjZRaXhEUVVFNFFpeFBRVUU1UWl4RlFVRjFReXhOUVVGMlF5eEZRVUVyUTBFc1NVRkJMME1zUTBGQmIwUXNWMEZCY0VRc1JVRkJhVVVzV1VGQldUdEJRVU16Uml4aFFVRlBMR1ZCUVdWcFFpeFBRVUZQVEN4RlFVRjBRaXhIUVVFeVFpeEhRVUV6UWl4SFFVRnBRMHNzVDBGQlQwNHNSVUZCZUVNc1IwRkJOa01zUjBGQmNFUTdRVUZEUkN4TFFVWmxMRVZCUldKcFF5eEZRVVpoTEVOQlJWWXNUMEZHVlN4RlFVVkVReXhMUVVaRExFTkJTR2hDTzBGQlRVRklMR05CUVZVelF5eE5RVUZXTEVOQlFXbENMRkZCUVdwQ0xFVkJRVEpDUXl4SlFVRXpRaXhEUVVGblF5eEhRVUZvUXl4RlFVRnhReXhEUVVGeVF5eEZRVUYzUXpoRExFdEJRWGhETEVOQlFUaERMR05CUVRsRExFVkJRVGhFTEZWQlFWVnVSQ3hEUVVGV0xFVkJRV0U3UVVGRGVrVXNZVUZCVDBFc1JVRkJSWFZDTEZGQlFVWXNSMEZCWVN4TFFVRmlMRWRCUVhGQ0xFdEJRVFZDTzBGQlEwUXNTMEZHUkN4RlFVVkhORUlzUzBGR1NDeERRVVZUTEZGQlJsUXNSVUZGYlVJc1ZVRkJWVzVFTEVOQlFWWXNSVUZCWVR0QlFVTTVRaXhoUVVGUFFTeEZRVUZGZFVJc1VVRkJSaXhIUVVGaExGTkJRV0lzUjBGQmVVSXNVMEZCYUVNN1FVRkRSQ3hMUVVwRUxFVkJTVWMwUWl4TFFVcElMRU5CU1ZNc1RVRktWQ3hGUVVscFFpeFZRVUZWYmtRc1EwRkJWaXhGUVVGaE8wRkJRelZDTEZWQlFVbEJMRVZCUVVWMVFpeFJRVUZPTEVWQlFXZENMRTlCUVU5MlFpeEZRVUZGVXl4VFFVRkdMRWRCUVdNc1UwRkJaQ3hIUVVFd1FpeFBRVUZxUXp0QlFVTm9RaXhoUVVGUFZDeEZRVUZGVXl4VFFVRkdMRWRCUVdNc1UwRkJaQ3hIUVVFd1FpeFBRVUZxUXp0QlFVTkVMRXRCVUVRc1JVRlBSM2RETEVWQlVFZ3NRMEZQVFN4WFFWQk9MRVZCVDIxQ0xGVkJRVlZxUkN4RFFVRldMRVZCUVdFN1FVRkRPVUlzVlVGQlNVRXNSVUZCUlZrc1lVRkJUaXhGUVVGeFFrNHNTVUZCU1RoRExFbEJRVW9zUTBGQlUzQkVMRU5CUVZRN1FVRkRkRUlzUzBGVVJDeEZRVk5IYVVRc1JVRlVTQ3hEUVZOTkxGVkJWRTRzUlVGVGEwSXpReXhKUVVGSkswTXNTVUZVZEVJN1FVRlZRVTRzWTBGQlZUTkRMRTFCUVZZc1EwRkJhVUlzVFVGQmFrSXNSVUZCZVVKRExFbEJRWHBDTEVOQlFUaENMRWRCUVRsQ0xFVkJRVzFETEZWQlFWVk1MRU5CUVZZc1JVRkJZVHRCUVVNNVF5eFZRVUZKYzBRc1ZVRkJWVU1zWTBGQlkzWkVMRU5CUVdRc1NVRkJiVUlzUTBGQmFrTTdRVUZEUVN4aFFVRlBRU3hGUVVGRlVTeFJRVUZHTEVsQlFXTlNMRVZCUVVWVExGTkJRV2hDTEVkQlFUUkNMRU5CUVVNMlF5eFBRVUUzUWl4SFFVRjFRMEVzVDBGQk9VTTdRVUZEUkN4TFFVaEVMRVZCUjBkcVJDeEpRVWhJTEVOQlIxRXNTVUZJVWl4RlFVZGpMRWRCU0dRc1JVRkhiVUpCTEVsQlNHNUNMRU5CUjNkQ0xHRkJTSGhDTEVWQlIzVkRMRlZCUVZWTUxFTkJRVllzUlVGQllUdEJRVU5zUkN4aFFVRlBRU3hGUVVGRlVTeFJRVUZHTEVsQlFXTlNMRVZCUVVWVExGTkJRV2hDTEVkQlFUUkNMRXRCUVRWQ0xFZEJRVzlETEU5QlFUTkRPMEZCUTBRc1MwRk1SQ3hGUVV0SEswTXNTVUZNU0N4RFFVdFJMRlZCUVZWNFJDeERRVUZXTEVWQlFXRTdRVUZEYmtJc1lVRkJUMEVzUlVGQlJYZENMRWxCUVVZc1NVRkJWWGhDTEVWQlFVVndReXhMUVVGR0xFZEJRVlVzVDBGQlQyOURMRVZCUVVWd1F5eExRVUZ1UWl4SFFVRXlRaXhGUVVGeVF5eERRVUZRTzBGQlEwUXNTMEZRUkN4RlFVOUhkVVlzUzBGUVNDeERRVTlUTEdOQlVGUXNSVUZQZVVJc1EwRlFla0lzUlVGUE5FSkdMRVZCVURWQ0xFTkJUeXRDTEZkQlVDOUNMRVZCVHpSRExGVkJRVlZxUkN4RFFVRldMRVZCUVdFN1FVRkRka1FzVlVGQlNVRXNSVUZCUlZrc1lVRkJUaXhGUVVGeFFrNHNTVUZCU1RoRExFbEJRVW9zUTBGQlUzQkVMRU5CUVZRN1FVRkRkRUlzUzBGVVJDeEZRVk5IYVVRc1JVRlVTQ3hEUVZOTkxGVkJWRTRzUlVGVGEwSXpReXhKUVVGSkswTXNTVUZVZEVJN1FVRlZRU3hSUVVGSlNTeFZRVUZWTDBJc1MwRkJTMmRETEVkQlFVd3NRMEZCVTBNc1MwRkJWQ3hEUVVGbGFrTXNTVUZCWml4RlFVRnhRbUVzVFVGQlRVZ3NSMEZCVGl4RFFVRlZMRlZCUVZWd1F5eERRVUZXTEVWQlFXRTdRVUZEZUVRc1lVRkJUMEVzUlVGQlJVTXNRMEZCUml4SFFVRk5ZaXhoUVVGaU8wRkJRMFFzUzBGR2EwTXNRMEZCY2tJc1EwRkJaRHRCUVVkQkxGRkJRVWx4UlN4VlFVRlZja1VzWVVGQlZpeEhRVUV3UWl4RlFVRXhRaXhIUVVFclFrUXNRMEZCYmtNc1JVRkJjME03UVVGRGNFTnBReXh4UWtGQlpYRkRMRlZCUVZWeVJTeGhRVUY2UWp0QlFVTkJZaXhWUVVGSlRDeFBRVUZLTEVOQlFWbHBReXhOUVVGYUxFTkJRVzFDZEVJc1VVRkJia0lzUlVGQk5rSTRSQ3hKUVVFM1FpeEhRVUZ2UTJsQ0xGVkJRWEJETEVkQlFXbEVkRU1zVDBGQlQwd3NSVUZCZUVRN1FVRkRSRHM3UVVGRlJDeFJRVUZKTkVNc1lVRkJZV3hDTEV0QlFVdHRRaXhWUVVGTUxFZEJRV3RDUXl4UlFVRnNRaXhEUVVFeVFqRkZMR3RDUVVFelFpeEZRVUVyUXpKRkxFbEJRUzlETEVOQlFXOUVNVVVzWTBGQmNFUXNSVUZCYjBWbExFbEJRWEJGTEVOQlFYbEZMRmRCUVhwRkxFVkJRWE5HTEZWQlFWVk1MRU5CUVZZc1JVRkJZVHRCUVVOc1NDeGhRVUZQTEdWQlFXVkJMRVZCUVVWRExFTkJRV3BDTEVkQlFYRkNMRWRCUVhKQ0xFZEJRVEpDUkN4RlFVRkZSU3hEUVVFM1FpeEhRVUZwUXl4SFFVRjRRenRCUVVORUxFdEJSbWRDTEVOQlFXcENPMEZCUjBFeVJDeGxRVUZYTVVRc1RVRkJXQ3hEUVVGclFpeFJRVUZzUWl4RlFVRTBRa1VzU1VGQk5VSXNRMEZCYVVNc1IwRkJha01zUlVGQmMwTXNWVUZCVlV3c1EwRkJWaXhGUVVGaE8wRkJRMnBFTEdGQlFVOTFSQ3hqUVVGamRrUXNRMEZCWkN4RFFVRlFPMEZCUTBRc1MwRkdSQ3hGUVVWSGJVUXNTMEZHU0N4RFFVVlRMR05CUmxRc1JVRkZlVUlzVlVGQlZXNUVMRU5CUVZZc1JVRkJZVHRCUVVOd1F5eGhRVUZQUVN4RlFVRkZkVUlzVVVGQlJpeEhRVUZoTEV0QlFXSXNSMEZCY1VJc1MwRkJOVUk3UVVGRFJDeExRVXBFTEVWQlNVYzBRaXhMUVVwSUxFTkJTVk1zVVVGS1ZDeEZRVWx0UWl4VlFVRlZia1FzUTBGQlZpeEZRVUZoTzBGQlF6bENMR0ZCUVU5QkxFVkJRVVYxUWl4UlFVRkdMRWRCUVdFc1UwRkJZaXhIUVVGNVFpeFRRVUZvUXp0QlFVTkVMRXRCVGtRc1JVRk5SelJDTEV0QlRrZ3NRMEZOVXl4TlFVNVVMRVZCVFdsQ0xGVkJRVlZ1UkN4RFFVRldMRVZCUVdFN1FVRkROVUlzVlVGQlNVRXNSVUZCUlhWQ0xGRkJRVTRzUlVGQlowSXNUMEZCVDNaQ0xFVkJRVVZUTEZOQlFVWXNSMEZCWXl4VFFVRmtMRWRCUVRCQ0xFOUJRV3BETzBGQlEyaENMR0ZCUVU5VUxFVkJRVVZUTEZOQlFVWXNSMEZCWXl4VFFVRmtMRWRCUVRCQ0xFOUJRV3BETzBGQlEwUXNTMEZVUkR0QlFWVkJiMFFzWlVGQlZ6RkVMRTFCUVZnc1EwRkJhMElzVFVGQmJFSXNSVUZCTUVKblJDeExRVUV4UWl4RFFVRm5ReXhqUVVGb1F5eEZRVUZuUkN4RFFVRm9SRHM3UVVGRlFTeFJRVUZKWXl4WFFVRlhkRUlzUzBGQlMzVkNMRWxCUVV3c1IwRkJXVW9zVlVGQldpeEhRVUY1UWtNc1VVRkJla0lzUTBGQmEwTXhSU3hyUWtGQmJFTXNSVUZCYzBReVJTeEpRVUYwUkN4RFFVRXlSREZGTEdOQlFUTkVMRVZCUVRKRlpTeEpRVUV6UlN4RFFVRm5SaXhYUVVGb1JpeEZRVUUyUml4WlFVRlpPMEZCUTNSSUxHRkJRVThzWlVGQlpXbENMRTlCUVU5eVFpeERRVUYwUWl4SFFVRXdRaXhIUVVFeFFpeEhRVUZuUTNGQ0xFOUJRVTl3UWl4RFFVRjJReXhIUVVFeVF5eEhRVUZzUkR0QlFVTkVMRXRCUm1Nc1JVRkZXbWxGTEUxQlJsa3NSVUZCWmp0QlFVZEJSaXhoUVVGVE9VUXNUVUZCVkN4RFFVRm5RaXhSUVVGb1FpeEZRVUV3UWtVc1NVRkJNVUlzUTBGQkswSXNSMEZCTDBJc1JVRkJiME1zUTBGQmNFTTdRVUZEUVRSRUxHRkJRVk01UkN4TlFVRlVMRU5CUVdkQ0xFMUJRV2hDTEVWQlFYZENaMFFzUzBGQmVFSXNRMEZCT0VJc1kwRkJPVUlzUlVGQk9FTXNRMEZCT1VNN08wRkJSVUVzVVVGQlNXbENMRTlCUVU5MFJTeEpRVUZKT0VNc1UwRkJTaXhEUVVGakxGZEJRV1FzUlVGQk1rSkRMRWxCUVROQ0xFTkJRV2REU2l4TFFVRm9ReXhGUVVGMVF5eFZRVUZWZWtNc1EwRkJWaXhGUVVGaE8wRkJRemRFTEdGQlFVOUJMRVZCUVVWeFJTeE5RVUZHTEVOQlFWTjJRaXhGUVVGb1FqdEJRVU5FTEV0QlJsVXNRMEZCV0R0QlFVZEJjMElzVTBGQlMzQkNMRXRCUVV3c1IwRkJZWE5DTEUxQlFXSXNRMEZCYjBJc1RVRkJjRUlzUlVGQk5FSXNSMEZCTlVJc1JVRkJhVU5xUlN4SlFVRnFReXhEUVVGelF5eFBRVUYwUXl4RlFVRXJReXhOUVVFdlF5eEZRVUYxUkVFc1NVRkJka1FzUTBGQk5FUXNSMEZCTlVRc1JVRkJhVVVzV1VGQldUdEJRVU16UlN4VlFVRkphMFVzU1VGQlNTeEZRVUZGY2tVc1IwRkJSMjlDTEU5QlFVOU9MRVZCUVZvc1JVRkJaMEptTEVkQlFVZHhRaXhQUVVGUFRDeEZRVUV4UWl4RlFVRlNPMEZCUTBFc1lVRkJUM0JDTEZOQlFWTXNSVUZCUlhsQ0xGRkJRVkZwUkN4RFFVRldMRVZCUVdGR0xGRkJRVkZGTEVOQlFYSkNMRVZCUVZRc1EwRkJVRHRCUVVORUxFdEJTRVE3UVVGSlFVZ3NVMEZCUzA0c1ZVRkJUQ3hIUVVGclFrTXNVVUZCYkVJc1EwRkJNa0l4UlN4clFrRkJNMElzUlVGQkswTXlSU3hKUVVFdlF5eERRVUZ2UkRGRkxHTkJRWEJFTEVWQlFXOUZaU3hKUVVGd1JTeERRVUY1UlN4SFFVRjZSU3hGUVVFNFJWSXNVVUZCT1VVN1FVRkRRWFZGTEZOQlFVdEdMRWxCUVV3c1IwRkJXVW9zVlVGQldpeEhRVUY1UWtNc1VVRkJla0lzUTBGQmEwTXhSU3hyUWtGQmJFTXNSVUZCYzBReVJTeEpRVUYwUkN4RFFVRXlSREZGTEdOQlFUTkVMRVZCUVRKRlpTeEpRVUV6UlN4RFFVRm5SaXhIUVVGb1JpeEZRVUZ4Uml4WlFVRlpPMEZCUXk5R0xGVkJRVWxyUlN4SlFVRkpMRVZCUVVWeVJTeEhRVUZIYjBJc1QwRkJUM0JDTEVOQlFWb3NSVUZCWlVRc1IwRkJSM0ZDTEU5QlFVOXlRaXhEUVVGNlFpeEZRVUZTTzBGQlEwRXNZVUZCVDBvc1UwRkJVeXhGUVVGRmVVSXNVVUZCVVdsRUxFTkJRVllzUlVGQllVWXNVVUZCVVVVc1EwRkJja0lzUlVGQlZDeERRVUZRTzBGQlEwUXNTMEZJUkN4RlFVZEhTaXhOUVVoSU96dEJRVXRCTlVJc1ZVRkJUWEpDTEU5QlFVNHNRMEZCWXl4VlFVRlZiRUlzUTBGQlZpeEZRVUZoTzBGQlEzcENRU3hSUVVGRlowSXNSVUZCUml4SFFVRlBhRUlzUlVGQlJVVXNRMEZCVkR0QlFVTkJSaXhSUVVGRmFVSXNSVUZCUml4SFFVRlBha0lzUlVGQlJVTXNRMEZCVkR0QlFVTkVMRXRCU0VRN1FVRkpSRHM3UVVGRlJDeFhRVUZUYzBRc1lVRkJWQ3hEUVVGMVFuWkVMRU5CUVhaQ0xFVkJRVEJDTzBGQlEzaENMRkZCUVVsQkxFVkJRVVZSTEZGQlFVWXNTVUZCWTFJc1JVRkJSVk1zVTBGQmNFSXNSVUZCSzBJc1QwRkJUMnhDTEZsQlFWbHBSaXhaUVVGWmVFVXNRMEZCV2l4SlFVRnBRbElzWVVGQmNFTTdRVUZETDBJc1YwRkJUMFFzVTBGQlVEdEJRVU5FT3p0QlFVVkVMRmRCUVZOcFJpeFhRVUZVTEVOQlFYRkNReXhEUVVGeVFpeEZRVUYzUWp0QlFVTjBRaXhSUVVGSlF5eE5RVUZOTEVOQlFWWTdRVUZEUVN4UlFVRkpSQ3hGUVVGRmFrVXNVVUZCVGl4RlFVRm5RbWxGTEVWQlFVVnFSU3hSUVVGR0xFTkJRVmRWTEU5QlFWZ3NRMEZCYlVJc1ZVRkJWWGxFTEVOQlFWWXNSVUZCWVR0QlFVTTVReXhoUVVGUFJDeFBRVUZQUml4WlFVRlpSeXhEUVVGYUxFTkJRV1E3UVVGRFJDeExRVVpsTEVWQlFXaENMRXRCUlZFc1NVRkJTVVlzUlVGQlJXaEZMRk5CUVU0c1JVRkJhVUpuUlN4RlFVRkZhRVVzVTBGQlJpeERRVUZaVXl4UFFVRmFMRU5CUVc5Q0xGVkJRVlY1UkN4RFFVRldMRVZCUVdFN1FVRkRlRVFzWVVGQlQwUXNUMEZCVDBZc1dVRkJXVWNzUTBGQldpeERRVUZrTzBGQlEwUXNTMEZHZDBJc1JVRkJha0lzUzBGRlFVUTdRVUZEVWl4WFFVRlBRU3hIUVVGUU8wRkJRMFE3TzBGQlJVUXNWMEZCVTNoQ0xFdEJRVlFzUTBGQlpXeEVMRU5CUVdZc1JVRkJhMEk3UVVGRGFFSXNVVUZCU1VFc1JVRkJSVkVzVVVGQlRpeEZRVUZuUWp0QlFVTmtVaXhSUVVGRlV5eFRRVUZHTEVkQlFXTlVMRVZCUVVWUkxGRkJRV2hDTzBGQlEwRlNMRkZCUVVWUkxGRkJRVVlzUjBGQllTeEpRVUZpTzBGQlEwUXNTMEZJUkN4TlFVZFBPMEZCUTB4U0xGRkJRVVZSTEZGQlFVWXNSMEZCWVZJc1JVRkJSVk1zVTBGQlpqdEJRVU5CVkN4UlFVRkZVeXhUUVVGR0xFZEJRV01zU1VGQlpEdEJRVU5FTzBGQlEwUTJRaXhYUVVGUGRFTXNRMEZCVURzN1FVRkZRVHRCUVVOQkxGRkJRVWxCTEVWQlFVVlJMRkZCUVU0c1JVRkJaMEk3UVVGRFpGSXNVVUZCUlZFc1VVRkJSaXhEUVVGWFZTeFBRVUZZTEVOQlFXMUNMRlZCUVZVd1JDeExRVUZXTEVWQlFXbENPMEZCUTJ4RExGbEJRVWxCTEUxQlFVMW9SQ3hYUVVGT0xFbEJRWEZDWjBRc1RVRkJUVzVGTEZOQlFTOUNMRVZCUVRCRGVVTXNUVUZCVFRCQ0xFdEJRVTQ3UVVGRE0wTXNUMEZHUkR0QlFVZEVPMEZCUTBZN08wRkJSVVFzVjBGQlUzcEVMRkZCUVZRc1EwRkJhMEp1UWl4RFFVRnNRaXhGUVVGeFFqdEJRVU51UWl4UlFVRkpRU3hGUVVGRlVTeFJRVUZPTEVWQlFXZENPMEZCUTJSU0xGRkJRVVZUTEZOQlFVWXNSMEZCWTFRc1JVRkJSVkVzVVVGQmFFSTdRVUZEUVZJc1VVRkJSVk1zVTBGQlJpeERRVUZaVXl4UFFVRmFMRU5CUVc5Q1F5eFJRVUZ3UWp0QlFVTkJia0lzVVVGQlJWRXNVVUZCUml4SFFVRmhMRWxCUVdJN1FVRkRSRHRCUVVOR08wRkJRMFE0UWl4VFFVRlBlRUlzU1VGQlVEdEJRVU5FSWl3aVptbHNaU0k2SW1wemIyNXNaQzEyYVhNdWFuTWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUluZFhObElITjBjbWxqZENjN1hHNWNiazlpYW1WamRDNWtaV1pwYm1WUWNtOXdaWEowZVNobGVIQnZjblJ6TENCY0lsOWZaWE5OYjJSMWJHVmNJaXdnZTF4dUlDQjJZV3gxWlRvZ2RISjFaVnh1ZlNrN1hHNWNiblpoY2lCZmRIbHdaVzltSUQwZ2RIbHdaVzltSUZONWJXSnZiQ0E5UFQwZ1hDSm1kVzVqZEdsdmJsd2lJQ1ltSUhSNWNHVnZaaUJUZVcxaWIyd3VhWFJsY21GMGIzSWdQVDA5SUZ3aWMzbHRZbTlzWENJZ1B5Qm1kVzVqZEdsdmJpQW9iMkpxS1NCN0lISmxkSFZ5YmlCMGVYQmxiMllnYjJKcU95QjlJRG9nWm5WdVkzUnBiMjRnS0c5aWFpa2dleUJ5WlhSMWNtNGdiMkpxSUNZbUlIUjVjR1Z2WmlCVGVXMWliMndnUFQwOUlGd2lablZ1WTNScGIyNWNJaUFtSmlCdlltb3VZMjl1YzNSeWRXTjBiM0lnUFQwOUlGTjViV0p2YkNBL0lGd2ljM2x0WW05c1hDSWdPaUIwZVhCbGIyWWdiMkpxT3lCOU8xeHVMeW9nWjJ4dlltRnNjeUJrTXlBcUwxeHVMeW9nWlhOc2FXNTBJRzV2TFhOb1lXUnZkem9nWENKdlptWmNJaUFxTDF4dVhHNWxlSEJ2Y25SekxtUmxabUYxYkhRZ1BTQm1kVzVqZEdsdmJpQW9aRE1wSUh0Y2JpQWdaRE11YW5OdmJteGtWbWx6SUQwZ2FuTnZibXhrVm1sek8xeHVmVHRjYmx4dWRtRnlJRjlrSUQwZ2NtVnhkV2x5WlNnblpETW5LVHRjYmx4dWRtRnlJRjlrTWlBOUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvWDJRcE8xeHVYRzUyWVhJZ1gyUXpWR2x3SUQwZ2NtVnhkV2x5WlNnblpETXRkR2x3SnlrN1hHNWNiblpoY2lCZlpETlVhWEF5SUQwZ1gybHVkR1Z5YjNCU1pYRjFhWEpsUkdWbVlYVnNkQ2hmWkROVWFYQXBPMXh1WEc1bWRXNWpkR2x2YmlCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRzlpYWlrZ2V5QnlaWFIxY200Z2IySnFJQ1ltSUc5aWFpNWZYMlZ6VFc5a2RXeGxJRDhnYjJKcUlEb2dleUJrWldaaGRXeDBPaUJ2WW1vZ2ZUc2dmVnh1WEc0b01Dd2dYMlF6Vkdsd01pNWtaV1poZFd4MEtTaGZaREl1WkdWbVlYVnNkQ2s3WEc1Y2JtWjFibU4wYVc5dUlHcHpiMjVzWkZacGN5aHFjMjl1YkdRc0lITmxiR1ZqZEc5eUtTQjdYRzRnSUhaaGNpQmpiMjVtYVdjZ1BTQmhjbWQxYldWdWRITXViR1Z1WjNSb0lEdzlJRElnZkh3Z1lYSm5kVzFsYm5Seld6SmRJRDA5UFNCMWJtUmxabWx1WldRZ1B5QjdmU0E2SUdGeVozVnRaVzUwYzFzeVhUdGNibHh1SUNCcFppQW9JV3B6YjI1c1pDQW1KaUFoYzJWc1pXTjBiM0lwSUhKbGRIVnliaUJxYzI5dWJHUldhWE03WEc1Y2JpQWdkbUZ5SUdnZ1BTQmpiMjVtYVdjdWFDQjhmQ0EyTURBc1hHNGdJQ0FnSUNCM0lEMGdZMjl1Wm1sbkxuY2dmSHdnT0RBd0xGeHVJQ0FnSUNBZ2JXRjRUR0ZpWld4WGFXUjBhQ0E5SUdOdmJtWnBaeTV0WVhoTVlXSmxiRmRwWkhSb0lIeDhJREkxTUN4Y2JpQWdJQ0FnSUhSeVlXNXphWFJwYjI1RWRYSmhkR2x2YmlBOUlHTnZibVpwWnk1MGNtRnVjMmwwYVc5dVJIVnlZWFJwYjI0Z2ZId2dOelV3TEZ4dUlDQWdJQ0FnZEhKaGJuTnBkR2x2YmtWaGMyVWdQU0JqYjI1bWFXY3VkSEpoYm5OcGRHbHZia1ZoYzJVZ2ZId2dKMk4xWW1sakxXbHVMVzkxZENjc1hHNGdJQ0FnSUNCdGFXNVNZV1JwZFhNZ1BTQmpiMjVtYVdjdWJXbHVVbUZrYVhWeklIeDhJRFVzWEc0Z0lDQWdJQ0J6WTJGc2FXNW5SbUZqZEc5eUlEMGdZMjl1Wm1sbkxuTmpZV3hwYm1kR1lXTjBiM0lnZkh3Z01peGNiaUFnSUNBZ0lHa2dQU0F3TEZ4dUlDQWdJQ0FnZEhKbFpTQTlJRjlrTWk1a1pXWmhkV3gwTG14aGVXOTFkQzUwY21WbEtDa3VjMmw2WlNoYmFDd2dkMTBwTEZ4dUlDQWdJQ0FnWkdsaFoyOXVZV3dnUFNCZlpESXVaR1ZtWVhWc2RDNXpkbWN1WkdsaFoyOXVZV3dvS1M1d2NtOXFaV04wYVc5dUtHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdjbVYwZFhKdUlGdGtMbmtzSUdRdWVGMDdYRzRnSUgwcExGeHVJQ0FnSUNBZ2MzWm5JRDBnWDJReUxtUmxabUYxYkhRdWMyVnNaV04wS0hObGJHVmpkRzl5S1M1aGNIQmxibVFvSjNOMlp5Y3BMbUYwZEhJb0ozZHBaSFJvSnl3Z2R5a3VZWFIwY2lnbmFHVnBaMmgwSnl3Z2FDa3VZWEJ3Wlc1a0tDZG5KeWt1WVhSMGNpZ25kSEpoYm5ObWIzSnRKeXdnSjNSeVlXNXpiR0YwWlNnbklDc2diV0Y0VEdGaVpXeFhhV1IwYUNBcklDY3NNQ2tuS1N4Y2JpQWdJQ0FnSUhScGNDQTlJRjlrTWk1a1pXWmhkV3gwTG5ScGNDZ3BMbVJwY21WamRHbHZiaWhtZFc1amRHbHZiaUFvWkNrZ2UxeHVJQ0FnSUhKbGRIVnliaUJrTG1Ob2FXeGtjbVZ1SUh4OElHUXVYMk5vYVd4a2NtVnVJRDhnSjNjbklEb2dKMlVuTzF4dUlDQjlLUzV2Wm1aelpYUW9ablZ1WTNScGIyNGdLR1FwSUh0Y2JpQWdJQ0J5WlhSMWNtNGdaQzVqYUdsc1pISmxiaUI4ZkNCa0xsOWphR2xzWkhKbGJpQS9JRnN3TENBdE0xMGdPaUJiTUN3Z00xMDdYRzRnSUgwcExtRjBkSElvSjJOc1lYTnpKeXdnSjJRekxYUnBjQ2NwTG1oMGJXd29ablZ1WTNScGIyNGdLR1FwSUh0Y2JpQWdJQ0J5WlhSMWNtNGdKenh6Y0dGdVBpY2dLeUJrTG5aaGJIVmxSWGgwWlc1a1pXUWdLeUFuUEM5emNHRnVQaWM3WEc0Z0lIMHBPMXh1SUNCemRtY3VZMkZzYkNoMGFYQXBPMXh1WEc0Z0lIWmhjaUJ5YjI5MElEMGdhbk52Ym14a1ZISmxaU2hxYzI5dWJHUXBPMXh1SUNCeWIyOTBMbmd3SUQwZ2FDQXZJREk3WEc0Z0lISnZiM1F1ZVRBZ1BTQXdPMXh1SUNCeWIyOTBMbU5vYVd4a2NtVnVMbVp2Y2tWaFkyZ29ZMjlzYkdGd2MyVXBPMXh1WEc0Z0lHWjFibU4wYVc5dUlHTm9ZVzVuWlZOV1IxZHBaSFJvS0c1bGQxZHBaSFJvS1NCN1hHNGdJQ0FnYVdZZ0tIY2dJVDA5SUc1bGQxZHBaSFJvS1NCZlpESXVaR1ZtWVhWc2RDNXpaV3hsWTNRb2MyVnNaV04wYjNJZ0t5QW5JRDRnYzNabkp5a3VZWFIwY2lnbmQybGtkR2duTENCdVpYZFhhV1IwYUNrN1hHNGdJSDFjYmx4dUlDQm1kVzVqZEdsdmJpQnFjMjl1YkdSVWNtVmxLSE52ZFhKalpTa2dlMXh1SUNBZ0lIWmhjaUIwY21WbElEMGdlMzA3WEc0Z0lDQWdhV1lnS0NkQWFXUW5JR2x1SUhOdmRYSmpaU2tnZTF4dUlDQWdJQ0FnZEhKbFpTNXBjMGxrVG05a1pTQTlJSFJ5ZFdVN1hHNGdJQ0FnSUNCMGNtVmxMbTVoYldVZ1BTQnpiM1Z5WTJWYkowQnBaQ2RkTzF4dUlDQWdJQ0FnYVdZZ0tIUnlaV1V1Ym1GdFpTNXNaVzVuZEdnZ1BpQnRZWGhNWVdKbGJGZHBaSFJvSUM4Z09Ta2dlMXh1SUNBZ0lDQWdJQ0IwY21WbExuWmhiSFZsUlhoMFpXNWtaV1FnUFNCMGNtVmxMbTVoYldVN1hHNGdJQ0FnSUNBZ0lIUnlaV1V1Ym1GdFpTQTlJQ2ZpZ0tZbklDc2dkSEpsWlM1MllXeDFaVVY0ZEdWdVpHVmtMbk5zYVdObEtDMU5ZWFJvTG1ac2IyOXlLRzFoZUV4aFltVnNWMmxrZEdnZ0x5QTVLU2s3WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lIUnlaV1V1YVhOSlpFNXZaR1VnUFNCMGNuVmxPMXh1SUNBZ0lDQWdkSEpsWlM1cGMwSnNZVzVyVG05a1pTQTlJSFJ5ZFdVN1hHNGdJQ0FnSUNBdkx5QnlZVzVrYjIwZ2FXUXNJR05oYmlCeVpYQnNZV05sSUhkcGRHZ2dZV04wZFdGc0lIVjFhV1FnWjJWdVpYSmhkRzl5SUdsbUlHNWxaV1JsWkZ4dUlDQWdJQ0FnZEhKbFpTNXVZVzFsSUQwZ0oxODZZaWNnS3lCTllYUm9MbkpoYm1SdmJTZ3BMblJ2VTNSeWFXNW5LREV3S1M1emJHbGpaU2d0TnlrN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnZG1GeUlHTm9hV3hrY21WdUlEMGdXMTA3WEc0Z0lDQWdUMkpxWldOMExtdGxlWE1vYzI5MWNtTmxLUzVtYjNKRllXTm9LR1oxYm1OMGFXOXVJQ2hyWlhrcElIdGNiaUFnSUNBZ0lHbG1JQ2hyWlhrZ1BUMDlJQ2RBYVdRbklIeDhJR3RsZVNBOVBUMGdKMEJqYjI1MFpYaDBKeUI4ZkNCemIzVnlZMlZiYTJWNVhTQTlQVDBnYm5Wc2JDa2djbVYwZFhKdU8xeHVJQ0FnSUNBZ2RtRnlJSFpoYkhWbFJYaDBaVzVrWldRZ1BTQjJiMmxrSURBc1hHNGdJQ0FnSUNBZ0lDQWdkbUZzZFdVZ1BTQjJiMmxrSURBN1hHNGdJQ0FnSUNCcFppQW9YM1I1Y0dWdlppaHpiM1Z5WTJWYmEyVjVYU2tnUFQwOUlDZHZZbXBsWTNRbklDWW1JQ0ZCY25KaGVTNXBjMEZ5Y21GNUtITnZkWEpqWlZ0clpYbGRLU2tnZTF4dUlDQWdJQ0FnSUNCamFHbHNaSEpsYmk1d2RYTm9LSHRjYmlBZ0lDQWdJQ0FnSUNCdVlXMWxPaUJyWlhrc1hHNGdJQ0FnSUNBZ0lDQWdZMmhwYkdSeVpXNDZJRnRxYzI5dWJHUlVjbVZsS0hOdmRYSmpaVnRyWlhsZEtWMWNiaUFnSUNBZ0lDQWdmU2s3WEc0Z0lDQWdJQ0I5SUdWc2MyVWdhV1lnS0VGeWNtRjVMbWx6UVhKeVlYa29jMjkxY21ObFcydGxlVjBwS1NCN1hHNGdJQ0FnSUNBZ0lHTm9hV3hrY21WdUxuQjFjMmdvZTF4dUlDQWdJQ0FnSUNBZ0lHNWhiV1U2SUd0bGVTeGNiaUFnSUNBZ0lDQWdJQ0JqYUdsc1pISmxiam9nYzI5MWNtTmxXMnRsZVYwdWJXRndLR1oxYm1OMGFXOXVJQ2hwZEdWdEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCcFppQW9LSFI1Y0dWdlppQnBkR1Z0SUQwOVBTQW5kVzVrWldacGJtVmtKeUEvSUNkMWJtUmxabWx1WldRbklEb2dYM1I1Y0dWdlppaHBkR1Z0S1NrZ1BUMDlJQ2R2WW1wbFkzUW5LU0J5WlhSMWNtNGdhbk52Ym14a1ZISmxaU2hwZEdWdEtUdGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGRIVnliaUI3SUc1aGJXVTZJR2wwWlcwZ2ZUdGNiaUFnSUNBZ0lDQWdJQ0I5S1Z4dUlDQWdJQ0FnSUNCOUtUdGNiaUFnSUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lIWmhiSFZsUlhoMFpXNWtaV1FnUFNCemIzVnlZMlZiYTJWNVhUdGNiaUFnSUNBZ0lDQWdkbUZzZFdVZ1BTQjJZV3gxWlVWNGRHVnVaR1ZrTzF4dUlDQWdJQ0FnSUNCcFppQW9kbUZzZFdVdWJHVnVaM1JvSUQ0Z2JXRjRUR0ZpWld4WGFXUjBhQ0F2SURrcElIdGNiaUFnSUNBZ0lDQWdJQ0IyWVd4MVpTQTlJSFpoYkhWbExuTnNhV05sS0RBc0lFMWhkR2d1Wm14dmIzSW9iV0Y0VEdGaVpXeFhhV1IwYUNBdklEa3BLU0FySUNmaWdLWW5PMXh1SUNBZ0lDQWdJQ0FnSUdOb2FXeGtjbVZ1TG5CMWMyZ29lMXh1SUNBZ0lDQWdJQ0FnSUNBZ2JtRnRaVG9nYTJWNUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnZG1Gc2RXVTZJSFpoYkhWbExGeHVJQ0FnSUNBZ0lDQWdJQ0FnZG1Gc2RXVkZlSFJsYm1SbFpEb2dkbUZzZFdWRmVIUmxibVJsWkZ4dUlDQWdJQ0FnSUNBZ0lIMHBPMXh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0FnSUdOb2FXeGtjbVZ1TG5CMWMyZ29lMXh1SUNBZ0lDQWdJQ0FnSUNBZ2JtRnRaVG9nYTJWNUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnZG1Gc2RXVTZJSFpoYkhWbFhHNGdJQ0FnSUNBZ0lDQWdmU2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgxY2JpQWdJQ0I5S1R0Y2JseHVJQ0FnSUdsbUlDaGphR2xzWkhKbGJpNXNaVzVuZEdncElIUnlaV1V1WTJocGJHUnlaVzRnUFNCamFHbHNaSEpsYmp0Y2JpQWdJQ0J5WlhSMWNtNGdkSEpsWlR0Y2JpQWdmVnh1WEc0Z0lHWjFibU4wYVc5dUlIVndaR0YwWlNoemIzVnlZMlVwSUh0Y2JpQWdJQ0IyWVhJZ2JtOWtaWE1nUFNCMGNtVmxMbTV2WkdWektISnZiM1FwTG5KbGRtVnljMlVvS1N4Y2JpQWdJQ0FnSUNBZ2JHbHVhM01nUFNCMGNtVmxMbXhwYm10ektHNXZaR1Z6S1R0Y2JpQWdJQ0J1YjJSbGN5NW1iM0pGWVdOb0tHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdaQzU1SUQwZ1pDNWtaWEIwYUNBcUlHMWhlRXhoWW1Wc1YybGtkR2c3WEc0Z0lDQWdmU2s3WEc0Z0lDQWdkbUZ5SUc1dlpHVWdQU0J6ZG1jdWMyVnNaV04wUVd4c0tDZG5MbTV2WkdVbktTNWtZWFJoS0c1dlpHVnpMQ0JtZFc1amRHbHZiaUFvWkNrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUdRdWFXUWdmSHdnS0dRdWFXUWdQU0FySzJrcE8xeHVJQ0FnSUgwcExGeHVJQ0FnSUNBZ0lDQnViMlJsUlc1MFpYSWdQU0J1YjJSbExtVnVkR1Z5S0NrdVlYQndaVzVrS0Nkbkp5a3VZWFIwY2lnblkyeGhjM01uTENBbmJtOWtaU2NwTG1GMGRISW9KM1J5WVc1elptOXliU2NzSUdaMWJtTjBhVzl1SUNncElIdGNiaUFnSUNBZ0lISmxkSFZ5YmlBbmRISmhibk5zWVhSbEtDY2dLeUJ6YjNWeVkyVXVlVEFnS3lBbkxDY2dLeUJ6YjNWeVkyVXVlREFnS3lBbktTYzdYRzRnSUNBZ2ZTa3ViMjRvSjJOc2FXTnJKeXdnWTJ4cFkyc3BPMXh1SUNBZ0lHNXZaR1ZGYm5SbGNpNWhjSEJsYm1Rb0oyTnBjbU5zWlNjcExtRjBkSElvSjNJbkxDQXdLUzV6ZEhsc1pTZ25jM1J5YjJ0bExYZHBaSFJvSnl3Z1puVnVZM1JwYjI0Z0tHUXBJSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQmtMbWx6U1dST2IyUmxJRDhnSnpKd2VDY2dPaUFuTVhCNEp6dGNiaUFnSUNCOUtTNXpkSGxzWlNnbmMzUnliMnRsSnl3Z1puVnVZM1JwYjI0Z0tHUXBJSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQmtMbWx6U1dST2IyUmxJRDhnSnlOR04wTkJNVGduSURvZ0p5TTBSVU5FUXpRbk8xeHVJQ0FnSUgwcExuTjBlV3hsS0NkbWFXeHNKeXdnWm5WdVkzUnBiMjRnS0dRcElIdGNiaUFnSUNBZ0lHbG1JQ2hrTG1selNXUk9iMlJsS1NCeVpYUjFjbTRnWkM1ZlkyaHBiR1J5Wlc0Z1B5QW5JMFkxUkRjMlJTY2dPaUFuZDJocGRHVW5PMXh1SUNBZ0lDQWdjbVYwZFhKdUlHUXVYMk5vYVd4a2NtVnVJRDhnSnlNNE5rVXlSRFVuSURvZ0ozZG9hWFJsSnp0Y2JpQWdJQ0I5S1M1dmJpZ25iVzkxYzJWdmRtVnlKeXdnWm5WdVkzUnBiMjRnS0dRcElIdGNiaUFnSUNBZ0lHbG1JQ2hrTG5aaGJIVmxSWGgwWlc1a1pXUXBJSFJwY0M1emFHOTNLR1FwTzF4dUlDQWdJSDBwTG05dUtDZHRiM1Z6Wlc5MWRDY3NJSFJwY0M1b2FXUmxLVHRjYmlBZ0lDQnViMlJsUlc1MFpYSXVZWEJ3Wlc1a0tDZDBaWGgwSnlrdVlYUjBjaWduZUNjc0lHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdJQ0IyWVhJZ2MzQmhZMmx1WnlBOUlHTnZiWEIxZEdWU1lXUnBkWE1vWkNrZ0t5QTFPMXh1SUNBZ0lDQWdjbVYwZFhKdUlHUXVZMmhwYkdSeVpXNGdmSHdnWkM1ZlkyaHBiR1J5Wlc0Z1B5QXRjM0JoWTJsdVp5QTZJSE53WVdOcGJtYzdYRzRnSUNBZ2ZTa3VZWFIwY2lnblpIa25MQ0FuTkNjcExtRjBkSElvSjNSbGVIUXRZVzVqYUc5eUp5d2dablZ1WTNScGIyNGdLR1FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUJrTG1Ob2FXeGtjbVZ1SUh4OElHUXVYMk5vYVd4a2NtVnVJRDhnSjJWdVpDY2dPaUFuYzNSaGNuUW5PMXh1SUNBZ0lIMHBMblJsZUhRb1puVnVZM1JwYjI0Z0tHUXBJSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQmtMbTVoYldVZ0t5QW9aQzUyWVd4MVpTQS9JQ2M2SUNjZ0t5QmtMblpoYkhWbElEb2dKeWNwTzF4dUlDQWdJSDBwTG5OMGVXeGxLQ2RtYVd4c0xXOXdZV05wZEhrbkxDQXdLUzV2YmlnbmJXOTFjMlZ2ZG1WeUp5d2dablZ1WTNScGIyNGdLR1FwSUh0Y2JpQWdJQ0FnSUdsbUlDaGtMblpoYkhWbFJYaDBaVzVrWldRcElIUnBjQzV6YUc5M0tHUXBPMXh1SUNBZ0lIMHBMbTl1S0NkdGIzVnpaVzkxZENjc0lIUnBjQzVvYVdSbEtUdGNiaUFnSUNCMllYSWdiV0Y0VTNCaGJpQTlJRTFoZEdndWJXRjRMbUZ3Y0d4NUtFMWhkR2dzSUc1dlpHVnpMbTFoY0NobWRXNWpkR2x2YmlBb1pDa2dlMXh1SUNBZ0lDQWdjbVYwZFhKdUlHUXVlU0FySUcxaGVFeGhZbVZzVjJsa2RHZzdYRzRnSUNBZ2ZTa3BPMXh1SUNBZ0lHbG1JQ2h0WVhoVGNHRnVJQ3NnYldGNFRHRmlaV3hYYVdSMGFDQXJJREl3SUQ0Z2R5a2dlMXh1SUNBZ0lDQWdZMmhoYm1kbFUxWkhWMmxrZEdnb2JXRjRVM0JoYmlBcklHMWhlRXhoWW1Wc1YybGtkR2dwTzF4dUlDQWdJQ0FnWDJReUxtUmxabUYxYkhRdWMyVnNaV04wS0hObGJHVmpkRzl5S1M1dWIyUmxLQ2t1YzJOeWIyeHNUR1ZtZENBOUlITnZkWEpqWlM1NU1EdGNiaUFnSUNCOVhHNWNiaUFnSUNCMllYSWdibTlrWlZWd1pHRjBaU0E5SUc1dlpHVXVkSEpoYm5OcGRHbHZiaWdwTG1SMWNtRjBhVzl1S0hSeVlXNXphWFJwYjI1RWRYSmhkR2x2YmlrdVpXRnpaU2gwY21GdWMybDBhVzl1UldGelpTa3VZWFIwY2lnbmRISmhibk5tYjNKdEp5d2dablZ1WTNScGIyNGdLR1FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUFuZEhKaGJuTnNZWFJsS0NjZ0t5QmtMbmtnS3lBbkxDY2dLeUJrTG5nZ0t5QW5LU2M3WEc0Z0lDQWdmU2s3WEc0Z0lDQWdibTlrWlZWd1pHRjBaUzV6Wld4bFkzUW9KMk5wY21Oc1pTY3BMbUYwZEhJb0ozSW5MQ0JtZFc1amRHbHZiaUFvWkNrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUdOdmJYQjFkR1ZTWVdScGRYTW9aQ2s3WEc0Z0lDQWdmU2t1YzNSNWJHVW9KM04wY205clpTMTNhV1IwYUNjc0lHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdaQzVwYzBsa1RtOWtaU0EvSUNjeWNIZ25JRG9nSnpGd2VDYzdYRzRnSUNBZ2ZTa3VjM1I1YkdVb0ozTjBjbTlyWlNjc0lHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdaQzVwYzBsa1RtOWtaU0EvSUNjalJqZERRVEU0SnlBNklDY2pORVZEUkVNMEp6dGNiaUFnSUNCOUtTNXpkSGxzWlNnblptbHNiQ2NzSUdaMWJtTjBhVzl1SUNoa0tTQjdYRzRnSUNBZ0lDQnBaaUFvWkM1cGMwbGtUbTlrWlNrZ2NtVjBkWEp1SUdRdVgyTm9hV3hrY21WdUlEOGdKeU5HTlVRM05rVW5JRG9nSjNkb2FYUmxKenRjYmlBZ0lDQWdJSEpsZEhWeWJpQmtMbDlqYUdsc1pISmxiaUEvSUNjak9EWkZNa1ExSnlBNklDZDNhR2wwWlNjN1hHNGdJQ0FnZlNrN1hHNGdJQ0FnYm05a1pWVndaR0YwWlM1elpXeGxZM1FvSjNSbGVIUW5LUzV6ZEhsc1pTZ25abWxzYkMxdmNHRmphWFI1Snl3Z01TazdYRzVjYmlBZ0lDQjJZWElnYm05a1pVVjRhWFFnUFNCdWIyUmxMbVY0YVhRb0tTNTBjbUZ1YzJsMGFXOXVLQ2t1WkhWeVlYUnBiMjRvZEhKaGJuTnBkR2x2YmtSMWNtRjBhVzl1S1M1bFlYTmxLSFJ5WVc1emFYUnBiMjVGWVhObEtTNWhkSFJ5S0NkMGNtRnVjMlp2Y20wbkxDQm1kVzVqZEdsdmJpQW9LU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdKM1J5WVc1emJHRjBaU2duSUNzZ2MyOTFjbU5sTG5rZ0t5QW5MQ2NnS3lCemIzVnlZMlV1ZUNBcklDY3BKenRjYmlBZ0lDQjlLUzV5WlcxdmRtVW9LVHRjYmlBZ0lDQnViMlJsUlhocGRDNXpaV3hsWTNRb0oyTnBjbU5zWlNjcExtRjBkSElvSjNJbkxDQXdLVHRjYmlBZ0lDQnViMlJsUlhocGRDNXpaV3hsWTNRb0ozUmxlSFFuS1M1emRIbHNaU2duWm1sc2JDMXZjR0ZqYVhSNUp5d2dNQ2s3WEc1Y2JpQWdJQ0IyWVhJZ2JHbHVheUE5SUhOMlp5NXpaV3hsWTNSQmJHd29KM0JoZEdndWJHbHVheWNwTG1SaGRHRW9iR2x1YTNNc0lHWjFibU4wYVc5dUlDaGtLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdaQzUwWVhKblpYUXVhV1E3WEc0Z0lDQWdmU2s3WEc0Z0lDQWdiR2x1YXk1bGJuUmxjaWdwTG1sdWMyVnlkQ2duY0dGMGFDY3NJQ2RuSnlrdVlYUjBjaWduWTJ4aGMzTW5MQ0FuYkdsdWF5Y3BMbUYwZEhJb0oyUW5MQ0JtZFc1amRHbHZiaUFvS1NCN1hHNGdJQ0FnSUNCMllYSWdieUE5SUhzZ2VEb2djMjkxY21ObExuZ3dMQ0I1T2lCemIzVnlZMlV1ZVRBZ2ZUdGNiaUFnSUNBZ0lISmxkSFZ5YmlCa2FXRm5iMjVoYkNoN0lITnZkWEpqWlRvZ2J5d2dkR0Z5WjJWME9pQnZJSDBwTzF4dUlDQWdJSDBwTzF4dUlDQWdJR3hwYm1zdWRISmhibk5wZEdsdmJpZ3BMbVIxY21GMGFXOXVLSFJ5WVc1emFYUnBiMjVFZFhKaGRHbHZiaWt1WldGelpTaDBjbUZ1YzJsMGFXOXVSV0Z6WlNrdVlYUjBjaWduWkNjc0lHUnBZV2R2Ym1Gc0tUdGNiaUFnSUNCc2FXNXJMbVY0YVhRb0tTNTBjbUZ1YzJsMGFXOXVLQ2t1WkhWeVlYUnBiMjRvZEhKaGJuTnBkR2x2YmtSMWNtRjBhVzl1S1M1bFlYTmxLSFJ5WVc1emFYUnBiMjVGWVhObEtTNWhkSFJ5S0Nka0p5d2dablZ1WTNScGIyNGdLQ2tnZTF4dUlDQWdJQ0FnZG1GeUlHOGdQU0I3SUhnNklITnZkWEpqWlM1NExDQjVPaUJ6YjNWeVkyVXVlU0I5TzF4dUlDQWdJQ0FnY21WMGRYSnVJR1JwWVdkdmJtRnNLSHNnYzI5MWNtTmxPaUJ2TENCMFlYSm5aWFE2SUc4Z2ZTazdYRzRnSUNBZ2ZTa3VjbVZ0YjNabEtDazdYRzVjYmlBZ0lDQnViMlJsY3k1bWIzSkZZV05vS0daMWJtTjBhVzl1SUNoa0tTQjdYRzRnSUNBZ0lDQmtMbmd3SUQwZ1pDNTRPMXh1SUNBZ0lDQWdaQzU1TUNBOUlHUXVlVHRjYmlBZ0lDQjlLVHRjYmlBZ2ZWeHVYRzRnSUdaMWJtTjBhVzl1SUdOdmJYQjFkR1ZTWVdScGRYTW9aQ2tnZTF4dUlDQWdJR2xtSUNoa0xtTm9hV3hrY21WdUlIeDhJR1F1WDJOb2FXeGtjbVZ1S1NCeVpYUjFjbTRnYldsdVVtRmthWFZ6SUNzZ2JuVnRSVzVrVG05a1pYTW9aQ2tnTHlCelkyRnNhVzVuUm1GamRHOXlPMXh1SUNBZ0lISmxkSFZ5YmlCdGFXNVNZV1JwZFhNN1hHNGdJSDFjYmx4dUlDQm1kVzVqZEdsdmJpQnVkVzFGYm1ST2IyUmxjeWh1S1NCN1hHNGdJQ0FnZG1GeUlHNTFiU0E5SURBN1hHNGdJQ0FnYVdZZ0tHNHVZMmhwYkdSeVpXNHBJRzR1WTJocGJHUnlaVzR1Wm05eVJXRmphQ2htZFc1amRHbHZiaUFvWXlrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUc1MWJTQXJQU0J1ZFcxRmJtUk9iMlJsY3loaktUdGNiaUFnSUNCOUtUdGxiSE5sSUdsbUlDaHVMbDlqYUdsc1pISmxiaWtnYmk1ZlkyaHBiR1J5Wlc0dVptOXlSV0ZqYUNobWRXNWpkR2x2YmlBb1l5a2dlMXh1SUNBZ0lDQWdjbVYwZFhKdUlHNTFiU0FyUFNCdWRXMUZibVJPYjJSbGN5aGpLVHRjYmlBZ0lDQjlLVHRsYkhObElHNTFiU3NyTzF4dUlDQWdJSEpsZEhWeWJpQnVkVzA3WEc0Z0lIMWNibHh1SUNCbWRXNWpkR2x2YmlCamJHbGpheWhrS1NCN1hHNGdJQ0FnYVdZZ0tHUXVZMmhwYkdSeVpXNHBJSHRjYmlBZ0lDQWdJR1F1WDJOb2FXeGtjbVZ1SUQwZ1pDNWphR2xzWkhKbGJqdGNiaUFnSUNBZ0lHUXVZMmhwYkdSeVpXNGdQU0J1ZFd4c08xeHVJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0JrTG1Ob2FXeGtjbVZ1SUQwZ1pDNWZZMmhwYkdSeVpXNDdYRzRnSUNBZ0lDQmtMbDlqYUdsc1pISmxiaUE5SUc1MWJHdzdYRzRnSUNBZ2ZWeHVJQ0FnSUhWd1pHRjBaU2hrS1R0Y2JseHVJQ0FnSUM4dklHWmhjM1F0Wm05eWQyRnlaQ0JpYkdGdWF5QnViMlJsYzF4dUlDQWdJR2xtSUNoa0xtTm9hV3hrY21WdUtTQjdYRzRnSUNBZ0lDQmtMbU5vYVd4a2NtVnVMbVp2Y2tWaFkyZ29ablZ1WTNScGIyNGdLR05vYVd4a0tTQjdYRzRnSUNBZ0lDQWdJR2xtSUNoamFHbHNaQzVwYzBKc1lXNXJUbTlrWlNBbUppQmphR2xzWkM1ZlkyaHBiR1J5Wlc0cElHTnNhV05yS0dOb2FXeGtLVHRjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUdaMWJtTjBhVzl1SUdOdmJHeGhjSE5sS0dRcElIdGNiaUFnSUNCcFppQW9aQzVqYUdsc1pISmxiaWtnZTF4dUlDQWdJQ0FnWkM1ZlkyaHBiR1J5Wlc0Z1BTQmtMbU5vYVd4a2NtVnVPMXh1SUNBZ0lDQWdaQzVmWTJocGJHUnlaVzR1Wm05eVJXRmphQ2hqYjJ4c1lYQnpaU2s3WEc0Z0lDQWdJQ0JrTG1Ob2FXeGtjbVZ1SUQwZ2JuVnNiRHRjYmlBZ0lDQjlYRzRnSUgxY2JpQWdkWEJrWVhSbEtISnZiM1FwTzF4dWZTSmRmUT09IiwiIWZ1bmN0aW9uKCkge1xuICB2YXIgZDMgPSB7XG4gICAgdmVyc2lvbjogXCIzLjUuMTdcIlxuICB9O1xuICB2YXIgZDNfYXJyYXlTbGljZSA9IFtdLnNsaWNlLCBkM19hcnJheSA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICByZXR1cm4gZDNfYXJyYXlTbGljZS5jYWxsKGxpc3QpO1xuICB9O1xuICB2YXIgZDNfZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50O1xuICBmdW5jdGlvbiBkM19kb2N1bWVudEVsZW1lbnQobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIChub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZS5kb2N1bWVudCB8fCBub2RlKS5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfd2luZG93KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSAmJiAobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCBub2RlLmRvY3VtZW50ICYmIG5vZGUgfHwgbm9kZS5kZWZhdWx0Vmlldyk7XG4gIH1cbiAgaWYgKGQzX2RvY3VtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGQzX2FycmF5KGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzKVswXS5ub2RlVHlwZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkM19hcnJheSA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgICAgdmFyIGkgPSBsaXN0Lmxlbmd0aCwgYXJyYXkgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pIGFycmF5W2ldID0gbGlzdFtpXTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgaWYgKCFEYXRlLm5vdykgRGF0ZS5ub3cgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gK25ldyBEYXRlKCk7XG4gIH07XG4gIGlmIChkM19kb2N1bWVudCkge1xuICAgIHRyeSB7XG4gICAgICBkM19kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpLnN0eWxlLnNldFByb3BlcnR5KFwib3BhY2l0eVwiLCAwLCBcIlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdmFyIGQzX2VsZW1lbnRfcHJvdG90eXBlID0gdGhpcy5FbGVtZW50LnByb3RvdHlwZSwgZDNfZWxlbWVudF9zZXRBdHRyaWJ1dGUgPSBkM19lbGVtZW50X3Byb3RvdHlwZS5zZXRBdHRyaWJ1dGUsIGQzX2VsZW1lbnRfc2V0QXR0cmlidXRlTlMgPSBkM19lbGVtZW50X3Byb3RvdHlwZS5zZXRBdHRyaWJ1dGVOUywgZDNfc3R5bGVfcHJvdG90eXBlID0gdGhpcy5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZSwgZDNfc3R5bGVfc2V0UHJvcGVydHkgPSBkM19zdHlsZV9wcm90b3R5cGUuc2V0UHJvcGVydHk7XG4gICAgICBkM19lbGVtZW50X3Byb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICBkM19lbGVtZW50X3NldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUsIHZhbHVlICsgXCJcIik7XG4gICAgICB9O1xuICAgICAgZDNfZWxlbWVudF9wcm90b3R5cGUuc2V0QXR0cmlidXRlTlMgPSBmdW5jdGlvbihzcGFjZSwgbG9jYWwsIHZhbHVlKSB7XG4gICAgICAgIGQzX2VsZW1lbnRfc2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLCBzcGFjZSwgbG9jYWwsIHZhbHVlICsgXCJcIik7XG4gICAgICB9O1xuICAgICAgZDNfc3R5bGVfcHJvdG90eXBlLnNldFByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gICAgICAgIGQzX3N0eWxlX3NldFByb3BlcnR5LmNhbGwodGhpcywgbmFtZSwgdmFsdWUgKyBcIlwiLCBwcmlvcml0eSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBkMy5hc2NlbmRpbmcgPSBkM19hc2NlbmRpbmc7XG4gIGZ1bmN0aW9uIGQzX2FzY2VuZGluZyhhLCBiKSB7XG4gICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xuICB9XG4gIGQzLmRlc2NlbmRpbmcgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgPCBhID8gLTEgOiBiID4gYSA/IDEgOiBiID49IGEgPyAwIDogTmFOO1xuICB9O1xuICBkMy5taW4gPSBmdW5jdGlvbihhcnJheSwgZikge1xuICAgIHZhciBpID0gLTEsIG4gPSBhcnJheS5sZW5ndGgsIGEsIGI7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKGIgPSBhcnJheVtpXSkgIT0gbnVsbCAmJiBiID49IGIpIHtcbiAgICAgICAgYSA9IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgoYiA9IGFycmF5W2ldKSAhPSBudWxsICYmIGEgPiBiKSBhID0gYjtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgoYiA9IGYuY2FsbChhcnJheSwgYXJyYXlbaV0sIGkpKSAhPSBudWxsICYmIGIgPj0gYikge1xuICAgICAgICBhID0gYjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKChiID0gZi5jYWxsKGFycmF5LCBhcnJheVtpXSwgaSkpICE9IG51bGwgJiYgYSA+IGIpIGEgPSBiO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfTtcbiAgZDMubWF4ID0gZnVuY3Rpb24oYXJyYXksIGYpIHtcbiAgICB2YXIgaSA9IC0xLCBuID0gYXJyYXkubGVuZ3RoLCBhLCBiO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKChiID0gYXJyYXlbaV0pICE9IG51bGwgJiYgYiA+PSBiKSB7XG4gICAgICAgIGEgPSBiO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKGIgPSBhcnJheVtpXSkgIT0gbnVsbCAmJiBiID4gYSkgYSA9IGI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKGIgPSBmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkgIT0gbnVsbCAmJiBiID49IGIpIHtcbiAgICAgICAgYSA9IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgoYiA9IGYuY2FsbChhcnJheSwgYXJyYXlbaV0sIGkpKSAhPSBudWxsICYmIGIgPiBhKSBhID0gYjtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG4gIH07XG4gIGQzLmV4dGVudCA9IGZ1bmN0aW9uKGFycmF5LCBmKSB7XG4gICAgdmFyIGkgPSAtMSwgbiA9IGFycmF5Lmxlbmd0aCwgYSwgYiwgYztcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgoYiA9IGFycmF5W2ldKSAhPSBudWxsICYmIGIgPj0gYikge1xuICAgICAgICBhID0gYyA9IGI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgoYiA9IGFycmF5W2ldKSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChhID4gYikgYSA9IGI7XG4gICAgICAgIGlmIChjIDwgYikgYyA9IGI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKGIgPSBmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkgIT0gbnVsbCAmJiBiID49IGIpIHtcbiAgICAgICAgYSA9IGMgPSBiO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKGIgPSBmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkgIT0gbnVsbCkge1xuICAgICAgICBpZiAoYSA+IGIpIGEgPSBiO1xuICAgICAgICBpZiAoYyA8IGIpIGMgPSBiO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWyBhLCBjIF07XG4gIH07XG4gIGZ1bmN0aW9uIGQzX251bWJlcih4KSB7XG4gICAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbiAgfVxuICBmdW5jdGlvbiBkM19udW1lcmljKHgpIHtcbiAgICByZXR1cm4gIWlzTmFOKHgpO1xuICB9XG4gIGQzLnN1bSA9IGZ1bmN0aW9uKGFycmF5LCBmKSB7XG4gICAgdmFyIHMgPSAwLCBuID0gYXJyYXkubGVuZ3RoLCBhLCBpID0gLTE7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoZDNfbnVtZXJpYyhhID0gK2FycmF5W2ldKSkgcyArPSBhO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKGQzX251bWVyaWMoYSA9ICtmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkpIHMgKz0gYTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG4gIH07XG4gIGQzLm1lYW4gPSBmdW5jdGlvbihhcnJheSwgZikge1xuICAgIHZhciBzID0gMCwgbiA9IGFycmF5Lmxlbmd0aCwgYSwgaSA9IC0xLCBqID0gbjtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmIChkM19udW1lcmljKGEgPSBkM19udW1iZXIoYXJyYXlbaV0pKSkgcyArPSBhOyBlbHNlIC0tajtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmIChkM19udW1lcmljKGEgPSBkM19udW1iZXIoZi5jYWxsKGFycmF5LCBhcnJheVtpXSwgaSkpKSkgcyArPSBhOyBlbHNlIC0tajtcbiAgICB9XG4gICAgaWYgKGopIHJldHVybiBzIC8gajtcbiAgfTtcbiAgZDMucXVhbnRpbGUgPSBmdW5jdGlvbih2YWx1ZXMsIHApIHtcbiAgICB2YXIgSCA9ICh2YWx1ZXMubGVuZ3RoIC0gMSkgKiBwICsgMSwgaCA9IE1hdGguZmxvb3IoSCksIHYgPSArdmFsdWVzW2ggLSAxXSwgZSA9IEggLSBoO1xuICAgIHJldHVybiBlID8gdiArIGUgKiAodmFsdWVzW2hdIC0gdikgOiB2O1xuICB9O1xuICBkMy5tZWRpYW4gPSBmdW5jdGlvbihhcnJheSwgZikge1xuICAgIHZhciBudW1iZXJzID0gW10sIG4gPSBhcnJheS5sZW5ndGgsIGEsIGkgPSAtMTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmIChkM19udW1lcmljKGEgPSBkM19udW1iZXIoYXJyYXlbaV0pKSkgbnVtYmVycy5wdXNoKGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKGQzX251bWVyaWMoYSA9IGQzX251bWJlcihmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkpKSBudW1iZXJzLnB1c2goYSk7XG4gICAgfVxuICAgIGlmIChudW1iZXJzLmxlbmd0aCkgcmV0dXJuIGQzLnF1YW50aWxlKG51bWJlcnMuc29ydChkM19hc2NlbmRpbmcpLCAuNSk7XG4gIH07XG4gIGQzLnZhcmlhbmNlID0gZnVuY3Rpb24oYXJyYXksIGYpIHtcbiAgICB2YXIgbiA9IGFycmF5Lmxlbmd0aCwgbSA9IDAsIGEsIGQsIHMgPSAwLCBpID0gLTEsIGogPSAwO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICBpZiAoZDNfbnVtZXJpYyhhID0gZDNfbnVtYmVyKGFycmF5W2ldKSkpIHtcbiAgICAgICAgICBkID0gYSAtIG07XG4gICAgICAgICAgbSArPSBkIC8gKytqO1xuICAgICAgICAgIHMgKz0gZCAqIChhIC0gbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgaWYgKGQzX251bWVyaWMoYSA9IGQzX251bWJlcihmLmNhbGwoYXJyYXksIGFycmF5W2ldLCBpKSkpKSB7XG4gICAgICAgICAgZCA9IGEgLSBtO1xuICAgICAgICAgIG0gKz0gZCAvICsrajtcbiAgICAgICAgICBzICs9IGQgKiAoYSAtIG0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChqID4gMSkgcmV0dXJuIHMgLyAoaiAtIDEpO1xuICB9O1xuICBkMy5kZXZpYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IGQzLnZhcmlhbmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHYgPyBNYXRoLnNxcnQodikgOiB2O1xuICB9O1xuICBmdW5jdGlvbiBkM19iaXNlY3Rvcihjb21wYXJlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IGZ1bmN0aW9uKGEsIHgsIGxvLCBoaSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIGxvID0gMDtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCA0KSBoaSA9IGEubGVuZ3RoO1xuICAgICAgICB3aGlsZSAobG8gPCBoaSkge1xuICAgICAgICAgIHZhciBtaWQgPSBsbyArIGhpID4+PiAxO1xuICAgICAgICAgIGlmIChjb21wYXJlKGFbbWlkXSwgeCkgPCAwKSBsbyA9IG1pZCArIDE7IGVsc2UgaGkgPSBtaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvO1xuICAgICAgfSxcbiAgICAgIHJpZ2h0OiBmdW5jdGlvbihhLCB4LCBsbywgaGkpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSBsbyA9IDA7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNCkgaGkgPSBhLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGxvIDwgaGkpIHtcbiAgICAgICAgICB2YXIgbWlkID0gbG8gKyBoaSA+Pj4gMTtcbiAgICAgICAgICBpZiAoY29tcGFyZShhW21pZF0sIHgpID4gMCkgaGkgPSBtaWQ7IGVsc2UgbG8gPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsbztcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHZhciBkM19iaXNlY3QgPSBkM19iaXNlY3RvcihkM19hc2NlbmRpbmcpO1xuICBkMy5iaXNlY3RMZWZ0ID0gZDNfYmlzZWN0LmxlZnQ7XG4gIGQzLmJpc2VjdCA9IGQzLmJpc2VjdFJpZ2h0ID0gZDNfYmlzZWN0LnJpZ2h0O1xuICBkMy5iaXNlY3RvciA9IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4gZDNfYmlzZWN0b3IoZi5sZW5ndGggPT09IDEgPyBmdW5jdGlvbihkLCB4KSB7XG4gICAgICByZXR1cm4gZDNfYXNjZW5kaW5nKGYoZCksIHgpO1xuICAgIH0gOiBmKTtcbiAgfTtcbiAgZDMuc2h1ZmZsZSA9IGZ1bmN0aW9uKGFycmF5LCBpMCwgaTEpIHtcbiAgICBpZiAoKG0gPSBhcmd1bWVudHMubGVuZ3RoKSA8IDMpIHtcbiAgICAgIGkxID0gYXJyYXkubGVuZ3RoO1xuICAgICAgaWYgKG0gPCAyKSBpMCA9IDA7XG4gICAgfVxuICAgIHZhciBtID0gaTEgLSBpMCwgdCwgaTtcbiAgICB3aGlsZSAobSkge1xuICAgICAgaSA9IE1hdGgucmFuZG9tKCkgKiBtLS0gfCAwO1xuICAgICAgdCA9IGFycmF5W20gKyBpMF0sIGFycmF5W20gKyBpMF0gPSBhcnJheVtpICsgaTBdLCBhcnJheVtpICsgaTBdID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9O1xuICBkMy5wZXJtdXRlID0gZnVuY3Rpb24oYXJyYXksIGluZGV4ZXMpIHtcbiAgICB2YXIgaSA9IGluZGV4ZXMubGVuZ3RoLCBwZXJtdXRlcyA9IG5ldyBBcnJheShpKTtcbiAgICB3aGlsZSAoaS0tKSBwZXJtdXRlc1tpXSA9IGFycmF5W2luZGV4ZXNbaV1dO1xuICAgIHJldHVybiBwZXJtdXRlcztcbiAgfTtcbiAgZDMucGFpcnMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBpID0gMCwgbiA9IGFycmF5Lmxlbmd0aCAtIDEsIHAwLCBwMSA9IGFycmF5WzBdLCBwYWlycyA9IG5ldyBBcnJheShuIDwgMCA/IDAgOiBuKTtcbiAgICB3aGlsZSAoaSA8IG4pIHBhaXJzW2ldID0gWyBwMCA9IHAxLCBwMSA9IGFycmF5WysraV0gXTtcbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG4gIGQzLnRyYW5zcG9zZSA9IGZ1bmN0aW9uKG1hdHJpeCkge1xuICAgIGlmICghKG4gPSBtYXRyaXgubGVuZ3RoKSkgcmV0dXJuIFtdO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbSA9IGQzLm1pbihtYXRyaXgsIGQzX3RyYW5zcG9zZUxlbmd0aCksIHRyYW5zcG9zZSA9IG5ldyBBcnJheShtKTsgKytpIDwgbTsgKSB7XG4gICAgICBmb3IgKHZhciBqID0gLTEsIG4sIHJvdyA9IHRyYW5zcG9zZVtpXSA9IG5ldyBBcnJheShuKTsgKytqIDwgbjsgKSB7XG4gICAgICAgIHJvd1tqXSA9IG1hdHJpeFtqXVtpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zcG9zZTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfdHJhbnNwb3NlTGVuZ3RoKGQpIHtcbiAgICByZXR1cm4gZC5sZW5ndGg7XG4gIH1cbiAgZDMuemlwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzLnRyYW5zcG9zZShhcmd1bWVudHMpO1xuICB9O1xuICBkMy5rZXlzID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gbWFwKSBrZXlzLnB1c2goa2V5KTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcbiAgZDMudmFsdWVzID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBtYXApIHZhbHVlcy5wdXNoKG1hcFtrZXldKTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9O1xuICBkMy5lbnRyaWVzID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIGVudHJpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gbWFwKSBlbnRyaWVzLnB1c2goe1xuICAgICAga2V5OiBrZXksXG4gICAgICB2YWx1ZTogbWFwW2tleV1cbiAgICB9KTtcbiAgICByZXR1cm4gZW50cmllcztcbiAgfTtcbiAgZDMubWVyZ2UgPSBmdW5jdGlvbihhcnJheXMpIHtcbiAgICB2YXIgbiA9IGFycmF5cy5sZW5ndGgsIG0sIGkgPSAtMSwgaiA9IDAsIG1lcmdlZCwgYXJyYXk7XG4gICAgd2hpbGUgKCsraSA8IG4pIGogKz0gYXJyYXlzW2ldLmxlbmd0aDtcbiAgICBtZXJnZWQgPSBuZXcgQXJyYXkoaik7XG4gICAgd2hpbGUgKC0tbiA+PSAwKSB7XG4gICAgICBhcnJheSA9IGFycmF5c1tuXTtcbiAgICAgIG0gPSBhcnJheS5sZW5ndGg7XG4gICAgICB3aGlsZSAoLS1tID49IDApIHtcbiAgICAgICAgbWVyZ2VkWy0tal0gPSBhcnJheVttXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbiAgfTtcbiAgdmFyIGFicyA9IE1hdGguYWJzO1xuICBkMy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICBzdGVwID0gMTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgICBzdG9wID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKChzdG9wIC0gc3RhcnQpIC8gc3RlcCA9PT0gSW5maW5pdHkpIHRocm93IG5ldyBFcnJvcihcImluZmluaXRlIHJhbmdlXCIpO1xuICAgIHZhciByYW5nZSA9IFtdLCBrID0gZDNfcmFuZ2VfaW50ZWdlclNjYWxlKGFicyhzdGVwKSksIGkgPSAtMSwgajtcbiAgICBzdGFydCAqPSBrLCBzdG9wICo9IGssIHN0ZXAgKj0gaztcbiAgICBpZiAoc3RlcCA8IDApIHdoaWxlICgoaiA9IHN0YXJ0ICsgc3RlcCAqICsraSkgPiBzdG9wKSByYW5nZS5wdXNoKGogLyBrKTsgZWxzZSB3aGlsZSAoKGogPSBzdGFydCArIHN0ZXAgKiArK2kpIDwgc3RvcCkgcmFuZ2UucHVzaChqIC8gayk7XG4gICAgcmV0dXJuIHJhbmdlO1xuICB9O1xuICBmdW5jdGlvbiBkM19yYW5nZV9pbnRlZ2VyU2NhbGUoeCkge1xuICAgIHZhciBrID0gMTtcbiAgICB3aGlsZSAoeCAqIGsgJSAxKSBrICo9IDEwO1xuICAgIHJldHVybiBrO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2NsYXNzKGN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0b3IucHJvdG90eXBlLCBrZXksIHtcbiAgICAgICAgdmFsdWU6IHByb3BlcnRpZXNba2V5XSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBkMy5tYXAgPSBmdW5jdGlvbihvYmplY3QsIGYpIHtcbiAgICB2YXIgbWFwID0gbmV3IGQzX01hcCgpO1xuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBkM19NYXApIHtcbiAgICAgIG9iamVjdC5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgbWFwLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmplY3QpKSB7XG4gICAgICB2YXIgaSA9IC0xLCBuID0gb2JqZWN0Lmxlbmd0aCwgbztcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB3aGlsZSAoKytpIDwgbikgbWFwLnNldChpLCBvYmplY3RbaV0pOyBlbHNlIHdoaWxlICgrK2kgPCBuKSBtYXAuc2V0KGYuY2FsbChvYmplY3QsIG8gPSBvYmplY3RbaV0sIGkpLCBvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkgbWFwLnNldChrZXksIG9iamVjdFtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfTWFwKCkge1xuICAgIHRoaXMuXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgdmFyIGQzX21hcF9wcm90byA9IFwiX19wcm90b19fXCIsIGQzX21hcF96ZXJvID0gXCJcXHgwMFwiO1xuICBkM19jbGFzcyhkM19NYXAsIHtcbiAgICBoYXM6IGQzX21hcF9oYXMsXG4gICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX1tkM19tYXBfZXNjYXBlKGtleSldID0gdmFsdWU7XG4gICAgfSxcbiAgICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gICAga2V5czogZDNfbWFwX2tleXMsXG4gICAgdmFsdWVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHZhbHVlcy5wdXNoKHRoaXMuX1trZXldKTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSxcbiAgICBlbnRyaWVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlbnRyaWVzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBlbnRyaWVzLnB1c2goe1xuICAgICAgICBrZXk6IGQzX21hcF91bmVzY2FwZShrZXkpLFxuICAgICAgICB2YWx1ZTogdGhpcy5fW2tleV1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVudHJpZXM7XG4gICAgfSxcbiAgICBzaXplOiBkM19tYXBfc2l6ZSxcbiAgICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICAgIGZvckVhY2g6IGZ1bmN0aW9uKGYpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGYuY2FsbCh0aGlzLCBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdGhpcy5fW2tleV0pO1xuICAgIH1cbiAgfSk7XG4gIGZ1bmN0aW9uIGQzX21hcF9lc2NhcGUoa2V5KSB7XG4gICAgcmV0dXJuIChrZXkgKz0gXCJcIikgPT09IGQzX21hcF9wcm90byB8fCBrZXlbMF0gPT09IGQzX21hcF96ZXJvID8gZDNfbWFwX3plcm8gKyBrZXkgOiBrZXk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbWFwX3VuZXNjYXBlKGtleSkge1xuICAgIHJldHVybiAoa2V5ICs9IFwiXCIpWzBdID09PSBkM19tYXBfemVybyA/IGtleS5zbGljZSgxKSA6IGtleTtcbiAgfVxuICBmdW5jdGlvbiBkM19tYXBfaGFzKGtleSkge1xuICAgIHJldHVybiBkM19tYXBfZXNjYXBlKGtleSkgaW4gdGhpcy5fO1xuICB9XG4gIGZ1bmN0aW9uIGQzX21hcF9yZW1vdmUoa2V5KSB7XG4gICAgcmV0dXJuIChrZXkgPSBkM19tYXBfZXNjYXBlKGtleSkpIGluIHRoaXMuXyAmJiBkZWxldGUgdGhpcy5fW2tleV07XG4gIH1cbiAgZnVuY3Rpb24gZDNfbWFwX2tleXMoKSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSBrZXlzLnB1c2goZDNfbWFwX3VuZXNjYXBlKGtleSkpO1xuICAgIHJldHVybiBrZXlzO1xuICB9XG4gIGZ1bmN0aW9uIGQzX21hcF9zaXplKCkge1xuICAgIHZhciBzaXplID0gMDtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSArK3NpemU7XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbWFwX2VtcHR5KCkge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBkMy5uZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5lc3QgPSB7fSwga2V5cyA9IFtdLCBzb3J0S2V5cyA9IFtdLCBzb3J0VmFsdWVzLCByb2xsdXA7XG4gICAgZnVuY3Rpb24gbWFwKG1hcFR5cGUsIGFycmF5LCBkZXB0aCkge1xuICAgICAgaWYgKGRlcHRoID49IGtleXMubGVuZ3RoKSByZXR1cm4gcm9sbHVwID8gcm9sbHVwLmNhbGwobmVzdCwgYXJyYXkpIDogc29ydFZhbHVlcyA/IGFycmF5LnNvcnQoc29ydFZhbHVlcykgOiBhcnJheTtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBhcnJheS5sZW5ndGgsIGtleSA9IGtleXNbZGVwdGgrK10sIGtleVZhbHVlLCBvYmplY3QsIHNldHRlciwgdmFsdWVzQnlLZXkgPSBuZXcgZDNfTWFwKCksIHZhbHVlcztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPSB2YWx1ZXNCeUtleS5nZXQoa2V5VmFsdWUgPSBrZXkob2JqZWN0ID0gYXJyYXlbaV0pKSkge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWVzQnlLZXkuc2V0KGtleVZhbHVlLCBbIG9iamVjdCBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1hcFR5cGUpIHtcbiAgICAgICAgb2JqZWN0ID0gbWFwVHlwZSgpO1xuICAgICAgICBzZXR0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZSwgdmFsdWVzKSB7XG4gICAgICAgICAgb2JqZWN0LnNldChrZXlWYWx1ZSwgbWFwKG1hcFR5cGUsIHZhbHVlcywgZGVwdGgpKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdCA9IHt9O1xuICAgICAgICBzZXR0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZSwgdmFsdWVzKSB7XG4gICAgICAgICAgb2JqZWN0W2tleVZhbHVlXSA9IG1hcChtYXBUeXBlLCB2YWx1ZXMsIGRlcHRoKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhbHVlc0J5S2V5LmZvckVhY2goc2V0dGVyKTtcbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVudHJpZXMobWFwLCBkZXB0aCkge1xuICAgICAgaWYgKGRlcHRoID49IGtleXMubGVuZ3RoKSByZXR1cm4gbWFwO1xuICAgICAgdmFyIGFycmF5ID0gW10sIHNvcnRLZXkgPSBzb3J0S2V5c1tkZXB0aCsrXTtcbiAgICAgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKGtleSwga2V5TWFwKSB7XG4gICAgICAgIGFycmF5LnB1c2goe1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHZhbHVlczogZW50cmllcyhrZXlNYXAsIGRlcHRoKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNvcnRLZXkgPyBhcnJheS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRLZXkoYS5rZXksIGIua2V5KTtcbiAgICAgIH0pIDogYXJyYXk7XG4gICAgfVxuICAgIG5lc3QubWFwID0gZnVuY3Rpb24oYXJyYXksIG1hcFR5cGUpIHtcbiAgICAgIHJldHVybiBtYXAobWFwVHlwZSwgYXJyYXksIDApO1xuICAgIH07XG4gICAgbmVzdC5lbnRyaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgIHJldHVybiBlbnRyaWVzKG1hcChkMy5tYXAsIGFycmF5LCAwKSwgMCk7XG4gICAgfTtcbiAgICBuZXN0LmtleSA9IGZ1bmN0aW9uKGQpIHtcbiAgICAgIGtleXMucHVzaChkKTtcbiAgICAgIHJldHVybiBuZXN0O1xuICAgIH07XG4gICAgbmVzdC5zb3J0S2V5cyA9IGZ1bmN0aW9uKG9yZGVyKSB7XG4gICAgICBzb3J0S2V5c1trZXlzLmxlbmd0aCAtIDFdID0gb3JkZXI7XG4gICAgICByZXR1cm4gbmVzdDtcbiAgICB9O1xuICAgIG5lc3Quc29ydFZhbHVlcyA9IGZ1bmN0aW9uKG9yZGVyKSB7XG4gICAgICBzb3J0VmFsdWVzID0gb3JkZXI7XG4gICAgICByZXR1cm4gbmVzdDtcbiAgICB9O1xuICAgIG5lc3Qucm9sbHVwID0gZnVuY3Rpb24oZikge1xuICAgICAgcm9sbHVwID0gZjtcbiAgICAgIHJldHVybiBuZXN0O1xuICAgIH07XG4gICAgcmV0dXJuIG5lc3Q7XG4gIH07XG4gIGQzLnNldCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHNldCA9IG5ldyBkM19TZXQoKTtcbiAgICBpZiAoYXJyYXkpIGZvciAodmFyIGkgPSAwLCBuID0gYXJyYXkubGVuZ3RoOyBpIDwgbjsgKytpKSBzZXQuYWRkKGFycmF5W2ldKTtcbiAgICByZXR1cm4gc2V0O1xuICB9O1xuICBmdW5jdGlvbiBkM19TZXQoKSB7XG4gICAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICBkM19jbGFzcyhkM19TZXQsIHtcbiAgICBoYXM6IGQzX21hcF9oYXMsXG4gICAgYWRkOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHRoaXMuX1tkM19tYXBfZXNjYXBlKGtleSArPSBcIlwiKV0gPSB0cnVlO1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9LFxuICAgIHJlbW92ZTogZDNfbWFwX3JlbW92ZSxcbiAgICB2YWx1ZXM6IGQzX21hcF9rZXlzLFxuICAgIHNpemU6IGQzX21hcF9zaXplLFxuICAgIGVtcHR5OiBkM19tYXBfZW1wdHksXG4gICAgZm9yRWFjaDogZnVuY3Rpb24oZikge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpKTtcbiAgICB9XG4gIH0pO1xuICBkMy5iZWhhdmlvciA9IHt9O1xuICBmdW5jdGlvbiBkM19pZGVudGl0eShkKSB7XG4gICAgcmV0dXJuIGQ7XG4gIH1cbiAgZDMucmViaW5kID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgICB2YXIgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoLCBtZXRob2Q7XG4gICAgd2hpbGUgKCsraSA8IG4pIHRhcmdldFttZXRob2QgPSBhcmd1bWVudHNbaV1dID0gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBzb3VyY2VbbWV0aG9kXSk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfcmViaW5kKHRhcmdldCwgc291cmNlLCBtZXRob2QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWUgPSBtZXRob2QuYXBwbHkoc291cmNlLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBzb3VyY2UgPyB0YXJnZXQgOiB2YWx1ZTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX3ZlbmRvclN5bWJvbChvYmplY3QsIG5hbWUpIHtcbiAgICBpZiAobmFtZSBpbiBvYmplY3QpIHJldHVybiBuYW1lO1xuICAgIG5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGQzX3ZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIHByZWZpeE5hbWUgPSBkM192ZW5kb3JQcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgICBpZiAocHJlZml4TmFtZSBpbiBvYmplY3QpIHJldHVybiBwcmVmaXhOYW1lO1xuICAgIH1cbiAgfVxuICB2YXIgZDNfdmVuZG9yUHJlZml4ZXMgPSBbIFwid2Via2l0XCIsIFwibXNcIiwgXCJtb3pcIiwgXCJNb3pcIiwgXCJvXCIsIFwiT1wiIF07XG4gIGZ1bmN0aW9uIGQzX25vb3AoKSB7fVxuICBkMy5kaXNwYXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXNwYXRjaCA9IG5ldyBkM19kaXNwYXRjaCgpLCBpID0gLTEsIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHdoaWxlICgrK2kgPCBuKSBkaXNwYXRjaFthcmd1bWVudHNbaV1dID0gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO1xuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfZGlzcGF0Y2goKSB7fVxuICBkM19kaXNwYXRjaC5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgIHZhciBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSwgbmFtZSA9IFwiXCI7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgbmFtZSA9IHR5cGUuc2xpY2UoaSArIDEpO1xuICAgICAgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSk7XG4gICAgfVxuICAgIGlmICh0eXBlKSByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyB0aGlzW3R5cGVdLm9uKG5hbWUpIDogdGhpc1t0eXBlXS5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSBmb3IgKHR5cGUgaW4gdGhpcykge1xuICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhpc1t0eXBlXS5vbihuYW1lLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpIHtcbiAgICB2YXIgbGlzdGVuZXJzID0gW10sIGxpc3RlbmVyQnlOYW1lID0gbmV3IGQzX01hcCgpO1xuICAgIGZ1bmN0aW9uIGV2ZW50KCkge1xuICAgICAgdmFyIHogPSBsaXN0ZW5lcnMsIGkgPSAtMSwgbiA9IHoubGVuZ3RoLCBsO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmIChsID0geltpXS5vbikgbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIGRpc3BhdGNoO1xuICAgIH1cbiAgICBldmVudC5vbiA9IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbCA9IGxpc3RlbmVyQnlOYW1lLmdldChuYW1lKSwgaTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIGwgJiYgbC5vbjtcbiAgICAgIGlmIChsKSB7XG4gICAgICAgIGwub24gPSBudWxsO1xuICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoMCwgaSA9IGxpc3RlbmVycy5pbmRleE9mKGwpKS5jb25jYXQobGlzdGVuZXJzLnNsaWNlKGkgKyAxKSk7XG4gICAgICAgIGxpc3RlbmVyQnlOYW1lLnJlbW92ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChsaXN0ZW5lcikgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXJCeU5hbWUuc2V0KG5hbWUsIHtcbiAgICAgICAgb246IGxpc3RlbmVyXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gZGlzcGF0Y2g7XG4gICAgfTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgZDMuZXZlbnQgPSBudWxsO1xuICBmdW5jdGlvbiBkM19ldmVudFByZXZlbnREZWZhdWx0KCkge1xuICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZXZlbnRTb3VyY2UoKSB7XG4gICAgdmFyIGUgPSBkMy5ldmVudCwgcztcbiAgICB3aGlsZSAocyA9IGUuc291cmNlRXZlbnQpIGUgPSBzO1xuICAgIHJldHVybiBlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2V2ZW50RGlzcGF0Y2godGFyZ2V0KSB7XG4gICAgdmFyIGRpc3BhdGNoID0gbmV3IGQzX2Rpc3BhdGNoKCksIGkgPSAwLCBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgZGlzcGF0Y2hbYXJndW1lbnRzW2ldXSA9IGQzX2Rpc3BhdGNoX2V2ZW50KGRpc3BhdGNoKTtcbiAgICBkaXNwYXRjaC5vZiA9IGZ1bmN0aW9uKHRoaXosIGFyZ3VtZW50eikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUxKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGUwID0gZTEuc291cmNlRXZlbnQgPSBkMy5ldmVudDtcbiAgICAgICAgICBlMS50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgZDMuZXZlbnQgPSBlMTtcbiAgICAgICAgICBkaXNwYXRjaFtlMS50eXBlXS5hcHBseSh0aGl6LCBhcmd1bWVudHopO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGQzLmV2ZW50ID0gZTA7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH1cbiAgZDMucmVxdW90ZSA9IGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKGQzX3JlcXVvdGVfcmUsIFwiXFxcXCQmXCIpO1xuICB9O1xuICB2YXIgZDNfcmVxdW90ZV9yZSA9IC9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZztcbiAgdmFyIGQzX3N1YmNsYXNzID0ge30uX19wcm90b19fID8gZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICB9IDogZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm90b3R5cGUpIG9iamVjdFtwcm9wZXJ0eV0gPSBwcm90b3R5cGVbcHJvcGVydHldO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb24oZ3JvdXBzKSB7XG4gICAgZDNfc3ViY2xhc3MoZ3JvdXBzLCBkM19zZWxlY3Rpb25Qcm90b3R5cGUpO1xuICAgIHJldHVybiBncm91cHM7XG4gIH1cbiAgdmFyIGQzX3NlbGVjdCA9IGZ1bmN0aW9uKHMsIG4pIHtcbiAgICByZXR1cm4gbi5xdWVyeVNlbGVjdG9yKHMpO1xuICB9LCBkM19zZWxlY3RBbGwgPSBmdW5jdGlvbihzLCBuKSB7XG4gICAgcmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbChzKTtcbiAgfSwgZDNfc2VsZWN0TWF0Y2hlcyA9IGZ1bmN0aW9uKG4sIHMpIHtcbiAgICB2YXIgZDNfc2VsZWN0TWF0Y2hlciA9IG4ubWF0Y2hlcyB8fCBuW2QzX3ZlbmRvclN5bWJvbChuLCBcIm1hdGNoZXNTZWxlY3RvclwiKV07XG4gICAgZDNfc2VsZWN0TWF0Y2hlcyA9IGZ1bmN0aW9uKG4sIHMpIHtcbiAgICAgIHJldHVybiBkM19zZWxlY3RNYXRjaGVyLmNhbGwobiwgcyk7XG4gICAgfTtcbiAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyhuLCBzKTtcbiAgfTtcbiAgaWYgKHR5cGVvZiBTaXp6bGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGQzX3NlbGVjdCA9IGZ1bmN0aW9uKHMsIG4pIHtcbiAgICAgIHJldHVybiBTaXp6bGUocywgbilbMF0gfHwgbnVsbDtcbiAgICB9O1xuICAgIGQzX3NlbGVjdEFsbCA9IFNpenpsZTtcbiAgICBkM19zZWxlY3RNYXRjaGVzID0gU2l6emxlLm1hdGNoZXNTZWxlY3RvcjtcbiAgfVxuICBkMy5zZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDMuc2VsZWN0KGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gIH07XG4gIHZhciBkM19zZWxlY3Rpb25Qcm90b3R5cGUgPSBkMy5zZWxlY3Rpb24ucHJvdG90eXBlID0gW107XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgIHZhciBzdWJncm91cHMgPSBbXSwgc3ViZ3JvdXAsIHN1Ym5vZGUsIGdyb3VwLCBub2RlO1xuICAgIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTsgKSB7XG4gICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgICAgZm9yICh2YXIgaSA9IC0xLCBuID0gZ3JvdXAubGVuZ3RoOyArK2kgPCBuOyApIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICAgIHN1Ymdyb3VwLnB1c2goc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICAgIGlmIChzdWJub2RlICYmIFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWJncm91cC5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiID8gc2VsZWN0b3IgOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19zZWxlY3Qoc2VsZWN0b3IsIHRoaXMpO1xuICAgIH07XG4gIH1cbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNlbGVjdEFsbCA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgdmFyIHN1Ymdyb3VwcyA9IFtdLCBzdWJncm91cCwgbm9kZTtcbiAgICBzZWxlY3RvciA9IGQzX3NlbGVjdGlvbl9zZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgZm9yICh2YXIgaiA9IC0xLCBtID0gdGhpcy5sZW5ndGg7ICsraiA8IG07ICkge1xuICAgICAgZm9yICh2YXIgZ3JvdXAgPSB0aGlzW2pdLCBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47ICkge1xuICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXAgPSBkM19hcnJheShzZWxlY3Rvci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSk7XG4gICAgICAgICAgc3ViZ3JvdXAucGFyZW50Tm9kZSA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3RvciA6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGQzX3NlbGVjdEFsbChzZWxlY3RvciwgdGhpcyk7XG4gICAgfTtcbiAgfVxuICB2YXIgZDNfbnNYaHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuICB2YXIgZDNfbnNQcmVmaXggPSB7XG4gICAgc3ZnOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgeGh0bWw6IGQzX25zWGh0bWwsXG4gICAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgIHhtbDogXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG4gIH07XG4gIGQzLm5zID0ge1xuICAgIHByZWZpeDogZDNfbnNQcmVmaXgsXG4gICAgcXVhbGlmeTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGkgPSBuYW1lLmluZGV4T2YoXCI6XCIpLCBwcmVmaXggPSBuYW1lO1xuICAgICAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09IFwieG1sbnNcIikgbmFtZSA9IG5hbWUuc2xpY2UoaSArIDEpO1xuICAgICAgcmV0dXJuIGQzX25zUHJlZml4Lmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7XG4gICAgICAgIHNwYWNlOiBkM19uc1ByZWZpeFtwcmVmaXhdLFxuICAgICAgICBsb2NhbDogbmFtZVxuICAgICAgfSA6IG5hbWU7XG4gICAgfVxuICB9O1xuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuYXR0ciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICAgICAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG4gICAgICAgIHJldHVybiBuYW1lLmxvY2FsID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKSA6IG5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgICAgfVxuICAgICAgZm9yICh2YWx1ZSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2F0dHIodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cihuYW1lLCB2YWx1ZSkpO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb25fYXR0cihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBkMy5ucy5xdWFsaWZ5KG5hbWUpO1xuICAgIGZ1bmN0aW9uIGF0dHJOdWxsKCkge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJOdWxsTlMoKSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQoKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKCkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbigpIHtcbiAgICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOyBlbHNlIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUygpIHtcbiAgICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICh4ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCk7IGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCB4KTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyBuYW1lLmxvY2FsID8gYXR0ck51bGxOUyA6IGF0dHJOdWxsIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24gOiBuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfY29sbGFwc2Uocykge1xuICAgIHJldHVybiBzLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcbiAgfVxuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuY2xhc3NlZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKSwgbiA9IChuYW1lID0gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkpLmxlbmd0aCwgaSA9IC0xO1xuICAgICAgICBpZiAodmFsdWUgPSBub2RlLmNsYXNzTGlzdCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIXZhbHVlLmNvbnRhaW5zKG5hbWVbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZVtpXSkudGVzdCh2YWx1ZSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9jbGFzc2VkKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKylcIiArIGQzLnJlcXVvdGUobmFtZSkgKyBcIig/OlxcXFxzK3wkKVwiLCBcImdcIik7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkge1xuICAgIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWQobmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkubWFwKGQzX3NlbGVjdGlvbl9jbGFzc2VkTmFtZSk7XG4gICAgdmFyIG4gPSBuYW1lLmxlbmd0aDtcbiAgICBmdW5jdGlvbiBjbGFzc2VkQ29uc3RhbnQoKSB7XG4gICAgICB2YXIgaSA9IC0xO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgdmFsdWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IC0xLCB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBuYW1lW2ldKHRoaXMsIHgpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBjbGFzc2VkRnVuY3Rpb24gOiBjbGFzc2VkQ29uc3RhbnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWROYW1lKG5hbWUpIHtcbiAgICB2YXIgcmUgPSBkM19zZWxlY3Rpb25fY2xhc3NlZFJlKG5hbWUpO1xuICAgIHJldHVybiBmdW5jdGlvbihub2RlLCB2YWx1ZSkge1xuICAgICAgaWYgKGMgPSBub2RlLmNsYXNzTGlzdCkgcmV0dXJuIHZhbHVlID8gYy5hZGQobmFtZSkgOiBjLnJlbW92ZShuYW1lKTtcbiAgICAgIHZhciBjID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGlmICghcmUudGVzdChjKSkgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkM19jb2xsYXBzZShjICsgXCIgXCIgKyBuYW1lKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGQzX2NvbGxhcHNlKGMucmVwbGFjZShyZSwgXCIgXCIpKSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKG4gPCAzKSB7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG4gPCAyKSB2YWx1ZSA9IFwiXCI7XG4gICAgICAgIGZvciAocHJpb3JpdHkgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9zdHlsZShwcmlvcml0eSwgbmFtZVtwcmlvcml0eV0sIHZhbHVlKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKG4gPCAyKSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICAgIHJldHVybiBkM193aW5kb3cobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICAgICAgfVxuICAgICAgcHJpb3JpdHkgPSBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9zdHlsZShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICAgIGZ1bmN0aW9uIHN0eWxlTnVsbCgpIHtcbiAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQoKSB7XG4gICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlLCBwcmlvcml0eSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24oKSB7XG4gICAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoeCA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpOyBlbHNlIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgeCwgcHJpb3JpdHkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHN0eWxlTnVsbCA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gc3R5bGVGdW5jdGlvbiA6IHN0eWxlQ29uc3RhbnQ7XG4gIH1cbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLnByb3BlcnR5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMubm9kZSgpW25hbWVdO1xuICAgICAgZm9yICh2YWx1ZSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3Byb3BlcnR5KHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsIHZhbHVlKSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5TnVsbCgpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KCkge1xuICAgICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHggPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKHggPT0gbnVsbCkgZGVsZXRlIHRoaXNbbmFtZV07IGVsc2UgdGhpc1tuYW1lXSA9IHg7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gcHJvcGVydHlOdWxsIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBwcm9wZXJ0eUZ1bmN0aW9uIDogcHJvcGVydHlDb25zdGFudDtcbiAgfVxuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgICB9IDogdmFsdWUgPT0gbnVsbCA/IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSA6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgIH0pIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG4gIH07XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgICB9IDogdmFsdWUgPT0gbnVsbCA/IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH0gOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfSkgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG4gIH07XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgbmFtZSA9IGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpO1xuICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmFwcGVuZENoaWxkKG5hbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICB2YXIgZG9jdW1lbnQgPSB0aGlzLm93bmVyRG9jdW1lbnQsIG5hbWVzcGFjZSA9IHRoaXMubmFtZXNwYWNlVVJJO1xuICAgICAgcmV0dXJuIG5hbWVzcGFjZSA9PT0gZDNfbnNYaHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBkM19uc1hodG1sID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIG5hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVOUygpIHtcbiAgICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiAobmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSkpLmxvY2FsID8gY3JlYXRlTlMgOiBjcmVhdGU7XG4gIH1cbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICAgIG5hbWUgPSBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKTtcbiAgICBiZWZvcmUgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3IoYmVmb3JlKTtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBiZWZvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgICB9KTtcbiAgfTtcbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uUmVtb3ZlKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uUmVtb3ZlKCkge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICB9XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIHZhciBpID0gLTEsIG4gPSB0aGlzLmxlbmd0aCwgZ3JvdXAsIG5vZGU7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICB2YWx1ZSA9IG5ldyBBcnJheShuID0gKGdyb3VwID0gdGhpc1swXSkubGVuZ3RoKTtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgICB2YWx1ZVtpXSA9IG5vZGUuX19kYXRhX187XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZChncm91cCwgZ3JvdXBEYXRhKSB7XG4gICAgICB2YXIgaSwgbiA9IGdyb3VwLmxlbmd0aCwgbSA9IGdyb3VwRGF0YS5sZW5ndGgsIG4wID0gTWF0aC5taW4obiwgbSksIHVwZGF0ZU5vZGVzID0gbmV3IEFycmF5KG0pLCBlbnRlck5vZGVzID0gbmV3IEFycmF5KG0pLCBleGl0Tm9kZXMgPSBuZXcgQXJyYXkobiksIG5vZGUsIG5vZGVEYXRhO1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgZDNfTWFwKCksIGtleVZhbHVlcyA9IG5ldyBBcnJheShuKSwga2V5VmFsdWU7XG4gICAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOyApIHtcbiAgICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgICBpZiAobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSkpKSB7XG4gICAgICAgICAgICAgIGV4aXROb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBtOyApIHtcbiAgICAgICAgICBpZiAoIShub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlID0ga2V5LmNhbGwoZ3JvdXBEYXRhLCBub2RlRGF0YSA9IGdyb3VwRGF0YVtpXSwgaSkpKSkge1xuICAgICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub2RlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgICAgICBub2RlLl9fZGF0YV9fID0gbm9kZURhdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gLTE7ICsraSA8IG47ICkge1xuICAgICAgICAgIGlmIChpIGluIGtleVZhbHVlcyAmJiBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjA7ICkge1xuICAgICAgICAgIG5vZGUgPSBncm91cFtpXTtcbiAgICAgICAgICBub2RlRGF0YSA9IGdyb3VwRGF0YVtpXTtcbiAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICAgICAgdXBkYXRlTm9kZXNbaV0gPSBub2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbnRlck5vZGVzW2ldID0gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKG5vZGVEYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7aSA8IG07ICsraSkge1xuICAgICAgICAgIGVudGVyTm9kZXNbaV0gPSBkM19zZWxlY3Rpb25fZGF0YU5vZGUoZ3JvdXBEYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDtpIDwgbjsgKytpKSB7XG4gICAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVudGVyTm9kZXMudXBkYXRlID0gdXBkYXRlTm9kZXM7XG4gICAgICBlbnRlck5vZGVzLnBhcmVudE5vZGUgPSB1cGRhdGVOb2Rlcy5wYXJlbnROb2RlID0gZXhpdE5vZGVzLnBhcmVudE5vZGUgPSBncm91cC5wYXJlbnROb2RlO1xuICAgICAgZW50ZXIucHVzaChlbnRlck5vZGVzKTtcbiAgICAgIHVwZGF0ZS5wdXNoKHVwZGF0ZU5vZGVzKTtcbiAgICAgIGV4aXQucHVzaChleGl0Tm9kZXMpO1xuICAgIH1cbiAgICB2YXIgZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXIoW10pLCB1cGRhdGUgPSBkM19zZWxlY3Rpb24oW10pLCBleGl0ID0gZDNfc2VsZWN0aW9uKFtdKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGJpbmQoZ3JvdXAgPSB0aGlzW2ldLCB2YWx1ZS5jYWxsKGdyb3VwLCBncm91cC5wYXJlbnROb2RlLl9fZGF0YV9fLCBpKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGJpbmQoZ3JvdXAgPSB0aGlzW2ldLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZS5lbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGVudGVyO1xuICAgIH07XG4gICAgdXBkYXRlLmV4aXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleGl0O1xuICAgIH07XG4gICAgcmV0dXJuIHVwZGF0ZTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKGRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX19kYXRhX186IGRhdGFcbiAgICB9O1xuICB9XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXR1bSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIiwgdmFsdWUpIDogdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpO1xuICB9O1xuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgdmFyIHN1Ymdyb3VwcyA9IFtdLCBzdWJncm91cCwgZ3JvdXAsIG5vZGU7XG4gICAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09IFwiZnVuY3Rpb25cIikgZmlsdGVyID0gZDNfc2VsZWN0aW9uX2ZpbHRlcihmaWx0ZXIpO1xuICAgIGZvciAodmFyIGogPSAwLCBtID0gdGhpcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgICAgc3ViZ3JvdXAucGFyZW50Tm9kZSA9IChncm91cCA9IHRoaXNbal0pLnBhcmVudE5vZGU7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgZmlsdGVyLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpIHtcbiAgICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkM19zZWxlY3Rpb24oc3ViZ3JvdXBzKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2ZpbHRlcihzZWxlY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19zZWxlY3RNYXRjaGVzKHRoaXMsIHNlbGVjdG9yKTtcbiAgICB9O1xuICB9XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5vcmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOyApIHtcbiAgICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IGdyb3VwLmxlbmd0aCAtIDEsIG5leHQgPSBncm91cFtpXSwgbm9kZTsgLS1pID49IDA7ICkge1xuICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gbm9kZS5uZXh0U2libGluZykgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgICBuZXh0ID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbihjb21wYXJhdG9yKSB7XG4gICAgY29tcGFyYXRvciA9IGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOyApIHRoaXNbal0uc29ydChjb21wYXJhdG9yKTtcbiAgICByZXR1cm4gdGhpcy5vcmRlcigpO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb25fc29ydENvbXBhcmF0b3IoY29tcGFyYXRvcikge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgY29tcGFyYXRvciA9IGQzX2FzY2VuZGluZztcbiAgICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgJiYgYiA/IGNvbXBhcmF0b3IoYS5fX2RhdGFfXywgYi5fX2RhdGFfXykgOiAhYSAtICFiO1xuICAgIH07XG4gIH1cbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHJldHVybiBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbihub2RlLCBpLCBqKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopO1xuICAgIH0pO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb25fZWFjaChncm91cHMsIGNhbGxiYWNrKSB7XG4gICAgZm9yICh2YXIgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2sobm9kZSwgaSwgaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBncm91cHM7XG4gIH1cbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBhcmdzID0gZDNfYXJyYXkoYXJndW1lbnRzKTtcbiAgICBjYWxsYmFjay5hcHBseShhcmdzWzBdID0gdGhpcywgYXJncyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhdGhpcy5ub2RlKCk7XG4gIH07XG4gIGQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgZm9yICh2YXIgZ3JvdXAgPSB0aGlzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gMDtcbiAgICBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAgICsrbjtcbiAgICB9KTtcbiAgICByZXR1cm4gbjtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVyKHNlbGVjdGlvbikge1xuICAgIGQzX3N1YmNsYXNzKHNlbGVjdGlvbiwgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlKTtcbiAgICByZXR1cm4gc2VsZWN0aW9uO1xuICB9XG4gIHZhciBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUgPSBbXTtcbiAgZDMuc2VsZWN0aW9uLmVudGVyID0gZDNfc2VsZWN0aW9uX2VudGVyO1xuICBkMy5zZWxlY3Rpb24uZW50ZXIucHJvdG90eXBlID0gZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlO1xuICBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuYXBwZW5kID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZDtcbiAgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmVtcHR5ID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVtcHR5O1xuICBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUubm9kZSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5ub2RlO1xuICBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuY2FsbCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5jYWxsO1xuICBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuc2l6ZSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5zaXplO1xuICBkM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICB2YXIgc3ViZ3JvdXBzID0gW10sIHN1Ymdyb3VwLCBzdWJub2RlLCB1cGdyb3VwLCBncm91cCwgbm9kZTtcbiAgICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTsgKSB7XG4gICAgICB1cGdyb3VwID0gKGdyb3VwID0gdGhpc1tqXSkudXBkYXRlO1xuICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXAgPSBbXSk7XG4gICAgICBzdWJncm91cC5wYXJlbnROb2RlID0gZ3JvdXAucGFyZW50Tm9kZTtcbiAgICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjsgKSB7XG4gICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgICBzdWJncm91cC5wdXNoKHVwZ3JvdXBbaV0gPSBzdWJub2RlID0gc2VsZWN0b3IuY2FsbChncm91cC5wYXJlbnROb2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKSk7XG4gICAgICAgICAgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3ViZ3JvdXAucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyk7XG4gIH07XG4gIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZSh0aGlzKTtcbiAgICByZXR1cm4gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmluc2VydC5jYWxsKHRoaXMsIG5hbWUsIGJlZm9yZSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZShlbnRlcikge1xuICAgIHZhciBpMCwgajA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGQsIGksIGopIHtcbiAgICAgIHZhciBncm91cCA9IGVudGVyW2pdLnVwZGF0ZSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTtcbiAgICAgIGlmIChqICE9IGowKSBqMCA9IGosIGkwID0gMDtcbiAgICAgIGlmIChpID49IGkwKSBpMCA9IGkgKyAxO1xuICAgICAgd2hpbGUgKCEobm9kZSA9IGdyb3VwW2kwXSkgJiYgKytpMCA8IG4pIDtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gIH1cbiAgZDMuc2VsZWN0ID0gZnVuY3Rpb24obm9kZSkge1xuICAgIHZhciBncm91cDtcbiAgICBpZiAodHlwZW9mIG5vZGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGdyb3VwID0gWyBkM19zZWxlY3Qobm9kZSwgZDNfZG9jdW1lbnQpIF07XG4gICAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBncm91cCA9IFsgbm9kZSBdO1xuICAgICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50RWxlbWVudChub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIGQzX3NlbGVjdGlvbihbIGdyb3VwIF0pO1xuICB9O1xuICBkMy5zZWxlY3RBbGwgPSBmdW5jdGlvbihub2Rlcykge1xuICAgIHZhciBncm91cDtcbiAgICBpZiAodHlwZW9mIG5vZGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBncm91cCA9IGQzX2FycmF5KGQzX3NlbGVjdEFsbChub2RlcywgZDNfZG9jdW1lbnQpKTtcbiAgICAgIGdyb3VwLnBhcmVudE5vZGUgPSBkM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdyb3VwID0gZDNfYXJyYXkobm9kZXMpO1xuICAgICAgZ3JvdXAucGFyZW50Tm9kZSA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBkM19zZWxlY3Rpb24oWyBncm91cCBdKTtcbiAgfTtcbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKG4gPCAzKSB7XG4gICAgICBpZiAodHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG4gPCAyKSBsaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNhcHR1cmUgaW4gdHlwZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbihjYXB0dXJlLCB0eXBlW2NhcHR1cmVdLCBsaXN0ZW5lcikpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmIChuIDwgMikgcmV0dXJuIChuID0gdGhpcy5ub2RlKClbXCJfX29uXCIgKyB0eXBlXSkgJiYgbi5fO1xuICAgICAgY2FwdHVyZSA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkpO1xuICB9O1xuICBmdW5jdGlvbiBkM19zZWxlY3Rpb25fb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgICB2YXIgbmFtZSA9IFwiX19vblwiICsgdHlwZSwgaSA9IHR5cGUuaW5kZXhPZihcIi5cIiksIHdyYXAgPSBkM19zZWxlY3Rpb25fb25MaXN0ZW5lcjtcbiAgICBpZiAoaSA+IDApIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpO1xuICAgIHZhciBmaWx0ZXIgPSBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLmdldCh0eXBlKTtcbiAgICBpZiAoZmlsdGVyKSB0eXBlID0gZmlsdGVyLCB3cmFwID0gZDNfc2VsZWN0aW9uX29uRmlsdGVyO1xuICAgIGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGwsIGwuJCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbkFkZCgpIHtcbiAgICAgIHZhciBsID0gd3JhcChsaXN0ZW5lciwgZDNfYXJyYXkoYXJndW1lbnRzKSk7XG4gICAgICBvblJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGUsIHRoaXNbbmFtZV0gPSBsLCBsLiQgPSBjYXB0dXJlKTtcbiAgICAgIGwuXyA9IGxpc3RlbmVyO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGwoKSB7XG4gICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXl9fb24oW14uXSspXCIgKyBkMy5yZXF1b3RlKHR5cGUpICsgXCIkXCIpLCBtYXRjaDtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICBpZiAobWF0Y2ggPSBuYW1lLm1hdGNoKHJlKSkge1xuICAgICAgICAgIHZhciBsID0gdGhpc1tuYW1lXTtcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobWF0Y2hbMV0sIGwsIGwuJCk7XG4gICAgICAgICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGkgPyBsaXN0ZW5lciA/IG9uQWRkIDogb25SZW1vdmUgOiBsaXN0ZW5lciA/IGQzX25vb3AgOiByZW1vdmVBbGw7XG4gIH1cbiAgdmFyIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMgPSBkMy5tYXAoe1xuICAgIG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG4gICAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiXG4gIH0pO1xuICBpZiAoZDNfZG9jdW1lbnQpIHtcbiAgICBkM19zZWxlY3Rpb25fb25GaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oaykge1xuICAgICAgaWYgKFwib25cIiArIGsgaW4gZDNfZG9jdW1lbnQpIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMucmVtb3ZlKGspO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIG8gPSBkMy5ldmVudDtcbiAgICAgIGQzLmV2ZW50ID0gZTtcbiAgICAgIGFyZ3VtZW50elswXSA9IHRoaXMuX19kYXRhX187XG4gICAgICB0cnkge1xuICAgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHopO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZDMuZXZlbnQgPSBvO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uRmlsdGVyKGxpc3RlbmVyLCBhcmd1bWVudHopIHtcbiAgICB2YXIgbCA9IGQzX3NlbGVjdGlvbl9vbkxpc3RlbmVyKGxpc3RlbmVyLCBhcmd1bWVudHopO1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gdGhpcywgcmVsYXRlZCA9IGUucmVsYXRlZFRhcmdldDtcbiAgICAgIGlmICghcmVsYXRlZCB8fCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIShyZWxhdGVkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRhcmdldCkgJiA4KSkge1xuICAgICAgICBsLmNhbGwodGFyZ2V0LCBlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHZhciBkM19ldmVudF9kcmFnU2VsZWN0LCBkM19ldmVudF9kcmFnSWQgPSAwO1xuICBmdW5jdGlvbiBkM19ldmVudF9kcmFnU3VwcHJlc3Mobm9kZSkge1xuICAgIHZhciBuYW1lID0gXCIuZHJhZ3N1cHByZXNzLVwiICsgKytkM19ldmVudF9kcmFnSWQsIGNsaWNrID0gXCJjbGlja1wiICsgbmFtZSwgdyA9IGQzLnNlbGVjdChkM193aW5kb3cobm9kZSkpLm9uKFwidG91Y2htb3ZlXCIgKyBuYW1lLCBkM19ldmVudFByZXZlbnREZWZhdWx0KS5vbihcImRyYWdzdGFydFwiICsgbmFtZSwgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCkub24oXCJzZWxlY3RzdGFydFwiICsgbmFtZSwgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCk7XG4gICAgaWYgKGQzX2V2ZW50X2RyYWdTZWxlY3QgPT0gbnVsbCkge1xuICAgICAgZDNfZXZlbnRfZHJhZ1NlbGVjdCA9IFwib25zZWxlY3RzdGFydFwiIGluIG5vZGUgPyBmYWxzZSA6IGQzX3ZlbmRvclN5bWJvbChub2RlLnN0eWxlLCBcInVzZXJTZWxlY3RcIik7XG4gICAgfVxuICAgIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSB7XG4gICAgICB2YXIgc3R5bGUgPSBkM19kb2N1bWVudEVsZW1lbnQobm9kZSkuc3R5bGUsIHNlbGVjdCA9IHN0eWxlW2QzX2V2ZW50X2RyYWdTZWxlY3RdO1xuICAgICAgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBcIm5vbmVcIjtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN1cHByZXNzQ2xpY2spIHtcbiAgICAgIHcub24obmFtZSwgbnVsbCk7XG4gICAgICBpZiAoZDNfZXZlbnRfZHJhZ1NlbGVjdCkgc3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF0gPSBzZWxlY3Q7XG4gICAgICBpZiAoc3VwcHJlc3NDbGljaykge1xuICAgICAgICB2YXIgb2ZmID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdy5vbihjbGljaywgbnVsbCk7XG4gICAgICAgIH07XG4gICAgICAgIHcub24oY2xpY2ssIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGQzX2V2ZW50UHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBvZmYoKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIHNldFRpbWVvdXQob2ZmLCAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGQzLm1vdXNlID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCBkM19ldmVudFNvdXJjZSgpKTtcbiAgfTtcbiAgdmFyIGQzX21vdXNlX2J1ZzQ0MDgzID0gdGhpcy5uYXZpZ2F0b3IgJiYgL1dlYktpdC8udGVzdCh0aGlzLm5hdmlnYXRvci51c2VyQWdlbnQpID8gLTEgOiAwO1xuICBmdW5jdGlvbiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgZSkge1xuICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzKSBlID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICB2YXIgc3ZnID0gY29udGFpbmVyLm93bmVyU1ZHRWxlbWVudCB8fCBjb250YWluZXI7XG4gICAgaWYgKHN2Zy5jcmVhdGVTVkdQb2ludCkge1xuICAgICAgdmFyIHBvaW50ID0gc3ZnLmNyZWF0ZVNWR1BvaW50KCk7XG4gICAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMgPCAwKSB7XG4gICAgICAgIHZhciB3aW5kb3cgPSBkM193aW5kb3coY29udGFpbmVyKTtcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxYIHx8IHdpbmRvdy5zY3JvbGxZKSB7XG4gICAgICAgICAgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIlxuICAgICAgICAgIH0sIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgIHZhciBjdG0gPSBzdmdbMF1bMF0uZ2V0U2NyZWVuQ1RNKCk7XG4gICAgICAgICAgZDNfbW91c2VfYnVnNDQwODMgPSAhKGN0bS5mIHx8IGN0bS5lKTtcbiAgICAgICAgICBzdmcucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkM19tb3VzZV9idWc0NDA4MykgcG9pbnQueCA9IGUucGFnZVgsIHBvaW50LnkgPSBlLnBhZ2VZOyBlbHNlIHBvaW50LnggPSBlLmNsaWVudFgsIFxuICAgICAgcG9pbnQueSA9IGUuY2xpZW50WTtcbiAgICAgIHBvaW50ID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKGNvbnRhaW5lci5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpO1xuICAgICAgcmV0dXJuIFsgcG9pbnQueCwgcG9pbnQueSBdO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gWyBlLmNsaWVudFggLSByZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50TGVmdCwgZS5jbGllbnRZIC0gcmVjdC50b3AgLSBjb250YWluZXIuY2xpZW50VG9wIF07XG4gIH1cbiAgZDMudG91Y2ggPSBmdW5jdGlvbihjb250YWluZXIsIHRvdWNoZXMsIGlkZW50aWZpZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIGlkZW50aWZpZXIgPSB0b3VjaGVzLCB0b3VjaGVzID0gZDNfZXZlbnRTb3VyY2UoKS5jaGFuZ2VkVG91Y2hlcztcbiAgICBpZiAodG91Y2hlcykgZm9yICh2YXIgaSA9IDAsIG4gPSB0b3VjaGVzLmxlbmd0aCwgdG91Y2g7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgodG91Y2ggPSB0b3VjaGVzW2ldKS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgdG91Y2gpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgZDMuYmVoYXZpb3IuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBldmVudCA9IGQzX2V2ZW50RGlzcGF0Y2goZHJhZywgXCJkcmFnXCIsIFwiZHJhZ3N0YXJ0XCIsIFwiZHJhZ2VuZFwiKSwgb3JpZ2luID0gbnVsbCwgbW91c2Vkb3duID0gZHJhZ3N0YXJ0KGQzX25vb3AsIGQzLm1vdXNlLCBkM193aW5kb3csIFwibW91c2Vtb3ZlXCIsIFwibW91c2V1cFwiKSwgdG91Y2hzdGFydCA9IGRyYWdzdGFydChkM19iZWhhdmlvcl9kcmFnVG91Y2hJZCwgZDMudG91Y2gsIGQzX2lkZW50aXR5LCBcInRvdWNobW92ZVwiLCBcInRvdWNoZW5kXCIpO1xuICAgIGZ1bmN0aW9uIGRyYWcoKSB7XG4gICAgICB0aGlzLm9uKFwibW91c2Vkb3duLmRyYWdcIiwgbW91c2Vkb3duKS5vbihcInRvdWNoc3RhcnQuZHJhZ1wiLCB0b3VjaHN0YXJ0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhZ3N0YXJ0KGlkLCBwb3NpdGlvbiwgc3ViamVjdCwgbW92ZSwgZW5kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcywgdGFyZ2V0ID0gZDMuZXZlbnQudGFyZ2V0LmNvcnJlc3BvbmRpbmdFbGVtZW50IHx8IGQzLmV2ZW50LnRhcmdldCwgcGFyZW50ID0gdGhhdC5wYXJlbnROb2RlLCBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoYXQsIGFyZ3VtZW50cyksIGRyYWdnZWQgPSAwLCBkcmFnSWQgPSBpZCgpLCBkcmFnTmFtZSA9IFwiLmRyYWdcIiArIChkcmFnSWQgPT0gbnVsbCA/IFwiXCIgOiBcIi1cIiArIGRyYWdJZCksIGRyYWdPZmZzZXQsIGRyYWdTdWJqZWN0ID0gZDMuc2VsZWN0KHN1YmplY3QodGFyZ2V0KSkub24obW92ZSArIGRyYWdOYW1lLCBtb3ZlZCkub24oZW5kICsgZHJhZ05hbWUsIGVuZGVkKSwgZHJhZ1Jlc3RvcmUgPSBkM19ldmVudF9kcmFnU3VwcHJlc3ModGFyZ2V0KSwgcG9zaXRpb24wID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpO1xuICAgICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgICAgZHJhZ09mZnNldCA9IG9yaWdpbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgICAgIGRyYWdPZmZzZXQgPSBbIGRyYWdPZmZzZXQueCAtIHBvc2l0aW9uMFswXSwgZHJhZ09mZnNldC55IC0gcG9zaXRpb24wWzFdIF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHJhZ09mZnNldCA9IFsgMCwgMCBdO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcImRyYWdzdGFydFwiXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBtb3ZlZCgpIHtcbiAgICAgICAgICB2YXIgcG9zaXRpb24xID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpLCBkeCwgZHk7XG4gICAgICAgICAgaWYgKCFwb3NpdGlvbjEpIHJldHVybjtcbiAgICAgICAgICBkeCA9IHBvc2l0aW9uMVswXSAtIHBvc2l0aW9uMFswXTtcbiAgICAgICAgICBkeSA9IHBvc2l0aW9uMVsxXSAtIHBvc2l0aW9uMFsxXTtcbiAgICAgICAgICBkcmFnZ2VkIHw9IGR4IHwgZHk7XG4gICAgICAgICAgcG9zaXRpb24wID0gcG9zaXRpb24xO1xuICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZHJhZ1wiLFxuICAgICAgICAgICAgeDogcG9zaXRpb24xWzBdICsgZHJhZ09mZnNldFswXSxcbiAgICAgICAgICAgIHk6IHBvc2l0aW9uMVsxXSArIGRyYWdPZmZzZXRbMV0sXG4gICAgICAgICAgICBkeDogZHgsXG4gICAgICAgICAgICBkeTogZHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBlbmRlZCgpIHtcbiAgICAgICAgICBpZiAoIXBvc2l0aW9uKHBhcmVudCwgZHJhZ0lkKSkgcmV0dXJuO1xuICAgICAgICAgIGRyYWdTdWJqZWN0Lm9uKG1vdmUgKyBkcmFnTmFtZSwgbnVsbCkub24oZW5kICsgZHJhZ05hbWUsIG51bGwpO1xuICAgICAgICAgIGRyYWdSZXN0b3JlKGRyYWdnZWQpO1xuICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZHJhZ2VuZFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGRyYWcub3JpZ2luID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZ2luO1xuICAgICAgb3JpZ2luID0geDtcbiAgICAgIHJldHVybiBkcmFnO1xuICAgIH07XG4gICAgcmV0dXJuIGQzLnJlYmluZChkcmFnLCBldmVudCwgXCJvblwiKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQoKSB7XG4gICAgcmV0dXJuIGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG4gIH1cbiAgZDMudG91Y2hlcyA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgdG91Y2hlcykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgdG91Y2hlcyA9IGQzX2V2ZW50U291cmNlKCkudG91Y2hlcztcbiAgICByZXR1cm4gdG91Y2hlcyA/IGQzX2FycmF5KHRvdWNoZXMpLm1hcChmdW5jdGlvbih0b3VjaCkge1xuICAgICAgdmFyIHBvaW50ID0gZDNfbW91c2VQb2ludChjb250YWluZXIsIHRvdWNoKTtcbiAgICAgIHBvaW50LmlkZW50aWZpZXIgPSB0b3VjaC5pZGVudGlmaWVyO1xuICAgICAgcmV0dXJuIHBvaW50O1xuICAgIH0pIDogW107XG4gIH07XG4gIHZhciDOtSA9IDFlLTYsIM61MiA9IM61ICogzrUsIM+AID0gTWF0aC5QSSwgz4QgPSAyICogz4AsIM+EzrUgPSDPhCAtIM61LCBoYWxmz4AgPSDPgCAvIDIsIGQzX3JhZGlhbnMgPSDPgCAvIDE4MCwgZDNfZGVncmVlcyA9IDE4MCAvIM+AO1xuICBmdW5jdGlvbiBkM19zZ24oeCkge1xuICAgIHJldHVybiB4ID4gMCA/IDEgOiB4IDwgMCA/IC0xIDogMDtcbiAgfVxuICBmdW5jdGlvbiBkM19jcm9zczJkKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gKGJbMF0gLSBhWzBdKSAqIChjWzFdIC0gYVsxXSkgLSAoYlsxXSAtIGFbMV0pICogKGNbMF0gLSBhWzBdKTtcbiAgfVxuICBmdW5jdGlvbiBkM19hY29zKHgpIHtcbiAgICByZXR1cm4geCA+IDEgPyAwIDogeCA8IC0xID8gz4AgOiBNYXRoLmFjb3MoeCk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfYXNpbih4KSB7XG4gICAgcmV0dXJuIHggPiAxID8gaGFsZs+AIDogeCA8IC0xID8gLWhhbGbPgCA6IE1hdGguYXNpbih4KTtcbiAgfVxuICBmdW5jdGlvbiBkM19zaW5oKHgpIHtcbiAgICByZXR1cm4gKCh4ID0gTWF0aC5leHAoeCkpIC0gMSAvIHgpIC8gMjtcbiAgfVxuICBmdW5jdGlvbiBkM19jb3NoKHgpIHtcbiAgICByZXR1cm4gKCh4ID0gTWF0aC5leHAoeCkpICsgMSAvIHgpIC8gMjtcbiAgfVxuICBmdW5jdGlvbiBkM190YW5oKHgpIHtcbiAgICByZXR1cm4gKCh4ID0gTWF0aC5leHAoMiAqIHgpKSAtIDEpIC8gKHggKyAxKTtcbiAgfVxuICBmdW5jdGlvbiBkM19oYXZlcnNpbih4KSB7XG4gICAgcmV0dXJuICh4ID0gTWF0aC5zaW4oeCAvIDIpKSAqIHg7XG4gIH1cbiAgdmFyIM+BID0gTWF0aC5TUVJUMiwgz4EyID0gMiwgz4E0ID0gNDtcbiAgZDMuaW50ZXJwb2xhdGVab29tID0gZnVuY3Rpb24ocDAsIHAxKSB7XG4gICAgdmFyIHV4MCA9IHAwWzBdLCB1eTAgPSBwMFsxXSwgdzAgPSBwMFsyXSwgdXgxID0gcDFbMF0sIHV5MSA9IHAxWzFdLCB3MSA9IHAxWzJdLCBkeCA9IHV4MSAtIHV4MCwgZHkgPSB1eTEgLSB1eTAsIGQyID0gZHggKiBkeCArIGR5ICogZHksIGksIFM7XG4gICAgaWYgKGQyIDwgzrUyKSB7XG4gICAgICBTID0gTWF0aC5sb2codzEgLyB3MCkgLyDPgTtcbiAgICAgIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBbIHV4MCArIHQgKiBkeCwgdXkwICsgdCAqIGR5LCB3MCAqIE1hdGguZXhwKM+BICogdCAqIFMpIF07XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZDEgPSBNYXRoLnNxcnQoZDIpLCBiMCA9ICh3MSAqIHcxIC0gdzAgKiB3MCArIM+BNCAqIGQyKSAvICgyICogdzAgKiDPgTIgKiBkMSksIGIxID0gKHcxICogdzEgLSB3MCAqIHcwIC0gz4E0ICogZDIpIC8gKDIgKiB3MSAqIM+BMiAqIGQxKSwgcjAgPSBNYXRoLmxvZyhNYXRoLnNxcnQoYjAgKiBiMCArIDEpIC0gYjApLCByMSA9IE1hdGgubG9nKE1hdGguc3FydChiMSAqIGIxICsgMSkgLSBiMSk7XG4gICAgICBTID0gKHIxIC0gcjApIC8gz4E7XG4gICAgICBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgcyA9IHQgKiBTLCBjb3NocjAgPSBkM19jb3NoKHIwKSwgdSA9IHcwIC8gKM+BMiAqIGQxKSAqIChjb3NocjAgKiBkM190YW5oKM+BICogcyArIHIwKSAtIGQzX3NpbmgocjApKTtcbiAgICAgICAgcmV0dXJuIFsgdXgwICsgdSAqIGR4LCB1eTAgKyB1ICogZHksIHcwICogY29zaHIwIC8gZDNfY29zaCjPgSAqIHMgKyByMCkgXTtcbiAgICAgIH07XG4gICAgfVxuICAgIGkuZHVyYXRpb24gPSBTICogMWUzO1xuICAgIHJldHVybiBpO1xuICB9O1xuICBkMy5iZWhhdmlvci56b29tID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXcgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGs6IDFcbiAgICB9LCB0cmFuc2xhdGUwLCBjZW50ZXIwLCBjZW50ZXIsIHNpemUgPSBbIDk2MCwgNTAwIF0sIHNjYWxlRXh0ZW50ID0gZDNfYmVoYXZpb3Jfem9vbUluZmluaXR5LCBkdXJhdGlvbiA9IDI1MCwgem9vbWluZyA9IDAsIG1vdXNlZG93biA9IFwibW91c2Vkb3duLnpvb21cIiwgbW91c2Vtb3ZlID0gXCJtb3VzZW1vdmUuem9vbVwiLCBtb3VzZXVwID0gXCJtb3VzZXVwLnpvb21cIiwgbW91c2V3aGVlbFRpbWVyLCB0b3VjaHN0YXJ0ID0gXCJ0b3VjaHN0YXJ0Lnpvb21cIiwgdG91Y2h0aW1lLCBldmVudCA9IGQzX2V2ZW50RGlzcGF0Y2goem9vbSwgXCJ6b29tc3RhcnRcIiwgXCJ6b29tXCIsIFwiem9vbWVuZFwiKSwgeDAsIHgxLCB5MCwgeTE7XG4gICAgaWYgKCFkM19iZWhhdmlvcl96b29tV2hlZWwpIHtcbiAgICAgIGQzX2JlaGF2aW9yX3pvb21XaGVlbCA9IFwib253aGVlbFwiIGluIGQzX2RvY3VtZW50ID8gKGQzX2JlaGF2aW9yX3pvb21EZWx0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gLWQzLmV2ZW50LmRlbHRhWSAqIChkMy5ldmVudC5kZWx0YU1vZGUgPyAxMjAgOiAxKTtcbiAgICAgIH0sIFwid2hlZWxcIikgOiBcIm9ubW91c2V3aGVlbFwiIGluIGQzX2RvY3VtZW50ID8gKGQzX2JlaGF2aW9yX3pvb21EZWx0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZDMuZXZlbnQud2hlZWxEZWx0YTtcbiAgICAgIH0sIFwibW91c2V3aGVlbFwiKSA6IChkM19iZWhhdmlvcl96b29tRGVsdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIC1kMy5ldmVudC5kZXRhaWw7XG4gICAgICB9LCBcIk1vek1vdXNlUGl4ZWxTY3JvbGxcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHpvb20oZykge1xuICAgICAgZy5vbihtb3VzZWRvd24sIG1vdXNlZG93bmVkKS5vbihkM19iZWhhdmlvcl96b29tV2hlZWwgKyBcIi56b29tXCIsIG1vdXNld2hlZWxlZCkub24oXCJkYmxjbGljay56b29tXCIsIGRibGNsaWNrZWQpLm9uKHRvdWNoc3RhcnQsIHRvdWNoc3RhcnRlZCk7XG4gICAgfVxuICAgIHpvb20uZXZlbnQgPSBmdW5jdGlvbihnKSB7XG4gICAgICBnLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoaXMsIGFyZ3VtZW50cyksIHZpZXcxID0gdmlldztcbiAgICAgICAgaWYgKGQzX3RyYW5zaXRpb25Jbmhlcml0SWQpIHtcbiAgICAgICAgICBkMy5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmVhY2goXCJzdGFydC56b29tXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmlldyA9IHRoaXMuX19jaGFydF9fIHx8IHtcbiAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgazogMVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHpvb21zdGFydGVkKGRpc3BhdGNoKTtcbiAgICAgICAgICB9KS50d2VlbihcInpvb206em9vbVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkeCA9IHNpemVbMF0sIGR5ID0gc2l6ZVsxXSwgY3ggPSBjZW50ZXIwID8gY2VudGVyMFswXSA6IGR4IC8gMiwgY3kgPSBjZW50ZXIwID8gY2VudGVyMFsxXSA6IGR5IC8gMiwgaSA9IGQzLmludGVycG9sYXRlWm9vbShbIChjeCAtIHZpZXcueCkgLyB2aWV3LmssIChjeSAtIHZpZXcueSkgLyB2aWV3LmssIGR4IC8gdmlldy5rIF0sIFsgKGN4IC0gdmlldzEueCkgLyB2aWV3MS5rLCAoY3kgLSB2aWV3MS55KSAvIHZpZXcxLmssIGR4IC8gdmlldzEuayBdKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgIHZhciBsID0gaSh0KSwgayA9IGR4IC8gbFsyXTtcbiAgICAgICAgICAgICAgdGhpcy5fX2NoYXJ0X18gPSB2aWV3ID0ge1xuICAgICAgICAgICAgICAgIHg6IGN4IC0gbFswXSAqIGssXG4gICAgICAgICAgICAgICAgeTogY3kgLSBsWzFdICogayxcbiAgICAgICAgICAgICAgICBrOiBrXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHpvb21lZChkaXNwYXRjaCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pLmVhY2goXCJpbnRlcnJ1cHQuem9vbVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHpvb21lbmRlZChkaXNwYXRjaCk7XG4gICAgICAgICAgfSkuZWFjaChcImVuZC56b29tXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgem9vbWVuZGVkKGRpc3BhdGNoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9fY2hhcnRfXyA9IHZpZXc7XG4gICAgICAgICAgem9vbXN0YXJ0ZWQoZGlzcGF0Y2gpO1xuICAgICAgICAgIHpvb21lZChkaXNwYXRjaCk7XG4gICAgICAgICAgem9vbWVuZGVkKGRpc3BhdGNoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICB6b29tLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgdmlldy54LCB2aWV3LnkgXTtcbiAgICAgIHZpZXcgPSB7XG4gICAgICAgIHg6ICtfWzBdLFxuICAgICAgICB5OiArX1sxXSxcbiAgICAgICAgazogdmlldy5rXG4gICAgICB9O1xuICAgICAgcmVzY2FsZSgpO1xuICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICB6b29tLnNjYWxlID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdmlldy5rO1xuICAgICAgdmlldyA9IHtcbiAgICAgICAgeDogdmlldy54LFxuICAgICAgICB5OiB2aWV3LnksXG4gICAgICAgIGs6IG51bGxcbiAgICAgIH07XG4gICAgICBzY2FsZVRvKCtfKTtcbiAgICAgIHJlc2NhbGUoKTtcbiAgICAgIHJldHVybiB6b29tO1xuICAgIH07XG4gICAgem9vbS5zY2FsZUV4dGVudCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNjYWxlRXh0ZW50O1xuICAgICAgc2NhbGVFeHRlbnQgPSBfID09IG51bGwgPyBkM19iZWhhdmlvcl96b29tSW5maW5pdHkgOiBbICtfWzBdLCArX1sxXSBdO1xuICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICB6b29tLmNlbnRlciA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNlbnRlcjtcbiAgICAgIGNlbnRlciA9IF8gJiYgWyArX1swXSwgK19bMV0gXTtcbiAgICAgIHJldHVybiB6b29tO1xuICAgIH07XG4gICAgem9vbS5zaXplID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2l6ZTtcbiAgICAgIHNpemUgPSBfICYmIFsgK19bMF0sICtfWzFdIF07XG4gICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIHpvb20uZHVyYXRpb24gPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkdXJhdGlvbjtcbiAgICAgIGR1cmF0aW9uID0gK187XG4gICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIHpvb20ueCA9IGZ1bmN0aW9uKHopIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHgxO1xuICAgICAgeDEgPSB6O1xuICAgICAgeDAgPSB6LmNvcHkoKTtcbiAgICAgIHZpZXcgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGs6IDFcbiAgICAgIH07XG4gICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIHpvb20ueSA9IGZ1bmN0aW9uKHopIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHkxO1xuICAgICAgeTEgPSB6O1xuICAgICAgeTAgPSB6LmNvcHkoKTtcbiAgICAgIHZpZXcgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGs6IDFcbiAgICAgIH07XG4gICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxvY2F0aW9uKHApIHtcbiAgICAgIHJldHVybiBbIChwWzBdIC0gdmlldy54KSAvIHZpZXcuaywgKHBbMV0gLSB2aWV3LnkpIC8gdmlldy5rIF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvaW50KGwpIHtcbiAgICAgIHJldHVybiBbIGxbMF0gKiB2aWV3LmsgKyB2aWV3LngsIGxbMV0gKiB2aWV3LmsgKyB2aWV3LnkgXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2NhbGVUbyhzKSB7XG4gICAgICB2aWV3LmsgPSBNYXRoLm1heChzY2FsZUV4dGVudFswXSwgTWF0aC5taW4oc2NhbGVFeHRlbnRbMV0sIHMpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlVG8ocCwgbCkge1xuICAgICAgbCA9IHBvaW50KGwpO1xuICAgICAgdmlldy54ICs9IHBbMF0gLSBsWzBdO1xuICAgICAgdmlldy55ICs9IHBbMV0gLSBsWzFdO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b29tVG8odGhhdCwgcCwgbCwgaykge1xuICAgICAgdGhhdC5fX2NoYXJ0X18gPSB7XG4gICAgICAgIHg6IHZpZXcueCxcbiAgICAgICAgeTogdmlldy55LFxuICAgICAgICBrOiB2aWV3LmtcbiAgICAgIH07XG4gICAgICBzY2FsZVRvKE1hdGgucG93KDIsIGspKTtcbiAgICAgIHRyYW5zbGF0ZVRvKGNlbnRlcjAgPSBwLCBsKTtcbiAgICAgIHRoYXQgPSBkMy5zZWxlY3QodGhhdCk7XG4gICAgICBpZiAoZHVyYXRpb24gPiAwKSB0aGF0ID0gdGhhdC50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pO1xuICAgICAgdGhhdC5jYWxsKHpvb20uZXZlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXNjYWxlKCkge1xuICAgICAgaWYgKHgxKSB4MS5kb21haW4oeDAucmFuZ2UoKS5tYXAoZnVuY3Rpb24oeCkge1xuICAgICAgICByZXR1cm4gKHggLSB2aWV3LngpIC8gdmlldy5rO1xuICAgICAgfSkubWFwKHgwLmludmVydCkpO1xuICAgICAgaWYgKHkxKSB5MS5kb21haW4oeTAucmFuZ2UoKS5tYXAoZnVuY3Rpb24oeSkge1xuICAgICAgICByZXR1cm4gKHkgLSB2aWV3LnkpIC8gdmlldy5rO1xuICAgICAgfSkubWFwKHkwLmludmVydCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b29tc3RhcnRlZChkaXNwYXRjaCkge1xuICAgICAgaWYgKCF6b29taW5nKyspIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJ6b29tc3RhcnRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHpvb21lZChkaXNwYXRjaCkge1xuICAgICAgcmVzY2FsZSgpO1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInpvb21cIixcbiAgICAgICAgc2NhbGU6IHZpZXcuayxcbiAgICAgICAgdHJhbnNsYXRlOiBbIHZpZXcueCwgdmlldy55IF1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB6b29tZW5kZWQoZGlzcGF0Y2gpIHtcbiAgICAgIGlmICghLS16b29taW5nKSBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiem9vbWVuZFwiXG4gICAgICB9KSwgY2VudGVyMCA9IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdXNlZG93bmVkKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzLCBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoYXQsIGFyZ3VtZW50cyksIGRyYWdnZWQgPSAwLCBzdWJqZWN0ID0gZDMuc2VsZWN0KGQzX3dpbmRvdyh0aGF0KSkub24obW91c2Vtb3ZlLCBtb3ZlZCkub24obW91c2V1cCwgZW5kZWQpLCBsb2NhdGlvbjAgPSBsb2NhdGlvbihkMy5tb3VzZSh0aGF0KSksIGRyYWdSZXN0b3JlID0gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKHRoYXQpO1xuICAgICAgZDNfc2VsZWN0aW9uX2ludGVycnVwdC5jYWxsKHRoYXQpO1xuICAgICAgem9vbXN0YXJ0ZWQoZGlzcGF0Y2gpO1xuICAgICAgZnVuY3Rpb24gbW92ZWQoKSB7XG4gICAgICAgIGRyYWdnZWQgPSAxO1xuICAgICAgICB0cmFuc2xhdGVUbyhkMy5tb3VzZSh0aGF0KSwgbG9jYXRpb24wKTtcbiAgICAgICAgem9vbWVkKGRpc3BhdGNoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGVuZGVkKCkge1xuICAgICAgICBzdWJqZWN0Lm9uKG1vdXNlbW92ZSwgbnVsbCkub24obW91c2V1cCwgbnVsbCk7XG4gICAgICAgIGRyYWdSZXN0b3JlKGRyYWdnZWQpO1xuICAgICAgICB6b29tZW5kZWQoZGlzcGF0Y2gpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB0b3VjaHN0YXJ0ZWQoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXMsIGRpc3BhdGNoID0gZXZlbnQub2YodGhhdCwgYXJndW1lbnRzKSwgbG9jYXRpb25zMCA9IHt9LCBkaXN0YW5jZTAgPSAwLCBzY2FsZTAsIHpvb21OYW1lID0gXCIuem9vbS1cIiArIGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXIsIHRvdWNobW92ZSA9IFwidG91Y2htb3ZlXCIgKyB6b29tTmFtZSwgdG91Y2hlbmQgPSBcInRvdWNoZW5kXCIgKyB6b29tTmFtZSwgdGFyZ2V0cyA9IFtdLCBzdWJqZWN0ID0gZDMuc2VsZWN0KHRoYXQpLCBkcmFnUmVzdG9yZSA9IGQzX2V2ZW50X2RyYWdTdXBwcmVzcyh0aGF0KTtcbiAgICAgIHN0YXJ0ZWQoKTtcbiAgICAgIHpvb21zdGFydGVkKGRpc3BhdGNoKTtcbiAgICAgIHN1YmplY3Qub24obW91c2Vkb3duLCBudWxsKS5vbih0b3VjaHN0YXJ0LCBzdGFydGVkKTtcbiAgICAgIGZ1bmN0aW9uIHJlbG9jYXRlKCkge1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGQzLnRvdWNoZXModGhhdCk7XG4gICAgICAgIHNjYWxlMCA9IHZpZXcuaztcbiAgICAgICAgdG91Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBpZiAodC5pZGVudGlmaWVyIGluIGxvY2F0aW9uczApIGxvY2F0aW9uczBbdC5pZGVudGlmaWVyXSA9IGxvY2F0aW9uKHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRvdWNoZXM7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBzdGFydGVkKCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZDMuZXZlbnQudGFyZ2V0O1xuICAgICAgICBkMy5zZWxlY3QodGFyZ2V0KS5vbih0b3VjaG1vdmUsIG1vdmVkKS5vbih0b3VjaGVuZCwgZW5kZWQpO1xuICAgICAgICB0YXJnZXRzLnB1c2godGFyZ2V0KTtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBkMy5ldmVudC5jaGFuZ2VkVG91Y2hlcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBjaGFuZ2VkLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIGxvY2F0aW9uczBbY2hhbmdlZFtpXS5pZGVudGlmaWVyXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRvdWNoZXMgPSByZWxvY2F0ZSgpLCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAodG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAobm93IC0gdG91Y2h0aW1lIDwgNTAwKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRvdWNoZXNbMF07XG4gICAgICAgICAgICB6b29tVG8odGhhdCwgcCwgbG9jYXRpb25zMFtwLmlkZW50aWZpZXJdLCBNYXRoLmZsb29yKE1hdGgubG9nKHZpZXcuaykgLyBNYXRoLkxOMikgKyAxKTtcbiAgICAgICAgICAgIGQzX2V2ZW50UHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG91Y2h0aW1lID0gbm93O1xuICAgICAgICB9IGVsc2UgaWYgKHRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHZhciBwID0gdG91Y2hlc1swXSwgcSA9IHRvdWNoZXNbMV0sIGR4ID0gcFswXSAtIHFbMF0sIGR5ID0gcFsxXSAtIHFbMV07XG4gICAgICAgICAgZGlzdGFuY2UwID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG1vdmVkKCkge1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGQzLnRvdWNoZXModGhhdCksIHAwLCBsMCwgcDEsIGwxO1xuICAgICAgICBkM19zZWxlY3Rpb25faW50ZXJydXB0LmNhbGwodGhhdCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdG91Y2hlcy5sZW5ndGg7IGkgPCBuOyArK2ksIGwxID0gbnVsbCkge1xuICAgICAgICAgIHAxID0gdG91Y2hlc1tpXTtcbiAgICAgICAgICBpZiAobDEgPSBsb2NhdGlvbnMwW3AxLmlkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICBpZiAobDApIGJyZWFrO1xuICAgICAgICAgICAgcDAgPSBwMSwgbDAgPSBsMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGwxKSB7XG4gICAgICAgICAgdmFyIGRpc3RhbmNlMSA9IChkaXN0YW5jZTEgPSBwMVswXSAtIHAwWzBdKSAqIGRpc3RhbmNlMSArIChkaXN0YW5jZTEgPSBwMVsxXSAtIHAwWzFdKSAqIGRpc3RhbmNlMSwgc2NhbGUxID0gZGlzdGFuY2UwICYmIE1hdGguc3FydChkaXN0YW5jZTEgLyBkaXN0YW5jZTApO1xuICAgICAgICAgIHAwID0gWyAocDBbMF0gKyBwMVswXSkgLyAyLCAocDBbMV0gKyBwMVsxXSkgLyAyIF07XG4gICAgICAgICAgbDAgPSBbIChsMFswXSArIGwxWzBdKSAvIDIsIChsMFsxXSArIGwxWzFdKSAvIDIgXTtcbiAgICAgICAgICBzY2FsZVRvKHNjYWxlMSAqIHNjYWxlMCk7XG4gICAgICAgIH1cbiAgICAgICAgdG91Y2h0aW1lID0gbnVsbDtcbiAgICAgICAgdHJhbnNsYXRlVG8ocDAsIGwwKTtcbiAgICAgICAgem9vbWVkKGRpc3BhdGNoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGVuZGVkKCkge1xuICAgICAgICBpZiAoZDMuZXZlbnQudG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY2hhbmdlZCA9IGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gY2hhbmdlZC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBsb2NhdGlvbnMwW2NoYW5nZWRbaV0uaWRlbnRpZmllcl07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAodmFyIGlkZW50aWZpZXIgaW4gbG9jYXRpb25zMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgcmVsb2NhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZDMuc2VsZWN0QWxsKHRhcmdldHMpLm9uKHpvb21OYW1lLCBudWxsKTtcbiAgICAgICAgc3ViamVjdC5vbihtb3VzZWRvd24sIG1vdXNlZG93bmVkKS5vbih0b3VjaHN0YXJ0LCB0b3VjaHN0YXJ0ZWQpO1xuICAgICAgICBkcmFnUmVzdG9yZSgpO1xuICAgICAgICB6b29tZW5kZWQoZGlzcGF0Y2gpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtb3VzZXdoZWVsZWQoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2ggPSBldmVudC5vZih0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKG1vdXNld2hlZWxUaW1lcikgY2xlYXJUaW1lb3V0KG1vdXNld2hlZWxUaW1lcik7IGVsc2UgZDNfc2VsZWN0aW9uX2ludGVycnVwdC5jYWxsKHRoaXMpLCBcbiAgICAgIHRyYW5zbGF0ZTAgPSBsb2NhdGlvbihjZW50ZXIwID0gY2VudGVyIHx8IGQzLm1vdXNlKHRoaXMpKSwgem9vbXN0YXJ0ZWQoZGlzcGF0Y2gpO1xuICAgICAgbW91c2V3aGVlbFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgbW91c2V3aGVlbFRpbWVyID0gbnVsbDtcbiAgICAgICAgem9vbWVuZGVkKGRpc3BhdGNoKTtcbiAgICAgIH0sIDUwKTtcbiAgICAgIGQzX2V2ZW50UHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNjYWxlVG8oTWF0aC5wb3coMiwgZDNfYmVoYXZpb3Jfem9vbURlbHRhKCkgKiAuMDAyKSAqIHZpZXcuayk7XG4gICAgICB0cmFuc2xhdGVUbyhjZW50ZXIwLCB0cmFuc2xhdGUwKTtcbiAgICAgIHpvb21lZChkaXNwYXRjaCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRibGNsaWNrZWQoKSB7XG4gICAgICB2YXIgcCA9IGQzLm1vdXNlKHRoaXMpLCBrID0gTWF0aC5sb2codmlldy5rKSAvIE1hdGguTE4yO1xuICAgICAgem9vbVRvKHRoaXMsIHAsIGxvY2F0aW9uKHApLCBkMy5ldmVudC5zaGlmdEtleSA/IE1hdGguY2VpbChrKSAtIDEgOiBNYXRoLmZsb29yKGspICsgMSk7XG4gICAgfVxuICAgIHJldHVybiBkMy5yZWJpbmQoem9vbSwgZXZlbnQsIFwib25cIik7XG4gIH07XG4gIHZhciBkM19iZWhhdmlvcl96b29tSW5maW5pdHkgPSBbIDAsIEluZmluaXR5IF0sIGQzX2JlaGF2aW9yX3pvb21EZWx0YSwgZDNfYmVoYXZpb3Jfem9vbVdoZWVsO1xuICBkMy5jb2xvciA9IGQzX2NvbG9yO1xuICBmdW5jdGlvbiBkM19jb2xvcigpIHt9XG4gIGQzX2NvbG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpICsgXCJcIjtcbiAgfTtcbiAgZDMuaHNsID0gZDNfaHNsO1xuICBmdW5jdGlvbiBkM19oc2woaCwgcywgbCkge1xuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgZDNfaHNsID8gdm9pZCAodGhpcy5oID0gK2gsIHRoaXMucyA9ICtzLCB0aGlzLmwgPSArbCkgOiBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGggaW5zdGFuY2VvZiBkM19oc2wgPyBuZXcgZDNfaHNsKGguaCwgaC5zLCBoLmwpIDogZDNfcmdiX3BhcnNlKFwiXCIgKyBoLCBkM19yZ2JfaHNsLCBkM19oc2wpIDogbmV3IGQzX2hzbChoLCBzLCBsKTtcbiAgfVxuICB2YXIgZDNfaHNsUHJvdG90eXBlID0gZDNfaHNsLnByb3RvdHlwZSA9IG5ldyBkM19jb2xvcigpO1xuICBkM19oc2xQcm90b3R5cGUuYnJpZ2h0ZXIgPSBmdW5jdGlvbihrKSB7XG4gICAgayA9IE1hdGgucG93KC43LCBhcmd1bWVudHMubGVuZ3RoID8gayA6IDEpO1xuICAgIHJldHVybiBuZXcgZDNfaHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgLyBrKTtcbiAgfTtcbiAgZDNfaHNsUHJvdG90eXBlLmRhcmtlciA9IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gTWF0aC5wb3coLjcsIGFyZ3VtZW50cy5sZW5ndGggPyBrIDogMSk7XG4gICAgcmV0dXJuIG5ldyBkM19oc2wodGhpcy5oLCB0aGlzLnMsIGsgKiB0aGlzLmwpO1xuICB9O1xuICBkM19oc2xQcm90b3R5cGUucmdiID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX2hzbF9yZ2IodGhpcy5oLCB0aGlzLnMsIHRoaXMubCk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2hzbF9yZ2IoaCwgcywgbCkge1xuICAgIHZhciBtMSwgbTI7XG4gICAgaCA9IGlzTmFOKGgpID8gMCA6IChoICU9IDM2MCkgPCAwID8gaCArIDM2MCA6IGg7XG4gICAgcyA9IGlzTmFOKHMpID8gMCA6IHMgPCAwID8gMCA6IHMgPiAxID8gMSA6IHM7XG4gICAgbCA9IGwgPCAwID8gMCA6IGwgPiAxID8gMSA6IGw7XG4gICAgbTIgPSBsIDw9IC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuICAgIG0xID0gMiAqIGwgLSBtMjtcbiAgICBmdW5jdGlvbiB2KGgpIHtcbiAgICAgIGlmIChoID4gMzYwKSBoIC09IDM2MDsgZWxzZSBpZiAoaCA8IDApIGggKz0gMzYwO1xuICAgICAgaWYgKGggPCA2MCkgcmV0dXJuIG0xICsgKG0yIC0gbTEpICogaCAvIDYwO1xuICAgICAgaWYgKGggPCAxODApIHJldHVybiBtMjtcbiAgICAgIGlmIChoIDwgMjQwKSByZXR1cm4gbTEgKyAobTIgLSBtMSkgKiAoMjQwIC0gaCkgLyA2MDtcbiAgICAgIHJldHVybiBtMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdnYoaCkge1xuICAgICAgcmV0dXJuIE1hdGgucm91bmQodihoKSAqIDI1NSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgZDNfcmdiKHZ2KGggKyAxMjApLCB2dihoKSwgdnYoaCAtIDEyMCkpO1xuICB9XG4gIGQzLmhjbCA9IGQzX2hjbDtcbiAgZnVuY3Rpb24gZDNfaGNsKGgsIGMsIGwpIHtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGQzX2hjbCA/IHZvaWQgKHRoaXMuaCA9ICtoLCB0aGlzLmMgPSArYywgdGhpcy5sID0gK2wpIDogYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBoIGluc3RhbmNlb2YgZDNfaGNsID8gbmV3IGQzX2hjbChoLmgsIGguYywgaC5sKSA6IGggaW5zdGFuY2VvZiBkM19sYWIgPyBkM19sYWJfaGNsKGgubCwgaC5hLCBoLmIpIDogZDNfbGFiX2hjbCgoaCA9IGQzX3JnYl9sYWIoKGggPSBkMy5yZ2IoaCkpLnIsIGguZywgaC5iKSkubCwgaC5hLCBoLmIpIDogbmV3IGQzX2hjbChoLCBjLCBsKTtcbiAgfVxuICB2YXIgZDNfaGNsUHJvdG90eXBlID0gZDNfaGNsLnByb3RvdHlwZSA9IG5ldyBkM19jb2xvcigpO1xuICBkM19oY2xQcm90b3R5cGUuYnJpZ2h0ZXIgPSBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIG5ldyBkM19oY2wodGhpcy5oLCB0aGlzLmMsIE1hdGgubWluKDEwMCwgdGhpcy5sICsgZDNfbGFiX0sgKiAoYXJndW1lbnRzLmxlbmd0aCA/IGsgOiAxKSkpO1xuICB9O1xuICBkM19oY2xQcm90b3R5cGUuZGFya2VyID0gZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgZDNfaGNsKHRoaXMuaCwgdGhpcy5jLCBNYXRoLm1heCgwLCB0aGlzLmwgLSBkM19sYWJfSyAqIChhcmd1bWVudHMubGVuZ3RoID8gayA6IDEpKSk7XG4gIH07XG4gIGQzX2hjbFByb3RvdHlwZS5yZ2IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfaGNsX2xhYih0aGlzLmgsIHRoaXMuYywgdGhpcy5sKS5yZ2IoKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfaGNsX2xhYihoLCBjLCBsKSB7XG4gICAgaWYgKGlzTmFOKGgpKSBoID0gMDtcbiAgICBpZiAoaXNOYU4oYykpIGMgPSAwO1xuICAgIHJldHVybiBuZXcgZDNfbGFiKGwsIE1hdGguY29zKGggKj0gZDNfcmFkaWFucykgKiBjLCBNYXRoLnNpbihoKSAqIGMpO1xuICB9XG4gIGQzLmxhYiA9IGQzX2xhYjtcbiAgZnVuY3Rpb24gZDNfbGFiKGwsIGEsIGIpIHtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGQzX2xhYiA/IHZvaWQgKHRoaXMubCA9ICtsLCB0aGlzLmEgPSArYSwgdGhpcy5iID0gK2IpIDogYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBsIGluc3RhbmNlb2YgZDNfbGFiID8gbmV3IGQzX2xhYihsLmwsIGwuYSwgbC5iKSA6IGwgaW5zdGFuY2VvZiBkM19oY2wgPyBkM19oY2xfbGFiKGwuaCwgbC5jLCBsLmwpIDogZDNfcmdiX2xhYigobCA9IGQzX3JnYihsKSkuciwgbC5nLCBsLmIpIDogbmV3IGQzX2xhYihsLCBhLCBiKTtcbiAgfVxuICB2YXIgZDNfbGFiX0sgPSAxODtcbiAgdmFyIGQzX2xhYl9YID0gLjk1MDQ3LCBkM19sYWJfWSA9IDEsIGQzX2xhYl9aID0gMS4wODg4MztcbiAgdmFyIGQzX2xhYlByb3RvdHlwZSA9IGQzX2xhYi5wcm90b3R5cGUgPSBuZXcgZDNfY29sb3IoKTtcbiAgZDNfbGFiUHJvdG90eXBlLmJyaWdodGVyID0gZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgZDNfbGFiKE1hdGgubWluKDEwMCwgdGhpcy5sICsgZDNfbGFiX0sgKiAoYXJndW1lbnRzLmxlbmd0aCA/IGsgOiAxKSksIHRoaXMuYSwgdGhpcy5iKTtcbiAgfTtcbiAgZDNfbGFiUHJvdG90eXBlLmRhcmtlciA9IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gbmV3IGQzX2xhYihNYXRoLm1heCgwLCB0aGlzLmwgLSBkM19sYWJfSyAqIChhcmd1bWVudHMubGVuZ3RoID8gayA6IDEpKSwgdGhpcy5hLCB0aGlzLmIpO1xuICB9O1xuICBkM19sYWJQcm90b3R5cGUucmdiID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX2xhYl9yZ2IodGhpcy5sLCB0aGlzLmEsIHRoaXMuYik7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2xhYl9yZ2IobCwgYSwgYikge1xuICAgIHZhciB5ID0gKGwgKyAxNikgLyAxMTYsIHggPSB5ICsgYSAvIDUwMCwgeiA9IHkgLSBiIC8gMjAwO1xuICAgIHggPSBkM19sYWJfeHl6KHgpICogZDNfbGFiX1g7XG4gICAgeSA9IGQzX2xhYl94eXooeSkgKiBkM19sYWJfWTtcbiAgICB6ID0gZDNfbGFiX3h5eih6KSAqIGQzX2xhYl9aO1xuICAgIHJldHVybiBuZXcgZDNfcmdiKGQzX3h5el9yZ2IoMy4yNDA0NTQyICogeCAtIDEuNTM3MTM4NSAqIHkgLSAuNDk4NTMxNCAqIHopLCBkM194eXpfcmdiKC0uOTY5MjY2ICogeCArIDEuODc2MDEwOCAqIHkgKyAuMDQxNTU2ICogeiksIGQzX3h5el9yZ2IoLjA1NTY0MzQgKiB4IC0gLjIwNDAyNTkgKiB5ICsgMS4wNTcyMjUyICogeikpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xhYl9oY2wobCwgYSwgYikge1xuICAgIHJldHVybiBsID4gMCA/IG5ldyBkM19oY2woTWF0aC5hdGFuMihiLCBhKSAqIGQzX2RlZ3JlZXMsIE1hdGguc3FydChhICogYSArIGIgKiBiKSwgbCkgOiBuZXcgZDNfaGNsKE5hTiwgTmFOLCBsKTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYWJfeHl6KHgpIHtcbiAgICByZXR1cm4geCA+IC4yMDY4OTMwMzQgPyB4ICogeCAqIHggOiAoeCAtIDQgLyAyOSkgLyA3Ljc4NzAzNztcbiAgfVxuICBmdW5jdGlvbiBkM194eXpfbGFiKHgpIHtcbiAgICByZXR1cm4geCA+IC4wMDg4NTYgPyBNYXRoLnBvdyh4LCAxIC8gMykgOiA3Ljc4NzAzNyAqIHggKyA0IC8gMjk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfeHl6X3JnYihyKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMjU1ICogKHIgPD0gLjAwMzA0ID8gMTIuOTIgKiByIDogMS4wNTUgKiBNYXRoLnBvdyhyLCAxIC8gMi40KSAtIC4wNTUpKTtcbiAgfVxuICBkMy5yZ2IgPSBkM19yZ2I7XG4gIGZ1bmN0aW9uIGQzX3JnYihyLCBnLCBiKSB7XG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBkM19yZ2IgPyB2b2lkICh0aGlzLnIgPSB+fnIsIHRoaXMuZyA9IH5+ZywgdGhpcy5iID0gfn5iKSA6IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gciBpbnN0YW5jZW9mIGQzX3JnYiA/IG5ldyBkM19yZ2Ioci5yLCByLmcsIHIuYikgOiBkM19yZ2JfcGFyc2UoXCJcIiArIHIsIGQzX3JnYiwgZDNfaHNsX3JnYikgOiBuZXcgZDNfcmdiKHIsIGcsIGIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3JnYk51bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgZDNfcmdiKHZhbHVlID4+IDE2LCB2YWx1ZSA+PiA4ICYgMjU1LCB2YWx1ZSAmIDI1NSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfcmdiU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIGQzX3JnYk51bWJlcih2YWx1ZSkgKyBcIlwiO1xuICB9XG4gIHZhciBkM19yZ2JQcm90b3R5cGUgPSBkM19yZ2IucHJvdG90eXBlID0gbmV3IGQzX2NvbG9yKCk7XG4gIGQzX3JnYlByb3RvdHlwZS5icmlnaHRlciA9IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gTWF0aC5wb3coLjcsIGFyZ3VtZW50cy5sZW5ndGggPyBrIDogMSk7XG4gICAgdmFyIHIgPSB0aGlzLnIsIGcgPSB0aGlzLmcsIGIgPSB0aGlzLmIsIGkgPSAzMDtcbiAgICBpZiAoIXIgJiYgIWcgJiYgIWIpIHJldHVybiBuZXcgZDNfcmdiKGksIGksIGkpO1xuICAgIGlmIChyICYmIHIgPCBpKSByID0gaTtcbiAgICBpZiAoZyAmJiBnIDwgaSkgZyA9IGk7XG4gICAgaWYgKGIgJiYgYiA8IGkpIGIgPSBpO1xuICAgIHJldHVybiBuZXcgZDNfcmdiKE1hdGgubWluKDI1NSwgciAvIGspLCBNYXRoLm1pbigyNTUsIGcgLyBrKSwgTWF0aC5taW4oMjU1LCBiIC8gaykpO1xuICB9O1xuICBkM19yZ2JQcm90b3R5cGUuZGFya2VyID0gZnVuY3Rpb24oaykge1xuICAgIGsgPSBNYXRoLnBvdyguNywgYXJndW1lbnRzLmxlbmd0aCA/IGsgOiAxKTtcbiAgICByZXR1cm4gbmV3IGQzX3JnYihrICogdGhpcy5yLCBrICogdGhpcy5nLCBrICogdGhpcy5iKTtcbiAgfTtcbiAgZDNfcmdiUHJvdG90eXBlLmhzbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19yZ2JfaHNsKHRoaXMuciwgdGhpcy5nLCB0aGlzLmIpO1xuICB9O1xuICBkM19yZ2JQcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCIjXCIgKyBkM19yZ2JfaGV4KHRoaXMucikgKyBkM19yZ2JfaGV4KHRoaXMuZykgKyBkM19yZ2JfaGV4KHRoaXMuYik7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3JnYl9oZXgodikge1xuICAgIHJldHVybiB2IDwgMTYgPyBcIjBcIiArIE1hdGgubWF4KDAsIHYpLnRvU3RyaW5nKDE2KSA6IE1hdGgubWluKDI1NSwgdikudG9TdHJpbmcoMTYpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3JnYl9wYXJzZShmb3JtYXQsIHJnYiwgaHNsKSB7XG4gICAgdmFyIHIgPSAwLCBnID0gMCwgYiA9IDAsIG0xLCBtMiwgY29sb3I7XG4gICAgbTEgPSAvKFthLXpdKylcXCgoLiopXFwpLy5leGVjKGZvcm1hdCA9IGZvcm1hdC50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAobTEpIHtcbiAgICAgIG0yID0gbTFbMl0uc3BsaXQoXCIsXCIpO1xuICAgICAgc3dpdGNoIChtMVsxXSkge1xuICAgICAgIGNhc2UgXCJoc2xcIjpcbiAgICAgICAge1xuICAgICAgICAgIHJldHVybiBoc2wocGFyc2VGbG9hdChtMlswXSksIHBhcnNlRmxvYXQobTJbMV0pIC8gMTAwLCBwYXJzZUZsb2F0KG0yWzJdKSAvIDEwMCk7XG4gICAgICAgIH1cblxuICAgICAgIGNhc2UgXCJyZ2JcIjpcbiAgICAgICAge1xuICAgICAgICAgIHJldHVybiByZ2IoZDNfcmdiX3BhcnNlTnVtYmVyKG0yWzBdKSwgZDNfcmdiX3BhcnNlTnVtYmVyKG0yWzFdKSwgZDNfcmdiX3BhcnNlTnVtYmVyKG0yWzJdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbG9yID0gZDNfcmdiX25hbWVzLmdldChmb3JtYXQpKSB7XG4gICAgICByZXR1cm4gcmdiKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuICAgIH1cbiAgICBpZiAoZm9ybWF0ICE9IG51bGwgJiYgZm9ybWF0LmNoYXJBdCgwKSA9PT0gXCIjXCIgJiYgIWlzTmFOKGNvbG9yID0gcGFyc2VJbnQoZm9ybWF0LnNsaWNlKDEpLCAxNikpKSB7XG4gICAgICBpZiAoZm9ybWF0Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgICByID0gKGNvbG9yICYgMzg0MCkgPj4gNDtcbiAgICAgICAgciA9IHIgPj4gNCB8IHI7XG4gICAgICAgIGcgPSBjb2xvciAmIDI0MDtcbiAgICAgICAgZyA9IGcgPj4gNCB8IGc7XG4gICAgICAgIGIgPSBjb2xvciAmIDE1O1xuICAgICAgICBiID0gYiA8PCA0IHwgYjtcbiAgICAgIH0gZWxzZSBpZiAoZm9ybWF0Lmxlbmd0aCA9PT0gNykge1xuICAgICAgICByID0gKGNvbG9yICYgMTY3MTE2ODApID4+IDE2O1xuICAgICAgICBnID0gKGNvbG9yICYgNjUyODApID4+IDg7XG4gICAgICAgIGIgPSBjb2xvciAmIDI1NTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJnYihyLCBnLCBiKTtcbiAgfVxuICBmdW5jdGlvbiBkM19yZ2JfaHNsKHIsIGcsIGIpIHtcbiAgICB2YXIgbWluID0gTWF0aC5taW4ociAvPSAyNTUsIGcgLz0gMjU1LCBiIC89IDI1NSksIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLCBkID0gbWF4IC0gbWluLCBoLCBzLCBsID0gKG1heCArIG1pbikgLyAyO1xuICAgIGlmIChkKSB7XG4gICAgICBzID0gbCA8IC41ID8gZCAvIChtYXggKyBtaW4pIDogZCAvICgyIC0gbWF4IC0gbWluKTtcbiAgICAgIGlmIChyID09IG1heCkgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOyBlbHNlIGlmIChnID09IG1heCkgaCA9IChiIC0gcikgLyBkICsgMjsgZWxzZSBoID0gKHIgLSBnKSAvIGQgKyA0O1xuICAgICAgaCAqPSA2MDtcbiAgICB9IGVsc2Uge1xuICAgICAgaCA9IE5hTjtcbiAgICAgIHMgPSBsID4gMCAmJiBsIDwgMSA/IDAgOiBoO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGQzX2hzbChoLCBzLCBsKTtcbiAgfVxuICBmdW5jdGlvbiBkM19yZ2JfbGFiKHIsIGcsIGIpIHtcbiAgICByID0gZDNfcmdiX3h5eihyKTtcbiAgICBnID0gZDNfcmdiX3h5eihnKTtcbiAgICBiID0gZDNfcmdiX3h5eihiKTtcbiAgICB2YXIgeCA9IGQzX3h5el9sYWIoKC40MTI0NTY0ICogciArIC4zNTc1NzYxICogZyArIC4xODA0Mzc1ICogYikgLyBkM19sYWJfWCksIHkgPSBkM194eXpfbGFiKCguMjEyNjcyOSAqIHIgKyAuNzE1MTUyMiAqIGcgKyAuMDcyMTc1ICogYikgLyBkM19sYWJfWSksIHogPSBkM194eXpfbGFiKCguMDE5MzMzOSAqIHIgKyAuMTE5MTkyICogZyArIC45NTAzMDQxICogYikgLyBkM19sYWJfWik7XG4gICAgcmV0dXJuIGQzX2xhYigxMTYgKiB5IC0gMTYsIDUwMCAqICh4IC0geSksIDIwMCAqICh5IC0geikpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3JnYl94eXoocikge1xuICAgIHJldHVybiAociAvPSAyNTUpIDw9IC4wNDA0NSA/IHIgLyAxMi45MiA6IE1hdGgucG93KChyICsgLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgfVxuICBmdW5jdGlvbiBkM19yZ2JfcGFyc2VOdW1iZXIoYykge1xuICAgIHZhciBmID0gcGFyc2VGbG9hdChjKTtcbiAgICByZXR1cm4gYy5jaGFyQXQoYy5sZW5ndGggLSAxKSA9PT0gXCIlXCIgPyBNYXRoLnJvdW5kKGYgKiAyLjU1KSA6IGY7XG4gIH1cbiAgdmFyIGQzX3JnYl9uYW1lcyA9IGQzLm1hcCh7XG4gICAgYWxpY2VibHVlOiAxNTc5MjM4MyxcbiAgICBhbnRpcXVld2hpdGU6IDE2NDQ0Mzc1LFxuICAgIGFxdWE6IDY1NTM1LFxuICAgIGFxdWFtYXJpbmU6IDgzODg1NjQsXG4gICAgYXp1cmU6IDE1Nzk0MTc1LFxuICAgIGJlaWdlOiAxNjExOTI2MCxcbiAgICBiaXNxdWU6IDE2NzcwMjQ0LFxuICAgIGJsYWNrOiAwLFxuICAgIGJsYW5jaGVkYWxtb25kOiAxNjc3MjA0NSxcbiAgICBibHVlOiAyNTUsXG4gICAgYmx1ZXZpb2xldDogOTA1NTIwMixcbiAgICBicm93bjogMTA4MjQyMzQsXG4gICAgYnVybHl3b29kOiAxNDU5NjIzMSxcbiAgICBjYWRldGJsdWU6IDYyNjY1MjgsXG4gICAgY2hhcnRyZXVzZTogODM4ODM1MixcbiAgICBjaG9jb2xhdGU6IDEzNzg5NDcwLFxuICAgIGNvcmFsOiAxNjc0NDI3MixcbiAgICBjb3JuZmxvd2VyYmx1ZTogNjU5MTk4MSxcbiAgICBjb3Juc2lsazogMTY3NzUzODgsXG4gICAgY3JpbXNvbjogMTQ0MjMxMDAsXG4gICAgY3lhbjogNjU1MzUsXG4gICAgZGFya2JsdWU6IDEzOSxcbiAgICBkYXJrY3lhbjogMzU3MjMsXG4gICAgZGFya2dvbGRlbnJvZDogMTIwOTI5MzksXG4gICAgZGFya2dyYXk6IDExMTE5MDE3LFxuICAgIGRhcmtncmVlbjogMjU2MDAsXG4gICAgZGFya2dyZXk6IDExMTE5MDE3LFxuICAgIGRhcmtraGFraTogMTI0MzMyNTksXG4gICAgZGFya21hZ2VudGE6IDkxMDk2NDMsXG4gICAgZGFya29saXZlZ3JlZW46IDU1OTc5OTksXG4gICAgZGFya29yYW5nZTogMTY3NDc1MjAsXG4gICAgZGFya29yY2hpZDogMTAwNDAwMTIsXG4gICAgZGFya3JlZDogOTEwOTUwNCxcbiAgICBkYXJrc2FsbW9uOiAxNTMwODQxMCxcbiAgICBkYXJrc2VhZ3JlZW46IDk0MTk5MTksXG4gICAgZGFya3NsYXRlYmx1ZTogNDczNDM0NyxcbiAgICBkYXJrc2xhdGVncmF5OiAzMTAwNDk1LFxuICAgIGRhcmtzbGF0ZWdyZXk6IDMxMDA0OTUsXG4gICAgZGFya3R1cnF1b2lzZTogNTI5NDUsXG4gICAgZGFya3Zpb2xldDogOTY5OTUzOSxcbiAgICBkZWVwcGluazogMTY3MTY5NDcsXG4gICAgZGVlcHNreWJsdWU6IDQ5MTUxLFxuICAgIGRpbWdyYXk6IDY5MDgyNjUsXG4gICAgZGltZ3JleTogNjkwODI2NSxcbiAgICBkb2RnZXJibHVlOiAyMDAzMTk5LFxuICAgIGZpcmVicmljazogMTE2NzQxNDYsXG4gICAgZmxvcmFsd2hpdGU6IDE2Nzc1OTIwLFxuICAgIGZvcmVzdGdyZWVuOiAyMjYzODQyLFxuICAgIGZ1Y2hzaWE6IDE2NzExOTM1LFxuICAgIGdhaW5zYm9ybzogMTQ0NzQ0NjAsXG4gICAgZ2hvc3R3aGl0ZTogMTYzMTY2NzEsXG4gICAgZ29sZDogMTY3NjY3MjAsXG4gICAgZ29sZGVucm9kOiAxNDMyOTEyMCxcbiAgICBncmF5OiA4NDIxNTA0LFxuICAgIGdyZWVuOiAzMjc2OCxcbiAgICBncmVlbnllbGxvdzogMTE0MDMwNTUsXG4gICAgZ3JleTogODQyMTUwNCxcbiAgICBob25leWRldzogMTU3OTQxNjAsXG4gICAgaG90cGluazogMTY3Mzg3NDAsXG4gICAgaW5kaWFucmVkOiAxMzQ1ODUyNCxcbiAgICBpbmRpZ286IDQ5MTUzMzAsXG4gICAgaXZvcnk6IDE2Nzc3MjAwLFxuICAgIGtoYWtpOiAxNTc4NzY2MCxcbiAgICBsYXZlbmRlcjogMTUxMzI0MTAsXG4gICAgbGF2ZW5kZXJibHVzaDogMTY3NzMzNjUsXG4gICAgbGF3bmdyZWVuOiA4MTkwOTc2LFxuICAgIGxlbW9uY2hpZmZvbjogMTY3NzU4ODUsXG4gICAgbGlnaHRibHVlOiAxMTM5MzI1NCxcbiAgICBsaWdodGNvcmFsOiAxNTc2MTUzNixcbiAgICBsaWdodGN5YW46IDE0NzQ1NTk5LFxuICAgIGxpZ2h0Z29sZGVucm9keWVsbG93OiAxNjQ0ODIxMCxcbiAgICBsaWdodGdyYXk6IDEzODgyMzIzLFxuICAgIGxpZ2h0Z3JlZW46IDk0OTgyNTYsXG4gICAgbGlnaHRncmV5OiAxMzg4MjMyMyxcbiAgICBsaWdodHBpbms6IDE2NzU4NDY1LFxuICAgIGxpZ2h0c2FsbW9uOiAxNjc1Mjc2MixcbiAgICBsaWdodHNlYWdyZWVuOiAyMTQyODkwLFxuICAgIGxpZ2h0c2t5Ymx1ZTogODkwMDM0NixcbiAgICBsaWdodHNsYXRlZ3JheTogNzgzMzc1MyxcbiAgICBsaWdodHNsYXRlZ3JleTogNzgzMzc1MyxcbiAgICBsaWdodHN0ZWVsYmx1ZTogMTE1ODQ3MzQsXG4gICAgbGlnaHR5ZWxsb3c6IDE2Nzc3MTg0LFxuICAgIGxpbWU6IDY1MjgwLFxuICAgIGxpbWVncmVlbjogMzMyOTMzMCxcbiAgICBsaW5lbjogMTY0NDU2NzAsXG4gICAgbWFnZW50YTogMTY3MTE5MzUsXG4gICAgbWFyb29uOiA4Mzg4NjA4LFxuICAgIG1lZGl1bWFxdWFtYXJpbmU6IDY3MzczMjIsXG4gICAgbWVkaXVtYmx1ZTogMjA1LFxuICAgIG1lZGl1bW9yY2hpZDogMTIyMTE2NjcsXG4gICAgbWVkaXVtcHVycGxlOiA5NjYyNjgzLFxuICAgIG1lZGl1bXNlYWdyZWVuOiAzOTc4MDk3LFxuICAgIG1lZGl1bXNsYXRlYmx1ZTogODA4Nzc5MCxcbiAgICBtZWRpdW1zcHJpbmdncmVlbjogNjQxNTQsXG4gICAgbWVkaXVtdHVycXVvaXNlOiA0NzcyMzAwLFxuICAgIG1lZGl1bXZpb2xldHJlZDogMTMwNDcxNzMsXG4gICAgbWlkbmlnaHRibHVlOiAxNjQ0OTEyLFxuICAgIG1pbnRjcmVhbTogMTYxMjE4NTAsXG4gICAgbWlzdHlyb3NlOiAxNjc3MDI3MyxcbiAgICBtb2NjYXNpbjogMTY3NzAyMjksXG4gICAgbmF2YWpvd2hpdGU6IDE2NzY4Njg1LFxuICAgIG5hdnk6IDEyOCxcbiAgICBvbGRsYWNlOiAxNjY0MzU1OCxcbiAgICBvbGl2ZTogODQyMTM3NixcbiAgICBvbGl2ZWRyYWI6IDcwNDg3MzksXG4gICAgb3JhbmdlOiAxNjc1MzkyMCxcbiAgICBvcmFuZ2VyZWQ6IDE2NzI5MzQ0LFxuICAgIG9yY2hpZDogMTQzMTU3MzQsXG4gICAgcGFsZWdvbGRlbnJvZDogMTU2NTcxMzAsXG4gICAgcGFsZWdyZWVuOiAxMDAyNTg4MCxcbiAgICBwYWxldHVycXVvaXNlOiAxMTUyOTk2NixcbiAgICBwYWxldmlvbGV0cmVkOiAxNDM4MTIwMyxcbiAgICBwYXBheWF3aGlwOiAxNjc3MzA3NyxcbiAgICBwZWFjaHB1ZmY6IDE2NzY3NjczLFxuICAgIHBlcnU6IDEzNDY4OTkxLFxuICAgIHBpbms6IDE2NzYxMDM1LFxuICAgIHBsdW06IDE0NTI0NjM3LFxuICAgIHBvd2RlcmJsdWU6IDExNTkxOTEwLFxuICAgIHB1cnBsZTogODM4ODczNixcbiAgICByZWJlY2NhcHVycGxlOiA2Njk3ODgxLFxuICAgIHJlZDogMTY3MTE2ODAsXG4gICAgcm9zeWJyb3duOiAxMjM1NzUxOSxcbiAgICByb3lhbGJsdWU6IDQyODY5NDUsXG4gICAgc2FkZGxlYnJvd246IDkxMjcxODcsXG4gICAgc2FsbW9uOiAxNjQxNjg4MixcbiAgICBzYW5keWJyb3duOiAxNjAzMjg2NCxcbiAgICBzZWFncmVlbjogMzA1MDMyNyxcbiAgICBzZWFzaGVsbDogMTY3NzQ2MzgsXG4gICAgc2llbm5hOiAxMDUwNjc5NyxcbiAgICBzaWx2ZXI6IDEyNjMyMjU2LFxuICAgIHNreWJsdWU6IDg5MDAzMzEsXG4gICAgc2xhdGVibHVlOiA2OTcwMDYxLFxuICAgIHNsYXRlZ3JheTogNzM3Mjk0NCxcbiAgICBzbGF0ZWdyZXk6IDczNzI5NDQsXG4gICAgc25vdzogMTY3NzU5MzAsXG4gICAgc3ByaW5nZ3JlZW46IDY1NDA3LFxuICAgIHN0ZWVsYmx1ZTogNDYyMDk4MCxcbiAgICB0YW46IDEzODA4NzgwLFxuICAgIHRlYWw6IDMyODk2LFxuICAgIHRoaXN0bGU6IDE0MjA0ODg4LFxuICAgIHRvbWF0bzogMTY3MzcwOTUsXG4gICAgdHVycXVvaXNlOiA0MjUxODU2LFxuICAgIHZpb2xldDogMTU2MzEwODYsXG4gICAgd2hlYXQ6IDE2MTEzMzMxLFxuICAgIHdoaXRlOiAxNjc3NzIxNSxcbiAgICB3aGl0ZXNtb2tlOiAxNjExOTI4NSxcbiAgICB5ZWxsb3c6IDE2Nzc2OTYwLFxuICAgIHllbGxvd2dyZWVuOiAxMDE0NTA3NFxuICB9KTtcbiAgZDNfcmdiX25hbWVzLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIGQzX3JnYl9uYW1lcy5zZXQoa2V5LCBkM19yZ2JOdW1iZXIodmFsdWUpKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGQzX2Z1bmN0b3Iodikge1xuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiID8gdiA6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfTtcbiAgfVxuICBkMy5mdW5jdG9yID0gZDNfZnVuY3RvcjtcbiAgZDMueGhyID0gZDNfeGhyVHlwZShkM19pZGVudGl0eSk7XG4gIGZ1bmN0aW9uIGQzX3hoclR5cGUocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odXJsLCBtaW1lVHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBtaW1lVHlwZSA9PT0gXCJmdW5jdGlvblwiKSBjYWxsYmFjayA9IG1pbWVUeXBlLCBcbiAgICAgIG1pbWVUeXBlID0gbnVsbDtcbiAgICAgIHJldHVybiBkM194aHIodXJsLCBtaW1lVHlwZSwgcmVzcG9uc2UsIGNhbGxiYWNrKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX3hocih1cmwsIG1pbWVUeXBlLCByZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgeGhyID0ge30sIGRpc3BhdGNoID0gZDMuZGlzcGF0Y2goXCJiZWZvcmVzZW5kXCIsIFwicHJvZ3Jlc3NcIiwgXCJsb2FkXCIsIFwiZXJyb3JcIiksIGhlYWRlcnMgPSB7fSwgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLCByZXNwb25zZVR5cGUgPSBudWxsO1xuICAgIGlmICh0aGlzLlhEb21haW5SZXF1ZXN0ICYmICEoXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiByZXF1ZXN0KSAmJiAvXihodHRwKHMpPzopP1xcL1xcLy8udGVzdCh1cmwpKSByZXF1ZXN0ID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG4gICAgXCJvbmxvYWRcIiBpbiByZXF1ZXN0ID8gcmVxdWVzdC5vbmxvYWQgPSByZXF1ZXN0Lm9uZXJyb3IgPSByZXNwb25kIDogcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJlcXVlc3QucmVhZHlTdGF0ZSA+IDMgJiYgcmVzcG9uZCgpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcmVzcG9uZCgpIHtcbiAgICAgIHZhciBzdGF0dXMgPSByZXF1ZXN0LnN0YXR1cywgcmVzdWx0O1xuICAgICAgaWYgKCFzdGF0dXMgJiYgZDNfeGhySGFzUmVzcG9uc2UocmVxdWVzdCkgfHwgc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXN1bHQgPSByZXNwb25zZS5jYWxsKHhociwgcmVxdWVzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBkaXNwYXRjaC5lcnJvci5jYWxsKHhociwgZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BhdGNoLmxvYWQuY2FsbCh4aHIsIHJlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwYXRjaC5lcnJvci5jYWxsKHhociwgcmVxdWVzdCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgbyA9IGQzLmV2ZW50O1xuICAgICAgZDMuZXZlbnQgPSBldmVudDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpc3BhdGNoLnByb2dyZXNzLmNhbGwoeGhyLCByZXF1ZXN0KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGQzLmV2ZW50ID0gbztcbiAgICAgIH1cbiAgICB9O1xuICAgIHhoci5oZWFkZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgbmFtZSA9IChuYW1lICsgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIGhlYWRlcnNbbmFtZV07XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkgZGVsZXRlIGhlYWRlcnNbbmFtZV07IGVsc2UgaGVhZGVyc1tuYW1lXSA9IHZhbHVlICsgXCJcIjtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfTtcbiAgICB4aHIubWltZVR5cGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbWltZVR5cGU7XG4gICAgICBtaW1lVHlwZSA9IHZhbHVlID09IG51bGwgPyBudWxsIDogdmFsdWUgKyBcIlwiO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9O1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcmVzcG9uc2VUeXBlO1xuICAgICAgcmVzcG9uc2VUeXBlID0gdmFsdWU7XG4gICAgICByZXR1cm4geGhyO1xuICAgIH07XG4gICAgeGhyLnJlc3BvbnNlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJlc3BvbnNlID0gdmFsdWU7XG4gICAgICByZXR1cm4geGhyO1xuICAgIH07XG4gICAgWyBcImdldFwiLCBcInBvc3RcIiBdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICB4aHJbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4geGhyLnNlbmQuYXBwbHkoeGhyLCBbIG1ldGhvZCBdLmNvbmNhdChkM19hcnJheShhcmd1bWVudHMpKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHhoci5zZW5kID0gZnVuY3Rpb24obWV0aG9kLCBkYXRhLCBjYWxsYmFjaykge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGRhdGEgPT09IFwiZnVuY3Rpb25cIikgY2FsbGJhY2sgPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgICAgIHJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICBpZiAobWltZVR5cGUgIT0gbnVsbCAmJiAhKFwiYWNjZXB0XCIgaW4gaGVhZGVycykpIGhlYWRlcnNbXCJhY2NlcHRcIl0gPSBtaW1lVHlwZSArIFwiLCovKlwiO1xuICAgICAgaWYgKHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcikgZm9yICh2YXIgbmFtZSBpbiBoZWFkZXJzKSByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIobmFtZSwgaGVhZGVyc1tuYW1lXSk7XG4gICAgICBpZiAobWltZVR5cGUgIT0gbnVsbCAmJiByZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUpIHJlcXVlc3Qub3ZlcnJpZGVNaW1lVHlwZShtaW1lVHlwZSk7XG4gICAgICBpZiAocmVzcG9uc2VUeXBlICE9IG51bGwpIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHhoci5vbihcImVycm9yXCIsIGNhbGxiYWNrKS5vbihcImxvYWRcIiwgZnVuY3Rpb24ocmVxdWVzdCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXF1ZXN0KTtcbiAgICAgIH0pO1xuICAgICAgZGlzcGF0Y2guYmVmb3Jlc2VuZC5jYWxsKHhociwgcmVxdWVzdCk7XG4gICAgICByZXF1ZXN0LnNlbmQoZGF0YSA9PSBudWxsID8gbnVsbCA6IGRhdGEpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9O1xuICAgIHhoci5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9O1xuICAgIGQzLnJlYmluZCh4aHIsIGRpc3BhdGNoLCBcIm9uXCIpO1xuICAgIHJldHVybiBjYWxsYmFjayA9PSBudWxsID8geGhyIDogeGhyLmdldChkM194aHJfZml4Q2FsbGJhY2soY2FsbGJhY2spKTtcbiAgfVxuICBmdW5jdGlvbiBkM194aHJfZml4Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICByZXR1cm4gY2FsbGJhY2subGVuZ3RoID09PSAxID8gZnVuY3Rpb24oZXJyb3IsIHJlcXVlc3QpIHtcbiAgICAgIGNhbGxiYWNrKGVycm9yID09IG51bGwgPyByZXF1ZXN0IDogbnVsbCk7XG4gICAgfSA6IGNhbGxiYWNrO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3hockhhc1Jlc3BvbnNlKHJlcXVlc3QpIHtcbiAgICB2YXIgdHlwZSA9IHJlcXVlc3QucmVzcG9uc2VUeXBlO1xuICAgIHJldHVybiB0eXBlICYmIHR5cGUgIT09IFwidGV4dFwiID8gcmVxdWVzdC5yZXNwb25zZSA6IHJlcXVlc3QucmVzcG9uc2VUZXh0O1xuICB9XG4gIGQzLmRzdiA9IGZ1bmN0aW9uKGRlbGltaXRlciwgbWltZVR5cGUpIHtcbiAgICB2YXIgcmVGb3JtYXQgPSBuZXcgUmVnRXhwKCdbXCInICsgZGVsaW1pdGVyICsgXCJcXG5dXCIpLCBkZWxpbWl0ZXJDb2RlID0gZGVsaW1pdGVyLmNoYXJDb2RlQXQoMCk7XG4gICAgZnVuY3Rpb24gZHN2KHVybCwgcm93LCBjYWxsYmFjaykge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSBjYWxsYmFjayA9IHJvdywgcm93ID0gbnVsbDtcbiAgICAgIHZhciB4aHIgPSBkM194aHIodXJsLCBtaW1lVHlwZSwgcm93ID09IG51bGwgPyByZXNwb25zZSA6IHR5cGVkUmVzcG9uc2Uocm93KSwgY2FsbGJhY2spO1xuICAgICAgeGhyLnJvdyA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB4aHIucmVzcG9uc2UoKHJvdyA9IF8pID09IG51bGwgPyByZXNwb25zZSA6IHR5cGVkUmVzcG9uc2UoXykpIDogcm93O1xuICAgICAgfTtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc3BvbnNlKHJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBkc3YucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0eXBlZFJlc3BvbnNlKGYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiBkc3YucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQsIGYpO1xuICAgICAgfTtcbiAgICB9XG4gICAgZHN2LnBhcnNlID0gZnVuY3Rpb24odGV4dCwgZikge1xuICAgICAgdmFyIG87XG4gICAgICByZXR1cm4gZHN2LnBhcnNlUm93cyh0ZXh0LCBmdW5jdGlvbihyb3csIGkpIHtcbiAgICAgICAgaWYgKG8pIHJldHVybiBvKHJvdywgaSAtIDEpO1xuICAgICAgICB2YXIgYSA9IG5ldyBGdW5jdGlvbihcImRcIiwgXCJyZXR1cm4ge1wiICsgcm93Lm1hcChmdW5jdGlvbihuYW1lLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG5hbWUpICsgXCI6IGRbXCIgKyBpICsgXCJdXCI7XG4gICAgICAgIH0pLmpvaW4oXCIsXCIpICsgXCJ9XCIpO1xuICAgICAgICBvID0gZiA/IGZ1bmN0aW9uKHJvdywgaSkge1xuICAgICAgICAgIHJldHVybiBmKGEocm93KSwgaSk7XG4gICAgICAgIH0gOiBhO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBkc3YucGFyc2VSb3dzID0gZnVuY3Rpb24odGV4dCwgZikge1xuICAgICAgdmFyIEVPTCA9IHt9LCBFT0YgPSB7fSwgcm93cyA9IFtdLCBOID0gdGV4dC5sZW5ndGgsIEkgPSAwLCBuID0gMCwgdCwgZW9sO1xuICAgICAgZnVuY3Rpb24gdG9rZW4oKSB7XG4gICAgICAgIGlmIChJID49IE4pIHJldHVybiBFT0Y7XG4gICAgICAgIGlmIChlb2wpIHJldHVybiBlb2wgPSBmYWxzZSwgRU9MO1xuICAgICAgICB2YXIgaiA9IEk7XG4gICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoaikgPT09IDM0KSB7XG4gICAgICAgICAgdmFyIGkgPSBqO1xuICAgICAgICAgIHdoaWxlIChpKysgPCBOKSB7XG4gICAgICAgICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KGkpID09PSAzNCkge1xuICAgICAgICAgICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMzQpIGJyZWFrO1xuICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIEkgPSBpICsgMjtcbiAgICAgICAgICB2YXIgYyA9IHRleHQuY2hhckNvZGVBdChpICsgMSk7XG4gICAgICAgICAgaWYgKGMgPT09IDEzKSB7XG4gICAgICAgICAgICBlb2wgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChpICsgMikgPT09IDEwKSArK0k7XG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAxMCkge1xuICAgICAgICAgICAgZW9sID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoaiArIDEsIGkpLnJlcGxhY2UoL1wiXCIvZywgJ1wiJyk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKEkgPCBOKSB7XG4gICAgICAgICAgdmFyIGMgPSB0ZXh0LmNoYXJDb2RlQXQoSSsrKSwgayA9IDE7XG4gICAgICAgICAgaWYgKGMgPT09IDEwKSBlb2wgPSB0cnVlOyBlbHNlIGlmIChjID09PSAxMykge1xuICAgICAgICAgICAgZW9sID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IDEwKSArK0ksICsraztcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgIT09IGRlbGltaXRlckNvZGUpIGNvbnRpbnVlO1xuICAgICAgICAgIHJldHVybiB0ZXh0LnNsaWNlKGosIEkgLSBrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgodCA9IHRva2VuKCkpICE9PSBFT0YpIHtcbiAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgd2hpbGUgKHQgIT09IEVPTCAmJiB0ICE9PSBFT0YpIHtcbiAgICAgICAgICBhLnB1c2godCk7XG4gICAgICAgICAgdCA9IHRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGYgJiYgKGEgPSBmKGEsIG4rKykpID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICByb3dzLnB1c2goYSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcm93cztcbiAgICB9O1xuICAgIGRzdi5mb3JtYXQgPSBmdW5jdGlvbihyb3dzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyb3dzWzBdKSkgcmV0dXJuIGRzdi5mb3JtYXRSb3dzKHJvd3MpO1xuICAgICAgdmFyIGZpZWxkU2V0ID0gbmV3IGQzX1NldCgpLCBmaWVsZHMgPSBbXTtcbiAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgZm9yICh2YXIgZmllbGQgaW4gcm93KSB7XG4gICAgICAgICAgaWYgKCFmaWVsZFNldC5oYXMoZmllbGQpKSB7XG4gICAgICAgICAgICBmaWVsZHMucHVzaChmaWVsZFNldC5hZGQoZmllbGQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFsgZmllbGRzLm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpIF0uY29uY2F0KHJvd3MubWFwKGZ1bmN0aW9uKHJvdykge1xuICAgICAgICByZXR1cm4gZmllbGRzLm1hcChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICAgIHJldHVybiBmb3JtYXRWYWx1ZShyb3dbZmllbGRdKTtcbiAgICAgICAgfSkuam9pbihkZWxpbWl0ZXIpO1xuICAgICAgfSkpLmpvaW4oXCJcXG5cIik7XG4gICAgfTtcbiAgICBkc3YuZm9ybWF0Um93cyA9IGZ1bmN0aW9uKHJvd3MpIHtcbiAgICAgIHJldHVybiByb3dzLm1hcChmb3JtYXRSb3cpLmpvaW4oXCJcXG5cIik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JtYXRSb3cocm93KSB7XG4gICAgICByZXR1cm4gcm93Lm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh0ZXh0KSB7XG4gICAgICByZXR1cm4gcmVGb3JtYXQudGVzdCh0ZXh0KSA/ICdcIicgKyB0ZXh0LnJlcGxhY2UoL1xcXCIvZywgJ1wiXCInKSArICdcIicgOiB0ZXh0O1xuICAgIH1cbiAgICByZXR1cm4gZHN2O1xuICB9O1xuICBkMy5jc3YgPSBkMy5kc3YoXCIsXCIsIFwidGV4dC9jc3ZcIik7XG4gIGQzLnRzdiA9IGQzLmRzdihcIlx0XCIsIFwidGV4dC90YWItc2VwYXJhdGVkLXZhbHVlc1wiKTtcbiAgdmFyIGQzX3RpbWVyX3F1ZXVlSGVhZCwgZDNfdGltZXJfcXVldWVUYWlsLCBkM190aW1lcl9pbnRlcnZhbCwgZDNfdGltZXJfdGltZW91dCwgZDNfdGltZXJfZnJhbWUgPSB0aGlzW2QzX3ZlbmRvclN5bWJvbCh0aGlzLCBcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiKV0gfHwgZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNyk7XG4gIH07XG4gIGQzLnRpbWVyID0gZnVuY3Rpb24oKSB7XG4gICAgZDNfdGltZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfdGltZXIoY2FsbGJhY2ssIGRlbGF5LCB0aGVuKSB7XG4gICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChuIDwgMikgZGVsYXkgPSAwO1xuICAgIGlmIChuIDwgMykgdGhlbiA9IERhdGUubm93KCk7XG4gICAgdmFyIHRpbWUgPSB0aGVuICsgZGVsYXksIHRpbWVyID0ge1xuICAgICAgYzogY2FsbGJhY2ssXG4gICAgICB0OiB0aW1lLFxuICAgICAgbjogbnVsbFxuICAgIH07XG4gICAgaWYgKGQzX3RpbWVyX3F1ZXVlVGFpbCkgZDNfdGltZXJfcXVldWVUYWlsLm4gPSB0aW1lcjsgZWxzZSBkM190aW1lcl9xdWV1ZUhlYWQgPSB0aW1lcjtcbiAgICBkM190aW1lcl9xdWV1ZVRhaWwgPSB0aW1lcjtcbiAgICBpZiAoIWQzX3RpbWVyX2ludGVydmFsKSB7XG4gICAgICBkM190aW1lcl90aW1lb3V0ID0gY2xlYXJUaW1lb3V0KGQzX3RpbWVyX3RpbWVvdXQpO1xuICAgICAgZDNfdGltZXJfaW50ZXJ2YWwgPSAxO1xuICAgICAgZDNfdGltZXJfZnJhbWUoZDNfdGltZXJfc3RlcCk7XG4gICAgfVxuICAgIHJldHVybiB0aW1lcjtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lcl9zdGVwKCkge1xuICAgIHZhciBub3cgPSBkM190aW1lcl9tYXJrKCksIGRlbGF5ID0gZDNfdGltZXJfc3dlZXAoKSAtIG5vdztcbiAgICBpZiAoZGVsYXkgPiAyNCkge1xuICAgICAgaWYgKGlzRmluaXRlKGRlbGF5KSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZDNfdGltZXJfdGltZW91dCk7XG4gICAgICAgIGQzX3RpbWVyX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGQzX3RpbWVyX3N0ZXAsIGRlbGF5KTtcbiAgICAgIH1cbiAgICAgIGQzX3RpbWVyX2ludGVydmFsID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZDNfdGltZXJfaW50ZXJ2YWwgPSAxO1xuICAgICAgZDNfdGltZXJfZnJhbWUoZDNfdGltZXJfc3RlcCk7XG4gICAgfVxuICB9XG4gIGQzLnRpbWVyLmZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgZDNfdGltZXJfbWFyaygpO1xuICAgIGQzX3RpbWVyX3N3ZWVwKCk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3RpbWVyX21hcmsoKSB7XG4gICAgdmFyIG5vdyA9IERhdGUubm93KCksIHRpbWVyID0gZDNfdGltZXJfcXVldWVIZWFkO1xuICAgIHdoaWxlICh0aW1lcikge1xuICAgICAgaWYgKG5vdyA+PSB0aW1lci50ICYmIHRpbWVyLmMobm93IC0gdGltZXIudCkpIHRpbWVyLmMgPSBudWxsO1xuICAgICAgdGltZXIgPSB0aW1lci5uO1xuICAgIH1cbiAgICByZXR1cm4gbm93O1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVyX3N3ZWVwKCkge1xuICAgIHZhciB0MCwgdDEgPSBkM190aW1lcl9xdWV1ZUhlYWQsIHRpbWUgPSBJbmZpbml0eTtcbiAgICB3aGlsZSAodDEpIHtcbiAgICAgIGlmICh0MS5jKSB7XG4gICAgICAgIGlmICh0MS50IDwgdGltZSkgdGltZSA9IHQxLnQ7XG4gICAgICAgIHQxID0gKHQwID0gdDEpLm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0MSA9IHQwID8gdDAubiA9IHQxLm4gOiBkM190aW1lcl9xdWV1ZUhlYWQgPSB0MS5uO1xuICAgICAgfVxuICAgIH1cbiAgICBkM190aW1lcl9xdWV1ZVRhaWwgPSB0MDtcbiAgICByZXR1cm4gdGltZTtcbiAgfVxuICBmdW5jdGlvbiBkM19mb3JtYXRfcHJlY2lzaW9uKHgsIHApIHtcbiAgICByZXR1cm4gcCAtICh4ID8gTWF0aC5jZWlsKE1hdGgubG9nKHgpIC8gTWF0aC5MTjEwKSA6IDEpO1xuICB9XG4gIGQzLnJvdW5kID0gZnVuY3Rpb24oeCwgbikge1xuICAgIHJldHVybiBuID8gTWF0aC5yb3VuZCh4ICogKG4gPSBNYXRoLnBvdygxMCwgbikpKSAvIG4gOiBNYXRoLnJvdW5kKHgpO1xuICB9O1xuICB2YXIgZDNfZm9ybWF0UHJlZml4ZXMgPSBbIFwieVwiLCBcInpcIiwgXCJhXCIsIFwiZlwiLCBcInBcIiwgXCJuXCIsIFwiwrVcIiwgXCJtXCIsIFwiXCIsIFwia1wiLCBcIk1cIiwgXCJHXCIsIFwiVFwiLCBcIlBcIiwgXCJFXCIsIFwiWlwiLCBcIllcIiBdLm1hcChkM19mb3JtYXRQcmVmaXgpO1xuICBkMy5mb3JtYXRQcmVmaXggPSBmdW5jdGlvbih2YWx1ZSwgcHJlY2lzaW9uKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIGlmICh2YWx1ZSA9ICt2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgKj0gLTE7XG4gICAgICBpZiAocHJlY2lzaW9uKSB2YWx1ZSA9IGQzLnJvdW5kKHZhbHVlLCBkM19mb3JtYXRfcHJlY2lzaW9uKHZhbHVlLCBwcmVjaXNpb24pKTtcbiAgICAgIGkgPSAxICsgTWF0aC5mbG9vcigxZS0xMiArIE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4xMCk7XG4gICAgICBpID0gTWF0aC5tYXgoLTI0LCBNYXRoLm1pbigyNCwgTWF0aC5mbG9vcigoaSAtIDEpIC8gMykgKiAzKSk7XG4gICAgfVxuICAgIHJldHVybiBkM19mb3JtYXRQcmVmaXhlc1s4ICsgaSAvIDNdO1xuICB9O1xuICBmdW5jdGlvbiBkM19mb3JtYXRQcmVmaXgoZCwgaSkge1xuICAgIHZhciBrID0gTWF0aC5wb3coMTAsIGFicyg4IC0gaSkgKiAzKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2NhbGU6IGkgPiA4ID8gZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZCAvIGs7XG4gICAgICB9IDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZCAqIGs7XG4gICAgICB9LFxuICAgICAgc3ltYm9sOiBkXG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19sb2NhbGVfbnVtYmVyRm9ybWF0KGxvY2FsZSkge1xuICAgIHZhciBsb2NhbGVfZGVjaW1hbCA9IGxvY2FsZS5kZWNpbWFsLCBsb2NhbGVfdGhvdXNhbmRzID0gbG9jYWxlLnRob3VzYW5kcywgbG9jYWxlX2dyb3VwaW5nID0gbG9jYWxlLmdyb3VwaW5nLCBsb2NhbGVfY3VycmVuY3kgPSBsb2NhbGUuY3VycmVuY3ksIGZvcm1hdEdyb3VwID0gbG9jYWxlX2dyb3VwaW5nICYmIGxvY2FsZV90aG91c2FuZHMgPyBmdW5jdGlvbih2YWx1ZSwgd2lkdGgpIHtcbiAgICAgIHZhciBpID0gdmFsdWUubGVuZ3RoLCB0ID0gW10sIGogPSAwLCBnID0gbG9jYWxlX2dyb3VwaW5nWzBdLCBsZW5ndGggPSAwO1xuICAgICAgd2hpbGUgKGkgPiAwICYmIGcgPiAwKSB7XG4gICAgICAgIGlmIChsZW5ndGggKyBnICsgMSA+IHdpZHRoKSBnID0gTWF0aC5tYXgoMSwgd2lkdGggLSBsZW5ndGgpO1xuICAgICAgICB0LnB1c2godmFsdWUuc3Vic3RyaW5nKGkgLT0gZywgaSArIGcpKTtcbiAgICAgICAgaWYgKChsZW5ndGggKz0gZyArIDEpID4gd2lkdGgpIGJyZWFrO1xuICAgICAgICBnID0gbG9jYWxlX2dyb3VwaW5nW2ogPSAoaiArIDEpICUgbG9jYWxlX2dyb3VwaW5nLmxlbmd0aF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdC5yZXZlcnNlKCkuam9pbihsb2NhbGVfdGhvdXNhbmRzKTtcbiAgICB9IDogZDNfaWRlbnRpdHk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNwZWNpZmllcikge1xuICAgICAgdmFyIG1hdGNoID0gZDNfZm9ybWF0X3JlLmV4ZWMoc3BlY2lmaWVyKSwgZmlsbCA9IG1hdGNoWzFdIHx8IFwiIFwiLCBhbGlnbiA9IG1hdGNoWzJdIHx8IFwiPlwiLCBzaWduID0gbWF0Y2hbM10gfHwgXCItXCIsIHN5bWJvbCA9IG1hdGNoWzRdIHx8IFwiXCIsIHpmaWxsID0gbWF0Y2hbNV0sIHdpZHRoID0gK21hdGNoWzZdLCBjb21tYSA9IG1hdGNoWzddLCBwcmVjaXNpb24gPSBtYXRjaFs4XSwgdHlwZSA9IG1hdGNoWzldLCBzY2FsZSA9IDEsIHByZWZpeCA9IFwiXCIsIHN1ZmZpeCA9IFwiXCIsIGludGVnZXIgPSBmYWxzZSwgZXhwb25lbnQgPSB0cnVlO1xuICAgICAgaWYgKHByZWNpc2lvbikgcHJlY2lzaW9uID0gK3ByZWNpc2lvbi5zdWJzdHJpbmcoMSk7XG4gICAgICBpZiAoemZpbGwgfHwgZmlsbCA9PT0gXCIwXCIgJiYgYWxpZ24gPT09IFwiPVwiKSB7XG4gICAgICAgIHpmaWxsID0gZmlsbCA9IFwiMFwiO1xuICAgICAgICBhbGlnbiA9IFwiPVwiO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgY2FzZSBcIm5cIjpcbiAgICAgICAgY29tbWEgPSB0cnVlO1xuICAgICAgICB0eXBlID0gXCJnXCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgY2FzZSBcIiVcIjpcbiAgICAgICAgc2NhbGUgPSAxMDA7XG4gICAgICAgIHN1ZmZpeCA9IFwiJVwiO1xuICAgICAgICB0eXBlID0gXCJmXCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgY2FzZSBcInBcIjpcbiAgICAgICAgc2NhbGUgPSAxMDA7XG4gICAgICAgIHN1ZmZpeCA9IFwiJVwiO1xuICAgICAgICB0eXBlID0gXCJyXCI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgY2FzZSBcImJcIjpcbiAgICAgICBjYXNlIFwib1wiOlxuICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgaWYgKHN5bWJvbCA9PT0gXCIjXCIpIHByZWZpeCA9IFwiMFwiICsgdHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgZXhwb25lbnQgPSBmYWxzZTtcblxuICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIGludGVnZXIgPSB0cnVlO1xuICAgICAgICBwcmVjaXNpb24gPSAwO1xuICAgICAgICBicmVhaztcblxuICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIHNjYWxlID0gLTE7XG4gICAgICAgIHR5cGUgPSBcInJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3ltYm9sID09PSBcIiRcIikgcHJlZml4ID0gbG9jYWxlX2N1cnJlbmN5WzBdLCBzdWZmaXggPSBsb2NhbGVfY3VycmVuY3lbMV07XG4gICAgICBpZiAodHlwZSA9PSBcInJcIiAmJiAhcHJlY2lzaW9uKSB0eXBlID0gXCJnXCI7XG4gICAgICBpZiAocHJlY2lzaW9uICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJnXCIpIHByZWNpc2lvbiA9IE1hdGgubWF4KDEsIE1hdGgubWluKDIxLCBwcmVjaXNpb24pKTsgZWxzZSBpZiAodHlwZSA9PSBcImVcIiB8fCB0eXBlID09IFwiZlwiKSBwcmVjaXNpb24gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyMCwgcHJlY2lzaW9uKSk7XG4gICAgICB9XG4gICAgICB0eXBlID0gZDNfZm9ybWF0X3R5cGVzLmdldCh0eXBlKSB8fCBkM19mb3JtYXRfdHlwZURlZmF1bHQ7XG4gICAgICB2YXIgemNvbW1hID0gemZpbGwgJiYgY29tbWE7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGZ1bGxTdWZmaXggPSBzdWZmaXg7XG4gICAgICAgIGlmIChpbnRlZ2VyICYmIHZhbHVlICUgMSkgcmV0dXJuIFwiXCI7XG4gICAgICAgIHZhciBuZWdhdGl2ZSA9IHZhbHVlIDwgMCB8fCB2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwID8gKHZhbHVlID0gLXZhbHVlLCBcIi1cIikgOiBzaWduID09PSBcIi1cIiA/IFwiXCIgOiBzaWduO1xuICAgICAgICBpZiAoc2NhbGUgPCAwKSB7XG4gICAgICAgICAgdmFyIHVuaXQgPSBkMy5mb3JtYXRQcmVmaXgodmFsdWUsIHByZWNpc2lvbik7XG4gICAgICAgICAgdmFsdWUgPSB1bml0LnNjYWxlKHZhbHVlKTtcbiAgICAgICAgICBmdWxsU3VmZml4ID0gdW5pdC5zeW1ib2wgKyBzdWZmaXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgKj0gc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0eXBlKHZhbHVlLCBwcmVjaXNpb24pO1xuICAgICAgICB2YXIgaSA9IHZhbHVlLmxhc3RJbmRleE9mKFwiLlwiKSwgYmVmb3JlLCBhZnRlcjtcbiAgICAgICAgaWYgKGkgPCAwKSB7XG4gICAgICAgICAgdmFyIGogPSBleHBvbmVudCA/IHZhbHVlLmxhc3RJbmRleE9mKFwiZVwiKSA6IC0xO1xuICAgICAgICAgIGlmIChqIDwgMCkgYmVmb3JlID0gdmFsdWUsIGFmdGVyID0gXCJcIjsgZWxzZSBiZWZvcmUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaiksIGFmdGVyID0gdmFsdWUuc3Vic3RyaW5nKGopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJlZm9yZSA9IHZhbHVlLnN1YnN0cmluZygwLCBpKTtcbiAgICAgICAgICBhZnRlciA9IGxvY2FsZV9kZWNpbWFsICsgdmFsdWUuc3Vic3RyaW5nKGkgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXpmaWxsICYmIGNvbW1hKSBiZWZvcmUgPSBmb3JtYXRHcm91cChiZWZvcmUsIEluZmluaXR5KTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHByZWZpeC5sZW5ndGggKyBiZWZvcmUubGVuZ3RoICsgYWZ0ZXIubGVuZ3RoICsgKHpjb21tYSA/IDAgOiBuZWdhdGl2ZS5sZW5ndGgpLCBwYWRkaW5nID0gbGVuZ3RoIDwgd2lkdGggPyBuZXcgQXJyYXkobGVuZ3RoID0gd2lkdGggLSBsZW5ndGggKyAxKS5qb2luKGZpbGwpIDogXCJcIjtcbiAgICAgICAgaWYgKHpjb21tYSkgYmVmb3JlID0gZm9ybWF0R3JvdXAocGFkZGluZyArIGJlZm9yZSwgcGFkZGluZy5sZW5ndGggPyB3aWR0aCAtIGFmdGVyLmxlbmd0aCA6IEluZmluaXR5KTtcbiAgICAgICAgbmVnYXRpdmUgKz0gcHJlZml4O1xuICAgICAgICB2YWx1ZSA9IGJlZm9yZSArIGFmdGVyO1xuICAgICAgICByZXR1cm4gKGFsaWduID09PSBcIjxcIiA/IG5lZ2F0aXZlICsgdmFsdWUgKyBwYWRkaW5nIDogYWxpZ24gPT09IFwiPlwiID8gcGFkZGluZyArIG5lZ2F0aXZlICsgdmFsdWUgOiBhbGlnbiA9PT0gXCJeXCIgPyBwYWRkaW5nLnN1YnN0cmluZygwLCBsZW5ndGggPj49IDEpICsgbmVnYXRpdmUgKyB2YWx1ZSArIHBhZGRpbmcuc3Vic3RyaW5nKGxlbmd0aCkgOiBuZWdhdGl2ZSArICh6Y29tbWEgPyB2YWx1ZSA6IHBhZGRpbmcgKyB2YWx1ZSkpICsgZnVsbFN1ZmZpeDtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuICB2YXIgZDNfZm9ybWF0X3JlID0gLyg/OihbXntdKT8oWzw+PV5dKSk/KFsrXFwtIF0pPyhbJCNdKT8oMCk/KFxcZCspPygsKT8oXFwuLT9cXGQrKT8oW2EteiVdKT8vaTtcbiAgdmFyIGQzX2Zvcm1hdF90eXBlcyA9IGQzLm1hcCh7XG4gICAgYjogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHgudG9TdHJpbmcoMik7XG4gICAgfSxcbiAgICBjOiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh4KTtcbiAgICB9LFxuICAgIG86IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB4LnRvU3RyaW5nKDgpO1xuICAgIH0sXG4gICAgeDogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHgudG9TdHJpbmcoMTYpO1xuICAgIH0sXG4gICAgWDogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHgudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgfSxcbiAgICBnOiBmdW5jdGlvbih4LCBwKSB7XG4gICAgICByZXR1cm4geC50b1ByZWNpc2lvbihwKTtcbiAgICB9LFxuICAgIGU6IGZ1bmN0aW9uKHgsIHApIHtcbiAgICAgIHJldHVybiB4LnRvRXhwb25lbnRpYWwocCk7XG4gICAgfSxcbiAgICBmOiBmdW5jdGlvbih4LCBwKSB7XG4gICAgICByZXR1cm4geC50b0ZpeGVkKHApO1xuICAgIH0sXG4gICAgcjogZnVuY3Rpb24oeCwgcCkge1xuICAgICAgcmV0dXJuICh4ID0gZDMucm91bmQoeCwgZDNfZm9ybWF0X3ByZWNpc2lvbih4LCBwKSkpLnRvRml4ZWQoTWF0aC5tYXgoMCwgTWF0aC5taW4oMjAsIGQzX2Zvcm1hdF9wcmVjaXNpb24oeCAqICgxICsgMWUtMTUpLCBwKSkpKTtcbiAgICB9XG4gIH0pO1xuICBmdW5jdGlvbiBkM19mb3JtYXRfdHlwZURlZmF1bHQoeCkge1xuICAgIHJldHVybiB4ICsgXCJcIjtcbiAgfVxuICB2YXIgZDNfdGltZSA9IGQzLnRpbWUgPSB7fSwgZDNfZGF0ZSA9IERhdGU7XG4gIGZ1bmN0aW9uIGQzX2RhdGVfdXRjKCkge1xuICAgIHRoaXMuXyA9IG5ldyBEYXRlKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gRGF0ZS5VVEMuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGFyZ3VtZW50c1swXSk7XG4gIH1cbiAgZDNfZGF0ZV91dGMucHJvdG90eXBlID0ge1xuICAgIGdldERhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuXy5nZXRVVENEYXRlKCk7XG4gICAgfSxcbiAgICBnZXREYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuXy5nZXRVVENEYXkoKTtcbiAgICB9LFxuICAgIGdldEZ1bGxZZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl8uZ2V0VVRDRnVsbFllYXIoKTtcbiAgICB9LFxuICAgIGdldEhvdXJzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl8uZ2V0VVRDSG91cnMoKTtcbiAgICB9LFxuICAgIGdldE1pbGxpc2Vjb25kczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgIH0sXG4gICAgZ2V0TWludXRlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fLmdldFVUQ01pbnV0ZXMoKTtcbiAgICB9LFxuICAgIGdldE1vbnRoOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl8uZ2V0VVRDTW9udGgoKTtcbiAgICB9LFxuICAgIGdldFNlY29uZHM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuXy5nZXRVVENTZWNvbmRzKCk7XG4gICAgfSxcbiAgICBnZXRUaW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl8uZ2V0VGltZSgpO1xuICAgIH0sXG4gICAgZ2V0VGltZXpvbmVPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgICB2YWx1ZU9mOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl8udmFsdWVPZigpO1xuICAgIH0sXG4gICAgc2V0RGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICBkM190aW1lX3Byb3RvdHlwZS5zZXRVVENEYXRlLmFwcGx5KHRoaXMuXywgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHNldERheTogZnVuY3Rpb24oKSB7XG4gICAgICBkM190aW1lX3Byb3RvdHlwZS5zZXRVVENEYXkuYXBwbHkodGhpcy5fLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc2V0RnVsbFllYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfdGltZV9wcm90b3R5cGUuc2V0VVRDRnVsbFllYXIuYXBwbHkodGhpcy5fLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc2V0SG91cnM6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfdGltZV9wcm90b3R5cGUuc2V0VVRDSG91cnMuYXBwbHkodGhpcy5fLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc2V0TWlsbGlzZWNvbmRzOiBmdW5jdGlvbigpIHtcbiAgICAgIGQzX3RpbWVfcHJvdG90eXBlLnNldFVUQ01pbGxpc2Vjb25kcy5hcHBseSh0aGlzLl8sIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBzZXRNaW51dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIGQzX3RpbWVfcHJvdG90eXBlLnNldFVUQ01pbnV0ZXMuYXBwbHkodGhpcy5fLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc2V0TW9udGg6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfdGltZV9wcm90b3R5cGUuc2V0VVRDTW9udGguYXBwbHkodGhpcy5fLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc2V0U2Vjb25kczogZnVuY3Rpb24oKSB7XG4gICAgICBkM190aW1lX3Byb3RvdHlwZS5zZXRVVENTZWNvbmRzLmFwcGx5KHRoaXMuXywgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHNldFRpbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfdGltZV9wcm90b3R5cGUuc2V0VGltZS5hcHBseSh0aGlzLl8sIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuICB2YXIgZDNfdGltZV9wcm90b3R5cGUgPSBEYXRlLnByb3RvdHlwZTtcbiAgZnVuY3Rpb24gZDNfdGltZV9pbnRlcnZhbChsb2NhbCwgc3RlcCwgbnVtYmVyKSB7XG4gICAgZnVuY3Rpb24gcm91bmQoZGF0ZSkge1xuICAgICAgdmFyIGQwID0gbG9jYWwoZGF0ZSksIGQxID0gb2Zmc2V0KGQwLCAxKTtcbiAgICAgIHJldHVybiBkYXRlIC0gZDAgPCBkMSAtIGRhdGUgPyBkMCA6IGQxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjZWlsKGRhdGUpIHtcbiAgICAgIHN0ZXAoZGF0ZSA9IGxvY2FsKG5ldyBkM19kYXRlKGRhdGUgLSAxKSksIDEpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9mZnNldChkYXRlLCBrKSB7XG4gICAgICBzdGVwKGRhdGUgPSBuZXcgZDNfZGF0ZSgrZGF0ZSksIGspO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlKHQwLCB0MSwgZHQpIHtcbiAgICAgIHZhciB0aW1lID0gY2VpbCh0MCksIHRpbWVzID0gW107XG4gICAgICBpZiAoZHQgPiAxKSB7XG4gICAgICAgIHdoaWxlICh0aW1lIDwgdDEpIHtcbiAgICAgICAgICBpZiAoIShudW1iZXIodGltZSkgJSBkdCkpIHRpbWVzLnB1c2gobmV3IERhdGUoK3RpbWUpKTtcbiAgICAgICAgICBzdGVwKHRpbWUsIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAodGltZSA8IHQxKSB0aW1lcy5wdXNoKG5ldyBEYXRlKCt0aW1lKSksIHN0ZXAodGltZSwgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGltZXM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJhbmdlX3V0Yyh0MCwgdDEsIGR0KSB7XG4gICAgICB0cnkge1xuICAgICAgICBkM19kYXRlID0gZDNfZGF0ZV91dGM7XG4gICAgICAgIHZhciB1dGMgPSBuZXcgZDNfZGF0ZV91dGMoKTtcbiAgICAgICAgdXRjLl8gPSB0MDtcbiAgICAgICAgcmV0dXJuIHJhbmdlKHV0YywgdDEsIGR0KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGQzX2RhdGUgPSBEYXRlO1xuICAgICAgfVxuICAgIH1cbiAgICBsb2NhbC5mbG9vciA9IGxvY2FsO1xuICAgIGxvY2FsLnJvdW5kID0gcm91bmQ7XG4gICAgbG9jYWwuY2VpbCA9IGNlaWw7XG4gICAgbG9jYWwub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIGxvY2FsLnJhbmdlID0gcmFuZ2U7XG4gICAgdmFyIHV0YyA9IGxvY2FsLnV0YyA9IGQzX3RpbWVfaW50ZXJ2YWxfdXRjKGxvY2FsKTtcbiAgICB1dGMuZmxvb3IgPSB1dGM7XG4gICAgdXRjLnJvdW5kID0gZDNfdGltZV9pbnRlcnZhbF91dGMocm91bmQpO1xuICAgIHV0Yy5jZWlsID0gZDNfdGltZV9pbnRlcnZhbF91dGMoY2VpbCk7XG4gICAgdXRjLm9mZnNldCA9IGQzX3RpbWVfaW50ZXJ2YWxfdXRjKG9mZnNldCk7XG4gICAgdXRjLnJhbmdlID0gcmFuZ2VfdXRjO1xuICAgIHJldHVybiBsb2NhbDtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX2ludGVydmFsX3V0YyhtZXRob2QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0ZSwgaykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZDNfZGF0ZSA9IGQzX2RhdGVfdXRjO1xuICAgICAgICB2YXIgdXRjID0gbmV3IGQzX2RhdGVfdXRjKCk7XG4gICAgICAgIHV0Yy5fID0gZGF0ZTtcbiAgICAgICAgcmV0dXJuIG1ldGhvZCh1dGMsIGspLl87XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBkM19kYXRlID0gRGF0ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGQzX3RpbWUueWVhciA9IGQzX3RpbWVfaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICAgIGRhdGUgPSBkM190aW1lLmRheShkYXRlKTtcbiAgICBkYXRlLnNldE1vbnRoKDAsIDEpO1xuICAgIHJldHVybiBkYXRlO1xuICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICBkYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSArIG9mZnNldCk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICB9KTtcbiAgZDNfdGltZS55ZWFycyA9IGQzX3RpbWUueWVhci5yYW5nZTtcbiAgZDNfdGltZS55ZWFycy51dGMgPSBkM190aW1lLnllYXIudXRjLnJhbmdlO1xuICBkM190aW1lLmRheSA9IGQzX3RpbWVfaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciBkYXkgPSBuZXcgZDNfZGF0ZSgyZTMsIDApO1xuICAgIGRheS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpO1xuICAgIHJldHVybiBkYXk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUsIG9mZnNldCkge1xuICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIG9mZnNldCk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCkgLSAxO1xuICB9KTtcbiAgZDNfdGltZS5kYXlzID0gZDNfdGltZS5kYXkucmFuZ2U7XG4gIGQzX3RpbWUuZGF5cy51dGMgPSBkM190aW1lLmRheS51dGMucmFuZ2U7XG4gIGQzX3RpbWUuZGF5T2ZZZWFyID0gZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciB5ZWFyID0gZDNfdGltZS55ZWFyKGRhdGUpO1xuICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlIC0geWVhciAtIChkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgLSB5ZWFyLmdldFRpbWV6b25lT2Zmc2V0KCkpICogNmU0KSAvIDg2NGU1KTtcbiAgfTtcbiAgWyBcInN1bmRheVwiLCBcIm1vbmRheVwiLCBcInR1ZXNkYXlcIiwgXCJ3ZWRuZXNkYXlcIiwgXCJ0aHVyc2RheVwiLCBcImZyaWRheVwiLCBcInNhdHVyZGF5XCIgXS5mb3JFYWNoKGZ1bmN0aW9uKGRheSwgaSkge1xuICAgIGkgPSA3IC0gaTtcbiAgICB2YXIgaW50ZXJ2YWwgPSBkM190aW1lW2RheV0gPSBkM190aW1lX2ludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIChkYXRlID0gZDNfdGltZS5kYXkoZGF0ZSkpLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSAoZGF0ZS5nZXREYXkoKSArIGkpICUgNyk7XG4gICAgICByZXR1cm4gZGF0ZTtcbiAgICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIE1hdGguZmxvb3Iob2Zmc2V0KSAqIDcpO1xuICAgIH0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIHZhciBkYXkgPSBkM190aW1lLnllYXIoZGF0ZSkuZ2V0RGF5KCk7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcigoZDNfdGltZS5kYXlPZlllYXIoZGF0ZSkgKyAoZGF5ICsgaSkgJSA3KSAvIDcpIC0gKGRheSAhPT0gaSk7XG4gICAgfSk7XG4gICAgZDNfdGltZVtkYXkgKyBcInNcIl0gPSBpbnRlcnZhbC5yYW5nZTtcbiAgICBkM190aW1lW2RheSArIFwic1wiXS51dGMgPSBpbnRlcnZhbC51dGMucmFuZ2U7XG4gICAgZDNfdGltZVtkYXkgKyBcIk9mWWVhclwiXSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgIHZhciBkYXkgPSBkM190aW1lLnllYXIoZGF0ZSkuZ2V0RGF5KCk7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcigoZDNfdGltZS5kYXlPZlllYXIoZGF0ZSkgKyAoZGF5ICsgaSkgJSA3KSAvIDcpO1xuICAgIH07XG4gIH0pO1xuICBkM190aW1lLndlZWsgPSBkM190aW1lLnN1bmRheTtcbiAgZDNfdGltZS53ZWVrcyA9IGQzX3RpbWUuc3VuZGF5LnJhbmdlO1xuICBkM190aW1lLndlZWtzLnV0YyA9IGQzX3RpbWUuc3VuZGF5LnV0Yy5yYW5nZTtcbiAgZDNfdGltZS53ZWVrT2ZZZWFyID0gZDNfdGltZS5zdW5kYXlPZlllYXI7XG4gIGZ1bmN0aW9uIGQzX2xvY2FsZV90aW1lRm9ybWF0KGxvY2FsZSkge1xuICAgIHZhciBsb2NhbGVfZGF0ZVRpbWUgPSBsb2NhbGUuZGF0ZVRpbWUsIGxvY2FsZV9kYXRlID0gbG9jYWxlLmRhdGUsIGxvY2FsZV90aW1lID0gbG9jYWxlLnRpbWUsIGxvY2FsZV9wZXJpb2RzID0gbG9jYWxlLnBlcmlvZHMsIGxvY2FsZV9kYXlzID0gbG9jYWxlLmRheXMsIGxvY2FsZV9zaG9ydERheXMgPSBsb2NhbGUuc2hvcnREYXlzLCBsb2NhbGVfbW9udGhzID0gbG9jYWxlLm1vbnRocywgbG9jYWxlX3Nob3J0TW9udGhzID0gbG9jYWxlLnNob3J0TW9udGhzO1xuICAgIGZ1bmN0aW9uIGQzX3RpbWVfZm9ybWF0KHRlbXBsYXRlKSB7XG4gICAgICB2YXIgbiA9IHRlbXBsYXRlLmxlbmd0aDtcbiAgICAgIGZ1bmN0aW9uIGZvcm1hdChkYXRlKSB7XG4gICAgICAgIHZhciBzdHJpbmcgPSBbXSwgaSA9IC0xLCBqID0gMCwgYywgcCwgZjtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICBpZiAodGVtcGxhdGUuY2hhckNvZGVBdChpKSA9PT0gMzcpIHtcbiAgICAgICAgICAgIHN0cmluZy5wdXNoKHRlbXBsYXRlLnNsaWNlKGosIGkpKTtcbiAgICAgICAgICAgIGlmICgocCA9IGQzX3RpbWVfZm9ybWF0UGFkc1tjID0gdGVtcGxhdGUuY2hhckF0KCsraSldKSAhPSBudWxsKSBjID0gdGVtcGxhdGUuY2hhckF0KCsraSk7XG4gICAgICAgICAgICBpZiAoZiA9IGQzX3RpbWVfZm9ybWF0c1tjXSkgYyA9IGYoZGF0ZSwgcCA9PSBudWxsID8gYyA9PT0gXCJlXCIgPyBcIiBcIiA6IFwiMFwiIDogcCk7XG4gICAgICAgICAgICBzdHJpbmcucHVzaChjKTtcbiAgICAgICAgICAgIGogPSBpICsgMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyaW5nLnB1c2godGVtcGxhdGUuc2xpY2UoaiwgaSkpO1xuICAgICAgICByZXR1cm4gc3RyaW5nLmpvaW4oXCJcIik7XG4gICAgICB9XG4gICAgICBmb3JtYXQucGFyc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgdmFyIGQgPSB7XG4gICAgICAgICAgeTogMTkwMCxcbiAgICAgICAgICBtOiAwLFxuICAgICAgICAgIGQ6IDEsXG4gICAgICAgICAgSDogMCxcbiAgICAgICAgICBNOiAwLFxuICAgICAgICAgIFM6IDAsXG4gICAgICAgICAgTDogMCxcbiAgICAgICAgICBaOiBudWxsXG4gICAgICAgIH0sIGkgPSBkM190aW1lX3BhcnNlKGQsIHRlbXBsYXRlLCBzdHJpbmcsIDApO1xuICAgICAgICBpZiAoaSAhPSBzdHJpbmcubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKFwicFwiIGluIGQpIGQuSCA9IGQuSCAlIDEyICsgZC5wICogMTI7XG4gICAgICAgIHZhciBsb2NhbFogPSBkLlogIT0gbnVsbCAmJiBkM19kYXRlICE9PSBkM19kYXRlX3V0YywgZGF0ZSA9IG5ldyAobG9jYWxaID8gZDNfZGF0ZV91dGMgOiBkM19kYXRlKSgpO1xuICAgICAgICBpZiAoXCJqXCIgaW4gZCkgZGF0ZS5zZXRGdWxsWWVhcihkLnksIDAsIGQuaik7IGVsc2UgaWYgKFwiV1wiIGluIGQgfHwgXCJVXCIgaW4gZCkge1xuICAgICAgICAgIGlmICghKFwid1wiIGluIGQpKSBkLncgPSBcIldcIiBpbiBkID8gMSA6IDA7XG4gICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcihkLnksIDAsIDEpO1xuICAgICAgICAgIGRhdGUuc2V0RnVsbFllYXIoZC55LCAwLCBcIldcIiBpbiBkID8gKGQudyArIDYpICUgNyArIGQuVyAqIDcgLSAoZGF0ZS5nZXREYXkoKSArIDUpICUgNyA6IGQudyArIGQuVSAqIDcgLSAoZGF0ZS5nZXREYXkoKSArIDYpICUgNyk7XG4gICAgICAgIH0gZWxzZSBkYXRlLnNldEZ1bGxZZWFyKGQueSwgZC5tLCBkLmQpO1xuICAgICAgICBkYXRlLnNldEhvdXJzKGQuSCArIChkLlogLyAxMDAgfCAwKSwgZC5NICsgZC5aICUgMTAwLCBkLlMsIGQuTCk7XG4gICAgICAgIHJldHVybiBsb2NhbFogPyBkYXRlLl8gOiBkYXRlO1xuICAgICAgfTtcbiAgICAgIGZvcm1hdC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZShkYXRlLCB0ZW1wbGF0ZSwgc3RyaW5nLCBqKSB7XG4gICAgICB2YXIgYywgcCwgdCwgaSA9IDAsIG4gPSB0ZW1wbGF0ZS5sZW5ndGgsIG0gPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgd2hpbGUgKGkgPCBuKSB7XG4gICAgICAgIGlmIChqID49IG0pIHJldHVybiAtMTtcbiAgICAgICAgYyA9IHRlbXBsYXRlLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgaWYgKGMgPT09IDM3KSB7XG4gICAgICAgICAgdCA9IHRlbXBsYXRlLmNoYXJBdChpKyspO1xuICAgICAgICAgIHAgPSBkM190aW1lX3BhcnNlcnNbdCBpbiBkM190aW1lX2Zvcm1hdFBhZHMgPyB0ZW1wbGF0ZS5jaGFyQXQoaSsrKSA6IHRdO1xuICAgICAgICAgIGlmICghcCB8fCAoaiA9IHAoZGF0ZSwgc3RyaW5nLCBqKSkgPCAwKSByZXR1cm4gLTE7XG4gICAgICAgIH0gZWxzZSBpZiAoYyAhPSBzdHJpbmcuY2hhckNvZGVBdChqKyspKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gajtcbiAgICB9XG4gICAgZDNfdGltZV9mb3JtYXQudXRjID0gZnVuY3Rpb24odGVtcGxhdGUpIHtcbiAgICAgIHZhciBsb2NhbCA9IGQzX3RpbWVfZm9ybWF0KHRlbXBsYXRlKTtcbiAgICAgIGZ1bmN0aW9uIGZvcm1hdChkYXRlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZDNfZGF0ZSA9IGQzX2RhdGVfdXRjO1xuICAgICAgICAgIHZhciB1dGMgPSBuZXcgZDNfZGF0ZSgpO1xuICAgICAgICAgIHV0Yy5fID0gZGF0ZTtcbiAgICAgICAgICByZXR1cm4gbG9jYWwodXRjKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBkM19kYXRlID0gRGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9ybWF0LnBhcnNlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZDNfZGF0ZSA9IGQzX2RhdGVfdXRjO1xuICAgICAgICAgIHZhciBkYXRlID0gbG9jYWwucGFyc2Uoc3RyaW5nKTtcbiAgICAgICAgICByZXR1cm4gZGF0ZSAmJiBkYXRlLl87XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgZDNfZGF0ZSA9IERhdGU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBmb3JtYXQudG9TdHJpbmcgPSBsb2NhbC50b1N0cmluZztcbiAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgfTtcbiAgICBkM190aW1lX2Zvcm1hdC5tdWx0aSA9IGQzX3RpbWVfZm9ybWF0LnV0Yy5tdWx0aSA9IGQzX3RpbWVfZm9ybWF0TXVsdGk7XG4gICAgdmFyIGQzX3RpbWVfcGVyaW9kTG9va3VwID0gZDMubWFwKCksIGQzX3RpbWVfZGF5UmUgPSBkM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9kYXlzKSwgZDNfdGltZV9kYXlMb29rdXAgPSBkM190aW1lX2Zvcm1hdExvb2t1cChsb2NhbGVfZGF5cyksIGQzX3RpbWVfZGF5QWJicmV2UmUgPSBkM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9zaG9ydERheXMpLCBkM190aW1lX2RheUFiYnJldkxvb2t1cCA9IGQzX3RpbWVfZm9ybWF0TG9va3VwKGxvY2FsZV9zaG9ydERheXMpLCBkM190aW1lX21vbnRoUmUgPSBkM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9tb250aHMpLCBkM190aW1lX21vbnRoTG9va3VwID0gZDNfdGltZV9mb3JtYXRMb29rdXAobG9jYWxlX21vbnRocyksIGQzX3RpbWVfbW9udGhBYmJyZXZSZSA9IGQzX3RpbWVfZm9ybWF0UmUobG9jYWxlX3Nob3J0TW9udGhzKSwgZDNfdGltZV9tb250aEFiYnJldkxvb2t1cCA9IGQzX3RpbWVfZm9ybWF0TG9va3VwKGxvY2FsZV9zaG9ydE1vbnRocyk7XG4gICAgbG9jYWxlX3BlcmlvZHMuZm9yRWFjaChmdW5jdGlvbihwLCBpKSB7XG4gICAgICBkM190aW1lX3BlcmlvZExvb2t1cC5zZXQocC50b0xvd2VyQ2FzZSgpLCBpKTtcbiAgICB9KTtcbiAgICB2YXIgZDNfdGltZV9mb3JtYXRzID0ge1xuICAgICAgYTogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbG9jYWxlX3Nob3J0RGF5c1tkLmdldERheSgpXTtcbiAgICAgIH0sXG4gICAgICBBOiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVfZGF5c1tkLmdldERheSgpXTtcbiAgICAgIH0sXG4gICAgICBiOiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVfc2hvcnRNb250aHNbZC5nZXRNb250aCgpXTtcbiAgICAgIH0sXG4gICAgICBCOiBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVfbW9udGhzW2QuZ2V0TW9udGgoKV07XG4gICAgICB9LFxuICAgICAgYzogZDNfdGltZV9mb3JtYXQobG9jYWxlX2RhdGVUaW1lKSxcbiAgICAgIGQ6IGZ1bmN0aW9uKGQsIHApIHtcbiAgICAgICAgcmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0RGF0ZSgpLCBwLCAyKTtcbiAgICAgIH0sXG4gICAgICBlOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldERhdGUoKSwgcCwgMik7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24oZCwgcCkge1xuICAgICAgICByZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRIb3VycygpLCBwLCAyKTtcbiAgICAgIH0sXG4gICAgICBJOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldEhvdXJzKCkgJSAxMiB8fCAxMiwgcCwgMik7XG4gICAgICB9LFxuICAgICAgajogZnVuY3Rpb24oZCwgcCkge1xuICAgICAgICByZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoMSArIGQzX3RpbWUuZGF5T2ZZZWFyKGQpLCBwLCAzKTtcbiAgICAgIH0sXG4gICAgICBMOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldE1pbGxpc2Vjb25kcygpLCBwLCAzKTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldE1vbnRoKCkgKyAxLCBwLCAyKTtcbiAgICAgIH0sXG4gICAgICBNOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldE1pbnV0ZXMoKSwgcCwgMik7XG4gICAgICB9LFxuICAgICAgcDogZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gbG9jYWxlX3BlcmlvZHNbKyhkLmdldEhvdXJzKCkgPj0gMTIpXTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbihkLCBwKSB7XG4gICAgICAgIHJldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldFNlY29uZHMoKSwgcCwgMik7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24oZCwgcCkge1xuICAgICAgICByZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZDNfdGltZS5zdW5kYXlPZlllYXIoZCksIHAsIDIpO1xuICAgICAgfSxcbiAgICAgIHc6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQuZ2V0RGF5KCk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24oZCwgcCkge1xuICAgICAgICByZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZDNfdGltZS5tb25kYXlPZlllYXIoZCksIHAsIDIpO1xuICAgICAgfSxcbiAgICAgIHg6IGQzX3RpbWVfZm9ybWF0KGxvY2FsZV9kYXRlKSxcbiAgICAgIFg6IGQzX3RpbWVfZm9ybWF0KGxvY2FsZV90aW1lKSxcbiAgICAgIHk6IGZ1bmN0aW9uKGQsIHApIHtcbiAgICAgICAgcmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0RnVsbFllYXIoKSAlIDEwMCwgcCwgMik7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24oZCwgcCkge1xuICAgICAgICByZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRGdWxsWWVhcigpICUgMWU0LCBwLCA0KTtcbiAgICAgIH0sXG4gICAgICBaOiBkM190aW1lX3pvbmUsXG4gICAgICBcIiVcIjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBcIiVcIjtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBkM190aW1lX3BhcnNlcnMgPSB7XG4gICAgICBhOiBkM190aW1lX3BhcnNlV2Vla2RheUFiYnJldixcbiAgICAgIEE6IGQzX3RpbWVfcGFyc2VXZWVrZGF5LFxuICAgICAgYjogZDNfdGltZV9wYXJzZU1vbnRoQWJicmV2LFxuICAgICAgQjogZDNfdGltZV9wYXJzZU1vbnRoLFxuICAgICAgYzogZDNfdGltZV9wYXJzZUxvY2FsZUZ1bGwsXG4gICAgICBkOiBkM190aW1lX3BhcnNlRGF5LFxuICAgICAgZTogZDNfdGltZV9wYXJzZURheSxcbiAgICAgIEg6IGQzX3RpbWVfcGFyc2VIb3VyMjQsXG4gICAgICBJOiBkM190aW1lX3BhcnNlSG91cjI0LFxuICAgICAgajogZDNfdGltZV9wYXJzZURheU9mWWVhcixcbiAgICAgIEw6IGQzX3RpbWVfcGFyc2VNaWxsaXNlY29uZHMsXG4gICAgICBtOiBkM190aW1lX3BhcnNlTW9udGhOdW1iZXIsXG4gICAgICBNOiBkM190aW1lX3BhcnNlTWludXRlcyxcbiAgICAgIHA6IGQzX3RpbWVfcGFyc2VBbVBtLFxuICAgICAgUzogZDNfdGltZV9wYXJzZVNlY29uZHMsXG4gICAgICBVOiBkM190aW1lX3BhcnNlV2Vla051bWJlclN1bmRheSxcbiAgICAgIHc6IGQzX3RpbWVfcGFyc2VXZWVrZGF5TnVtYmVyLFxuICAgICAgVzogZDNfdGltZV9wYXJzZVdlZWtOdW1iZXJNb25kYXksXG4gICAgICB4OiBkM190aW1lX3BhcnNlTG9jYWxlRGF0ZSxcbiAgICAgIFg6IGQzX3RpbWVfcGFyc2VMb2NhbGVUaW1lLFxuICAgICAgeTogZDNfdGltZV9wYXJzZVllYXIsXG4gICAgICBZOiBkM190aW1lX3BhcnNlRnVsbFllYXIsXG4gICAgICBaOiBkM190aW1lX3BhcnNlWm9uZSxcbiAgICAgIFwiJVwiOiBkM190aW1lX3BhcnNlTGl0ZXJhbFBlcmNlbnRcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VXZWVrZGF5QWJicmV2KGRhdGUsIHN0cmluZywgaSkge1xuICAgICAgZDNfdGltZV9kYXlBYmJyZXZSZS5sYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIG4gPSBkM190aW1lX2RheUFiYnJldlJlLmV4ZWMoc3RyaW5nLnNsaWNlKGkpKTtcbiAgICAgIHJldHVybiBuID8gKGRhdGUudyA9IGQzX3RpbWVfZGF5QWJicmV2TG9va3VwLmdldChuWzBdLnRvTG93ZXJDYXNlKCkpLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VXZWVrZGF5KGRhdGUsIHN0cmluZywgaSkge1xuICAgICAgZDNfdGltZV9kYXlSZS5sYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIG4gPSBkM190aW1lX2RheVJlLmV4ZWMoc3RyaW5nLnNsaWNlKGkpKTtcbiAgICAgIHJldHVybiBuID8gKGRhdGUudyA9IGQzX3RpbWVfZGF5TG9va3VwLmdldChuWzBdLnRvTG93ZXJDYXNlKCkpLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VNb250aEFiYnJldihkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICAgIGQzX3RpbWVfbW9udGhBYmJyZXZSZS5sYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIG4gPSBkM190aW1lX21vbnRoQWJicmV2UmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICAgICAgcmV0dXJuIG4gPyAoZGF0ZS5tID0gZDNfdGltZV9tb250aEFiYnJldkxvb2t1cC5nZXQoblswXS50b0xvd2VyQ2FzZSgpKSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkM190aW1lX3BhcnNlTW9udGgoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgICBkM190aW1lX21vbnRoUmUubGFzdEluZGV4ID0gMDtcbiAgICAgIHZhciBuID0gZDNfdGltZV9tb250aFJlLmV4ZWMoc3RyaW5nLnNsaWNlKGkpKTtcbiAgICAgIHJldHVybiBuID8gKGRhdGUubSA9IGQzX3RpbWVfbW9udGhMb29rdXAuZ2V0KG5bMF0udG9Mb3dlckNhc2UoKSksIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZUxvY2FsZUZ1bGwoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgICByZXR1cm4gZDNfdGltZV9wYXJzZShkYXRlLCBkM190aW1lX2Zvcm1hdHMuYy50b1N0cmluZygpLCBzdHJpbmcsIGkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkM190aW1lX3BhcnNlTG9jYWxlRGF0ZShkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICAgIHJldHVybiBkM190aW1lX3BhcnNlKGRhdGUsIGQzX3RpbWVfZm9ybWF0cy54LnRvU3RyaW5nKCksIHN0cmluZywgaSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VMb2NhbGVUaW1lKGRhdGUsIHN0cmluZywgaSkge1xuICAgICAgcmV0dXJuIGQzX3RpbWVfcGFyc2UoZGF0ZSwgZDNfdGltZV9mb3JtYXRzLlgudG9TdHJpbmcoKSwgc3RyaW5nLCBpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZUFtUG0oZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgICB2YXIgbiA9IGQzX3RpbWVfcGVyaW9kTG9va3VwLmdldChzdHJpbmcuc2xpY2UoaSwgaSArPSAyKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIHJldHVybiBuID09IG51bGwgPyAtMSA6IChkYXRlLnAgPSBuLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIGQzX3RpbWVfZm9ybWF0O1xuICB9XG4gIHZhciBkM190aW1lX2Zvcm1hdFBhZHMgPSB7XG4gICAgXCItXCI6IFwiXCIsXG4gICAgXzogXCIgXCIsXG4gICAgXCIwXCI6IFwiMFwiXG4gIH0sIGQzX3RpbWVfbnVtYmVyUmUgPSAvXlxccypcXGQrLywgZDNfdGltZV9wZXJjZW50UmUgPSAvXiUvO1xuICBmdW5jdGlvbiBkM190aW1lX2Zvcm1hdFBhZCh2YWx1ZSwgZmlsbCwgd2lkdGgpIHtcbiAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/IFwiLVwiIDogXCJcIiwgc3RyaW5nID0gKHNpZ24gPyAtdmFsdWUgOiB2YWx1ZSkgKyBcIlwiLCBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgIHJldHVybiBzaWduICsgKGxlbmd0aCA8IHdpZHRoID8gbmV3IEFycmF5KHdpZHRoIC0gbGVuZ3RoICsgMSkuam9pbihmaWxsKSArIHN0cmluZyA6IHN0cmluZyk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfdGltZV9mb3JtYXRSZShuYW1lcykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFwiXig/OlwiICsgbmFtZXMubWFwKGQzLnJlcXVvdGUpLmpvaW4oXCJ8XCIpICsgXCIpXCIsIFwiaVwiKTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX2Zvcm1hdExvb2t1cChuYW1lcykge1xuICAgIHZhciBtYXAgPSBuZXcgZDNfTWFwKCksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgbWFwLnNldChuYW1lc1tpXS50b0xvd2VyQ2FzZSgpLCBpKTtcbiAgICByZXR1cm4gbWFwO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VXZWVrZGF5TnVtYmVyKGRhdGUsIHN0cmluZywgaSkge1xuICAgIGQzX3RpbWVfbnVtYmVyUmUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbiA9IGQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSwgaSArIDEpKTtcbiAgICByZXR1cm4gbiA/IChkYXRlLncgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VXZWVrTnVtYmVyU3VuZGF5KGRhdGUsIHN0cmluZywgaSkge1xuICAgIGQzX3RpbWVfbnVtYmVyUmUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbiA9IGQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSkpO1xuICAgIHJldHVybiBuID8gKGRhdGUuVSA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gIH1cbiAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZVdlZWtOdW1iZXJNb25kYXkoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBuID0gZDNfdGltZV9udW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpKSk7XG4gICAgcmV0dXJuIG4gPyAoZGF0ZS5XID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlRnVsbFllYXIoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBuID0gZDNfdGltZV9udW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgNCkpO1xuICAgIHJldHVybiBuID8gKGRhdGUueSA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gIH1cbiAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZVllYXIoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBuID0gZDNfdGltZV9udW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMikpO1xuICAgIHJldHVybiBuID8gKGRhdGUueSA9IGQzX3RpbWVfZXhwYW5kWWVhcigrblswXSksIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlWm9uZShkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICByZXR1cm4gL15bKy1dXFxkezR9JC8udGVzdChzdHJpbmcgPSBzdHJpbmcuc2xpY2UoaSwgaSArIDUpKSA/IChkYXRlLlogPSAtc3RyaW5nLCBcbiAgICBpICsgNSkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX2V4cGFuZFllYXIoZCkge1xuICAgIHJldHVybiBkICsgKGQgPiA2OCA/IDE5MDAgOiAyZTMpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VNb250aE51bWJlcihkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICBkM190aW1lX251bWJlclJlLmxhc3RJbmRleCA9IDA7XG4gICAgdmFyIG4gPSBkM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gICAgcmV0dXJuIG4gPyAoZGF0ZS5tID0gblswXSAtIDEsIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlRGF5KGRhdGUsIHN0cmluZywgaSkge1xuICAgIGQzX3RpbWVfbnVtYmVyUmUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbiA9IGQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSwgaSArIDIpKTtcbiAgICByZXR1cm4gbiA/IChkYXRlLmQgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VEYXlPZlllYXIoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBuID0gZDNfdGltZV9udW1iZXJSZS5leGVjKHN0cmluZy5zbGljZShpLCBpICsgMykpO1xuICAgIHJldHVybiBuID8gKGRhdGUuaiA9ICtuWzBdLCBpICsgblswXS5sZW5ndGgpIDogLTE7XG4gIH1cbiAgZnVuY3Rpb24gZDNfdGltZV9wYXJzZUhvdXIyNChkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICBkM190aW1lX251bWJlclJlLmxhc3RJbmRleCA9IDA7XG4gICAgdmFyIG4gPSBkM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gICAgcmV0dXJuIG4gPyAoZGF0ZS5IID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlTWludXRlcyhkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICBkM190aW1lX251bWJlclJlLmxhc3RJbmRleCA9IDA7XG4gICAgdmFyIG4gPSBkM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gICAgcmV0dXJuIG4gPyAoZGF0ZS5NID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlU2Vjb25kcyhkYXRlLCBzdHJpbmcsIGkpIHtcbiAgICBkM190aW1lX251bWJlclJlLmxhc3RJbmRleCA9IDA7XG4gICAgdmFyIG4gPSBkM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAyKSk7XG4gICAgcmV0dXJuIG4gPyAoZGF0ZS5TID0gK25bMF0sIGkgKyBuWzBdLmxlbmd0aCkgOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlTWlsbGlzZWNvbmRzKGRhdGUsIHN0cmluZywgaSkge1xuICAgIGQzX3RpbWVfbnVtYmVyUmUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbiA9IGQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc2xpY2UoaSwgaSArIDMpKTtcbiAgICByZXR1cm4gbiA/IChkYXRlLkwgPSArblswXSwgaSArIG5bMF0ubGVuZ3RoKSA6IC0xO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfem9uZShkKSB7XG4gICAgdmFyIHogPSBkLmdldFRpbWV6b25lT2Zmc2V0KCksIHpzID0geiA+IDAgPyBcIi1cIiA6IFwiK1wiLCB6aCA9IGFicyh6KSAvIDYwIHwgMCwgem0gPSBhYnMoeikgJSA2MDtcbiAgICByZXR1cm4genMgKyBkM190aW1lX2Zvcm1hdFBhZCh6aCwgXCIwXCIsIDIpICsgZDNfdGltZV9mb3JtYXRQYWQoem0sIFwiMFwiLCAyKTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX3BhcnNlTGl0ZXJhbFBlcmNlbnQoZGF0ZSwgc3RyaW5nLCBpKSB7XG4gICAgZDNfdGltZV9wZXJjZW50UmUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbiA9IGQzX3RpbWVfcGVyY2VudFJlLmV4ZWMoc3RyaW5nLnNsaWNlKGksIGkgKyAxKSk7XG4gICAgcmV0dXJuIG4gPyBpICsgblswXS5sZW5ndGggOiAtMTtcbiAgfVxuICBmdW5jdGlvbiBkM190aW1lX2Zvcm1hdE11bHRpKGZvcm1hdHMpIHtcbiAgICB2YXIgbiA9IGZvcm1hdHMubGVuZ3RoLCBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IG4pIGZvcm1hdHNbaV1bMF0gPSB0aGlzKGZvcm1hdHNbaV1bMF0pO1xuICAgIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XG4gICAgICB2YXIgaSA9IDAsIGYgPSBmb3JtYXRzW2ldO1xuICAgICAgd2hpbGUgKCFmWzFdKGRhdGUpKSBmID0gZm9ybWF0c1srK2ldO1xuICAgICAgcmV0dXJuIGZbMF0oZGF0ZSk7XG4gICAgfTtcbiAgfVxuICBkMy5sb2NhbGUgPSBmdW5jdGlvbihsb2NhbGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbnVtYmVyRm9ybWF0OiBkM19sb2NhbGVfbnVtYmVyRm9ybWF0KGxvY2FsZSksXG4gICAgICB0aW1lRm9ybWF0OiBkM19sb2NhbGVfdGltZUZvcm1hdChsb2NhbGUpXG4gICAgfTtcbiAgfTtcbiAgdmFyIGQzX2xvY2FsZV9lblVTID0gZDMubG9jYWxlKHtcbiAgICBkZWNpbWFsOiBcIi5cIixcbiAgICB0aG91c2FuZHM6IFwiLFwiLFxuICAgIGdyb3VwaW5nOiBbIDMgXSxcbiAgICBjdXJyZW5jeTogWyBcIiRcIiwgXCJcIiBdLFxuICAgIGRhdGVUaW1lOiBcIiVhICViICVlICVYICVZXCIsXG4gICAgZGF0ZTogXCIlbS8lZC8lWVwiLFxuICAgIHRpbWU6IFwiJUg6JU06JVNcIixcbiAgICBwZXJpb2RzOiBbIFwiQU1cIiwgXCJQTVwiIF0sXG4gICAgZGF5czogWyBcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCIgXSxcbiAgICBzaG9ydERheXM6IFsgXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIiBdLFxuICAgIG1vbnRoczogWyBcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCIgXSxcbiAgICBzaG9ydE1vbnRoczogWyBcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiIF1cbiAgfSk7XG4gIGQzLmZvcm1hdCA9IGQzX2xvY2FsZV9lblVTLm51bWJlckZvcm1hdDtcbiAgZDMuZ2VvID0ge307XG4gIGZ1bmN0aW9uIGQzX2FkZGVyKCkge31cbiAgZDNfYWRkZXIucHJvdG90eXBlID0ge1xuICAgIHM6IDAsXG4gICAgdDogMCxcbiAgICBhZGQ6IGZ1bmN0aW9uKHkpIHtcbiAgICAgIGQzX2FkZGVyU3VtKHksIHRoaXMudCwgZDNfYWRkZXJUZW1wKTtcbiAgICAgIGQzX2FkZGVyU3VtKGQzX2FkZGVyVGVtcC5zLCB0aGlzLnMsIHRoaXMpO1xuICAgICAgaWYgKHRoaXMucykgdGhpcy50ICs9IGQzX2FkZGVyVGVtcC50OyBlbHNlIHRoaXMucyA9IGQzX2FkZGVyVGVtcC50O1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zID0gdGhpcy50ID0gMDtcbiAgICB9LFxuICAgIHZhbHVlT2Y6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucztcbiAgICB9XG4gIH07XG4gIHZhciBkM19hZGRlclRlbXAgPSBuZXcgZDNfYWRkZXIoKTtcbiAgZnVuY3Rpb24gZDNfYWRkZXJTdW0oYSwgYiwgbykge1xuICAgIHZhciB4ID0gby5zID0gYSArIGIsIGJ2ID0geCAtIGEsIGF2ID0geCAtIGJ2O1xuICAgIG8udCA9IGEgLSBhdiArIChiIC0gYnYpO1xuICB9XG4gIGQzLmdlby5zdHJlYW0gPSBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgaWYgKG9iamVjdCAmJiBkM19nZW9fc3RyZWFtT2JqZWN0VHlwZS5oYXNPd25Qcm9wZXJ0eShvYmplY3QudHlwZSkpIHtcbiAgICAgIGQzX2dlb19zdHJlYW1PYmplY3RUeXBlW29iamVjdC50eXBlXShvYmplY3QsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZDNfZ2VvX3N0cmVhbUdlb21ldHJ5KG9iamVjdCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvX3N0cmVhbUdlb21ldHJ5KGdlb21ldHJ5LCBsaXN0ZW5lcikge1xuICAgIGlmIChnZW9tZXRyeSAmJiBkM19nZW9fc3RyZWFtR2VvbWV0cnlUeXBlLmhhc093blByb3BlcnR5KGdlb21ldHJ5LnR5cGUpKSB7XG4gICAgICBkM19nZW9fc3RyZWFtR2VvbWV0cnlUeXBlW2dlb21ldHJ5LnR5cGVdKGdlb21ldHJ5LCBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG4gIHZhciBkM19nZW9fc3RyZWFtT2JqZWN0VHlwZSA9IHtcbiAgICBGZWF0dXJlOiBmdW5jdGlvbihmZWF0dXJlLCBsaXN0ZW5lcikge1xuICAgICAgZDNfZ2VvX3N0cmVhbUdlb21ldHJ5KGZlYXR1cmUuZ2VvbWV0cnksIGxpc3RlbmVyKTtcbiAgICB9LFxuICAgIEZlYXR1cmVDb2xsZWN0aW9uOiBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgZmVhdHVyZXMgPSBvYmplY3QuZmVhdHVyZXMsIGkgPSAtMSwgbiA9IGZlYXR1cmVzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBkM19nZW9fc3RyZWFtR2VvbWV0cnkoZmVhdHVyZXNbaV0uZ2VvbWV0cnksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG4gIHZhciBkM19nZW9fc3RyZWFtR2VvbWV0cnlUeXBlID0ge1xuICAgIFNwaGVyZTogZnVuY3Rpb24ob2JqZWN0LCBsaXN0ZW5lcikge1xuICAgICAgbGlzdGVuZXIuc3BoZXJlKCk7XG4gICAgfSxcbiAgICBQb2ludDogZnVuY3Rpb24ob2JqZWN0LCBsaXN0ZW5lcikge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0LmNvb3JkaW5hdGVzO1xuICAgICAgbGlzdGVuZXIucG9pbnQob2JqZWN0WzBdLCBvYmplY3RbMV0sIG9iamVjdFsyXSk7XG4gICAgfSxcbiAgICBNdWx0aVBvaW50OiBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBvYmplY3QuY29vcmRpbmF0ZXMsIGkgPSAtMSwgbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBvYmplY3QgPSBjb29yZGluYXRlc1tpXSwgbGlzdGVuZXIucG9pbnQob2JqZWN0WzBdLCBvYmplY3RbMV0sIG9iamVjdFsyXSk7XG4gICAgfSxcbiAgICBMaW5lU3RyaW5nOiBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgICBkM19nZW9fc3RyZWFtTGluZShvYmplY3QuY29vcmRpbmF0ZXMsIGxpc3RlbmVyLCAwKTtcbiAgICB9LFxuICAgIE11bHRpTGluZVN0cmluZzogZnVuY3Rpb24ob2JqZWN0LCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gb2JqZWN0LmNvb3JkaW5hdGVzLCBpID0gLTEsIG4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICB3aGlsZSAoKytpIDwgbikgZDNfZ2VvX3N0cmVhbUxpbmUoY29vcmRpbmF0ZXNbaV0sIGxpc3RlbmVyLCAwKTtcbiAgICB9LFxuICAgIFBvbHlnb246IGZ1bmN0aW9uKG9iamVjdCwgbGlzdGVuZXIpIHtcbiAgICAgIGQzX2dlb19zdHJlYW1Qb2x5Z29uKG9iamVjdC5jb29yZGluYXRlcywgbGlzdGVuZXIpO1xuICAgIH0sXG4gICAgTXVsdGlQb2x5Z29uOiBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBvYmplY3QuY29vcmRpbmF0ZXMsIGkgPSAtMSwgbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBkM19nZW9fc3RyZWFtUG9seWdvbihjb29yZGluYXRlc1tpXSwgbGlzdGVuZXIpO1xuICAgIH0sXG4gICAgR2VvbWV0cnlDb2xsZWN0aW9uOiBmdW5jdGlvbihvYmplY3QsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgZ2VvbWV0cmllcyA9IG9iamVjdC5nZW9tZXRyaWVzLCBpID0gLTEsIG4gPSBnZW9tZXRyaWVzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBkM19nZW9fc3RyZWFtR2VvbWV0cnkoZ2VvbWV0cmllc1tpXSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvX3N0cmVhbUxpbmUoY29vcmRpbmF0ZXMsIGxpc3RlbmVyLCBjbG9zZWQpIHtcbiAgICB2YXIgaSA9IC0xLCBuID0gY29vcmRpbmF0ZXMubGVuZ3RoIC0gY2xvc2VkLCBjb29yZGluYXRlO1xuICAgIGxpc3RlbmVyLmxpbmVTdGFydCgpO1xuICAgIHdoaWxlICgrK2kgPCBuKSBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV0sIGxpc3RlbmVyLnBvaW50KGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0sIGNvb3JkaW5hdGVbMl0pO1xuICAgIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fc3RyZWFtUG9seWdvbihjb29yZGluYXRlcywgbGlzdGVuZXIpIHtcbiAgICB2YXIgaSA9IC0xLCBuID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIGxpc3RlbmVyLnBvbHlnb25TdGFydCgpO1xuICAgIHdoaWxlICgrK2kgPCBuKSBkM19nZW9fc3RyZWFtTGluZShjb29yZGluYXRlc1tpXSwgbGlzdGVuZXIsIDEpO1xuICAgIGxpc3RlbmVyLnBvbHlnb25FbmQoKTtcbiAgfVxuICBkMy5nZW8uYXJlYSA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGQzX2dlb19hcmVhU3VtID0gMDtcbiAgICBkMy5nZW8uc3RyZWFtKG9iamVjdCwgZDNfZ2VvX2FyZWEpO1xuICAgIHJldHVybiBkM19nZW9fYXJlYVN1bTtcbiAgfTtcbiAgdmFyIGQzX2dlb19hcmVhU3VtLCBkM19nZW9fYXJlYVJpbmdTdW0gPSBuZXcgZDNfYWRkZXIoKTtcbiAgdmFyIGQzX2dlb19hcmVhID0ge1xuICAgIHNwaGVyZTogZnVuY3Rpb24oKSB7XG4gICAgICBkM19nZW9fYXJlYVN1bSArPSA0ICogz4A7XG4gICAgfSxcbiAgICBwb2ludDogZDNfbm9vcCxcbiAgICBsaW5lU3RhcnQ6IGQzX25vb3AsXG4gICAgbGluZUVuZDogZDNfbm9vcCxcbiAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfZ2VvX2FyZWFSaW5nU3VtLnJlc2V0KCk7XG4gICAgICBkM19nZW9fYXJlYS5saW5lU3RhcnQgPSBkM19nZW9fYXJlYVJpbmdTdGFydDtcbiAgICB9LFxuICAgIHBvbHlnb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZWEgPSAyICogZDNfZ2VvX2FyZWFSaW5nU3VtO1xuICAgICAgZDNfZ2VvX2FyZWFTdW0gKz0gYXJlYSA8IDAgPyA0ICogz4AgKyBhcmVhIDogYXJlYTtcbiAgICAgIGQzX2dlb19hcmVhLmxpbmVTdGFydCA9IGQzX2dlb19hcmVhLmxpbmVFbmQgPSBkM19nZW9fYXJlYS5wb2ludCA9IGQzX25vb3A7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fYXJlYVJpbmdTdGFydCgpIHtcbiAgICB2YXIgzrswMCwgz4YwMCwgzrswLCBjb3PPhjAsIHNpbs+GMDtcbiAgICBkM19nZW9fYXJlYS5wb2ludCA9IGZ1bmN0aW9uKM67LCDPhikge1xuICAgICAgZDNfZ2VvX2FyZWEucG9pbnQgPSBuZXh0UG9pbnQ7XG4gICAgICDOuzAgPSAozrswMCA9IM67KSAqIGQzX3JhZGlhbnMsIGNvc8+GMCA9IE1hdGguY29zKM+GID0gKM+GMDAgPSDPhikgKiBkM19yYWRpYW5zIC8gMiArIM+AIC8gNCksIFxuICAgICAgc2luz4YwID0gTWF0aC5zaW4oz4YpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gbmV4dFBvaW50KM67LCDPhikge1xuICAgICAgzrsgKj0gZDNfcmFkaWFucztcbiAgICAgIM+GID0gz4YgKiBkM19yYWRpYW5zIC8gMiArIM+AIC8gNDtcbiAgICAgIHZhciBkzrsgPSDOuyAtIM67MCwgc2TOuyA9IGTOuyA+PSAwID8gMSA6IC0xLCBhZM67ID0gc2TOuyAqIGTOuywgY29zz4YgPSBNYXRoLmNvcyjPhiksIHNpbs+GID0gTWF0aC5zaW4oz4YpLCBrID0gc2luz4YwICogc2luz4YsIHUgPSBjb3PPhjAgKiBjb3PPhiArIGsgKiBNYXRoLmNvcyhhZM67KSwgdiA9IGsgKiBzZM67ICogTWF0aC5zaW4oYWTOuyk7XG4gICAgICBkM19nZW9fYXJlYVJpbmdTdW0uYWRkKE1hdGguYXRhbjIodiwgdSkpO1xuICAgICAgzrswID0gzrssIGNvc8+GMCA9IGNvc8+GLCBzaW7PhjAgPSBzaW7PhjtcbiAgICB9XG4gICAgZDNfZ2VvX2FyZWEubGluZUVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgbmV4dFBvaW50KM67MDAsIM+GMDApO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NhcnRlc2lhbihzcGhlcmljYWwpIHtcbiAgICB2YXIgzrsgPSBzcGhlcmljYWxbMF0sIM+GID0gc3BoZXJpY2FsWzFdLCBjb3PPhiA9IE1hdGguY29zKM+GKTtcbiAgICByZXR1cm4gWyBjb3PPhiAqIE1hdGguY29zKM67KSwgY29zz4YgKiBNYXRoLnNpbijOuyksIE1hdGguc2luKM+GKSBdO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jYXJ0ZXNpYW5Eb3QoYSwgYikge1xuICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NhcnRlc2lhbkNyb3NzKGEsIGIpIHtcbiAgICByZXR1cm4gWyBhWzFdICogYlsyXSAtIGFbMl0gKiBiWzFdLCBhWzJdICogYlswXSAtIGFbMF0gKiBiWzJdLCBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdIF07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NhcnRlc2lhbkFkZChhLCBiKSB7XG4gICAgYVswXSArPSBiWzBdO1xuICAgIGFbMV0gKz0gYlsxXTtcbiAgICBhWzJdICs9IGJbMl07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NhcnRlc2lhblNjYWxlKHZlY3Rvciwgaykge1xuICAgIHJldHVybiBbIHZlY3RvclswXSAqIGssIHZlY3RvclsxXSAqIGssIHZlY3RvclsyXSAqIGsgXTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2FydGVzaWFuTm9ybWFsaXplKGQpIHtcbiAgICB2YXIgbCA9IE1hdGguc3FydChkWzBdICogZFswXSArIGRbMV0gKiBkWzFdICsgZFsyXSAqIGRbMl0pO1xuICAgIGRbMF0gLz0gbDtcbiAgICBkWzFdIC89IGw7XG4gICAgZFsyXSAvPSBsO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19zcGhlcmljYWwoY2FydGVzaWFuKSB7XG4gICAgcmV0dXJuIFsgTWF0aC5hdGFuMihjYXJ0ZXNpYW5bMV0sIGNhcnRlc2lhblswXSksIGQzX2FzaW4oY2FydGVzaWFuWzJdKSBdO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19zcGhlcmljYWxFcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGFicyhhWzBdIC0gYlswXSkgPCDOtSAmJiBhYnMoYVsxXSAtIGJbMV0pIDwgzrU7XG4gIH1cbiAgZDMuZ2VvLmJvdW5kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciDOuzAsIM+GMCwgzrsxLCDPhjEsIM67XywgzrtfXywgz4ZfXywgcDAsIGTOu1N1bSwgcmFuZ2VzLCByYW5nZTtcbiAgICB2YXIgYm91bmQgPSB7XG4gICAgICBwb2ludDogcG9pbnQsXG4gICAgICBsaW5lU3RhcnQ6IGxpbmVTdGFydCxcbiAgICAgIGxpbmVFbmQ6IGxpbmVFbmQsXG4gICAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBib3VuZC5wb2ludCA9IHJpbmdQb2ludDtcbiAgICAgICAgYm91bmQubGluZVN0YXJ0ID0gcmluZ1N0YXJ0O1xuICAgICAgICBib3VuZC5saW5lRW5kID0gcmluZ0VuZDtcbiAgICAgICAgZM67U3VtID0gMDtcbiAgICAgICAgZDNfZ2VvX2FyZWEucG9seWdvblN0YXJ0KCk7XG4gICAgICB9LFxuICAgICAgcG9seWdvbkVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGQzX2dlb19hcmVhLnBvbHlnb25FbmQoKTtcbiAgICAgICAgYm91bmQucG9pbnQgPSBwb2ludDtcbiAgICAgICAgYm91bmQubGluZVN0YXJ0ID0gbGluZVN0YXJ0O1xuICAgICAgICBib3VuZC5saW5lRW5kID0gbGluZUVuZDtcbiAgICAgICAgaWYgKGQzX2dlb19hcmVhUmluZ1N1bSA8IDApIM67MCA9IC0ozrsxID0gMTgwKSwgz4YwID0gLSjPhjEgPSA5MCk7IGVsc2UgaWYgKGTOu1N1bSA+IM61KSDPhjEgPSA5MDsgZWxzZSBpZiAoZM67U3VtIDwgLc61KSDPhjAgPSAtOTA7XG4gICAgICAgIHJhbmdlWzBdID0gzrswLCByYW5nZVsxXSA9IM67MTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIHBvaW50KM67LCDPhikge1xuICAgICAgcmFuZ2VzLnB1c2gocmFuZ2UgPSBbIM67MCA9IM67LCDOuzEgPSDOuyBdKTtcbiAgICAgIGlmICjPhiA8IM+GMCkgz4YwID0gz4Y7XG4gICAgICBpZiAoz4YgPiDPhjEpIM+GMSA9IM+GO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lUG9pbnQozrssIM+GKSB7XG4gICAgICB2YXIgcCA9IGQzX2dlb19jYXJ0ZXNpYW4oWyDOuyAqIGQzX3JhZGlhbnMsIM+GICogZDNfcmFkaWFucyBdKTtcbiAgICAgIGlmIChwMCkge1xuICAgICAgICB2YXIgbm9ybWFsID0gZDNfZ2VvX2NhcnRlc2lhbkNyb3NzKHAwLCBwKSwgZXF1YXRvcmlhbCA9IFsgbm9ybWFsWzFdLCAtbm9ybWFsWzBdLCAwIF0sIGluZmxlY3Rpb24gPSBkM19nZW9fY2FydGVzaWFuQ3Jvc3MoZXF1YXRvcmlhbCwgbm9ybWFsKTtcbiAgICAgICAgZDNfZ2VvX2NhcnRlc2lhbk5vcm1hbGl6ZShpbmZsZWN0aW9uKTtcbiAgICAgICAgaW5mbGVjdGlvbiA9IGQzX2dlb19zcGhlcmljYWwoaW5mbGVjdGlvbik7XG4gICAgICAgIHZhciBkzrsgPSDOuyAtIM67XywgcyA9IGTOuyA+IDAgPyAxIDogLTEsIM67aSA9IGluZmxlY3Rpb25bMF0gKiBkM19kZWdyZWVzICogcywgYW50aW1lcmlkaWFuID0gYWJzKGTOuykgPiAxODA7XG4gICAgICAgIGlmIChhbnRpbWVyaWRpYW4gXiAocyAqIM67XyA8IM67aSAmJiDOu2kgPCBzICogzrspKSB7XG4gICAgICAgICAgdmFyIM+GaSA9IGluZmxlY3Rpb25bMV0gKiBkM19kZWdyZWVzO1xuICAgICAgICAgIGlmICjPhmkgPiDPhjEpIM+GMSA9IM+GaTtcbiAgICAgICAgfSBlbHNlIGlmICjOu2kgPSAozrtpICsgMzYwKSAlIDM2MCAtIDE4MCwgYW50aW1lcmlkaWFuIF4gKHMgKiDOu18gPCDOu2kgJiYgzrtpIDwgcyAqIM67KSkge1xuICAgICAgICAgIHZhciDPhmkgPSAtaW5mbGVjdGlvblsxXSAqIGQzX2RlZ3JlZXM7XG4gICAgICAgICAgaWYgKM+GaSA8IM+GMCkgz4YwID0gz4ZpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICjPhiA8IM+GMCkgz4YwID0gz4Y7XG4gICAgICAgICAgaWYgKM+GID4gz4YxKSDPhjEgPSDPhjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYW50aW1lcmlkaWFuKSB7XG4gICAgICAgICAgaWYgKM67IDwgzrtfKSB7XG4gICAgICAgICAgICBpZiAoYW5nbGUozrswLCDOuykgPiBhbmdsZSjOuzAsIM67MSkpIM67MSA9IM67O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYW5nbGUozrssIM67MSkgPiBhbmdsZSjOuzAsIM67MSkpIM67MCA9IM67O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAozrsxID49IM67MCkge1xuICAgICAgICAgICAgaWYgKM67IDwgzrswKSDOuzAgPSDOuztcbiAgICAgICAgICAgIGlmICjOuyA+IM67MSkgzrsxID0gzrs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICjOuyA+IM67Xykge1xuICAgICAgICAgICAgICBpZiAoYW5nbGUozrswLCDOuykgPiBhbmdsZSjOuzAsIM67MSkpIM67MSA9IM67O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGFuZ2xlKM67LCDOuzEpID4gYW5nbGUozrswLCDOuzEpKSDOuzAgPSDOuztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBvaW50KM67LCDPhik7XG4gICAgICB9XG4gICAgICBwMCA9IHAsIM67XyA9IM67O1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lU3RhcnQoKSB7XG4gICAgICBib3VuZC5wb2ludCA9IGxpbmVQb2ludDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGluZUVuZCgpIHtcbiAgICAgIHJhbmdlWzBdID0gzrswLCByYW5nZVsxXSA9IM67MTtcbiAgICAgIGJvdW5kLnBvaW50ID0gcG9pbnQ7XG4gICAgICBwMCA9IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJpbmdQb2ludCjOuywgz4YpIHtcbiAgICAgIGlmIChwMCkge1xuICAgICAgICB2YXIgZM67ID0gzrsgLSDOu187XG4gICAgICAgIGTOu1N1bSArPSBhYnMoZM67KSA+IDE4MCA/IGTOuyArIChkzrsgPiAwID8gMzYwIDogLTM2MCkgOiBkzrs7XG4gICAgICB9IGVsc2UgzrtfXyA9IM67LCDPhl9fID0gz4Y7XG4gICAgICBkM19nZW9fYXJlYS5wb2ludCjOuywgz4YpO1xuICAgICAgbGluZVBvaW50KM67LCDPhik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJpbmdTdGFydCgpIHtcbiAgICAgIGQzX2dlb19hcmVhLmxpbmVTdGFydCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByaW5nRW5kKCkge1xuICAgICAgcmluZ1BvaW50KM67X18sIM+GX18pO1xuICAgICAgZDNfZ2VvX2FyZWEubGluZUVuZCgpO1xuICAgICAgaWYgKGFicyhkzrtTdW0pID4gzrUpIM67MCA9IC0ozrsxID0gMTgwKTtcbiAgICAgIHJhbmdlWzBdID0gzrswLCByYW5nZVsxXSA9IM67MTtcbiAgICAgIHAwID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gYW5nbGUozrswLCDOuzEpIHtcbiAgICAgIHJldHVybiAozrsxIC09IM67MCkgPCAwID8gzrsxICsgMzYwIDogzrsxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlUmFuZ2VzKGEsIGIpIHtcbiAgICAgIHJldHVybiBhWzBdIC0gYlswXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gd2l0aGluUmFuZ2UoeCwgcmFuZ2UpIHtcbiAgICAgIHJldHVybiByYW5nZVswXSA8PSByYW5nZVsxXSA/IHJhbmdlWzBdIDw9IHggJiYgeCA8PSByYW5nZVsxXSA6IHggPCByYW5nZVswXSB8fCByYW5nZVsxXSA8IHg7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICDPhjEgPSDOuzEgPSAtKM67MCA9IM+GMCA9IEluZmluaXR5KTtcbiAgICAgIHJhbmdlcyA9IFtdO1xuICAgICAgZDMuZ2VvLnN0cmVhbShmZWF0dXJlLCBib3VuZCk7XG4gICAgICB2YXIgbiA9IHJhbmdlcy5sZW5ndGg7XG4gICAgICBpZiAobikge1xuICAgICAgICByYW5nZXMuc29ydChjb21wYXJlUmFuZ2VzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGEgPSByYW5nZXNbMF0sIGIsIG1lcmdlZCA9IFsgYSBdOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgYiA9IHJhbmdlc1tpXTtcbiAgICAgICAgICBpZiAod2l0aGluUmFuZ2UoYlswXSwgYSkgfHwgd2l0aGluUmFuZ2UoYlsxXSwgYSkpIHtcbiAgICAgICAgICAgIGlmIChhbmdsZShhWzBdLCBiWzFdKSA+IGFuZ2xlKGFbMF0sIGFbMV0pKSBhWzFdID0gYlsxXTtcbiAgICAgICAgICAgIGlmIChhbmdsZShiWzBdLCBhWzFdKSA+IGFuZ2xlKGFbMF0sIGFbMV0pKSBhWzBdID0gYlswXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVyZ2VkLnB1c2goYSA9IGIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYmVzdCA9IC1JbmZpbml0eSwgZM67O1xuICAgICAgICBmb3IgKHZhciBuID0gbWVyZ2VkLmxlbmd0aCAtIDEsIGkgPSAwLCBhID0gbWVyZ2VkW25dLCBiOyBpIDw9IG47IGEgPSBiLCArK2kpIHtcbiAgICAgICAgICBiID0gbWVyZ2VkW2ldO1xuICAgICAgICAgIGlmICgoZM67ID0gYW5nbGUoYVsxXSwgYlswXSkpID4gYmVzdCkgYmVzdCA9IGTOuywgzrswID0gYlswXSwgzrsxID0gYVsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmFuZ2VzID0gcmFuZ2UgPSBudWxsO1xuICAgICAgcmV0dXJuIM67MCA9PT0gSW5maW5pdHkgfHwgz4YwID09PSBJbmZpbml0eSA/IFsgWyBOYU4sIE5hTiBdLCBbIE5hTiwgTmFOIF0gXSA6IFsgWyDOuzAsIM+GMCBdLCBbIM67MSwgz4YxIF0gXTtcbiAgICB9O1xuICB9KCk7XG4gIGQzLmdlby5jZW50cm9pZCA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGQzX2dlb19jZW50cm9pZFcwID0gZDNfZ2VvX2NlbnRyb2lkVzEgPSBkM19nZW9fY2VudHJvaWRYMCA9IGQzX2dlb19jZW50cm9pZFkwID0gZDNfZ2VvX2NlbnRyb2lkWjAgPSBkM19nZW9fY2VudHJvaWRYMSA9IGQzX2dlb19jZW50cm9pZFkxID0gZDNfZ2VvX2NlbnRyb2lkWjEgPSBkM19nZW9fY2VudHJvaWRYMiA9IGQzX2dlb19jZW50cm9pZFkyID0gZDNfZ2VvX2NlbnRyb2lkWjIgPSAwO1xuICAgIGQzLmdlby5zdHJlYW0ob2JqZWN0LCBkM19nZW9fY2VudHJvaWQpO1xuICAgIHZhciB4ID0gZDNfZ2VvX2NlbnRyb2lkWDIsIHkgPSBkM19nZW9fY2VudHJvaWRZMiwgeiA9IGQzX2dlb19jZW50cm9pZFoyLCBtID0geCAqIHggKyB5ICogeSArIHogKiB6O1xuICAgIGlmIChtIDwgzrUyKSB7XG4gICAgICB4ID0gZDNfZ2VvX2NlbnRyb2lkWDEsIHkgPSBkM19nZW9fY2VudHJvaWRZMSwgeiA9IGQzX2dlb19jZW50cm9pZFoxO1xuICAgICAgaWYgKGQzX2dlb19jZW50cm9pZFcxIDwgzrUpIHggPSBkM19nZW9fY2VudHJvaWRYMCwgeSA9IGQzX2dlb19jZW50cm9pZFkwLCB6ID0gZDNfZ2VvX2NlbnRyb2lkWjA7XG4gICAgICBtID0geCAqIHggKyB5ICogeSArIHogKiB6O1xuICAgICAgaWYgKG0gPCDOtTIpIHJldHVybiBbIE5hTiwgTmFOIF07XG4gICAgfVxuICAgIHJldHVybiBbIE1hdGguYXRhbjIoeSwgeCkgKiBkM19kZWdyZWVzLCBkM19hc2luKHogLyBNYXRoLnNxcnQobSkpICogZDNfZGVncmVlcyBdO1xuICB9O1xuICB2YXIgZDNfZ2VvX2NlbnRyb2lkVzAsIGQzX2dlb19jZW50cm9pZFcxLCBkM19nZW9fY2VudHJvaWRYMCwgZDNfZ2VvX2NlbnRyb2lkWTAsIGQzX2dlb19jZW50cm9pZFowLCBkM19nZW9fY2VudHJvaWRYMSwgZDNfZ2VvX2NlbnRyb2lkWTEsIGQzX2dlb19jZW50cm9pZFoxLCBkM19nZW9fY2VudHJvaWRYMiwgZDNfZ2VvX2NlbnRyb2lkWTIsIGQzX2dlb19jZW50cm9pZFoyO1xuICB2YXIgZDNfZ2VvX2NlbnRyb2lkID0ge1xuICAgIHNwaGVyZTogZDNfbm9vcCxcbiAgICBwb2ludDogZDNfZ2VvX2NlbnRyb2lkUG9pbnQsXG4gICAgbGluZVN0YXJ0OiBkM19nZW9fY2VudHJvaWRMaW5lU3RhcnQsXG4gICAgbGluZUVuZDogZDNfZ2VvX2NlbnRyb2lkTGluZUVuZCxcbiAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkLmxpbmVTdGFydCA9IGQzX2dlb19jZW50cm9pZFJpbmdTdGFydDtcbiAgICB9LFxuICAgIHBvbHlnb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkLmxpbmVTdGFydCA9IGQzX2dlb19jZW50cm9pZExpbmVTdGFydDtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb19jZW50cm9pZFBvaW50KM67LCDPhikge1xuICAgIM67ICo9IGQzX3JhZGlhbnM7XG4gICAgdmFyIGNvc8+GID0gTWF0aC5jb3Moz4YgKj0gZDNfcmFkaWFucyk7XG4gICAgZDNfZ2VvX2NlbnRyb2lkUG9pbnRYWVooY29zz4YgKiBNYXRoLmNvcyjOuyksIGNvc8+GICogTWF0aC5zaW4ozrspLCBNYXRoLnNpbijPhikpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jZW50cm9pZFBvaW50WFlaKHgsIHksIHopIHtcbiAgICArK2QzX2dlb19jZW50cm9pZFcwO1xuICAgIGQzX2dlb19jZW50cm9pZFgwICs9ICh4IC0gZDNfZ2VvX2NlbnRyb2lkWDApIC8gZDNfZ2VvX2NlbnRyb2lkVzA7XG4gICAgZDNfZ2VvX2NlbnRyb2lkWTAgKz0gKHkgLSBkM19nZW9fY2VudHJvaWRZMCkgLyBkM19nZW9fY2VudHJvaWRXMDtcbiAgICBkM19nZW9fY2VudHJvaWRaMCArPSAoeiAtIGQzX2dlb19jZW50cm9pZFowKSAvIGQzX2dlb19jZW50cm9pZFcwO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jZW50cm9pZExpbmVTdGFydCgpIHtcbiAgICB2YXIgeDAsIHkwLCB6MDtcbiAgICBkM19nZW9fY2VudHJvaWQucG9pbnQgPSBmdW5jdGlvbijOuywgz4YpIHtcbiAgICAgIM67ICo9IGQzX3JhZGlhbnM7XG4gICAgICB2YXIgY29zz4YgPSBNYXRoLmNvcyjPhiAqPSBkM19yYWRpYW5zKTtcbiAgICAgIHgwID0gY29zz4YgKiBNYXRoLmNvcyjOuyk7XG4gICAgICB5MCA9IGNvc8+GICogTWF0aC5zaW4ozrspO1xuICAgICAgejAgPSBNYXRoLnNpbijPhik7XG4gICAgICBkM19nZW9fY2VudHJvaWQucG9pbnQgPSBuZXh0UG9pbnQ7XG4gICAgICBkM19nZW9fY2VudHJvaWRQb2ludFhZWih4MCwgeTAsIHowKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIG5leHRQb2ludCjOuywgz4YpIHtcbiAgICAgIM67ICo9IGQzX3JhZGlhbnM7XG4gICAgICB2YXIgY29zz4YgPSBNYXRoLmNvcyjPhiAqPSBkM19yYWRpYW5zKSwgeCA9IGNvc8+GICogTWF0aC5jb3MozrspLCB5ID0gY29zz4YgKiBNYXRoLnNpbijOuyksIHogPSBNYXRoLnNpbijPhiksIHcgPSBNYXRoLmF0YW4yKE1hdGguc3FydCgodyA9IHkwICogeiAtIHowICogeSkgKiB3ICsgKHcgPSB6MCAqIHggLSB4MCAqIHopICogdyArICh3ID0geDAgKiB5IC0geTAgKiB4KSAqIHcpLCB4MCAqIHggKyB5MCAqIHkgKyB6MCAqIHopO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkVzEgKz0gdztcbiAgICAgIGQzX2dlb19jZW50cm9pZFgxICs9IHcgKiAoeDAgKyAoeDAgPSB4KSk7XG4gICAgICBkM19nZW9fY2VudHJvaWRZMSArPSB3ICogKHkwICsgKHkwID0geSkpO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWjEgKz0gdyAqICh6MCArICh6MCA9IHopKTtcbiAgICAgIGQzX2dlb19jZW50cm9pZFBvaW50WFlaKHgwLCB5MCwgejApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2VudHJvaWRMaW5lRW5kKCkge1xuICAgIGQzX2dlb19jZW50cm9pZC5wb2ludCA9IGQzX2dlb19jZW50cm9pZFBvaW50O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jZW50cm9pZFJpbmdTdGFydCgpIHtcbiAgICB2YXIgzrswMCwgz4YwMCwgeDAsIHkwLCB6MDtcbiAgICBkM19nZW9fY2VudHJvaWQucG9pbnQgPSBmdW5jdGlvbijOuywgz4YpIHtcbiAgICAgIM67MDAgPSDOuywgz4YwMCA9IM+GO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkLnBvaW50ID0gbmV4dFBvaW50O1xuICAgICAgzrsgKj0gZDNfcmFkaWFucztcbiAgICAgIHZhciBjb3PPhiA9IE1hdGguY29zKM+GICo9IGQzX3JhZGlhbnMpO1xuICAgICAgeDAgPSBjb3PPhiAqIE1hdGguY29zKM67KTtcbiAgICAgIHkwID0gY29zz4YgKiBNYXRoLnNpbijOuyk7XG4gICAgICB6MCA9IE1hdGguc2luKM+GKTtcbiAgICAgIGQzX2dlb19jZW50cm9pZFBvaW50WFlaKHgwLCB5MCwgejApO1xuICAgIH07XG4gICAgZDNfZ2VvX2NlbnRyb2lkLmxpbmVFbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIG5leHRQb2ludCjOuzAwLCDPhjAwKTtcbiAgICAgIGQzX2dlb19jZW50cm9pZC5saW5lRW5kID0gZDNfZ2VvX2NlbnRyb2lkTGluZUVuZDtcbiAgICAgIGQzX2dlb19jZW50cm9pZC5wb2ludCA9IGQzX2dlb19jZW50cm9pZFBvaW50O1xuICAgIH07XG4gICAgZnVuY3Rpb24gbmV4dFBvaW50KM67LCDPhikge1xuICAgICAgzrsgKj0gZDNfcmFkaWFucztcbiAgICAgIHZhciBjb3PPhiA9IE1hdGguY29zKM+GICo9IGQzX3JhZGlhbnMpLCB4ID0gY29zz4YgKiBNYXRoLmNvcyjOuyksIHkgPSBjb3PPhiAqIE1hdGguc2luKM67KSwgeiA9IE1hdGguc2luKM+GKSwgY3ggPSB5MCAqIHogLSB6MCAqIHksIGN5ID0gejAgKiB4IC0geDAgKiB6LCBjeiA9IHgwICogeSAtIHkwICogeCwgbSA9IE1hdGguc3FydChjeCAqIGN4ICsgY3kgKiBjeSArIGN6ICogY3opLCB1ID0geDAgKiB4ICsgeTAgKiB5ICsgejAgKiB6LCB2ID0gbSAmJiAtZDNfYWNvcyh1KSAvIG0sIHcgPSBNYXRoLmF0YW4yKG0sIHUpO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWDIgKz0gdiAqIGN4O1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWTIgKz0gdiAqIGN5O1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWjIgKz0gdiAqIGN6O1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkVzEgKz0gdztcbiAgICAgIGQzX2dlb19jZW50cm9pZFgxICs9IHcgKiAoeDAgKyAoeDAgPSB4KSk7XG4gICAgICBkM19nZW9fY2VudHJvaWRZMSArPSB3ICogKHkwICsgKHkwID0geSkpO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWjEgKz0gdyAqICh6MCArICh6MCA9IHopKTtcbiAgICAgIGQzX2dlb19jZW50cm9pZFBvaW50WFlaKHgwLCB5MCwgejApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY29tcG9zZShhLCBiKSB7XG4gICAgZnVuY3Rpb24gY29tcG9zZSh4LCB5KSB7XG4gICAgICByZXR1cm4geCA9IGEoeCwgeSksIGIoeFswXSwgeFsxXSk7XG4gICAgfVxuICAgIGlmIChhLmludmVydCAmJiBiLmludmVydCkgY29tcG9zZS5pbnZlcnQgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICByZXR1cm4geCA9IGIuaW52ZXJ0KHgsIHkpLCB4ICYmIGEuaW52ZXJ0KHhbMF0sIHhbMV0pO1xuICAgIH07XG4gICAgcmV0dXJuIGNvbXBvc2U7XG4gIH1cbiAgZnVuY3Rpb24gZDNfdHJ1ZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2xpcFBvbHlnb24oc2VnbWVudHMsIGNvbXBhcmUsIGNsaXBTdGFydEluc2lkZSwgaW50ZXJwb2xhdGUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIHN1YmplY3QgPSBbXSwgY2xpcCA9IFtdO1xuICAgIHNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24oc2VnbWVudCkge1xuICAgICAgaWYgKChuID0gc2VnbWVudC5sZW5ndGggLSAxKSA8PSAwKSByZXR1cm47XG4gICAgICB2YXIgbiwgcDAgPSBzZWdtZW50WzBdLCBwMSA9IHNlZ21lbnRbbl07XG4gICAgICBpZiAoZDNfZ2VvX3NwaGVyaWNhbEVxdWFsKHAwLCBwMSkpIHtcbiAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBsaXN0ZW5lci5wb2ludCgocDAgPSBzZWdtZW50W2ldKVswXSwgcDBbMV0pO1xuICAgICAgICBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBhID0gbmV3IGQzX2dlb19jbGlwUG9seWdvbkludGVyc2VjdGlvbihwMCwgc2VnbWVudCwgbnVsbCwgdHJ1ZSksIGIgPSBuZXcgZDNfZ2VvX2NsaXBQb2x5Z29uSW50ZXJzZWN0aW9uKHAwLCBudWxsLCBhLCBmYWxzZSk7XG4gICAgICBhLm8gPSBiO1xuICAgICAgc3ViamVjdC5wdXNoKGEpO1xuICAgICAgY2xpcC5wdXNoKGIpO1xuICAgICAgYSA9IG5ldyBkM19nZW9fY2xpcFBvbHlnb25JbnRlcnNlY3Rpb24ocDEsIHNlZ21lbnQsIG51bGwsIGZhbHNlKTtcbiAgICAgIGIgPSBuZXcgZDNfZ2VvX2NsaXBQb2x5Z29uSW50ZXJzZWN0aW9uKHAxLCBudWxsLCBhLCB0cnVlKTtcbiAgICAgIGEubyA9IGI7XG4gICAgICBzdWJqZWN0LnB1c2goYSk7XG4gICAgICBjbGlwLnB1c2goYik7XG4gICAgfSk7XG4gICAgY2xpcC5zb3J0KGNvbXBhcmUpO1xuICAgIGQzX2dlb19jbGlwUG9seWdvbkxpbmtDaXJjdWxhcihzdWJqZWN0KTtcbiAgICBkM19nZW9fY2xpcFBvbHlnb25MaW5rQ2lyY3VsYXIoY2xpcCk7XG4gICAgaWYgKCFzdWJqZWN0Lmxlbmd0aCkgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSAwLCBlbnRyeSA9IGNsaXBTdGFydEluc2lkZSwgbiA9IGNsaXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICBjbGlwW2ldLmUgPSBlbnRyeSA9ICFlbnRyeTtcbiAgICB9XG4gICAgdmFyIHN0YXJ0ID0gc3ViamVjdFswXSwgcG9pbnRzLCBwb2ludDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSBzdGFydCwgaXNTdWJqZWN0ID0gdHJ1ZTtcbiAgICAgIHdoaWxlIChjdXJyZW50LnYpIGlmICgoY3VycmVudCA9IGN1cnJlbnQubikgPT09IHN0YXJ0KSByZXR1cm47XG4gICAgICBwb2ludHMgPSBjdXJyZW50Lno7XG4gICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgIGRvIHtcbiAgICAgICAgY3VycmVudC52ID0gY3VycmVudC5vLnYgPSB0cnVlO1xuICAgICAgICBpZiAoY3VycmVudC5lKSB7XG4gICAgICAgICAgaWYgKGlzU3ViamVjdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBwb2ludHMubGVuZ3RoOyBpIDwgbjsgKytpKSBsaXN0ZW5lci5wb2ludCgocG9pbnQgPSBwb2ludHNbaV0pWzBdLCBwb2ludFsxXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGludGVycG9sYXRlKGN1cnJlbnQueCwgY3VycmVudC5uLngsIDEsIGxpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNTdWJqZWN0KSB7XG4gICAgICAgICAgICBwb2ludHMgPSBjdXJyZW50LnAuejtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwb2ludHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIGxpc3RlbmVyLnBvaW50KChwb2ludCA9IHBvaW50c1tpXSlbMF0sIHBvaW50WzFdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGUoY3VycmVudC54LCBjdXJyZW50LnAueCwgLTEsIGxpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucDtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5vO1xuICAgICAgICBwb2ludHMgPSBjdXJyZW50Lno7XG4gICAgICAgIGlzU3ViamVjdCA9ICFpc1N1YmplY3Q7XG4gICAgICB9IHdoaWxlICghY3VycmVudC52KTtcbiAgICAgIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NsaXBQb2x5Z29uTGlua0NpcmN1bGFyKGFycmF5KSB7XG4gICAgaWYgKCEobiA9IGFycmF5Lmxlbmd0aCkpIHJldHVybjtcbiAgICB2YXIgbiwgaSA9IDAsIGEgPSBhcnJheVswXSwgYjtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgYS5uID0gYiA9IGFycmF5W2ldO1xuICAgICAgYi5wID0gYTtcbiAgICAgIGEgPSBiO1xuICAgIH1cbiAgICBhLm4gPSBiID0gYXJyYXlbMF07XG4gICAgYi5wID0gYTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2xpcFBvbHlnb25JbnRlcnNlY3Rpb24ocG9pbnQsIHBvaW50cywgb3RoZXIsIGVudHJ5KSB7XG4gICAgdGhpcy54ID0gcG9pbnQ7XG4gICAgdGhpcy56ID0gcG9pbnRzO1xuICAgIHRoaXMubyA9IG90aGVyO1xuICAgIHRoaXMuZSA9IGVudHJ5O1xuICAgIHRoaXMudiA9IGZhbHNlO1xuICAgIHRoaXMubiA9IHRoaXMucCA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NsaXAocG9pbnRWaXNpYmxlLCBjbGlwTGluZSwgaW50ZXJwb2xhdGUsIGNsaXBTdGFydCkge1xuICAgIHJldHVybiBmdW5jdGlvbihyb3RhdGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGluZSA9IGNsaXBMaW5lKGxpc3RlbmVyKSwgcm90YXRlZENsaXBTdGFydCA9IHJvdGF0ZS5pbnZlcnQoY2xpcFN0YXJ0WzBdLCBjbGlwU3RhcnRbMV0pO1xuICAgICAgdmFyIGNsaXAgPSB7XG4gICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgbGluZVN0YXJ0OiBsaW5lU3RhcnQsXG4gICAgICAgIGxpbmVFbmQ6IGxpbmVFbmQsXG4gICAgICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xpcC5wb2ludCA9IHBvaW50UmluZztcbiAgICAgICAgICBjbGlwLmxpbmVTdGFydCA9IHJpbmdTdGFydDtcbiAgICAgICAgICBjbGlwLmxpbmVFbmQgPSByaW5nRW5kO1xuICAgICAgICAgIHNlZ21lbnRzID0gW107XG4gICAgICAgICAgcG9seWdvbiA9IFtdO1xuICAgICAgICB9LFxuICAgICAgICBwb2x5Z29uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjbGlwLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgICAgY2xpcC5saW5lU3RhcnQgPSBsaW5lU3RhcnQ7XG4gICAgICAgICAgY2xpcC5saW5lRW5kID0gbGluZUVuZDtcbiAgICAgICAgICBzZWdtZW50cyA9IGQzLm1lcmdlKHNlZ21lbnRzKTtcbiAgICAgICAgICB2YXIgY2xpcFN0YXJ0SW5zaWRlID0gZDNfZ2VvX3BvaW50SW5Qb2x5Z29uKHJvdGF0ZWRDbGlwU3RhcnQsIHBvbHlnb24pO1xuICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghcG9seWdvblN0YXJ0ZWQpIGxpc3RlbmVyLnBvbHlnb25TdGFydCgpLCBwb2x5Z29uU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBkM19nZW9fY2xpcFBvbHlnb24oc2VnbWVudHMsIGQzX2dlb19jbGlwU29ydCwgY2xpcFN0YXJ0SW5zaWRlLCBpbnRlcnBvbGF0ZSwgbGlzdGVuZXIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2xpcFN0YXJ0SW5zaWRlKSB7XG4gICAgICAgICAgICBpZiAoIXBvbHlnb25TdGFydGVkKSBsaXN0ZW5lci5wb2x5Z29uU3RhcnQoKSwgcG9seWdvblN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZShudWxsLCBudWxsLCAxLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwb2x5Z29uU3RhcnRlZCkgbGlzdGVuZXIucG9seWdvbkVuZCgpLCBwb2x5Z29uU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgIHNlZ21lbnRzID0gcG9seWdvbiA9IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNwaGVyZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbGlzdGVuZXIucG9seWdvblN0YXJ0KCk7XG4gICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgaW50ZXJwb2xhdGUobnVsbCwgbnVsbCwgMSwgbGlzdGVuZXIpO1xuICAgICAgICAgIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgICAgICAgICBsaXN0ZW5lci5wb2x5Z29uRW5kKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBmdW5jdGlvbiBwb2ludCjOuywgz4YpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gcm90YXRlKM67LCDPhik7XG4gICAgICAgIGlmIChwb2ludFZpc2libGUozrsgPSBwb2ludFswXSwgz4YgPSBwb2ludFsxXSkpIGxpc3RlbmVyLnBvaW50KM67LCDPhik7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBwb2ludExpbmUozrssIM+GKSB7XG4gICAgICAgIHZhciBwb2ludCA9IHJvdGF0ZSjOuywgz4YpO1xuICAgICAgICBsaW5lLnBvaW50KHBvaW50WzBdLCBwb2ludFsxXSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsaW5lU3RhcnQoKSB7XG4gICAgICAgIGNsaXAucG9pbnQgPSBwb2ludExpbmU7XG4gICAgICAgIGxpbmUubGluZVN0YXJ0KCk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsaW5lRW5kKCkge1xuICAgICAgICBjbGlwLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgIGxpbmUubGluZUVuZCgpO1xuICAgICAgfVxuICAgICAgdmFyIHNlZ21lbnRzO1xuICAgICAgdmFyIGJ1ZmZlciA9IGQzX2dlb19jbGlwQnVmZmVyTGlzdGVuZXIoKSwgcmluZ0xpc3RlbmVyID0gY2xpcExpbmUoYnVmZmVyKSwgcG9seWdvblN0YXJ0ZWQgPSBmYWxzZSwgcG9seWdvbiwgcmluZztcbiAgICAgIGZ1bmN0aW9uIHBvaW50UmluZyjOuywgz4YpIHtcbiAgICAgICAgcmluZy5wdXNoKFsgzrssIM+GIF0pO1xuICAgICAgICB2YXIgcG9pbnQgPSByb3RhdGUozrssIM+GKTtcbiAgICAgICAgcmluZ0xpc3RlbmVyLnBvaW50KHBvaW50WzBdLCBwb2ludFsxXSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiByaW5nU3RhcnQoKSB7XG4gICAgICAgIHJpbmdMaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgcmluZyA9IFtdO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmluZ0VuZCgpIHtcbiAgICAgICAgcG9pbnRSaW5nKHJpbmdbMF1bMF0sIHJpbmdbMF1bMV0pO1xuICAgICAgICByaW5nTGlzdGVuZXIubGluZUVuZCgpO1xuICAgICAgICB2YXIgY2xlYW4gPSByaW5nTGlzdGVuZXIuY2xlYW4oKSwgcmluZ1NlZ21lbnRzID0gYnVmZmVyLmJ1ZmZlcigpLCBzZWdtZW50LCBuID0gcmluZ1NlZ21lbnRzLmxlbmd0aDtcbiAgICAgICAgcmluZy5wb3AoKTtcbiAgICAgICAgcG9seWdvbi5wdXNoKHJpbmcpO1xuICAgICAgICByaW5nID0gbnVsbDtcbiAgICAgICAgaWYgKCFuKSByZXR1cm47XG4gICAgICAgIGlmIChjbGVhbiAmIDEpIHtcbiAgICAgICAgICBzZWdtZW50ID0gcmluZ1NlZ21lbnRzWzBdO1xuICAgICAgICAgIHZhciBuID0gc2VnbWVudC5sZW5ndGggLSAxLCBpID0gLTEsIHBvaW50O1xuICAgICAgICAgIGlmIChuID4gMCkge1xuICAgICAgICAgICAgaWYgKCFwb2x5Z29uU3RhcnRlZCkgbGlzdGVuZXIucG9seWdvblN0YXJ0KCksIHBvbHlnb25TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxpc3RlbmVyLmxpbmVTdGFydCgpO1xuICAgICAgICAgICAgd2hpbGUgKCsraSA8IG4pIGxpc3RlbmVyLnBvaW50KChwb2ludCA9IHNlZ21lbnRbaV0pWzBdLCBwb2ludFsxXSk7XG4gICAgICAgICAgICBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobiA+IDEgJiYgY2xlYW4gJiAyKSByaW5nU2VnbWVudHMucHVzaChyaW5nU2VnbWVudHMucG9wKCkuY29uY2F0KHJpbmdTZWdtZW50cy5zaGlmdCgpKSk7XG4gICAgICAgIHNlZ21lbnRzLnB1c2gocmluZ1NlZ21lbnRzLmZpbHRlcihkM19nZW9fY2xpcFNlZ21lbnRMZW5ndGgxKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xpcDtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jbGlwU2VnbWVudExlbmd0aDEoc2VnbWVudCkge1xuICAgIHJldHVybiBzZWdtZW50Lmxlbmd0aCA+IDE7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NsaXBCdWZmZXJMaXN0ZW5lcigpIHtcbiAgICB2YXIgbGluZXMgPSBbXSwgbGluZTtcbiAgICByZXR1cm4ge1xuICAgICAgbGluZVN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGluZXMucHVzaChsaW5lID0gW10pO1xuICAgICAgfSxcbiAgICAgIHBvaW50OiBmdW5jdGlvbijOuywgz4YpIHtcbiAgICAgICAgbGluZS5wdXNoKFsgzrssIM+GIF0pO1xuICAgICAgfSxcbiAgICAgIGxpbmVFbmQ6IGQzX25vb3AsXG4gICAgICBidWZmZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gbGluZXM7XG4gICAgICAgIGxpbmVzID0gW107XG4gICAgICAgIGxpbmUgPSBudWxsO1xuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgfSxcbiAgICAgIHJlam9pbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxKSBsaW5lcy5wdXNoKGxpbmVzLnBvcCgpLmNvbmNhdChsaW5lcy5zaGlmdCgpKSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2xpcFNvcnQoYSwgYikge1xuICAgIHJldHVybiAoKGEgPSBhLngpWzBdIDwgMCA/IGFbMV0gLSBoYWxmz4AgLSDOtSA6IGhhbGbPgCAtIGFbMV0pIC0gKChiID0gYi54KVswXSA8IDAgPyBiWzFdIC0gaGFsZs+AIC0gzrUgOiBoYWxmz4AgLSBiWzFdKTtcbiAgfVxuICB2YXIgZDNfZ2VvX2NsaXBBbnRpbWVyaWRpYW4gPSBkM19nZW9fY2xpcChkM190cnVlLCBkM19nZW9fY2xpcEFudGltZXJpZGlhbkxpbmUsIGQzX2dlb19jbGlwQW50aW1lcmlkaWFuSW50ZXJwb2xhdGUsIFsgLc+ALCAtz4AgLyAyIF0pO1xuICBmdW5jdGlvbiBkM19nZW9fY2xpcEFudGltZXJpZGlhbkxpbmUobGlzdGVuZXIpIHtcbiAgICB2YXIgzrswID0gTmFOLCDPhjAgPSBOYU4sIHPOuzAgPSBOYU4sIGNsZWFuO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgY2xlYW4gPSAxO1xuICAgICAgfSxcbiAgICAgIHBvaW50OiBmdW5jdGlvbijOuzEsIM+GMSkge1xuICAgICAgICB2YXIgc867MSA9IM67MSA+IDAgPyDPgCA6IC3PgCwgZM67ID0gYWJzKM67MSAtIM67MCk7XG4gICAgICAgIGlmIChhYnMoZM67IC0gz4ApIDwgzrUpIHtcbiAgICAgICAgICBsaXN0ZW5lci5wb2ludCjOuzAsIM+GMCA9ICjPhjAgKyDPhjEpIC8gMiA+IDAgPyBoYWxmz4AgOiAtaGFsZs+AKTtcbiAgICAgICAgICBsaXN0ZW5lci5wb2ludChzzrswLCDPhjApO1xuICAgICAgICAgIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgICAgICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgICBsaXN0ZW5lci5wb2ludChzzrsxLCDPhjApO1xuICAgICAgICAgIGxpc3RlbmVyLnBvaW50KM67MSwgz4YwKTtcbiAgICAgICAgICBjbGVhbiA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc867MCAhPT0gc867MSAmJiBkzrsgPj0gz4ApIHtcbiAgICAgICAgICBpZiAoYWJzKM67MCAtIHPOuzApIDwgzrUpIM67MCAtPSBzzrswICogzrU7XG4gICAgICAgICAgaWYgKGFicyjOuzEgLSBzzrsxKSA8IM61KSDOuzEgLT0gc867MSAqIM61O1xuICAgICAgICAgIM+GMCA9IGQzX2dlb19jbGlwQW50aW1lcmlkaWFuSW50ZXJzZWN0KM67MCwgz4YwLCDOuzEsIM+GMSk7XG4gICAgICAgICAgbGlzdGVuZXIucG9pbnQoc867MCwgz4YwKTtcbiAgICAgICAgICBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgbGlzdGVuZXIucG9pbnQoc867MSwgz4YwKTtcbiAgICAgICAgICBjbGVhbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXIucG9pbnQozrswID0gzrsxLCDPhjAgPSDPhjEpO1xuICAgICAgICBzzrswID0gc867MTtcbiAgICAgIH0sXG4gICAgICBsaW5lRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGlzdGVuZXIubGluZUVuZCgpO1xuICAgICAgICDOuzAgPSDPhjAgPSBOYU47XG4gICAgICB9LFxuICAgICAgY2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gMiAtIGNsZWFuO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NsaXBBbnRpbWVyaWRpYW5JbnRlcnNlY3QozrswLCDPhjAsIM67MSwgz4YxKSB7XG4gICAgdmFyIGNvc8+GMCwgY29zz4YxLCBzaW7OuzBfzrsxID0gTWF0aC5zaW4ozrswIC0gzrsxKTtcbiAgICByZXR1cm4gYWJzKHNpbs67MF/OuzEpID4gzrUgPyBNYXRoLmF0YW4oKE1hdGguc2luKM+GMCkgKiAoY29zz4YxID0gTWF0aC5jb3Moz4YxKSkgKiBNYXRoLnNpbijOuzEpIC0gTWF0aC5zaW4oz4YxKSAqIChjb3PPhjAgPSBNYXRoLmNvcyjPhjApKSAqIE1hdGguc2luKM67MCkpIC8gKGNvc8+GMCAqIGNvc8+GMSAqIHNpbs67MF/OuzEpKSA6ICjPhjAgKyDPhjEpIC8gMjtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2xpcEFudGltZXJpZGlhbkludGVycG9sYXRlKGZyb20sIHRvLCBkaXJlY3Rpb24sIGxpc3RlbmVyKSB7XG4gICAgdmFyIM+GO1xuICAgIGlmIChmcm9tID09IG51bGwpIHtcbiAgICAgIM+GID0gZGlyZWN0aW9uICogaGFsZs+AO1xuICAgICAgbGlzdGVuZXIucG9pbnQoLc+ALCDPhik7XG4gICAgICBsaXN0ZW5lci5wb2ludCgwLCDPhik7XG4gICAgICBsaXN0ZW5lci5wb2ludCjPgCwgz4YpO1xuICAgICAgbGlzdGVuZXIucG9pbnQoz4AsIDApO1xuICAgICAgbGlzdGVuZXIucG9pbnQoz4AsIC3Phik7XG4gICAgICBsaXN0ZW5lci5wb2ludCgwLCAtz4YpO1xuICAgICAgbGlzdGVuZXIucG9pbnQoLc+ALCAtz4YpO1xuICAgICAgbGlzdGVuZXIucG9pbnQoLc+ALCAwKTtcbiAgICAgIGxpc3RlbmVyLnBvaW50KC3PgCwgz4YpO1xuICAgIH0gZWxzZSBpZiAoYWJzKGZyb21bMF0gLSB0b1swXSkgPiDOtSkge1xuICAgICAgdmFyIHMgPSBmcm9tWzBdIDwgdG9bMF0gPyDPgCA6IC3PgDtcbiAgICAgIM+GID0gZGlyZWN0aW9uICogcyAvIDI7XG4gICAgICBsaXN0ZW5lci5wb2ludCgtcywgz4YpO1xuICAgICAgbGlzdGVuZXIucG9pbnQoMCwgz4YpO1xuICAgICAgbGlzdGVuZXIucG9pbnQocywgz4YpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0ZW5lci5wb2ludCh0b1swXSwgdG9bMV0pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fcG9pbnRJblBvbHlnb24ocG9pbnQsIHBvbHlnb24pIHtcbiAgICB2YXIgbWVyaWRpYW4gPSBwb2ludFswXSwgcGFyYWxsZWwgPSBwb2ludFsxXSwgbWVyaWRpYW5Ob3JtYWwgPSBbIE1hdGguc2luKG1lcmlkaWFuKSwgLU1hdGguY29zKG1lcmlkaWFuKSwgMCBdLCBwb2xhckFuZ2xlID0gMCwgd2luZGluZyA9IDA7XG4gICAgZDNfZ2VvX2FyZWFSaW5nU3VtLnJlc2V0KCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBwb2x5Z29uLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIHJpbmcgPSBwb2x5Z29uW2ldLCBtID0gcmluZy5sZW5ndGg7XG4gICAgICBpZiAoIW0pIGNvbnRpbnVlO1xuICAgICAgdmFyIHBvaW50MCA9IHJpbmdbMF0sIM67MCA9IHBvaW50MFswXSwgz4YwID0gcG9pbnQwWzFdIC8gMiArIM+AIC8gNCwgc2luz4YwID0gTWF0aC5zaW4oz4YwKSwgY29zz4YwID0gTWF0aC5jb3Moz4YwKSwgaiA9IDE7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAoaiA9PT0gbSkgaiA9IDA7XG4gICAgICAgIHBvaW50ID0gcmluZ1tqXTtcbiAgICAgICAgdmFyIM67ID0gcG9pbnRbMF0sIM+GID0gcG9pbnRbMV0gLyAyICsgz4AgLyA0LCBzaW7PhiA9IE1hdGguc2luKM+GKSwgY29zz4YgPSBNYXRoLmNvcyjPhiksIGTOuyA9IM67IC0gzrswLCBzZM67ID0gZM67ID49IDAgPyAxIDogLTEsIGFkzrsgPSBzZM67ICogZM67LCBhbnRpbWVyaWRpYW4gPSBhZM67ID4gz4AsIGsgPSBzaW7PhjAgKiBzaW7PhjtcbiAgICAgICAgZDNfZ2VvX2FyZWFSaW5nU3VtLmFkZChNYXRoLmF0YW4yKGsgKiBzZM67ICogTWF0aC5zaW4oYWTOuyksIGNvc8+GMCAqIGNvc8+GICsgayAqIE1hdGguY29zKGFkzrspKSk7XG4gICAgICAgIHBvbGFyQW5nbGUgKz0gYW50aW1lcmlkaWFuID8gZM67ICsgc2TOuyAqIM+EIDogZM67O1xuICAgICAgICBpZiAoYW50aW1lcmlkaWFuIF4gzrswID49IG1lcmlkaWFuIF4gzrsgPj0gbWVyaWRpYW4pIHtcbiAgICAgICAgICB2YXIgYXJjID0gZDNfZ2VvX2NhcnRlc2lhbkNyb3NzKGQzX2dlb19jYXJ0ZXNpYW4ocG9pbnQwKSwgZDNfZ2VvX2NhcnRlc2lhbihwb2ludCkpO1xuICAgICAgICAgIGQzX2dlb19jYXJ0ZXNpYW5Ob3JtYWxpemUoYXJjKTtcbiAgICAgICAgICB2YXIgaW50ZXJzZWN0aW9uID0gZDNfZ2VvX2NhcnRlc2lhbkNyb3NzKG1lcmlkaWFuTm9ybWFsLCBhcmMpO1xuICAgICAgICAgIGQzX2dlb19jYXJ0ZXNpYW5Ob3JtYWxpemUoaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgICB2YXIgz4ZhcmMgPSAoYW50aW1lcmlkaWFuIF4gZM67ID49IDAgPyAtMSA6IDEpICogZDNfYXNpbihpbnRlcnNlY3Rpb25bMl0pO1xuICAgICAgICAgIGlmIChwYXJhbGxlbCA+IM+GYXJjIHx8IHBhcmFsbGVsID09PSDPhmFyYyAmJiAoYXJjWzBdIHx8IGFyY1sxXSkpIHtcbiAgICAgICAgICAgIHdpbmRpbmcgKz0gYW50aW1lcmlkaWFuIF4gZM67ID49IDAgPyAxIDogLTE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaisrKSBicmVhaztcbiAgICAgICAgzrswID0gzrssIHNpbs+GMCA9IHNpbs+GLCBjb3PPhjAgPSBjb3PPhiwgcG9pbnQwID0gcG9pbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAocG9sYXJBbmdsZSA8IC3OtSB8fCBwb2xhckFuZ2xlIDwgzrUgJiYgZDNfZ2VvX2FyZWFSaW5nU3VtIDwgLc61KSBeIHdpbmRpbmcgJiAxO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19jbGlwQ2lyY2xlKHJhZGl1cykge1xuICAgIHZhciBjciA9IE1hdGguY29zKHJhZGl1cyksIHNtYWxsUmFkaXVzID0gY3IgPiAwLCBub3RIZW1pc3BoZXJlID0gYWJzKGNyKSA+IM61LCBpbnRlcnBvbGF0ZSA9IGQzX2dlb19jaXJjbGVJbnRlcnBvbGF0ZShyYWRpdXMsIDYgKiBkM19yYWRpYW5zKTtcbiAgICByZXR1cm4gZDNfZ2VvX2NsaXAodmlzaWJsZSwgY2xpcExpbmUsIGludGVycG9sYXRlLCBzbWFsbFJhZGl1cyA/IFsgMCwgLXJhZGl1cyBdIDogWyAtz4AsIHJhZGl1cyAtIM+AIF0pO1xuICAgIGZ1bmN0aW9uIHZpc2libGUozrssIM+GKSB7XG4gICAgICByZXR1cm4gTWF0aC5jb3MozrspICogTWF0aC5jb3Moz4YpID4gY3I7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsaXBMaW5lKGxpc3RlbmVyKSB7XG4gICAgICB2YXIgcG9pbnQwLCBjMCwgdjAsIHYwMCwgY2xlYW47XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaW5lU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHYwMCA9IHYwID0gZmFsc2U7XG4gICAgICAgICAgY2xlYW4gPSAxO1xuICAgICAgICB9LFxuICAgICAgICBwb2ludDogZnVuY3Rpb24ozrssIM+GKSB7XG4gICAgICAgICAgdmFyIHBvaW50MSA9IFsgzrssIM+GIF0sIHBvaW50MiwgdiA9IHZpc2libGUozrssIM+GKSwgYyA9IHNtYWxsUmFkaXVzID8gdiA/IDAgOiBjb2RlKM67LCDPhikgOiB2ID8gY29kZSjOuyArICjOuyA8IDAgPyDPgCA6IC3PgCksIM+GKSA6IDA7XG4gICAgICAgICAgaWYgKCFwb2ludDAgJiYgKHYwMCA9IHYwID0gdikpIGxpc3RlbmVyLmxpbmVTdGFydCgpO1xuICAgICAgICAgIGlmICh2ICE9PSB2MCkge1xuICAgICAgICAgICAgcG9pbnQyID0gaW50ZXJzZWN0KHBvaW50MCwgcG9pbnQxKTtcbiAgICAgICAgICAgIGlmIChkM19nZW9fc3BoZXJpY2FsRXF1YWwocG9pbnQwLCBwb2ludDIpIHx8IGQzX2dlb19zcGhlcmljYWxFcXVhbChwb2ludDEsIHBvaW50MikpIHtcbiAgICAgICAgICAgICAgcG9pbnQxWzBdICs9IM61O1xuICAgICAgICAgICAgICBwb2ludDFbMV0gKz0gzrU7XG4gICAgICAgICAgICAgIHYgPSB2aXNpYmxlKHBvaW50MVswXSwgcG9pbnQxWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHYgIT09IHYwKSB7XG4gICAgICAgICAgICBjbGVhbiA9IDA7XG4gICAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgICAgICAgcG9pbnQyID0gaW50ZXJzZWN0KHBvaW50MSwgcG9pbnQwKTtcbiAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQocG9pbnQyWzBdLCBwb2ludDJbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcG9pbnQyID0gaW50ZXJzZWN0KHBvaW50MCwgcG9pbnQxKTtcbiAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQocG9pbnQyWzBdLCBwb2ludDJbMV0pO1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludDAgPSBwb2ludDI7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RIZW1pc3BoZXJlICYmIHBvaW50MCAmJiBzbWFsbFJhZGl1cyBeIHYpIHtcbiAgICAgICAgICAgIHZhciB0O1xuICAgICAgICAgICAgaWYgKCEoYyAmIGMwKSAmJiAodCA9IGludGVyc2VjdChwb2ludDEsIHBvaW50MCwgdHJ1ZSkpKSB7XG4gICAgICAgICAgICAgIGNsZWFuID0gMDtcbiAgICAgICAgICAgICAgaWYgKHNtYWxsUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQodFswXVswXSwgdFswXVsxXSk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQodFsxXVswXSwgdFsxXVsxXSk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIubGluZUVuZCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLnBvaW50KHRbMV1bMF0sIHRbMV1bMV0pO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5wb2ludCh0WzBdWzBdLCB0WzBdWzFdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodiAmJiAoIXBvaW50MCB8fCAhZDNfZ2VvX3NwaGVyaWNhbEVxdWFsKHBvaW50MCwgcG9pbnQxKSkpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyLnBvaW50KHBvaW50MVswXSwgcG9pbnQxWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcG9pbnQwID0gcG9pbnQxLCB2MCA9IHYsIGMwID0gYztcbiAgICAgICAgfSxcbiAgICAgICAgbGluZUVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHYwKSBsaXN0ZW5lci5saW5lRW5kKCk7XG4gICAgICAgICAgcG9pbnQwID0gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBjbGVhbiB8ICh2MDAgJiYgdjApIDw8IDE7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVyc2VjdChhLCBiLCB0d28pIHtcbiAgICAgIHZhciBwYSA9IGQzX2dlb19jYXJ0ZXNpYW4oYSksIHBiID0gZDNfZ2VvX2NhcnRlc2lhbihiKTtcbiAgICAgIHZhciBuMSA9IFsgMSwgMCwgMCBdLCBuMiA9IGQzX2dlb19jYXJ0ZXNpYW5Dcm9zcyhwYSwgcGIpLCBuMm4yID0gZDNfZ2VvX2NhcnRlc2lhbkRvdChuMiwgbjIpLCBuMW4yID0gbjJbMF0sIGRldGVybWluYW50ID0gbjJuMiAtIG4xbjIgKiBuMW4yO1xuICAgICAgaWYgKCFkZXRlcm1pbmFudCkgcmV0dXJuICF0d28gJiYgYTtcbiAgICAgIHZhciBjMSA9IGNyICogbjJuMiAvIGRldGVybWluYW50LCBjMiA9IC1jciAqIG4xbjIgLyBkZXRlcm1pbmFudCwgbjF4bjIgPSBkM19nZW9fY2FydGVzaWFuQ3Jvc3MobjEsIG4yKSwgQSA9IGQzX2dlb19jYXJ0ZXNpYW5TY2FsZShuMSwgYzEpLCBCID0gZDNfZ2VvX2NhcnRlc2lhblNjYWxlKG4yLCBjMik7XG4gICAgICBkM19nZW9fY2FydGVzaWFuQWRkKEEsIEIpO1xuICAgICAgdmFyIHUgPSBuMXhuMiwgdyA9IGQzX2dlb19jYXJ0ZXNpYW5Eb3QoQSwgdSksIHV1ID0gZDNfZ2VvX2NhcnRlc2lhbkRvdCh1LCB1KSwgdDIgPSB3ICogdyAtIHV1ICogKGQzX2dlb19jYXJ0ZXNpYW5Eb3QoQSwgQSkgLSAxKTtcbiAgICAgIGlmICh0MiA8IDApIHJldHVybjtcbiAgICAgIHZhciB0ID0gTWF0aC5zcXJ0KHQyKSwgcSA9IGQzX2dlb19jYXJ0ZXNpYW5TY2FsZSh1LCAoLXcgLSB0KSAvIHV1KTtcbiAgICAgIGQzX2dlb19jYXJ0ZXNpYW5BZGQocSwgQSk7XG4gICAgICBxID0gZDNfZ2VvX3NwaGVyaWNhbChxKTtcbiAgICAgIGlmICghdHdvKSByZXR1cm4gcTtcbiAgICAgIHZhciDOuzAgPSBhWzBdLCDOuzEgPSBiWzBdLCDPhjAgPSBhWzFdLCDPhjEgPSBiWzFdLCB6O1xuICAgICAgaWYgKM67MSA8IM67MCkgeiA9IM67MCwgzrswID0gzrsxLCDOuzEgPSB6O1xuICAgICAgdmFyIM60zrsgPSDOuzEgLSDOuzAsIHBvbGFyID0gYWJzKM60zrsgLSDPgCkgPCDOtSwgbWVyaWRpYW4gPSBwb2xhciB8fCDOtM67IDwgzrU7XG4gICAgICBpZiAoIXBvbGFyICYmIM+GMSA8IM+GMCkgeiA9IM+GMCwgz4YwID0gz4YxLCDPhjEgPSB6O1xuICAgICAgaWYgKG1lcmlkaWFuID8gcG9sYXIgPyDPhjAgKyDPhjEgPiAwIF4gcVsxXSA8IChhYnMocVswXSAtIM67MCkgPCDOtSA/IM+GMCA6IM+GMSkgOiDPhjAgPD0gcVsxXSAmJiBxWzFdIDw9IM+GMSA6IM60zrsgPiDPgCBeICjOuzAgPD0gcVswXSAmJiBxWzBdIDw9IM67MSkpIHtcbiAgICAgICAgdmFyIHExID0gZDNfZ2VvX2NhcnRlc2lhblNjYWxlKHUsICgtdyArIHQpIC8gdXUpO1xuICAgICAgICBkM19nZW9fY2FydGVzaWFuQWRkKHExLCBBKTtcbiAgICAgICAgcmV0dXJuIFsgcSwgZDNfZ2VvX3NwaGVyaWNhbChxMSkgXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gY29kZSjOuywgz4YpIHtcbiAgICAgIHZhciByID0gc21hbGxSYWRpdXMgPyByYWRpdXMgOiDPgCAtIHJhZGl1cywgY29kZSA9IDA7XG4gICAgICBpZiAozrsgPCAtcikgY29kZSB8PSAxOyBlbHNlIGlmICjOuyA+IHIpIGNvZGUgfD0gMjtcbiAgICAgIGlmICjPhiA8IC1yKSBjb2RlIHw9IDQ7IGVsc2UgaWYgKM+GID4gcikgY29kZSB8PSA4O1xuICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fY2xpcExpbmUoeDAsIHkwLCB4MSwgeTEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIGEgPSBsaW5lLmEsIGIgPSBsaW5lLmIsIGF4ID0gYS54LCBheSA9IGEueSwgYnggPSBiLngsIGJ5ID0gYi55LCB0MCA9IDAsIHQxID0gMSwgZHggPSBieCAtIGF4LCBkeSA9IGJ5IC0gYXksIHI7XG4gICAgICByID0geDAgLSBheDtcbiAgICAgIGlmICghZHggJiYgciA+IDApIHJldHVybjtcbiAgICAgIHIgLz0gZHg7XG4gICAgICBpZiAoZHggPCAwKSB7XG4gICAgICAgIGlmIChyIDwgdDApIHJldHVybjtcbiAgICAgICAgaWYgKHIgPCB0MSkgdDEgPSByO1xuICAgICAgfSBlbHNlIGlmIChkeCA+IDApIHtcbiAgICAgICAgaWYgKHIgPiB0MSkgcmV0dXJuO1xuICAgICAgICBpZiAociA+IHQwKSB0MCA9IHI7XG4gICAgICB9XG4gICAgICByID0geDEgLSBheDtcbiAgICAgIGlmICghZHggJiYgciA8IDApIHJldHVybjtcbiAgICAgIHIgLz0gZHg7XG4gICAgICBpZiAoZHggPCAwKSB7XG4gICAgICAgIGlmIChyID4gdDEpIHJldHVybjtcbiAgICAgICAgaWYgKHIgPiB0MCkgdDAgPSByO1xuICAgICAgfSBlbHNlIGlmIChkeCA+IDApIHtcbiAgICAgICAgaWYgKHIgPCB0MCkgcmV0dXJuO1xuICAgICAgICBpZiAociA8IHQxKSB0MSA9IHI7XG4gICAgICB9XG4gICAgICByID0geTAgLSBheTtcbiAgICAgIGlmICghZHkgJiYgciA+IDApIHJldHVybjtcbiAgICAgIHIgLz0gZHk7XG4gICAgICBpZiAoZHkgPCAwKSB7XG4gICAgICAgIGlmIChyIDwgdDApIHJldHVybjtcbiAgICAgICAgaWYgKHIgPCB0MSkgdDEgPSByO1xuICAgICAgfSBlbHNlIGlmIChkeSA+IDApIHtcbiAgICAgICAgaWYgKHIgPiB0MSkgcmV0dXJuO1xuICAgICAgICBpZiAociA+IHQwKSB0MCA9IHI7XG4gICAgICB9XG4gICAgICByID0geTEgLSBheTtcbiAgICAgIGlmICghZHkgJiYgciA8IDApIHJldHVybjtcbiAgICAgIHIgLz0gZHk7XG4gICAgICBpZiAoZHkgPCAwKSB7XG4gICAgICAgIGlmIChyID4gdDEpIHJldHVybjtcbiAgICAgICAgaWYgKHIgPiB0MCkgdDAgPSByO1xuICAgICAgfSBlbHNlIGlmIChkeSA+IDApIHtcbiAgICAgICAgaWYgKHIgPCB0MCkgcmV0dXJuO1xuICAgICAgICBpZiAociA8IHQxKSB0MSA9IHI7XG4gICAgICB9XG4gICAgICBpZiAodDAgPiAwKSBsaW5lLmEgPSB7XG4gICAgICAgIHg6IGF4ICsgdDAgKiBkeCxcbiAgICAgICAgeTogYXkgKyB0MCAqIGR5XG4gICAgICB9O1xuICAgICAgaWYgKHQxIDwgMSkgbGluZS5iID0ge1xuICAgICAgICB4OiBheCArIHQxICogZHgsXG4gICAgICAgIHk6IGF5ICsgdDEgKiBkeVxuICAgICAgfTtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH07XG4gIH1cbiAgdmFyIGQzX2dlb19jbGlwRXh0ZW50TUFYID0gMWU5O1xuICBkMy5nZW8uY2xpcEV4dGVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB4MCwgeTAsIHgxLCB5MSwgc3RyZWFtLCBjbGlwLCBjbGlwRXh0ZW50ID0ge1xuICAgICAgc3RyZWFtOiBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICAgICAgaWYgKHN0cmVhbSkgc3RyZWFtLnZhbGlkID0gZmFsc2U7XG4gICAgICAgIHN0cmVhbSA9IGNsaXAob3V0cHV0KTtcbiAgICAgICAgc3RyZWFtLnZhbGlkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgIH0sXG4gICAgICBleHRlbnQ6IGZ1bmN0aW9uKF8pIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gWyBbIHgwLCB5MCBdLCBbIHgxLCB5MSBdIF07XG4gICAgICAgIGNsaXAgPSBkM19nZW9fY2xpcEV4dGVudCh4MCA9ICtfWzBdWzBdLCB5MCA9ICtfWzBdWzFdLCB4MSA9ICtfWzFdWzBdLCB5MSA9ICtfWzFdWzFdKTtcbiAgICAgICAgaWYgKHN0cmVhbSkgc3RyZWFtLnZhbGlkID0gZmFsc2UsIHN0cmVhbSA9IG51bGw7XG4gICAgICAgIHJldHVybiBjbGlwRXh0ZW50O1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGNsaXBFeHRlbnQuZXh0ZW50KFsgWyAwLCAwIF0sIFsgOTYwLCA1MDAgXSBdKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvX2NsaXBFeHRlbnQoeDAsIHkwLCB4MSwgeTEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0ZW5lcl8gPSBsaXN0ZW5lciwgYnVmZmVyTGlzdGVuZXIgPSBkM19nZW9fY2xpcEJ1ZmZlckxpc3RlbmVyKCksIGNsaXBMaW5lID0gZDNfZ2VvbV9jbGlwTGluZSh4MCwgeTAsIHgxLCB5MSksIHNlZ21lbnRzLCBwb2x5Z29uLCByaW5nO1xuICAgICAgdmFyIGNsaXAgPSB7XG4gICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgbGluZVN0YXJ0OiBsaW5lU3RhcnQsXG4gICAgICAgIGxpbmVFbmQ6IGxpbmVFbmQsXG4gICAgICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbGlzdGVuZXIgPSBidWZmZXJMaXN0ZW5lcjtcbiAgICAgICAgICBzZWdtZW50cyA9IFtdO1xuICAgICAgICAgIHBvbHlnb24gPSBbXTtcbiAgICAgICAgICBjbGVhbiA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIHBvbHlnb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXJfO1xuICAgICAgICAgIHNlZ21lbnRzID0gZDMubWVyZ2Uoc2VnbWVudHMpO1xuICAgICAgICAgIHZhciBjbGlwU3RhcnRJbnNpZGUgPSBpbnNpZGVQb2x5Z29uKFsgeDAsIHkxIF0pLCBpbnNpZGUgPSBjbGVhbiAmJiBjbGlwU3RhcnRJbnNpZGUsIHZpc2libGUgPSBzZWdtZW50cy5sZW5ndGg7XG4gICAgICAgICAgaWYgKGluc2lkZSB8fCB2aXNpYmxlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lci5wb2x5Z29uU3RhcnQoKTtcbiAgICAgICAgICAgIGlmIChpbnNpZGUpIHtcbiAgICAgICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgICAgIGludGVycG9sYXRlKG51bGwsIG51bGwsIDEsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgbGlzdGVuZXIubGluZUVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgICAgZDNfZ2VvX2NsaXBQb2x5Z29uKHNlZ21lbnRzLCBjb21wYXJlLCBjbGlwU3RhcnRJbnNpZGUsIGludGVycG9sYXRlLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lci5wb2x5Z29uRW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlZ21lbnRzID0gcG9seWdvbiA9IHJpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZnVuY3Rpb24gaW5zaWRlUG9seWdvbihwKSB7XG4gICAgICAgIHZhciB3biA9IDAsIG4gPSBwb2x5Z29uLmxlbmd0aCwgeSA9IHBbMV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDEsIHYgPSBwb2x5Z29uW2ldLCBtID0gdi5sZW5ndGgsIGEgPSB2WzBdLCBiOyBqIDwgbTsgKytqKSB7XG4gICAgICAgICAgICBiID0gdltqXTtcbiAgICAgICAgICAgIGlmIChhWzFdIDw9IHkpIHtcbiAgICAgICAgICAgICAgaWYgKGJbMV0gPiB5ICYmIGQzX2Nyb3NzMmQoYSwgYiwgcCkgPiAwKSArK3duO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGJbMV0gPD0geSAmJiBkM19jcm9zczJkKGEsIGIsIHApIDwgMCkgLS13bjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEgPSBiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd24gIT09IDA7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZShmcm9tLCB0bywgZGlyZWN0aW9uLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgYSA9IDAsIGExID0gMDtcbiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCB8fCAoYSA9IGNvcm5lcihmcm9tLCBkaXJlY3Rpb24pKSAhPT0gKGExID0gY29ybmVyKHRvLCBkaXJlY3Rpb24pKSB8fCBjb21wYXJlUG9pbnRzKGZyb20sIHRvKSA8IDAgXiBkaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQoYSA9PT0gMCB8fCBhID09PSAzID8geDAgOiB4MSwgYSA+IDEgPyB5MSA6IHkwKTtcbiAgICAgICAgICB9IHdoaWxlICgoYSA9IChhICsgZGlyZWN0aW9uICsgNCkgJSA0KSAhPT0gYTEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpc3RlbmVyLnBvaW50KHRvWzBdLCB0b1sxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHBvaW50VmlzaWJsZSh4LCB5KSB7XG4gICAgICAgIHJldHVybiB4MCA8PSB4ICYmIHggPD0geDEgJiYgeTAgPD0geSAmJiB5IDw9IHkxO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcG9pbnQoeCwgeSkge1xuICAgICAgICBpZiAocG9pbnRWaXNpYmxlKHgsIHkpKSBsaXN0ZW5lci5wb2ludCh4LCB5KTtcbiAgICAgIH1cbiAgICAgIHZhciB4X18sIHlfXywgdl9fLCB4XywgeV8sIHZfLCBmaXJzdCwgY2xlYW47XG4gICAgICBmdW5jdGlvbiBsaW5lU3RhcnQoKSB7XG4gICAgICAgIGNsaXAucG9pbnQgPSBsaW5lUG9pbnQ7XG4gICAgICAgIGlmIChwb2x5Z29uKSBwb2x5Z29uLnB1c2gocmluZyA9IFtdKTtcbiAgICAgICAgZmlyc3QgPSB0cnVlO1xuICAgICAgICB2XyA9IGZhbHNlO1xuICAgICAgICB4XyA9IHlfID0gTmFOO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbGluZUVuZCgpIHtcbiAgICAgICAgaWYgKHNlZ21lbnRzKSB7XG4gICAgICAgICAgbGluZVBvaW50KHhfXywgeV9fKTtcbiAgICAgICAgICBpZiAodl9fICYmIHZfKSBidWZmZXJMaXN0ZW5lci5yZWpvaW4oKTtcbiAgICAgICAgICBzZWdtZW50cy5wdXNoKGJ1ZmZlckxpc3RlbmVyLmJ1ZmZlcigpKTtcbiAgICAgICAgfVxuICAgICAgICBjbGlwLnBvaW50ID0gcG9pbnQ7XG4gICAgICAgIGlmICh2XykgbGlzdGVuZXIubGluZUVuZCgpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbGluZVBvaW50KHgsIHkpIHtcbiAgICAgICAgeCA9IE1hdGgubWF4KC1kM19nZW9fY2xpcEV4dGVudE1BWCwgTWF0aC5taW4oZDNfZ2VvX2NsaXBFeHRlbnRNQVgsIHgpKTtcbiAgICAgICAgeSA9IE1hdGgubWF4KC1kM19nZW9fY2xpcEV4dGVudE1BWCwgTWF0aC5taW4oZDNfZ2VvX2NsaXBFeHRlbnRNQVgsIHkpKTtcbiAgICAgICAgdmFyIHYgPSBwb2ludFZpc2libGUoeCwgeSk7XG4gICAgICAgIGlmIChwb2x5Z29uKSByaW5nLnB1c2goWyB4LCB5IF0pO1xuICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICB4X18gPSB4LCB5X18gPSB5LCB2X18gPSB2O1xuICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyLmxpbmVTdGFydCgpO1xuICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQoeCwgeSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2ICYmIHZfKSBsaXN0ZW5lci5wb2ludCh4LCB5KTsgZWxzZSB7XG4gICAgICAgICAgICB2YXIgbCA9IHtcbiAgICAgICAgICAgICAgYToge1xuICAgICAgICAgICAgICAgIHg6IHhfLFxuICAgICAgICAgICAgICAgIHk6IHlfXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGI6IHtcbiAgICAgICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjbGlwTGluZShsKSkge1xuICAgICAgICAgICAgICBpZiAoIXZfKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIubGluZVN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQobC5hLngsIGwuYS55KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsaXN0ZW5lci5wb2ludChsLmIueCwgbC5iLnkpO1xuICAgICAgICAgICAgICBpZiAoIXYpIGxpc3RlbmVyLmxpbmVFbmQoKTtcbiAgICAgICAgICAgICAgY2xlYW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodikge1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saW5lU3RhcnQoKTtcbiAgICAgICAgICAgICAgbGlzdGVuZXIucG9pbnQoeCwgeSk7XG4gICAgICAgICAgICAgIGNsZWFuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHhfID0geCwgeV8gPSB5LCB2XyA9IHY7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xpcDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGNvcm5lcihwLCBkaXJlY3Rpb24pIHtcbiAgICAgIHJldHVybiBhYnMocFswXSAtIHgwKSA8IM61ID8gZGlyZWN0aW9uID4gMCA/IDAgOiAzIDogYWJzKHBbMF0gLSB4MSkgPCDOtSA/IGRpcmVjdGlvbiA+IDAgPyAyIDogMSA6IGFicyhwWzFdIC0geTApIDwgzrUgPyBkaXJlY3Rpb24gPiAwID8gMSA6IDAgOiBkaXJlY3Rpb24gPiAwID8gMyA6IDI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuICAgICAgcmV0dXJuIGNvbXBhcmVQb2ludHMoYS54LCBiLngpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21wYXJlUG9pbnRzKGEsIGIpIHtcbiAgICAgIHZhciBjYSA9IGNvcm5lcihhLCAxKSwgY2IgPSBjb3JuZXIoYiwgMSk7XG4gICAgICByZXR1cm4gY2EgIT09IGNiID8gY2EgLSBjYiA6IGNhID09PSAwID8gYlsxXSAtIGFbMV0gOiBjYSA9PT0gMSA/IGFbMF0gLSBiWzBdIDogY2EgPT09IDIgPyBhWzFdIC0gYlsxXSA6IGJbMF0gLSBhWzBdO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY29uaWMocHJvamVjdEF0KSB7XG4gICAgdmFyIM+GMCA9IDAsIM+GMSA9IM+AIC8gMywgbSA9IGQzX2dlb19wcm9qZWN0aW9uTXV0YXRvcihwcm9qZWN0QXQpLCBwID0gbSjPhjAsIM+GMSk7XG4gICAgcC5wYXJhbGxlbHMgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBbIM+GMCAvIM+AICogMTgwLCDPhjEgLyDPgCAqIDE4MCBdO1xuICAgICAgcmV0dXJuIG0oz4YwID0gX1swXSAqIM+AIC8gMTgwLCDPhjEgPSBfWzFdICogz4AgLyAxODApO1xuICAgIH07XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2NvbmljRXF1YWxBcmVhKM+GMCwgz4YxKSB7XG4gICAgdmFyIHNpbs+GMCA9IE1hdGguc2luKM+GMCksIG4gPSAoc2luz4YwICsgTWF0aC5zaW4oz4YxKSkgLyAyLCBDID0gMSArIHNpbs+GMCAqICgyICogbiAtIHNpbs+GMCksIM+BMCA9IE1hdGguc3FydChDKSAvIG47XG4gICAgZnVuY3Rpb24gZm9yd2FyZCjOuywgz4YpIHtcbiAgICAgIHZhciDPgSA9IE1hdGguc3FydChDIC0gMiAqIG4gKiBNYXRoLnNpbijPhikpIC8gbjtcbiAgICAgIHJldHVybiBbIM+BICogTWF0aC5zaW4ozrsgKj0gbiksIM+BMCAtIM+BICogTWF0aC5jb3MozrspIF07XG4gICAgfVxuICAgIGZvcndhcmQuaW52ZXJ0ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIM+BMF95ID0gz4EwIC0geTtcbiAgICAgIHJldHVybiBbIE1hdGguYXRhbjIoeCwgz4EwX3kpIC8gbiwgZDNfYXNpbigoQyAtICh4ICogeCArIM+BMF95ICogz4EwX3kpICogbiAqIG4pIC8gKDIgKiBuKSkgXTtcbiAgICB9O1xuICAgIHJldHVybiBmb3J3YXJkO1xuICB9XG4gIChkMy5nZW8uY29uaWNFcXVhbEFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfZ2VvX2NvbmljKGQzX2dlb19jb25pY0VxdWFsQXJlYSk7XG4gIH0pLnJhdyA9IGQzX2dlb19jb25pY0VxdWFsQXJlYTtcbiAgZDMuZ2VvLmFsYmVycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkMy5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWyA5NiwgMCBdKS5jZW50ZXIoWyAtLjYsIDM4LjcgXSkucGFyYWxsZWxzKFsgMjkuNSwgNDUuNSBdKS5zY2FsZSgxMDcwKTtcbiAgfTtcbiAgZDMuZ2VvLmFsYmVyc1VzYSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsb3dlcjQ4ID0gZDMuZ2VvLmFsYmVycygpO1xuICAgIHZhciBhbGFza2EgPSBkMy5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWyAxNTQsIDAgXSkuY2VudGVyKFsgLTIsIDU4LjUgXSkucGFyYWxsZWxzKFsgNTUsIDY1IF0pO1xuICAgIHZhciBoYXdhaWkgPSBkMy5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWyAxNTcsIDAgXSkuY2VudGVyKFsgLTMsIDE5LjkgXSkucGFyYWxsZWxzKFsgOCwgMTggXSk7XG4gICAgdmFyIHBvaW50LCBwb2ludFN0cmVhbSA9IHtcbiAgICAgIHBvaW50OiBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIHBvaW50ID0gWyB4LCB5IF07XG4gICAgICB9XG4gICAgfSwgbG93ZXI0OFBvaW50LCBhbGFza2FQb2ludCwgaGF3YWlpUG9pbnQ7XG4gICAgZnVuY3Rpb24gYWxiZXJzVXNhKGNvb3JkaW5hdGVzKSB7XG4gICAgICB2YXIgeCA9IGNvb3JkaW5hdGVzWzBdLCB5ID0gY29vcmRpbmF0ZXNbMV07XG4gICAgICBwb2ludCA9IG51bGw7XG4gICAgICAobG93ZXI0OFBvaW50KHgsIHkpLCBwb2ludCkgfHwgKGFsYXNrYVBvaW50KHgsIHkpLCBwb2ludCkgfHwgaGF3YWlpUG9pbnQoeCwgeSk7XG4gICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfVxuICAgIGFsYmVyc1VzYS5pbnZlcnQgPSBmdW5jdGlvbihjb29yZGluYXRlcykge1xuICAgICAgdmFyIGsgPSBsb3dlcjQ4LnNjYWxlKCksIHQgPSBsb3dlcjQ4LnRyYW5zbGF0ZSgpLCB4ID0gKGNvb3JkaW5hdGVzWzBdIC0gdFswXSkgLyBrLCB5ID0gKGNvb3JkaW5hdGVzWzFdIC0gdFsxXSkgLyBrO1xuICAgICAgcmV0dXJuICh5ID49IC4xMiAmJiB5IDwgLjIzNCAmJiB4ID49IC0uNDI1ICYmIHggPCAtLjIxNCA/IGFsYXNrYSA6IHkgPj0gLjE2NiAmJiB5IDwgLjIzNCAmJiB4ID49IC0uMjE0ICYmIHggPCAtLjExNSA/IGhhd2FpaSA6IGxvd2VyNDgpLmludmVydChjb29yZGluYXRlcyk7XG4gICAgfTtcbiAgICBhbGJlcnNVc2Euc3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICB2YXIgbG93ZXI0OFN0cmVhbSA9IGxvd2VyNDguc3RyZWFtKHN0cmVhbSksIGFsYXNrYVN0cmVhbSA9IGFsYXNrYS5zdHJlYW0oc3RyZWFtKSwgaGF3YWlpU3RyZWFtID0gaGF3YWlpLnN0cmVhbShzdHJlYW0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9pbnQ6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgICBsb3dlcjQ4U3RyZWFtLnBvaW50KHgsIHkpO1xuICAgICAgICAgIGFsYXNrYVN0cmVhbS5wb2ludCh4LCB5KTtcbiAgICAgICAgICBoYXdhaWlTdHJlYW0ucG9pbnQoeCwgeSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNwaGVyZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbG93ZXI0OFN0cmVhbS5zcGhlcmUoKTtcbiAgICAgICAgICBhbGFza2FTdHJlYW0uc3BoZXJlKCk7XG4gICAgICAgICAgaGF3YWlpU3RyZWFtLnNwaGVyZSgpO1xuICAgICAgICB9LFxuICAgICAgICBsaW5lU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGxvd2VyNDhTdHJlYW0ubGluZVN0YXJ0KCk7XG4gICAgICAgICAgYWxhc2thU3RyZWFtLmxpbmVTdGFydCgpO1xuICAgICAgICAgIGhhd2FpaVN0cmVhbS5saW5lU3RhcnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbGluZUVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbG93ZXI0OFN0cmVhbS5saW5lRW5kKCk7XG4gICAgICAgICAgYWxhc2thU3RyZWFtLmxpbmVFbmQoKTtcbiAgICAgICAgICBoYXdhaWlTdHJlYW0ubGluZUVuZCgpO1xuICAgICAgICB9LFxuICAgICAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGxvd2VyNDhTdHJlYW0ucG9seWdvblN0YXJ0KCk7XG4gICAgICAgICAgYWxhc2thU3RyZWFtLnBvbHlnb25TdGFydCgpO1xuICAgICAgICAgIGhhd2FpaVN0cmVhbS5wb2x5Z29uU3RhcnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9seWdvbkVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbG93ZXI0OFN0cmVhbS5wb2x5Z29uRW5kKCk7XG4gICAgICAgICAgYWxhc2thU3RyZWFtLnBvbHlnb25FbmQoKTtcbiAgICAgICAgICBoYXdhaWlTdHJlYW0ucG9seWdvbkVuZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgYWxiZXJzVXNhLnByZWNpc2lvbiA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxvd2VyNDgucHJlY2lzaW9uKCk7XG4gICAgICBsb3dlcjQ4LnByZWNpc2lvbihfKTtcbiAgICAgIGFsYXNrYS5wcmVjaXNpb24oXyk7XG4gICAgICBoYXdhaWkucHJlY2lzaW9uKF8pO1xuICAgICAgcmV0dXJuIGFsYmVyc1VzYTtcbiAgICB9O1xuICAgIGFsYmVyc1VzYS5zY2FsZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxvd2VyNDguc2NhbGUoKTtcbiAgICAgIGxvd2VyNDguc2NhbGUoXyk7XG4gICAgICBhbGFza2Euc2NhbGUoXyAqIC4zNSk7XG4gICAgICBoYXdhaWkuc2NhbGUoXyk7XG4gICAgICByZXR1cm4gYWxiZXJzVXNhLnRyYW5zbGF0ZShsb3dlcjQ4LnRyYW5zbGF0ZSgpKTtcbiAgICB9O1xuICAgIGFsYmVyc1VzYS50cmFuc2xhdGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBsb3dlcjQ4LnRyYW5zbGF0ZSgpO1xuICAgICAgdmFyIGsgPSBsb3dlcjQ4LnNjYWxlKCksIHggPSArX1swXSwgeSA9ICtfWzFdO1xuICAgICAgbG93ZXI0OFBvaW50ID0gbG93ZXI0OC50cmFuc2xhdGUoXykuY2xpcEV4dGVudChbIFsgeCAtIC40NTUgKiBrLCB5IC0gLjIzOCAqIGsgXSwgWyB4ICsgLjQ1NSAqIGssIHkgKyAuMjM4ICogayBdIF0pLnN0cmVhbShwb2ludFN0cmVhbSkucG9pbnQ7XG4gICAgICBhbGFza2FQb2ludCA9IGFsYXNrYS50cmFuc2xhdGUoWyB4IC0gLjMwNyAqIGssIHkgKyAuMjAxICogayBdKS5jbGlwRXh0ZW50KFsgWyB4IC0gLjQyNSAqIGsgKyDOtSwgeSArIC4xMiAqIGsgKyDOtSBdLCBbIHggLSAuMjE0ICogayAtIM61LCB5ICsgLjIzNCAqIGsgLSDOtSBdIF0pLnN0cmVhbShwb2ludFN0cmVhbSkucG9pbnQ7XG4gICAgICBoYXdhaWlQb2ludCA9IGhhd2FpaS50cmFuc2xhdGUoWyB4IC0gLjIwNSAqIGssIHkgKyAuMjEyICogayBdKS5jbGlwRXh0ZW50KFsgWyB4IC0gLjIxNCAqIGsgKyDOtSwgeSArIC4xNjYgKiBrICsgzrUgXSwgWyB4IC0gLjExNSAqIGsgLSDOtSwgeSArIC4yMzQgKiBrIC0gzrUgXSBdKS5zdHJlYW0ocG9pbnRTdHJlYW0pLnBvaW50O1xuICAgICAgcmV0dXJuIGFsYmVyc1VzYTtcbiAgICB9O1xuICAgIHJldHVybiBhbGJlcnNVc2Euc2NhbGUoMTA3MCk7XG4gIH07XG4gIHZhciBkM19nZW9fcGF0aEFyZWFTdW0sIGQzX2dlb19wYXRoQXJlYVBvbHlnb24sIGQzX2dlb19wYXRoQXJlYSA9IHtcbiAgICBwb2ludDogZDNfbm9vcCxcbiAgICBsaW5lU3RhcnQ6IGQzX25vb3AsXG4gICAgbGluZUVuZDogZDNfbm9vcCxcbiAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZDNfZ2VvX3BhdGhBcmVhUG9seWdvbiA9IDA7XG4gICAgICBkM19nZW9fcGF0aEFyZWEubGluZVN0YXJ0ID0gZDNfZ2VvX3BhdGhBcmVhUmluZ1N0YXJ0O1xuICAgIH0sXG4gICAgcG9seWdvbkVuZDogZnVuY3Rpb24oKSB7XG4gICAgICBkM19nZW9fcGF0aEFyZWEubGluZVN0YXJ0ID0gZDNfZ2VvX3BhdGhBcmVhLmxpbmVFbmQgPSBkM19nZW9fcGF0aEFyZWEucG9pbnQgPSBkM19ub29wO1xuICAgICAgZDNfZ2VvX3BhdGhBcmVhU3VtICs9IGFicyhkM19nZW9fcGF0aEFyZWFQb2x5Z29uIC8gMik7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fcGF0aEFyZWFSaW5nU3RhcnQoKSB7XG4gICAgdmFyIHgwMCwgeTAwLCB4MCwgeTA7XG4gICAgZDNfZ2VvX3BhdGhBcmVhLnBvaW50ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgZDNfZ2VvX3BhdGhBcmVhLnBvaW50ID0gbmV4dFBvaW50O1xuICAgICAgeDAwID0geDAgPSB4LCB5MDAgPSB5MCA9IHk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBuZXh0UG9pbnQoeCwgeSkge1xuICAgICAgZDNfZ2VvX3BhdGhBcmVhUG9seWdvbiArPSB5MCAqIHggLSB4MCAqIHk7XG4gICAgICB4MCA9IHgsIHkwID0geTtcbiAgICB9XG4gICAgZDNfZ2VvX3BhdGhBcmVhLmxpbmVFbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIG5leHRQb2ludCh4MDAsIHkwMCk7XG4gICAgfTtcbiAgfVxuICB2YXIgZDNfZ2VvX3BhdGhCb3VuZHNYMCwgZDNfZ2VvX3BhdGhCb3VuZHNZMCwgZDNfZ2VvX3BhdGhCb3VuZHNYMSwgZDNfZ2VvX3BhdGhCb3VuZHNZMTtcbiAgdmFyIGQzX2dlb19wYXRoQm91bmRzID0ge1xuICAgIHBvaW50OiBkM19nZW9fcGF0aEJvdW5kc1BvaW50LFxuICAgIGxpbmVTdGFydDogZDNfbm9vcCxcbiAgICBsaW5lRW5kOiBkM19ub29wLFxuICAgIHBvbHlnb25TdGFydDogZDNfbm9vcCxcbiAgICBwb2x5Z29uRW5kOiBkM19ub29wXG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb19wYXRoQm91bmRzUG9pbnQoeCwgeSkge1xuICAgIGlmICh4IDwgZDNfZ2VvX3BhdGhCb3VuZHNYMCkgZDNfZ2VvX3BhdGhCb3VuZHNYMCA9IHg7XG4gICAgaWYgKHggPiBkM19nZW9fcGF0aEJvdW5kc1gxKSBkM19nZW9fcGF0aEJvdW5kc1gxID0geDtcbiAgICBpZiAoeSA8IGQzX2dlb19wYXRoQm91bmRzWTApIGQzX2dlb19wYXRoQm91bmRzWTAgPSB5O1xuICAgIGlmICh5ID4gZDNfZ2VvX3BhdGhCb3VuZHNZMSkgZDNfZ2VvX3BhdGhCb3VuZHNZMSA9IHk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX3BhdGhCdWZmZXIoKSB7XG4gICAgdmFyIHBvaW50Q2lyY2xlID0gZDNfZ2VvX3BhdGhCdWZmZXJDaXJjbGUoNC41KSwgYnVmZmVyID0gW107XG4gICAgdmFyIHN0cmVhbSA9IHtcbiAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgIGxpbmVTdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0cmVhbS5wb2ludCA9IHBvaW50TGluZVN0YXJ0O1xuICAgICAgfSxcbiAgICAgIGxpbmVFbmQ6IGxpbmVFbmQsXG4gICAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdHJlYW0ubGluZUVuZCA9IGxpbmVFbmRQb2x5Z29uO1xuICAgICAgfSxcbiAgICAgIHBvbHlnb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdHJlYW0ubGluZUVuZCA9IGxpbmVFbmQ7XG4gICAgICAgIHN0cmVhbS5wb2ludCA9IHBvaW50O1xuICAgICAgfSxcbiAgICAgIHBvaW50UmFkaXVzOiBmdW5jdGlvbihfKSB7XG4gICAgICAgIHBvaW50Q2lyY2xlID0gZDNfZ2VvX3BhdGhCdWZmZXJDaXJjbGUoXyk7XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICB9LFxuICAgICAgcmVzdWx0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gYnVmZmVyLmpvaW4oXCJcIik7XG4gICAgICAgICAgYnVmZmVyID0gW107XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gcG9pbnQoeCwgeSkge1xuICAgICAgYnVmZmVyLnB1c2goXCJNXCIsIHgsIFwiLFwiLCB5LCBwb2ludENpcmNsZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvaW50TGluZVN0YXJ0KHgsIHkpIHtcbiAgICAgIGJ1ZmZlci5wdXNoKFwiTVwiLCB4LCBcIixcIiwgeSk7XG4gICAgICBzdHJlYW0ucG9pbnQgPSBwb2ludExpbmU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvaW50TGluZSh4LCB5KSB7XG4gICAgICBidWZmZXIucHVzaChcIkxcIiwgeCwgXCIsXCIsIHkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lRW5kKCkge1xuICAgICAgc3RyZWFtLnBvaW50ID0gcG9pbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpbmVFbmRQb2x5Z29uKCkge1xuICAgICAgYnVmZmVyLnB1c2goXCJaXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19wYXRoQnVmZmVyQ2lyY2xlKHJhZGl1cykge1xuICAgIHJldHVybiBcIm0wLFwiICsgcmFkaXVzICsgXCJhXCIgKyByYWRpdXMgKyBcIixcIiArIHJhZGl1cyArIFwiIDAgMSwxIDAsXCIgKyAtMiAqIHJhZGl1cyArIFwiYVwiICsgcmFkaXVzICsgXCIsXCIgKyByYWRpdXMgKyBcIiAwIDEsMSAwLFwiICsgMiAqIHJhZGl1cyArIFwielwiO1xuICB9XG4gIHZhciBkM19nZW9fcGF0aENlbnRyb2lkID0ge1xuICAgIHBvaW50OiBkM19nZW9fcGF0aENlbnRyb2lkUG9pbnQsXG4gICAgbGluZVN0YXJ0OiBkM19nZW9fcGF0aENlbnRyb2lkTGluZVN0YXJ0LFxuICAgIGxpbmVFbmQ6IGQzX2dlb19wYXRoQ2VudHJvaWRMaW5lRW5kLFxuICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICBkM19nZW9fcGF0aENlbnRyb2lkLmxpbmVTdGFydCA9IGQzX2dlb19wYXRoQ2VudHJvaWRSaW5nU3RhcnQ7XG4gICAgfSxcbiAgICBwb2x5Z29uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIGQzX2dlb19wYXRoQ2VudHJvaWQucG9pbnQgPSBkM19nZW9fcGF0aENlbnRyb2lkUG9pbnQ7XG4gICAgICBkM19nZW9fcGF0aENlbnRyb2lkLmxpbmVTdGFydCA9IGQzX2dlb19wYXRoQ2VudHJvaWRMaW5lU3RhcnQ7XG4gICAgICBkM19nZW9fcGF0aENlbnRyb2lkLmxpbmVFbmQgPSBkM19nZW9fcGF0aENlbnRyb2lkTGluZUVuZDtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb19wYXRoQ2VudHJvaWRQb2ludCh4LCB5KSB7XG4gICAgZDNfZ2VvX2NlbnRyb2lkWDAgKz0geDtcbiAgICBkM19nZW9fY2VudHJvaWRZMCArPSB5O1xuICAgICsrZDNfZ2VvX2NlbnRyb2lkWjA7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX3BhdGhDZW50cm9pZExpbmVTdGFydCgpIHtcbiAgICB2YXIgeDAsIHkwO1xuICAgIGQzX2dlb19wYXRoQ2VudHJvaWQucG9pbnQgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICBkM19nZW9fcGF0aENlbnRyb2lkLnBvaW50ID0gbmV4dFBvaW50O1xuICAgICAgZDNfZ2VvX3BhdGhDZW50cm9pZFBvaW50KHgwID0geCwgeTAgPSB5KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIG5leHRQb2ludCh4LCB5KSB7XG4gICAgICB2YXIgZHggPSB4IC0geDAsIGR5ID0geSAtIHkwLCB6ID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgIGQzX2dlb19jZW50cm9pZFgxICs9IHogKiAoeDAgKyB4KSAvIDI7XG4gICAgICBkM19nZW9fY2VudHJvaWRZMSArPSB6ICogKHkwICsgeSkgLyAyO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWjEgKz0gejtcbiAgICAgIGQzX2dlb19wYXRoQ2VudHJvaWRQb2ludCh4MCA9IHgsIHkwID0geSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19wYXRoQ2VudHJvaWRMaW5lRW5kKCkge1xuICAgIGQzX2dlb19wYXRoQ2VudHJvaWQucG9pbnQgPSBkM19nZW9fcGF0aENlbnRyb2lkUG9pbnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX3BhdGhDZW50cm9pZFJpbmdTdGFydCgpIHtcbiAgICB2YXIgeDAwLCB5MDAsIHgwLCB5MDtcbiAgICBkM19nZW9fcGF0aENlbnRyb2lkLnBvaW50ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgZDNfZ2VvX3BhdGhDZW50cm9pZC5wb2ludCA9IG5leHRQb2ludDtcbiAgICAgIGQzX2dlb19wYXRoQ2VudHJvaWRQb2ludCh4MDAgPSB4MCA9IHgsIHkwMCA9IHkwID0geSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBuZXh0UG9pbnQoeCwgeSkge1xuICAgICAgdmFyIGR4ID0geCAtIHgwLCBkeSA9IHkgLSB5MCwgeiA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICBkM19nZW9fY2VudHJvaWRYMSArPSB6ICogKHgwICsgeCkgLyAyO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWTEgKz0geiAqICh5MCArIHkpIC8gMjtcbiAgICAgIGQzX2dlb19jZW50cm9pZFoxICs9IHo7XG4gICAgICB6ID0geTAgKiB4IC0geDAgKiB5O1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWDIgKz0geiAqICh4MCArIHgpO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWTIgKz0geiAqICh5MCArIHkpO1xuICAgICAgZDNfZ2VvX2NlbnRyb2lkWjIgKz0geiAqIDM7XG4gICAgICBkM19nZW9fcGF0aENlbnRyb2lkUG9pbnQoeDAgPSB4LCB5MCA9IHkpO1xuICAgIH1cbiAgICBkM19nZW9fcGF0aENlbnRyb2lkLmxpbmVFbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIG5leHRQb2ludCh4MDAsIHkwMCk7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fcGF0aENvbnRleHQoY29udGV4dCkge1xuICAgIHZhciBwb2ludFJhZGl1cyA9IDQuNTtcbiAgICB2YXIgc3RyZWFtID0ge1xuICAgICAgcG9pbnQ6IHBvaW50LFxuICAgICAgbGluZVN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgc3RyZWFtLnBvaW50ID0gcG9pbnRMaW5lU3RhcnQ7XG4gICAgICB9LFxuICAgICAgbGluZUVuZDogbGluZUVuZCxcbiAgICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0cmVhbS5saW5lRW5kID0gbGluZUVuZFBvbHlnb247XG4gICAgICB9LFxuICAgICAgcG9seWdvbkVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0cmVhbS5saW5lRW5kID0gbGluZUVuZDtcbiAgICAgICAgc3RyZWFtLnBvaW50ID0gcG9pbnQ7XG4gICAgICB9LFxuICAgICAgcG9pbnRSYWRpdXM6IGZ1bmN0aW9uKF8pIHtcbiAgICAgICAgcG9pbnRSYWRpdXMgPSBfO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgICAgfSxcbiAgICAgIHJlc3VsdDogZDNfbm9vcFxuICAgIH07XG4gICAgZnVuY3Rpb24gcG9pbnQoeCwgeSkge1xuICAgICAgY29udGV4dC5tb3ZlVG8oeCArIHBvaW50UmFkaXVzLCB5KTtcbiAgICAgIGNvbnRleHQuYXJjKHgsIHksIHBvaW50UmFkaXVzLCAwLCDPhCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvaW50TGluZVN0YXJ0KHgsIHkpIHtcbiAgICAgIGNvbnRleHQubW92ZVRvKHgsIHkpO1xuICAgICAgc3RyZWFtLnBvaW50ID0gcG9pbnRMaW5lO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb2ludExpbmUoeCwgeSkge1xuICAgICAgY29udGV4dC5saW5lVG8oeCwgeSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpbmVFbmQoKSB7XG4gICAgICBzdHJlYW0ucG9pbnQgPSBwb2ludDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGluZUVuZFBvbHlnb24oKSB7XG4gICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19yZXNhbXBsZShwcm9qZWN0KSB7XG4gICAgdmFyIM60MiA9IC41LCBjb3NNaW5EaXN0YW5jZSA9IE1hdGguY29zKDMwICogZDNfcmFkaWFucyksIG1heERlcHRoID0gMTY7XG4gICAgZnVuY3Rpb24gcmVzYW1wbGUoc3RyZWFtKSB7XG4gICAgICByZXR1cm4gKG1heERlcHRoID8gcmVzYW1wbGVSZWN1cnNpdmUgOiByZXNhbXBsZU5vbmUpKHN0cmVhbSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc2FtcGxlTm9uZShzdHJlYW0pIHtcbiAgICAgIHJldHVybiBkM19nZW9fdHJhbnNmb3JtUG9pbnQoc3RyZWFtLCBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIHggPSBwcm9qZWN0KHgsIHkpO1xuICAgICAgICBzdHJlYW0ucG9pbnQoeFswXSwgeFsxXSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzYW1wbGVSZWN1cnNpdmUoc3RyZWFtKSB7XG4gICAgICB2YXIgzrswMCwgz4YwMCwgeDAwLCB5MDAsIGEwMCwgYjAwLCBjMDAsIM67MCwgeDAsIHkwLCBhMCwgYjAsIGMwO1xuICAgICAgdmFyIHJlc2FtcGxlID0ge1xuICAgICAgICBwb2ludDogcG9pbnQsXG4gICAgICAgIGxpbmVTdGFydDogbGluZVN0YXJ0LFxuICAgICAgICBsaW5lRW5kOiBsaW5lRW5kLFxuICAgICAgICBwb2x5Z29uU3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHN0cmVhbS5wb2x5Z29uU3RhcnQoKTtcbiAgICAgICAgICByZXNhbXBsZS5saW5lU3RhcnQgPSByaW5nU3RhcnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHBvbHlnb25FbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHN0cmVhbS5wb2x5Z29uRW5kKCk7XG4gICAgICAgICAgcmVzYW1wbGUubGluZVN0YXJ0ID0gbGluZVN0YXJ0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZnVuY3Rpb24gcG9pbnQoeCwgeSkge1xuICAgICAgICB4ID0gcHJvamVjdCh4LCB5KTtcbiAgICAgICAgc3RyZWFtLnBvaW50KHhbMF0sIHhbMV0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbGluZVN0YXJ0KCkge1xuICAgICAgICB4MCA9IE5hTjtcbiAgICAgICAgcmVzYW1wbGUucG9pbnQgPSBsaW5lUG9pbnQ7XG4gICAgICAgIHN0cmVhbS5saW5lU3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGxpbmVQb2ludCjOuywgz4YpIHtcbiAgICAgICAgdmFyIGMgPSBkM19nZW9fY2FydGVzaWFuKFsgzrssIM+GIF0pLCBwID0gcHJvamVjdCjOuywgz4YpO1xuICAgICAgICByZXNhbXBsZUxpbmVUbyh4MCwgeTAsIM67MCwgYTAsIGIwLCBjMCwgeDAgPSBwWzBdLCB5MCA9IHBbMV0sIM67MCA9IM67LCBhMCA9IGNbMF0sIGIwID0gY1sxXSwgYzAgPSBjWzJdLCBtYXhEZXB0aCwgc3RyZWFtKTtcbiAgICAgICAgc3RyZWFtLnBvaW50KHgwLCB5MCk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsaW5lRW5kKCkge1xuICAgICAgICByZXNhbXBsZS5wb2ludCA9IHBvaW50O1xuICAgICAgICBzdHJlYW0ubGluZUVuZCgpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmluZ1N0YXJ0KCkge1xuICAgICAgICBsaW5lU3RhcnQoKTtcbiAgICAgICAgcmVzYW1wbGUucG9pbnQgPSByaW5nUG9pbnQ7XG4gICAgICAgIHJlc2FtcGxlLmxpbmVFbmQgPSByaW5nRW5kO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmluZ1BvaW50KM67LCDPhikge1xuICAgICAgICBsaW5lUG9pbnQozrswMCA9IM67LCDPhjAwID0gz4YpLCB4MDAgPSB4MCwgeTAwID0geTAsIGEwMCA9IGEwLCBiMDAgPSBiMCwgYzAwID0gYzA7XG4gICAgICAgIHJlc2FtcGxlLnBvaW50ID0gbGluZVBvaW50O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmluZ0VuZCgpIHtcbiAgICAgICAgcmVzYW1wbGVMaW5lVG8oeDAsIHkwLCDOuzAsIGEwLCBiMCwgYzAsIHgwMCwgeTAwLCDOuzAwLCBhMDAsIGIwMCwgYzAwLCBtYXhEZXB0aCwgc3RyZWFtKTtcbiAgICAgICAgcmVzYW1wbGUubGluZUVuZCA9IGxpbmVFbmQ7XG4gICAgICAgIGxpbmVFbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNhbXBsZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzYW1wbGVMaW5lVG8oeDAsIHkwLCDOuzAsIGEwLCBiMCwgYzAsIHgxLCB5MSwgzrsxLCBhMSwgYjEsIGMxLCBkZXB0aCwgc3RyZWFtKSB7XG4gICAgICB2YXIgZHggPSB4MSAtIHgwLCBkeSA9IHkxIC0geTAsIGQyID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICBpZiAoZDIgPiA0ICogzrQyICYmIGRlcHRoLS0pIHtcbiAgICAgICAgdmFyIGEgPSBhMCArIGExLCBiID0gYjAgKyBiMSwgYyA9IGMwICsgYzEsIG0gPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYiArIGMgKiBjKSwgz4YyID0gTWF0aC5hc2luKGMgLz0gbSksIM67MiA9IGFicyhhYnMoYykgLSAxKSA8IM61IHx8IGFicyjOuzAgLSDOuzEpIDwgzrUgPyAozrswICsgzrsxKSAvIDIgOiBNYXRoLmF0YW4yKGIsIGEpLCBwID0gcHJvamVjdCjOuzIsIM+GMiksIHgyID0gcFswXSwgeTIgPSBwWzFdLCBkeDIgPSB4MiAtIHgwLCBkeTIgPSB5MiAtIHkwLCBkeiA9IGR5ICogZHgyIC0gZHggKiBkeTI7XG4gICAgICAgIGlmIChkeiAqIGR6IC8gZDIgPiDOtDIgfHwgYWJzKChkeCAqIGR4MiArIGR5ICogZHkyKSAvIGQyIC0gLjUpID4gLjMgfHwgYTAgKiBhMSArIGIwICogYjEgKyBjMCAqIGMxIDwgY29zTWluRGlzdGFuY2UpIHtcbiAgICAgICAgICByZXNhbXBsZUxpbmVUbyh4MCwgeTAsIM67MCwgYTAsIGIwLCBjMCwgeDIsIHkyLCDOuzIsIGEgLz0gbSwgYiAvPSBtLCBjLCBkZXB0aCwgc3RyZWFtKTtcbiAgICAgICAgICBzdHJlYW0ucG9pbnQoeDIsIHkyKTtcbiAgICAgICAgICByZXNhbXBsZUxpbmVUbyh4MiwgeTIsIM67MiwgYSwgYiwgYywgeDEsIHkxLCDOuzEsIGExLCBiMSwgYzEsIGRlcHRoLCBzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlc2FtcGxlLnByZWNpc2lvbiA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIE1hdGguc3FydCjOtDIpO1xuICAgICAgbWF4RGVwdGggPSAozrQyID0gXyAqIF8pID4gMCAmJiAxNjtcbiAgICAgIHJldHVybiByZXNhbXBsZTtcbiAgICB9O1xuICAgIHJldHVybiByZXNhbXBsZTtcbiAgfVxuICBkMy5nZW8ucGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwb2ludFJhZGl1cyA9IDQuNSwgcHJvamVjdGlvbiwgY29udGV4dCwgcHJvamVjdFN0cmVhbSwgY29udGV4dFN0cmVhbSwgY2FjaGVTdHJlYW07XG4gICAgZnVuY3Rpb24gcGF0aChvYmplY3QpIHtcbiAgICAgIGlmIChvYmplY3QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwb2ludFJhZGl1cyA9PT0gXCJmdW5jdGlvblwiKSBjb250ZXh0U3RyZWFtLnBvaW50UmFkaXVzKCtwb2ludFJhZGl1cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgaWYgKCFjYWNoZVN0cmVhbSB8fCAhY2FjaGVTdHJlYW0udmFsaWQpIGNhY2hlU3RyZWFtID0gcHJvamVjdFN0cmVhbShjb250ZXh0U3RyZWFtKTtcbiAgICAgICAgZDMuZ2VvLnN0cmVhbShvYmplY3QsIGNhY2hlU3RyZWFtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZXh0U3RyZWFtLnJlc3VsdCgpO1xuICAgIH1cbiAgICBwYXRoLmFyZWEgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGQzX2dlb19wYXRoQXJlYVN1bSA9IDA7XG4gICAgICBkMy5nZW8uc3RyZWFtKG9iamVjdCwgcHJvamVjdFN0cmVhbShkM19nZW9fcGF0aEFyZWEpKTtcbiAgICAgIHJldHVybiBkM19nZW9fcGF0aEFyZWFTdW07XG4gICAgfTtcbiAgICBwYXRoLmNlbnRyb2lkID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICBkM19nZW9fY2VudHJvaWRYMCA9IGQzX2dlb19jZW50cm9pZFkwID0gZDNfZ2VvX2NlbnRyb2lkWjAgPSBkM19nZW9fY2VudHJvaWRYMSA9IGQzX2dlb19jZW50cm9pZFkxID0gZDNfZ2VvX2NlbnRyb2lkWjEgPSBkM19nZW9fY2VudHJvaWRYMiA9IGQzX2dlb19jZW50cm9pZFkyID0gZDNfZ2VvX2NlbnRyb2lkWjIgPSAwO1xuICAgICAgZDMuZ2VvLnN0cmVhbShvYmplY3QsIHByb2plY3RTdHJlYW0oZDNfZ2VvX3BhdGhDZW50cm9pZCkpO1xuICAgICAgcmV0dXJuIGQzX2dlb19jZW50cm9pZFoyID8gWyBkM19nZW9fY2VudHJvaWRYMiAvIGQzX2dlb19jZW50cm9pZFoyLCBkM19nZW9fY2VudHJvaWRZMiAvIGQzX2dlb19jZW50cm9pZFoyIF0gOiBkM19nZW9fY2VudHJvaWRaMSA/IFsgZDNfZ2VvX2NlbnRyb2lkWDEgLyBkM19nZW9fY2VudHJvaWRaMSwgZDNfZ2VvX2NlbnRyb2lkWTEgLyBkM19nZW9fY2VudHJvaWRaMSBdIDogZDNfZ2VvX2NlbnRyb2lkWjAgPyBbIGQzX2dlb19jZW50cm9pZFgwIC8gZDNfZ2VvX2NlbnRyb2lkWjAsIGQzX2dlb19jZW50cm9pZFkwIC8gZDNfZ2VvX2NlbnRyb2lkWjAgXSA6IFsgTmFOLCBOYU4gXTtcbiAgICB9O1xuICAgIHBhdGguYm91bmRzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICBkM19nZW9fcGF0aEJvdW5kc1gxID0gZDNfZ2VvX3BhdGhCb3VuZHNZMSA9IC0oZDNfZ2VvX3BhdGhCb3VuZHNYMCA9IGQzX2dlb19wYXRoQm91bmRzWTAgPSBJbmZpbml0eSk7XG4gICAgICBkMy5nZW8uc3RyZWFtKG9iamVjdCwgcHJvamVjdFN0cmVhbShkM19nZW9fcGF0aEJvdW5kcykpO1xuICAgICAgcmV0dXJuIFsgWyBkM19nZW9fcGF0aEJvdW5kc1gwLCBkM19nZW9fcGF0aEJvdW5kc1kwIF0sIFsgZDNfZ2VvX3BhdGhCb3VuZHNYMSwgZDNfZ2VvX3BhdGhCb3VuZHNZMSBdIF07XG4gICAgfTtcbiAgICBwYXRoLnByb2plY3Rpb24gPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBwcm9qZWN0aW9uO1xuICAgICAgcHJvamVjdFN0cmVhbSA9IChwcm9qZWN0aW9uID0gXykgPyBfLnN0cmVhbSB8fCBkM19nZW9fcGF0aFByb2plY3RTdHJlYW0oXykgOiBkM19pZGVudGl0eTtcbiAgICAgIHJldHVybiByZXNldCgpO1xuICAgIH07XG4gICAgcGF0aC5jb250ZXh0ID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gY29udGV4dDtcbiAgICAgIGNvbnRleHRTdHJlYW0gPSAoY29udGV4dCA9IF8pID09IG51bGwgPyBuZXcgZDNfZ2VvX3BhdGhCdWZmZXIoKSA6IG5ldyBkM19nZW9fcGF0aENvbnRleHQoXyk7XG4gICAgICBpZiAodHlwZW9mIHBvaW50UmFkaXVzICE9PSBcImZ1bmN0aW9uXCIpIGNvbnRleHRTdHJlYW0ucG9pbnRSYWRpdXMocG9pbnRSYWRpdXMpO1xuICAgICAgcmV0dXJuIHJlc2V0KCk7XG4gICAgfTtcbiAgICBwYXRoLnBvaW50UmFkaXVzID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcG9pbnRSYWRpdXM7XG4gICAgICBwb2ludFJhZGl1cyA9IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBfIDogKGNvbnRleHRTdHJlYW0ucG9pbnRSYWRpdXMoK18pLCArXyk7XG4gICAgICByZXR1cm4gcGF0aDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgY2FjaGVTdHJlYW0gPSBudWxsO1xuICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuICAgIHJldHVybiBwYXRoLnByb2plY3Rpb24oZDMuZ2VvLmFsYmVyc1VzYSgpKS5jb250ZXh0KG51bGwpO1xuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fcGF0aFByb2plY3RTdHJlYW0ocHJvamVjdCkge1xuICAgIHZhciByZXNhbXBsZSA9IGQzX2dlb19yZXNhbXBsZShmdW5jdGlvbih4LCB5KSB7XG4gICAgICByZXR1cm4gcHJvamVjdChbIHggKiBkM19kZWdyZWVzLCB5ICogZDNfZGVncmVlcyBdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICByZXR1cm4gZDNfZ2VvX3Byb2plY3Rpb25SYWRpYW5zKHJlc2FtcGxlKHN0cmVhbSkpO1xuICAgIH07XG4gIH1cbiAgZDMuZ2VvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKG1ldGhvZHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG5ldyBkM19nZW9fdHJhbnNmb3JtKHN0cmVhbSk7XG4gICAgICAgIGZvciAodmFyIGsgaW4gbWV0aG9kcykgdHJhbnNmb3JtW2tdID0gbWV0aG9kc1trXTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fdHJhbnNmb3JtKHN0cmVhbSkge1xuICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICB9XG4gIGQzX2dlb190cmFuc2Zvcm0ucHJvdG90eXBlID0ge1xuICAgIHBvaW50OiBmdW5jdGlvbih4LCB5KSB7XG4gICAgICB0aGlzLnN0cmVhbS5wb2ludCh4LCB5KTtcbiAgICB9LFxuICAgIHNwaGVyZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0cmVhbS5zcGhlcmUoKTtcbiAgICB9LFxuICAgIGxpbmVTdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0cmVhbS5saW5lU3RhcnQoKTtcbiAgICB9LFxuICAgIGxpbmVFbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5zdHJlYW0ubGluZUVuZCgpO1xuICAgIH0sXG4gICAgcG9seWdvblN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc3RyZWFtLnBvbHlnb25TdGFydCgpO1xuICAgIH0sXG4gICAgcG9seWdvbkVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnN0cmVhbS5wb2x5Z29uRW5kKCk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fdHJhbnNmb3JtUG9pbnQoc3RyZWFtLCBwb2ludCkge1xuICAgIHJldHVybiB7XG4gICAgICBwb2ludDogcG9pbnQsXG4gICAgICBzcGhlcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdHJlYW0uc3BoZXJlKCk7XG4gICAgICB9LFxuICAgICAgbGluZVN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgc3RyZWFtLmxpbmVTdGFydCgpO1xuICAgICAgfSxcbiAgICAgIGxpbmVFbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzdHJlYW0ubGluZUVuZCgpO1xuICAgICAgfSxcbiAgICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHN0cmVhbS5wb2x5Z29uU3RhcnQoKTtcbiAgICAgIH0sXG4gICAgICBwb2x5Z29uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgc3RyZWFtLnBvbHlnb25FbmQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGQzLmdlby5wcm9qZWN0aW9uID0gZDNfZ2VvX3Byb2plY3Rpb247XG4gIGQzLmdlby5wcm9qZWN0aW9uTXV0YXRvciA9IGQzX2dlb19wcm9qZWN0aW9uTXV0YXRvcjtcbiAgZnVuY3Rpb24gZDNfZ2VvX3Byb2plY3Rpb24ocHJvamVjdCkge1xuICAgIHJldHVybiBkM19nZW9fcHJvamVjdGlvbk11dGF0b3IoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcHJvamVjdDtcbiAgICB9KSgpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19wcm9qZWN0aW9uTXV0YXRvcihwcm9qZWN0QXQpIHtcbiAgICB2YXIgcHJvamVjdCwgcm90YXRlLCBwcm9qZWN0Um90YXRlLCBwcm9qZWN0UmVzYW1wbGUgPSBkM19nZW9fcmVzYW1wbGUoZnVuY3Rpb24oeCwgeSkge1xuICAgICAgeCA9IHByb2plY3QoeCwgeSk7XG4gICAgICByZXR1cm4gWyB4WzBdICogayArIM60eCwgzrR5IC0geFsxXSAqIGsgXTtcbiAgICB9KSwgayA9IDE1MCwgeCA9IDQ4MCwgeSA9IDI1MCwgzrsgPSAwLCDPhiA9IDAsIM60zrsgPSAwLCDOtM+GID0gMCwgzrTOsyA9IDAsIM60eCwgzrR5LCBwcmVjbGlwID0gZDNfZ2VvX2NsaXBBbnRpbWVyaWRpYW4sIHBvc3RjbGlwID0gZDNfaWRlbnRpdHksIGNsaXBBbmdsZSA9IG51bGwsIGNsaXBFeHRlbnQgPSBudWxsLCBzdHJlYW07XG4gICAgZnVuY3Rpb24gcHJvamVjdGlvbihwb2ludCkge1xuICAgICAgcG9pbnQgPSBwcm9qZWN0Um90YXRlKHBvaW50WzBdICogZDNfcmFkaWFucywgcG9pbnRbMV0gKiBkM19yYWRpYW5zKTtcbiAgICAgIHJldHVybiBbIHBvaW50WzBdICogayArIM60eCwgzrR5IC0gcG9pbnRbMV0gKiBrIF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludmVydChwb2ludCkge1xuICAgICAgcG9pbnQgPSBwcm9qZWN0Um90YXRlLmludmVydCgocG9pbnRbMF0gLSDOtHgpIC8gaywgKM60eSAtIHBvaW50WzFdKSAvIGspO1xuICAgICAgcmV0dXJuIHBvaW50ICYmIFsgcG9pbnRbMF0gKiBkM19kZWdyZWVzLCBwb2ludFsxXSAqIGQzX2RlZ3JlZXMgXTtcbiAgICB9XG4gICAgcHJvamVjdGlvbi5zdHJlYW0gPSBmdW5jdGlvbihvdXRwdXQpIHtcbiAgICAgIGlmIChzdHJlYW0pIHN0cmVhbS52YWxpZCA9IGZhbHNlO1xuICAgICAgc3RyZWFtID0gZDNfZ2VvX3Byb2plY3Rpb25SYWRpYW5zKHByZWNsaXAocm90YXRlLCBwcm9qZWN0UmVzYW1wbGUocG9zdGNsaXAob3V0cHV0KSkpKTtcbiAgICAgIHN0cmVhbS52YWxpZCA9IHRydWU7XG4gICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH07XG4gICAgcHJvamVjdGlvbi5jbGlwQW5nbGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjbGlwQW5nbGU7XG4gICAgICBwcmVjbGlwID0gXyA9PSBudWxsID8gKGNsaXBBbmdsZSA9IF8sIGQzX2dlb19jbGlwQW50aW1lcmlkaWFuKSA6IGQzX2dlb19jbGlwQ2lyY2xlKChjbGlwQW5nbGUgPSArXykgKiBkM19yYWRpYW5zKTtcbiAgICAgIHJldHVybiBpbnZhbGlkYXRlKCk7XG4gICAgfTtcbiAgICBwcm9qZWN0aW9uLmNsaXBFeHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjbGlwRXh0ZW50O1xuICAgICAgY2xpcEV4dGVudCA9IF87XG4gICAgICBwb3N0Y2xpcCA9IF8gPyBkM19nZW9fY2xpcEV4dGVudChfWzBdWzBdLCBfWzBdWzFdLCBfWzFdWzBdLCBfWzFdWzFdKSA6IGQzX2lkZW50aXR5O1xuICAgICAgcmV0dXJuIGludmFsaWRhdGUoKTtcbiAgICB9O1xuICAgIHByb2plY3Rpb24uc2NhbGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBrO1xuICAgICAgayA9ICtfO1xuICAgICAgcmV0dXJuIHJlc2V0KCk7XG4gICAgfTtcbiAgICBwcm9qZWN0aW9uLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgeCwgeSBdO1xuICAgICAgeCA9ICtfWzBdO1xuICAgICAgeSA9ICtfWzFdO1xuICAgICAgcmV0dXJuIHJlc2V0KCk7XG4gICAgfTtcbiAgICBwcm9qZWN0aW9uLmNlbnRlciA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgzrsgKiBkM19kZWdyZWVzLCDPhiAqIGQzX2RlZ3JlZXMgXTtcbiAgICAgIM67ID0gX1swXSAlIDM2MCAqIGQzX3JhZGlhbnM7XG4gICAgICDPhiA9IF9bMV0gJSAzNjAgKiBkM19yYWRpYW5zO1xuICAgICAgcmV0dXJuIHJlc2V0KCk7XG4gICAgfTtcbiAgICBwcm9qZWN0aW9uLnJvdGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgzrTOuyAqIGQzX2RlZ3JlZXMsIM60z4YgKiBkM19kZWdyZWVzLCDOtM6zICogZDNfZGVncmVlcyBdO1xuICAgICAgzrTOuyA9IF9bMF0gJSAzNjAgKiBkM19yYWRpYW5zO1xuICAgICAgzrTPhiA9IF9bMV0gJSAzNjAgKiBkM19yYWRpYW5zO1xuICAgICAgzrTOsyA9IF8ubGVuZ3RoID4gMiA/IF9bMl0gJSAzNjAgKiBkM19yYWRpYW5zIDogMDtcbiAgICAgIHJldHVybiByZXNldCgpO1xuICAgIH07XG4gICAgZDMucmViaW5kKHByb2plY3Rpb24sIHByb2plY3RSZXNhbXBsZSwgXCJwcmVjaXNpb25cIik7XG4gICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICBwcm9qZWN0Um90YXRlID0gZDNfZ2VvX2NvbXBvc2Uocm90YXRlID0gZDNfZ2VvX3JvdGF0aW9uKM60zrssIM60z4YsIM60zrMpLCBwcm9qZWN0KTtcbiAgICAgIHZhciBjZW50ZXIgPSBwcm9qZWN0KM67LCDPhik7XG4gICAgICDOtHggPSB4IC0gY2VudGVyWzBdICogaztcbiAgICAgIM60eSA9IHkgKyBjZW50ZXJbMV0gKiBrO1xuICAgICAgcmV0dXJuIGludmFsaWRhdGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW52YWxpZGF0ZSgpIHtcbiAgICAgIGlmIChzdHJlYW0pIHN0cmVhbS52YWxpZCA9IGZhbHNlLCBzdHJlYW0gPSBudWxsO1xuICAgICAgcmV0dXJuIHByb2plY3Rpb247XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHByb2plY3QgPSBwcm9qZWN0QXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHByb2plY3Rpb24uaW52ZXJ0ID0gcHJvamVjdC5pbnZlcnQgJiYgaW52ZXJ0O1xuICAgICAgcmV0dXJuIHJlc2V0KCk7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fcHJvamVjdGlvblJhZGlhbnMoc3RyZWFtKSB7XG4gICAgcmV0dXJuIGQzX2dlb190cmFuc2Zvcm1Qb2ludChzdHJlYW0sIGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIHN0cmVhbS5wb2ludCh4ICogZDNfcmFkaWFucywgeSAqIGQzX3JhZGlhbnMpO1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19lcXVpcmVjdGFuZ3VsYXIozrssIM+GKSB7XG4gICAgcmV0dXJuIFsgzrssIM+GIF07XG4gIH1cbiAgKGQzLmdlby5lcXVpcmVjdGFuZ3VsYXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfZ2VvX3Byb2plY3Rpb24oZDNfZ2VvX2VxdWlyZWN0YW5ndWxhcik7XG4gIH0pLnJhdyA9IGQzX2dlb19lcXVpcmVjdGFuZ3VsYXIuaW52ZXJ0ID0gZDNfZ2VvX2VxdWlyZWN0YW5ndWxhcjtcbiAgZDMuZ2VvLnJvdGF0aW9uID0gZnVuY3Rpb24ocm90YXRlKSB7XG4gICAgcm90YXRlID0gZDNfZ2VvX3JvdGF0aW9uKHJvdGF0ZVswXSAlIDM2MCAqIGQzX3JhZGlhbnMsIHJvdGF0ZVsxXSAqIGQzX3JhZGlhbnMsIHJvdGF0ZS5sZW5ndGggPiAyID8gcm90YXRlWzJdICogZDNfcmFkaWFucyA6IDApO1xuICAgIGZ1bmN0aW9uIGZvcndhcmQoY29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gcm90YXRlKGNvb3JkaW5hdGVzWzBdICogZDNfcmFkaWFucywgY29vcmRpbmF0ZXNbMV0gKiBkM19yYWRpYW5zKTtcbiAgICAgIHJldHVybiBjb29yZGluYXRlc1swXSAqPSBkM19kZWdyZWVzLCBjb29yZGluYXRlc1sxXSAqPSBkM19kZWdyZWVzLCBjb29yZGluYXRlcztcbiAgICB9XG4gICAgZm9yd2FyZC5pbnZlcnQgPSBmdW5jdGlvbihjb29yZGluYXRlcykge1xuICAgICAgY29vcmRpbmF0ZXMgPSByb3RhdGUuaW52ZXJ0KGNvb3JkaW5hdGVzWzBdICogZDNfcmFkaWFucywgY29vcmRpbmF0ZXNbMV0gKiBkM19yYWRpYW5zKTtcbiAgICAgIHJldHVybiBjb29yZGluYXRlc1swXSAqPSBkM19kZWdyZWVzLCBjb29yZGluYXRlc1sxXSAqPSBkM19kZWdyZWVzLCBjb29yZGluYXRlcztcbiAgICB9O1xuICAgIHJldHVybiBmb3J3YXJkO1xuICB9O1xuICBmdW5jdGlvbiBkM19nZW9faWRlbnRpdHlSb3RhdGlvbijOuywgz4YpIHtcbiAgICByZXR1cm4gWyDOuyA+IM+AID8gzrsgLSDPhCA6IM67IDwgLc+AID8gzrsgKyDPhCA6IM67LCDPhiBdO1xuICB9XG4gIGQzX2dlb19pZGVudGl0eVJvdGF0aW9uLmludmVydCA9IGQzX2dlb19lcXVpcmVjdGFuZ3VsYXI7XG4gIGZ1bmN0aW9uIGQzX2dlb19yb3RhdGlvbijOtM67LCDOtM+GLCDOtM6zKSB7XG4gICAgcmV0dXJuIM60zrsgPyDOtM+GIHx8IM60zrMgPyBkM19nZW9fY29tcG9zZShkM19nZW9fcm90YXRpb27OuyjOtM67KSwgZDNfZ2VvX3JvdGF0aW9uz4bOsyjOtM+GLCDOtM6zKSkgOiBkM19nZW9fcm90YXRpb27OuyjOtM67KSA6IM60z4YgfHwgzrTOsyA/IGQzX2dlb19yb3RhdGlvbs+GzrMozrTPhiwgzrTOsykgOiBkM19nZW9faWRlbnRpdHlSb3RhdGlvbjtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fZm9yd2FyZFJvdGF0aW9uzrsozrTOuykge1xuICAgIHJldHVybiBmdW5jdGlvbijOuywgz4YpIHtcbiAgICAgIHJldHVybiDOuyArPSDOtM67LCBbIM67ID4gz4AgPyDOuyAtIM+EIDogzrsgPCAtz4AgPyDOuyArIM+EIDogzrssIM+GIF07XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fcm90YXRpb27OuyjOtM67KSB7XG4gICAgdmFyIHJvdGF0aW9uID0gZDNfZ2VvX2ZvcndhcmRSb3RhdGlvbs67KM60zrspO1xuICAgIHJvdGF0aW9uLmludmVydCA9IGQzX2dlb19mb3J3YXJkUm90YXRpb27OuygtzrTOuyk7XG4gICAgcmV0dXJuIHJvdGF0aW9uO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb19yb3RhdGlvbs+GzrMozrTPhiwgzrTOsykge1xuICAgIHZhciBjb3POtM+GID0gTWF0aC5jb3MozrTPhiksIHNpbs60z4YgPSBNYXRoLnNpbijOtM+GKSwgY29zzrTOsyA9IE1hdGguY29zKM60zrMpLCBzaW7OtM6zID0gTWF0aC5zaW4ozrTOsyk7XG4gICAgZnVuY3Rpb24gcm90YXRpb24ozrssIM+GKSB7XG4gICAgICB2YXIgY29zz4YgPSBNYXRoLmNvcyjPhiksIHggPSBNYXRoLmNvcyjOuykgKiBjb3PPhiwgeSA9IE1hdGguc2luKM67KSAqIGNvc8+GLCB6ID0gTWF0aC5zaW4oz4YpLCBrID0geiAqIGNvc860z4YgKyB4ICogc2luzrTPhjtcbiAgICAgIHJldHVybiBbIE1hdGguYXRhbjIoeSAqIGNvc860zrMgLSBrICogc2luzrTOsywgeCAqIGNvc860z4YgLSB6ICogc2luzrTPhiksIGQzX2FzaW4oayAqIGNvc860zrMgKyB5ICogc2luzrTOsykgXTtcbiAgICB9XG4gICAgcm90YXRpb24uaW52ZXJ0ID0gZnVuY3Rpb24ozrssIM+GKSB7XG4gICAgICB2YXIgY29zz4YgPSBNYXRoLmNvcyjPhiksIHggPSBNYXRoLmNvcyjOuykgKiBjb3PPhiwgeSA9IE1hdGguc2luKM67KSAqIGNvc8+GLCB6ID0gTWF0aC5zaW4oz4YpLCBrID0geiAqIGNvc860zrMgLSB5ICogc2luzrTOsztcbiAgICAgIHJldHVybiBbIE1hdGguYXRhbjIoeSAqIGNvc860zrMgKyB6ICogc2luzrTOsywgeCAqIGNvc860z4YgKyBrICogc2luzrTPhiksIGQzX2FzaW4oayAqIGNvc860z4YgLSB4ICogc2luzrTPhikgXTtcbiAgICB9O1xuICAgIHJldHVybiByb3RhdGlvbjtcbiAgfVxuICBkMy5nZW8uY2lyY2xlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9yaWdpbiA9IFsgMCwgMCBdLCBhbmdsZSwgcHJlY2lzaW9uID0gNiwgaW50ZXJwb2xhdGU7XG4gICAgZnVuY3Rpb24gY2lyY2xlKCkge1xuICAgICAgdmFyIGNlbnRlciA9IHR5cGVvZiBvcmlnaW4gPT09IFwiZnVuY3Rpb25cIiA/IG9yaWdpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogb3JpZ2luLCByb3RhdGUgPSBkM19nZW9fcm90YXRpb24oLWNlbnRlclswXSAqIGQzX3JhZGlhbnMsIC1jZW50ZXJbMV0gKiBkM19yYWRpYW5zLCAwKS5pbnZlcnQsIHJpbmcgPSBbXTtcbiAgICAgIGludGVycG9sYXRlKG51bGwsIG51bGwsIDEsIHtcbiAgICAgICAgcG9pbnQ6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgICByaW5nLnB1c2goeCA9IHJvdGF0ZSh4LCB5KSk7XG4gICAgICAgICAgeFswXSAqPSBkM19kZWdyZWVzLCB4WzFdICo9IGQzX2RlZ3JlZXM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJQb2x5Z29uXCIsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbIHJpbmcgXVxuICAgICAgfTtcbiAgICB9XG4gICAgY2lyY2xlLm9yaWdpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG9yaWdpbjtcbiAgICAgIG9yaWdpbiA9IHg7XG4gICAgICByZXR1cm4gY2lyY2xlO1xuICAgIH07XG4gICAgY2lyY2xlLmFuZ2xlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gYW5nbGU7XG4gICAgICBpbnRlcnBvbGF0ZSA9IGQzX2dlb19jaXJjbGVJbnRlcnBvbGF0ZSgoYW5nbGUgPSAreCkgKiBkM19yYWRpYW5zLCBwcmVjaXNpb24gKiBkM19yYWRpYW5zKTtcbiAgICAgIHJldHVybiBjaXJjbGU7XG4gICAgfTtcbiAgICBjaXJjbGUucHJlY2lzaW9uID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcHJlY2lzaW9uO1xuICAgICAgaW50ZXJwb2xhdGUgPSBkM19nZW9fY2lyY2xlSW50ZXJwb2xhdGUoYW5nbGUgKiBkM19yYWRpYW5zLCAocHJlY2lzaW9uID0gK18pICogZDNfcmFkaWFucyk7XG4gICAgICByZXR1cm4gY2lyY2xlO1xuICAgIH07XG4gICAgcmV0dXJuIGNpcmNsZS5hbmdsZSg5MCk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb19jaXJjbGVJbnRlcnBvbGF0ZShyYWRpdXMsIHByZWNpc2lvbikge1xuICAgIHZhciBjciA9IE1hdGguY29zKHJhZGl1cyksIHNyID0gTWF0aC5zaW4ocmFkaXVzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oZnJvbSwgdG8sIGRpcmVjdGlvbiwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBzdGVwID0gZGlyZWN0aW9uICogcHJlY2lzaW9uO1xuICAgICAgaWYgKGZyb20gIT0gbnVsbCkge1xuICAgICAgICBmcm9tID0gZDNfZ2VvX2NpcmNsZUFuZ2xlKGNyLCBmcm9tKTtcbiAgICAgICAgdG8gPSBkM19nZW9fY2lyY2xlQW5nbGUoY3IsIHRvKTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDAgPyBmcm9tIDwgdG8gOiBmcm9tID4gdG8pIGZyb20gKz0gZGlyZWN0aW9uICogz4Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcm9tID0gcmFkaXVzICsgZGlyZWN0aW9uICogz4Q7XG4gICAgICAgIHRvID0gcmFkaXVzIC0gLjUgKiBzdGVwO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgcG9pbnQsIHQgPSBmcm9tOyBkaXJlY3Rpb24gPiAwID8gdCA+IHRvIDogdCA8IHRvOyB0IC09IHN0ZXApIHtcbiAgICAgICAgbGlzdGVuZXIucG9pbnQoKHBvaW50ID0gZDNfZ2VvX3NwaGVyaWNhbChbIGNyLCAtc3IgKiBNYXRoLmNvcyh0KSwgLXNyICogTWF0aC5zaW4odCkgXSkpWzBdLCBwb2ludFsxXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9fY2lyY2xlQW5nbGUoY3IsIHBvaW50KSB7XG4gICAgdmFyIGEgPSBkM19nZW9fY2FydGVzaWFuKHBvaW50KTtcbiAgICBhWzBdIC09IGNyO1xuICAgIGQzX2dlb19jYXJ0ZXNpYW5Ob3JtYWxpemUoYSk7XG4gICAgdmFyIGFuZ2xlID0gZDNfYWNvcygtYVsxXSk7XG4gICAgcmV0dXJuICgoLWFbMl0gPCAwID8gLWFuZ2xlIDogYW5nbGUpICsgMiAqIE1hdGguUEkgLSDOtSkgJSAoMiAqIE1hdGguUEkpO1xuICB9XG4gIGQzLmdlby5kaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgzpTOuyA9IChiWzBdIC0gYVswXSkgKiBkM19yYWRpYW5zLCDPhjAgPSBhWzFdICogZDNfcmFkaWFucywgz4YxID0gYlsxXSAqIGQzX3JhZGlhbnMsIHNpbs6UzrsgPSBNYXRoLnNpbijOlM67KSwgY29zzpTOuyA9IE1hdGguY29zKM6UzrspLCBzaW7PhjAgPSBNYXRoLnNpbijPhjApLCBjb3PPhjAgPSBNYXRoLmNvcyjPhjApLCBzaW7PhjEgPSBNYXRoLnNpbijPhjEpLCBjb3PPhjEgPSBNYXRoLmNvcyjPhjEpLCB0O1xuICAgIHJldHVybiBNYXRoLmF0YW4yKE1hdGguc3FydCgodCA9IGNvc8+GMSAqIHNpbs6UzrspICogdCArICh0ID0gY29zz4YwICogc2luz4YxIC0gc2luz4YwICogY29zz4YxICogY29zzpTOuykgKiB0KSwgc2luz4YwICogc2luz4YxICsgY29zz4YwICogY29zz4YxICogY29zzpTOuyk7XG4gIH07XG4gIGQzLmdlby5ncmF0aWN1bGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgeDEsIHgwLCBYMSwgWDAsIHkxLCB5MCwgWTEsIFkwLCBkeCA9IDEwLCBkeSA9IGR4LCBEWCA9IDkwLCBEWSA9IDM2MCwgeCwgeSwgWCwgWSwgcHJlY2lzaW9uID0gMi41O1xuICAgIGZ1bmN0aW9uIGdyYXRpY3VsZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiTXVsdGlMaW5lU3RyaW5nXCIsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBsaW5lcygpXG4gICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaW5lcygpIHtcbiAgICAgIHJldHVybiBkMy5yYW5nZShNYXRoLmNlaWwoWDAgLyBEWCkgKiBEWCwgWDEsIERYKS5tYXAoWCkuY29uY2F0KGQzLnJhbmdlKE1hdGguY2VpbChZMCAvIERZKSAqIERZLCBZMSwgRFkpLm1hcChZKSkuY29uY2F0KGQzLnJhbmdlKE1hdGguY2VpbCh4MCAvIGR4KSAqIGR4LCB4MSwgZHgpLmZpbHRlcihmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiBhYnMoeCAlIERYKSA+IM61O1xuICAgICAgfSkubWFwKHgpKS5jb25jYXQoZDMucmFuZ2UoTWF0aC5jZWlsKHkwIC8gZHkpICogZHksIHkxLCBkeSkuZmlsdGVyKGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIGFicyh5ICUgRFkpID4gzrU7XG4gICAgICB9KS5tYXAoeSkpO1xuICAgIH1cbiAgICBncmF0aWN1bGUubGluZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBsaW5lcygpLm1hcChmdW5jdGlvbihjb29yZGluYXRlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiTGluZVN0cmluZ1wiLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBncmF0aWN1bGUub3V0bGluZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJQb2x5Z29uXCIsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBbIFgoWDApLmNvbmNhdChZKFkxKS5zbGljZSgxKSwgWChYMSkucmV2ZXJzZSgpLnNsaWNlKDEpLCBZKFkwKS5yZXZlcnNlKCkuc2xpY2UoMSkpIF1cbiAgICAgIH07XG4gICAgfTtcbiAgICBncmF0aWN1bGUuZXh0ZW50ID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZ3JhdGljdWxlLm1pbm9yRXh0ZW50KCk7XG4gICAgICByZXR1cm4gZ3JhdGljdWxlLm1ham9yRXh0ZW50KF8pLm1pbm9yRXh0ZW50KF8pO1xuICAgIH07XG4gICAgZ3JhdGljdWxlLm1ham9yRXh0ZW50ID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gWyBbIFgwLCBZMCBdLCBbIFgxLCBZMSBdIF07XG4gICAgICBYMCA9ICtfWzBdWzBdLCBYMSA9ICtfWzFdWzBdO1xuICAgICAgWTAgPSArX1swXVsxXSwgWTEgPSArX1sxXVsxXTtcbiAgICAgIGlmIChYMCA+IFgxKSBfID0gWDAsIFgwID0gWDEsIFgxID0gXztcbiAgICAgIGlmIChZMCA+IFkxKSBfID0gWTAsIFkwID0gWTEsIFkxID0gXztcbiAgICAgIHJldHVybiBncmF0aWN1bGUucHJlY2lzaW9uKHByZWNpc2lvbik7XG4gICAgfTtcbiAgICBncmF0aWN1bGUubWlub3JFeHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBbIFsgeDAsIHkwIF0sIFsgeDEsIHkxIF0gXTtcbiAgICAgIHgwID0gK19bMF1bMF0sIHgxID0gK19bMV1bMF07XG4gICAgICB5MCA9ICtfWzBdWzFdLCB5MSA9ICtfWzFdWzFdO1xuICAgICAgaWYgKHgwID4geDEpIF8gPSB4MCwgeDAgPSB4MSwgeDEgPSBfO1xuICAgICAgaWYgKHkwID4geTEpIF8gPSB5MCwgeTAgPSB5MSwgeTEgPSBfO1xuICAgICAgcmV0dXJuIGdyYXRpY3VsZS5wcmVjaXNpb24ocHJlY2lzaW9uKTtcbiAgICB9O1xuICAgIGdyYXRpY3VsZS5zdGVwID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZ3JhdGljdWxlLm1pbm9yU3RlcCgpO1xuICAgICAgcmV0dXJuIGdyYXRpY3VsZS5tYWpvclN0ZXAoXykubWlub3JTdGVwKF8pO1xuICAgIH07XG4gICAgZ3JhdGljdWxlLm1ham9yU3RlcCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgRFgsIERZIF07XG4gICAgICBEWCA9ICtfWzBdLCBEWSA9ICtfWzFdO1xuICAgICAgcmV0dXJuIGdyYXRpY3VsZTtcbiAgICB9O1xuICAgIGdyYXRpY3VsZS5taW5vclN0ZXAgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBbIGR4LCBkeSBdO1xuICAgICAgZHggPSArX1swXSwgZHkgPSArX1sxXTtcbiAgICAgIHJldHVybiBncmF0aWN1bGU7XG4gICAgfTtcbiAgICBncmF0aWN1bGUucHJlY2lzaW9uID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcHJlY2lzaW9uO1xuICAgICAgcHJlY2lzaW9uID0gK187XG4gICAgICB4ID0gZDNfZ2VvX2dyYXRpY3VsZVgoeTAsIHkxLCA5MCk7XG4gICAgICB5ID0gZDNfZ2VvX2dyYXRpY3VsZVkoeDAsIHgxLCBwcmVjaXNpb24pO1xuICAgICAgWCA9IGQzX2dlb19ncmF0aWN1bGVYKFkwLCBZMSwgOTApO1xuICAgICAgWSA9IGQzX2dlb19ncmF0aWN1bGVZKFgwLCBYMSwgcHJlY2lzaW9uKTtcbiAgICAgIHJldHVybiBncmF0aWN1bGU7XG4gICAgfTtcbiAgICByZXR1cm4gZ3JhdGljdWxlLm1ham9yRXh0ZW50KFsgWyAtMTgwLCAtOTAgKyDOtSBdLCBbIDE4MCwgOTAgLSDOtSBdIF0pLm1pbm9yRXh0ZW50KFsgWyAtMTgwLCAtODAgLSDOtSBdLCBbIDE4MCwgODAgKyDOtSBdIF0pO1xuICB9O1xuICBmdW5jdGlvbiBkM19nZW9fZ3JhdGljdWxlWCh5MCwgeTEsIGR5KSB7XG4gICAgdmFyIHkgPSBkMy5yYW5nZSh5MCwgeTEgLSDOtSwgZHkpLmNvbmNhdCh5MSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB5Lm1hcChmdW5jdGlvbih5KSB7XG4gICAgICAgIHJldHVybiBbIHgsIHkgXTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2dyYXRpY3VsZVkoeDAsIHgxLCBkeCkge1xuICAgIHZhciB4ID0gZDMucmFuZ2UoeDAsIHgxIC0gzrUsIGR4KS5jb25jYXQoeDEpO1xuICAgIHJldHVybiBmdW5jdGlvbih5KSB7XG4gICAgICByZXR1cm4geC5tYXAoZnVuY3Rpb24oeCkge1xuICAgICAgICByZXR1cm4gWyB4LCB5IF07XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX3NvdXJjZShkKSB7XG4gICAgcmV0dXJuIGQuc291cmNlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RhcmdldChkKSB7XG4gICAgcmV0dXJuIGQudGFyZ2V0O1xuICB9XG4gIGQzLmdlby5ncmVhdEFyYyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3VyY2UgPSBkM19zb3VyY2UsIHNvdXJjZV8sIHRhcmdldCA9IGQzX3RhcmdldCwgdGFyZ2V0XztcbiAgICBmdW5jdGlvbiBncmVhdEFyYygpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiTGluZVN0cmluZ1wiLFxuICAgICAgICBjb29yZGluYXRlczogWyBzb3VyY2VfIHx8IHNvdXJjZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0YXJnZXRfIHx8IHRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIF1cbiAgICAgIH07XG4gICAgfVxuICAgIGdyZWF0QXJjLmRpc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDMuZ2VvLmRpc3RhbmNlKHNvdXJjZV8gfHwgc291cmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRhcmdldF8gfHwgdGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gICAgZ3JlYXRBcmMuc291cmNlID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc291cmNlO1xuICAgICAgc291cmNlID0gXywgc291cmNlXyA9IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBudWxsIDogXztcbiAgICAgIHJldHVybiBncmVhdEFyYztcbiAgICB9O1xuICAgIGdyZWF0QXJjLnRhcmdldCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRhcmdldDtcbiAgICAgIHRhcmdldCA9IF8sIHRhcmdldF8gPSB0eXBlb2YgXyA9PT0gXCJmdW5jdGlvblwiID8gbnVsbCA6IF87XG4gICAgICByZXR1cm4gZ3JlYXRBcmM7XG4gICAgfTtcbiAgICBncmVhdEFyYy5wcmVjaXNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gZ3JlYXRBcmMgOiAwO1xuICAgIH07XG4gICAgcmV0dXJuIGdyZWF0QXJjO1xuICB9O1xuICBkMy5nZW8uaW50ZXJwb2xhdGUgPSBmdW5jdGlvbihzb3VyY2UsIHRhcmdldCkge1xuICAgIHJldHVybiBkM19nZW9faW50ZXJwb2xhdGUoc291cmNlWzBdICogZDNfcmFkaWFucywgc291cmNlWzFdICogZDNfcmFkaWFucywgdGFyZ2V0WzBdICogZDNfcmFkaWFucywgdGFyZ2V0WzFdICogZDNfcmFkaWFucyk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb19pbnRlcnBvbGF0ZSh4MCwgeTAsIHgxLCB5MSkge1xuICAgIHZhciBjeTAgPSBNYXRoLmNvcyh5MCksIHN5MCA9IE1hdGguc2luKHkwKSwgY3kxID0gTWF0aC5jb3MoeTEpLCBzeTEgPSBNYXRoLnNpbih5MSksIGt4MCA9IGN5MCAqIE1hdGguY29zKHgwKSwga3kwID0gY3kwICogTWF0aC5zaW4oeDApLCBreDEgPSBjeTEgKiBNYXRoLmNvcyh4MSksIGt5MSA9IGN5MSAqIE1hdGguc2luKHgxKSwgZCA9IDIgKiBNYXRoLmFzaW4oTWF0aC5zcXJ0KGQzX2hhdmVyc2luKHkxIC0geTApICsgY3kwICogY3kxICogZDNfaGF2ZXJzaW4oeDEgLSB4MCkpKSwgayA9IDEgLyBNYXRoLnNpbihkKTtcbiAgICB2YXIgaW50ZXJwb2xhdGUgPSBkID8gZnVuY3Rpb24odCkge1xuICAgICAgdmFyIEIgPSBNYXRoLnNpbih0ICo9IGQpICogaywgQSA9IE1hdGguc2luKGQgLSB0KSAqIGssIHggPSBBICoga3gwICsgQiAqIGt4MSwgeSA9IEEgKiBreTAgKyBCICoga3kxLCB6ID0gQSAqIHN5MCArIEIgKiBzeTE7XG4gICAgICByZXR1cm4gWyBNYXRoLmF0YW4yKHksIHgpICogZDNfZGVncmVlcywgTWF0aC5hdGFuMih6LCBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSkpICogZDNfZGVncmVlcyBdO1xuICAgIH0gOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbIHgwICogZDNfZGVncmVlcywgeTAgKiBkM19kZWdyZWVzIF07XG4gICAgfTtcbiAgICBpbnRlcnBvbGF0ZS5kaXN0YW5jZSA9IGQ7XG4gICAgcmV0dXJuIGludGVycG9sYXRlO1xuICB9XG4gIGQzLmdlby5sZW5ndGggPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICBkM19nZW9fbGVuZ3RoU3VtID0gMDtcbiAgICBkMy5nZW8uc3RyZWFtKG9iamVjdCwgZDNfZ2VvX2xlbmd0aCk7XG4gICAgcmV0dXJuIGQzX2dlb19sZW5ndGhTdW07XG4gIH07XG4gIHZhciBkM19nZW9fbGVuZ3RoU3VtO1xuICB2YXIgZDNfZ2VvX2xlbmd0aCA9IHtcbiAgICBzcGhlcmU6IGQzX25vb3AsXG4gICAgcG9pbnQ6IGQzX25vb3AsXG4gICAgbGluZVN0YXJ0OiBkM19nZW9fbGVuZ3RoTGluZVN0YXJ0LFxuICAgIGxpbmVFbmQ6IGQzX25vb3AsXG4gICAgcG9seWdvblN0YXJ0OiBkM19ub29wLFxuICAgIHBvbHlnb25FbmQ6IGQzX25vb3BcbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvX2xlbmd0aExpbmVTdGFydCgpIHtcbiAgICB2YXIgzrswLCBzaW7PhjAsIGNvc8+GMDtcbiAgICBkM19nZW9fbGVuZ3RoLnBvaW50ID0gZnVuY3Rpb24ozrssIM+GKSB7XG4gICAgICDOuzAgPSDOuyAqIGQzX3JhZGlhbnMsIHNpbs+GMCA9IE1hdGguc2luKM+GICo9IGQzX3JhZGlhbnMpLCBjb3PPhjAgPSBNYXRoLmNvcyjPhik7XG4gICAgICBkM19nZW9fbGVuZ3RoLnBvaW50ID0gbmV4dFBvaW50O1xuICAgIH07XG4gICAgZDNfZ2VvX2xlbmd0aC5saW5lRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICBkM19nZW9fbGVuZ3RoLnBvaW50ID0gZDNfZ2VvX2xlbmd0aC5saW5lRW5kID0gZDNfbm9vcDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIG5leHRQb2ludCjOuywgz4YpIHtcbiAgICAgIHZhciBzaW7PhiA9IE1hdGguc2luKM+GICo9IGQzX3JhZGlhbnMpLCBjb3PPhiA9IE1hdGguY29zKM+GKSwgdCA9IGFicygozrsgKj0gZDNfcmFkaWFucykgLSDOuzApLCBjb3POlM67ID0gTWF0aC5jb3ModCk7XG4gICAgICBkM19nZW9fbGVuZ3RoU3VtICs9IE1hdGguYXRhbjIoTWF0aC5zcXJ0KCh0ID0gY29zz4YgKiBNYXRoLnNpbih0KSkgKiB0ICsgKHQgPSBjb3PPhjAgKiBzaW7PhiAtIHNpbs+GMCAqIGNvc8+GICogY29zzpTOuykgKiB0KSwgc2luz4YwICogc2luz4YgKyBjb3PPhjAgKiBjb3PPhiAqIGNvc86UzrspO1xuICAgICAgzrswID0gzrssIHNpbs+GMCA9IHNpbs+GLCBjb3PPhjAgPSBjb3PPhjtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvX2F6aW11dGhhbChzY2FsZSwgYW5nbGUpIHtcbiAgICBmdW5jdGlvbiBhemltdXRoYWwozrssIM+GKSB7XG4gICAgICB2YXIgY29zzrsgPSBNYXRoLmNvcyjOuyksIGNvc8+GID0gTWF0aC5jb3Moz4YpLCBrID0gc2NhbGUoY29zzrsgKiBjb3PPhik7XG4gICAgICByZXR1cm4gWyBrICogY29zz4YgKiBNYXRoLnNpbijOuyksIGsgKiBNYXRoLnNpbijPhikgXTtcbiAgICB9XG4gICAgYXppbXV0aGFsLmludmVydCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIHZhciDPgSA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KSwgYyA9IGFuZ2xlKM+BKSwgc2luYyA9IE1hdGguc2luKGMpLCBjb3NjID0gTWF0aC5jb3MoYyk7XG4gICAgICByZXR1cm4gWyBNYXRoLmF0YW4yKHggKiBzaW5jLCDPgSAqIGNvc2MpLCBNYXRoLmFzaW4oz4EgJiYgeSAqIHNpbmMgLyDPgSkgXTtcbiAgICB9O1xuICAgIHJldHVybiBhemltdXRoYWw7XG4gIH1cbiAgdmFyIGQzX2dlb19hemltdXRoYWxFcXVhbEFyZWEgPSBkM19nZW9fYXppbXV0aGFsKGZ1bmN0aW9uKGNvc867Y29zz4YpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KDIgLyAoMSArIGNvc867Y29zz4YpKTtcbiAgfSwgZnVuY3Rpb24oz4EpIHtcbiAgICByZXR1cm4gMiAqIE1hdGguYXNpbijPgSAvIDIpO1xuICB9KTtcbiAgKGQzLmdlby5hemltdXRoYWxFcXVhbEFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfZ2VvX3Byb2plY3Rpb24oZDNfZ2VvX2F6aW11dGhhbEVxdWFsQXJlYSk7XG4gIH0pLnJhdyA9IGQzX2dlb19hemltdXRoYWxFcXVhbEFyZWE7XG4gIHZhciBkM19nZW9fYXppbXV0aGFsRXF1aWRpc3RhbnQgPSBkM19nZW9fYXppbXV0aGFsKGZ1bmN0aW9uKGNvc867Y29zz4YpIHtcbiAgICB2YXIgYyA9IE1hdGguYWNvcyhjb3POu2Nvc8+GKTtcbiAgICByZXR1cm4gYyAmJiBjIC8gTWF0aC5zaW4oYyk7XG4gIH0sIGQzX2lkZW50aXR5KTtcbiAgKGQzLmdlby5hemltdXRoYWxFcXVpZGlzdGFudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19nZW9fcHJvamVjdGlvbihkM19nZW9fYXppbXV0aGFsRXF1aWRpc3RhbnQpO1xuICB9KS5yYXcgPSBkM19nZW9fYXppbXV0aGFsRXF1aWRpc3RhbnQ7XG4gIGZ1bmN0aW9uIGQzX2dlb19jb25pY0NvbmZvcm1hbCjPhjAsIM+GMSkge1xuICAgIHZhciBjb3PPhjAgPSBNYXRoLmNvcyjPhjApLCB0ID0gZnVuY3Rpb24oz4YpIHtcbiAgICAgIHJldHVybiBNYXRoLnRhbijPgCAvIDQgKyDPhiAvIDIpO1xuICAgIH0sIG4gPSDPhjAgPT09IM+GMSA/IE1hdGguc2luKM+GMCkgOiBNYXRoLmxvZyhjb3PPhjAgLyBNYXRoLmNvcyjPhjEpKSAvIE1hdGgubG9nKHQoz4YxKSAvIHQoz4YwKSksIEYgPSBjb3PPhjAgKiBNYXRoLnBvdyh0KM+GMCksIG4pIC8gbjtcbiAgICBpZiAoIW4pIHJldHVybiBkM19nZW9fbWVyY2F0b3I7XG4gICAgZnVuY3Rpb24gZm9yd2FyZCjOuywgz4YpIHtcbiAgICAgIGlmIChGID4gMCkge1xuICAgICAgICBpZiAoz4YgPCAtaGFsZs+AICsgzrUpIM+GID0gLWhhbGbPgCArIM61O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKM+GID4gaGFsZs+AIC0gzrUpIM+GID0gaGFsZs+AIC0gzrU7XG4gICAgICB9XG4gICAgICB2YXIgz4EgPSBGIC8gTWF0aC5wb3codCjPhiksIG4pO1xuICAgICAgcmV0dXJuIFsgz4EgKiBNYXRoLnNpbihuICogzrspLCBGIC0gz4EgKiBNYXRoLmNvcyhuICogzrspIF07XG4gICAgfVxuICAgIGZvcndhcmQuaW52ZXJ0ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIM+BMF95ID0gRiAtIHksIM+BID0gZDNfc2duKG4pICogTWF0aC5zcXJ0KHggKiB4ICsgz4EwX3kgKiDPgTBfeSk7XG4gICAgICByZXR1cm4gWyBNYXRoLmF0YW4yKHgsIM+BMF95KSAvIG4sIDIgKiBNYXRoLmF0YW4oTWF0aC5wb3coRiAvIM+BLCAxIC8gbikpIC0gaGFsZs+AIF07XG4gICAgfTtcbiAgICByZXR1cm4gZm9yd2FyZDtcbiAgfVxuICAoZDMuZ2VvLmNvbmljQ29uZm9ybWFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX2dlb19jb25pYyhkM19nZW9fY29uaWNDb25mb3JtYWwpO1xuICB9KS5yYXcgPSBkM19nZW9fY29uaWNDb25mb3JtYWw7XG4gIGZ1bmN0aW9uIGQzX2dlb19jb25pY0VxdWlkaXN0YW50KM+GMCwgz4YxKSB7XG4gICAgdmFyIGNvc8+GMCA9IE1hdGguY29zKM+GMCksIG4gPSDPhjAgPT09IM+GMSA/IE1hdGguc2luKM+GMCkgOiAoY29zz4YwIC0gTWF0aC5jb3Moz4YxKSkgLyAoz4YxIC0gz4YwKSwgRyA9IGNvc8+GMCAvIG4gKyDPhjA7XG4gICAgaWYgKGFicyhuKSA8IM61KSByZXR1cm4gZDNfZ2VvX2VxdWlyZWN0YW5ndWxhcjtcbiAgICBmdW5jdGlvbiBmb3J3YXJkKM67LCDPhikge1xuICAgICAgdmFyIM+BID0gRyAtIM+GO1xuICAgICAgcmV0dXJuIFsgz4EgKiBNYXRoLnNpbihuICogzrspLCBHIC0gz4EgKiBNYXRoLmNvcyhuICogzrspIF07XG4gICAgfVxuICAgIGZvcndhcmQuaW52ZXJ0ID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgdmFyIM+BMF95ID0gRyAtIHk7XG4gICAgICByZXR1cm4gWyBNYXRoLmF0YW4yKHgsIM+BMF95KSAvIG4sIEcgLSBkM19zZ24obikgKiBNYXRoLnNxcnQoeCAqIHggKyDPgTBfeSAqIM+BMF95KSBdO1xuICAgIH07XG4gICAgcmV0dXJuIGZvcndhcmQ7XG4gIH1cbiAgKGQzLmdlby5jb25pY0VxdWlkaXN0YW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX2dlb19jb25pYyhkM19nZW9fY29uaWNFcXVpZGlzdGFudCk7XG4gIH0pLnJhdyA9IGQzX2dlb19jb25pY0VxdWlkaXN0YW50O1xuICB2YXIgZDNfZ2VvX2dub21vbmljID0gZDNfZ2VvX2F6aW11dGhhbChmdW5jdGlvbihjb3POu2Nvc8+GKSB7XG4gICAgcmV0dXJuIDEgLyBjb3POu2Nvc8+GO1xuICB9LCBNYXRoLmF0YW4pO1xuICAoZDMuZ2VvLmdub21vbmljID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX2dlb19wcm9qZWN0aW9uKGQzX2dlb19nbm9tb25pYyk7XG4gIH0pLnJhdyA9IGQzX2dlb19nbm9tb25pYztcbiAgZnVuY3Rpb24gZDNfZ2VvX21lcmNhdG9yKM67LCDPhikge1xuICAgIHJldHVybiBbIM67LCBNYXRoLmxvZyhNYXRoLnRhbijPgCAvIDQgKyDPhiAvIDIpKSBdO1xuICB9XG4gIGQzX2dlb19tZXJjYXRvci5pbnZlcnQgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIFsgeCwgMiAqIE1hdGguYXRhbihNYXRoLmV4cCh5KSkgLSBoYWxmz4AgXTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvX21lcmNhdG9yUHJvamVjdGlvbihwcm9qZWN0KSB7XG4gICAgdmFyIG0gPSBkM19nZW9fcHJvamVjdGlvbihwcm9qZWN0KSwgc2NhbGUgPSBtLnNjYWxlLCB0cmFuc2xhdGUgPSBtLnRyYW5zbGF0ZSwgY2xpcEV4dGVudCA9IG0uY2xpcEV4dGVudCwgY2xpcEF1dG87XG4gICAgbS5zY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHYgPSBzY2FsZS5hcHBseShtLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHYgPT09IG0gPyBjbGlwQXV0byA/IG0uY2xpcEV4dGVudChudWxsKSA6IG0gOiB2O1xuICAgIH07XG4gICAgbS50cmFuc2xhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2ID0gdHJhbnNsYXRlLmFwcGx5KG0sIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gdiA9PT0gbSA/IGNsaXBBdXRvID8gbS5jbGlwRXh0ZW50KG51bGwpIDogbSA6IHY7XG4gICAgfTtcbiAgICBtLmNsaXBFeHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgICB2YXIgdiA9IGNsaXBFeHRlbnQuYXBwbHkobSwgYXJndW1lbnRzKTtcbiAgICAgIGlmICh2ID09PSBtKSB7XG4gICAgICAgIGlmIChjbGlwQXV0byA9IF8gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBrID0gz4AgKiBzY2FsZSgpLCB0ID0gdHJhbnNsYXRlKCk7XG4gICAgICAgICAgY2xpcEV4dGVudChbIFsgdFswXSAtIGssIHRbMV0gLSBrIF0sIFsgdFswXSArIGssIHRbMV0gKyBrIF0gXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2xpcEF1dG8pIHtcbiAgICAgICAgdiA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdjtcbiAgICB9O1xuICAgIHJldHVybiBtLmNsaXBFeHRlbnQobnVsbCk7XG4gIH1cbiAgKGQzLmdlby5tZXJjYXRvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19nZW9fbWVyY2F0b3JQcm9qZWN0aW9uKGQzX2dlb19tZXJjYXRvcik7XG4gIH0pLnJhdyA9IGQzX2dlb19tZXJjYXRvcjtcbiAgdmFyIGQzX2dlb19vcnRob2dyYXBoaWMgPSBkM19nZW9fYXppbXV0aGFsKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAxO1xuICB9LCBNYXRoLmFzaW4pO1xuICAoZDMuZ2VvLm9ydGhvZ3JhcGhpYyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19nZW9fcHJvamVjdGlvbihkM19nZW9fb3J0aG9ncmFwaGljKTtcbiAgfSkucmF3ID0gZDNfZ2VvX29ydGhvZ3JhcGhpYztcbiAgdmFyIGQzX2dlb19zdGVyZW9ncmFwaGljID0gZDNfZ2VvX2F6aW11dGhhbChmdW5jdGlvbihjb3POu2Nvc8+GKSB7XG4gICAgcmV0dXJuIDEgLyAoMSArIGNvc867Y29zz4YpO1xuICB9LCBmdW5jdGlvbijPgSkge1xuICAgIHJldHVybiAyICogTWF0aC5hdGFuKM+BKTtcbiAgfSk7XG4gIChkMy5nZW8uc3RlcmVvZ3JhcGhpYyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19nZW9fcHJvamVjdGlvbihkM19nZW9fc3RlcmVvZ3JhcGhpYyk7XG4gIH0pLnJhdyA9IGQzX2dlb19zdGVyZW9ncmFwaGljO1xuICBmdW5jdGlvbiBkM19nZW9fdHJhbnN2ZXJzZU1lcmNhdG9yKM67LCDPhikge1xuICAgIHJldHVybiBbIE1hdGgubG9nKE1hdGgudGFuKM+AIC8gNCArIM+GIC8gMikpLCAtzrsgXTtcbiAgfVxuICBkM19nZW9fdHJhbnN2ZXJzZU1lcmNhdG9yLmludmVydCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4gWyAteSwgMiAqIE1hdGguYXRhbihNYXRoLmV4cCh4KSkgLSBoYWxmz4AgXTtcbiAgfTtcbiAgKGQzLmdlby50cmFuc3ZlcnNlTWVyY2F0b3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvamVjdGlvbiA9IGQzX2dlb19tZXJjYXRvclByb2plY3Rpb24oZDNfZ2VvX3RyYW5zdmVyc2VNZXJjYXRvciksIGNlbnRlciA9IHByb2plY3Rpb24uY2VudGVyLCByb3RhdGUgPSBwcm9qZWN0aW9uLnJvdGF0ZTtcbiAgICBwcm9qZWN0aW9uLmNlbnRlciA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIHJldHVybiBfID8gY2VudGVyKFsgLV9bMV0sIF9bMF0gXSkgOiAoXyA9IGNlbnRlcigpLCBbIF9bMV0sIC1fWzBdIF0pO1xuICAgIH07XG4gICAgcHJvamVjdGlvbi5yb3RhdGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICByZXR1cm4gXyA/IHJvdGF0ZShbIF9bMF0sIF9bMV0sIF8ubGVuZ3RoID4gMiA/IF9bMl0gKyA5MCA6IDkwIF0pIDogKF8gPSByb3RhdGUoKSwgXG4gICAgICBbIF9bMF0sIF9bMV0sIF9bMl0gLSA5MCBdKTtcbiAgICB9O1xuICAgIHJldHVybiByb3RhdGUoWyAwLCAwLCA5MCBdKTtcbiAgfSkucmF3ID0gZDNfZ2VvX3RyYW5zdmVyc2VNZXJjYXRvcjtcbiAgZDMuZ2VvbSA9IHt9O1xuICBmdW5jdGlvbiBkM19nZW9tX3BvaW50WChkKSB7XG4gICAgcmV0dXJuIGRbMF07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV9wb2ludFkoZCkge1xuICAgIHJldHVybiBkWzFdO1xuICB9XG4gIGQzLmdlb20uaHVsbCA9IGZ1bmN0aW9uKHZlcnRpY2VzKSB7XG4gICAgdmFyIHggPSBkM19nZW9tX3BvaW50WCwgeSA9IGQzX2dlb21fcG9pbnRZO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaHVsbCh2ZXJ0aWNlcyk7XG4gICAgZnVuY3Rpb24gaHVsbChkYXRhKSB7XG4gICAgICBpZiAoZGF0YS5sZW5ndGggPCAzKSByZXR1cm4gW107XG4gICAgICB2YXIgZnggPSBkM19mdW5jdG9yKHgpLCBmeSA9IGQzX2Z1bmN0b3IoeSksIGksIG4gPSBkYXRhLmxlbmd0aCwgcG9pbnRzID0gW10sIGZsaXBwZWRQb2ludHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgcG9pbnRzLnB1c2goWyArZnguY2FsbCh0aGlzLCBkYXRhW2ldLCBpKSwgK2Z5LmNhbGwodGhpcywgZGF0YVtpXSwgaSksIGkgXSk7XG4gICAgICB9XG4gICAgICBwb2ludHMuc29ydChkM19nZW9tX2h1bGxPcmRlcik7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgaSsrKSBmbGlwcGVkUG9pbnRzLnB1c2goWyBwb2ludHNbaV1bMF0sIC1wb2ludHNbaV1bMV0gXSk7XG4gICAgICB2YXIgdXBwZXIgPSBkM19nZW9tX2h1bGxVcHBlcihwb2ludHMpLCBsb3dlciA9IGQzX2dlb21faHVsbFVwcGVyKGZsaXBwZWRQb2ludHMpO1xuICAgICAgdmFyIHNraXBMZWZ0ID0gbG93ZXJbMF0gPT09IHVwcGVyWzBdLCBza2lwUmlnaHQgPSBsb3dlcltsb3dlci5sZW5ndGggLSAxXSA9PT0gdXBwZXJbdXBwZXIubGVuZ3RoIC0gMV0sIHBvbHlnb24gPSBbXTtcbiAgICAgIGZvciAoaSA9IHVwcGVyLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSBwb2x5Z29uLnB1c2goZGF0YVtwb2ludHNbdXBwZXJbaV1dWzJdXSk7XG4gICAgICBmb3IgKGkgPSArc2tpcExlZnQ7IGkgPCBsb3dlci5sZW5ndGggLSBza2lwUmlnaHQ7ICsraSkgcG9seWdvbi5wdXNoKGRhdGFbcG9pbnRzW2xvd2VyW2ldXVsyXV0pO1xuICAgICAgcmV0dXJuIHBvbHlnb247XG4gICAgfVxuICAgIGh1bGwueCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHggPSBfLCBodWxsKSA6IHg7XG4gICAgfTtcbiAgICBodWxsLnkgPSBmdW5jdGlvbihfKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh5ID0gXywgaHVsbCkgOiB5O1xuICAgIH07XG4gICAgcmV0dXJuIGh1bGw7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb21faHVsbFVwcGVyKHBvaW50cykge1xuICAgIHZhciBuID0gcG9pbnRzLmxlbmd0aCwgaHVsbCA9IFsgMCwgMSBdLCBocyA9IDI7XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBuOyBpKyspIHtcbiAgICAgIHdoaWxlIChocyA+IDEgJiYgZDNfY3Jvc3MyZChwb2ludHNbaHVsbFtocyAtIDJdXSwgcG9pbnRzW2h1bGxbaHMgLSAxXV0sIHBvaW50c1tpXSkgPD0gMCkgLS1ocztcbiAgICAgIGh1bGxbaHMrK10gPSBpO1xuICAgIH1cbiAgICByZXR1cm4gaHVsbC5zbGljZSgwLCBocyk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV9odWxsT3JkZXIoYSwgYikge1xuICAgIHJldHVybiBhWzBdIC0gYlswXSB8fCBhWzFdIC0gYlsxXTtcbiAgfVxuICBkMy5nZW9tLnBvbHlnb24gPSBmdW5jdGlvbihjb29yZGluYXRlcykge1xuICAgIGQzX3N1YmNsYXNzKGNvb3JkaW5hdGVzLCBkM19nZW9tX3BvbHlnb25Qcm90b3R5cGUpO1xuICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgfTtcbiAgdmFyIGQzX2dlb21fcG9seWdvblByb3RvdHlwZSA9IGQzLmdlb20ucG9seWdvbi5wcm90b3R5cGUgPSBbXTtcbiAgZDNfZ2VvbV9wb2x5Z29uUHJvdG90eXBlLmFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IC0xLCBuID0gdGhpcy5sZW5ndGgsIGEsIGIgPSB0aGlzW24gLSAxXSwgYXJlYSA9IDA7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGEgPSBiO1xuICAgICAgYiA9IHRoaXNbaV07XG4gICAgICBhcmVhICs9IGFbMV0gKiBiWzBdIC0gYVswXSAqIGJbMV07XG4gICAgfVxuICAgIHJldHVybiBhcmVhICogLjU7XG4gIH07XG4gIGQzX2dlb21fcG9seWdvblByb3RvdHlwZS5jZW50cm9pZCA9IGZ1bmN0aW9uKGspIHtcbiAgICB2YXIgaSA9IC0xLCBuID0gdGhpcy5sZW5ndGgsIHggPSAwLCB5ID0gMCwgYSwgYiA9IHRoaXNbbiAtIDFdLCBjO1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgayA9IC0xIC8gKDYgKiB0aGlzLmFyZWEoKSk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGEgPSBiO1xuICAgICAgYiA9IHRoaXNbaV07XG4gICAgICBjID0gYVswXSAqIGJbMV0gLSBiWzBdICogYVsxXTtcbiAgICAgIHggKz0gKGFbMF0gKyBiWzBdKSAqIGM7XG4gICAgICB5ICs9IChhWzFdICsgYlsxXSkgKiBjO1xuICAgIH1cbiAgICByZXR1cm4gWyB4ICogaywgeSAqIGsgXTtcbiAgfTtcbiAgZDNfZ2VvbV9wb2x5Z29uUHJvdG90eXBlLmNsaXAgPSBmdW5jdGlvbihzdWJqZWN0KSB7XG4gICAgdmFyIGlucHV0LCBjbG9zZWQgPSBkM19nZW9tX3BvbHlnb25DbG9zZWQoc3ViamVjdCksIGkgPSAtMSwgbiA9IHRoaXMubGVuZ3RoIC0gZDNfZ2VvbV9wb2x5Z29uQ2xvc2VkKHRoaXMpLCBqLCBtLCBhID0gdGhpc1tuIC0gMV0sIGIsIGMsIGQ7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlucHV0ID0gc3ViamVjdC5zbGljZSgpO1xuICAgICAgc3ViamVjdC5sZW5ndGggPSAwO1xuICAgICAgYiA9IHRoaXNbaV07XG4gICAgICBjID0gaW5wdXRbKG0gPSBpbnB1dC5sZW5ndGggLSBjbG9zZWQpIC0gMV07XG4gICAgICBqID0gLTE7XG4gICAgICB3aGlsZSAoKytqIDwgbSkge1xuICAgICAgICBkID0gaW5wdXRbal07XG4gICAgICAgIGlmIChkM19nZW9tX3BvbHlnb25JbnNpZGUoZCwgYSwgYikpIHtcbiAgICAgICAgICBpZiAoIWQzX2dlb21fcG9seWdvbkluc2lkZShjLCBhLCBiKSkge1xuICAgICAgICAgICAgc3ViamVjdC5wdXNoKGQzX2dlb21fcG9seWdvbkludGVyc2VjdChjLCBkLCBhLCBiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YmplY3QucHVzaChkKTtcbiAgICAgICAgfSBlbHNlIGlmIChkM19nZW9tX3BvbHlnb25JbnNpZGUoYywgYSwgYikpIHtcbiAgICAgICAgICBzdWJqZWN0LnB1c2goZDNfZ2VvbV9wb2x5Z29uSW50ZXJzZWN0KGMsIGQsIGEsIGIpKTtcbiAgICAgICAgfVxuICAgICAgICBjID0gZDtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9zZWQpIHN1YmplY3QucHVzaChzdWJqZWN0WzBdKTtcbiAgICAgIGEgPSBiO1xuICAgIH1cbiAgICByZXR1cm4gc3ViamVjdDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvbV9wb2x5Z29uSW5zaWRlKHAsIGEsIGIpIHtcbiAgICByZXR1cm4gKGJbMF0gLSBhWzBdKSAqIChwWzFdIC0gYVsxXSkgPCAoYlsxXSAtIGFbMV0pICogKHBbMF0gLSBhWzBdKTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3BvbHlnb25JbnRlcnNlY3QoYywgZCwgYSwgYikge1xuICAgIHZhciB4MSA9IGNbMF0sIHgzID0gYVswXSwgeDIxID0gZFswXSAtIHgxLCB4NDMgPSBiWzBdIC0geDMsIHkxID0gY1sxXSwgeTMgPSBhWzFdLCB5MjEgPSBkWzFdIC0geTEsIHk0MyA9IGJbMV0gLSB5MywgdWEgPSAoeDQzICogKHkxIC0geTMpIC0geTQzICogKHgxIC0geDMpKSAvICh5NDMgKiB4MjEgLSB4NDMgKiB5MjEpO1xuICAgIHJldHVybiBbIHgxICsgdWEgKiB4MjEsIHkxICsgdWEgKiB5MjEgXTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3BvbHlnb25DbG9zZWQoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgYSA9IGNvb3JkaW5hdGVzWzBdLCBiID0gY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuICEoYVswXSAtIGJbMF0gfHwgYVsxXSAtIGJbMV0pO1xuICB9XG4gIHZhciBkM19nZW9tX3Zvcm9ub2lFZGdlcywgZDNfZ2VvbV92b3Jvbm9pQ2VsbHMsIGQzX2dlb21fdm9yb25vaUJlYWNoZXMsIGQzX2dlb21fdm9yb25vaUJlYWNoUG9vbCA9IFtdLCBkM19nZW9tX3Zvcm9ub2lGaXJzdENpcmNsZSwgZDNfZ2VvbV92b3Jvbm9pQ2lyY2xlcywgZDNfZ2VvbV92b3Jvbm9pQ2lyY2xlUG9vbCA9IFtdO1xuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lCZWFjaCgpIHtcbiAgICBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja05vZGUodGhpcyk7XG4gICAgdGhpcy5lZGdlID0gdGhpcy5zaXRlID0gdGhpcy5jaXJjbGUgPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaUNyZWF0ZUJlYWNoKHNpdGUpIHtcbiAgICB2YXIgYmVhY2ggPSBkM19nZW9tX3Zvcm9ub2lCZWFjaFBvb2wucG9wKCkgfHwgbmV3IGQzX2dlb21fdm9yb25vaUJlYWNoKCk7XG4gICAgYmVhY2guc2l0ZSA9IHNpdGU7XG4gICAgcmV0dXJuIGJlYWNoO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaURldGFjaEJlYWNoKGJlYWNoKSB7XG4gICAgZDNfZ2VvbV92b3Jvbm9pRGV0YWNoQ2lyY2xlKGJlYWNoKTtcbiAgICBkM19nZW9tX3Zvcm9ub2lCZWFjaGVzLnJlbW92ZShiZWFjaCk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pQmVhY2hQb29sLnB1c2goYmVhY2gpO1xuICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrTm9kZShiZWFjaCk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pUmVtb3ZlQmVhY2goYmVhY2gpIHtcbiAgICB2YXIgY2lyY2xlID0gYmVhY2guY2lyY2xlLCB4ID0gY2lyY2xlLngsIHkgPSBjaXJjbGUuY3ksIHZlcnRleCA9IHtcbiAgICAgIHg6IHgsXG4gICAgICB5OiB5XG4gICAgfSwgcHJldmlvdXMgPSBiZWFjaC5QLCBuZXh0ID0gYmVhY2guTiwgZGlzYXBwZWFyaW5nID0gWyBiZWFjaCBdO1xuICAgIGQzX2dlb21fdm9yb25vaURldGFjaEJlYWNoKGJlYWNoKTtcbiAgICB2YXIgbEFyYyA9IHByZXZpb3VzO1xuICAgIHdoaWxlIChsQXJjLmNpcmNsZSAmJiBhYnMoeCAtIGxBcmMuY2lyY2xlLngpIDwgzrUgJiYgYWJzKHkgLSBsQXJjLmNpcmNsZS5jeSkgPCDOtSkge1xuICAgICAgcHJldmlvdXMgPSBsQXJjLlA7XG4gICAgICBkaXNhcHBlYXJpbmcudW5zaGlmdChsQXJjKTtcbiAgICAgIGQzX2dlb21fdm9yb25vaURldGFjaEJlYWNoKGxBcmMpO1xuICAgICAgbEFyYyA9IHByZXZpb3VzO1xuICAgIH1cbiAgICBkaXNhcHBlYXJpbmcudW5zaGlmdChsQXJjKTtcbiAgICBkM19nZW9tX3Zvcm9ub2lEZXRhY2hDaXJjbGUobEFyYyk7XG4gICAgdmFyIHJBcmMgPSBuZXh0O1xuICAgIHdoaWxlIChyQXJjLmNpcmNsZSAmJiBhYnMoeCAtIHJBcmMuY2lyY2xlLngpIDwgzrUgJiYgYWJzKHkgLSByQXJjLmNpcmNsZS5jeSkgPCDOtSkge1xuICAgICAgbmV4dCA9IHJBcmMuTjtcbiAgICAgIGRpc2FwcGVhcmluZy5wdXNoKHJBcmMpO1xuICAgICAgZDNfZ2VvbV92b3Jvbm9pRGV0YWNoQmVhY2gockFyYyk7XG4gICAgICByQXJjID0gbmV4dDtcbiAgICB9XG4gICAgZGlzYXBwZWFyaW5nLnB1c2gockFyYyk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pRGV0YWNoQ2lyY2xlKHJBcmMpO1xuICAgIHZhciBuQXJjcyA9IGRpc2FwcGVhcmluZy5sZW5ndGgsIGlBcmM7XG4gICAgZm9yIChpQXJjID0gMTsgaUFyYyA8IG5BcmNzOyArK2lBcmMpIHtcbiAgICAgIHJBcmMgPSBkaXNhcHBlYXJpbmdbaUFyY107XG4gICAgICBsQXJjID0gZGlzYXBwZWFyaW5nW2lBcmMgLSAxXTtcbiAgICAgIGQzX2dlb21fdm9yb25vaVNldEVkZ2VFbmQockFyYy5lZGdlLCBsQXJjLnNpdGUsIHJBcmMuc2l0ZSwgdmVydGV4KTtcbiAgICB9XG4gICAgbEFyYyA9IGRpc2FwcGVhcmluZ1swXTtcbiAgICByQXJjID0gZGlzYXBwZWFyaW5nW25BcmNzIC0gMV07XG4gICAgckFyYy5lZGdlID0gZDNfZ2VvbV92b3Jvbm9pQ3JlYXRlRWRnZShsQXJjLnNpdGUsIHJBcmMuc2l0ZSwgbnVsbCwgdmVydGV4KTtcbiAgICBkM19nZW9tX3Zvcm9ub2lBdHRhY2hDaXJjbGUobEFyYyk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pQXR0YWNoQ2lyY2xlKHJBcmMpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaUFkZEJlYWNoKHNpdGUpIHtcbiAgICB2YXIgeCA9IHNpdGUueCwgZGlyZWN0cml4ID0gc2l0ZS55LCBsQXJjLCByQXJjLCBkeGwsIGR4ciwgbm9kZSA9IGQzX2dlb21fdm9yb25vaUJlYWNoZXMuXztcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgZHhsID0gZDNfZ2VvbV92b3Jvbm9pTGVmdEJyZWFrUG9pbnQobm9kZSwgZGlyZWN0cml4KSAtIHg7XG4gICAgICBpZiAoZHhsID4gzrUpIG5vZGUgPSBub2RlLkw7IGVsc2Uge1xuICAgICAgICBkeHIgPSB4IC0gZDNfZ2VvbV92b3Jvbm9pUmlnaHRCcmVha1BvaW50KG5vZGUsIGRpcmVjdHJpeCk7XG4gICAgICAgIGlmIChkeHIgPiDOtSkge1xuICAgICAgICAgIGlmICghbm9kZS5SKSB7XG4gICAgICAgICAgICBsQXJjID0gbm9kZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBub2RlID0gbm9kZS5SO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkeGwgPiAtzrUpIHtcbiAgICAgICAgICAgIGxBcmMgPSBub2RlLlA7XG4gICAgICAgICAgICByQXJjID0gbm9kZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGR4ciA+IC3OtSkge1xuICAgICAgICAgICAgbEFyYyA9IG5vZGU7XG4gICAgICAgICAgICByQXJjID0gbm9kZS5OO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsQXJjID0gckFyYyA9IG5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBuZXdBcmMgPSBkM19nZW9tX3Zvcm9ub2lDcmVhdGVCZWFjaChzaXRlKTtcbiAgICBkM19nZW9tX3Zvcm9ub2lCZWFjaGVzLmluc2VydChsQXJjLCBuZXdBcmMpO1xuICAgIGlmICghbEFyYyAmJiAhckFyYykgcmV0dXJuO1xuICAgIGlmIChsQXJjID09PSByQXJjKSB7XG4gICAgICBkM19nZW9tX3Zvcm9ub2lEZXRhY2hDaXJjbGUobEFyYyk7XG4gICAgICByQXJjID0gZDNfZ2VvbV92b3Jvbm9pQ3JlYXRlQmVhY2gobEFyYy5zaXRlKTtcbiAgICAgIGQzX2dlb21fdm9yb25vaUJlYWNoZXMuaW5zZXJ0KG5ld0FyYywgckFyYyk7XG4gICAgICBuZXdBcmMuZWRnZSA9IHJBcmMuZWRnZSA9IGQzX2dlb21fdm9yb25vaUNyZWF0ZUVkZ2UobEFyYy5zaXRlLCBuZXdBcmMuc2l0ZSk7XG4gICAgICBkM19nZW9tX3Zvcm9ub2lBdHRhY2hDaXJjbGUobEFyYyk7XG4gICAgICBkM19nZW9tX3Zvcm9ub2lBdHRhY2hDaXJjbGUockFyYyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghckFyYykge1xuICAgICAgbmV3QXJjLmVkZ2UgPSBkM19nZW9tX3Zvcm9ub2lDcmVhdGVFZGdlKGxBcmMuc2l0ZSwgbmV3QXJjLnNpdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkM19nZW9tX3Zvcm9ub2lEZXRhY2hDaXJjbGUobEFyYyk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pRGV0YWNoQ2lyY2xlKHJBcmMpO1xuICAgIHZhciBsU2l0ZSA9IGxBcmMuc2l0ZSwgYXggPSBsU2l0ZS54LCBheSA9IGxTaXRlLnksIGJ4ID0gc2l0ZS54IC0gYXgsIGJ5ID0gc2l0ZS55IC0gYXksIHJTaXRlID0gckFyYy5zaXRlLCBjeCA9IHJTaXRlLnggLSBheCwgY3kgPSByU2l0ZS55IC0gYXksIGQgPSAyICogKGJ4ICogY3kgLSBieSAqIGN4KSwgaGIgPSBieCAqIGJ4ICsgYnkgKiBieSwgaGMgPSBjeCAqIGN4ICsgY3kgKiBjeSwgdmVydGV4ID0ge1xuICAgICAgeDogKGN5ICogaGIgLSBieSAqIGhjKSAvIGQgKyBheCxcbiAgICAgIHk6IChieCAqIGhjIC0gY3ggKiBoYikgLyBkICsgYXlcbiAgICB9O1xuICAgIGQzX2dlb21fdm9yb25vaVNldEVkZ2VFbmQockFyYy5lZGdlLCBsU2l0ZSwgclNpdGUsIHZlcnRleCk7XG4gICAgbmV3QXJjLmVkZ2UgPSBkM19nZW9tX3Zvcm9ub2lDcmVhdGVFZGdlKGxTaXRlLCBzaXRlLCBudWxsLCB2ZXJ0ZXgpO1xuICAgIHJBcmMuZWRnZSA9IGQzX2dlb21fdm9yb25vaUNyZWF0ZUVkZ2Uoc2l0ZSwgclNpdGUsIG51bGwsIHZlcnRleCk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pQXR0YWNoQ2lyY2xlKGxBcmMpO1xuICAgIGQzX2dlb21fdm9yb25vaUF0dGFjaENpcmNsZShyQXJjKTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lMZWZ0QnJlYWtQb2ludChhcmMsIGRpcmVjdHJpeCkge1xuICAgIHZhciBzaXRlID0gYXJjLnNpdGUsIHJmb2N4ID0gc2l0ZS54LCByZm9jeSA9IHNpdGUueSwgcGJ5MiA9IHJmb2N5IC0gZGlyZWN0cml4O1xuICAgIGlmICghcGJ5MikgcmV0dXJuIHJmb2N4O1xuICAgIHZhciBsQXJjID0gYXJjLlA7XG4gICAgaWYgKCFsQXJjKSByZXR1cm4gLUluZmluaXR5O1xuICAgIHNpdGUgPSBsQXJjLnNpdGU7XG4gICAgdmFyIGxmb2N4ID0gc2l0ZS54LCBsZm9jeSA9IHNpdGUueSwgcGxieTIgPSBsZm9jeSAtIGRpcmVjdHJpeDtcbiAgICBpZiAoIXBsYnkyKSByZXR1cm4gbGZvY3g7XG4gICAgdmFyIGhsID0gbGZvY3ggLSByZm9jeCwgYWJ5MiA9IDEgLyBwYnkyIC0gMSAvIHBsYnkyLCBiID0gaGwgLyBwbGJ5MjtcbiAgICBpZiAoYWJ5MikgcmV0dXJuICgtYiArIE1hdGguc3FydChiICogYiAtIDIgKiBhYnkyICogKGhsICogaGwgLyAoLTIgKiBwbGJ5MikgLSBsZm9jeSArIHBsYnkyIC8gMiArIHJmb2N5IC0gcGJ5MiAvIDIpKSkgLyBhYnkyICsgcmZvY3g7XG4gICAgcmV0dXJuIChyZm9jeCArIGxmb2N4KSAvIDI7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pUmlnaHRCcmVha1BvaW50KGFyYywgZGlyZWN0cml4KSB7XG4gICAgdmFyIHJBcmMgPSBhcmMuTjtcbiAgICBpZiAockFyYykgcmV0dXJuIGQzX2dlb21fdm9yb25vaUxlZnRCcmVha1BvaW50KHJBcmMsIGRpcmVjdHJpeCk7XG4gICAgdmFyIHNpdGUgPSBhcmMuc2l0ZTtcbiAgICByZXR1cm4gc2l0ZS55ID09PSBkaXJlY3RyaXggPyBzaXRlLnggOiBJbmZpbml0eTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lDZWxsKHNpdGUpIHtcbiAgICB0aGlzLnNpdGUgPSBzaXRlO1xuICAgIHRoaXMuZWRnZXMgPSBbXTtcbiAgfVxuICBkM19nZW9tX3Zvcm9ub2lDZWxsLnByb3RvdHlwZS5wcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhhbGZFZGdlcyA9IHRoaXMuZWRnZXMsIGlIYWxmRWRnZSA9IGhhbGZFZGdlcy5sZW5ndGgsIGVkZ2U7XG4gICAgd2hpbGUgKGlIYWxmRWRnZS0tKSB7XG4gICAgICBlZGdlID0gaGFsZkVkZ2VzW2lIYWxmRWRnZV0uZWRnZTtcbiAgICAgIGlmICghZWRnZS5iIHx8ICFlZGdlLmEpIGhhbGZFZGdlcy5zcGxpY2UoaUhhbGZFZGdlLCAxKTtcbiAgICB9XG4gICAgaGFsZkVkZ2VzLnNvcnQoZDNfZ2VvbV92b3Jvbm9pSGFsZkVkZ2VPcmRlcik7XG4gICAgcmV0dXJuIGhhbGZFZGdlcy5sZW5ndGg7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaUNsb3NlQ2VsbHMoZXh0ZW50KSB7XG4gICAgdmFyIHgwID0gZXh0ZW50WzBdWzBdLCB4MSA9IGV4dGVudFsxXVswXSwgeTAgPSBleHRlbnRbMF1bMV0sIHkxID0gZXh0ZW50WzFdWzFdLCB4MiwgeTIsIHgzLCB5MywgY2VsbHMgPSBkM19nZW9tX3Zvcm9ub2lDZWxscywgaUNlbGwgPSBjZWxscy5sZW5ndGgsIGNlbGwsIGlIYWxmRWRnZSwgaGFsZkVkZ2VzLCBuSGFsZkVkZ2VzLCBzdGFydCwgZW5kO1xuICAgIHdoaWxlIChpQ2VsbC0tKSB7XG4gICAgICBjZWxsID0gY2VsbHNbaUNlbGxdO1xuICAgICAgaWYgKCFjZWxsIHx8ICFjZWxsLnByZXBhcmUoKSkgY29udGludWU7XG4gICAgICBoYWxmRWRnZXMgPSBjZWxsLmVkZ2VzO1xuICAgICAgbkhhbGZFZGdlcyA9IGhhbGZFZGdlcy5sZW5ndGg7XG4gICAgICBpSGFsZkVkZ2UgPSAwO1xuICAgICAgd2hpbGUgKGlIYWxmRWRnZSA8IG5IYWxmRWRnZXMpIHtcbiAgICAgICAgZW5kID0gaGFsZkVkZ2VzW2lIYWxmRWRnZV0uZW5kKCksIHgzID0gZW5kLngsIHkzID0gZW5kLnk7XG4gICAgICAgIHN0YXJ0ID0gaGFsZkVkZ2VzWysraUhhbGZFZGdlICUgbkhhbGZFZGdlc10uc3RhcnQoKSwgeDIgPSBzdGFydC54LCB5MiA9IHN0YXJ0Lnk7XG4gICAgICAgIGlmIChhYnMoeDMgLSB4MikgPiDOtSB8fCBhYnMoeTMgLSB5MikgPiDOtSkge1xuICAgICAgICAgIGhhbGZFZGdlcy5zcGxpY2UoaUhhbGZFZGdlLCAwLCBuZXcgZDNfZ2VvbV92b3Jvbm9pSGFsZkVkZ2UoZDNfZ2VvbV92b3Jvbm9pQ3JlYXRlQm9yZGVyRWRnZShjZWxsLnNpdGUsIGVuZCwgYWJzKHgzIC0geDApIDwgzrUgJiYgeTEgLSB5MyA+IM61ID8ge1xuICAgICAgICAgICAgeDogeDAsXG4gICAgICAgICAgICB5OiBhYnMoeDIgLSB4MCkgPCDOtSA/IHkyIDogeTFcbiAgICAgICAgICB9IDogYWJzKHkzIC0geTEpIDwgzrUgJiYgeDEgLSB4MyA+IM61ID8ge1xuICAgICAgICAgICAgeDogYWJzKHkyIC0geTEpIDwgzrUgPyB4MiA6IHgxLFxuICAgICAgICAgICAgeTogeTFcbiAgICAgICAgICB9IDogYWJzKHgzIC0geDEpIDwgzrUgJiYgeTMgLSB5MCA+IM61ID8ge1xuICAgICAgICAgICAgeDogeDEsXG4gICAgICAgICAgICB5OiBhYnMoeDIgLSB4MSkgPCDOtSA/IHkyIDogeTBcbiAgICAgICAgICB9IDogYWJzKHkzIC0geTApIDwgzrUgJiYgeDMgLSB4MCA+IM61ID8ge1xuICAgICAgICAgICAgeDogYWJzKHkyIC0geTApIDwgzrUgPyB4MiA6IHgwLFxuICAgICAgICAgICAgeTogeTBcbiAgICAgICAgICB9IDogbnVsbCksIGNlbGwuc2l0ZSwgbnVsbCkpO1xuICAgICAgICAgICsrbkhhbGZFZGdlcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lIYWxmRWRnZU9yZGVyKGEsIGIpIHtcbiAgICByZXR1cm4gYi5hbmdsZSAtIGEuYW5nbGU7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pQ2lyY2xlKCkge1xuICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrTm9kZSh0aGlzKTtcbiAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLmFyYyA9IHRoaXMuc2l0ZSA9IHRoaXMuY3kgPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaUF0dGFjaENpcmNsZShhcmMpIHtcbiAgICB2YXIgbEFyYyA9IGFyYy5QLCByQXJjID0gYXJjLk47XG4gICAgaWYgKCFsQXJjIHx8ICFyQXJjKSByZXR1cm47XG4gICAgdmFyIGxTaXRlID0gbEFyYy5zaXRlLCBjU2l0ZSA9IGFyYy5zaXRlLCByU2l0ZSA9IHJBcmMuc2l0ZTtcbiAgICBpZiAobFNpdGUgPT09IHJTaXRlKSByZXR1cm47XG4gICAgdmFyIGJ4ID0gY1NpdGUueCwgYnkgPSBjU2l0ZS55LCBheCA9IGxTaXRlLnggLSBieCwgYXkgPSBsU2l0ZS55IC0gYnksIGN4ID0gclNpdGUueCAtIGJ4LCBjeSA9IHJTaXRlLnkgLSBieTtcbiAgICB2YXIgZCA9IDIgKiAoYXggKiBjeSAtIGF5ICogY3gpO1xuICAgIGlmIChkID49IC3OtTIpIHJldHVybjtcbiAgICB2YXIgaGEgPSBheCAqIGF4ICsgYXkgKiBheSwgaGMgPSBjeCAqIGN4ICsgY3kgKiBjeSwgeCA9IChjeSAqIGhhIC0gYXkgKiBoYykgLyBkLCB5ID0gKGF4ICogaGMgLSBjeCAqIGhhKSAvIGQsIGN5ID0geSArIGJ5O1xuICAgIHZhciBjaXJjbGUgPSBkM19nZW9tX3Zvcm9ub2lDaXJjbGVQb29sLnBvcCgpIHx8IG5ldyBkM19nZW9tX3Zvcm9ub2lDaXJjbGUoKTtcbiAgICBjaXJjbGUuYXJjID0gYXJjO1xuICAgIGNpcmNsZS5zaXRlID0gY1NpdGU7XG4gICAgY2lyY2xlLnggPSB4ICsgYng7XG4gICAgY2lyY2xlLnkgPSBjeSArIE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBjaXJjbGUuY3kgPSBjeTtcbiAgICBhcmMuY2lyY2xlID0gY2lyY2xlO1xuICAgIHZhciBiZWZvcmUgPSBudWxsLCBub2RlID0gZDNfZ2VvbV92b3Jvbm9pQ2lyY2xlcy5fO1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBpZiAoY2lyY2xlLnkgPCBub2RlLnkgfHwgY2lyY2xlLnkgPT09IG5vZGUueSAmJiBjaXJjbGUueCA8PSBub2RlLngpIHtcbiAgICAgICAgaWYgKG5vZGUuTCkgbm9kZSA9IG5vZGUuTDsgZWxzZSB7XG4gICAgICAgICAgYmVmb3JlID0gbm9kZS5QO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9kZS5SKSBub2RlID0gbm9kZS5SOyBlbHNlIHtcbiAgICAgICAgICBiZWZvcmUgPSBub2RlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGQzX2dlb21fdm9yb25vaUNpcmNsZXMuaW5zZXJ0KGJlZm9yZSwgY2lyY2xlKTtcbiAgICBpZiAoIWJlZm9yZSkgZDNfZ2VvbV92b3Jvbm9pRmlyc3RDaXJjbGUgPSBjaXJjbGU7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pRGV0YWNoQ2lyY2xlKGFyYykge1xuICAgIHZhciBjaXJjbGUgPSBhcmMuY2lyY2xlO1xuICAgIGlmIChjaXJjbGUpIHtcbiAgICAgIGlmICghY2lyY2xlLlApIGQzX2dlb21fdm9yb25vaUZpcnN0Q2lyY2xlID0gY2lyY2xlLk47XG4gICAgICBkM19nZW9tX3Zvcm9ub2lDaXJjbGVzLnJlbW92ZShjaXJjbGUpO1xuICAgICAgZDNfZ2VvbV92b3Jvbm9pQ2lyY2xlUG9vbC5wdXNoKGNpcmNsZSk7XG4gICAgICBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja05vZGUoY2lyY2xlKTtcbiAgICAgIGFyYy5jaXJjbGUgPSBudWxsO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lDbGlwRWRnZXMoZXh0ZW50KSB7XG4gICAgdmFyIGVkZ2VzID0gZDNfZ2VvbV92b3Jvbm9pRWRnZXMsIGNsaXAgPSBkM19nZW9tX2NsaXBMaW5lKGV4dGVudFswXVswXSwgZXh0ZW50WzBdWzFdLCBleHRlbnRbMV1bMF0sIGV4dGVudFsxXVsxXSksIGkgPSBlZGdlcy5sZW5ndGgsIGU7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgZSA9IGVkZ2VzW2ldO1xuICAgICAgaWYgKCFkM19nZW9tX3Zvcm9ub2lDb25uZWN0RWRnZShlLCBleHRlbnQpIHx8ICFjbGlwKGUpIHx8IGFicyhlLmEueCAtIGUuYi54KSA8IM61ICYmIGFicyhlLmEueSAtIGUuYi55KSA8IM61KSB7XG4gICAgICAgIGUuYSA9IGUuYiA9IG51bGw7XG4gICAgICAgIGVkZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pQ29ubmVjdEVkZ2UoZWRnZSwgZXh0ZW50KSB7XG4gICAgdmFyIHZiID0gZWRnZS5iO1xuICAgIGlmICh2YikgcmV0dXJuIHRydWU7XG4gICAgdmFyIHZhID0gZWRnZS5hLCB4MCA9IGV4dGVudFswXVswXSwgeDEgPSBleHRlbnRbMV1bMF0sIHkwID0gZXh0ZW50WzBdWzFdLCB5MSA9IGV4dGVudFsxXVsxXSwgbFNpdGUgPSBlZGdlLmwsIHJTaXRlID0gZWRnZS5yLCBseCA9IGxTaXRlLngsIGx5ID0gbFNpdGUueSwgcnggPSByU2l0ZS54LCByeSA9IHJTaXRlLnksIGZ4ID0gKGx4ICsgcngpIC8gMiwgZnkgPSAobHkgKyByeSkgLyAyLCBmbSwgZmI7XG4gICAgaWYgKHJ5ID09PSBseSkge1xuICAgICAgaWYgKGZ4IDwgeDAgfHwgZnggPj0geDEpIHJldHVybjtcbiAgICAgIGlmIChseCA+IHJ4KSB7XG4gICAgICAgIGlmICghdmEpIHZhID0ge1xuICAgICAgICAgIHg6IGZ4LFxuICAgICAgICAgIHk6IHkwXG4gICAgICAgIH07IGVsc2UgaWYgKHZhLnkgPj0geTEpIHJldHVybjtcbiAgICAgICAgdmIgPSB7XG4gICAgICAgICAgeDogZngsXG4gICAgICAgICAgeTogeTFcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdmEpIHZhID0ge1xuICAgICAgICAgIHg6IGZ4LFxuICAgICAgICAgIHk6IHkxXG4gICAgICAgIH07IGVsc2UgaWYgKHZhLnkgPCB5MCkgcmV0dXJuO1xuICAgICAgICB2YiA9IHtcbiAgICAgICAgICB4OiBmeCxcbiAgICAgICAgICB5OiB5MFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmbSA9IChseCAtIHJ4KSAvIChyeSAtIGx5KTtcbiAgICAgIGZiID0gZnkgLSBmbSAqIGZ4O1xuICAgICAgaWYgKGZtIDwgLTEgfHwgZm0gPiAxKSB7XG4gICAgICAgIGlmIChseCA+IHJ4KSB7XG4gICAgICAgICAgaWYgKCF2YSkgdmEgPSB7XG4gICAgICAgICAgICB4OiAoeTAgLSBmYikgLyBmbSxcbiAgICAgICAgICAgIHk6IHkwXG4gICAgICAgICAgfTsgZWxzZSBpZiAodmEueSA+PSB5MSkgcmV0dXJuO1xuICAgICAgICAgIHZiID0ge1xuICAgICAgICAgICAgeDogKHkxIC0gZmIpIC8gZm0sXG4gICAgICAgICAgICB5OiB5MVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCF2YSkgdmEgPSB7XG4gICAgICAgICAgICB4OiAoeTEgLSBmYikgLyBmbSxcbiAgICAgICAgICAgIHk6IHkxXG4gICAgICAgICAgfTsgZWxzZSBpZiAodmEueSA8IHkwKSByZXR1cm47XG4gICAgICAgICAgdmIgPSB7XG4gICAgICAgICAgICB4OiAoeTAgLSBmYikgLyBmbSxcbiAgICAgICAgICAgIHk6IHkwXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGx5IDwgcnkpIHtcbiAgICAgICAgICBpZiAoIXZhKSB2YSA9IHtcbiAgICAgICAgICAgIHg6IHgwLFxuICAgICAgICAgICAgeTogZm0gKiB4MCArIGZiXG4gICAgICAgICAgfTsgZWxzZSBpZiAodmEueCA+PSB4MSkgcmV0dXJuO1xuICAgICAgICAgIHZiID0ge1xuICAgICAgICAgICAgeDogeDEsXG4gICAgICAgICAgICB5OiBmbSAqIHgxICsgZmJcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghdmEpIHZhID0ge1xuICAgICAgICAgICAgeDogeDEsXG4gICAgICAgICAgICB5OiBmbSAqIHgxICsgZmJcbiAgICAgICAgICB9OyBlbHNlIGlmICh2YS54IDwgeDApIHJldHVybjtcbiAgICAgICAgICB2YiA9IHtcbiAgICAgICAgICAgIHg6IHgwLFxuICAgICAgICAgICAgeTogZm0gKiB4MCArIGZiXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBlZGdlLmEgPSB2YTtcbiAgICBlZGdlLmIgPSB2YjtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lFZGdlKGxTaXRlLCByU2l0ZSkge1xuICAgIHRoaXMubCA9IGxTaXRlO1xuICAgIHRoaXMuciA9IHJTaXRlO1xuICAgIHRoaXMuYSA9IHRoaXMuYiA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pQ3JlYXRlRWRnZShsU2l0ZSwgclNpdGUsIHZhLCB2Yikge1xuICAgIHZhciBlZGdlID0gbmV3IGQzX2dlb21fdm9yb25vaUVkZ2UobFNpdGUsIHJTaXRlKTtcbiAgICBkM19nZW9tX3Zvcm9ub2lFZGdlcy5wdXNoKGVkZ2UpO1xuICAgIGlmICh2YSkgZDNfZ2VvbV92b3Jvbm9pU2V0RWRnZUVuZChlZGdlLCBsU2l0ZSwgclNpdGUsIHZhKTtcbiAgICBpZiAodmIpIGQzX2dlb21fdm9yb25vaVNldEVkZ2VFbmQoZWRnZSwgclNpdGUsIGxTaXRlLCB2Yik7XG4gICAgZDNfZ2VvbV92b3Jvbm9pQ2VsbHNbbFNpdGUuaV0uZWRnZXMucHVzaChuZXcgZDNfZ2VvbV92b3Jvbm9pSGFsZkVkZ2UoZWRnZSwgbFNpdGUsIHJTaXRlKSk7XG4gICAgZDNfZ2VvbV92b3Jvbm9pQ2VsbHNbclNpdGUuaV0uZWRnZXMucHVzaChuZXcgZDNfZ2VvbV92b3Jvbm9pSGFsZkVkZ2UoZWRnZSwgclNpdGUsIGxTaXRlKSk7XG4gICAgcmV0dXJuIGVkZ2U7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pQ3JlYXRlQm9yZGVyRWRnZShsU2l0ZSwgdmEsIHZiKSB7XG4gICAgdmFyIGVkZ2UgPSBuZXcgZDNfZ2VvbV92b3Jvbm9pRWRnZShsU2l0ZSwgbnVsbCk7XG4gICAgZWRnZS5hID0gdmE7XG4gICAgZWRnZS5iID0gdmI7XG4gICAgZDNfZ2VvbV92b3Jvbm9pRWRnZXMucHVzaChlZGdlKTtcbiAgICByZXR1cm4gZWRnZTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lTZXRFZGdlRW5kKGVkZ2UsIGxTaXRlLCByU2l0ZSwgdmVydGV4KSB7XG4gICAgaWYgKCFlZGdlLmEgJiYgIWVkZ2UuYikge1xuICAgICAgZWRnZS5hID0gdmVydGV4O1xuICAgICAgZWRnZS5sID0gbFNpdGU7XG4gICAgICBlZGdlLnIgPSByU2l0ZTtcbiAgICB9IGVsc2UgaWYgKGVkZ2UubCA9PT0gclNpdGUpIHtcbiAgICAgIGVkZ2UuYiA9IHZlcnRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgZWRnZS5hID0gdmVydGV4O1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lIYWxmRWRnZShlZGdlLCBsU2l0ZSwgclNpdGUpIHtcbiAgICB2YXIgdmEgPSBlZGdlLmEsIHZiID0gZWRnZS5iO1xuICAgIHRoaXMuZWRnZSA9IGVkZ2U7XG4gICAgdGhpcy5zaXRlID0gbFNpdGU7XG4gICAgdGhpcy5hbmdsZSA9IHJTaXRlID8gTWF0aC5hdGFuMihyU2l0ZS55IC0gbFNpdGUueSwgclNpdGUueCAtIGxTaXRlLngpIDogZWRnZS5sID09PSBsU2l0ZSA/IE1hdGguYXRhbjIodmIueCAtIHZhLngsIHZhLnkgLSB2Yi55KSA6IE1hdGguYXRhbjIodmEueCAtIHZiLngsIHZiLnkgLSB2YS55KTtcbiAgfVxuICBkM19nZW9tX3Zvcm9ub2lIYWxmRWRnZS5wcm90b3R5cGUgPSB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWRnZS5sID09PSB0aGlzLnNpdGUgPyB0aGlzLmVkZ2UuYSA6IHRoaXMuZWRnZS5iO1xuICAgIH0sXG4gICAgZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVkZ2UubCA9PT0gdGhpcy5zaXRlID8gdGhpcy5lZGdlLmIgOiB0aGlzLmVkZ2UuYTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrVHJlZSgpIHtcbiAgICB0aGlzLl8gPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrTm9kZShub2RlKSB7XG4gICAgbm9kZS5VID0gbm9kZS5DID0gbm9kZS5MID0gbm9kZS5SID0gbm9kZS5QID0gbm9kZS5OID0gbnVsbDtcbiAgfVxuICBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja1RyZWUucHJvdG90eXBlID0ge1xuICAgIGluc2VydDogZnVuY3Rpb24oYWZ0ZXIsIG5vZGUpIHtcbiAgICAgIHZhciBwYXJlbnQsIGdyYW5kcGEsIHVuY2xlO1xuICAgICAgaWYgKGFmdGVyKSB7XG4gICAgICAgIG5vZGUuUCA9IGFmdGVyO1xuICAgICAgICBub2RlLk4gPSBhZnRlci5OO1xuICAgICAgICBpZiAoYWZ0ZXIuTikgYWZ0ZXIuTi5QID0gbm9kZTtcbiAgICAgICAgYWZ0ZXIuTiA9IG5vZGU7XG4gICAgICAgIGlmIChhZnRlci5SKSB7XG4gICAgICAgICAgYWZ0ZXIgPSBhZnRlci5SO1xuICAgICAgICAgIHdoaWxlIChhZnRlci5MKSBhZnRlciA9IGFmdGVyLkw7XG4gICAgICAgICAgYWZ0ZXIuTCA9IG5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWZ0ZXIuUiA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50ID0gYWZ0ZXI7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuXykge1xuICAgICAgICBhZnRlciA9IGQzX2dlb21fdm9yb25vaVJlZEJsYWNrRmlyc3QodGhpcy5fKTtcbiAgICAgICAgbm9kZS5QID0gbnVsbDtcbiAgICAgICAgbm9kZS5OID0gYWZ0ZXI7XG4gICAgICAgIGFmdGVyLlAgPSBhZnRlci5MID0gbm9kZTtcbiAgICAgICAgcGFyZW50ID0gYWZ0ZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLlAgPSBub2RlLk4gPSBudWxsO1xuICAgICAgICB0aGlzLl8gPSBub2RlO1xuICAgICAgICBwYXJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgbm9kZS5MID0gbm9kZS5SID0gbnVsbDtcbiAgICAgIG5vZGUuVSA9IHBhcmVudDtcbiAgICAgIG5vZGUuQyA9IHRydWU7XG4gICAgICBhZnRlciA9IG5vZGU7XG4gICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5DKSB7XG4gICAgICAgIGdyYW5kcGEgPSBwYXJlbnQuVTtcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gZ3JhbmRwYS5MKSB7XG4gICAgICAgICAgdW5jbGUgPSBncmFuZHBhLlI7XG4gICAgICAgICAgaWYgKHVuY2xlICYmIHVuY2xlLkMpIHtcbiAgICAgICAgICAgIHBhcmVudC5DID0gdW5jbGUuQyA9IGZhbHNlO1xuICAgICAgICAgICAgZ3JhbmRwYS5DID0gdHJ1ZTtcbiAgICAgICAgICAgIGFmdGVyID0gZ3JhbmRwYTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFmdGVyID09PSBwYXJlbnQuUikge1xuICAgICAgICAgICAgICBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja1JvdGF0ZUxlZnQodGhpcywgcGFyZW50KTtcbiAgICAgICAgICAgICAgYWZ0ZXIgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgIHBhcmVudCA9IGFmdGVyLlU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQuQyA9IGZhbHNlO1xuICAgICAgICAgICAgZ3JhbmRwYS5DID0gdHJ1ZTtcbiAgICAgICAgICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrUm90YXRlUmlnaHQodGhpcywgZ3JhbmRwYSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuY2xlID0gZ3JhbmRwYS5MO1xuICAgICAgICAgIGlmICh1bmNsZSAmJiB1bmNsZS5DKSB7XG4gICAgICAgICAgICBwYXJlbnQuQyA9IHVuY2xlLkMgPSBmYWxzZTtcbiAgICAgICAgICAgIGdyYW5kcGEuQyA9IHRydWU7XG4gICAgICAgICAgICBhZnRlciA9IGdyYW5kcGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhZnRlciA9PT0gcGFyZW50LkwpIHtcbiAgICAgICAgICAgICAgZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tSb3RhdGVSaWdodCh0aGlzLCBwYXJlbnQpO1xuICAgICAgICAgICAgICBhZnRlciA9IHBhcmVudDtcbiAgICAgICAgICAgICAgcGFyZW50ID0gYWZ0ZXIuVTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudC5DID0gZmFsc2U7XG4gICAgICAgICAgICBncmFuZHBhLkMgPSB0cnVlO1xuICAgICAgICAgICAgZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tSb3RhdGVMZWZ0KHRoaXMsIGdyYW5kcGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQgPSBhZnRlci5VO1xuICAgICAgfVxuICAgICAgdGhpcy5fLkMgPSBmYWxzZTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKG5vZGUuTikgbm9kZS5OLlAgPSBub2RlLlA7XG4gICAgICBpZiAobm9kZS5QKSBub2RlLlAuTiA9IG5vZGUuTjtcbiAgICAgIG5vZGUuTiA9IG5vZGUuUCA9IG51bGw7XG4gICAgICB2YXIgcGFyZW50ID0gbm9kZS5VLCBzaWJsaW5nLCBsZWZ0ID0gbm9kZS5MLCByaWdodCA9IG5vZGUuUiwgbmV4dCwgcmVkO1xuICAgICAgaWYgKCFsZWZ0KSBuZXh0ID0gcmlnaHQ7IGVsc2UgaWYgKCFyaWdodCkgbmV4dCA9IGxlZnQ7IGVsc2UgbmV4dCA9IGQzX2dlb21fdm9yb25vaVJlZEJsYWNrRmlyc3QocmlnaHQpO1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBpZiAocGFyZW50LkwgPT09IG5vZGUpIHBhcmVudC5MID0gbmV4dDsgZWxzZSBwYXJlbnQuUiA9IG5leHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl8gPSBuZXh0O1xuICAgICAgfVxuICAgICAgaWYgKGxlZnQgJiYgcmlnaHQpIHtcbiAgICAgICAgcmVkID0gbmV4dC5DO1xuICAgICAgICBuZXh0LkMgPSBub2RlLkM7XG4gICAgICAgIG5leHQuTCA9IGxlZnQ7XG4gICAgICAgIGxlZnQuVSA9IG5leHQ7XG4gICAgICAgIGlmIChuZXh0ICE9PSByaWdodCkge1xuICAgICAgICAgIHBhcmVudCA9IG5leHQuVTtcbiAgICAgICAgICBuZXh0LlUgPSBub2RlLlU7XG4gICAgICAgICAgbm9kZSA9IG5leHQuUjtcbiAgICAgICAgICBwYXJlbnQuTCA9IG5vZGU7XG4gICAgICAgICAgbmV4dC5SID0gcmlnaHQ7XG4gICAgICAgICAgcmlnaHQuVSA9IG5leHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dC5VID0gcGFyZW50O1xuICAgICAgICAgIHBhcmVudCA9IG5leHQ7XG4gICAgICAgICAgbm9kZSA9IG5leHQuUjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVkID0gbm9kZS5DO1xuICAgICAgICBub2RlID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlKSBub2RlLlUgPSBwYXJlbnQ7XG4gICAgICBpZiAocmVkKSByZXR1cm47XG4gICAgICBpZiAobm9kZSAmJiBub2RlLkMpIHtcbiAgICAgICAgbm9kZS5DID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMuXykgYnJlYWs7XG4gICAgICAgIGlmIChub2RlID09PSBwYXJlbnQuTCkge1xuICAgICAgICAgIHNpYmxpbmcgPSBwYXJlbnQuUjtcbiAgICAgICAgICBpZiAoc2libGluZy5DKSB7XG4gICAgICAgICAgICBzaWJsaW5nLkMgPSBmYWxzZTtcbiAgICAgICAgICAgIHBhcmVudC5DID0gdHJ1ZTtcbiAgICAgICAgICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrUm90YXRlTGVmdCh0aGlzLCBwYXJlbnQpO1xuICAgICAgICAgICAgc2libGluZyA9IHBhcmVudC5SO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2libGluZy5MICYmIHNpYmxpbmcuTC5DIHx8IHNpYmxpbmcuUiAmJiBzaWJsaW5nLlIuQykge1xuICAgICAgICAgICAgaWYgKCFzaWJsaW5nLlIgfHwgIXNpYmxpbmcuUi5DKSB7XG4gICAgICAgICAgICAgIHNpYmxpbmcuTC5DID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNpYmxpbmcuQyA9IHRydWU7XG4gICAgICAgICAgICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrUm90YXRlUmlnaHQodGhpcywgc2libGluZyk7XG4gICAgICAgICAgICAgIHNpYmxpbmcgPSBwYXJlbnQuUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpYmxpbmcuQyA9IHBhcmVudC5DO1xuICAgICAgICAgICAgcGFyZW50LkMgPSBzaWJsaW5nLlIuQyA9IGZhbHNlO1xuICAgICAgICAgICAgZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tSb3RhdGVMZWZ0KHRoaXMsIHBhcmVudCk7XG4gICAgICAgICAgICBub2RlID0gdGhpcy5fO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpYmxpbmcgPSBwYXJlbnQuTDtcbiAgICAgICAgICBpZiAoc2libGluZy5DKSB7XG4gICAgICAgICAgICBzaWJsaW5nLkMgPSBmYWxzZTtcbiAgICAgICAgICAgIHBhcmVudC5DID0gdHJ1ZTtcbiAgICAgICAgICAgIGQzX2dlb21fdm9yb25vaVJlZEJsYWNrUm90YXRlUmlnaHQodGhpcywgcGFyZW50KTtcbiAgICAgICAgICAgIHNpYmxpbmcgPSBwYXJlbnQuTDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNpYmxpbmcuTCAmJiBzaWJsaW5nLkwuQyB8fCBzaWJsaW5nLlIgJiYgc2libGluZy5SLkMpIHtcbiAgICAgICAgICAgIGlmICghc2libGluZy5MIHx8ICFzaWJsaW5nLkwuQykge1xuICAgICAgICAgICAgICBzaWJsaW5nLlIuQyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzaWJsaW5nLkMgPSB0cnVlO1xuICAgICAgICAgICAgICBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja1JvdGF0ZUxlZnQodGhpcywgc2libGluZyk7XG4gICAgICAgICAgICAgIHNpYmxpbmcgPSBwYXJlbnQuTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpYmxpbmcuQyA9IHBhcmVudC5DO1xuICAgICAgICAgICAgcGFyZW50LkMgPSBzaWJsaW5nLkwuQyA9IGZhbHNlO1xuICAgICAgICAgICAgZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tSb3RhdGVSaWdodCh0aGlzLCBwYXJlbnQpO1xuICAgICAgICAgICAgbm9kZSA9IHRoaXMuXztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaWJsaW5nLkMgPSB0cnVlO1xuICAgICAgICBub2RlID0gcGFyZW50O1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQuVTtcbiAgICAgIH0gd2hpbGUgKCFub2RlLkMpO1xuICAgICAgaWYgKG5vZGUpIG5vZGUuQyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tSb3RhdGVMZWZ0KHRyZWUsIG5vZGUpIHtcbiAgICB2YXIgcCA9IG5vZGUsIHEgPSBub2RlLlIsIHBhcmVudCA9IHAuVTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LkwgPT09IHApIHBhcmVudC5MID0gcTsgZWxzZSBwYXJlbnQuUiA9IHE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWUuXyA9IHE7XG4gICAgfVxuICAgIHEuVSA9IHBhcmVudDtcbiAgICBwLlUgPSBxO1xuICAgIHAuUiA9IHEuTDtcbiAgICBpZiAocC5SKSBwLlIuVSA9IHA7XG4gICAgcS5MID0gcDtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja1JvdGF0ZVJpZ2h0KHRyZWUsIG5vZGUpIHtcbiAgICB2YXIgcCA9IG5vZGUsIHEgPSBub2RlLkwsIHBhcmVudCA9IHAuVTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LkwgPT09IHApIHBhcmVudC5MID0gcTsgZWxzZSBwYXJlbnQuUiA9IHE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWUuXyA9IHE7XG4gICAgfVxuICAgIHEuVSA9IHBhcmVudDtcbiAgICBwLlUgPSBxO1xuICAgIHAuTCA9IHEuUjtcbiAgICBpZiAocC5MKSBwLkwuVSA9IHA7XG4gICAgcS5SID0gcDtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lSZWRCbGFja0ZpcnN0KG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5MKSBub2RlID0gbm9kZS5MO1xuICAgIHJldHVybiBub2RlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fdm9yb25vaShzaXRlcywgYmJveCkge1xuICAgIHZhciBzaXRlID0gc2l0ZXMuc29ydChkM19nZW9tX3Zvcm9ub2lWZXJ0ZXhPcmRlcikucG9wKCksIHgwLCB5MCwgY2lyY2xlO1xuICAgIGQzX2dlb21fdm9yb25vaUVkZ2VzID0gW107XG4gICAgZDNfZ2VvbV92b3Jvbm9pQ2VsbHMgPSBuZXcgQXJyYXkoc2l0ZXMubGVuZ3RoKTtcbiAgICBkM19nZW9tX3Zvcm9ub2lCZWFjaGVzID0gbmV3IGQzX2dlb21fdm9yb25vaVJlZEJsYWNrVHJlZSgpO1xuICAgIGQzX2dlb21fdm9yb25vaUNpcmNsZXMgPSBuZXcgZDNfZ2VvbV92b3Jvbm9pUmVkQmxhY2tUcmVlKCk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNpcmNsZSA9IGQzX2dlb21fdm9yb25vaUZpcnN0Q2lyY2xlO1xuICAgICAgaWYgKHNpdGUgJiYgKCFjaXJjbGUgfHwgc2l0ZS55IDwgY2lyY2xlLnkgfHwgc2l0ZS55ID09PSBjaXJjbGUueSAmJiBzaXRlLnggPCBjaXJjbGUueCkpIHtcbiAgICAgICAgaWYgKHNpdGUueCAhPT0geDAgfHwgc2l0ZS55ICE9PSB5MCkge1xuICAgICAgICAgIGQzX2dlb21fdm9yb25vaUNlbGxzW3NpdGUuaV0gPSBuZXcgZDNfZ2VvbV92b3Jvbm9pQ2VsbChzaXRlKTtcbiAgICAgICAgICBkM19nZW9tX3Zvcm9ub2lBZGRCZWFjaChzaXRlKTtcbiAgICAgICAgICB4MCA9IHNpdGUueCwgeTAgPSBzaXRlLnk7XG4gICAgICAgIH1cbiAgICAgICAgc2l0ZSA9IHNpdGVzLnBvcCgpO1xuICAgICAgfSBlbHNlIGlmIChjaXJjbGUpIHtcbiAgICAgICAgZDNfZ2VvbV92b3Jvbm9pUmVtb3ZlQmVhY2goY2lyY2xlLmFyYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJib3gpIGQzX2dlb21fdm9yb25vaUNsaXBFZGdlcyhiYm94KSwgZDNfZ2VvbV92b3Jvbm9pQ2xvc2VDZWxscyhiYm94KTtcbiAgICB2YXIgZGlhZ3JhbSA9IHtcbiAgICAgIGNlbGxzOiBkM19nZW9tX3Zvcm9ub2lDZWxscyxcbiAgICAgIGVkZ2VzOiBkM19nZW9tX3Zvcm9ub2lFZGdlc1xuICAgIH07XG4gICAgZDNfZ2VvbV92b3Jvbm9pQmVhY2hlcyA9IGQzX2dlb21fdm9yb25vaUNpcmNsZXMgPSBkM19nZW9tX3Zvcm9ub2lFZGdlcyA9IGQzX2dlb21fdm9yb25vaUNlbGxzID0gbnVsbDtcbiAgICByZXR1cm4gZGlhZ3JhbTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3Zvcm9ub2lWZXJ0ZXhPcmRlcihhLCBiKSB7XG4gICAgcmV0dXJuIGIueSAtIGEueSB8fCBiLnggLSBhLng7XG4gIH1cbiAgZDMuZ2VvbS52b3Jvbm9pID0gZnVuY3Rpb24ocG9pbnRzKSB7XG4gICAgdmFyIHggPSBkM19nZW9tX3BvaW50WCwgeSA9IGQzX2dlb21fcG9pbnRZLCBmeCA9IHgsIGZ5ID0geSwgY2xpcEV4dGVudCA9IGQzX2dlb21fdm9yb25vaUNsaXBFeHRlbnQ7XG4gICAgaWYgKHBvaW50cykgcmV0dXJuIHZvcm9ub2kocG9pbnRzKTtcbiAgICBmdW5jdGlvbiB2b3Jvbm9pKGRhdGEpIHtcbiAgICAgIHZhciBwb2x5Z29ucyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCksIHgwID0gY2xpcEV4dGVudFswXVswXSwgeTAgPSBjbGlwRXh0ZW50WzBdWzFdLCB4MSA9IGNsaXBFeHRlbnRbMV1bMF0sIHkxID0gY2xpcEV4dGVudFsxXVsxXTtcbiAgICAgIGQzX2dlb21fdm9yb25vaShzaXRlcyhkYXRhKSwgY2xpcEV4dGVudCkuY2VsbHMuZm9yRWFjaChmdW5jdGlvbihjZWxsLCBpKSB7XG4gICAgICAgIHZhciBlZGdlcyA9IGNlbGwuZWRnZXMsIHNpdGUgPSBjZWxsLnNpdGUsIHBvbHlnb24gPSBwb2x5Z29uc1tpXSA9IGVkZ2VzLmxlbmd0aCA/IGVkZ2VzLm1hcChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIHMgPSBlLnN0YXJ0KCk7XG4gICAgICAgICAgcmV0dXJuIFsgcy54LCBzLnkgXTtcbiAgICAgICAgfSkgOiBzaXRlLnggPj0geDAgJiYgc2l0ZS54IDw9IHgxICYmIHNpdGUueSA+PSB5MCAmJiBzaXRlLnkgPD0geTEgPyBbIFsgeDAsIHkxIF0sIFsgeDEsIHkxIF0sIFsgeDEsIHkwIF0sIFsgeDAsIHkwIF0gXSA6IFtdO1xuICAgICAgICBwb2x5Z29uLnBvaW50ID0gZGF0YVtpXTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHBvbHlnb25zO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaXRlcyhkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IE1hdGgucm91bmQoZngoZCwgaSkgLyDOtSkgKiDOtSxcbiAgICAgICAgICB5OiBNYXRoLnJvdW5kKGZ5KGQsIGkpIC8gzrUpICogzrUsXG4gICAgICAgICAgaTogaVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHZvcm9ub2kubGlua3MgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gZDNfZ2VvbV92b3Jvbm9pKHNpdGVzKGRhdGEpKS5lZGdlcy5maWx0ZXIoZnVuY3Rpb24oZWRnZSkge1xuICAgICAgICByZXR1cm4gZWRnZS5sICYmIGVkZ2UucjtcbiAgICAgIH0pLm1hcChmdW5jdGlvbihlZGdlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc291cmNlOiBkYXRhW2VkZ2UubC5pXSxcbiAgICAgICAgICB0YXJnZXQ6IGRhdGFbZWRnZS5yLmldXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHZvcm9ub2kudHJpYW5nbGVzID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIHRyaWFuZ2xlcyA9IFtdO1xuICAgICAgZDNfZ2VvbV92b3Jvbm9pKHNpdGVzKGRhdGEpKS5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGNlbGwsIGkpIHtcbiAgICAgICAgdmFyIHNpdGUgPSBjZWxsLnNpdGUsIGVkZ2VzID0gY2VsbC5lZGdlcy5zb3J0KGQzX2dlb21fdm9yb25vaUhhbGZFZGdlT3JkZXIpLCBqID0gLTEsIG0gPSBlZGdlcy5sZW5ndGgsIGUwLCBzMCwgZTEgPSBlZGdlc1ttIC0gMV0uZWRnZSwgczEgPSBlMS5sID09PSBzaXRlID8gZTEuciA6IGUxLmw7XG4gICAgICAgIHdoaWxlICgrK2ogPCBtKSB7XG4gICAgICAgICAgZTAgPSBlMTtcbiAgICAgICAgICBzMCA9IHMxO1xuICAgICAgICAgIGUxID0gZWRnZXNbal0uZWRnZTtcbiAgICAgICAgICBzMSA9IGUxLmwgPT09IHNpdGUgPyBlMS5yIDogZTEubDtcbiAgICAgICAgICBpZiAoaSA8IHMwLmkgJiYgaSA8IHMxLmkgJiYgZDNfZ2VvbV92b3Jvbm9pVHJpYW5nbGVBcmVhKHNpdGUsIHMwLCBzMSkgPCAwKSB7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChbIGRhdGFbaV0sIGRhdGFbczAuaV0sIGRhdGFbczEuaV0gXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cmlhbmdsZXM7XG4gICAgfTtcbiAgICB2b3Jvbm9pLnggPSBmdW5jdGlvbihfKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChmeCA9IGQzX2Z1bmN0b3IoeCA9IF8pLCB2b3Jvbm9pKSA6IHg7XG4gICAgfTtcbiAgICB2b3Jvbm9pLnkgPSBmdW5jdGlvbihfKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChmeSA9IGQzX2Z1bmN0b3IoeSA9IF8pLCB2b3Jvbm9pKSA6IHk7XG4gICAgfTtcbiAgICB2b3Jvbm9pLmNsaXBFeHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjbGlwRXh0ZW50ID09PSBkM19nZW9tX3Zvcm9ub2lDbGlwRXh0ZW50ID8gbnVsbCA6IGNsaXBFeHRlbnQ7XG4gICAgICBjbGlwRXh0ZW50ID0gXyA9PSBudWxsID8gZDNfZ2VvbV92b3Jvbm9pQ2xpcEV4dGVudCA6IF87XG4gICAgICByZXR1cm4gdm9yb25vaTtcbiAgICB9O1xuICAgIHZvcm9ub2kuc2l6ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNsaXBFeHRlbnQgPT09IGQzX2dlb21fdm9yb25vaUNsaXBFeHRlbnQgPyBudWxsIDogY2xpcEV4dGVudCAmJiBjbGlwRXh0ZW50WzFdO1xuICAgICAgcmV0dXJuIHZvcm9ub2kuY2xpcEV4dGVudChfICYmIFsgWyAwLCAwIF0sIF8gXSk7XG4gICAgfTtcbiAgICByZXR1cm4gdm9yb25vaTtcbiAgfTtcbiAgdmFyIGQzX2dlb21fdm9yb25vaUNsaXBFeHRlbnQgPSBbIFsgLTFlNiwgLTFlNiBdLCBbIDFlNiwgMWU2IF0gXTtcbiAgZnVuY3Rpb24gZDNfZ2VvbV92b3Jvbm9pVHJpYW5nbGVBcmVhKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gKGEueCAtIGMueCkgKiAoYi55IC0gYS55KSAtIChhLnggLSBiLngpICogKGMueSAtIGEueSk7XG4gIH1cbiAgZDMuZ2VvbS5kZWxhdW5heSA9IGZ1bmN0aW9uKHZlcnRpY2VzKSB7XG4gICAgcmV0dXJuIGQzLmdlb20udm9yb25vaSgpLnRyaWFuZ2xlcyh2ZXJ0aWNlcyk7XG4gIH07XG4gIGQzLmdlb20ucXVhZHRyZWUgPSBmdW5jdGlvbihwb2ludHMsIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIHggPSBkM19nZW9tX3BvaW50WCwgeSA9IGQzX2dlb21fcG9pbnRZLCBjb21wYXQ7XG4gICAgaWYgKGNvbXBhdCA9IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHggPSBkM19nZW9tX3F1YWR0cmVlQ29tcGF0WDtcbiAgICAgIHkgPSBkM19nZW9tX3F1YWR0cmVlQ29tcGF0WTtcbiAgICAgIGlmIChjb21wYXQgPT09IDMpIHtcbiAgICAgICAgeTIgPSB5MTtcbiAgICAgICAgeDIgPSB4MTtcbiAgICAgICAgeTEgPSB4MSA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcXVhZHRyZWUocG9pbnRzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcXVhZHRyZWUoZGF0YSkge1xuICAgICAgdmFyIGQsIGZ4ID0gZDNfZnVuY3Rvcih4KSwgZnkgPSBkM19mdW5jdG9yKHkpLCB4cywgeXMsIGksIG4sIHgxXywgeTFfLCB4Ml8sIHkyXztcbiAgICAgIGlmICh4MSAhPSBudWxsKSB7XG4gICAgICAgIHgxXyA9IHgxLCB5MV8gPSB5MSwgeDJfID0geDIsIHkyXyA9IHkyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeDJfID0geTJfID0gLSh4MV8gPSB5MV8gPSBJbmZpbml0eSk7XG4gICAgICAgIHhzID0gW10sIHlzID0gW107XG4gICAgICAgIG4gPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKGNvbXBhdCkgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIGQgPSBkYXRhW2ldO1xuICAgICAgICAgIGlmIChkLnggPCB4MV8pIHgxXyA9IGQueDtcbiAgICAgICAgICBpZiAoZC55IDwgeTFfKSB5MV8gPSBkLnk7XG4gICAgICAgICAgaWYgKGQueCA+IHgyXykgeDJfID0gZC54O1xuICAgICAgICAgIGlmIChkLnkgPiB5Ml8pIHkyXyA9IGQueTtcbiAgICAgICAgICB4cy5wdXNoKGQueCk7XG4gICAgICAgICAgeXMucHVzaChkLnkpO1xuICAgICAgICB9IGVsc2UgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIHZhciB4XyA9ICtmeChkID0gZGF0YVtpXSwgaSksIHlfID0gK2Z5KGQsIGkpO1xuICAgICAgICAgIGlmICh4XyA8IHgxXykgeDFfID0geF87XG4gICAgICAgICAgaWYgKHlfIDwgeTFfKSB5MV8gPSB5XztcbiAgICAgICAgICBpZiAoeF8gPiB4Ml8pIHgyXyA9IHhfO1xuICAgICAgICAgIGlmICh5XyA+IHkyXykgeTJfID0geV87XG4gICAgICAgICAgeHMucHVzaCh4Xyk7XG4gICAgICAgICAgeXMucHVzaCh5Xyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBkeCA9IHgyXyAtIHgxXywgZHkgPSB5Ml8gLSB5MV87XG4gICAgICBpZiAoZHggPiBkeSkgeTJfID0geTFfICsgZHg7IGVsc2UgeDJfID0geDFfICsgZHk7XG4gICAgICBmdW5jdGlvbiBpbnNlcnQobiwgZCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSByZXR1cm47XG4gICAgICAgIGlmIChuLmxlYWYpIHtcbiAgICAgICAgICB2YXIgbnggPSBuLngsIG55ID0gbi55O1xuICAgICAgICAgIGlmIChueCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoYWJzKG54IC0geCkgKyBhYnMobnkgLSB5KSA8IC4wMSkge1xuICAgICAgICAgICAgICBpbnNlcnRDaGlsZChuLCBkLCB4LCB5LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgblBvaW50ID0gbi5wb2ludDtcbiAgICAgICAgICAgICAgbi54ID0gbi55ID0gbi5wb2ludCA9IG51bGw7XG4gICAgICAgICAgICAgIGluc2VydENoaWxkKG4sIG5Qb2ludCwgbngsIG55LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgICAgICAgIGluc2VydENoaWxkKG4sIGQsIHgsIHksIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbi54ID0geCwgbi55ID0geSwgbi5wb2ludCA9IGQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluc2VydENoaWxkKG4sIGQsIHgsIHksIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gaW5zZXJ0Q2hpbGQobiwgZCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgdmFyIHhtID0gKHgxICsgeDIpICogLjUsIHltID0gKHkxICsgeTIpICogLjUsIHJpZ2h0ID0geCA+PSB4bSwgYmVsb3cgPSB5ID49IHltLCBpID0gYmVsb3cgPDwgMSB8IHJpZ2h0O1xuICAgICAgICBuLmxlYWYgPSBmYWxzZTtcbiAgICAgICAgbiA9IG4ubm9kZXNbaV0gfHwgKG4ubm9kZXNbaV0gPSBkM19nZW9tX3F1YWR0cmVlTm9kZSgpKTtcbiAgICAgICAgaWYgKHJpZ2h0KSB4MSA9IHhtOyBlbHNlIHgyID0geG07XG4gICAgICAgIGlmIChiZWxvdykgeTEgPSB5bTsgZWxzZSB5MiA9IHltO1xuICAgICAgICBpbnNlcnQobiwgZCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgfVxuICAgICAgdmFyIHJvb3QgPSBkM19nZW9tX3F1YWR0cmVlTm9kZSgpO1xuICAgICAgcm9vdC5hZGQgPSBmdW5jdGlvbihkKSB7XG4gICAgICAgIGluc2VydChyb290LCBkLCArZngoZCwgKytpKSwgK2Z5KGQsIGkpLCB4MV8sIHkxXywgeDJfLCB5Ml8pO1xuICAgICAgfTtcbiAgICAgIHJvb3QudmlzaXQgPSBmdW5jdGlvbihmKSB7XG4gICAgICAgIGQzX2dlb21fcXVhZHRyZWVWaXNpdChmLCByb290LCB4MV8sIHkxXywgeDJfLCB5Ml8pO1xuICAgICAgfTtcbiAgICAgIHJvb3QuZmluZCA9IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICAgIHJldHVybiBkM19nZW9tX3F1YWR0cmVlRmluZChyb290LCBwb2ludFswXSwgcG9pbnRbMV0sIHgxXywgeTFfLCB4Ml8sIHkyXyk7XG4gICAgICB9O1xuICAgICAgaSA9IC0xO1xuICAgICAgaWYgKHgxID09IG51bGwpIHtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICBpbnNlcnQocm9vdCwgZGF0YVtpXSwgeHNbaV0sIHlzW2ldLCB4MV8sIHkxXywgeDJfLCB5Ml8pO1xuICAgICAgICB9XG4gICAgICAgIC0taTtcbiAgICAgIH0gZWxzZSBkYXRhLmZvckVhY2gocm9vdC5hZGQpO1xuICAgICAgeHMgPSB5cyA9IGRhdGEgPSBkID0gbnVsbDtcbiAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICBxdWFkdHJlZS54ID0gZnVuY3Rpb24oXykge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoeCA9IF8sIHF1YWR0cmVlKSA6IHg7XG4gICAgfTtcbiAgICBxdWFkdHJlZS55ID0gZnVuY3Rpb24oXykge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoeSA9IF8sIHF1YWR0cmVlKSA6IHk7XG4gICAgfTtcbiAgICBxdWFkdHJlZS5leHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB4MSA9PSBudWxsID8gbnVsbCA6IFsgWyB4MSwgeTEgXSwgWyB4MiwgeTIgXSBdO1xuICAgICAgaWYgKF8gPT0gbnVsbCkgeDEgPSB5MSA9IHgyID0geTIgPSBudWxsOyBlbHNlIHgxID0gK19bMF1bMF0sIHkxID0gK19bMF1bMV0sIHgyID0gK19bMV1bMF0sIFxuICAgICAgeTIgPSArX1sxXVsxXTtcbiAgICAgIHJldHVybiBxdWFkdHJlZTtcbiAgICB9O1xuICAgIHF1YWR0cmVlLnNpemUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB4MSA9PSBudWxsID8gbnVsbCA6IFsgeDIgLSB4MSwgeTIgLSB5MSBdO1xuICAgICAgaWYgKF8gPT0gbnVsbCkgeDEgPSB5MSA9IHgyID0geTIgPSBudWxsOyBlbHNlIHgxID0geTEgPSAwLCB4MiA9ICtfWzBdLCB5MiA9ICtfWzFdO1xuICAgICAgcmV0dXJuIHF1YWR0cmVlO1xuICAgIH07XG4gICAgcmV0dXJuIHF1YWR0cmVlO1xuICB9O1xuICBmdW5jdGlvbiBkM19nZW9tX3F1YWR0cmVlQ29tcGF0WChkKSB7XG4gICAgcmV0dXJuIGQueDtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3F1YWR0cmVlQ29tcGF0WShkKSB7XG4gICAgcmV0dXJuIGQueTtcbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3F1YWR0cmVlTm9kZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVhZjogdHJ1ZSxcbiAgICAgIG5vZGVzOiBbXSxcbiAgICAgIHBvaW50OiBudWxsLFxuICAgICAgeDogbnVsbCxcbiAgICAgIHk6IG51bGxcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2dlb21fcXVhZHRyZWVWaXNpdChmLCBub2RlLCB4MSwgeTEsIHgyLCB5Mikge1xuICAgIGlmICghZihub2RlLCB4MSwgeTEsIHgyLCB5MikpIHtcbiAgICAgIHZhciBzeCA9ICh4MSArIHgyKSAqIC41LCBzeSA9ICh5MSArIHkyKSAqIC41LCBjaGlsZHJlbiA9IG5vZGUubm9kZXM7XG4gICAgICBpZiAoY2hpbGRyZW5bMF0pIGQzX2dlb21fcXVhZHRyZWVWaXNpdChmLCBjaGlsZHJlblswXSwgeDEsIHkxLCBzeCwgc3kpO1xuICAgICAgaWYgKGNoaWxkcmVuWzFdKSBkM19nZW9tX3F1YWR0cmVlVmlzaXQoZiwgY2hpbGRyZW5bMV0sIHN4LCB5MSwgeDIsIHN5KTtcbiAgICAgIGlmIChjaGlsZHJlblsyXSkgZDNfZ2VvbV9xdWFkdHJlZVZpc2l0KGYsIGNoaWxkcmVuWzJdLCB4MSwgc3ksIHN4LCB5Mik7XG4gICAgICBpZiAoY2hpbGRyZW5bM10pIGQzX2dlb21fcXVhZHRyZWVWaXNpdChmLCBjaGlsZHJlblszXSwgc3gsIHN5LCB4MiwgeTIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19nZW9tX3F1YWR0cmVlRmluZChyb290LCB4LCB5LCB4MCwgeTAsIHgzLCB5Mykge1xuICAgIHZhciBtaW5EaXN0YW5jZTIgPSBJbmZpbml0eSwgY2xvc2VzdFBvaW50O1xuICAgIChmdW5jdGlvbiBmaW5kKG5vZGUsIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgICBpZiAoeDEgPiB4MyB8fCB5MSA+IHkzIHx8IHgyIDwgeDAgfHwgeTIgPCB5MCkgcmV0dXJuO1xuICAgICAgaWYgKHBvaW50ID0gbm9kZS5wb2ludCkge1xuICAgICAgICB2YXIgcG9pbnQsIGR4ID0geCAtIG5vZGUueCwgZHkgPSB5IC0gbm9kZS55LCBkaXN0YW5jZTIgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgaWYgKGRpc3RhbmNlMiA8IG1pbkRpc3RhbmNlMikge1xuICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChtaW5EaXN0YW5jZTIgPSBkaXN0YW5jZTIpO1xuICAgICAgICAgIHgwID0geCAtIGRpc3RhbmNlLCB5MCA9IHkgLSBkaXN0YW5jZTtcbiAgICAgICAgICB4MyA9IHggKyBkaXN0YW5jZSwgeTMgPSB5ICsgZGlzdGFuY2U7XG4gICAgICAgICAgY2xvc2VzdFBvaW50ID0gcG9pbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGUubm9kZXMsIHhtID0gKHgxICsgeDIpICogLjUsIHltID0gKHkxICsgeTIpICogLjUsIHJpZ2h0ID0geCA+PSB4bSwgYmVsb3cgPSB5ID49IHltO1xuICAgICAgZm9yICh2YXIgaSA9IGJlbG93IDw8IDEgfCByaWdodCwgaiA9IGkgKyA0OyBpIDwgajsgKytpKSB7XG4gICAgICAgIGlmIChub2RlID0gY2hpbGRyZW5baSAmIDNdKSBzd2l0Y2ggKGkgJiAzKSB7XG4gICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgZmluZChub2RlLCB4MSwgeTEsIHhtLCB5bSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBmaW5kKG5vZGUsIHhtLCB5MSwgeDIsIHltKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGZpbmQobm9kZSwgeDEsIHltLCB4bSwgeTIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgZmluZChub2RlLCB4bSwgeW0sIHgyLCB5Mik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KShyb290LCB4MCwgeTAsIHgzLCB5Myk7XG4gICAgcmV0dXJuIGNsb3Nlc3RQb2ludDtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZVJnYiA9IGQzX2ludGVycG9sYXRlUmdiO1xuICBmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZVJnYihhLCBiKSB7XG4gICAgYSA9IGQzLnJnYihhKTtcbiAgICBiID0gZDMucmdiKGIpO1xuICAgIHZhciBhciA9IGEuciwgYWcgPSBhLmcsIGFiID0gYS5iLCBiciA9IGIuciAtIGFyLCBiZyA9IGIuZyAtIGFnLCBiYiA9IGIuYiAtIGFiO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gXCIjXCIgKyBkM19yZ2JfaGV4KE1hdGgucm91bmQoYXIgKyBiciAqIHQpKSArIGQzX3JnYl9oZXgoTWF0aC5yb3VuZChhZyArIGJnICogdCkpICsgZDNfcmdiX2hleChNYXRoLnJvdW5kKGFiICsgYmIgKiB0KSk7XG4gICAgfTtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZU9iamVjdCA9IGQzX2ludGVycG9sYXRlT2JqZWN0O1xuICBmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZU9iamVjdChhLCBiKSB7XG4gICAgdmFyIGkgPSB7fSwgYyA9IHt9LCBrO1xuICAgIGZvciAoayBpbiBhKSB7XG4gICAgICBpZiAoayBpbiBiKSB7XG4gICAgICAgIGlba10gPSBkM19pbnRlcnBvbGF0ZShhW2tdLCBiW2tdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNba10gPSBhW2tdO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGsgaW4gYikge1xuICAgICAgaWYgKCEoayBpbiBhKSkge1xuICAgICAgICBjW2tdID0gYltrXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGZvciAoayBpbiBpKSBjW2tdID0gaVtrXSh0KTtcbiAgICAgIHJldHVybiBjO1xuICAgIH07XG4gIH1cbiAgZDMuaW50ZXJwb2xhdGVOdW1iZXIgPSBkM19pbnRlcnBvbGF0ZU51bWJlcjtcbiAgZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVOdW1iZXIoYSwgYikge1xuICAgIGEgPSArYSwgYiA9ICtiO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDtcbiAgICB9O1xuICB9XG4gIGQzLmludGVycG9sYXRlU3RyaW5nID0gZDNfaW50ZXJwb2xhdGVTdHJpbmc7XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlU3RyaW5nKGEsIGIpIHtcbiAgICB2YXIgYmkgPSBkM19pbnRlcnBvbGF0ZV9udW1iZXJBLmxhc3RJbmRleCA9IGQzX2ludGVycG9sYXRlX251bWJlckIubGFzdEluZGV4ID0gMCwgYW0sIGJtLCBicywgaSA9IC0xLCBzID0gW10sIHEgPSBbXTtcbiAgICBhID0gYSArIFwiXCIsIGIgPSBiICsgXCJcIjtcbiAgICB3aGlsZSAoKGFtID0gZDNfaW50ZXJwb2xhdGVfbnVtYmVyQS5leGVjKGEpKSAmJiAoYm0gPSBkM19pbnRlcnBvbGF0ZV9udW1iZXJCLmV4ZWMoYikpKSB7XG4gICAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHtcbiAgICAgICAgYnMgPSBiLnNsaWNlKGJpLCBicyk7XG4gICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyBlbHNlIHNbKytpXSA9IGJzO1xuICAgICAgfVxuICAgICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7XG4gICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyBlbHNlIHNbKytpXSA9IGJtO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgICAgcS5wdXNoKHtcbiAgICAgICAgICBpOiBpLFxuICAgICAgICAgIHg6IGQzX2ludGVycG9sYXRlTnVtYmVyKGFtLCBibSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBiaSA9IGQzX2ludGVycG9sYXRlX251bWJlckIubGFzdEluZGV4O1xuICAgIH1cbiAgICBpZiAoYmkgPCBiLmxlbmd0aCkge1xuICAgICAgYnMgPSBiLnNsaWNlKGJpKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyBlbHNlIHNbKytpXSA9IGJzO1xuICAgIH1cbiAgICByZXR1cm4gcy5sZW5ndGggPCAyID8gcVswXSA/IChiID0gcVswXS54LCBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gYih0KSArIFwiXCI7XG4gICAgfSkgOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH0gOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbih0KSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgcmV0dXJuIHMuam9pbihcIlwiKTtcbiAgICB9KTtcbiAgfVxuICB2YXIgZDNfaW50ZXJwb2xhdGVfbnVtYmVyQSA9IC9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZywgZDNfaW50ZXJwb2xhdGVfbnVtYmVyQiA9IG5ldyBSZWdFeHAoZDNfaW50ZXJwb2xhdGVfbnVtYmVyQS5zb3VyY2UsIFwiZ1wiKTtcbiAgZDMuaW50ZXJwb2xhdGUgPSBkM19pbnRlcnBvbGF0ZTtcbiAgZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGUoYSwgYikge1xuICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdG9ycy5sZW5ndGgsIGY7XG4gICAgd2hpbGUgKC0taSA+PSAwICYmICEoZiA9IGQzLmludGVycG9sYXRvcnNbaV0oYSwgYikpKSA7XG4gICAgcmV0dXJuIGY7XG4gIH1cbiAgZDMuaW50ZXJwb2xhdG9ycyA9IFsgZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciB0ID0gdHlwZW9mIGI7XG4gICAgcmV0dXJuICh0ID09PSBcInN0cmluZ1wiID8gZDNfcmdiX25hbWVzLmhhcyhiLnRvTG93ZXJDYXNlKCkpIHx8IC9eKCN8cmdiXFwofGhzbFxcKCkvaS50ZXN0KGIpID8gZDNfaW50ZXJwb2xhdGVSZ2IgOiBkM19pbnRlcnBvbGF0ZVN0cmluZyA6IGIgaW5zdGFuY2VvZiBkM19jb2xvciA/IGQzX2ludGVycG9sYXRlUmdiIDogQXJyYXkuaXNBcnJheShiKSA/IGQzX2ludGVycG9sYXRlQXJyYXkgOiB0ID09PSBcIm9iamVjdFwiICYmIGlzTmFOKGIpID8gZDNfaW50ZXJwb2xhdGVPYmplY3QgOiBkM19pbnRlcnBvbGF0ZU51bWJlcikoYSwgYik7XG4gIH0gXTtcbiAgZDMuaW50ZXJwb2xhdGVBcnJheSA9IGQzX2ludGVycG9sYXRlQXJyYXk7XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlQXJyYXkoYSwgYikge1xuICAgIHZhciB4ID0gW10sIGMgPSBbXSwgbmEgPSBhLmxlbmd0aCwgbmIgPSBiLmxlbmd0aCwgbjAgPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpLCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuMDsgKytpKSB4LnB1c2goZDNfaW50ZXJwb2xhdGUoYVtpXSwgYltpXSkpO1xuICAgIGZvciAoO2kgPCBuYTsgKytpKSBjW2ldID0gYVtpXTtcbiAgICBmb3IgKDtpIDwgbmI7ICsraSkgY1tpXSA9IGJbaV07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBuMDsgKytpKSBjW2ldID0geFtpXSh0KTtcbiAgICAgIHJldHVybiBjO1xuICAgIH07XG4gIH1cbiAgdmFyIGQzX2Vhc2VfZGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19pZGVudGl0eTtcbiAgfTtcbiAgdmFyIGQzX2Vhc2UgPSBkMy5tYXAoe1xuICAgIGxpbmVhcjogZDNfZWFzZV9kZWZhdWx0LFxuICAgIHBvbHk6IGQzX2Vhc2VfcG9seSxcbiAgICBxdWFkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19lYXNlX3F1YWQ7XG4gICAgfSxcbiAgICBjdWJpYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfZWFzZV9jdWJpYztcbiAgICB9LFxuICAgIHNpbjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfZWFzZV9zaW47XG4gICAgfSxcbiAgICBleHA6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGQzX2Vhc2VfZXhwO1xuICAgIH0sXG4gICAgY2lyY2xlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19lYXNlX2NpcmNsZTtcbiAgICB9LFxuICAgIGVsYXN0aWM6IGQzX2Vhc2VfZWxhc3RpYyxcbiAgICBiYWNrOiBkM19lYXNlX2JhY2ssXG4gICAgYm91bmNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19lYXNlX2JvdW5jZTtcbiAgICB9XG4gIH0pO1xuICB2YXIgZDNfZWFzZV9tb2RlID0gZDMubWFwKHtcbiAgICBcImluXCI6IGQzX2lkZW50aXR5LFxuICAgIG91dDogZDNfZWFzZV9yZXZlcnNlLFxuICAgIFwiaW4tb3V0XCI6IGQzX2Vhc2VfcmVmbGVjdCxcbiAgICBcIm91dC1pblwiOiBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gZDNfZWFzZV9yZWZsZWN0KGQzX2Vhc2VfcmV2ZXJzZShmKSk7XG4gICAgfVxuICB9KTtcbiAgZDMuZWFzZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IG5hbWUuaW5kZXhPZihcIi1cIiksIHQgPSBpID49IDAgPyBuYW1lLnNsaWNlKDAsIGkpIDogbmFtZSwgbSA9IGkgPj0gMCA/IG5hbWUuc2xpY2UoaSArIDEpIDogXCJpblwiO1xuICAgIHQgPSBkM19lYXNlLmdldCh0KSB8fCBkM19lYXNlX2RlZmF1bHQ7XG4gICAgbSA9IGQzX2Vhc2VfbW9kZS5nZXQobSkgfHwgZDNfaWRlbnRpdHk7XG4gICAgcmV0dXJuIGQzX2Vhc2VfY2xhbXAobSh0LmFwcGx5KG51bGwsIGQzX2FycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSkpO1xuICB9O1xuICBmdW5jdGlvbiBkM19lYXNlX2NsYW1wKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQgPD0gMCA/IDAgOiB0ID49IDEgPyAxIDogZih0KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfcmV2ZXJzZShmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiAxIC0gZigxIC0gdCk7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM19lYXNlX3JlZmxlY3QoZikge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gLjUgKiAodCA8IC41ID8gZigyICogdCkgOiAyIC0gZigyIC0gMiAqIHQpKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfcXVhZCh0KSB7XG4gICAgcmV0dXJuIHQgKiB0O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfY3ViaWModCkge1xuICAgIHJldHVybiB0ICogdCAqIHQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZWFzZV9jdWJpY0luT3V0KHQpIHtcbiAgICBpZiAodCA8PSAwKSByZXR1cm4gMDtcbiAgICBpZiAodCA+PSAxKSByZXR1cm4gMTtcbiAgICB2YXIgdDIgPSB0ICogdCwgdDMgPSB0MiAqIHQ7XG4gICAgcmV0dXJuIDQgKiAodCA8IC41ID8gdDMgOiAzICogKHQgLSB0MikgKyB0MyAtIC43NSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZWFzZV9wb2x5KGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIE1hdGgucG93KHQsIGUpO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZWFzZV9zaW4odCkge1xuICAgIHJldHVybiAxIC0gTWF0aC5jb3ModCAqIGhhbGbPgCk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfZWFzZV9leHAodCkge1xuICAgIHJldHVybiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfY2lyY2xlKHQpIHtcbiAgICByZXR1cm4gMSAtIE1hdGguc3FydCgxIC0gdCAqIHQpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfZWxhc3RpYyhhLCBwKSB7XG4gICAgdmFyIHM7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSBwID0gLjQ1O1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSBzID0gcCAvIM+EICogTWF0aC5hc2luKDEgLyBhKTsgZWxzZSBhID0gMSwgcyA9IHAgLyA0O1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gMSArIGEgKiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0IC0gcykgKiDPhCAvIHApO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfZWFzZV9iYWNrKHMpIHtcbiAgICBpZiAoIXMpIHMgPSAxLjcwMTU4O1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gdCAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2Vhc2VfYm91bmNlKHQpIHtcbiAgICByZXR1cm4gdCA8IDEgLyAyLjc1ID8gNy41NjI1ICogdCAqIHQgOiB0IDwgMiAvIDIuNzUgPyA3LjU2MjUgKiAodCAtPSAxLjUgLyAyLjc1KSAqIHQgKyAuNzUgOiB0IDwgMi41IC8gMi43NSA/IDcuNTYyNSAqICh0IC09IDIuMjUgLyAyLjc1KSAqIHQgKyAuOTM3NSA6IDcuNTYyNSAqICh0IC09IDIuNjI1IC8gMi43NSkgKiB0ICsgLjk4NDM3NTtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZUhjbCA9IGQzX2ludGVycG9sYXRlSGNsO1xuICBmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZUhjbChhLCBiKSB7XG4gICAgYSA9IGQzLmhjbChhKTtcbiAgICBiID0gZDMuaGNsKGIpO1xuICAgIHZhciBhaCA9IGEuaCwgYWMgPSBhLmMsIGFsID0gYS5sLCBiaCA9IGIuaCAtIGFoLCBiYyA9IGIuYyAtIGFjLCBibCA9IGIubCAtIGFsO1xuICAgIGlmIChpc05hTihiYykpIGJjID0gMCwgYWMgPSBpc05hTihhYykgPyBiLmMgOiBhYztcbiAgICBpZiAoaXNOYU4oYmgpKSBiaCA9IDAsIGFoID0gaXNOYU4oYWgpID8gYi5oIDogYWg7IGVsc2UgaWYgKGJoID4gMTgwKSBiaCAtPSAzNjA7IGVsc2UgaWYgKGJoIDwgLTE4MCkgYmggKz0gMzYwO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gZDNfaGNsX2xhYihhaCArIGJoICogdCwgYWMgKyBiYyAqIHQsIGFsICsgYmwgKiB0KSArIFwiXCI7XG4gICAgfTtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZUhzbCA9IGQzX2ludGVycG9sYXRlSHNsO1xuICBmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZUhzbChhLCBiKSB7XG4gICAgYSA9IGQzLmhzbChhKTtcbiAgICBiID0gZDMuaHNsKGIpO1xuICAgIHZhciBhaCA9IGEuaCwgYXMgPSBhLnMsIGFsID0gYS5sLCBiaCA9IGIuaCAtIGFoLCBicyA9IGIucyAtIGFzLCBibCA9IGIubCAtIGFsO1xuICAgIGlmIChpc05hTihicykpIGJzID0gMCwgYXMgPSBpc05hTihhcykgPyBiLnMgOiBhcztcbiAgICBpZiAoaXNOYU4oYmgpKSBiaCA9IDAsIGFoID0gaXNOYU4oYWgpID8gYi5oIDogYWg7IGVsc2UgaWYgKGJoID4gMTgwKSBiaCAtPSAzNjA7IGVsc2UgaWYgKGJoIDwgLTE4MCkgYmggKz0gMzYwO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gZDNfaHNsX3JnYihhaCArIGJoICogdCwgYXMgKyBicyAqIHQsIGFsICsgYmwgKiB0KSArIFwiXCI7XG4gICAgfTtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZUxhYiA9IGQzX2ludGVycG9sYXRlTGFiO1xuICBmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZUxhYihhLCBiKSB7XG4gICAgYSA9IGQzLmxhYihhKTtcbiAgICBiID0gZDMubGFiKGIpO1xuICAgIHZhciBhbCA9IGEubCwgYWEgPSBhLmEsIGFiID0gYS5iLCBibCA9IGIubCAtIGFsLCBiYSA9IGIuYSAtIGFhLCBiYiA9IGIuYiAtIGFiO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gZDNfbGFiX3JnYihhbCArIGJsICogdCwgYWEgKyBiYSAqIHQsIGFiICsgYmIgKiB0KSArIFwiXCI7XG4gICAgfTtcbiAgfVxuICBkMy5pbnRlcnBvbGF0ZVJvdW5kID0gZDNfaW50ZXJwb2xhdGVSb3VuZDtcbiAgZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVSb3VuZChhLCBiKSB7XG4gICAgYiAtPSBhO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChhICsgYiAqIHQpO1xuICAgIH07XG4gIH1cbiAgZDMudHJhbnNmb3JtID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgdmFyIGcgPSBkM19kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgXCJnXCIpO1xuICAgIHJldHVybiAoZDMudHJhbnNmb3JtID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBpZiAoc3RyaW5nICE9IG51bGwpIHtcbiAgICAgICAgZy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgc3RyaW5nKTtcbiAgICAgICAgdmFyIHQgPSBnLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IGQzX3RyYW5zZm9ybSh0ID8gdC5tYXRyaXggOiBkM190cmFuc2Zvcm1JZGVudGl0eSk7XG4gICAgfSkoc3RyaW5nKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfdHJhbnNmb3JtKG0pIHtcbiAgICB2YXIgcjAgPSBbIG0uYSwgbS5iIF0sIHIxID0gWyBtLmMsIG0uZCBdLCBreCA9IGQzX3RyYW5zZm9ybU5vcm1hbGl6ZShyMCksIGt6ID0gZDNfdHJhbnNmb3JtRG90KHIwLCByMSksIGt5ID0gZDNfdHJhbnNmb3JtTm9ybWFsaXplKGQzX3RyYW5zZm9ybUNvbWJpbmUocjEsIHIwLCAta3opKSB8fCAwO1xuICAgIGlmIChyMFswXSAqIHIxWzFdIDwgcjFbMF0gKiByMFsxXSkge1xuICAgICAgcjBbMF0gKj0gLTE7XG4gICAgICByMFsxXSAqPSAtMTtcbiAgICAgIGt4ICo9IC0xO1xuICAgICAga3ogKj0gLTE7XG4gICAgfVxuICAgIHRoaXMucm90YXRlID0gKGt4ID8gTWF0aC5hdGFuMihyMFsxXSwgcjBbMF0pIDogTWF0aC5hdGFuMigtcjFbMF0sIHIxWzFdKSkgKiBkM19kZWdyZWVzO1xuICAgIHRoaXMudHJhbnNsYXRlID0gWyBtLmUsIG0uZiBdO1xuICAgIHRoaXMuc2NhbGUgPSBbIGt4LCBreSBdO1xuICAgIHRoaXMuc2tldyA9IGt5ID8gTWF0aC5hdGFuMihreiwga3kpICogZDNfZGVncmVlcyA6IDA7XG4gIH1cbiAgZDNfdHJhbnNmb3JtLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRoaXMudHJhbnNsYXRlICsgXCIpcm90YXRlKFwiICsgdGhpcy5yb3RhdGUgKyBcIilza2V3WChcIiArIHRoaXMuc2tldyArIFwiKXNjYWxlKFwiICsgdGhpcy5zY2FsZSArIFwiKVwiO1xuICB9O1xuICBmdW5jdGlvbiBkM190cmFuc2Zvcm1Eb3QoYSwgYikge1xuICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RyYW5zZm9ybU5vcm1hbGl6ZShhKSB7XG4gICAgdmFyIGsgPSBNYXRoLnNxcnQoZDNfdHJhbnNmb3JtRG90KGEsIGEpKTtcbiAgICBpZiAoaykge1xuICAgICAgYVswXSAvPSBrO1xuICAgICAgYVsxXSAvPSBrO1xuICAgIH1cbiAgICByZXR1cm4gaztcbiAgfVxuICBmdW5jdGlvbiBkM190cmFuc2Zvcm1Db21iaW5lKGEsIGIsIGspIHtcbiAgICBhWzBdICs9IGsgKiBiWzBdO1xuICAgIGFbMV0gKz0gayAqIGJbMV07XG4gICAgcmV0dXJuIGE7XG4gIH1cbiAgdmFyIGQzX3RyYW5zZm9ybUlkZW50aXR5ID0ge1xuICAgIGE6IDEsXG4gICAgYjogMCxcbiAgICBjOiAwLFxuICAgIGQ6IDEsXG4gICAgZTogMCxcbiAgICBmOiAwXG4gIH07XG4gIGQzLmludGVycG9sYXRlVHJhbnNmb3JtID0gZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm07XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlVHJhbnNmb3JtUG9wKHMpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgXCIsXCIgOiBcIlwiO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlVHJhbnNsYXRlKHRhLCB0YiwgcywgcSkge1xuICAgIGlmICh0YVswXSAhPT0gdGJbMF0gfHwgdGFbMV0gIT09IHRiWzFdKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChcInRyYW5zbGF0ZShcIiwgbnVsbCwgXCIsXCIsIG51bGwsIFwiKVwiKTtcbiAgICAgIHEucHVzaCh7XG4gICAgICAgIGk6IGkgLSA0LFxuICAgICAgICB4OiBkM19pbnRlcnBvbGF0ZU51bWJlcih0YVswXSwgdGJbMF0pXG4gICAgICB9LCB7XG4gICAgICAgIGk6IGkgLSAyLFxuICAgICAgICB4OiBkM19pbnRlcnBvbGF0ZU51bWJlcih0YVsxXSwgdGJbMV0pXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRiWzBdIHx8IHRiWzFdKSB7XG4gICAgICBzLnB1c2goXCJ0cmFuc2xhdGUoXCIgKyB0YiArIFwiKVwiKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVSb3RhdGUocmEsIHJiLCBzLCBxKSB7XG4gICAgaWYgKHJhICE9PSByYikge1xuICAgICAgaWYgKHJhIC0gcmIgPiAxODApIHJiICs9IDM2MDsgZWxzZSBpZiAocmIgLSByYSA+IDE4MCkgcmEgKz0gMzYwO1xuICAgICAgcS5wdXNoKHtcbiAgICAgICAgaTogcy5wdXNoKGQzX2ludGVycG9sYXRlVHJhbnNmb3JtUG9wKHMpICsgXCJyb3RhdGUoXCIsIG51bGwsIFwiKVwiKSAtIDIsXG4gICAgICAgIHg6IGQzX2ludGVycG9sYXRlTnVtYmVyKHJhLCByYilcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAocmIpIHtcbiAgICAgIHMucHVzaChkM19pbnRlcnBvbGF0ZVRyYW5zZm9ybVBvcChzKSArIFwicm90YXRlKFwiICsgcmIgKyBcIilcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlU2tldyh3YSwgd2IsIHMsIHEpIHtcbiAgICBpZiAod2EgIT09IHdiKSB7XG4gICAgICBxLnB1c2goe1xuICAgICAgICBpOiBzLnB1c2goZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm1Qb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBcIilcIikgLSAyLFxuICAgICAgICB4OiBkM19pbnRlcnBvbGF0ZU51bWJlcih3YSwgd2IpXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHdiKSB7XG4gICAgICBzLnB1c2goZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm1Qb3AocykgKyBcInNrZXdYKFwiICsgd2IgKyBcIilcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlU2NhbGUoa2EsIGtiLCBzLCBxKSB7XG4gICAgaWYgKGthWzBdICE9PSBrYlswXSB8fCBrYVsxXSAhPT0ga2JbMV0pIHtcbiAgICAgIHZhciBpID0gcy5wdXNoKGQzX2ludGVycG9sYXRlVHJhbnNmb3JtUG9wKHMpICsgXCJzY2FsZShcIiwgbnVsbCwgXCIsXCIsIG51bGwsIFwiKVwiKTtcbiAgICAgIHEucHVzaCh7XG4gICAgICAgIGk6IGkgLSA0LFxuICAgICAgICB4OiBkM19pbnRlcnBvbGF0ZU51bWJlcihrYVswXSwga2JbMF0pXG4gICAgICB9LCB7XG4gICAgICAgIGk6IGkgLSAyLFxuICAgICAgICB4OiBkM19pbnRlcnBvbGF0ZU51bWJlcihrYVsxXSwga2JbMV0pXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGtiWzBdICE9PSAxIHx8IGtiWzFdICE9PSAxKSB7XG4gICAgICBzLnB1c2goZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm1Qb3AocykgKyBcInNjYWxlKFwiICsga2IgKyBcIilcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGQzX2ludGVycG9sYXRlVHJhbnNmb3JtKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCBxID0gW107XG4gICAgYSA9IGQzLnRyYW5zZm9ybShhKSwgYiA9IGQzLnRyYW5zZm9ybShiKTtcbiAgICBkM19pbnRlcnBvbGF0ZVRyYW5zbGF0ZShhLnRyYW5zbGF0ZSwgYi50cmFuc2xhdGUsIHMsIHEpO1xuICAgIGQzX2ludGVycG9sYXRlUm90YXRlKGEucm90YXRlLCBiLnJvdGF0ZSwgcywgcSk7XG4gICAgZDNfaW50ZXJwb2xhdGVTa2V3KGEuc2tldywgYi5za2V3LCBzLCBxKTtcbiAgICBkM19pbnRlcnBvbGF0ZVNjYWxlKGEuc2NhbGUsIGIuc2NhbGUsIHMsIHEpO1xuICAgIGEgPSBiID0gbnVsbDtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgdmFyIGkgPSAtMSwgbiA9IHEubGVuZ3RoLCBvO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIHNbKG8gPSBxW2ldKS5pXSA9IG8ueCh0KTtcbiAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkM191bmludGVycG9sYXRlTnVtYmVyKGEsIGIpIHtcbiAgICBiID0gKGIgLT0gYSA9ICthKSB8fCAxIC8gYjtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuICh4IC0gYSkgLyBiO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfdW5pbnRlcnBvbGF0ZUNsYW1wKGEsIGIpIHtcbiAgICBiID0gKGIgLT0gYSA9ICthKSB8fCAxIC8gYjtcbiAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsICh4IC0gYSkgLyBiKSk7XG4gICAgfTtcbiAgfVxuICBkMy5sYXlvdXQgPSB7fTtcbiAgZDMubGF5b3V0LmJ1bmRsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihsaW5rcykge1xuICAgICAgdmFyIHBhdGhzID0gW10sIGkgPSAtMSwgbiA9IGxpbmtzLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBwYXRocy5wdXNoKGQzX2xheW91dF9idW5kbGVQYXRoKGxpbmtzW2ldKSk7XG4gICAgICByZXR1cm4gcGF0aHM7XG4gICAgfTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2J1bmRsZVBhdGgobGluaykge1xuICAgIHZhciBzdGFydCA9IGxpbmsuc291cmNlLCBlbmQgPSBsaW5rLnRhcmdldCwgbGNhID0gZDNfbGF5b3V0X2J1bmRsZUxlYXN0Q29tbW9uQW5jZXN0b3Ioc3RhcnQsIGVuZCksIHBvaW50cyA9IFsgc3RhcnQgXTtcbiAgICB3aGlsZSAoc3RhcnQgIT09IGxjYSkge1xuICAgICAgc3RhcnQgPSBzdGFydC5wYXJlbnQ7XG4gICAgICBwb2ludHMucHVzaChzdGFydCk7XG4gICAgfVxuICAgIHZhciBrID0gcG9pbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoZW5kICE9PSBsY2EpIHtcbiAgICAgIHBvaW50cy5zcGxpY2UoaywgMCwgZW5kKTtcbiAgICAgIGVuZCA9IGVuZC5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBwb2ludHM7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2J1bmRsZUFuY2VzdG9ycyhub2RlKSB7XG4gICAgdmFyIGFuY2VzdG9ycyA9IFtdLCBwYXJlbnQgPSBub2RlLnBhcmVudDtcbiAgICB3aGlsZSAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgIGFuY2VzdG9ycy5wdXNoKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfVxuICAgIGFuY2VzdG9ycy5wdXNoKG5vZGUpO1xuICAgIHJldHVybiBhbmNlc3RvcnM7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2J1bmRsZUxlYXN0Q29tbW9uQW5jZXN0b3IoYSwgYikge1xuICAgIGlmIChhID09PSBiKSByZXR1cm4gYTtcbiAgICB2YXIgYU5vZGVzID0gZDNfbGF5b3V0X2J1bmRsZUFuY2VzdG9ycyhhKSwgYk5vZGVzID0gZDNfbGF5b3V0X2J1bmRsZUFuY2VzdG9ycyhiKSwgYU5vZGUgPSBhTm9kZXMucG9wKCksIGJOb2RlID0gYk5vZGVzLnBvcCgpLCBzaGFyZWROb2RlID0gbnVsbDtcbiAgICB3aGlsZSAoYU5vZGUgPT09IGJOb2RlKSB7XG4gICAgICBzaGFyZWROb2RlID0gYU5vZGU7XG4gICAgICBhTm9kZSA9IGFOb2Rlcy5wb3AoKTtcbiAgICAgIGJOb2RlID0gYk5vZGVzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhcmVkTm9kZTtcbiAgfVxuICBkMy5sYXlvdXQuY2hvcmQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2hvcmQgPSB7fSwgY2hvcmRzLCBncm91cHMsIG1hdHJpeCwgbiwgcGFkZGluZyA9IDAsIHNvcnRHcm91cHMsIHNvcnRTdWJncm91cHMsIHNvcnRDaG9yZHM7XG4gICAgZnVuY3Rpb24gcmVsYXlvdXQoKSB7XG4gICAgICB2YXIgc3ViZ3JvdXBzID0ge30sIGdyb3VwU3VtcyA9IFtdLCBncm91cEluZGV4ID0gZDMucmFuZ2UobiksIHN1Ymdyb3VwSW5kZXggPSBbXSwgaywgeCwgeDAsIGksIGo7XG4gICAgICBjaG9yZHMgPSBbXTtcbiAgICAgIGdyb3VwcyA9IFtdO1xuICAgICAgayA9IDAsIGkgPSAtMTtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIHggPSAwLCBqID0gLTE7XG4gICAgICAgIHdoaWxlICgrK2ogPCBuKSB7XG4gICAgICAgICAgeCArPSBtYXRyaXhbaV1bal07XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBTdW1zLnB1c2goeCk7XG4gICAgICAgIHN1Ymdyb3VwSW5kZXgucHVzaChkMy5yYW5nZShuKSk7XG4gICAgICAgIGsgKz0geDtcbiAgICAgIH1cbiAgICAgIGlmIChzb3J0R3JvdXBzKSB7XG4gICAgICAgIGdyb3VwSW5kZXguc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIHNvcnRHcm91cHMoZ3JvdXBTdW1zW2FdLCBncm91cFN1bXNbYl0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzb3J0U3ViZ3JvdXBzKSB7XG4gICAgICAgIHN1Ymdyb3VwSW5kZXguZm9yRWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBzb3J0U3ViZ3JvdXBzKG1hdHJpeFtpXVthXSwgbWF0cml4W2ldW2JdKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBrID0gKM+EIC0gcGFkZGluZyAqIG4pIC8gaztcbiAgICAgIHggPSAwLCBpID0gLTE7XG4gICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICB4MCA9IHgsIGogPSAtMTtcbiAgICAgICAgd2hpbGUgKCsraiA8IG4pIHtcbiAgICAgICAgICB2YXIgZGkgPSBncm91cEluZGV4W2ldLCBkaiA9IHN1Ymdyb3VwSW5kZXhbZGldW2pdLCB2ID0gbWF0cml4W2RpXVtkal0sIGEwID0geCwgYTEgPSB4ICs9IHYgKiBrO1xuICAgICAgICAgIHN1Ymdyb3Vwc1tkaSArIFwiLVwiICsgZGpdID0ge1xuICAgICAgICAgICAgaW5kZXg6IGRpLFxuICAgICAgICAgICAgc3ViaW5kZXg6IGRqLFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogYTAsXG4gICAgICAgICAgICBlbmRBbmdsZTogYTEsXG4gICAgICAgICAgICB2YWx1ZTogdlxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBzW2RpXSA9IHtcbiAgICAgICAgICBpbmRleDogZGksXG4gICAgICAgICAgc3RhcnRBbmdsZTogeDAsXG4gICAgICAgICAgZW5kQW5nbGU6IHgsXG4gICAgICAgICAgdmFsdWU6IGdyb3VwU3Vtc1tkaV1cbiAgICAgICAgfTtcbiAgICAgICAgeCArPSBwYWRkaW5nO1xuICAgICAgfVxuICAgICAgaSA9IC0xO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgaiA9IGkgLSAxO1xuICAgICAgICB3aGlsZSAoKytqIDwgbikge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBzdWJncm91cHNbaSArIFwiLVwiICsgal0sIHRhcmdldCA9IHN1Ymdyb3Vwc1tqICsgXCItXCIgKyBpXTtcbiAgICAgICAgICBpZiAoc291cmNlLnZhbHVlIHx8IHRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgY2hvcmRzLnB1c2goc291cmNlLnZhbHVlIDwgdGFyZ2V0LnZhbHVlID8ge1xuICAgICAgICAgICAgICBzb3VyY2U6IHRhcmdldCxcbiAgICAgICAgICAgICAgdGFyZ2V0OiBzb3VyY2VcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgIHNvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc29ydENob3JkcykgcmVzb3J0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc29ydCgpIHtcbiAgICAgIGNob3Jkcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRDaG9yZHMoKGEuc291cmNlLnZhbHVlICsgYS50YXJnZXQudmFsdWUpIC8gMiwgKGIuc291cmNlLnZhbHVlICsgYi50YXJnZXQudmFsdWUpIC8gMik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY2hvcmQubWF0cml4ID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbWF0cml4O1xuICAgICAgbiA9IChtYXRyaXggPSB4KSAmJiBtYXRyaXgubGVuZ3RoO1xuICAgICAgY2hvcmRzID0gZ3JvdXBzID0gbnVsbDtcbiAgICAgIHJldHVybiBjaG9yZDtcbiAgICB9O1xuICAgIGNob3JkLnBhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBwYWRkaW5nO1xuICAgICAgcGFkZGluZyA9IHg7XG4gICAgICBjaG9yZHMgPSBncm91cHMgPSBudWxsO1xuICAgICAgcmV0dXJuIGNob3JkO1xuICAgIH07XG4gICAgY2hvcmQuc29ydEdyb3VwcyA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNvcnRHcm91cHM7XG4gICAgICBzb3J0R3JvdXBzID0geDtcbiAgICAgIGNob3JkcyA9IGdyb3VwcyA9IG51bGw7XG4gICAgICByZXR1cm4gY2hvcmQ7XG4gICAgfTtcbiAgICBjaG9yZC5zb3J0U3ViZ3JvdXBzID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc29ydFN1Ymdyb3VwcztcbiAgICAgIHNvcnRTdWJncm91cHMgPSB4O1xuICAgICAgY2hvcmRzID0gbnVsbDtcbiAgICAgIHJldHVybiBjaG9yZDtcbiAgICB9O1xuICAgIGNob3JkLnNvcnRDaG9yZHMgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzb3J0Q2hvcmRzO1xuICAgICAgc29ydENob3JkcyA9IHg7XG4gICAgICBpZiAoY2hvcmRzKSByZXNvcnQoKTtcbiAgICAgIHJldHVybiBjaG9yZDtcbiAgICB9O1xuICAgIGNob3JkLmNob3JkcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFjaG9yZHMpIHJlbGF5b3V0KCk7XG4gICAgICByZXR1cm4gY2hvcmRzO1xuICAgIH07XG4gICAgY2hvcmQuZ3JvdXBzID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWdyb3VwcykgcmVsYXlvdXQoKTtcbiAgICAgIHJldHVybiBncm91cHM7XG4gICAgfTtcbiAgICByZXR1cm4gY2hvcmQ7XG4gIH07XG4gIGQzLmxheW91dC5mb3JjZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmb3JjZSA9IHt9LCBldmVudCA9IGQzLmRpc3BhdGNoKFwic3RhcnRcIiwgXCJ0aWNrXCIsIFwiZW5kXCIpLCB0aW1lciwgc2l6ZSA9IFsgMSwgMSBdLCBkcmFnLCBhbHBoYSwgZnJpY3Rpb24gPSAuOSwgbGlua0Rpc3RhbmNlID0gZDNfbGF5b3V0X2ZvcmNlTGlua0Rpc3RhbmNlLCBsaW5rU3RyZW5ndGggPSBkM19sYXlvdXRfZm9yY2VMaW5rU3RyZW5ndGgsIGNoYXJnZSA9IC0zMCwgY2hhcmdlRGlzdGFuY2UyID0gZDNfbGF5b3V0X2ZvcmNlQ2hhcmdlRGlzdGFuY2UyLCBncmF2aXR5ID0gLjEsIHRoZXRhMiA9IC42NCwgbm9kZXMgPSBbXSwgbGlua3MgPSBbXSwgZGlzdGFuY2VzLCBzdHJlbmd0aHMsIGNoYXJnZXM7XG4gICAgZnVuY3Rpb24gcmVwdWxzZShub2RlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocXVhZCwgeDEsIF8sIHgyKSB7XG4gICAgICAgIGlmIChxdWFkLnBvaW50ICE9PSBub2RlKSB7XG4gICAgICAgICAgdmFyIGR4ID0gcXVhZC5jeCAtIG5vZGUueCwgZHkgPSBxdWFkLmN5IC0gbm9kZS55LCBkdyA9IHgyIC0geDEsIGRuID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgICAgaWYgKGR3ICogZHcgLyB0aGV0YTIgPCBkbikge1xuICAgICAgICAgICAgaWYgKGRuIDwgY2hhcmdlRGlzdGFuY2UyKSB7XG4gICAgICAgICAgICAgIHZhciBrID0gcXVhZC5jaGFyZ2UgLyBkbjtcbiAgICAgICAgICAgICAgbm9kZS5weCAtPSBkeCAqIGs7XG4gICAgICAgICAgICAgIG5vZGUucHkgLT0gZHkgKiBrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChxdWFkLnBvaW50ICYmIGRuICYmIGRuIDwgY2hhcmdlRGlzdGFuY2UyKSB7XG4gICAgICAgICAgICB2YXIgayA9IHF1YWQucG9pbnRDaGFyZ2UgLyBkbjtcbiAgICAgICAgICAgIG5vZGUucHggLT0gZHggKiBrO1xuICAgICAgICAgICAgbm9kZS5weSAtPSBkeSAqIGs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhcXVhZC5jaGFyZ2U7XG4gICAgICB9O1xuICAgIH1cbiAgICBmb3JjZS50aWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoKGFscGhhICo9IC45OSkgPCAuMDA1KSB7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgZXZlbnQuZW5kKHtcbiAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgIGFscGhhOiBhbHBoYSA9IDBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdmFyIG4gPSBub2Rlcy5sZW5ndGgsIG0gPSBsaW5rcy5sZW5ndGgsIHEsIGksIG8sIHMsIHQsIGwsIGssIHgsIHk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbTsgKytpKSB7XG4gICAgICAgIG8gPSBsaW5rc1tpXTtcbiAgICAgICAgcyA9IG8uc291cmNlO1xuICAgICAgICB0ID0gby50YXJnZXQ7XG4gICAgICAgIHggPSB0LnggLSBzLng7XG4gICAgICAgIHkgPSB0LnkgLSBzLnk7XG4gICAgICAgIGlmIChsID0geCAqIHggKyB5ICogeSkge1xuICAgICAgICAgIGwgPSBhbHBoYSAqIHN0cmVuZ3Roc1tpXSAqICgobCA9IE1hdGguc3FydChsKSkgLSBkaXN0YW5jZXNbaV0pIC8gbDtcbiAgICAgICAgICB4ICo9IGw7XG4gICAgICAgICAgeSAqPSBsO1xuICAgICAgICAgIHQueCAtPSB4ICogKGsgPSBzLndlaWdodCArIHQud2VpZ2h0ID8gcy53ZWlnaHQgLyAocy53ZWlnaHQgKyB0LndlaWdodCkgOiAuNSk7XG4gICAgICAgICAgdC55IC09IHkgKiBrO1xuICAgICAgICAgIHMueCArPSB4ICogKGsgPSAxIC0gayk7XG4gICAgICAgICAgcy55ICs9IHkgKiBrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoayA9IGFscGhhICogZ3Jhdml0eSkge1xuICAgICAgICB4ID0gc2l6ZVswXSAvIDI7XG4gICAgICAgIHkgPSBzaXplWzFdIC8gMjtcbiAgICAgICAgaSA9IC0xO1xuICAgICAgICBpZiAoaykgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICBvID0gbm9kZXNbaV07XG4gICAgICAgICAgby54ICs9ICh4IC0gby54KSAqIGs7XG4gICAgICAgICAgby55ICs9ICh5IC0gby55KSAqIGs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFyZ2UpIHtcbiAgICAgICAgZDNfbGF5b3V0X2ZvcmNlQWNjdW11bGF0ZShxID0gZDMuZ2VvbS5xdWFkdHJlZShub2RlcyksIGFscGhhLCBjaGFyZ2VzKTtcbiAgICAgICAgaSA9IC0xO1xuICAgICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICAgIGlmICghKG8gPSBub2Rlc1tpXSkuZml4ZWQpIHtcbiAgICAgICAgICAgIHEudmlzaXQocmVwdWxzZShvKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpID0gLTE7XG4gICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICBvID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChvLmZpeGVkKSB7XG4gICAgICAgICAgby54ID0gby5weDtcbiAgICAgICAgICBvLnkgPSBvLnB5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG8ueCAtPSAoby5weCAtIChvLnB4ID0gby54KSkgKiBmcmljdGlvbjtcbiAgICAgICAgICBvLnkgLT0gKG8ucHkgLSAoby5weSA9IG8ueSkpICogZnJpY3Rpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGV2ZW50LnRpY2soe1xuICAgICAgICB0eXBlOiBcInRpY2tcIixcbiAgICAgICAgYWxwaGE6IGFscGhhXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZvcmNlLm5vZGVzID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbm9kZXM7XG4gICAgICBub2RlcyA9IHg7XG4gICAgICByZXR1cm4gZm9yY2U7XG4gICAgfTtcbiAgICBmb3JjZS5saW5rcyA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxpbmtzO1xuICAgICAgbGlua3MgPSB4O1xuICAgICAgcmV0dXJuIGZvcmNlO1xuICAgIH07XG4gICAgZm9yY2Uuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNpemU7XG4gICAgICBzaXplID0geDtcbiAgICAgIHJldHVybiBmb3JjZTtcbiAgICB9O1xuICAgIGZvcmNlLmxpbmtEaXN0YW5jZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxpbmtEaXN0YW5jZTtcbiAgICAgIGxpbmtEaXN0YW5jZSA9IHR5cGVvZiB4ID09PSBcImZ1bmN0aW9uXCIgPyB4IDogK3g7XG4gICAgICByZXR1cm4gZm9yY2U7XG4gICAgfTtcbiAgICBmb3JjZS5kaXN0YW5jZSA9IGZvcmNlLmxpbmtEaXN0YW5jZTtcbiAgICBmb3JjZS5saW5rU3RyZW5ndGggPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBsaW5rU3RyZW5ndGg7XG4gICAgICBsaW5rU3RyZW5ndGggPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6ICt4O1xuICAgICAgcmV0dXJuIGZvcmNlO1xuICAgIH07XG4gICAgZm9yY2UuZnJpY3Rpb24gPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBmcmljdGlvbjtcbiAgICAgIGZyaWN0aW9uID0gK3g7XG4gICAgICByZXR1cm4gZm9yY2U7XG4gICAgfTtcbiAgICBmb3JjZS5jaGFyZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBjaGFyZ2U7XG4gICAgICBjaGFyZ2UgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6ICt4O1xuICAgICAgcmV0dXJuIGZvcmNlO1xuICAgIH07XG4gICAgZm9yY2UuY2hhcmdlRGlzdGFuY2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBNYXRoLnNxcnQoY2hhcmdlRGlzdGFuY2UyKTtcbiAgICAgIGNoYXJnZURpc3RhbmNlMiA9IHggKiB4O1xuICAgICAgcmV0dXJuIGZvcmNlO1xuICAgIH07XG4gICAgZm9yY2UuZ3Jhdml0eSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGdyYXZpdHk7XG4gICAgICBncmF2aXR5ID0gK3g7XG4gICAgICByZXR1cm4gZm9yY2U7XG4gICAgfTtcbiAgICBmb3JjZS50aGV0YSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIE1hdGguc3FydCh0aGV0YTIpO1xuICAgICAgdGhldGEyID0geCAqIHg7XG4gICAgICByZXR1cm4gZm9yY2U7XG4gICAgfTtcbiAgICBmb3JjZS5hbHBoYSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGFscGhhO1xuICAgICAgeCA9ICt4O1xuICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgIGlmICh4ID4gMCkge1xuICAgICAgICAgIGFscGhhID0geDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lci5jID0gbnVsbCwgdGltZXIudCA9IE5hTiwgdGltZXIgPSBudWxsO1xuICAgICAgICAgIGV2ZW50LmVuZCh7XG4gICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgYWxwaGE6IGFscGhhID0gMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHggPiAwKSB7XG4gICAgICAgIGV2ZW50LnN0YXJ0KHtcbiAgICAgICAgICB0eXBlOiBcInN0YXJ0XCIsXG4gICAgICAgICAgYWxwaGE6IGFscGhhID0geFxuICAgICAgICB9KTtcbiAgICAgICAgdGltZXIgPSBkM190aW1lcihmb3JjZS50aWNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3JjZTtcbiAgICB9O1xuICAgIGZvcmNlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgbiA9IG5vZGVzLmxlbmd0aCwgbSA9IGxpbmtzLmxlbmd0aCwgdyA9IHNpemVbMF0sIGggPSBzaXplWzFdLCBuZWlnaGJvcnMsIG87XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIChvID0gbm9kZXNbaV0pLmluZGV4ID0gaTtcbiAgICAgICAgby53ZWlnaHQgPSAwO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gMDsgaSA8IG07ICsraSkge1xuICAgICAgICBvID0gbGlua3NbaV07XG4gICAgICAgIGlmICh0eXBlb2Ygby5zb3VyY2UgPT0gXCJudW1iZXJcIikgby5zb3VyY2UgPSBub2Rlc1tvLnNvdXJjZV07XG4gICAgICAgIGlmICh0eXBlb2Ygby50YXJnZXQgPT0gXCJudW1iZXJcIikgby50YXJnZXQgPSBub2Rlc1tvLnRhcmdldF07XG4gICAgICAgICsrby5zb3VyY2Uud2VpZ2h0O1xuICAgICAgICArK28udGFyZ2V0LndlaWdodDtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgbyA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAoaXNOYU4oby54KSkgby54ID0gcG9zaXRpb24oXCJ4XCIsIHcpO1xuICAgICAgICBpZiAoaXNOYU4oby55KSkgby55ID0gcG9zaXRpb24oXCJ5XCIsIGgpO1xuICAgICAgICBpZiAoaXNOYU4oby5weCkpIG8ucHggPSBvLng7XG4gICAgICAgIGlmIChpc05hTihvLnB5KSkgby5weSA9IG8ueTtcbiAgICAgIH1cbiAgICAgIGRpc3RhbmNlcyA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBsaW5rRGlzdGFuY2UgPT09IFwiZnVuY3Rpb25cIikgZm9yIChpID0gMDsgaSA8IG07ICsraSkgZGlzdGFuY2VzW2ldID0gK2xpbmtEaXN0YW5jZS5jYWxsKHRoaXMsIGxpbmtzW2ldLCBpKTsgZWxzZSBmb3IgKGkgPSAwOyBpIDwgbTsgKytpKSBkaXN0YW5jZXNbaV0gPSBsaW5rRGlzdGFuY2U7XG4gICAgICBzdHJlbmd0aHMgPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbGlua1N0cmVuZ3RoID09PSBcImZ1bmN0aW9uXCIpIGZvciAoaSA9IDA7IGkgPCBtOyArK2kpIHN0cmVuZ3Roc1tpXSA9ICtsaW5rU3RyZW5ndGguY2FsbCh0aGlzLCBsaW5rc1tpXSwgaSk7IGVsc2UgZm9yIChpID0gMDsgaSA8IG07ICsraSkgc3RyZW5ndGhzW2ldID0gbGlua1N0cmVuZ3RoO1xuICAgICAgY2hhcmdlcyA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBjaGFyZ2UgPT09IFwiZnVuY3Rpb25cIikgZm9yIChpID0gMDsgaSA8IG47ICsraSkgY2hhcmdlc1tpXSA9ICtjaGFyZ2UuY2FsbCh0aGlzLCBub2Rlc1tpXSwgaSk7IGVsc2UgZm9yIChpID0gMDsgaSA8IG47ICsraSkgY2hhcmdlc1tpXSA9IGNoYXJnZTtcbiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uKGRpbWVuc2lvbiwgc2l6ZSkge1xuICAgICAgICBpZiAoIW5laWdoYm9ycykge1xuICAgICAgICAgIG5laWdoYm9ycyA9IG5ldyBBcnJheShuKTtcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbjsgKytqKSB7XG4gICAgICAgICAgICBuZWlnaGJvcnNbal0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikge1xuICAgICAgICAgICAgdmFyIG8gPSBsaW5rc1tqXTtcbiAgICAgICAgICAgIG5laWdoYm9yc1tvLnNvdXJjZS5pbmRleF0ucHVzaChvLnRhcmdldCk7XG4gICAgICAgICAgICBuZWlnaGJvcnNbby50YXJnZXQuaW5kZXhdLnB1c2goby5zb3VyY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IG5laWdoYm9yc1tpXSwgaiA9IC0xLCBsID0gY2FuZGlkYXRlcy5sZW5ndGgsIHg7XG4gICAgICAgIHdoaWxlICgrK2ogPCBsKSBpZiAoIWlzTmFOKHggPSBjYW5kaWRhdGVzW2pdW2RpbWVuc2lvbl0pKSByZXR1cm4geDtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiBzaXplO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvcmNlLnJlc3VtZSgpO1xuICAgIH07XG4gICAgZm9yY2UucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZm9yY2UuYWxwaGEoLjEpO1xuICAgIH07XG4gICAgZm9yY2Uuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZvcmNlLmFscGhhKDApO1xuICAgIH07XG4gICAgZm9yY2UuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFkcmFnKSBkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpLm9yaWdpbihkM19pZGVudGl0eSkub24oXCJkcmFnc3RhcnQuZm9yY2VcIiwgZDNfbGF5b3V0X2ZvcmNlRHJhZ3N0YXJ0KS5vbihcImRyYWcuZm9yY2VcIiwgZHJhZ21vdmUpLm9uKFwiZHJhZ2VuZC5mb3JjZVwiLCBkM19sYXlvdXRfZm9yY2VEcmFnZW5kKTtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRyYWc7XG4gICAgICB0aGlzLm9uKFwibW91c2VvdmVyLmZvcmNlXCIsIGQzX2xheW91dF9mb3JjZU1vdXNlb3Zlcikub24oXCJtb3VzZW91dC5mb3JjZVwiLCBkM19sYXlvdXRfZm9yY2VNb3VzZW91dCkuY2FsbChkcmFnKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRyYWdtb3ZlKGQpIHtcbiAgICAgIGQucHggPSBkMy5ldmVudC54LCBkLnB5ID0gZDMuZXZlbnQueTtcbiAgICAgIGZvcmNlLnJlc3VtZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZDMucmViaW5kKGZvcmNlLCBldmVudCwgXCJvblwiKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2ZvcmNlRHJhZ3N0YXJ0KGQpIHtcbiAgICBkLmZpeGVkIHw9IDI7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2ZvcmNlRHJhZ2VuZChkKSB7XG4gICAgZC5maXhlZCAmPSB+NjtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfZm9yY2VNb3VzZW92ZXIoZCkge1xuICAgIGQuZml4ZWQgfD0gNDtcbiAgICBkLnB4ID0gZC54LCBkLnB5ID0gZC55O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9mb3JjZU1vdXNlb3V0KGQpIHtcbiAgICBkLmZpeGVkICY9IH40O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9mb3JjZUFjY3VtdWxhdGUocXVhZCwgYWxwaGEsIGNoYXJnZXMpIHtcbiAgICB2YXIgY3ggPSAwLCBjeSA9IDA7XG4gICAgcXVhZC5jaGFyZ2UgPSAwO1xuICAgIGlmICghcXVhZC5sZWFmKSB7XG4gICAgICB2YXIgbm9kZXMgPSBxdWFkLm5vZGVzLCBuID0gbm9kZXMubGVuZ3RoLCBpID0gLTEsIGM7XG4gICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICBjID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChjID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICBkM19sYXlvdXRfZm9yY2VBY2N1bXVsYXRlKGMsIGFscGhhLCBjaGFyZ2VzKTtcbiAgICAgICAgcXVhZC5jaGFyZ2UgKz0gYy5jaGFyZ2U7XG4gICAgICAgIGN4ICs9IGMuY2hhcmdlICogYy5jeDtcbiAgICAgICAgY3kgKz0gYy5jaGFyZ2UgKiBjLmN5O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocXVhZC5wb2ludCkge1xuICAgICAgaWYgKCFxdWFkLmxlYWYpIHtcbiAgICAgICAgcXVhZC5wb2ludC54ICs9IE1hdGgucmFuZG9tKCkgLSAuNTtcbiAgICAgICAgcXVhZC5wb2ludC55ICs9IE1hdGgucmFuZG9tKCkgLSAuNTtcbiAgICAgIH1cbiAgICAgIHZhciBrID0gYWxwaGEgKiBjaGFyZ2VzW3F1YWQucG9pbnQuaW5kZXhdO1xuICAgICAgcXVhZC5jaGFyZ2UgKz0gcXVhZC5wb2ludENoYXJnZSA9IGs7XG4gICAgICBjeCArPSBrICogcXVhZC5wb2ludC54O1xuICAgICAgY3kgKz0gayAqIHF1YWQucG9pbnQueTtcbiAgICB9XG4gICAgcXVhZC5jeCA9IGN4IC8gcXVhZC5jaGFyZ2U7XG4gICAgcXVhZC5jeSA9IGN5IC8gcXVhZC5jaGFyZ2U7XG4gIH1cbiAgdmFyIGQzX2xheW91dF9mb3JjZUxpbmtEaXN0YW5jZSA9IDIwLCBkM19sYXlvdXRfZm9yY2VMaW5rU3RyZW5ndGggPSAxLCBkM19sYXlvdXRfZm9yY2VDaGFyZ2VEaXN0YW5jZTIgPSBJbmZpbml0eTtcbiAgZDMubGF5b3V0LmhpZXJhcmNoeSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3J0ID0gZDNfbGF5b3V0X2hpZXJhcmNoeVNvcnQsIGNoaWxkcmVuID0gZDNfbGF5b3V0X2hpZXJhcmNoeUNoaWxkcmVuLCB2YWx1ZSA9IGQzX2xheW91dF9oaWVyYXJjaHlWYWx1ZTtcbiAgICBmdW5jdGlvbiBoaWVyYXJjaHkocm9vdCkge1xuICAgICAgdmFyIHN0YWNrID0gWyByb290IF0sIG5vZGVzID0gW10sIG5vZGU7XG4gICAgICByb290LmRlcHRoID0gMDtcbiAgICAgIHdoaWxlICgobm9kZSA9IHN0YWNrLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgIGlmICgoY2hpbGRzID0gY2hpbGRyZW4uY2FsbChoaWVyYXJjaHksIG5vZGUsIG5vZGUuZGVwdGgpKSAmJiAobiA9IGNoaWxkcy5sZW5ndGgpKSB7XG4gICAgICAgICAgdmFyIG4sIGNoaWxkcywgY2hpbGQ7XG4gICAgICAgICAgd2hpbGUgKC0tbiA+PSAwKSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKGNoaWxkID0gY2hpbGRzW25dKTtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IG5vZGU7XG4gICAgICAgICAgICBjaGlsZC5kZXB0aCA9IG5vZGUuZGVwdGggKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodmFsdWUpIG5vZGUudmFsdWUgPSAwO1xuICAgICAgICAgIG5vZGUuY2hpbGRyZW4gPSBjaGlsZHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZhbHVlKSBub2RlLnZhbHVlID0gK3ZhbHVlLmNhbGwoaGllcmFyY2h5LCBub2RlLCBub2RlLmRlcHRoKSB8fCAwO1xuICAgICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkM19sYXlvdXRfaGllcmFyY2h5VmlzaXRBZnRlcihyb290LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciBjaGlsZHMsIHBhcmVudDtcbiAgICAgICAgaWYgKHNvcnQgJiYgKGNoaWxkcyA9IG5vZGUuY2hpbGRyZW4pKSBjaGlsZHMuc29ydChzb3J0KTtcbiAgICAgICAgaWYgKHZhbHVlICYmIChwYXJlbnQgPSBub2RlLnBhcmVudCkpIHBhcmVudC52YWx1ZSArPSBub2RlLnZhbHVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICAgIGhpZXJhcmNoeS5zb3J0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc29ydDtcbiAgICAgIHNvcnQgPSB4O1xuICAgICAgcmV0dXJuIGhpZXJhcmNoeTtcbiAgICB9O1xuICAgIGhpZXJhcmNoeS5jaGlsZHJlbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgY2hpbGRyZW4gPSB4O1xuICAgICAgcmV0dXJuIGhpZXJhcmNoeTtcbiAgICB9O1xuICAgIGhpZXJhcmNoeS52YWx1ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHZhbHVlO1xuICAgICAgdmFsdWUgPSB4O1xuICAgICAgcmV0dXJuIGhpZXJhcmNoeTtcbiAgICB9O1xuICAgIGhpZXJhcmNoeS5yZXZhbHVlID0gZnVuY3Rpb24ocm9vdCkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEJlZm9yZShyb290LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIG5vZGUudmFsdWUgPSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgZDNfbGF5b3V0X2hpZXJhcmNoeVZpc2l0QWZ0ZXIocm9vdCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgIHZhciBwYXJlbnQ7XG4gICAgICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSBub2RlLnZhbHVlID0gK3ZhbHVlLmNhbGwoaGllcmFyY2h5LCBub2RlLCBub2RlLmRlcHRoKSB8fCAwO1xuICAgICAgICAgIGlmIChwYXJlbnQgPSBub2RlLnBhcmVudCkgcGFyZW50LnZhbHVlICs9IG5vZGUudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfTtcbiAgICByZXR1cm4gaGllcmFyY2h5O1xuICB9O1xuICBmdW5jdGlvbiBkM19sYXlvdXRfaGllcmFyY2h5UmViaW5kKG9iamVjdCwgaGllcmFyY2h5KSB7XG4gICAgZDMucmViaW5kKG9iamVjdCwgaGllcmFyY2h5LCBcInNvcnRcIiwgXCJjaGlsZHJlblwiLCBcInZhbHVlXCIpO1xuICAgIG9iamVjdC5ub2RlcyA9IG9iamVjdDtcbiAgICBvYmplY3QubGlua3MgPSBkM19sYXlvdXRfaGllcmFyY2h5TGlua3M7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfaGllcmFyY2h5VmlzaXRCZWZvcmUobm9kZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgbm9kZXMgPSBbIG5vZGUgXTtcbiAgICB3aGlsZSAoKG5vZGUgPSBub2Rlcy5wb3AoKSkgIT0gbnVsbCkge1xuICAgICAgY2FsbGJhY2sobm9kZSk7XG4gICAgICBpZiAoKGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbikgJiYgKG4gPSBjaGlsZHJlbi5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBuLCBjaGlsZHJlbjtcbiAgICAgICAgd2hpbGUgKC0tbiA+PSAwKSBub2Rlcy5wdXNoKGNoaWxkcmVuW25dKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2hpZXJhcmNoeVZpc2l0QWZ0ZXIobm9kZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgbm9kZXMgPSBbIG5vZGUgXSwgbm9kZXMyID0gW107XG4gICAgd2hpbGUgKChub2RlID0gbm9kZXMucG9wKCkpICE9IG51bGwpIHtcbiAgICAgIG5vZGVzMi5wdXNoKG5vZGUpO1xuICAgICAgaWYgKChjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4pICYmIChuID0gY2hpbGRyZW4ubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuLCBjaGlsZHJlbjtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIG5vZGVzLnB1c2goY2hpbGRyZW5baV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoKG5vZGUgPSBub2RlczIucG9wKCkpICE9IG51bGwpIHtcbiAgICAgIGNhbGxiYWNrKG5vZGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfaGllcmFyY2h5Q2hpbGRyZW4oZCkge1xuICAgIHJldHVybiBkLmNoaWxkcmVuO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9oaWVyYXJjaHlWYWx1ZShkKSB7XG4gICAgcmV0dXJuIGQudmFsdWU7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2hpZXJhcmNoeVNvcnQoYSwgYikge1xuICAgIHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfaGllcmFyY2h5TGlua3Mobm9kZXMpIHtcbiAgICByZXR1cm4gZDMubWVyZ2Uobm9kZXMubWFwKGZ1bmN0aW9uKHBhcmVudCkge1xuICAgICAgcmV0dXJuIChwYXJlbnQuY2hpbGRyZW4gfHwgW10pLm1hcChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNvdXJjZTogcGFyZW50LFxuICAgICAgICAgIHRhcmdldDogY2hpbGRcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pKTtcbiAgfVxuICBkMy5sYXlvdXQucGFydGl0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhpZXJhcmNoeSA9IGQzLmxheW91dC5oaWVyYXJjaHkoKSwgc2l6ZSA9IFsgMSwgMSBdO1xuICAgIGZ1bmN0aW9uIHBvc2l0aW9uKG5vZGUsIHgsIGR4LCBkeSkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgIG5vZGUueCA9IHg7XG4gICAgICBub2RlLnkgPSBub2RlLmRlcHRoICogZHk7XG4gICAgICBub2RlLmR4ID0gZHg7XG4gICAgICBub2RlLmR5ID0gZHk7XG4gICAgICBpZiAoY2hpbGRyZW4gJiYgKG4gPSBjaGlsZHJlbi5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG4sIGMsIGQ7XG4gICAgICAgIGR4ID0gbm9kZS52YWx1ZSA/IGR4IC8gbm9kZS52YWx1ZSA6IDA7XG4gICAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgICAgcG9zaXRpb24oYyA9IGNoaWxkcmVuW2ldLCB4LCBkID0gYy52YWx1ZSAqIGR4LCBkeSk7XG4gICAgICAgICAgeCArPSBkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlcHRoKG5vZGUpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4sIGQgPSAwO1xuICAgICAgaWYgKGNoaWxkcmVuICYmIChuID0gY2hpbGRyZW4ubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuO1xuICAgICAgICB3aGlsZSAoKytpIDwgbikgZCA9IE1hdGgubWF4KGQsIGRlcHRoKGNoaWxkcmVuW2ldKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gMSArIGQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnRpdGlvbihkLCBpKSB7XG4gICAgICB2YXIgbm9kZXMgPSBoaWVyYXJjaHkuY2FsbCh0aGlzLCBkLCBpKTtcbiAgICAgIHBvc2l0aW9uKG5vZGVzWzBdLCAwLCBzaXplWzBdLCBzaXplWzFdIC8gZGVwdGgobm9kZXNbMF0pKTtcbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gICAgcGFydGl0aW9uLnNpemUgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaXplO1xuICAgICAgc2l6ZSA9IHg7XG4gICAgICByZXR1cm4gcGFydGl0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIGQzX2xheW91dF9oaWVyYXJjaHlSZWJpbmQocGFydGl0aW9uLCBoaWVyYXJjaHkpO1xuICB9O1xuICBkMy5sYXlvdXQucGllID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gTnVtYmVyLCBzb3J0ID0gZDNfbGF5b3V0X3BpZVNvcnRCeVZhbHVlLCBzdGFydEFuZ2xlID0gMCwgZW5kQW5nbGUgPSDPhCwgcGFkQW5nbGUgPSAwO1xuICAgIGZ1bmN0aW9uIHBpZShkYXRhKSB7XG4gICAgICB2YXIgbiA9IGRhdGEubGVuZ3RoLCB2YWx1ZXMgPSBkYXRhLm1hcChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgIHJldHVybiArdmFsdWUuY2FsbChwaWUsIGQsIGkpO1xuICAgICAgfSksIGEgPSArKHR5cGVvZiBzdGFydEFuZ2xlID09PSBcImZ1bmN0aW9uXCIgPyBzdGFydEFuZ2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBzdGFydEFuZ2xlKSwgZGEgPSAodHlwZW9mIGVuZEFuZ2xlID09PSBcImZ1bmN0aW9uXCIgPyBlbmRBbmdsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogZW5kQW5nbGUpIC0gYSwgcCA9IE1hdGgubWluKE1hdGguYWJzKGRhKSAvIG4sICsodHlwZW9mIHBhZEFuZ2xlID09PSBcImZ1bmN0aW9uXCIgPyBwYWRBbmdsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogcGFkQW5nbGUpKSwgcGEgPSBwICogKGRhIDwgMCA/IC0xIDogMSksIHN1bSA9IGQzLnN1bSh2YWx1ZXMpLCBrID0gc3VtID8gKGRhIC0gbiAqIHBhKSAvIHN1bSA6IDAsIGluZGV4ID0gZDMucmFuZ2UobiksIGFyY3MgPSBbXSwgdjtcbiAgICAgIGlmIChzb3J0ICE9IG51bGwpIGluZGV4LnNvcnQoc29ydCA9PT0gZDNfbGF5b3V0X3BpZVNvcnRCeVZhbHVlID8gZnVuY3Rpb24oaSwgaikge1xuICAgICAgICByZXR1cm4gdmFsdWVzW2pdIC0gdmFsdWVzW2ldO1xuICAgICAgfSA6IGZ1bmN0aW9uKGksIGopIHtcbiAgICAgICAgcmV0dXJuIHNvcnQoZGF0YVtpXSwgZGF0YVtqXSk7XG4gICAgICB9KTtcbiAgICAgIGluZGV4LmZvckVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICBhcmNzW2ldID0ge1xuICAgICAgICAgIGRhdGE6IGRhdGFbaV0sXG4gICAgICAgICAgdmFsdWU6IHYgPSB2YWx1ZXNbaV0sXG4gICAgICAgICAgc3RhcnRBbmdsZTogYSxcbiAgICAgICAgICBlbmRBbmdsZTogYSArPSB2ICogayArIHBhLFxuICAgICAgICAgIHBhZEFuZ2xlOiBwXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhcmNzO1xuICAgIH1cbiAgICBwaWUudmFsdWUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB2YWx1ZTtcbiAgICAgIHZhbHVlID0gXztcbiAgICAgIHJldHVybiBwaWU7XG4gICAgfTtcbiAgICBwaWUuc29ydCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNvcnQ7XG4gICAgICBzb3J0ID0gXztcbiAgICAgIHJldHVybiBwaWU7XG4gICAgfTtcbiAgICBwaWUuc3RhcnRBbmdsZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHN0YXJ0QW5nbGU7XG4gICAgICBzdGFydEFuZ2xlID0gXztcbiAgICAgIHJldHVybiBwaWU7XG4gICAgfTtcbiAgICBwaWUuZW5kQW5nbGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBlbmRBbmdsZTtcbiAgICAgIGVuZEFuZ2xlID0gXztcbiAgICAgIHJldHVybiBwaWU7XG4gICAgfTtcbiAgICBwaWUucGFkQW5nbGUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBwYWRBbmdsZTtcbiAgICAgIHBhZEFuZ2xlID0gXztcbiAgICAgIHJldHVybiBwaWU7XG4gICAgfTtcbiAgICByZXR1cm4gcGllO1xuICB9O1xuICB2YXIgZDNfbGF5b3V0X3BpZVNvcnRCeVZhbHVlID0ge307XG4gIGQzLmxheW91dC5zdGFjayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZXMgPSBkM19pZGVudGl0eSwgb3JkZXIgPSBkM19sYXlvdXRfc3RhY2tPcmRlckRlZmF1bHQsIG9mZnNldCA9IGQzX2xheW91dF9zdGFja09mZnNldFplcm8sIG91dCA9IGQzX2xheW91dF9zdGFja091dCwgeCA9IGQzX2xheW91dF9zdGFja1gsIHkgPSBkM19sYXlvdXRfc3RhY2tZO1xuICAgIGZ1bmN0aW9uIHN0YWNrKGRhdGEsIGluZGV4KSB7XG4gICAgICBpZiAoIShuID0gZGF0YS5sZW5ndGgpKSByZXR1cm4gZGF0YTtcbiAgICAgIHZhciBzZXJpZXMgPSBkYXRhLm1hcChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXMuY2FsbChzdGFjaywgZCwgaSk7XG4gICAgICB9KTtcbiAgICAgIHZhciBwb2ludHMgPSBzZXJpZXMubWFwKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQubWFwKGZ1bmN0aW9uKHYsIGkpIHtcbiAgICAgICAgICByZXR1cm4gWyB4LmNhbGwoc3RhY2ssIHYsIGkpLCB5LmNhbGwoc3RhY2ssIHYsIGkpIF07XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB2YXIgb3JkZXJzID0gb3JkZXIuY2FsbChzdGFjaywgcG9pbnRzLCBpbmRleCk7XG4gICAgICBzZXJpZXMgPSBkMy5wZXJtdXRlKHNlcmllcywgb3JkZXJzKTtcbiAgICAgIHBvaW50cyA9IGQzLnBlcm11dGUocG9pbnRzLCBvcmRlcnMpO1xuICAgICAgdmFyIG9mZnNldHMgPSBvZmZzZXQuY2FsbChzdGFjaywgcG9pbnRzLCBpbmRleCk7XG4gICAgICB2YXIgbSA9IHNlcmllc1swXS5sZW5ndGgsIG4sIGksIGosIG87XG4gICAgICBmb3IgKGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgICAgIG91dC5jYWxsKHN0YWNrLCBzZXJpZXNbMF1bal0sIG8gPSBvZmZzZXRzW2pdLCBwb2ludHNbMF1bal1bMV0pO1xuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgb3V0LmNhbGwoc3RhY2ssIHNlcmllc1tpXVtqXSwgbyArPSBwb2ludHNbaSAtIDFdW2pdWzFdLCBwb2ludHNbaV1bal1bMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgc3RhY2sudmFsdWVzID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdmFsdWVzO1xuICAgICAgdmFsdWVzID0geDtcbiAgICAgIHJldHVybiBzdGFjaztcbiAgICB9O1xuICAgIHN0YWNrLm9yZGVyID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JkZXI7XG4gICAgICBvcmRlciA9IHR5cGVvZiB4ID09PSBcImZ1bmN0aW9uXCIgPyB4IDogZDNfbGF5b3V0X3N0YWNrT3JkZXJzLmdldCh4KSB8fCBkM19sYXlvdXRfc3RhY2tPcmRlckRlZmF1bHQ7XG4gICAgICByZXR1cm4gc3RhY2s7XG4gICAgfTtcbiAgICBzdGFjay5vZmZzZXQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBvZmZzZXQ7XG4gICAgICBvZmZzZXQgPSB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiID8geCA6IGQzX2xheW91dF9zdGFja09mZnNldHMuZ2V0KHgpIHx8IGQzX2xheW91dF9zdGFja09mZnNldFplcm87XG4gICAgICByZXR1cm4gc3RhY2s7XG4gICAgfTtcbiAgICBzdGFjay54ID0gZnVuY3Rpb24oeikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geDtcbiAgICAgIHggPSB6O1xuICAgICAgcmV0dXJuIHN0YWNrO1xuICAgIH07XG4gICAgc3RhY2sueSA9IGZ1bmN0aW9uKHopIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHk7XG4gICAgICB5ID0gejtcbiAgICAgIHJldHVybiBzdGFjaztcbiAgICB9O1xuICAgIHN0YWNrLm91dCA9IGZ1bmN0aW9uKHopIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG91dDtcbiAgICAgIG91dCA9IHo7XG4gICAgICByZXR1cm4gc3RhY2s7XG4gICAgfTtcbiAgICByZXR1cm4gc3RhY2s7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9zdGFja1goZCkge1xuICAgIHJldHVybiBkLng7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3N0YWNrWShkKSB7XG4gICAgcmV0dXJuIGQueTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfc3RhY2tPdXQoZCwgeTAsIHkpIHtcbiAgICBkLnkwID0geTA7XG4gICAgZC55ID0geTtcbiAgfVxuICB2YXIgZDNfbGF5b3V0X3N0YWNrT3JkZXJzID0gZDMubWFwKHtcbiAgICBcImluc2lkZS1vdXRcIjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIG4gPSBkYXRhLmxlbmd0aCwgaSwgaiwgbWF4ID0gZGF0YS5tYXAoZDNfbGF5b3V0X3N0YWNrTWF4SW5kZXgpLCBzdW1zID0gZGF0YS5tYXAoZDNfbGF5b3V0X3N0YWNrUmVkdWNlU3VtKSwgaW5kZXggPSBkMy5yYW5nZShuKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG1heFthXSAtIG1heFtiXTtcbiAgICAgIH0pLCB0b3AgPSAwLCBib3R0b20gPSAwLCB0b3BzID0gW10sIGJvdHRvbXMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaiA9IGluZGV4W2ldO1xuICAgICAgICBpZiAodG9wIDwgYm90dG9tKSB7XG4gICAgICAgICAgdG9wICs9IHN1bXNbal07XG4gICAgICAgICAgdG9wcy5wdXNoKGopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJvdHRvbSArPSBzdW1zW2pdO1xuICAgICAgICAgIGJvdHRvbXMucHVzaChqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJvdHRvbXMucmV2ZXJzZSgpLmNvbmNhdCh0b3BzKTtcbiAgICB9LFxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiBkMy5yYW5nZShkYXRhLmxlbmd0aCkucmV2ZXJzZSgpO1xuICAgIH0sXG4gICAgXCJkZWZhdWx0XCI6IGQzX2xheW91dF9zdGFja09yZGVyRGVmYXVsdFxuICB9KTtcbiAgdmFyIGQzX2xheW91dF9zdGFja09mZnNldHMgPSBkMy5tYXAoe1xuICAgIHNpbGhvdWV0dGU6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBuID0gZGF0YS5sZW5ndGgsIG0gPSBkYXRhWzBdLmxlbmd0aCwgc3VtcyA9IFtdLCBtYXggPSAwLCBpLCBqLCBvLCB5MCA9IFtdO1xuICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikge1xuICAgICAgICBmb3IgKGkgPSAwLCBvID0gMDsgaSA8IG47IGkrKykgbyArPSBkYXRhW2ldW2pdWzFdO1xuICAgICAgICBpZiAobyA+IG1heCkgbWF4ID0gbztcbiAgICAgICAgc3Vtcy5wdXNoKG8pO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikge1xuICAgICAgICB5MFtqXSA9IChtYXggLSBzdW1zW2pdKSAvIDI7XG4gICAgICB9XG4gICAgICByZXR1cm4geTA7XG4gICAgfSxcbiAgICB3aWdnbGU6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBuID0gZGF0YS5sZW5ndGgsIHggPSBkYXRhWzBdLCBtID0geC5sZW5ndGgsIGksIGosIGssIHMxLCBzMiwgczMsIGR4LCBvLCBvMCwgeTAgPSBbXTtcbiAgICAgIHkwWzBdID0gbyA9IG8wID0gMDtcbiAgICAgIGZvciAoaiA9IDE7IGogPCBtOyArK2opIHtcbiAgICAgICAgZm9yIChpID0gMCwgczEgPSAwOyBpIDwgbjsgKytpKSBzMSArPSBkYXRhW2ldW2pdWzFdO1xuICAgICAgICBmb3IgKGkgPSAwLCBzMiA9IDAsIGR4ID0geFtqXVswXSAtIHhbaiAtIDFdWzBdOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgZm9yIChrID0gMCwgczMgPSAoZGF0YVtpXVtqXVsxXSAtIGRhdGFbaV1baiAtIDFdWzFdKSAvICgyICogZHgpOyBrIDwgaTsgKytrKSB7XG4gICAgICAgICAgICBzMyArPSAoZGF0YVtrXVtqXVsxXSAtIGRhdGFba11baiAtIDFdWzFdKSAvIGR4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBzMiArPSBzMyAqIGRhdGFbaV1bal1bMV07XG4gICAgICAgIH1cbiAgICAgICAgeTBbal0gPSBvIC09IHMxID8gczIgLyBzMSAqIGR4IDogMDtcbiAgICAgICAgaWYgKG8gPCBvMCkgbzAgPSBvO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikgeTBbal0gLT0gbzA7XG4gICAgICByZXR1cm4geTA7XG4gICAgfSxcbiAgICBleHBhbmQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBuID0gZGF0YS5sZW5ndGgsIG0gPSBkYXRhWzBdLmxlbmd0aCwgayA9IDEgLyBuLCBpLCBqLCBvLCB5MCA9IFtdO1xuICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikge1xuICAgICAgICBmb3IgKGkgPSAwLCBvID0gMDsgaSA8IG47IGkrKykgbyArPSBkYXRhW2ldW2pdWzFdO1xuICAgICAgICBpZiAobykgZm9yIChpID0gMDsgaSA8IG47IGkrKykgZGF0YVtpXVtqXVsxXSAvPSBvOyBlbHNlIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIGRhdGFbaV1bal1bMV0gPSBrO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMDsgaiA8IG07ICsraikgeTBbal0gPSAwO1xuICAgICAgcmV0dXJuIHkwO1xuICAgIH0sXG4gICAgemVybzogZDNfbGF5b3V0X3N0YWNrT2Zmc2V0WmVyb1xuICB9KTtcbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3N0YWNrT3JkZXJEZWZhdWx0KGRhdGEpIHtcbiAgICByZXR1cm4gZDMucmFuZ2UoZGF0YS5sZW5ndGgpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9zdGFja09mZnNldFplcm8oZGF0YSkge1xuICAgIHZhciBqID0gLTEsIG0gPSBkYXRhWzBdLmxlbmd0aCwgeTAgPSBbXTtcbiAgICB3aGlsZSAoKytqIDwgbSkgeTBbal0gPSAwO1xuICAgIHJldHVybiB5MDtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfc3RhY2tNYXhJbmRleChhcnJheSkge1xuICAgIHZhciBpID0gMSwgaiA9IDAsIHYgPSBhcnJheVswXVsxXSwgaywgbiA9IGFycmF5Lmxlbmd0aDtcbiAgICBmb3IgKDtpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKGsgPSBhcnJheVtpXVsxXSkgPiB2KSB7XG4gICAgICAgIGogPSBpO1xuICAgICAgICB2ID0gaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGo7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3N0YWNrUmVkdWNlU3VtKGQpIHtcbiAgICByZXR1cm4gZC5yZWR1Y2UoZDNfbGF5b3V0X3N0YWNrU3VtLCAwKTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfc3RhY2tTdW0ocCwgZCkge1xuICAgIHJldHVybiBwICsgZFsxXTtcbiAgfVxuICBkMy5sYXlvdXQuaGlzdG9ncmFtID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZyZXF1ZW5jeSA9IHRydWUsIHZhbHVlciA9IE51bWJlciwgcmFuZ2VyID0gZDNfbGF5b3V0X2hpc3RvZ3JhbVJhbmdlLCBiaW5uZXIgPSBkM19sYXlvdXRfaGlzdG9ncmFtQmluU3R1cmdlcztcbiAgICBmdW5jdGlvbiBoaXN0b2dyYW0oZGF0YSwgaSkge1xuICAgICAgdmFyIGJpbnMgPSBbXSwgdmFsdWVzID0gZGF0YS5tYXAodmFsdWVyLCB0aGlzKSwgcmFuZ2UgPSByYW5nZXIuY2FsbCh0aGlzLCB2YWx1ZXMsIGkpLCB0aHJlc2hvbGRzID0gYmlubmVyLmNhbGwodGhpcywgcmFuZ2UsIHZhbHVlcywgaSksIGJpbiwgaSA9IC0xLCBuID0gdmFsdWVzLmxlbmd0aCwgbSA9IHRocmVzaG9sZHMubGVuZ3RoIC0gMSwgayA9IGZyZXF1ZW5jeSA/IDEgOiAxIC8gbiwgeDtcbiAgICAgIHdoaWxlICgrK2kgPCBtKSB7XG4gICAgICAgIGJpbiA9IGJpbnNbaV0gPSBbXTtcbiAgICAgICAgYmluLmR4ID0gdGhyZXNob2xkc1tpICsgMV0gLSAoYmluLnggPSB0aHJlc2hvbGRzW2ldKTtcbiAgICAgICAgYmluLnkgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKG0gPiAwKSB7XG4gICAgICAgIGkgPSAtMTtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICB4ID0gdmFsdWVzW2ldO1xuICAgICAgICAgIGlmICh4ID49IHJhbmdlWzBdICYmIHggPD0gcmFuZ2VbMV0pIHtcbiAgICAgICAgICAgIGJpbiA9IGJpbnNbZDMuYmlzZWN0KHRocmVzaG9sZHMsIHgsIDEsIG0pIC0gMV07XG4gICAgICAgICAgICBiaW4ueSArPSBrO1xuICAgICAgICAgICAgYmluLnB1c2goZGF0YVtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYmlucztcbiAgICB9XG4gICAgaGlzdG9ncmFtLnZhbHVlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdmFsdWVyO1xuICAgICAgdmFsdWVyID0geDtcbiAgICAgIHJldHVybiBoaXN0b2dyYW07XG4gICAgfTtcbiAgICBoaXN0b2dyYW0ucmFuZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByYW5nZXI7XG4gICAgICByYW5nZXIgPSBkM19mdW5jdG9yKHgpO1xuICAgICAgcmV0dXJuIGhpc3RvZ3JhbTtcbiAgICB9O1xuICAgIGhpc3RvZ3JhbS5iaW5zID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gYmlubmVyO1xuICAgICAgYmlubmVyID0gdHlwZW9mIHggPT09IFwibnVtYmVyXCIgPyBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4gZDNfbGF5b3V0X2hpc3RvZ3JhbUJpbkZpeGVkKHJhbmdlLCB4KTtcbiAgICAgIH0gOiBkM19mdW5jdG9yKHgpO1xuICAgICAgcmV0dXJuIGhpc3RvZ3JhbTtcbiAgICB9O1xuICAgIGhpc3RvZ3JhbS5mcmVxdWVuY3kgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBmcmVxdWVuY3k7XG4gICAgICBmcmVxdWVuY3kgPSAhIXg7XG4gICAgICByZXR1cm4gaGlzdG9ncmFtO1xuICAgIH07XG4gICAgcmV0dXJuIGhpc3RvZ3JhbTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2hpc3RvZ3JhbUJpblN0dXJnZXMocmFuZ2UsIHZhbHVlcykge1xuICAgIHJldHVybiBkM19sYXlvdXRfaGlzdG9ncmFtQmluRml4ZWQocmFuZ2UsIE1hdGguY2VpbChNYXRoLmxvZyh2YWx1ZXMubGVuZ3RoKSAvIE1hdGguTE4yICsgMSkpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9oaXN0b2dyYW1CaW5GaXhlZChyYW5nZSwgbikge1xuICAgIHZhciB4ID0gLTEsIGIgPSArcmFuZ2VbMF0sIG0gPSAocmFuZ2VbMV0gLSBiKSAvIG4sIGYgPSBbXTtcbiAgICB3aGlsZSAoKyt4IDw9IG4pIGZbeF0gPSBtICogeCArIGI7XG4gICAgcmV0dXJuIGY7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X2hpc3RvZ3JhbVJhbmdlKHZhbHVlcykge1xuICAgIHJldHVybiBbIGQzLm1pbih2YWx1ZXMpLCBkMy5tYXgodmFsdWVzKSBdO1xuICB9XG4gIGQzLmxheW91dC5wYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhpZXJhcmNoeSA9IGQzLmxheW91dC5oaWVyYXJjaHkoKS5zb3J0KGQzX2xheW91dF9wYWNrU29ydCksIHBhZGRpbmcgPSAwLCBzaXplID0gWyAxLCAxIF0sIHJhZGl1cztcbiAgICBmdW5jdGlvbiBwYWNrKGQsIGkpIHtcbiAgICAgIHZhciBub2RlcyA9IGhpZXJhcmNoeS5jYWxsKHRoaXMsIGQsIGkpLCByb290ID0gbm9kZXNbMF0sIHcgPSBzaXplWzBdLCBoID0gc2l6ZVsxXSwgciA9IHJhZGl1cyA9PSBudWxsID8gTWF0aC5zcXJ0IDogdHlwZW9mIHJhZGl1cyA9PT0gXCJmdW5jdGlvblwiID8gcmFkaXVzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByYWRpdXM7XG4gICAgICB9O1xuICAgICAgcm9vdC54ID0gcm9vdC55ID0gMDtcbiAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEFmdGVyKHJvb3QsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgZC5yID0gK3IoZC52YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEFmdGVyKHJvb3QsIGQzX2xheW91dF9wYWNrU2libGluZ3MpO1xuICAgICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgdmFyIGRyID0gcGFkZGluZyAqIChyYWRpdXMgPyAxIDogTWF0aC5tYXgoMiAqIHJvb3QuciAvIHcsIDIgKiByb290LnIgLyBoKSkgLyAyO1xuICAgICAgICBkM19sYXlvdXRfaGllcmFyY2h5VmlzaXRBZnRlcihyb290LCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgZC5yICs9IGRyO1xuICAgICAgICB9KTtcbiAgICAgICAgZDNfbGF5b3V0X2hpZXJhcmNoeVZpc2l0QWZ0ZXIocm9vdCwgZDNfbGF5b3V0X3BhY2tTaWJsaW5ncyk7XG4gICAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEFmdGVyKHJvb3QsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICBkLnIgLT0gZHI7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZDNfbGF5b3V0X3BhY2tUcmFuc2Zvcm0ocm9vdCwgdyAvIDIsIGggLyAyLCByYWRpdXMgPyAxIDogMSAvIE1hdGgubWF4KDIgKiByb290LnIgLyB3LCAyICogcm9vdC5yIC8gaCkpO1xuICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cbiAgICBwYWNrLnNpemUgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaXplO1xuICAgICAgc2l6ZSA9IF87XG4gICAgICByZXR1cm4gcGFjaztcbiAgICB9O1xuICAgIHBhY2sucmFkaXVzID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcmFkaXVzO1xuICAgICAgcmFkaXVzID0gXyA9PSBudWxsIHx8IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBfIDogK187XG4gICAgICByZXR1cm4gcGFjaztcbiAgICB9O1xuICAgIHBhY2sucGFkZGluZyA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHBhZGRpbmc7XG4gICAgICBwYWRkaW5nID0gK187XG4gICAgICByZXR1cm4gcGFjaztcbiAgICB9O1xuICAgIHJldHVybiBkM19sYXlvdXRfaGllcmFyY2h5UmViaW5kKHBhY2ssIGhpZXJhcmNoeSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9wYWNrU29ydChhLCBiKSB7XG4gICAgcmV0dXJuIGEudmFsdWUgLSBiLnZhbHVlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9wYWNrSW5zZXJ0KGEsIGIpIHtcbiAgICB2YXIgYyA9IGEuX3BhY2tfbmV4dDtcbiAgICBhLl9wYWNrX25leHQgPSBiO1xuICAgIGIuX3BhY2tfcHJldiA9IGE7XG4gICAgYi5fcGFja19uZXh0ID0gYztcbiAgICBjLl9wYWNrX3ByZXYgPSBiO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9wYWNrU3BsaWNlKGEsIGIpIHtcbiAgICBhLl9wYWNrX25leHQgPSBiO1xuICAgIGIuX3BhY2tfcHJldiA9IGE7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3BhY2tJbnRlcnNlY3RzKGEsIGIpIHtcbiAgICB2YXIgZHggPSBiLnggLSBhLngsIGR5ID0gYi55IC0gYS55LCBkciA9IGEuciArIGIucjtcbiAgICByZXR1cm4gLjk5OSAqIGRyICogZHIgPiBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfcGFja1NpYmxpbmdzKG5vZGUpIHtcbiAgICBpZiAoIShub2RlcyA9IG5vZGUuY2hpbGRyZW4pIHx8ICEobiA9IG5vZGVzLmxlbmd0aCkpIHJldHVybjtcbiAgICB2YXIgbm9kZXMsIHhNaW4gPSBJbmZpbml0eSwgeE1heCA9IC1JbmZpbml0eSwgeU1pbiA9IEluZmluaXR5LCB5TWF4ID0gLUluZmluaXR5LCBhLCBiLCBjLCBpLCBqLCBrLCBuO1xuICAgIGZ1bmN0aW9uIGJvdW5kKG5vZGUpIHtcbiAgICAgIHhNaW4gPSBNYXRoLm1pbihub2RlLnggLSBub2RlLnIsIHhNaW4pO1xuICAgICAgeE1heCA9IE1hdGgubWF4KG5vZGUueCArIG5vZGUuciwgeE1heCk7XG4gICAgICB5TWluID0gTWF0aC5taW4obm9kZS55IC0gbm9kZS5yLCB5TWluKTtcbiAgICAgIHlNYXggPSBNYXRoLm1heChub2RlLnkgKyBub2RlLnIsIHlNYXgpO1xuICAgIH1cbiAgICBub2Rlcy5mb3JFYWNoKGQzX2xheW91dF9wYWNrTGluayk7XG4gICAgYSA9IG5vZGVzWzBdO1xuICAgIGEueCA9IC1hLnI7XG4gICAgYS55ID0gMDtcbiAgICBib3VuZChhKTtcbiAgICBpZiAobiA+IDEpIHtcbiAgICAgIGIgPSBub2Rlc1sxXTtcbiAgICAgIGIueCA9IGIucjtcbiAgICAgIGIueSA9IDA7XG4gICAgICBib3VuZChiKTtcbiAgICAgIGlmIChuID4gMikge1xuICAgICAgICBjID0gbm9kZXNbMl07XG4gICAgICAgIGQzX2xheW91dF9wYWNrUGxhY2UoYSwgYiwgYyk7XG4gICAgICAgIGJvdW5kKGMpO1xuICAgICAgICBkM19sYXlvdXRfcGFja0luc2VydChhLCBjKTtcbiAgICAgICAgYS5fcGFja19wcmV2ID0gYztcbiAgICAgICAgZDNfbGF5b3V0X3BhY2tJbnNlcnQoYywgYik7XG4gICAgICAgIGIgPSBhLl9wYWNrX25leHQ7XG4gICAgICAgIGZvciAoaSA9IDM7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBkM19sYXlvdXRfcGFja1BsYWNlKGEsIGIsIGMgPSBub2Rlc1tpXSk7XG4gICAgICAgICAgdmFyIGlzZWN0ID0gMCwgczEgPSAxLCBzMiA9IDE7XG4gICAgICAgICAgZm9yIChqID0gYi5fcGFja19uZXh0OyBqICE9PSBiOyBqID0gai5fcGFja19uZXh0LCBzMSsrKSB7XG4gICAgICAgICAgICBpZiAoZDNfbGF5b3V0X3BhY2tJbnRlcnNlY3RzKGosIGMpKSB7XG4gICAgICAgICAgICAgIGlzZWN0ID0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc2VjdCA9PSAxKSB7XG4gICAgICAgICAgICBmb3IgKGsgPSBhLl9wYWNrX3ByZXY7IGsgIT09IGouX3BhY2tfcHJldjsgayA9IGsuX3BhY2tfcHJldiwgczIrKykge1xuICAgICAgICAgICAgICBpZiAoZDNfbGF5b3V0X3BhY2tJbnRlcnNlY3RzKGssIGMpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzZWN0KSB7XG4gICAgICAgICAgICBpZiAoczEgPCBzMiB8fCBzMSA9PSBzMiAmJiBiLnIgPCBhLnIpIGQzX2xheW91dF9wYWNrU3BsaWNlKGEsIGIgPSBqKTsgZWxzZSBkM19sYXlvdXRfcGFja1NwbGljZShhID0gaywgYik7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGQzX2xheW91dF9wYWNrSW5zZXJ0KGEsIGMpO1xuICAgICAgICAgICAgYiA9IGM7XG4gICAgICAgICAgICBib3VuZChjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGN4ID0gKHhNaW4gKyB4TWF4KSAvIDIsIGN5ID0gKHlNaW4gKyB5TWF4KSAvIDIsIGNyID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjID0gbm9kZXNbaV07XG4gICAgICBjLnggLT0gY3g7XG4gICAgICBjLnkgLT0gY3k7XG4gICAgICBjciA9IE1hdGgubWF4KGNyLCBjLnIgKyBNYXRoLnNxcnQoYy54ICogYy54ICsgYy55ICogYy55KSk7XG4gICAgfVxuICAgIG5vZGUuciA9IGNyO1xuICAgIG5vZGVzLmZvckVhY2goZDNfbGF5b3V0X3BhY2tVbmxpbmspO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9wYWNrTGluayhub2RlKSB7XG4gICAgbm9kZS5fcGFja19uZXh0ID0gbm9kZS5fcGFja19wcmV2ID0gbm9kZTtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfcGFja1VubGluayhub2RlKSB7XG4gICAgZGVsZXRlIG5vZGUuX3BhY2tfbmV4dDtcbiAgICBkZWxldGUgbm9kZS5fcGFja19wcmV2O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9wYWNrVHJhbnNmb3JtKG5vZGUsIHgsIHksIGspIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgIG5vZGUueCA9IHggKz0gayAqIG5vZGUueDtcbiAgICBub2RlLnkgPSB5ICs9IGsgKiBub2RlLnk7XG4gICAgbm9kZS5yICo9IGs7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICB2YXIgaSA9IC0xLCBuID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGQzX2xheW91dF9wYWNrVHJhbnNmb3JtKGNoaWxkcmVuW2ldLCB4LCB5LCBrKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3BhY2tQbGFjZShhLCBiLCBjKSB7XG4gICAgdmFyIGRiID0gYS5yICsgYy5yLCBkeCA9IGIueCAtIGEueCwgZHkgPSBiLnkgLSBhLnk7XG4gICAgaWYgKGRiICYmIChkeCB8fCBkeSkpIHtcbiAgICAgIHZhciBkYSA9IGIuciArIGMuciwgZGMgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgIGRhICo9IGRhO1xuICAgICAgZGIgKj0gZGI7XG4gICAgICB2YXIgeCA9IC41ICsgKGRiIC0gZGEpIC8gKDIgKiBkYyksIHkgPSBNYXRoLnNxcnQoTWF0aC5tYXgoMCwgMiAqIGRhICogKGRiICsgZGMpIC0gKGRiIC09IGRjKSAqIGRiIC0gZGEgKiBkYSkpIC8gKDIgKiBkYyk7XG4gICAgICBjLnggPSBhLnggKyB4ICogZHggKyB5ICogZHk7XG4gICAgICBjLnkgPSBhLnkgKyB4ICogZHkgLSB5ICogZHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMueCA9IGEueCArIGRiO1xuICAgICAgYy55ID0gYS55O1xuICAgIH1cbiAgfVxuICBkMy5sYXlvdXQudHJlZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoaWVyYXJjaHkgPSBkMy5sYXlvdXQuaGllcmFyY2h5KCkuc29ydChudWxsKS52YWx1ZShudWxsKSwgc2VwYXJhdGlvbiA9IGQzX2xheW91dF90cmVlU2VwYXJhdGlvbiwgc2l6ZSA9IFsgMSwgMSBdLCBub2RlU2l6ZSA9IG51bGw7XG4gICAgZnVuY3Rpb24gdHJlZShkLCBpKSB7XG4gICAgICB2YXIgbm9kZXMgPSBoaWVyYXJjaHkuY2FsbCh0aGlzLCBkLCBpKSwgcm9vdDAgPSBub2Rlc1swXSwgcm9vdDEgPSB3cmFwVHJlZShyb290MCk7XG4gICAgICBkM19sYXlvdXRfaGllcmFyY2h5VmlzaXRBZnRlcihyb290MSwgZmlyc3RXYWxrKSwgcm9vdDEucGFyZW50Lm0gPSAtcm9vdDEuejtcbiAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEJlZm9yZShyb290MSwgc2Vjb25kV2Fsayk7XG4gICAgICBpZiAobm9kZVNpemUpIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEJlZm9yZShyb290MCwgc2l6ZU5vZGUpOyBlbHNlIHtcbiAgICAgICAgdmFyIGxlZnQgPSByb290MCwgcmlnaHQgPSByb290MCwgYm90dG9tID0gcm9vdDA7XG4gICAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEJlZm9yZShyb290MCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgIGlmIChub2RlLnggPCBsZWZ0LngpIGxlZnQgPSBub2RlO1xuICAgICAgICAgIGlmIChub2RlLnggPiByaWdodC54KSByaWdodCA9IG5vZGU7XG4gICAgICAgICAgaWYgKG5vZGUuZGVwdGggPiBib3R0b20uZGVwdGgpIGJvdHRvbSA9IG5vZGU7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdHggPSBzZXBhcmF0aW9uKGxlZnQsIHJpZ2h0KSAvIDIgLSBsZWZ0LngsIGt4ID0gc2l6ZVswXSAvIChyaWdodC54ICsgc2VwYXJhdGlvbihyaWdodCwgbGVmdCkgLyAyICsgdHgpLCBreSA9IHNpemVbMV0gLyAoYm90dG9tLmRlcHRoIHx8IDEpO1xuICAgICAgICBkM19sYXlvdXRfaGllcmFyY2h5VmlzaXRCZWZvcmUocm9vdDAsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICBub2RlLnggPSAobm9kZS54ICsgdHgpICoga3g7XG4gICAgICAgICAgbm9kZS55ID0gbm9kZS5kZXB0aCAqIGt5O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JhcFRyZWUocm9vdDApIHtcbiAgICAgIHZhciByb290MSA9IHtcbiAgICAgICAgQTogbnVsbCxcbiAgICAgICAgY2hpbGRyZW46IFsgcm9vdDAgXVxuICAgICAgfSwgcXVldWUgPSBbIHJvb3QxIF0sIG5vZGUxO1xuICAgICAgd2hpbGUgKChub2RlMSA9IHF1ZXVlLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIGZvciAodmFyIGNoaWxkcmVuID0gbm9kZTEuY2hpbGRyZW4sIGNoaWxkLCBpID0gMCwgbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIHF1ZXVlLnB1c2goKGNoaWxkcmVuW2ldID0gY2hpbGQgPSB7XG4gICAgICAgICAgICBfOiBjaGlsZHJlbltpXSxcbiAgICAgICAgICAgIHBhcmVudDogbm9kZTEsXG4gICAgICAgICAgICBjaGlsZHJlbjogKGNoaWxkID0gY2hpbGRyZW5baV0uY2hpbGRyZW4pICYmIGNoaWxkLnNsaWNlKCkgfHwgW10sXG4gICAgICAgICAgICBBOiBudWxsLFxuICAgICAgICAgICAgYTogbnVsbCxcbiAgICAgICAgICAgIHo6IDAsXG4gICAgICAgICAgICBtOiAwLFxuICAgICAgICAgICAgYzogMCxcbiAgICAgICAgICAgIHM6IDAsXG4gICAgICAgICAgICB0OiBudWxsLFxuICAgICAgICAgICAgaTogaVxuICAgICAgICAgIH0pLmEgPSBjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByb290MS5jaGlsZHJlblswXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmlyc3RXYWxrKHYpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHYuY2hpbGRyZW4sIHNpYmxpbmdzID0gdi5wYXJlbnQuY2hpbGRyZW4sIHcgPSB2LmkgPyBzaWJsaW5nc1t2LmkgLSAxXSA6IG51bGw7XG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIGQzX2xheW91dF90cmVlU2hpZnQodik7XG4gICAgICAgIHZhciBtaWRwb2ludCA9IChjaGlsZHJlblswXS56ICsgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0ueikgLyAyO1xuICAgICAgICBpZiAodykge1xuICAgICAgICAgIHYueiA9IHcueiArIHNlcGFyYXRpb24odi5fLCB3Ll8pO1xuICAgICAgICAgIHYubSA9IHYueiAtIG1pZHBvaW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYueiA9IG1pZHBvaW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHcpIHtcbiAgICAgICAgdi56ID0gdy56ICsgc2VwYXJhdGlvbih2Ll8sIHcuXyk7XG4gICAgICB9XG4gICAgICB2LnBhcmVudC5BID0gYXBwb3J0aW9uKHYsIHcsIHYucGFyZW50LkEgfHwgc2libGluZ3NbMF0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZWNvbmRXYWxrKHYpIHtcbiAgICAgIHYuXy54ID0gdi56ICsgdi5wYXJlbnQubTtcbiAgICAgIHYubSArPSB2LnBhcmVudC5tO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcHBvcnRpb24odiwgdywgYW5jZXN0b3IpIHtcbiAgICAgIGlmICh3KSB7XG4gICAgICAgIHZhciB2aXAgPSB2LCB2b3AgPSB2LCB2aW0gPSB3LCB2b20gPSB2aXAucGFyZW50LmNoaWxkcmVuWzBdLCBzaXAgPSB2aXAubSwgc29wID0gdm9wLm0sIHNpbSA9IHZpbS5tLCBzb20gPSB2b20ubSwgc2hpZnQ7XG4gICAgICAgIHdoaWxlICh2aW0gPSBkM19sYXlvdXRfdHJlZVJpZ2h0KHZpbSksIHZpcCA9IGQzX2xheW91dF90cmVlTGVmdCh2aXApLCB2aW0gJiYgdmlwKSB7XG4gICAgICAgICAgdm9tID0gZDNfbGF5b3V0X3RyZWVMZWZ0KHZvbSk7XG4gICAgICAgICAgdm9wID0gZDNfbGF5b3V0X3RyZWVSaWdodCh2b3ApO1xuICAgICAgICAgIHZvcC5hID0gdjtcbiAgICAgICAgICBzaGlmdCA9IHZpbS56ICsgc2ltIC0gdmlwLnogLSBzaXAgKyBzZXBhcmF0aW9uKHZpbS5fLCB2aXAuXyk7XG4gICAgICAgICAgaWYgKHNoaWZ0ID4gMCkge1xuICAgICAgICAgICAgZDNfbGF5b3V0X3RyZWVNb3ZlKGQzX2xheW91dF90cmVlQW5jZXN0b3IodmltLCB2LCBhbmNlc3RvciksIHYsIHNoaWZ0KTtcbiAgICAgICAgICAgIHNpcCArPSBzaGlmdDtcbiAgICAgICAgICAgIHNvcCArPSBzaGlmdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2ltICs9IHZpbS5tO1xuICAgICAgICAgIHNpcCArPSB2aXAubTtcbiAgICAgICAgICBzb20gKz0gdm9tLm07XG4gICAgICAgICAgc29wICs9IHZvcC5tO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2aW0gJiYgIWQzX2xheW91dF90cmVlUmlnaHQodm9wKSkge1xuICAgICAgICAgIHZvcC50ID0gdmltO1xuICAgICAgICAgIHZvcC5tICs9IHNpbSAtIHNvcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmlwICYmICFkM19sYXlvdXRfdHJlZUxlZnQodm9tKSkge1xuICAgICAgICAgIHZvbS50ID0gdmlwO1xuICAgICAgICAgIHZvbS5tICs9IHNpcCAtIHNvbTtcbiAgICAgICAgICBhbmNlc3RvciA9IHY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhbmNlc3RvcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2l6ZU5vZGUobm9kZSkge1xuICAgICAgbm9kZS54ICo9IHNpemVbMF07XG4gICAgICBub2RlLnkgPSBub2RlLmRlcHRoICogc2l6ZVsxXTtcbiAgICB9XG4gICAgdHJlZS5zZXBhcmF0aW9uID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2VwYXJhdGlvbjtcbiAgICAgIHNlcGFyYXRpb24gPSB4O1xuICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfTtcbiAgICB0cmVlLnNpemUgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBub2RlU2l6ZSA/IG51bGwgOiBzaXplO1xuICAgICAgbm9kZVNpemUgPSAoc2l6ZSA9IHgpID09IG51bGwgPyBzaXplTm9kZSA6IG51bGw7XG4gICAgICByZXR1cm4gdHJlZTtcbiAgICB9O1xuICAgIHRyZWUubm9kZVNpemUgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBub2RlU2l6ZSA/IHNpemUgOiBudWxsO1xuICAgICAgbm9kZVNpemUgPSAoc2l6ZSA9IHgpID09IG51bGwgPyBudWxsIDogc2l6ZU5vZGU7XG4gICAgICByZXR1cm4gdHJlZTtcbiAgICB9O1xuICAgIHJldHVybiBkM19sYXlvdXRfaGllcmFyY2h5UmViaW5kKHRyZWUsIGhpZXJhcmNoeSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX2xheW91dF90cmVlU2VwYXJhdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEucGFyZW50ID09IGIucGFyZW50ID8gMSA6IDI7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3RyZWVMZWZ0KHYpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSB2LmNoaWxkcmVuO1xuICAgIHJldHVybiBjaGlsZHJlbi5sZW5ndGggPyBjaGlsZHJlblswXSA6IHYudDtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfdHJlZVJpZ2h0KHYpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSB2LmNoaWxkcmVuLCBuO1xuICAgIHJldHVybiAobiA9IGNoaWxkcmVuLmxlbmd0aCkgPyBjaGlsZHJlbltuIC0gMV0gOiB2LnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3RyZWVNb3ZlKHdtLCB3cCwgc2hpZnQpIHtcbiAgICB2YXIgY2hhbmdlID0gc2hpZnQgLyAod3AuaSAtIHdtLmkpO1xuICAgIHdwLmMgLT0gY2hhbmdlO1xuICAgIHdwLnMgKz0gc2hpZnQ7XG4gICAgd20uYyArPSBjaGFuZ2U7XG4gICAgd3AueiArPSBzaGlmdDtcbiAgICB3cC5tICs9IHNoaWZ0O1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF90cmVlU2hpZnQodikge1xuICAgIHZhciBzaGlmdCA9IDAsIGNoYW5nZSA9IDAsIGNoaWxkcmVuID0gdi5jaGlsZHJlbiwgaSA9IGNoaWxkcmVuLmxlbmd0aCwgdztcbiAgICB3aGlsZSAoLS1pID49IDApIHtcbiAgICAgIHcgPSBjaGlsZHJlbltpXTtcbiAgICAgIHcueiArPSBzaGlmdDtcbiAgICAgIHcubSArPSBzaGlmdDtcbiAgICAgIHNoaWZ0ICs9IHcucyArIChjaGFuZ2UgKz0gdy5jKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3RyZWVBbmNlc3Rvcih2aW0sIHYsIGFuY2VzdG9yKSB7XG4gICAgcmV0dXJuIHZpbS5hLnBhcmVudCA9PT0gdi5wYXJlbnQgPyB2aW0uYSA6IGFuY2VzdG9yO1xuICB9XG4gIGQzLmxheW91dC5jbHVzdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhpZXJhcmNoeSA9IGQzLmxheW91dC5oaWVyYXJjaHkoKS5zb3J0KG51bGwpLnZhbHVlKG51bGwpLCBzZXBhcmF0aW9uID0gZDNfbGF5b3V0X3RyZWVTZXBhcmF0aW9uLCBzaXplID0gWyAxLCAxIF0sIG5vZGVTaXplID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gY2x1c3RlcihkLCBpKSB7XG4gICAgICB2YXIgbm9kZXMgPSBoaWVyYXJjaHkuY2FsbCh0aGlzLCBkLCBpKSwgcm9vdCA9IG5vZGVzWzBdLCBwcmV2aW91c05vZGUsIHggPSAwO1xuICAgICAgZDNfbGF5b3V0X2hpZXJhcmNoeVZpc2l0QWZ0ZXIocm9vdCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgbm9kZS54ID0gZDNfbGF5b3V0X2NsdXN0ZXJYKGNoaWxkcmVuKTtcbiAgICAgICAgICBub2RlLnkgPSBkM19sYXlvdXRfY2x1c3RlclkoY2hpbGRyZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUueCA9IHByZXZpb3VzTm9kZSA/IHggKz0gc2VwYXJhdGlvbihub2RlLCBwcmV2aW91c05vZGUpIDogMDtcbiAgICAgICAgICBub2RlLnkgPSAwO1xuICAgICAgICAgIHByZXZpb3VzTm9kZSA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIGxlZnQgPSBkM19sYXlvdXRfY2x1c3RlckxlZnQocm9vdCksIHJpZ2h0ID0gZDNfbGF5b3V0X2NsdXN0ZXJSaWdodChyb290KSwgeDAgPSBsZWZ0LnggLSBzZXBhcmF0aW9uKGxlZnQsIHJpZ2h0KSAvIDIsIHgxID0gcmlnaHQueCArIHNlcGFyYXRpb24ocmlnaHQsIGxlZnQpIC8gMjtcbiAgICAgIGQzX2xheW91dF9oaWVyYXJjaHlWaXNpdEFmdGVyKHJvb3QsIG5vZGVTaXplID8gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBub2RlLnggPSAobm9kZS54IC0gcm9vdC54KSAqIHNpemVbMF07XG4gICAgICAgIG5vZGUueSA9IChyb290LnkgLSBub2RlLnkpICogc2l6ZVsxXTtcbiAgICAgIH0gOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIG5vZGUueCA9IChub2RlLnggLSB4MCkgLyAoeDEgLSB4MCkgKiBzaXplWzBdO1xuICAgICAgICBub2RlLnkgPSAoMSAtIChyb290LnkgPyBub2RlLnkgLyByb290LnkgOiAxKSkgKiBzaXplWzFdO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICAgIGNsdXN0ZXIuc2VwYXJhdGlvbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNlcGFyYXRpb247XG4gICAgICBzZXBhcmF0aW9uID0geDtcbiAgICAgIHJldHVybiBjbHVzdGVyO1xuICAgIH07XG4gICAgY2x1c3Rlci5zaXplID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbm9kZVNpemUgPyBudWxsIDogc2l6ZTtcbiAgICAgIG5vZGVTaXplID0gKHNpemUgPSB4KSA9PSBudWxsO1xuICAgICAgcmV0dXJuIGNsdXN0ZXI7XG4gICAgfTtcbiAgICBjbHVzdGVyLm5vZGVTaXplID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbm9kZVNpemUgPyBzaXplIDogbnVsbDtcbiAgICAgIG5vZGVTaXplID0gKHNpemUgPSB4KSAhPSBudWxsO1xuICAgICAgcmV0dXJuIGNsdXN0ZXI7XG4gICAgfTtcbiAgICByZXR1cm4gZDNfbGF5b3V0X2hpZXJhcmNoeVJlYmluZChjbHVzdGVyLCBoaWVyYXJjaHkpO1xuICB9O1xuICBmdW5jdGlvbiBkM19sYXlvdXRfY2x1c3RlclkoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gMSArIGQzLm1heChjaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgIHJldHVybiBjaGlsZC55O1xuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9jbHVzdGVyWChjaGlsZHJlbikge1xuICAgIHJldHVybiBjaGlsZHJlbi5yZWR1Y2UoZnVuY3Rpb24oeCwgY2hpbGQpIHtcbiAgICAgIHJldHVybiB4ICsgY2hpbGQueDtcbiAgICB9LCAwKSAvIGNoaWxkcmVuLmxlbmd0aDtcbiAgfVxuICBmdW5jdGlvbiBkM19sYXlvdXRfY2x1c3RlckxlZnQobm9kZSkge1xuICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XG4gICAgcmV0dXJuIGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA/IGQzX2xheW91dF9jbHVzdGVyTGVmdChjaGlsZHJlblswXSkgOiBub2RlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX2xheW91dF9jbHVzdGVyUmlnaHQobm9kZSkge1xuICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4sIG47XG4gICAgcmV0dXJuIGNoaWxkcmVuICYmIChuID0gY2hpbGRyZW4ubGVuZ3RoKSA/IGQzX2xheW91dF9jbHVzdGVyUmlnaHQoY2hpbGRyZW5bbiAtIDFdKSA6IG5vZGU7XG4gIH1cbiAgZDMubGF5b3V0LnRyZWVtYXAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGllcmFyY2h5ID0gZDMubGF5b3V0LmhpZXJhcmNoeSgpLCByb3VuZCA9IE1hdGgucm91bmQsIHNpemUgPSBbIDEsIDEgXSwgcGFkZGluZyA9IG51bGwsIHBhZCA9IGQzX2xheW91dF90cmVlbWFwUGFkTnVsbCwgc3RpY2t5ID0gZmFsc2UsIHN0aWNraWVzLCBtb2RlID0gXCJzcXVhcmlmeVwiLCByYXRpbyA9IC41ICogKDEgKyBNYXRoLnNxcnQoNSkpO1xuICAgIGZ1bmN0aW9uIHNjYWxlKGNoaWxkcmVuLCBrKSB7XG4gICAgICB2YXIgaSA9IC0xLCBuID0gY2hpbGRyZW4ubGVuZ3RoLCBjaGlsZCwgYXJlYTtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgIGFyZWEgPSAoY2hpbGQgPSBjaGlsZHJlbltpXSkudmFsdWUgKiAoayA8IDAgPyAwIDogayk7XG4gICAgICAgIGNoaWxkLmFyZWEgPSBpc05hTihhcmVhKSB8fCBhcmVhIDw9IDAgPyAwIDogYXJlYTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3F1YXJpZnkobm9kZSkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHJlY3QgPSBwYWQobm9kZSksIHJvdyA9IFtdLCByZW1haW5pbmcgPSBjaGlsZHJlbi5zbGljZSgpLCBjaGlsZCwgYmVzdCA9IEluZmluaXR5LCBzY29yZSwgdSA9IG1vZGUgPT09IFwic2xpY2VcIiA/IHJlY3QuZHggOiBtb2RlID09PSBcImRpY2VcIiA/IHJlY3QuZHkgOiBtb2RlID09PSBcInNsaWNlLWRpY2VcIiA/IG5vZGUuZGVwdGggJiAxID8gcmVjdC5keSA6IHJlY3QuZHggOiBNYXRoLm1pbihyZWN0LmR4LCByZWN0LmR5KSwgbjtcbiAgICAgICAgc2NhbGUocmVtYWluaW5nLCByZWN0LmR4ICogcmVjdC5keSAvIG5vZGUudmFsdWUpO1xuICAgICAgICByb3cuYXJlYSA9IDA7XG4gICAgICAgIHdoaWxlICgobiA9IHJlbWFpbmluZy5sZW5ndGgpID4gMCkge1xuICAgICAgICAgIHJvdy5wdXNoKGNoaWxkID0gcmVtYWluaW5nW24gLSAxXSk7XG4gICAgICAgICAgcm93LmFyZWEgKz0gY2hpbGQuYXJlYTtcbiAgICAgICAgICBpZiAobW9kZSAhPT0gXCJzcXVhcmlmeVwiIHx8IChzY29yZSA9IHdvcnN0KHJvdywgdSkpIDw9IGJlc3QpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZy5wb3AoKTtcbiAgICAgICAgICAgIGJlc3QgPSBzY29yZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm93LmFyZWEgLT0gcm93LnBvcCgpLmFyZWE7XG4gICAgICAgICAgICBwb3NpdGlvbihyb3csIHUsIHJlY3QsIGZhbHNlKTtcbiAgICAgICAgICAgIHUgPSBNYXRoLm1pbihyZWN0LmR4LCByZWN0LmR5KTtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSByb3cuYXJlYSA9IDA7XG4gICAgICAgICAgICBiZXN0ID0gSW5maW5pdHk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyb3cubGVuZ3RoKSB7XG4gICAgICAgICAgcG9zaXRpb24ocm93LCB1LCByZWN0LCB0cnVlKTtcbiAgICAgICAgICByb3cubGVuZ3RoID0gcm93LmFyZWEgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goc3F1YXJpZnkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdGlja2lmeShub2RlKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xuICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICB2YXIgcmVjdCA9IHBhZChub2RlKSwgcmVtYWluaW5nID0gY2hpbGRyZW4uc2xpY2UoKSwgY2hpbGQsIHJvdyA9IFtdO1xuICAgICAgICBzY2FsZShyZW1haW5pbmcsIHJlY3QuZHggKiByZWN0LmR5IC8gbm9kZS52YWx1ZSk7XG4gICAgICAgIHJvdy5hcmVhID0gMDtcbiAgICAgICAgd2hpbGUgKGNoaWxkID0gcmVtYWluaW5nLnBvcCgpKSB7XG4gICAgICAgICAgcm93LnB1c2goY2hpbGQpO1xuICAgICAgICAgIHJvdy5hcmVhICs9IGNoaWxkLmFyZWE7XG4gICAgICAgICAgaWYgKGNoaWxkLnogIT0gbnVsbCkge1xuICAgICAgICAgICAgcG9zaXRpb24ocm93LCBjaGlsZC56ID8gcmVjdC5keCA6IHJlY3QuZHksIHJlY3QsICFyZW1haW5pbmcubGVuZ3RoKTtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSByb3cuYXJlYSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goc3RpY2tpZnkpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB3b3JzdChyb3csIHUpIHtcbiAgICAgIHZhciBzID0gcm93LmFyZWEsIHIsIHJtYXggPSAwLCBybWluID0gSW5maW5pdHksIGkgPSAtMSwgbiA9IHJvdy5sZW5ndGg7XG4gICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICBpZiAoIShyID0gcm93W2ldLmFyZWEpKSBjb250aW51ZTtcbiAgICAgICAgaWYgKHIgPCBybWluKSBybWluID0gcjtcbiAgICAgICAgaWYgKHIgPiBybWF4KSBybWF4ID0gcjtcbiAgICAgIH1cbiAgICAgIHMgKj0gcztcbiAgICAgIHUgKj0gdTtcbiAgICAgIHJldHVybiBzID8gTWF0aC5tYXgodSAqIHJtYXggKiByYXRpbyAvIHMsIHMgLyAodSAqIHJtaW4gKiByYXRpbykpIDogSW5maW5pdHk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvc2l0aW9uKHJvdywgdSwgcmVjdCwgZmx1c2gpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSByb3cubGVuZ3RoLCB4ID0gcmVjdC54LCB5ID0gcmVjdC55LCB2ID0gdSA/IHJvdW5kKHJvdy5hcmVhIC8gdSkgOiAwLCBvO1xuICAgICAgaWYgKHUgPT0gcmVjdC5keCkge1xuICAgICAgICBpZiAoZmx1c2ggfHwgdiA+IHJlY3QuZHkpIHYgPSByZWN0LmR5O1xuICAgICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICAgIG8gPSByb3dbaV07XG4gICAgICAgICAgby54ID0geDtcbiAgICAgICAgICBvLnkgPSB5O1xuICAgICAgICAgIG8uZHkgPSB2O1xuICAgICAgICAgIHggKz0gby5keCA9IE1hdGgubWluKHJlY3QueCArIHJlY3QuZHggLSB4LCB2ID8gcm91bmQoby5hcmVhIC8gdikgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICBvLnogPSB0cnVlO1xuICAgICAgICBvLmR4ICs9IHJlY3QueCArIHJlY3QuZHggLSB4O1xuICAgICAgICByZWN0LnkgKz0gdjtcbiAgICAgICAgcmVjdC5keSAtPSB2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZsdXNoIHx8IHYgPiByZWN0LmR4KSB2ID0gcmVjdC5keDtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICBvID0gcm93W2ldO1xuICAgICAgICAgIG8ueCA9IHg7XG4gICAgICAgICAgby55ID0geTtcbiAgICAgICAgICBvLmR4ID0gdjtcbiAgICAgICAgICB5ICs9IG8uZHkgPSBNYXRoLm1pbihyZWN0LnkgKyByZWN0LmR5IC0geSwgdiA/IHJvdW5kKG8uYXJlYSAvIHYpIDogMCk7XG4gICAgICAgIH1cbiAgICAgICAgby56ID0gZmFsc2U7XG4gICAgICAgIG8uZHkgKz0gcmVjdC55ICsgcmVjdC5keSAtIHk7XG4gICAgICAgIHJlY3QueCArPSB2O1xuICAgICAgICByZWN0LmR4IC09IHY7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyZWVtYXAoZCkge1xuICAgICAgdmFyIG5vZGVzID0gc3RpY2tpZXMgfHwgaGllcmFyY2h5KGQpLCByb290ID0gbm9kZXNbMF07XG4gICAgICByb290LnggPSByb290LnkgPSAwO1xuICAgICAgaWYgKHJvb3QudmFsdWUpIHJvb3QuZHggPSBzaXplWzBdLCByb290LmR5ID0gc2l6ZVsxXTsgZWxzZSByb290LmR4ID0gcm9vdC5keSA9IDA7XG4gICAgICBpZiAoc3RpY2tpZXMpIGhpZXJhcmNoeS5yZXZhbHVlKHJvb3QpO1xuICAgICAgc2NhbGUoWyByb290IF0sIHJvb3QuZHggKiByb290LmR5IC8gcm9vdC52YWx1ZSk7XG4gICAgICAoc3RpY2tpZXMgPyBzdGlja2lmeSA6IHNxdWFyaWZ5KShyb290KTtcbiAgICAgIGlmIChzdGlja3kpIHN0aWNraWVzID0gbm9kZXM7XG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICAgIHRyZWVtYXAuc2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNpemU7XG4gICAgICBzaXplID0geDtcbiAgICAgIHJldHVybiB0cmVlbWFwO1xuICAgIH07XG4gICAgdHJlZW1hcC5wYWRkaW5nID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcGFkZGluZztcbiAgICAgIGZ1bmN0aW9uIHBhZEZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgdmFyIHAgPSB4LmNhbGwodHJlZW1hcCwgbm9kZSwgbm9kZS5kZXB0aCk7XG4gICAgICAgIHJldHVybiBwID09IG51bGwgPyBkM19sYXlvdXRfdHJlZW1hcFBhZE51bGwobm9kZSkgOiBkM19sYXlvdXRfdHJlZW1hcFBhZChub2RlLCB0eXBlb2YgcCA9PT0gXCJudW1iZXJcIiA/IFsgcCwgcCwgcCwgcCBdIDogcCk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBwYWRDb25zdGFudChub2RlKSB7XG4gICAgICAgIHJldHVybiBkM19sYXlvdXRfdHJlZW1hcFBhZChub2RlLCB4KTtcbiAgICAgIH1cbiAgICAgIHZhciB0eXBlO1xuICAgICAgcGFkID0gKHBhZGRpbmcgPSB4KSA9PSBudWxsID8gZDNfbGF5b3V0X3RyZWVtYXBQYWROdWxsIDogKHR5cGUgPSB0eXBlb2YgeCkgPT09IFwiZnVuY3Rpb25cIiA/IHBhZEZ1bmN0aW9uIDogdHlwZSA9PT0gXCJudW1iZXJcIiA/ICh4ID0gWyB4LCB4LCB4LCB4IF0sIFxuICAgICAgcGFkQ29uc3RhbnQpIDogcGFkQ29uc3RhbnQ7XG4gICAgICByZXR1cm4gdHJlZW1hcDtcbiAgICB9O1xuICAgIHRyZWVtYXAucm91bmQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByb3VuZCAhPSBOdW1iZXI7XG4gICAgICByb3VuZCA9IHggPyBNYXRoLnJvdW5kIDogTnVtYmVyO1xuICAgICAgcmV0dXJuIHRyZWVtYXA7XG4gICAgfTtcbiAgICB0cmVlbWFwLnN0aWNreSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHN0aWNreTtcbiAgICAgIHN0aWNreSA9IHg7XG4gICAgICBzdGlja2llcyA9IG51bGw7XG4gICAgICByZXR1cm4gdHJlZW1hcDtcbiAgICB9O1xuICAgIHRyZWVtYXAucmF0aW8gPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByYXRpbztcbiAgICAgIHJhdGlvID0geDtcbiAgICAgIHJldHVybiB0cmVlbWFwO1xuICAgIH07XG4gICAgdHJlZW1hcC5tb2RlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbW9kZTtcbiAgICAgIG1vZGUgPSB4ICsgXCJcIjtcbiAgICAgIHJldHVybiB0cmVlbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIGQzX2xheW91dF9oaWVyYXJjaHlSZWJpbmQodHJlZW1hcCwgaGllcmFyY2h5KTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3RyZWVtYXBQYWROdWxsKG5vZGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogbm9kZS54LFxuICAgICAgeTogbm9kZS55LFxuICAgICAgZHg6IG5vZGUuZHgsXG4gICAgICBkeTogbm9kZS5keVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfbGF5b3V0X3RyZWVtYXBQYWQobm9kZSwgcGFkZGluZykge1xuICAgIHZhciB4ID0gbm9kZS54ICsgcGFkZGluZ1szXSwgeSA9IG5vZGUueSArIHBhZGRpbmdbMF0sIGR4ID0gbm9kZS5keCAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLCBkeSA9IG5vZGUuZHkgLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXTtcbiAgICBpZiAoZHggPCAwKSB7XG4gICAgICB4ICs9IGR4IC8gMjtcbiAgICAgIGR4ID0gMDtcbiAgICB9XG4gICAgaWYgKGR5IDwgMCkge1xuICAgICAgeSArPSBkeSAvIDI7XG4gICAgICBkeSA9IDA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB4OiB4LFxuICAgICAgeTogeSxcbiAgICAgIGR4OiBkeCxcbiAgICAgIGR5OiBkeVxuICAgIH07XG4gIH1cbiAgZDMucmFuZG9tID0ge1xuICAgIG5vcm1hbDogZnVuY3Rpb24owrUsIM+DKSB7XG4gICAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobiA8IDIpIM+DID0gMTtcbiAgICAgIGlmIChuIDwgMSkgwrUgPSAwO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeCwgeSwgcjtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHggPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7XG4gICAgICAgICAgeSA9IE1hdGgucmFuZG9tKCkgKiAyIC0gMTtcbiAgICAgICAgICByID0geCAqIHggKyB5ICogeTtcbiAgICAgICAgfSB3aGlsZSAoIXIgfHwgciA+IDEpO1xuICAgICAgICByZXR1cm4gwrUgKyDPgyAqIHggKiBNYXRoLnNxcnQoLTIgKiBNYXRoLmxvZyhyKSAvIHIpO1xuICAgICAgfTtcbiAgICB9LFxuICAgIGxvZ05vcm1hbDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmFuZG9tID0gZDMucmFuZG9tLm5vcm1hbC5hcHBseShkMywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZXhwKHJhbmRvbSgpKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBiYXRlczogZnVuY3Rpb24obSkge1xuICAgICAgdmFyIHJhbmRvbSA9IGQzLnJhbmRvbS5pcndpbkhhbGwobSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByYW5kb20oKSAvIG07XG4gICAgICB9O1xuICAgIH0sXG4gICAgaXJ3aW5IYWxsOiBmdW5jdGlvbihtKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIHMgPSAwLCBqID0gMDsgaiA8IG07IGorKykgcyArPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICByZXR1cm4gcztcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICBkMy5zY2FsZSA9IHt9O1xuICBmdW5jdGlvbiBkM19zY2FsZUV4dGVudChkb21haW4pIHtcbiAgICB2YXIgc3RhcnQgPSBkb21haW5bMF0sIHN0b3AgPSBkb21haW5bZG9tYWluLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBzdGFydCA8IHN0b3AgPyBbIHN0YXJ0LCBzdG9wIF0gOiBbIHN0b3AsIHN0YXJ0IF07XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2NhbGVSYW5nZShzY2FsZSkge1xuICAgIHJldHVybiBzY2FsZS5yYW5nZUV4dGVudCA/IHNjYWxlLnJhbmdlRXh0ZW50KCkgOiBkM19zY2FsZUV4dGVudChzY2FsZS5yYW5nZSgpKTtcbiAgfVxuICBmdW5jdGlvbiBkM19zY2FsZV9iaWxpbmVhcihkb21haW4sIHJhbmdlLCB1bmludGVycG9sYXRlLCBpbnRlcnBvbGF0ZSkge1xuICAgIHZhciB1ID0gdW5pbnRlcnBvbGF0ZShkb21haW5bMF0sIGRvbWFpblsxXSksIGkgPSBpbnRlcnBvbGF0ZShyYW5nZVswXSwgcmFuZ2VbMV0pO1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gaSh1KHgpKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX25pY2UoZG9tYWluLCBuaWNlKSB7XG4gICAgdmFyIGkwID0gMCwgaTEgPSBkb21haW4ubGVuZ3RoIC0gMSwgeDAgPSBkb21haW5baTBdLCB4MSA9IGRvbWFpbltpMV0sIGR4O1xuICAgIGlmICh4MSA8IHgwKSB7XG4gICAgICBkeCA9IGkwLCBpMCA9IGkxLCBpMSA9IGR4O1xuICAgICAgZHggPSB4MCwgeDAgPSB4MSwgeDEgPSBkeDtcbiAgICB9XG4gICAgZG9tYWluW2kwXSA9IG5pY2UuZmxvb3IoeDApO1xuICAgIGRvbWFpbltpMV0gPSBuaWNlLmNlaWwoeDEpO1xuICAgIHJldHVybiBkb21haW47XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2NhbGVfbmljZVN0ZXAoc3RlcCkge1xuICAgIHJldHVybiBzdGVwID8ge1xuICAgICAgZmxvb3I6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoeCAvIHN0ZXApICogc3RlcDtcbiAgICAgIH0sXG4gICAgICBjZWlsOiBmdW5jdGlvbih4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoeCAvIHN0ZXApICogc3RlcDtcbiAgICAgIH1cbiAgICB9IDogZDNfc2NhbGVfbmljZUlkZW50aXR5O1xuICB9XG4gIHZhciBkM19zY2FsZV9uaWNlSWRlbnRpdHkgPSB7XG4gICAgZmxvb3I6IGQzX2lkZW50aXR5LFxuICAgIGNlaWw6IGQzX2lkZW50aXR5XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX3BvbHlsaW5lYXIoZG9tYWluLCByYW5nZSwgdW5pbnRlcnBvbGF0ZSwgaW50ZXJwb2xhdGUpIHtcbiAgICB2YXIgdSA9IFtdLCBpID0gW10sIGogPSAwLCBrID0gTWF0aC5taW4oZG9tYWluLmxlbmd0aCwgcmFuZ2UubGVuZ3RoKSAtIDE7XG4gICAgaWYgKGRvbWFpbltrXSA8IGRvbWFpblswXSkge1xuICAgICAgZG9tYWluID0gZG9tYWluLnNsaWNlKCkucmV2ZXJzZSgpO1xuICAgICAgcmFuZ2UgPSByYW5nZS5zbGljZSgpLnJldmVyc2UoKTtcbiAgICB9XG4gICAgd2hpbGUgKCsraiA8PSBrKSB7XG4gICAgICB1LnB1c2godW5pbnRlcnBvbGF0ZShkb21haW5baiAtIDFdLCBkb21haW5bal0pKTtcbiAgICAgIGkucHVzaChpbnRlcnBvbGF0ZShyYW5nZVtqIC0gMV0sIHJhbmdlW2pdKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgaiA9IGQzLmJpc2VjdChkb21haW4sIHgsIDEsIGspIC0gMTtcbiAgICAgIHJldHVybiBpW2pdKHVbal0oeCkpO1xuICAgIH07XG4gIH1cbiAgZDMuc2NhbGUubGluZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NjYWxlX2xpbmVhcihbIDAsIDEgXSwgWyAwLCAxIF0sIGQzX2ludGVycG9sYXRlLCBmYWxzZSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhcihkb21haW4sIHJhbmdlLCBpbnRlcnBvbGF0ZSwgY2xhbXApIHtcbiAgICB2YXIgb3V0cHV0LCBpbnB1dDtcbiAgICBmdW5jdGlvbiByZXNjYWxlKCkge1xuICAgICAgdmFyIGxpbmVhciA9IE1hdGgubWluKGRvbWFpbi5sZW5ndGgsIHJhbmdlLmxlbmd0aCkgPiAyID8gZDNfc2NhbGVfcG9seWxpbmVhciA6IGQzX3NjYWxlX2JpbGluZWFyLCB1bmludGVycG9sYXRlID0gY2xhbXAgPyBkM191bmludGVycG9sYXRlQ2xhbXAgOiBkM191bmludGVycG9sYXRlTnVtYmVyO1xuICAgICAgb3V0cHV0ID0gbGluZWFyKGRvbWFpbiwgcmFuZ2UsIHVuaW50ZXJwb2xhdGUsIGludGVycG9sYXRlKTtcbiAgICAgIGlucHV0ID0gbGluZWFyKHJhbmdlLCBkb21haW4sIHVuaW50ZXJwb2xhdGUsIGQzX2ludGVycG9sYXRlKTtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2NhbGUoeCkge1xuICAgICAgcmV0dXJuIG91dHB1dCh4KTtcbiAgICB9XG4gICAgc2NhbGUuaW52ZXJ0ID0gZnVuY3Rpb24oeSkge1xuICAgICAgcmV0dXJuIGlucHV0KHkpO1xuICAgIH07XG4gICAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZG9tYWluO1xuICAgICAgZG9tYWluID0geC5tYXAoTnVtYmVyKTtcbiAgICAgIHJldHVybiByZXNjYWxlKCk7XG4gICAgfTtcbiAgICBzY2FsZS5yYW5nZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJhbmdlO1xuICAgICAgcmFuZ2UgPSB4O1xuICAgICAgcmV0dXJuIHJlc2NhbGUoKTtcbiAgICB9O1xuICAgIHNjYWxlLnJhbmdlUm91bmQgPSBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gc2NhbGUucmFuZ2UoeCkuaW50ZXJwb2xhdGUoZDNfaW50ZXJwb2xhdGVSb3VuZCk7XG4gICAgfTtcbiAgICBzY2FsZS5jbGFtcCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNsYW1wO1xuICAgICAgY2xhbXAgPSB4O1xuICAgICAgcmV0dXJuIHJlc2NhbGUoKTtcbiAgICB9O1xuICAgIHNjYWxlLmludGVycG9sYXRlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaW50ZXJwb2xhdGU7XG4gICAgICBpbnRlcnBvbGF0ZSA9IHg7XG4gICAgICByZXR1cm4gcmVzY2FsZSgpO1xuICAgIH07XG4gICAgc2NhbGUudGlja3MgPSBmdW5jdGlvbihtKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfbGluZWFyVGlja3MoZG9tYWluLCBtKTtcbiAgICB9O1xuICAgIHNjYWxlLnRpY2tGb3JtYXQgPSBmdW5jdGlvbihtLCBmb3JtYXQpIHtcbiAgICAgIHJldHVybiBkM19zY2FsZV9saW5lYXJUaWNrRm9ybWF0KGRvbWFpbiwgbSwgZm9ybWF0KTtcbiAgICB9O1xuICAgIHNjYWxlLm5pY2UgPSBmdW5jdGlvbihtKSB7XG4gICAgICBkM19zY2FsZV9saW5lYXJOaWNlKGRvbWFpbiwgbSk7XG4gICAgICByZXR1cm4gcmVzY2FsZSgpO1xuICAgIH07XG4gICAgc2NhbGUuY29weSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGQzX3NjYWxlX2xpbmVhcihkb21haW4sIHJhbmdlLCBpbnRlcnBvbGF0ZSwgY2xhbXApO1xuICAgIH07XG4gICAgcmV0dXJuIHJlc2NhbGUoKTtcbiAgfVxuICBmdW5jdGlvbiBkM19zY2FsZV9saW5lYXJSZWJpbmQoc2NhbGUsIGxpbmVhcikge1xuICAgIHJldHVybiBkMy5yZWJpbmQoc2NhbGUsIGxpbmVhciwgXCJyYW5nZVwiLCBcInJhbmdlUm91bmRcIiwgXCJpbnRlcnBvbGF0ZVwiLCBcImNsYW1wXCIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhck5pY2UoZG9tYWluLCBtKSB7XG4gICAgZDNfc2NhbGVfbmljZShkb21haW4sIGQzX3NjYWxlX25pY2VTdGVwKGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShkb21haW4sIG0pWzJdKSk7XG4gICAgZDNfc2NhbGVfbmljZShkb21haW4sIGQzX3NjYWxlX25pY2VTdGVwKGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShkb21haW4sIG0pWzJdKSk7XG4gICAgcmV0dXJuIGRvbWFpbjtcbiAgfVxuICBmdW5jdGlvbiBkM19zY2FsZV9saW5lYXJUaWNrUmFuZ2UoZG9tYWluLCBtKSB7XG4gICAgaWYgKG0gPT0gbnVsbCkgbSA9IDEwO1xuICAgIHZhciBleHRlbnQgPSBkM19zY2FsZUV4dGVudChkb21haW4pLCBzcGFuID0gZXh0ZW50WzFdIC0gZXh0ZW50WzBdLCBzdGVwID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoTWF0aC5sb2coc3BhbiAvIG0pIC8gTWF0aC5MTjEwKSksIGVyciA9IG0gLyBzcGFuICogc3RlcDtcbiAgICBpZiAoZXJyIDw9IC4xNSkgc3RlcCAqPSAxMDsgZWxzZSBpZiAoZXJyIDw9IC4zNSkgc3RlcCAqPSA1OyBlbHNlIGlmIChlcnIgPD0gLjc1KSBzdGVwICo9IDI7XG4gICAgZXh0ZW50WzBdID0gTWF0aC5jZWlsKGV4dGVudFswXSAvIHN0ZXApICogc3RlcDtcbiAgICBleHRlbnRbMV0gPSBNYXRoLmZsb29yKGV4dGVudFsxXSAvIHN0ZXApICogc3RlcCArIHN0ZXAgKiAuNTtcbiAgICBleHRlbnRbMl0gPSBzdGVwO1xuICAgIHJldHVybiBleHRlbnQ7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2NhbGVfbGluZWFyVGlja3MoZG9tYWluLCBtKSB7XG4gICAgcmV0dXJuIGQzLnJhbmdlLmFwcGx5KGQzLCBkM19zY2FsZV9saW5lYXJUaWNrUmFuZ2UoZG9tYWluLCBtKSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc2NhbGVfbGluZWFyVGlja0Zvcm1hdChkb21haW4sIG0sIGZvcm1hdCkge1xuICAgIHZhciByYW5nZSA9IGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShkb21haW4sIG0pO1xuICAgIGlmIChmb3JtYXQpIHtcbiAgICAgIHZhciBtYXRjaCA9IGQzX2Zvcm1hdF9yZS5leGVjKGZvcm1hdCk7XG4gICAgICBtYXRjaC5zaGlmdCgpO1xuICAgICAgaWYgKG1hdGNoWzhdID09PSBcInNcIikge1xuICAgICAgICB2YXIgcHJlZml4ID0gZDMuZm9ybWF0UHJlZml4KE1hdGgubWF4KGFicyhyYW5nZVswXSksIGFicyhyYW5nZVsxXSkpKTtcbiAgICAgICAgaWYgKCFtYXRjaFs3XSkgbWF0Y2hbN10gPSBcIi5cIiArIGQzX3NjYWxlX2xpbmVhclByZWNpc2lvbihwcmVmaXguc2NhbGUocmFuZ2VbMl0pKTtcbiAgICAgICAgbWF0Y2hbOF0gPSBcImZcIjtcbiAgICAgICAgZm9ybWF0ID0gZDMuZm9ybWF0KG1hdGNoLmpvaW4oXCJcIikpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBmb3JtYXQocHJlZml4LnNjYWxlKGQpKSArIHByZWZpeC5zeW1ib2w7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoIW1hdGNoWzddKSBtYXRjaFs3XSA9IFwiLlwiICsgZDNfc2NhbGVfbGluZWFyRm9ybWF0UHJlY2lzaW9uKG1hdGNoWzhdLCByYW5nZSk7XG4gICAgICBmb3JtYXQgPSBtYXRjaC5qb2luKFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtYXQgPSBcIiwuXCIgKyBkM19zY2FsZV9saW5lYXJQcmVjaXNpb24ocmFuZ2VbMl0pICsgXCJmXCI7XG4gICAgfVxuICAgIHJldHVybiBkMy5mb3JtYXQoZm9ybWF0KTtcbiAgfVxuICB2YXIgZDNfc2NhbGVfbGluZWFyRm9ybWF0U2lnbmlmaWNhbnQgPSB7XG4gICAgczogMSxcbiAgICBnOiAxLFxuICAgIHA6IDEsXG4gICAgcjogMSxcbiAgICBlOiAxXG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhclByZWNpc2lvbih2YWx1ZSkge1xuICAgIHJldHVybiAtTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMTAgKyAuMDEpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhckZvcm1hdFByZWNpc2lvbih0eXBlLCByYW5nZSkge1xuICAgIHZhciBwID0gZDNfc2NhbGVfbGluZWFyUHJlY2lzaW9uKHJhbmdlWzJdKTtcbiAgICByZXR1cm4gdHlwZSBpbiBkM19zY2FsZV9saW5lYXJGb3JtYXRTaWduaWZpY2FudCA/IE1hdGguYWJzKHAgLSBkM19zY2FsZV9saW5lYXJQcmVjaXNpb24oTWF0aC5tYXgoYWJzKHJhbmdlWzBdKSwgYWJzKHJhbmdlWzFdKSkpKSArICsodHlwZSAhPT0gXCJlXCIpIDogcCAtICh0eXBlID09PSBcIiVcIikgKiAyO1xuICB9XG4gIGQzLnNjYWxlLmxvZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zY2FsZV9sb2coZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFsgMCwgMSBdKSwgMTAsIHRydWUsIFsgMSwgMTAgXSk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3NjYWxlX2xvZyhsaW5lYXIsIGJhc2UsIHBvc2l0aXZlLCBkb21haW4pIHtcbiAgICBmdW5jdGlvbiBsb2coeCkge1xuICAgICAgcmV0dXJuIChwb3NpdGl2ZSA/IE1hdGgubG9nKHggPCAwID8gMCA6IHgpIDogLU1hdGgubG9nKHggPiAwID8gMCA6IC14KSkgLyBNYXRoLmxvZyhiYXNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG93KHgpIHtcbiAgICAgIHJldHVybiBwb3NpdGl2ZSA/IE1hdGgucG93KGJhc2UsIHgpIDogLU1hdGgucG93KGJhc2UsIC14KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2NhbGUoeCkge1xuICAgICAgcmV0dXJuIGxpbmVhcihsb2coeCkpO1xuICAgIH1cbiAgICBzY2FsZS5pbnZlcnQgPSBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gcG93KGxpbmVhci5pbnZlcnQoeCkpO1xuICAgIH07XG4gICAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZG9tYWluO1xuICAgICAgcG9zaXRpdmUgPSB4WzBdID49IDA7XG4gICAgICBsaW5lYXIuZG9tYWluKChkb21haW4gPSB4Lm1hcChOdW1iZXIpKS5tYXAobG9nKSk7XG4gICAgICByZXR1cm4gc2NhbGU7XG4gICAgfTtcbiAgICBzY2FsZS5iYXNlID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gYmFzZTtcbiAgICAgIGJhc2UgPSArXztcbiAgICAgIGxpbmVhci5kb21haW4oZG9tYWluLm1hcChsb2cpKTtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9O1xuICAgIHNjYWxlLm5pY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuaWNlZCA9IGQzX3NjYWxlX25pY2UoZG9tYWluLm1hcChsb2cpLCBwb3NpdGl2ZSA/IE1hdGggOiBkM19zY2FsZV9sb2dOaWNlTmVnYXRpdmUpO1xuICAgICAgbGluZWFyLmRvbWFpbihuaWNlZCk7XG4gICAgICBkb21haW4gPSBuaWNlZC5tYXAocG93KTtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9O1xuICAgIHNjYWxlLnRpY2tzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZXh0ZW50ID0gZDNfc2NhbGVFeHRlbnQoZG9tYWluKSwgdGlja3MgPSBbXSwgdSA9IGV4dGVudFswXSwgdiA9IGV4dGVudFsxXSwgaSA9IE1hdGguZmxvb3IobG9nKHUpKSwgaiA9IE1hdGguY2VpbChsb2codikpLCBuID0gYmFzZSAlIDEgPyAyIDogYmFzZTtcbiAgICAgIGlmIChpc0Zpbml0ZShqIC0gaSkpIHtcbiAgICAgICAgaWYgKHBvc2l0aXZlKSB7XG4gICAgICAgICAgZm9yICg7aSA8IGo7IGkrKykgZm9yICh2YXIgayA9IDE7IGsgPCBuOyBrKyspIHRpY2tzLnB1c2gocG93KGkpICogayk7XG4gICAgICAgICAgdGlja3MucHVzaChwb3coaSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpY2tzLnB1c2gocG93KGkpKTtcbiAgICAgICAgICBmb3IgKDtpKysgPCBqOyApIGZvciAodmFyIGsgPSBuIC0gMTsgayA+IDA7IGstLSkgdGlja3MucHVzaChwb3coaSkgKiBrKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyB0aWNrc1tpXSA8IHU7IGkrKykge31cbiAgICAgICAgZm9yIChqID0gdGlja3MubGVuZ3RoOyB0aWNrc1tqIC0gMV0gPiB2OyBqLS0pIHt9XG4gICAgICAgIHRpY2tzID0gdGlja3Muc2xpY2UoaSwgaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGlja3M7XG4gICAgfTtcbiAgICBzY2FsZS50aWNrRm9ybWF0ID0gZnVuY3Rpb24obiwgZm9ybWF0KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkM19zY2FsZV9sb2dGb3JtYXQ7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIGZvcm1hdCA9IGQzX3NjYWxlX2xvZ0Zvcm1hdDsgZWxzZSBpZiAodHlwZW9mIGZvcm1hdCAhPT0gXCJmdW5jdGlvblwiKSBmb3JtYXQgPSBkMy5mb3JtYXQoZm9ybWF0KTtcbiAgICAgIHZhciBrID0gTWF0aC5tYXgoMSwgYmFzZSAqIG4gLyBzY2FsZS50aWNrcygpLmxlbmd0aCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaSA9IGQgLyBwb3coTWF0aC5yb3VuZChsb2coZCkpKTtcbiAgICAgICAgaWYgKGkgKiBiYXNlIDwgYmFzZSAtIC41KSBpICo9IGJhc2U7XG4gICAgICAgIHJldHVybiBpIDw9IGsgPyBmb3JtYXQoZCkgOiBcIlwiO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19zY2FsZV9sb2cobGluZWFyLmNvcHkoKSwgYmFzZSwgcG9zaXRpdmUsIGRvbWFpbik7XG4gICAgfTtcbiAgICByZXR1cm4gZDNfc2NhbGVfbGluZWFyUmViaW5kKHNjYWxlLCBsaW5lYXIpO1xuICB9XG4gIHZhciBkM19zY2FsZV9sb2dGb3JtYXQgPSBkMy5mb3JtYXQoXCIuMGVcIiksIGQzX3NjYWxlX2xvZ05pY2VOZWdhdGl2ZSA9IHtcbiAgICBmbG9vcjogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIC1NYXRoLmNlaWwoLXgpO1xuICAgIH0sXG4gICAgY2VpbDogZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIC1NYXRoLmZsb29yKC14KTtcbiAgICB9XG4gIH07XG4gIGQzLnNjYWxlLnBvdyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zY2FsZV9wb3coZDMuc2NhbGUubGluZWFyKCksIDEsIFsgMCwgMSBdKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2NhbGVfcG93KGxpbmVhciwgZXhwb25lbnQsIGRvbWFpbikge1xuICAgIHZhciBwb3dwID0gZDNfc2NhbGVfcG93UG93KGV4cG9uZW50KSwgcG93YiA9IGQzX3NjYWxlX3Bvd1BvdygxIC8gZXhwb25lbnQpO1xuICAgIGZ1bmN0aW9uIHNjYWxlKHgpIHtcbiAgICAgIHJldHVybiBsaW5lYXIocG93cCh4KSk7XG4gICAgfVxuICAgIHNjYWxlLmludmVydCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBwb3diKGxpbmVhci5pbnZlcnQoeCkpO1xuICAgIH07XG4gICAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZG9tYWluO1xuICAgICAgbGluZWFyLmRvbWFpbigoZG9tYWluID0geC5tYXAoTnVtYmVyKSkubWFwKHBvd3ApKTtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9O1xuICAgIHNjYWxlLnRpY2tzID0gZnVuY3Rpb24obSkge1xuICAgICAgcmV0dXJuIGQzX3NjYWxlX2xpbmVhclRpY2tzKGRvbWFpbiwgbSk7XG4gICAgfTtcbiAgICBzY2FsZS50aWNrRm9ybWF0ID0gZnVuY3Rpb24obSwgZm9ybWF0KSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfbGluZWFyVGlja0Zvcm1hdChkb21haW4sIG0sIGZvcm1hdCk7XG4gICAgfTtcbiAgICBzY2FsZS5uaWNlID0gZnVuY3Rpb24obSkge1xuICAgICAgcmV0dXJuIHNjYWxlLmRvbWFpbihkM19zY2FsZV9saW5lYXJOaWNlKGRvbWFpbiwgbSkpO1xuICAgIH07XG4gICAgc2NhbGUuZXhwb25lbnQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBleHBvbmVudDtcbiAgICAgIHBvd3AgPSBkM19zY2FsZV9wb3dQb3coZXhwb25lbnQgPSB4KTtcbiAgICAgIHBvd2IgPSBkM19zY2FsZV9wb3dQb3coMSAvIGV4cG9uZW50KTtcbiAgICAgIGxpbmVhci5kb21haW4oZG9tYWluLm1hcChwb3dwKSk7XG4gICAgICByZXR1cm4gc2NhbGU7XG4gICAgfTtcbiAgICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfcG93KGxpbmVhci5jb3B5KCksIGV4cG9uZW50LCBkb21haW4pO1xuICAgIH07XG4gICAgcmV0dXJuIGQzX3NjYWxlX2xpbmVhclJlYmluZChzY2FsZSwgbGluZWFyKTtcbiAgfVxuICBmdW5jdGlvbiBkM19zY2FsZV9wb3dQb3coZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4geCA8IDAgPyAtTWF0aC5wb3coLXgsIGUpIDogTWF0aC5wb3coeCwgZSk7XG4gICAgfTtcbiAgfVxuICBkMy5zY2FsZS5zcXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzLnNjYWxlLnBvdygpLmV4cG9uZW50KC41KTtcbiAgfTtcbiAgZDMuc2NhbGUub3JkaW5hbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zY2FsZV9vcmRpbmFsKFtdLCB7XG4gICAgICB0OiBcInJhbmdlXCIsXG4gICAgICBhOiBbIFtdIF1cbiAgICB9KTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2NhbGVfb3JkaW5hbChkb21haW4sIHJhbmdlcikge1xuICAgIHZhciBpbmRleCwgcmFuZ2UsIHJhbmdlQmFuZDtcbiAgICBmdW5jdGlvbiBzY2FsZSh4KSB7XG4gICAgICByZXR1cm4gcmFuZ2VbKChpbmRleC5nZXQoeCkgfHwgKHJhbmdlci50ID09PSBcInJhbmdlXCIgPyBpbmRleC5zZXQoeCwgZG9tYWluLnB1c2goeCkpIDogTmFOKSkgLSAxKSAlIHJhbmdlLmxlbmd0aF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0ZXBzKHN0YXJ0LCBzdGVwKSB7XG4gICAgICByZXR1cm4gZDMucmFuZ2UoZG9tYWluLmxlbmd0aCkubWFwKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgc3RlcCAqIGk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZG9tYWluO1xuICAgICAgZG9tYWluID0gW107XG4gICAgICBpbmRleCA9IG5ldyBkM19NYXAoKTtcbiAgICAgIHZhciBpID0gLTEsIG4gPSB4Lmxlbmd0aCwgeGk7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFpbmRleC5oYXMoeGkgPSB4W2ldKSkgaW5kZXguc2V0KHhpLCBkb21haW4ucHVzaCh4aSkpO1xuICAgICAgcmV0dXJuIHNjYWxlW3Jhbmdlci50XS5hcHBseShzY2FsZSwgcmFuZ2VyLmEpO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByYW5nZTtcbiAgICAgIHJhbmdlID0geDtcbiAgICAgIHJhbmdlQmFuZCA9IDA7XG4gICAgICByYW5nZXIgPSB7XG4gICAgICAgIHQ6IFwicmFuZ2VcIixcbiAgICAgICAgYTogYXJndW1lbnRzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2VQb2ludHMgPSBmdW5jdGlvbih4LCBwYWRkaW5nKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHBhZGRpbmcgPSAwO1xuICAgICAgdmFyIHN0YXJ0ID0geFswXSwgc3RvcCA9IHhbMV0sIHN0ZXAgPSBkb21haW4ubGVuZ3RoIDwgMiA/IChzdGFydCA9IChzdGFydCArIHN0b3ApIC8gMiwgXG4gICAgICAwKSA6IChzdG9wIC0gc3RhcnQpIC8gKGRvbWFpbi5sZW5ndGggLSAxICsgcGFkZGluZyk7XG4gICAgICByYW5nZSA9IHN0ZXBzKHN0YXJ0ICsgc3RlcCAqIHBhZGRpbmcgLyAyLCBzdGVwKTtcbiAgICAgIHJhbmdlQmFuZCA9IDA7XG4gICAgICByYW5nZXIgPSB7XG4gICAgICAgIHQ6IFwicmFuZ2VQb2ludHNcIixcbiAgICAgICAgYTogYXJndW1lbnRzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2VSb3VuZFBvaW50cyA9IGZ1bmN0aW9uKHgsIHBhZGRpbmcpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcGFkZGluZyA9IDA7XG4gICAgICB2YXIgc3RhcnQgPSB4WzBdLCBzdG9wID0geFsxXSwgc3RlcCA9IGRvbWFpbi5sZW5ndGggPCAyID8gKHN0YXJ0ID0gc3RvcCA9IE1hdGgucm91bmQoKHN0YXJ0ICsgc3RvcCkgLyAyKSwgXG4gICAgICAwKSA6IChzdG9wIC0gc3RhcnQpIC8gKGRvbWFpbi5sZW5ndGggLSAxICsgcGFkZGluZykgfCAwO1xuICAgICAgcmFuZ2UgPSBzdGVwcyhzdGFydCArIE1hdGgucm91bmQoc3RlcCAqIHBhZGRpbmcgLyAyICsgKHN0b3AgLSBzdGFydCAtIChkb21haW4ubGVuZ3RoIC0gMSArIHBhZGRpbmcpICogc3RlcCkgLyAyKSwgc3RlcCk7XG4gICAgICByYW5nZUJhbmQgPSAwO1xuICAgICAgcmFuZ2VyID0ge1xuICAgICAgICB0OiBcInJhbmdlUm91bmRQb2ludHNcIixcbiAgICAgICAgYTogYXJndW1lbnRzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2VCYW5kcyA9IGZ1bmN0aW9uKHgsIHBhZGRpbmcsIG91dGVyUGFkZGluZykge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSBwYWRkaW5nID0gMDtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgb3V0ZXJQYWRkaW5nID0gcGFkZGluZztcbiAgICAgIHZhciByZXZlcnNlID0geFsxXSA8IHhbMF0sIHN0YXJ0ID0geFtyZXZlcnNlIC0gMF0sIHN0b3AgPSB4WzEgLSByZXZlcnNlXSwgc3RlcCA9IChzdG9wIC0gc3RhcnQpIC8gKGRvbWFpbi5sZW5ndGggLSBwYWRkaW5nICsgMiAqIG91dGVyUGFkZGluZyk7XG4gICAgICByYW5nZSA9IHN0ZXBzKHN0YXJ0ICsgc3RlcCAqIG91dGVyUGFkZGluZywgc3RlcCk7XG4gICAgICBpZiAocmV2ZXJzZSkgcmFuZ2UucmV2ZXJzZSgpO1xuICAgICAgcmFuZ2VCYW5kID0gc3RlcCAqICgxIC0gcGFkZGluZyk7XG4gICAgICByYW5nZXIgPSB7XG4gICAgICAgIHQ6IFwicmFuZ2VCYW5kc1wiLFxuICAgICAgICBhOiBhcmd1bWVudHNcbiAgICAgIH07XG4gICAgICByZXR1cm4gc2NhbGU7XG4gICAgfTtcbiAgICBzY2FsZS5yYW5nZVJvdW5kQmFuZHMgPSBmdW5jdGlvbih4LCBwYWRkaW5nLCBvdXRlclBhZGRpbmcpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcGFkZGluZyA9IDA7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIG91dGVyUGFkZGluZyA9IHBhZGRpbmc7XG4gICAgICB2YXIgcmV2ZXJzZSA9IHhbMV0gPCB4WzBdLCBzdGFydCA9IHhbcmV2ZXJzZSAtIDBdLCBzdG9wID0geFsxIC0gcmV2ZXJzZV0sIHN0ZXAgPSBNYXRoLmZsb29yKChzdG9wIC0gc3RhcnQpIC8gKGRvbWFpbi5sZW5ndGggLSBwYWRkaW5nICsgMiAqIG91dGVyUGFkZGluZykpO1xuICAgICAgcmFuZ2UgPSBzdGVwcyhzdGFydCArIE1hdGgucm91bmQoKHN0b3AgLSBzdGFydCAtIChkb21haW4ubGVuZ3RoIC0gcGFkZGluZykgKiBzdGVwKSAvIDIpLCBzdGVwKTtcbiAgICAgIGlmIChyZXZlcnNlKSByYW5nZS5yZXZlcnNlKCk7XG4gICAgICByYW5nZUJhbmQgPSBNYXRoLnJvdW5kKHN0ZXAgKiAoMSAtIHBhZGRpbmcpKTtcbiAgICAgIHJhbmdlciA9IHtcbiAgICAgICAgdDogXCJyYW5nZVJvdW5kQmFuZHNcIixcbiAgICAgICAgYTogYXJndW1lbnRzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2VCYW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmFuZ2VCYW5kO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2VFeHRlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19zY2FsZUV4dGVudChyYW5nZXIuYVswXSk7XG4gICAgfTtcbiAgICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfb3JkaW5hbChkb21haW4sIHJhbmdlcik7XG4gICAgfTtcbiAgICByZXR1cm4gc2NhbGUuZG9tYWluKGRvbWFpbik7XG4gIH1cbiAgZDMuc2NhbGUuY2F0ZWdvcnkxMCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoZDNfY2F0ZWdvcnkxMCk7XG4gIH07XG4gIGQzLnNjYWxlLmNhdGVnb3J5MjAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKGQzX2NhdGVnb3J5MjApO1xuICB9O1xuICBkMy5zY2FsZS5jYXRlZ29yeTIwYiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoZDNfY2F0ZWdvcnkyMGIpO1xuICB9O1xuICBkMy5zY2FsZS5jYXRlZ29yeTIwYyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoZDNfY2F0ZWdvcnkyMGMpO1xuICB9O1xuICB2YXIgZDNfY2F0ZWdvcnkxMCA9IFsgMjA2MjI2MCwgMTY3NDQyMDYsIDI5MjQ1ODgsIDE0MDM0NzI4LCA5NzI1ODg1LCA5MTk3MTMxLCAxNDkwNzMzMCwgODM1NTcxMSwgMTIzNjkxODYsIDE1NTYxNzUgXS5tYXAoZDNfcmdiU3RyaW5nKTtcbiAgdmFyIGQzX2NhdGVnb3J5MjAgPSBbIDIwNjIyNjAsIDExNDU0NDQwLCAxNjc0NDIwNiwgMTY3NTk2NzIsIDI5MjQ1ODgsIDEwMDE4Njk4LCAxNDAzNDcyOCwgMTY3NTA3NDIsIDk3MjU4ODUsIDEyOTU1ODYxLCA5MTk3MTMxLCAxMjg4NTE0MCwgMTQ5MDczMzAsIDE2MjM0MTk0LCA4MzU1NzExLCAxMzA5MjgwNywgMTIzNjkxODYsIDE0NDA4NTg5LCAxNTU2MTc1LCAxMDQxMDcyNSBdLm1hcChkM19yZ2JTdHJpbmcpO1xuICB2YXIgZDNfY2F0ZWdvcnkyMGIgPSBbIDM3NTA3NzcsIDUzOTU2MTksIDcwNDA3MTksIDEwMjY0Mjg2LCA2NTE5MDk3LCA5MjE2NTk0LCAxMTkxNTExNSwgMTM1NTY2MzYsIDkyMDI5OTMsIDEyNDI2ODA5LCAxNTE4NjUxNCwgMTUxOTA5MzIsIDg2NjYxNjksIDExMzU2NDkwLCAxNDA0OTY0MywgMTUxNzczNzIsIDgwNzc2ODMsIDEwODM0MzI0LCAxMzUyODUwOSwgMTQ1ODk2NTQgXS5tYXAoZDNfcmdiU3RyaW5nKTtcbiAgdmFyIGQzX2NhdGVnb3J5MjBjID0gWyAzMjQ0NzMzLCA3MDU3MTEwLCAxMDQwNjYyNSwgMTMwMzI0MzEsIDE1MDk1MDUzLCAxNjYxNjc2NCwgMTY2MjUyNTksIDE2NjM0MDE4LCAzMjUzMDc2LCA3NjUyNDcwLCAxMDYwNzAwMywgMTMxMDE1MDQsIDc2OTUyODEsIDEwMzk0MzEyLCAxMjM2OTM3MiwgMTQzNDI4OTEsIDY1MTM1MDcsIDk4Njg5NTAsIDEyNDM0ODc3LCAxNDI3NzA4MSBdLm1hcChkM19yZ2JTdHJpbmcpO1xuICBkMy5zY2FsZS5xdWFudGlsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM19zY2FsZV9xdWFudGlsZShbXSwgW10pO1xuICB9O1xuICBmdW5jdGlvbiBkM19zY2FsZV9xdWFudGlsZShkb21haW4sIHJhbmdlKSB7XG4gICAgdmFyIHRocmVzaG9sZHM7XG4gICAgZnVuY3Rpb24gcmVzY2FsZSgpIHtcbiAgICAgIHZhciBrID0gMCwgcSA9IHJhbmdlLmxlbmd0aDtcbiAgICAgIHRocmVzaG9sZHMgPSBbXTtcbiAgICAgIHdoaWxlICgrK2sgPCBxKSB0aHJlc2hvbGRzW2sgLSAxXSA9IGQzLnF1YW50aWxlKGRvbWFpbiwgayAvIHEpO1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzY2FsZSh4KSB7XG4gICAgICBpZiAoIWlzTmFOKHggPSAreCkpIHJldHVybiByYW5nZVtkMy5iaXNlY3QodGhyZXNob2xkcywgeCldO1xuICAgIH1cbiAgICBzY2FsZS5kb21haW4gPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkb21haW47XG4gICAgICBkb21haW4gPSB4Lm1hcChkM19udW1iZXIpLmZpbHRlcihkM19udW1lcmljKS5zb3J0KGQzX2FzY2VuZGluZyk7XG4gICAgICByZXR1cm4gcmVzY2FsZSgpO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByYW5nZTtcbiAgICAgIHJhbmdlID0geDtcbiAgICAgIHJldHVybiByZXNjYWxlKCk7XG4gICAgfTtcbiAgICBzY2FsZS5xdWFudGlsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aHJlc2hvbGRzO1xuICAgIH07XG4gICAgc2NhbGUuaW52ZXJ0RXh0ZW50ID0gZnVuY3Rpb24oeSkge1xuICAgICAgeSA9IHJhbmdlLmluZGV4T2YoeSk7XG4gICAgICByZXR1cm4geSA8IDAgPyBbIE5hTiwgTmFOIF0gOiBbIHkgPiAwID8gdGhyZXNob2xkc1t5IC0gMV0gOiBkb21haW5bMF0sIHkgPCB0aHJlc2hvbGRzLmxlbmd0aCA/IHRocmVzaG9sZHNbeV0gOiBkb21haW5bZG9tYWluLmxlbmd0aCAtIDFdIF07XG4gICAgfTtcbiAgICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfcXVhbnRpbGUoZG9tYWluLCByYW5nZSk7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzY2FsZSgpO1xuICB9XG4gIGQzLnNjYWxlLnF1YW50aXplID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NjYWxlX3F1YW50aXplKDAsIDEsIFsgMCwgMSBdKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2NhbGVfcXVhbnRpemUoeDAsIHgxLCByYW5nZSkge1xuICAgIHZhciBreCwgaTtcbiAgICBmdW5jdGlvbiBzY2FsZSh4KSB7XG4gICAgICByZXR1cm4gcmFuZ2VbTWF0aC5tYXgoMCwgTWF0aC5taW4oaSwgTWF0aC5mbG9vcihreCAqICh4IC0geDApKSkpXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzY2FsZSgpIHtcbiAgICAgIGt4ID0gcmFuZ2UubGVuZ3RoIC8gKHgxIC0geDApO1xuICAgICAgaSA9IHJhbmdlLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gc2NhbGU7XG4gICAgfVxuICAgIHNjYWxlLmRvbWFpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFsgeDAsIHgxIF07XG4gICAgICB4MCA9ICt4WzBdO1xuICAgICAgeDEgPSAreFt4Lmxlbmd0aCAtIDFdO1xuICAgICAgcmV0dXJuIHJlc2NhbGUoKTtcbiAgICB9O1xuICAgIHNjYWxlLnJhbmdlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcmFuZ2U7XG4gICAgICByYW5nZSA9IHg7XG4gICAgICByZXR1cm4gcmVzY2FsZSgpO1xuICAgIH07XG4gICAgc2NhbGUuaW52ZXJ0RXh0ZW50ID0gZnVuY3Rpb24oeSkge1xuICAgICAgeSA9IHJhbmdlLmluZGV4T2YoeSk7XG4gICAgICB5ID0geSA8IDAgPyBOYU4gOiB5IC8ga3ggKyB4MDtcbiAgICAgIHJldHVybiBbIHksIHkgKyAxIC8ga3ggXTtcbiAgICB9O1xuICAgIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM19zY2FsZV9xdWFudGl6ZSh4MCwgeDEsIHJhbmdlKTtcbiAgICB9O1xuICAgIHJldHVybiByZXNjYWxlKCk7XG4gIH1cbiAgZDMuc2NhbGUudGhyZXNob2xkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NjYWxlX3RocmVzaG9sZChbIC41IF0sIFsgMCwgMSBdKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2NhbGVfdGhyZXNob2xkKGRvbWFpbiwgcmFuZ2UpIHtcbiAgICBmdW5jdGlvbiBzY2FsZSh4KSB7XG4gICAgICBpZiAoeCA8PSB4KSByZXR1cm4gcmFuZ2VbZDMuYmlzZWN0KGRvbWFpbiwgeCldO1xuICAgIH1cbiAgICBzY2FsZS5kb21haW4gPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkb21haW47XG4gICAgICBkb21haW4gPSBfO1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH07XG4gICAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiByYW5nZTtcbiAgICAgIHJhbmdlID0gXztcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9O1xuICAgIHNjYWxlLmludmVydEV4dGVudCA9IGZ1bmN0aW9uKHkpIHtcbiAgICAgIHkgPSByYW5nZS5pbmRleE9mKHkpO1xuICAgICAgcmV0dXJuIFsgZG9tYWluW3kgLSAxXSwgZG9tYWluW3ldIF07XG4gICAgfTtcbiAgICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfdGhyZXNob2xkKGRvbWFpbiwgcmFuZ2UpO1xuICAgIH07XG4gICAgcmV0dXJuIHNjYWxlO1xuICB9XG4gIGQzLnNjYWxlLmlkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NjYWxlX2lkZW50aXR5KFsgMCwgMSBdKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc2NhbGVfaWRlbnRpdHkoZG9tYWluKSB7XG4gICAgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICAgICAgcmV0dXJuICt4O1xuICAgIH1cbiAgICBpZGVudGl0eS5pbnZlcnQgPSBpZGVudGl0eTtcbiAgICBpZGVudGl0eS5kb21haW4gPSBpZGVudGl0eS5yYW5nZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRvbWFpbjtcbiAgICAgIGRvbWFpbiA9IHgubWFwKGlkZW50aXR5KTtcbiAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICB9O1xuICAgIGlkZW50aXR5LnRpY2tzID0gZnVuY3Rpb24obSkge1xuICAgICAgcmV0dXJuIGQzX3NjYWxlX2xpbmVhclRpY2tzKGRvbWFpbiwgbSk7XG4gICAgfTtcbiAgICBpZGVudGl0eS50aWNrRm9ybWF0ID0gZnVuY3Rpb24obSwgZm9ybWF0KSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfbGluZWFyVGlja0Zvcm1hdChkb21haW4sIG0sIGZvcm1hdCk7XG4gICAgfTtcbiAgICBpZGVudGl0eS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZDNfc2NhbGVfaWRlbnRpdHkoZG9tYWluKTtcbiAgICB9O1xuICAgIHJldHVybiBpZGVudGl0eTtcbiAgfVxuICBkMy5zdmcgPSB7fTtcbiAgZnVuY3Rpb24gZDNfemVybygpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBkMy5zdmcuYXJjID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlubmVyUmFkaXVzID0gZDNfc3ZnX2FyY0lubmVyUmFkaXVzLCBvdXRlclJhZGl1cyA9IGQzX3N2Z19hcmNPdXRlclJhZGl1cywgY29ybmVyUmFkaXVzID0gZDNfemVybywgcGFkUmFkaXVzID0gZDNfc3ZnX2FyY0F1dG8sIHN0YXJ0QW5nbGUgPSBkM19zdmdfYXJjU3RhcnRBbmdsZSwgZW5kQW5nbGUgPSBkM19zdmdfYXJjRW5kQW5nbGUsIHBhZEFuZ2xlID0gZDNfc3ZnX2FyY1BhZEFuZ2xlO1xuICAgIGZ1bmN0aW9uIGFyYygpIHtcbiAgICAgIHZhciByMCA9IE1hdGgubWF4KDAsICtpbm5lclJhZGl1cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSwgcjEgPSBNYXRoLm1heCgwLCArb3V0ZXJSYWRpdXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSksIGEwID0gc3RhcnRBbmdsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIC0gaGFsZs+ALCBhMSA9IGVuZEFuZ2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgLSBoYWxmz4AsIGRhID0gTWF0aC5hYnMoYTEgLSBhMCksIGN3ID0gYTAgPiBhMSA/IDAgOiAxO1xuICAgICAgaWYgKHIxIDwgcjApIHJjID0gcjEsIHIxID0gcjAsIHIwID0gcmM7XG4gICAgICBpZiAoZGEgPj0gz4TOtSkgcmV0dXJuIGNpcmNsZVNlZ21lbnQocjEsIGN3KSArIChyMCA/IGNpcmNsZVNlZ21lbnQocjAsIDEgLSBjdykgOiBcIlwiKSArIFwiWlwiO1xuICAgICAgdmFyIHJjLCBjciwgcnAsIGFwLCBwMCA9IDAsIHAxID0gMCwgeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCBwYXRoID0gW107XG4gICAgICBpZiAoYXAgPSAoK3BhZEFuZ2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgMCkgLyAyKSB7XG4gICAgICAgIHJwID0gcGFkUmFkaXVzID09PSBkM19zdmdfYXJjQXV0byA/IE1hdGguc3FydChyMCAqIHIwICsgcjEgKiByMSkgOiArcGFkUmFkaXVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghY3cpIHAxICo9IC0xO1xuICAgICAgICBpZiAocjEpIHAxID0gZDNfYXNpbihycCAvIHIxICogTWF0aC5zaW4oYXApKTtcbiAgICAgICAgaWYgKHIwKSBwMCA9IGQzX2FzaW4ocnAgLyByMCAqIE1hdGguc2luKGFwKSk7XG4gICAgICB9XG4gICAgICBpZiAocjEpIHtcbiAgICAgICAgeDAgPSByMSAqIE1hdGguY29zKGEwICsgcDEpO1xuICAgICAgICB5MCA9IHIxICogTWF0aC5zaW4oYTAgKyBwMSk7XG4gICAgICAgIHgxID0gcjEgKiBNYXRoLmNvcyhhMSAtIHAxKTtcbiAgICAgICAgeTEgPSByMSAqIE1hdGguc2luKGExIC0gcDEpO1xuICAgICAgICB2YXIgbDEgPSBNYXRoLmFicyhhMSAtIGEwIC0gMiAqIHAxKSA8PSDPgCA/IDAgOiAxO1xuICAgICAgICBpZiAocDEgJiYgZDNfc3ZnX2FyY1N3ZWVwKHgwLCB5MCwgeDEsIHkxKSA9PT0gY3cgXiBsMSkge1xuICAgICAgICAgIHZhciBoMSA9IChhMCArIGExKSAvIDI7XG4gICAgICAgICAgeDAgPSByMSAqIE1hdGguY29zKGgxKTtcbiAgICAgICAgICB5MCA9IHIxICogTWF0aC5zaW4oaDEpO1xuICAgICAgICAgIHgxID0geTEgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4MCA9IHkwID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChyMCkge1xuICAgICAgICB4MiA9IHIwICogTWF0aC5jb3MoYTEgLSBwMCk7XG4gICAgICAgIHkyID0gcjAgKiBNYXRoLnNpbihhMSAtIHAwKTtcbiAgICAgICAgeDMgPSByMCAqIE1hdGguY29zKGEwICsgcDApO1xuICAgICAgICB5MyA9IHIwICogTWF0aC5zaW4oYTAgKyBwMCk7XG4gICAgICAgIHZhciBsMCA9IE1hdGguYWJzKGEwIC0gYTEgKyAyICogcDApIDw9IM+AID8gMCA6IDE7XG4gICAgICAgIGlmIChwMCAmJiBkM19zdmdfYXJjU3dlZXAoeDIsIHkyLCB4MywgeTMpID09PSAxIC0gY3cgXiBsMCkge1xuICAgICAgICAgIHZhciBoMCA9IChhMCArIGExKSAvIDI7XG4gICAgICAgICAgeDIgPSByMCAqIE1hdGguY29zKGgwKTtcbiAgICAgICAgICB5MiA9IHIwICogTWF0aC5zaW4oaDApO1xuICAgICAgICAgIHgzID0geTMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4MiA9IHkyID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChkYSA+IM61ICYmIChyYyA9IE1hdGgubWluKE1hdGguYWJzKHIxIC0gcjApIC8gMiwgK2Nvcm5lclJhZGl1cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSkgPiAuMDAxKSB7XG4gICAgICAgIGNyID0gcjAgPCByMSBeIGN3ID8gMCA6IDE7XG4gICAgICAgIHZhciByYzEgPSByYywgcmMwID0gcmM7XG4gICAgICAgIGlmIChkYSA8IM+AKSB7XG4gICAgICAgICAgdmFyIG9jID0geDMgPT0gbnVsbCA/IFsgeDIsIHkyIF0gOiB4MSA9PSBudWxsID8gWyB4MCwgeTAgXSA6IGQzX2dlb21fcG9seWdvbkludGVyc2VjdChbIHgwLCB5MCBdLCBbIHgzLCB5MyBdLCBbIHgxLCB5MSBdLCBbIHgyLCB5MiBdKSwgYXggPSB4MCAtIG9jWzBdLCBheSA9IHkwIC0gb2NbMV0sIGJ4ID0geDEgLSBvY1swXSwgYnkgPSB5MSAtIG9jWzFdLCBrYyA9IDEgLyBNYXRoLnNpbihNYXRoLmFjb3MoKGF4ICogYnggKyBheSAqIGJ5KSAvIChNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkpICogTWF0aC5zcXJ0KGJ4ICogYnggKyBieSAqIGJ5KSkpIC8gMiksIGxjID0gTWF0aC5zcXJ0KG9jWzBdICogb2NbMF0gKyBvY1sxXSAqIG9jWzFdKTtcbiAgICAgICAgICByYzAgPSBNYXRoLm1pbihyYywgKHIwIC0gbGMpIC8gKGtjIC0gMSkpO1xuICAgICAgICAgIHJjMSA9IE1hdGgubWluKHJjLCAocjEgLSBsYykgLyAoa2MgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgxICE9IG51bGwpIHtcbiAgICAgICAgICB2YXIgdDMwID0gZDNfc3ZnX2FyY0Nvcm5lclRhbmdlbnRzKHgzID09IG51bGwgPyBbIHgyLCB5MiBdIDogWyB4MywgeTMgXSwgWyB4MCwgeTAgXSwgcjEsIHJjMSwgY3cpLCB0MTIgPSBkM19zdmdfYXJjQ29ybmVyVGFuZ2VudHMoWyB4MSwgeTEgXSwgWyB4MiwgeTIgXSwgcjEsIHJjMSwgY3cpO1xuICAgICAgICAgIGlmIChyYyA9PT0gcmMxKSB7XG4gICAgICAgICAgICBwYXRoLnB1c2goXCJNXCIsIHQzMFswXSwgXCJBXCIsIHJjMSwgXCIsXCIsIHJjMSwgXCIgMCAwLFwiLCBjciwgXCIgXCIsIHQzMFsxXSwgXCJBXCIsIHIxLCBcIixcIiwgcjEsIFwiIDAgXCIsIDEgLSBjdyBeIGQzX3N2Z19hcmNTd2VlcCh0MzBbMV1bMF0sIHQzMFsxXVsxXSwgdDEyWzFdWzBdLCB0MTJbMV1bMV0pLCBcIixcIiwgY3csIFwiIFwiLCB0MTJbMV0sIFwiQVwiLCByYzEsIFwiLFwiLCByYzEsIFwiIDAgMCxcIiwgY3IsIFwiIFwiLCB0MTJbMF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXRoLnB1c2goXCJNXCIsIHQzMFswXSwgXCJBXCIsIHJjMSwgXCIsXCIsIHJjMSwgXCIgMCAxLFwiLCBjciwgXCIgXCIsIHQxMlswXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucHVzaChcIk1cIiwgeDAsIFwiLFwiLCB5MCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgzICE9IG51bGwpIHtcbiAgICAgICAgICB2YXIgdDAzID0gZDNfc3ZnX2FyY0Nvcm5lclRhbmdlbnRzKFsgeDAsIHkwIF0sIFsgeDMsIHkzIF0sIHIwLCAtcmMwLCBjdyksIHQyMSA9IGQzX3N2Z19hcmNDb3JuZXJUYW5nZW50cyhbIHgyLCB5MiBdLCB4MSA9PSBudWxsID8gWyB4MCwgeTAgXSA6IFsgeDEsIHkxIF0sIHIwLCAtcmMwLCBjdyk7XG4gICAgICAgICAgaWYgKHJjID09PSByYzApIHtcbiAgICAgICAgICAgIHBhdGgucHVzaChcIkxcIiwgdDIxWzBdLCBcIkFcIiwgcmMwLCBcIixcIiwgcmMwLCBcIiAwIDAsXCIsIGNyLCBcIiBcIiwgdDIxWzFdLCBcIkFcIiwgcjAsIFwiLFwiLCByMCwgXCIgMCBcIiwgY3cgXiBkM19zdmdfYXJjU3dlZXAodDIxWzFdWzBdLCB0MjFbMV1bMV0sIHQwM1sxXVswXSwgdDAzWzFdWzFdKSwgXCIsXCIsIDEgLSBjdywgXCIgXCIsIHQwM1sxXSwgXCJBXCIsIHJjMCwgXCIsXCIsIHJjMCwgXCIgMCAwLFwiLCBjciwgXCIgXCIsIHQwM1swXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhdGgucHVzaChcIkxcIiwgdDIxWzBdLCBcIkFcIiwgcmMwLCBcIixcIiwgcmMwLCBcIiAwIDAsXCIsIGNyLCBcIiBcIiwgdDAzWzBdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wdXNoKFwiTFwiLCB4MiwgXCIsXCIsIHkyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0aC5wdXNoKFwiTVwiLCB4MCwgXCIsXCIsIHkwKTtcbiAgICAgICAgaWYgKHgxICE9IG51bGwpIHBhdGgucHVzaChcIkFcIiwgcjEsIFwiLFwiLCByMSwgXCIgMCBcIiwgbDEsIFwiLFwiLCBjdywgXCIgXCIsIHgxLCBcIixcIiwgeTEpO1xuICAgICAgICBwYXRoLnB1c2goXCJMXCIsIHgyLCBcIixcIiwgeTIpO1xuICAgICAgICBpZiAoeDMgIT0gbnVsbCkgcGF0aC5wdXNoKFwiQVwiLCByMCwgXCIsXCIsIHIwLCBcIiAwIFwiLCBsMCwgXCIsXCIsIDEgLSBjdywgXCIgXCIsIHgzLCBcIixcIiwgeTMpO1xuICAgICAgfVxuICAgICAgcGF0aC5wdXNoKFwiWlwiKTtcbiAgICAgIHJldHVybiBwYXRoLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNpcmNsZVNlZ21lbnQocjEsIGN3KSB7XG4gICAgICByZXR1cm4gXCJNMCxcIiArIHIxICsgXCJBXCIgKyByMSArIFwiLFwiICsgcjEgKyBcIiAwIDEsXCIgKyBjdyArIFwiIDAsXCIgKyAtcjEgKyBcIkFcIiArIHIxICsgXCIsXCIgKyByMSArIFwiIDAgMSxcIiArIGN3ICsgXCIgMCxcIiArIHIxO1xuICAgIH1cbiAgICBhcmMuaW5uZXJSYWRpdXMgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBpbm5lclJhZGl1cztcbiAgICAgIGlubmVyUmFkaXVzID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMub3V0ZXJSYWRpdXMgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBvdXRlclJhZGl1cztcbiAgICAgIG91dGVyUmFkaXVzID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMuY29ybmVyUmFkaXVzID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gY29ybmVyUmFkaXVzO1xuICAgICAgY29ybmVyUmFkaXVzID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMucGFkUmFkaXVzID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gcGFkUmFkaXVzO1xuICAgICAgcGFkUmFkaXVzID0gdiA9PSBkM19zdmdfYXJjQXV0byA/IGQzX3N2Z19hcmNBdXRvIDogZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMuc3RhcnRBbmdsZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHN0YXJ0QW5nbGU7XG4gICAgICBzdGFydEFuZ2xlID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMuZW5kQW5nbGUgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBlbmRBbmdsZTtcbiAgICAgIGVuZEFuZ2xlID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMucGFkQW5nbGUgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBwYWRBbmdsZTtcbiAgICAgIHBhZEFuZ2xlID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBhcmM7XG4gICAgfTtcbiAgICBhcmMuY2VudHJvaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByID0gKCtpbm5lclJhZGl1cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpICsgK291dGVyUmFkaXVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIC8gMiwgYSA9ICgrc3RhcnRBbmdsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpICsgK2VuZEFuZ2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIC8gMiAtIGhhbGbPgDtcbiAgICAgIHJldHVybiBbIE1hdGguY29zKGEpICogciwgTWF0aC5zaW4oYSkgKiByIF07XG4gICAgfTtcbiAgICByZXR1cm4gYXJjO1xuICB9O1xuICB2YXIgZDNfc3ZnX2FyY0F1dG8gPSBcImF1dG9cIjtcbiAgZnVuY3Rpb24gZDNfc3ZnX2FyY0lubmVyUmFkaXVzKGQpIHtcbiAgICByZXR1cm4gZC5pbm5lclJhZGl1cztcbiAgfVxuICBmdW5jdGlvbiBkM19zdmdfYXJjT3V0ZXJSYWRpdXMoZCkge1xuICAgIHJldHVybiBkLm91dGVyUmFkaXVzO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19hcmNTdGFydEFuZ2xlKGQpIHtcbiAgICByZXR1cm4gZC5zdGFydEFuZ2xlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19hcmNFbmRBbmdsZShkKSB7XG4gICAgcmV0dXJuIGQuZW5kQW5nbGU7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2FyY1BhZEFuZ2xlKGQpIHtcbiAgICByZXR1cm4gZCAmJiBkLnBhZEFuZ2xlO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19hcmNTd2VlcCh4MCwgeTAsIHgxLCB5MSkge1xuICAgIHJldHVybiAoeDAgLSB4MSkgKiB5MCAtICh5MCAtIHkxKSAqIHgwID4gMCA/IDAgOiAxO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19hcmNDb3JuZXJUYW5nZW50cyhwMCwgcDEsIHIxLCByYywgY3cpIHtcbiAgICB2YXIgeDAxID0gcDBbMF0gLSBwMVswXSwgeTAxID0gcDBbMV0gLSBwMVsxXSwgbG8gPSAoY3cgPyByYyA6IC1yYykgLyBNYXRoLnNxcnQoeDAxICogeDAxICsgeTAxICogeTAxKSwgb3ggPSBsbyAqIHkwMSwgb3kgPSAtbG8gKiB4MDEsIHgxID0gcDBbMF0gKyBveCwgeTEgPSBwMFsxXSArIG95LCB4MiA9IHAxWzBdICsgb3gsIHkyID0gcDFbMV0gKyBveSwgeDMgPSAoeDEgKyB4MikgLyAyLCB5MyA9ICh5MSArIHkyKSAvIDIsIGR4ID0geDIgLSB4MSwgZHkgPSB5MiAtIHkxLCBkMiA9IGR4ICogZHggKyBkeSAqIGR5LCByID0gcjEgLSByYywgRCA9IHgxICogeTIgLSB4MiAqIHkxLCBkID0gKGR5IDwgMCA/IC0xIDogMSkgKiBNYXRoLnNxcnQoTWF0aC5tYXgoMCwgciAqIHIgKiBkMiAtIEQgKiBEKSksIGN4MCA9IChEICogZHkgLSBkeCAqIGQpIC8gZDIsIGN5MCA9ICgtRCAqIGR4IC0gZHkgKiBkKSAvIGQyLCBjeDEgPSAoRCAqIGR5ICsgZHggKiBkKSAvIGQyLCBjeTEgPSAoLUQgKiBkeCArIGR5ICogZCkgLyBkMiwgZHgwID0gY3gwIC0geDMsIGR5MCA9IGN5MCAtIHkzLCBkeDEgPSBjeDEgLSB4MywgZHkxID0gY3kxIC0geTM7XG4gICAgaWYgKGR4MCAqIGR4MCArIGR5MCAqIGR5MCA+IGR4MSAqIGR4MSArIGR5MSAqIGR5MSkgY3gwID0gY3gxLCBjeTAgPSBjeTE7XG4gICAgcmV0dXJuIFsgWyBjeDAgLSBveCwgY3kwIC0gb3kgXSwgWyBjeDAgKiByMSAvIHIsIGN5MCAqIHIxIC8gciBdIF07XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmUocHJvamVjdGlvbikge1xuICAgIHZhciB4ID0gZDNfZ2VvbV9wb2ludFgsIHkgPSBkM19nZW9tX3BvaW50WSwgZGVmaW5lZCA9IGQzX3RydWUsIGludGVycG9sYXRlID0gZDNfc3ZnX2xpbmVMaW5lYXIsIGludGVycG9sYXRlS2V5ID0gaW50ZXJwb2xhdGUua2V5LCB0ZW5zaW9uID0gLjc7XG4gICAgZnVuY3Rpb24gbGluZShkYXRhKSB7XG4gICAgICB2YXIgc2VnbWVudHMgPSBbXSwgcG9pbnRzID0gW10sIGkgPSAtMSwgbiA9IGRhdGEubGVuZ3RoLCBkLCBmeCA9IGQzX2Z1bmN0b3IoeCksIGZ5ID0gZDNfZnVuY3Rvcih5KTtcbiAgICAgIGZ1bmN0aW9uIHNlZ21lbnQoKSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goXCJNXCIsIGludGVycG9sYXRlKHByb2plY3Rpb24ocG9pbnRzKSwgdGVuc2lvbikpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgaWYgKGRlZmluZWQuY2FsbCh0aGlzLCBkID0gZGF0YVtpXSwgaSkpIHtcbiAgICAgICAgICBwb2ludHMucHVzaChbICtmeC5jYWxsKHRoaXMsIGQsIGkpLCArZnkuY2FsbCh0aGlzLCBkLCBpKSBdKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgc2VnbWVudCgpO1xuICAgICAgICAgIHBvaW50cyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocG9pbnRzLmxlbmd0aCkgc2VnbWVudCgpO1xuICAgICAgcmV0dXJuIHNlZ21lbnRzLmxlbmd0aCA/IHNlZ21lbnRzLmpvaW4oXCJcIikgOiBudWxsO1xuICAgIH1cbiAgICBsaW5lLnggPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB4O1xuICAgICAgeCA9IF87XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9O1xuICAgIGxpbmUueSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHk7XG4gICAgICB5ID0gXztcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH07XG4gICAgbGluZS5kZWZpbmVkID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZGVmaW5lZDtcbiAgICAgIGRlZmluZWQgPSBfO1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfTtcbiAgICBsaW5lLmludGVycG9sYXRlID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaW50ZXJwb2xhdGVLZXk7XG4gICAgICBpZiAodHlwZW9mIF8gPT09IFwiZnVuY3Rpb25cIikgaW50ZXJwb2xhdGVLZXkgPSBpbnRlcnBvbGF0ZSA9IF87IGVsc2UgaW50ZXJwb2xhdGVLZXkgPSAoaW50ZXJwb2xhdGUgPSBkM19zdmdfbGluZUludGVycG9sYXRvcnMuZ2V0KF8pIHx8IGQzX3N2Z19saW5lTGluZWFyKS5rZXk7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9O1xuICAgIGxpbmUudGVuc2lvbiA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRlbnNpb247XG4gICAgICB0ZW5zaW9uID0gXztcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH07XG4gICAgcmV0dXJuIGxpbmU7XG4gIH1cbiAgZDMuc3ZnLmxpbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfc3ZnX2xpbmUoZDNfaWRlbnRpdHkpO1xuICB9O1xuICB2YXIgZDNfc3ZnX2xpbmVJbnRlcnBvbGF0b3JzID0gZDMubWFwKHtcbiAgICBsaW5lYXI6IGQzX3N2Z19saW5lTGluZWFyLFxuICAgIFwibGluZWFyLWNsb3NlZFwiOiBkM19zdmdfbGluZUxpbmVhckNsb3NlZCxcbiAgICBzdGVwOiBkM19zdmdfbGluZVN0ZXAsXG4gICAgXCJzdGVwLWJlZm9yZVwiOiBkM19zdmdfbGluZVN0ZXBCZWZvcmUsXG4gICAgXCJzdGVwLWFmdGVyXCI6IGQzX3N2Z19saW5lU3RlcEFmdGVyLFxuICAgIGJhc2lzOiBkM19zdmdfbGluZUJhc2lzLFxuICAgIFwiYmFzaXMtb3BlblwiOiBkM19zdmdfbGluZUJhc2lzT3BlbixcbiAgICBcImJhc2lzLWNsb3NlZFwiOiBkM19zdmdfbGluZUJhc2lzQ2xvc2VkLFxuICAgIGJ1bmRsZTogZDNfc3ZnX2xpbmVCdW5kbGUsXG4gICAgY2FyZGluYWw6IGQzX3N2Z19saW5lQ2FyZGluYWwsXG4gICAgXCJjYXJkaW5hbC1vcGVuXCI6IGQzX3N2Z19saW5lQ2FyZGluYWxPcGVuLFxuICAgIFwiY2FyZGluYWwtY2xvc2VkXCI6IGQzX3N2Z19saW5lQ2FyZGluYWxDbG9zZWQsXG4gICAgbW9ub3RvbmU6IGQzX3N2Z19saW5lTW9ub3RvbmVcbiAgfSk7XG4gIGQzX3N2Z19saW5lSW50ZXJwb2xhdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICB2YWx1ZS5rZXkgPSBrZXk7XG4gICAgdmFsdWUuY2xvc2VkID0gLy1jbG9zZWQkLy50ZXN0KGtleSk7XG4gIH0pO1xuICBmdW5jdGlvbiBkM19zdmdfbGluZUxpbmVhcihwb2ludHMpIHtcbiAgICByZXR1cm4gcG9pbnRzLmxlbmd0aCA+IDEgPyBwb2ludHMuam9pbihcIkxcIikgOiBwb2ludHMgKyBcIlpcIjtcbiAgfVxuICBmdW5jdGlvbiBkM19zdmdfbGluZUxpbmVhckNsb3NlZChwb2ludHMpIHtcbiAgICByZXR1cm4gcG9pbnRzLmpvaW4oXCJMXCIpICsgXCJaXCI7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVTdGVwKHBvaW50cykge1xuICAgIHZhciBpID0gMCwgbiA9IHBvaW50cy5sZW5ndGgsIHAgPSBwb2ludHNbMF0sIHBhdGggPSBbIHBbMF0sIFwiLFwiLCBwWzFdIF07XG4gICAgd2hpbGUgKCsraSA8IG4pIHBhdGgucHVzaChcIkhcIiwgKHBbMF0gKyAocCA9IHBvaW50c1tpXSlbMF0pIC8gMiwgXCJWXCIsIHBbMV0pO1xuICAgIGlmIChuID4gMSkgcGF0aC5wdXNoKFwiSFwiLCBwWzBdKTtcbiAgICByZXR1cm4gcGF0aC5qb2luKFwiXCIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lU3RlcEJlZm9yZShwb2ludHMpIHtcbiAgICB2YXIgaSA9IDAsIG4gPSBwb2ludHMubGVuZ3RoLCBwID0gcG9pbnRzWzBdLCBwYXRoID0gWyBwWzBdLCBcIixcIiwgcFsxXSBdO1xuICAgIHdoaWxlICgrK2kgPCBuKSBwYXRoLnB1c2goXCJWXCIsIChwID0gcG9pbnRzW2ldKVsxXSwgXCJIXCIsIHBbMF0pO1xuICAgIHJldHVybiBwYXRoLmpvaW4oXCJcIik7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVTdGVwQWZ0ZXIocG9pbnRzKSB7XG4gICAgdmFyIGkgPSAwLCBuID0gcG9pbnRzLmxlbmd0aCwgcCA9IHBvaW50c1swXSwgcGF0aCA9IFsgcFswXSwgXCIsXCIsIHBbMV0gXTtcbiAgICB3aGlsZSAoKytpIDwgbikgcGF0aC5wdXNoKFwiSFwiLCAocCA9IHBvaW50c1tpXSlbMF0sIFwiVlwiLCBwWzFdKTtcbiAgICByZXR1cm4gcGF0aC5qb2luKFwiXCIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxPcGVuKHBvaW50cywgdGVuc2lvbikge1xuICAgIHJldHVybiBwb2ludHMubGVuZ3RoIDwgNCA/IGQzX3N2Z19saW5lTGluZWFyKHBvaW50cykgOiBwb2ludHNbMV0gKyBkM19zdmdfbGluZUhlcm1pdGUocG9pbnRzLnNsaWNlKDEsIC0xKSwgZDNfc3ZnX2xpbmVDYXJkaW5hbFRhbmdlbnRzKHBvaW50cywgdGVuc2lvbikpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxDbG9zZWQocG9pbnRzLCB0ZW5zaW9uKSB7XG4gICAgcmV0dXJuIHBvaW50cy5sZW5ndGggPCAzID8gZDNfc3ZnX2xpbmVMaW5lYXJDbG9zZWQocG9pbnRzKSA6IHBvaW50c1swXSArIGQzX3N2Z19saW5lSGVybWl0ZSgocG9pbnRzLnB1c2gocG9pbnRzWzBdKSwgXG4gICAgcG9pbnRzKSwgZDNfc3ZnX2xpbmVDYXJkaW5hbFRhbmdlbnRzKFsgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSBdLmNvbmNhdChwb2ludHMsIFsgcG9pbnRzWzFdIF0pLCB0ZW5zaW9uKSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVDYXJkaW5hbChwb2ludHMsIHRlbnNpb24pIHtcbiAgICByZXR1cm4gcG9pbnRzLmxlbmd0aCA8IDMgPyBkM19zdmdfbGluZUxpbmVhcihwb2ludHMpIDogcG9pbnRzWzBdICsgZDNfc3ZnX2xpbmVIZXJtaXRlKHBvaW50cywgZDNfc3ZnX2xpbmVDYXJkaW5hbFRhbmdlbnRzKHBvaW50cywgdGVuc2lvbikpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lSGVybWl0ZShwb2ludHMsIHRhbmdlbnRzKSB7XG4gICAgaWYgKHRhbmdlbnRzLmxlbmd0aCA8IDEgfHwgcG9pbnRzLmxlbmd0aCAhPSB0YW5nZW50cy5sZW5ndGggJiYgcG9pbnRzLmxlbmd0aCAhPSB0YW5nZW50cy5sZW5ndGggKyAyKSB7XG4gICAgICByZXR1cm4gZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKTtcbiAgICB9XG4gICAgdmFyIHF1YWQgPSBwb2ludHMubGVuZ3RoICE9IHRhbmdlbnRzLmxlbmd0aCwgcGF0aCA9IFwiXCIsIHAwID0gcG9pbnRzWzBdLCBwID0gcG9pbnRzWzFdLCB0MCA9IHRhbmdlbnRzWzBdLCB0ID0gdDAsIHBpID0gMTtcbiAgICBpZiAocXVhZCkge1xuICAgICAgcGF0aCArPSBcIlFcIiArIChwWzBdIC0gdDBbMF0gKiAyIC8gMykgKyBcIixcIiArIChwWzFdIC0gdDBbMV0gKiAyIC8gMykgKyBcIixcIiArIHBbMF0gKyBcIixcIiArIHBbMV07XG4gICAgICBwMCA9IHBvaW50c1sxXTtcbiAgICAgIHBpID0gMjtcbiAgICB9XG4gICAgaWYgKHRhbmdlbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHQgPSB0YW5nZW50c1sxXTtcbiAgICAgIHAgPSBwb2ludHNbcGldO1xuICAgICAgcGkrKztcbiAgICAgIHBhdGggKz0gXCJDXCIgKyAocDBbMF0gKyB0MFswXSkgKyBcIixcIiArIChwMFsxXSArIHQwWzFdKSArIFwiLFwiICsgKHBbMF0gLSB0WzBdKSArIFwiLFwiICsgKHBbMV0gLSB0WzFdKSArIFwiLFwiICsgcFswXSArIFwiLFwiICsgcFsxXTtcbiAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgdGFuZ2VudHMubGVuZ3RoOyBpKyssIHBpKyspIHtcbiAgICAgICAgcCA9IHBvaW50c1twaV07XG4gICAgICAgIHQgPSB0YW5nZW50c1tpXTtcbiAgICAgICAgcGF0aCArPSBcIlNcIiArIChwWzBdIC0gdFswXSkgKyBcIixcIiArIChwWzFdIC0gdFsxXSkgKyBcIixcIiArIHBbMF0gKyBcIixcIiArIHBbMV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChxdWFkKSB7XG4gICAgICB2YXIgbHAgPSBwb2ludHNbcGldO1xuICAgICAgcGF0aCArPSBcIlFcIiArIChwWzBdICsgdFswXSAqIDIgLyAzKSArIFwiLFwiICsgKHBbMV0gKyB0WzFdICogMiAvIDMpICsgXCIsXCIgKyBscFswXSArIFwiLFwiICsgbHBbMV07XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxUYW5nZW50cyhwb2ludHMsIHRlbnNpb24pIHtcbiAgICB2YXIgdGFuZ2VudHMgPSBbXSwgYSA9ICgxIC0gdGVuc2lvbikgLyAyLCBwMCwgcDEgPSBwb2ludHNbMF0sIHAyID0gcG9pbnRzWzFdLCBpID0gMSwgbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIHAwID0gcDE7XG4gICAgICBwMSA9IHAyO1xuICAgICAgcDIgPSBwb2ludHNbaV07XG4gICAgICB0YW5nZW50cy5wdXNoKFsgYSAqIChwMlswXSAtIHAwWzBdKSwgYSAqIChwMlsxXSAtIHAwWzFdKSBdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhbmdlbnRzO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXMocG9pbnRzKSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPCAzKSByZXR1cm4gZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKTtcbiAgICB2YXIgaSA9IDEsIG4gPSBwb2ludHMubGVuZ3RoLCBwaSA9IHBvaW50c1swXSwgeDAgPSBwaVswXSwgeTAgPSBwaVsxXSwgcHggPSBbIHgwLCB4MCwgeDAsIChwaSA9IHBvaW50c1sxXSlbMF0gXSwgcHkgPSBbIHkwLCB5MCwgeTAsIHBpWzFdIF0sIHBhdGggPSBbIHgwLCBcIixcIiwgeTAsIFwiTFwiLCBkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjMsIHB4KSwgXCIsXCIsIGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMywgcHkpIF07XG4gICAgcG9pbnRzLnB1c2gocG9pbnRzW24gLSAxXSk7XG4gICAgd2hpbGUgKCsraSA8PSBuKSB7XG4gICAgICBwaSA9IHBvaW50c1tpXTtcbiAgICAgIHB4LnNoaWZ0KCk7XG4gICAgICBweC5wdXNoKHBpWzBdKTtcbiAgICAgIHB5LnNoaWZ0KCk7XG4gICAgICBweS5wdXNoKHBpWzFdKTtcbiAgICAgIGQzX3N2Z19saW5lQmFzaXNCZXppZXIocGF0aCwgcHgsIHB5KTtcbiAgICB9XG4gICAgcG9pbnRzLnBvcCgpO1xuICAgIHBhdGgucHVzaChcIkxcIiwgcGkpO1xuICAgIHJldHVybiBwYXRoLmpvaW4oXCJcIik7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVCYXNpc09wZW4ocG9pbnRzKSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPCA0KSByZXR1cm4gZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKTtcbiAgICB2YXIgcGF0aCA9IFtdLCBpID0gLTEsIG4gPSBwb2ludHMubGVuZ3RoLCBwaSwgcHggPSBbIDAgXSwgcHkgPSBbIDAgXTtcbiAgICB3aGlsZSAoKytpIDwgMykge1xuICAgICAgcGkgPSBwb2ludHNbaV07XG4gICAgICBweC5wdXNoKHBpWzBdKTtcbiAgICAgIHB5LnB1c2gocGlbMV0pO1xuICAgIH1cbiAgICBwYXRoLnB1c2goZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLCBweCkgKyBcIixcIiArIGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMywgcHkpKTtcbiAgICAtLWk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIHBpID0gcG9pbnRzW2ldO1xuICAgICAgcHguc2hpZnQoKTtcbiAgICAgIHB4LnB1c2gocGlbMF0pO1xuICAgICAgcHkuc2hpZnQoKTtcbiAgICAgIHB5LnB1c2gocGlbMV0pO1xuICAgICAgZDNfc3ZnX2xpbmVCYXNpc0JlemllcihwYXRoLCBweCwgcHkpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aC5qb2luKFwiXCIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXNDbG9zZWQocG9pbnRzKSB7XG4gICAgdmFyIHBhdGgsIGkgPSAtMSwgbiA9IHBvaW50cy5sZW5ndGgsIG0gPSBuICsgNCwgcGksIHB4ID0gW10sIHB5ID0gW107XG4gICAgd2hpbGUgKCsraSA8IDQpIHtcbiAgICAgIHBpID0gcG9pbnRzW2kgJSBuXTtcbiAgICAgIHB4LnB1c2gocGlbMF0pO1xuICAgICAgcHkucHVzaChwaVsxXSk7XG4gICAgfVxuICAgIHBhdGggPSBbIGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMywgcHgpLCBcIixcIiwgZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLCBweSkgXTtcbiAgICAtLWk7XG4gICAgd2hpbGUgKCsraSA8IG0pIHtcbiAgICAgIHBpID0gcG9pbnRzW2kgJSBuXTtcbiAgICAgIHB4LnNoaWZ0KCk7XG4gICAgICBweC5wdXNoKHBpWzBdKTtcbiAgICAgIHB5LnNoaWZ0KCk7XG4gICAgICBweS5wdXNoKHBpWzFdKTtcbiAgICAgIGQzX3N2Z19saW5lQmFzaXNCZXppZXIocGF0aCwgcHgsIHB5KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGguam9pbihcIlwiKTtcbiAgfVxuICBmdW5jdGlvbiBkM19zdmdfbGluZUJ1bmRsZShwb2ludHMsIHRlbnNpb24pIHtcbiAgICB2YXIgbiA9IHBvaW50cy5sZW5ndGggLSAxO1xuICAgIGlmIChuKSB7XG4gICAgICB2YXIgeDAgPSBwb2ludHNbMF1bMF0sIHkwID0gcG9pbnRzWzBdWzFdLCBkeCA9IHBvaW50c1tuXVswXSAtIHgwLCBkeSA9IHBvaW50c1tuXVsxXSAtIHkwLCBpID0gLTEsIHAsIHQ7XG4gICAgICB3aGlsZSAoKytpIDw9IG4pIHtcbiAgICAgICAgcCA9IHBvaW50c1tpXTtcbiAgICAgICAgdCA9IGkgLyBuO1xuICAgICAgICBwWzBdID0gdGVuc2lvbiAqIHBbMF0gKyAoMSAtIHRlbnNpb24pICogKHgwICsgdCAqIGR4KTtcbiAgICAgICAgcFsxXSA9IHRlbnNpb24gKiBwWzFdICsgKDEgLSB0ZW5zaW9uKSAqICh5MCArIHQgKiBkeSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkM19zdmdfbGluZUJhc2lzKHBvaW50cyk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVEb3Q0KGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdICsgYVszXSAqIGJbM107XG4gIH1cbiAgdmFyIGQzX3N2Z19saW5lQmFzaXNCZXppZXIxID0gWyAwLCAyIC8gMywgMSAvIDMsIDAgXSwgZDNfc3ZnX2xpbmVCYXNpc0JlemllcjIgPSBbIDAsIDEgLyAzLCAyIC8gMywgMCBdLCBkM19zdmdfbGluZUJhc2lzQmV6aWVyMyA9IFsgMCwgMSAvIDYsIDIgLyAzLCAxIC8gNiBdO1xuICBmdW5jdGlvbiBkM19zdmdfbGluZUJhc2lzQmV6aWVyKHBhdGgsIHgsIHkpIHtcbiAgICBwYXRoLnB1c2goXCJDXCIsIGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMSwgeCksIFwiLFwiLCBkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjEsIHkpLCBcIixcIiwgZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIyLCB4KSwgXCIsXCIsIGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMiwgeSksIFwiLFwiLCBkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjMsIHgpLCBcIixcIiwgZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLCB5KSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVTbG9wZShwMCwgcDEpIHtcbiAgICByZXR1cm4gKHAxWzFdIC0gcDBbMV0pIC8gKHAxWzBdIC0gcDBbMF0pO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lRmluaXRlRGlmZmVyZW5jZXMocG9pbnRzKSB7XG4gICAgdmFyIGkgPSAwLCBqID0gcG9pbnRzLmxlbmd0aCAtIDEsIG0gPSBbXSwgcDAgPSBwb2ludHNbMF0sIHAxID0gcG9pbnRzWzFdLCBkID0gbVswXSA9IGQzX3N2Z19saW5lU2xvcGUocDAsIHAxKTtcbiAgICB3aGlsZSAoKytpIDwgaikge1xuICAgICAgbVtpXSA9IChkICsgKGQgPSBkM19zdmdfbGluZVNsb3BlKHAwID0gcDEsIHAxID0gcG9pbnRzW2kgKyAxXSkpKSAvIDI7XG4gICAgfVxuICAgIG1baV0gPSBkO1xuICAgIHJldHVybiBtO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lTW9ub3RvbmVUYW5nZW50cyhwb2ludHMpIHtcbiAgICB2YXIgdGFuZ2VudHMgPSBbXSwgZCwgYSwgYiwgcywgbSA9IGQzX3N2Z19saW5lRmluaXRlRGlmZmVyZW5jZXMocG9pbnRzKSwgaSA9IC0xLCBqID0gcG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgd2hpbGUgKCsraSA8IGopIHtcbiAgICAgIGQgPSBkM19zdmdfbGluZVNsb3BlKHBvaW50c1tpXSwgcG9pbnRzW2kgKyAxXSk7XG4gICAgICBpZiAoYWJzKGQpIDwgzrUpIHtcbiAgICAgICAgbVtpXSA9IG1baSArIDFdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEgPSBtW2ldIC8gZDtcbiAgICAgICAgYiA9IG1baSArIDFdIC8gZDtcbiAgICAgICAgcyA9IGEgKiBhICsgYiAqIGI7XG4gICAgICAgIGlmIChzID4gOSkge1xuICAgICAgICAgIHMgPSBkICogMyAvIE1hdGguc3FydChzKTtcbiAgICAgICAgICBtW2ldID0gcyAqIGE7XG4gICAgICAgICAgbVtpICsgMV0gPSBzICogYjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8PSBqKSB7XG4gICAgICBzID0gKHBvaW50c1tNYXRoLm1pbihqLCBpICsgMSldWzBdIC0gcG9pbnRzW01hdGgubWF4KDAsIGkgLSAxKV1bMF0pIC8gKDYgKiAoMSArIG1baV0gKiBtW2ldKSk7XG4gICAgICB0YW5nZW50cy5wdXNoKFsgcyB8fCAwLCBtW2ldICogcyB8fCAwIF0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFuZ2VudHM7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2xpbmVNb25vdG9uZShwb2ludHMpIHtcbiAgICByZXR1cm4gcG9pbnRzLmxlbmd0aCA8IDMgPyBkM19zdmdfbGluZUxpbmVhcihwb2ludHMpIDogcG9pbnRzWzBdICsgZDNfc3ZnX2xpbmVIZXJtaXRlKHBvaW50cywgZDNfc3ZnX2xpbmVNb25vdG9uZVRhbmdlbnRzKHBvaW50cykpO1xuICB9XG4gIGQzLnN2Zy5saW5lLnJhZGlhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaW5lID0gZDNfc3ZnX2xpbmUoZDNfc3ZnX2xpbmVSYWRpYWwpO1xuICAgIGxpbmUucmFkaXVzID0gbGluZS54LCBkZWxldGUgbGluZS54O1xuICAgIGxpbmUuYW5nbGUgPSBsaW5lLnksIGRlbGV0ZSBsaW5lLnk7XG4gICAgcmV0dXJuIGxpbmU7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3N2Z19saW5lUmFkaWFsKHBvaW50cykge1xuICAgIHZhciBwb2ludCwgaSA9IC0xLCBuID0gcG9pbnRzLmxlbmd0aCwgciwgYTtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgcG9pbnQgPSBwb2ludHNbaV07XG4gICAgICByID0gcG9pbnRbMF07XG4gICAgICBhID0gcG9pbnRbMV0gLSBoYWxmz4A7XG4gICAgICBwb2ludFswXSA9IHIgKiBNYXRoLmNvcyhhKTtcbiAgICAgIHBvaW50WzFdID0gciAqIE1hdGguc2luKGEpO1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3N2Z19hcmVhKHByb2plY3Rpb24pIHtcbiAgICB2YXIgeDAgPSBkM19nZW9tX3BvaW50WCwgeDEgPSBkM19nZW9tX3BvaW50WCwgeTAgPSAwLCB5MSA9IGQzX2dlb21fcG9pbnRZLCBkZWZpbmVkID0gZDNfdHJ1ZSwgaW50ZXJwb2xhdGUgPSBkM19zdmdfbGluZUxpbmVhciwgaW50ZXJwb2xhdGVLZXkgPSBpbnRlcnBvbGF0ZS5rZXksIGludGVycG9sYXRlUmV2ZXJzZSA9IGludGVycG9sYXRlLCBMID0gXCJMXCIsIHRlbnNpb24gPSAuNztcbiAgICBmdW5jdGlvbiBhcmVhKGRhdGEpIHtcbiAgICAgIHZhciBzZWdtZW50cyA9IFtdLCBwb2ludHMwID0gW10sIHBvaW50czEgPSBbXSwgaSA9IC0xLCBuID0gZGF0YS5sZW5ndGgsIGQsIGZ4MCA9IGQzX2Z1bmN0b3IoeDApLCBmeTAgPSBkM19mdW5jdG9yKHkwKSwgZngxID0geDAgPT09IHgxID8gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfSA6IGQzX2Z1bmN0b3IoeDEpLCBmeTEgPSB5MCA9PT0geTEgPyBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHk7XG4gICAgICB9IDogZDNfZnVuY3Rvcih5MSksIHgsIHk7XG4gICAgICBmdW5jdGlvbiBzZWdtZW50KCkge1xuICAgICAgICBzZWdtZW50cy5wdXNoKFwiTVwiLCBpbnRlcnBvbGF0ZShwcm9qZWN0aW9uKHBvaW50czEpLCB0ZW5zaW9uKSwgTCwgaW50ZXJwb2xhdGVSZXZlcnNlKHByb2plY3Rpb24ocG9pbnRzMC5yZXZlcnNlKCkpLCB0ZW5zaW9uKSwgXCJaXCIpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgaWYgKGRlZmluZWQuY2FsbCh0aGlzLCBkID0gZGF0YVtpXSwgaSkpIHtcbiAgICAgICAgICBwb2ludHMwLnB1c2goWyB4ID0gK2Z4MC5jYWxsKHRoaXMsIGQsIGkpLCB5ID0gK2Z5MC5jYWxsKHRoaXMsIGQsIGkpIF0pO1xuICAgICAgICAgIHBvaW50czEucHVzaChbICtmeDEuY2FsbCh0aGlzLCBkLCBpKSwgK2Z5MS5jYWxsKHRoaXMsIGQsIGkpIF0pO1xuICAgICAgICB9IGVsc2UgaWYgKHBvaW50czAubGVuZ3RoKSB7XG4gICAgICAgICAgc2VnbWVudCgpO1xuICAgICAgICAgIHBvaW50czAgPSBbXTtcbiAgICAgICAgICBwb2ludHMxID0gW107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwb2ludHMwLmxlbmd0aCkgc2VnbWVudCgpO1xuICAgICAgcmV0dXJuIHNlZ21lbnRzLmxlbmd0aCA/IHNlZ21lbnRzLmpvaW4oXCJcIikgOiBudWxsO1xuICAgIH1cbiAgICBhcmVhLnggPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB4MTtcbiAgICAgIHgwID0geDEgPSBfO1xuICAgICAgcmV0dXJuIGFyZWE7XG4gICAgfTtcbiAgICBhcmVhLngwID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geDA7XG4gICAgICB4MCA9IF87XG4gICAgICByZXR1cm4gYXJlYTtcbiAgICB9O1xuICAgIGFyZWEueDEgPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB4MTtcbiAgICAgIHgxID0gXztcbiAgICAgIHJldHVybiBhcmVhO1xuICAgIH07XG4gICAgYXJlYS55ID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geTE7XG4gICAgICB5MCA9IHkxID0gXztcbiAgICAgIHJldHVybiBhcmVhO1xuICAgIH07XG4gICAgYXJlYS55MCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHkwO1xuICAgICAgeTAgPSBfO1xuICAgICAgcmV0dXJuIGFyZWE7XG4gICAgfTtcbiAgICBhcmVhLnkxID0gZnVuY3Rpb24oXykge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geTE7XG4gICAgICB5MSA9IF87XG4gICAgICByZXR1cm4gYXJlYTtcbiAgICB9O1xuICAgIGFyZWEuZGVmaW5lZCA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRlZmluZWQ7XG4gICAgICBkZWZpbmVkID0gXztcbiAgICAgIHJldHVybiBhcmVhO1xuICAgIH07XG4gICAgYXJlYS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGludGVycG9sYXRlS2V5O1xuICAgICAgaWYgKHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIpIGludGVycG9sYXRlS2V5ID0gaW50ZXJwb2xhdGUgPSBfOyBlbHNlIGludGVycG9sYXRlS2V5ID0gKGludGVycG9sYXRlID0gZDNfc3ZnX2xpbmVJbnRlcnBvbGF0b3JzLmdldChfKSB8fCBkM19zdmdfbGluZUxpbmVhcikua2V5O1xuICAgICAgaW50ZXJwb2xhdGVSZXZlcnNlID0gaW50ZXJwb2xhdGUucmV2ZXJzZSB8fCBpbnRlcnBvbGF0ZTtcbiAgICAgIEwgPSBpbnRlcnBvbGF0ZS5jbG9zZWQgPyBcIk1cIiA6IFwiTFwiO1xuICAgICAgcmV0dXJuIGFyZWE7XG4gICAgfTtcbiAgICBhcmVhLnRlbnNpb24gPSBmdW5jdGlvbihfKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0ZW5zaW9uO1xuICAgICAgdGVuc2lvbiA9IF87XG4gICAgICByZXR1cm4gYXJlYTtcbiAgICB9O1xuICAgIHJldHVybiBhcmVhO1xuICB9XG4gIGQzX3N2Z19saW5lU3RlcEJlZm9yZS5yZXZlcnNlID0gZDNfc3ZnX2xpbmVTdGVwQWZ0ZXI7XG4gIGQzX3N2Z19saW5lU3RlcEFmdGVyLnJldmVyc2UgPSBkM19zdmdfbGluZVN0ZXBCZWZvcmU7XG4gIGQzLnN2Zy5hcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3N2Z19hcmVhKGQzX2lkZW50aXR5KTtcbiAgfTtcbiAgZDMuc3ZnLmFyZWEucmFkaWFsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZWEgPSBkM19zdmdfYXJlYShkM19zdmdfbGluZVJhZGlhbCk7XG4gICAgYXJlYS5yYWRpdXMgPSBhcmVhLngsIGRlbGV0ZSBhcmVhLng7XG4gICAgYXJlYS5pbm5lclJhZGl1cyA9IGFyZWEueDAsIGRlbGV0ZSBhcmVhLngwO1xuICAgIGFyZWEub3V0ZXJSYWRpdXMgPSBhcmVhLngxLCBkZWxldGUgYXJlYS54MTtcbiAgICBhcmVhLmFuZ2xlID0gYXJlYS55LCBkZWxldGUgYXJlYS55O1xuICAgIGFyZWEuc3RhcnRBbmdsZSA9IGFyZWEueTAsIGRlbGV0ZSBhcmVhLnkwO1xuICAgIGFyZWEuZW5kQW5nbGUgPSBhcmVhLnkxLCBkZWxldGUgYXJlYS55MTtcbiAgICByZXR1cm4gYXJlYTtcbiAgfTtcbiAgZDMuc3ZnLmNob3JkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNvdXJjZSA9IGQzX3NvdXJjZSwgdGFyZ2V0ID0gZDNfdGFyZ2V0LCByYWRpdXMgPSBkM19zdmdfY2hvcmRSYWRpdXMsIHN0YXJ0QW5nbGUgPSBkM19zdmdfYXJjU3RhcnRBbmdsZSwgZW5kQW5nbGUgPSBkM19zdmdfYXJjRW5kQW5nbGU7XG4gICAgZnVuY3Rpb24gY2hvcmQoZCwgaSkge1xuICAgICAgdmFyIHMgPSBzdWJncm91cCh0aGlzLCBzb3VyY2UsIGQsIGkpLCB0ID0gc3ViZ3JvdXAodGhpcywgdGFyZ2V0LCBkLCBpKTtcbiAgICAgIHJldHVybiBcIk1cIiArIHMucDAgKyBhcmMocy5yLCBzLnAxLCBzLmExIC0gcy5hMCkgKyAoZXF1YWxzKHMsIHQpID8gY3VydmUocy5yLCBzLnAxLCBzLnIsIHMucDApIDogY3VydmUocy5yLCBzLnAxLCB0LnIsIHQucDApICsgYXJjKHQuciwgdC5wMSwgdC5hMSAtIHQuYTApICsgY3VydmUodC5yLCB0LnAxLCBzLnIsIHMucDApKSArIFwiWlwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJncm91cChzZWxmLCBmLCBkLCBpKSB7XG4gICAgICB2YXIgc3ViZ3JvdXAgPSBmLmNhbGwoc2VsZiwgZCwgaSksIHIgPSByYWRpdXMuY2FsbChzZWxmLCBzdWJncm91cCwgaSksIGEwID0gc3RhcnRBbmdsZS5jYWxsKHNlbGYsIHN1Ymdyb3VwLCBpKSAtIGhhbGbPgCwgYTEgPSBlbmRBbmdsZS5jYWxsKHNlbGYsIHN1Ymdyb3VwLCBpKSAtIGhhbGbPgDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHI6IHIsXG4gICAgICAgIGEwOiBhMCxcbiAgICAgICAgYTE6IGExLFxuICAgICAgICBwMDogWyByICogTWF0aC5jb3MoYTApLCByICogTWF0aC5zaW4oYTApIF0sXG4gICAgICAgIHAxOiBbIHIgKiBNYXRoLmNvcyhhMSksIHIgKiBNYXRoLnNpbihhMSkgXVxuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgICAgIHJldHVybiBhLmEwID09IGIuYTAgJiYgYS5hMSA9PSBiLmExO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcmMociwgcCwgYSkge1xuICAgICAgcmV0dXJuIFwiQVwiICsgciArIFwiLFwiICsgciArIFwiIDAgXCIgKyArKGEgPiDPgCkgKyBcIiwxIFwiICsgcDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3VydmUocjAsIHAwLCByMSwgcDEpIHtcbiAgICAgIHJldHVybiBcIlEgMCwwIFwiICsgcDE7XG4gICAgfVxuICAgIGNob3JkLnJhZGl1cyA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJhZGl1cztcbiAgICAgIHJhZGl1cyA9IGQzX2Z1bmN0b3Iodik7XG4gICAgICByZXR1cm4gY2hvcmQ7XG4gICAgfTtcbiAgICBjaG9yZC5zb3VyY2UgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzb3VyY2U7XG4gICAgICBzb3VyY2UgPSBkM19mdW5jdG9yKHYpO1xuICAgICAgcmV0dXJuIGNob3JkO1xuICAgIH07XG4gICAgY2hvcmQudGFyZ2V0ID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGFyZ2V0O1xuICAgICAgdGFyZ2V0ID0gZDNfZnVuY3Rvcih2KTtcbiAgICAgIHJldHVybiBjaG9yZDtcbiAgICB9O1xuICAgIGNob3JkLnN0YXJ0QW5nbGUgPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzdGFydEFuZ2xlO1xuICAgICAgc3RhcnRBbmdsZSA9IGQzX2Z1bmN0b3Iodik7XG4gICAgICByZXR1cm4gY2hvcmQ7XG4gICAgfTtcbiAgICBjaG9yZC5lbmRBbmdsZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGVuZEFuZ2xlO1xuICAgICAgZW5kQW5nbGUgPSBkM19mdW5jdG9yKHYpO1xuICAgICAgcmV0dXJuIGNob3JkO1xuICAgIH07XG4gICAgcmV0dXJuIGNob3JkO1xuICB9O1xuICBmdW5jdGlvbiBkM19zdmdfY2hvcmRSYWRpdXMoZCkge1xuICAgIHJldHVybiBkLnJhZGl1cztcbiAgfVxuICBkMy5zdmcuZGlhZ29uYWwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc291cmNlID0gZDNfc291cmNlLCB0YXJnZXQgPSBkM190YXJnZXQsIHByb2plY3Rpb24gPSBkM19zdmdfZGlhZ29uYWxQcm9qZWN0aW9uO1xuICAgIGZ1bmN0aW9uIGRpYWdvbmFsKGQsIGkpIHtcbiAgICAgIHZhciBwMCA9IHNvdXJjZS5jYWxsKHRoaXMsIGQsIGkpLCBwMyA9IHRhcmdldC5jYWxsKHRoaXMsIGQsIGkpLCBtID0gKHAwLnkgKyBwMy55KSAvIDIsIHAgPSBbIHAwLCB7XG4gICAgICAgIHg6IHAwLngsXG4gICAgICAgIHk6IG1cbiAgICAgIH0sIHtcbiAgICAgICAgeDogcDMueCxcbiAgICAgICAgeTogbVxuICAgICAgfSwgcDMgXTtcbiAgICAgIHAgPSBwLm1hcChwcm9qZWN0aW9uKTtcbiAgICAgIHJldHVybiBcIk1cIiArIHBbMF0gKyBcIkNcIiArIHBbMV0gKyBcIiBcIiArIHBbMl0gKyBcIiBcIiArIHBbM107XG4gICAgfVxuICAgIGRpYWdvbmFsLnNvdXJjZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHNvdXJjZTtcbiAgICAgIHNvdXJjZSA9IGQzX2Z1bmN0b3IoeCk7XG4gICAgICByZXR1cm4gZGlhZ29uYWw7XG4gICAgfTtcbiAgICBkaWFnb25hbC50YXJnZXQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0YXJnZXQ7XG4gICAgICB0YXJnZXQgPSBkM19mdW5jdG9yKHgpO1xuICAgICAgcmV0dXJuIGRpYWdvbmFsO1xuICAgIH07XG4gICAgZGlhZ29uYWwucHJvamVjdGlvbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHByb2plY3Rpb247XG4gICAgICBwcm9qZWN0aW9uID0geDtcbiAgICAgIHJldHVybiBkaWFnb25hbDtcbiAgICB9O1xuICAgIHJldHVybiBkaWFnb25hbDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc3ZnX2RpYWdvbmFsUHJvamVjdGlvbihkKSB7XG4gICAgcmV0dXJuIFsgZC54LCBkLnkgXTtcbiAgfVxuICBkMy5zdmcuZGlhZ29uYWwucmFkaWFsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCksIHByb2plY3Rpb24gPSBkM19zdmdfZGlhZ29uYWxQcm9qZWN0aW9uLCBwcm9qZWN0aW9uXyA9IGRpYWdvbmFsLnByb2plY3Rpb247XG4gICAgZGlhZ29uYWwucHJvamVjdGlvbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gcHJvamVjdGlvbl8oZDNfc3ZnX2RpYWdvbmFsUmFkaWFsUHJvamVjdGlvbihwcm9qZWN0aW9uID0geCkpIDogcHJvamVjdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBkaWFnb25hbDtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfc3ZnX2RpYWdvbmFsUmFkaWFsUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGQgPSBwcm9qZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHIgPSBkWzBdLCBhID0gZFsxXSAtIGhhbGbPgDtcbiAgICAgIHJldHVybiBbIHIgKiBNYXRoLmNvcyhhKSwgciAqIE1hdGguc2luKGEpIF07XG4gICAgfTtcbiAgfVxuICBkMy5zdmcuc3ltYm9sID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHR5cGUgPSBkM19zdmdfc3ltYm9sVHlwZSwgc2l6ZSA9IGQzX3N2Z19zeW1ib2xTaXplO1xuICAgIGZ1bmN0aW9uIHN5bWJvbChkLCBpKSB7XG4gICAgICByZXR1cm4gKGQzX3N2Z19zeW1ib2xzLmdldCh0eXBlLmNhbGwodGhpcywgZCwgaSkpIHx8IGQzX3N2Z19zeW1ib2xDaXJjbGUpKHNpemUuY2FsbCh0aGlzLCBkLCBpKSk7XG4gICAgfVxuICAgIHN5bWJvbC50eXBlID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdHlwZTtcbiAgICAgIHR5cGUgPSBkM19mdW5jdG9yKHgpO1xuICAgICAgcmV0dXJuIHN5bWJvbDtcbiAgICB9O1xuICAgIHN5bWJvbC5zaXplID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gc2l6ZTtcbiAgICAgIHNpemUgPSBkM19mdW5jdG9yKHgpO1xuICAgICAgcmV0dXJuIHN5bWJvbDtcbiAgICB9O1xuICAgIHJldHVybiBzeW1ib2w7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3N2Z19zeW1ib2xTaXplKCkge1xuICAgIHJldHVybiA2NDtcbiAgfVxuICBmdW5jdGlvbiBkM19zdmdfc3ltYm9sVHlwZSgpIHtcbiAgICByZXR1cm4gXCJjaXJjbGVcIjtcbiAgfVxuICBmdW5jdGlvbiBkM19zdmdfc3ltYm9sQ2lyY2xlKHNpemUpIHtcbiAgICB2YXIgciA9IE1hdGguc3FydChzaXplIC8gz4ApO1xuICAgIHJldHVybiBcIk0wLFwiICsgciArIFwiQVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMSwxIDAsXCIgKyAtciArIFwiQVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMSwxIDAsXCIgKyByICsgXCJaXCI7XG4gIH1cbiAgdmFyIGQzX3N2Z19zeW1ib2xzID0gZDMubWFwKHtcbiAgICBjaXJjbGU6IGQzX3N2Z19zeW1ib2xDaXJjbGUsXG4gICAgY3Jvc3M6IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgIHZhciByID0gTWF0aC5zcXJ0KHNpemUgLyA1KSAvIDI7XG4gICAgICByZXR1cm4gXCJNXCIgKyAtMyAqIHIgKyBcIixcIiArIC1yICsgXCJIXCIgKyAtciArIFwiVlwiICsgLTMgKiByICsgXCJIXCIgKyByICsgXCJWXCIgKyAtciArIFwiSFwiICsgMyAqIHIgKyBcIlZcIiArIHIgKyBcIkhcIiArIHIgKyBcIlZcIiArIDMgKiByICsgXCJIXCIgKyAtciArIFwiVlwiICsgciArIFwiSFwiICsgLTMgKiByICsgXCJaXCI7XG4gICAgfSxcbiAgICBkaWFtb25kOiBmdW5jdGlvbihzaXplKSB7XG4gICAgICB2YXIgcnkgPSBNYXRoLnNxcnQoc2l6ZSAvICgyICogZDNfc3ZnX3N5bWJvbFRhbjMwKSksIHJ4ID0gcnkgKiBkM19zdmdfc3ltYm9sVGFuMzA7XG4gICAgICByZXR1cm4gXCJNMCxcIiArIC1yeSArIFwiTFwiICsgcnggKyBcIiwwXCIgKyBcIiAwLFwiICsgcnkgKyBcIiBcIiArIC1yeCArIFwiLDBcIiArIFwiWlwiO1xuICAgIH0sXG4gICAgc3F1YXJlOiBmdW5jdGlvbihzaXplKSB7XG4gICAgICB2YXIgciA9IE1hdGguc3FydChzaXplKSAvIDI7XG4gICAgICByZXR1cm4gXCJNXCIgKyAtciArIFwiLFwiICsgLXIgKyBcIkxcIiArIHIgKyBcIixcIiArIC1yICsgXCIgXCIgKyByICsgXCIsXCIgKyByICsgXCIgXCIgKyAtciArIFwiLFwiICsgciArIFwiWlwiO1xuICAgIH0sXG4gICAgXCJ0cmlhbmdsZS1kb3duXCI6IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgIHZhciByeCA9IE1hdGguc3FydChzaXplIC8gZDNfc3ZnX3N5bWJvbFNxcnQzKSwgcnkgPSByeCAqIGQzX3N2Z19zeW1ib2xTcXJ0MyAvIDI7XG4gICAgICByZXR1cm4gXCJNMCxcIiArIHJ5ICsgXCJMXCIgKyByeCArIFwiLFwiICsgLXJ5ICsgXCIgXCIgKyAtcnggKyBcIixcIiArIC1yeSArIFwiWlwiO1xuICAgIH0sXG4gICAgXCJ0cmlhbmdsZS11cFwiOiBmdW5jdGlvbihzaXplKSB7XG4gICAgICB2YXIgcnggPSBNYXRoLnNxcnQoc2l6ZSAvIGQzX3N2Z19zeW1ib2xTcXJ0MyksIHJ5ID0gcnggKiBkM19zdmdfc3ltYm9sU3FydDMgLyAyO1xuICAgICAgcmV0dXJuIFwiTTAsXCIgKyAtcnkgKyBcIkxcIiArIHJ4ICsgXCIsXCIgKyByeSArIFwiIFwiICsgLXJ4ICsgXCIsXCIgKyByeSArIFwiWlwiO1xuICAgIH1cbiAgfSk7XG4gIGQzLnN2Zy5zeW1ib2xUeXBlcyA9IGQzX3N2Z19zeW1ib2xzLmtleXMoKTtcbiAgdmFyIGQzX3N2Z19zeW1ib2xTcXJ0MyA9IE1hdGguc3FydCgzKSwgZDNfc3ZnX3N5bWJvbFRhbjMwID0gTWF0aC50YW4oMzAgKiBkM19yYWRpYW5zKTtcbiAgZDNfc2VsZWN0aW9uUHJvdG90eXBlLnRyYW5zaXRpb24gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGlkID0gZDNfdHJhbnNpdGlvbkluaGVyaXRJZCB8fCArK2QzX3RyYW5zaXRpb25JZCwgbnMgPSBkM190cmFuc2l0aW9uTmFtZXNwYWNlKG5hbWUpLCBzdWJncm91cHMgPSBbXSwgc3ViZ3JvdXAsIG5vZGUsIHRyYW5zaXRpb24gPSBkM190cmFuc2l0aW9uSW5oZXJpdCB8fCB7XG4gICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgZWFzZTogZDNfZWFzZV9jdWJpY0luT3V0LFxuICAgICAgZGVsYXk6IDAsXG4gICAgICBkdXJhdGlvbjogMjUwXG4gICAgfTtcbiAgICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTsgKSB7XG4gICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IC0xLCBuID0gZ3JvdXAubGVuZ3RoOyArK2kgPCBuOyApIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgZDNfdHJhbnNpdGlvbk5vZGUobm9kZSwgaSwgbnMsIGlkLCB0cmFuc2l0aW9uKTtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLCBucywgaWQpO1xuICB9O1xuICBkM19zZWxlY3Rpb25Qcm90b3R5cGUuaW50ZXJydXB0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLmVhY2gobmFtZSA9PSBudWxsID8gZDNfc2VsZWN0aW9uX2ludGVycnVwdCA6IGQzX3NlbGVjdGlvbl9pbnRlcnJ1cHROUyhkM190cmFuc2l0aW9uTmFtZXNwYWNlKG5hbWUpKSk7XG4gIH07XG4gIHZhciBkM19zZWxlY3Rpb25faW50ZXJydXB0ID0gZDNfc2VsZWN0aW9uX2ludGVycnVwdE5TKGQzX3RyYW5zaXRpb25OYW1lc3BhY2UoKSk7XG4gIGZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9pbnRlcnJ1cHROUyhucykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsb2NrLCBhY3RpdmVJZCwgYWN0aXZlO1xuICAgICAgaWYgKChsb2NrID0gdGhpc1tuc10pICYmIChhY3RpdmUgPSBsb2NrW2FjdGl2ZUlkID0gbG9jay5hY3RpdmVdKSkge1xuICAgICAgICBhY3RpdmUudGltZXIuYyA9IG51bGw7XG4gICAgICAgIGFjdGl2ZS50aW1lci50ID0gTmFOO1xuICAgICAgICBpZiAoLS1sb2NrLmNvdW50KSBkZWxldGUgbG9ja1thY3RpdmVJZF07IGVsc2UgZGVsZXRlIHRoaXNbbnNdO1xuICAgICAgICBsb2NrLmFjdGl2ZSArPSAuNTtcbiAgICAgICAgYWN0aXZlLmV2ZW50ICYmIGFjdGl2ZS5ldmVudC5pbnRlcnJ1cHQuY2FsbCh0aGlzLCB0aGlzLl9fZGF0YV9fLCBhY3RpdmUuaW5kZXgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZDNfdHJhbnNpdGlvbihncm91cHMsIG5zLCBpZCkge1xuICAgIGQzX3N1YmNsYXNzKGdyb3VwcywgZDNfdHJhbnNpdGlvblByb3RvdHlwZSk7XG4gICAgZ3JvdXBzLm5hbWVzcGFjZSA9IG5zO1xuICAgIGdyb3Vwcy5pZCA9IGlkO1xuICAgIHJldHVybiBncm91cHM7XG4gIH1cbiAgdmFyIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUgPSBbXSwgZDNfdHJhbnNpdGlvbklkID0gMCwgZDNfdHJhbnNpdGlvbkluaGVyaXRJZCwgZDNfdHJhbnNpdGlvbkluaGVyaXQ7XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuY2FsbCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5jYWxsO1xuICBkM190cmFuc2l0aW9uUHJvdG90eXBlLmVtcHR5ID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVtcHR5O1xuICBkM190cmFuc2l0aW9uUHJvdG90eXBlLm5vZGUgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUubm9kZTtcbiAgZDNfdHJhbnNpdGlvblByb3RvdHlwZS5zaXplID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemU7XG4gIGQzLnRyYW5zaXRpb24gPSBmdW5jdGlvbihzZWxlY3Rpb24sIG5hbWUpIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uICYmIHNlbGVjdGlvbi50cmFuc2l0aW9uID8gZDNfdHJhbnNpdGlvbkluaGVyaXRJZCA/IHNlbGVjdGlvbi50cmFuc2l0aW9uKG5hbWUpIDogc2VsZWN0aW9uIDogZDMuc2VsZWN0aW9uKCkudHJhbnNpdGlvbihzZWxlY3Rpb24pO1xuICB9O1xuICBkMy50cmFuc2l0aW9uLnByb3RvdHlwZSA9IGQzX3RyYW5zaXRpb25Qcm90b3R5cGU7XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICB2YXIgaWQgPSB0aGlzLmlkLCBucyA9IHRoaXMubmFtZXNwYWNlLCBzdWJncm91cHMgPSBbXSwgc3ViZ3JvdXAsIHN1Ym5vZGUsIG5vZGU7XG4gICAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOyApIHtcbiAgICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgICAgZm9yICh2YXIgZ3JvdXAgPSB0aGlzW2pdLCBpID0gLTEsIG4gPSBncm91cC5sZW5ndGg7ICsraSA8IG47ICkge1xuICAgICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKHN1Ym5vZGUgPSBzZWxlY3Rvci5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSkge1xuICAgICAgICAgIGlmIChcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICAgICAgZDNfdHJhbnNpdGlvbk5vZGUoc3Vibm9kZSwgaSwgbnMsIGlkLCBub2RlW25zXVtpZF0pO1xuICAgICAgICAgIHN1Ymdyb3VwLnB1c2goc3Vibm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3ViZ3JvdXAucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZDNfdHJhbnNpdGlvbihzdWJncm91cHMsIG5zLCBpZCk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuc2VsZWN0QWxsID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICB2YXIgaWQgPSB0aGlzLmlkLCBucyA9IHRoaXMubmFtZXNwYWNlLCBzdWJncm91cHMgPSBbXSwgc3ViZ3JvdXAsIHN1Ym5vZGVzLCBub2RlLCBzdWJub2RlLCB0cmFuc2l0aW9uO1xuICAgIHNlbGVjdG9yID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTsgKSB7XG4gICAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjsgKSB7XG4gICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgICB0cmFuc2l0aW9uID0gbm9kZVtuc11baWRdO1xuICAgICAgICAgIHN1Ym5vZGVzID0gc2VsZWN0b3IuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKTtcbiAgICAgICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICAgICAgICBmb3IgKHZhciBrID0gLTEsIG8gPSBzdWJub2Rlcy5sZW5ndGg7ICsrayA8IG87ICkge1xuICAgICAgICAgICAgaWYgKHN1Ym5vZGUgPSBzdWJub2Rlc1trXSkgZDNfdHJhbnNpdGlvbk5vZGUoc3Vibm9kZSwgaywgbnMsIGlkLCB0cmFuc2l0aW9uKTtcbiAgICAgICAgICAgIHN1Ymdyb3VwLnB1c2goc3Vibm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkM190cmFuc2l0aW9uKHN1Ymdyb3VwcywgbnMsIGlkKTtcbiAgfTtcbiAgZDNfdHJhbnNpdGlvblByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpIHtcbiAgICB2YXIgc3ViZ3JvdXBzID0gW10sIHN1Ymdyb3VwLCBncm91cCwgbm9kZTtcbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkM19zZWxlY3Rpb25fZmlsdGVyKGZpbHRlcik7XG4gICAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXAgPSBbXSk7XG4gICAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBmaWx0ZXIuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKSkge1xuICAgICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLm5hbWVzcGFjZSwgdGhpcy5pZCk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUudHdlZW4gPSBmdW5jdGlvbihuYW1lLCB0d2Vlbikge1xuICAgIHZhciBpZCA9IHRoaXMuaWQsIG5zID0gdGhpcy5uYW1lc3BhY2U7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gdGhpcy5ub2RlKClbbnNdW2lkXS50d2Vlbi5nZXQobmFtZSk7XG4gICAgcmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsIHR3ZWVuID09IG51bGwgPyBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlW25zXVtpZF0udHdlZW4ucmVtb3ZlKG5hbWUpO1xuICAgIH0gOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlW25zXVtpZF0udHdlZW4uc2V0KG5hbWUsIHR3ZWVuKTtcbiAgICB9KTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfdHJhbnNpdGlvbl90d2Vlbihncm91cHMsIG5hbWUsIHZhbHVlLCB0d2Vlbikge1xuICAgIHZhciBpZCA9IGdyb3Vwcy5pZCwgbnMgPSBncm91cHMubmFtZXNwYWNlO1xuICAgIHJldHVybiBkM19zZWxlY3Rpb25fZWFjaChncm91cHMsIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb24obm9kZSwgaSwgaikge1xuICAgICAgbm9kZVtuc11baWRdLnR3ZWVuLnNldChuYW1lLCB0d2Vlbih2YWx1ZS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKSk7XG4gICAgfSA6ICh2YWx1ZSA9IHR3ZWVuKHZhbHVlKSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZVtuc11baWRdLnR3ZWVuLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgfSkpO1xuICB9XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuYXR0ciA9IGZ1bmN0aW9uKG5hbWVOUywgdmFsdWUpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIGZvciAodmFsdWUgaW4gbmFtZU5TKSB0aGlzLmF0dHIodmFsdWUsIG5hbWVOU1t2YWx1ZV0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHZhciBpbnRlcnBvbGF0ZSA9IG5hbWVOUyA9PSBcInRyYW5zZm9ybVwiID8gZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm0gOiBkM19pbnRlcnBvbGF0ZSwgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZU5TKTtcbiAgICBmdW5jdGlvbiBhdHRyTnVsbCgpIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhdHRyTnVsbE5TKCkge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXR0clR3ZWVuKGIpIHtcbiAgICAgIHJldHVybiBiID09IG51bGwgPyBhdHRyTnVsbCA6IChiICs9IFwiXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpLCBpO1xuICAgICAgICByZXR1cm4gYSAhPT0gYiAmJiAoaSA9IGludGVycG9sYXRlKGEsIGIpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgaSh0KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGIpIHtcbiAgICAgIHJldHVybiBiID09IG51bGwgPyBhdHRyTnVsbE5TIDogKGIgKz0gXCJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKSwgaTtcbiAgICAgICAgcmV0dXJuIGEgIT09IGIgJiYgKGkgPSBpbnRlcnBvbGF0ZShhLCBiKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgaSh0KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBkM190cmFuc2l0aW9uX3R3ZWVuKHRoaXMsIFwiYXR0ci5cIiArIG5hbWVOUywgdmFsdWUsIG5hbWUubG9jYWwgPyBhdHRyVHdlZW5OUyA6IGF0dHJUd2Vlbik7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuYXR0clR3ZWVuID0gZnVuY3Rpb24obmFtZU5TLCB0d2Vlbikge1xuICAgIHZhciBuYW1lID0gZDMubnMucXVhbGlmeShuYW1lTlMpO1xuICAgIGZ1bmN0aW9uIGF0dHJUd2VlbihkLCBpKSB7XG4gICAgICB2YXIgZiA9IHR3ZWVuLmNhbGwodGhpcywgZCwgaSwgdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSkpO1xuICAgICAgcmV0dXJuIGYgJiYgZnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBmKHQpKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGQsIGkpIHtcbiAgICAgIHZhciBmID0gdHdlZW4uY2FsbCh0aGlzLCBkLCBpLCB0aGlzLmdldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpKTtcbiAgICAgIHJldHVybiBmICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCBmKHQpKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnR3ZWVuKFwiYXR0ci5cIiArIG5hbWVOUywgbmFtZS5sb2NhbCA/IGF0dHJUd2Vlbk5TIDogYXR0clR3ZWVuKTtcbiAgfTtcbiAgZDNfdHJhbnNpdGlvblByb3RvdHlwZS5zdHlsZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAobiA8IDMpIHtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAobiA8IDIpIHZhbHVlID0gXCJcIjtcbiAgICAgICAgZm9yIChwcmlvcml0eSBpbiBuYW1lKSB0aGlzLnN0eWxlKHByaW9yaXR5LCBuYW1lW3ByaW9yaXR5XSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHByaW9yaXR5ID0gXCJcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3R5bGVOdWxsKCkge1xuICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3R5bGVTdHJpbmcoYikge1xuICAgICAgcmV0dXJuIGIgPT0gbnVsbCA/IHN0eWxlTnVsbCA6IChiICs9IFwiXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IGQzX3dpbmRvdyh0aGlzKS5nZXRDb21wdXRlZFN0eWxlKHRoaXMsIG51bGwpLmdldFByb3BlcnR5VmFsdWUobmFtZSksIGk7XG4gICAgICAgIHJldHVybiBhICE9PSBiICYmIChpID0gZDNfaW50ZXJwb2xhdGUoYSwgYiksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIGkodCksIHByaW9yaXR5KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGQzX3RyYW5zaXRpb25fdHdlZW4odGhpcywgXCJzdHlsZS5cIiArIG5hbWUsIHZhbHVlLCBzdHlsZVN0cmluZyk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuc3R5bGVUd2VlbiA9IGZ1bmN0aW9uKG5hbWUsIHR3ZWVuLCBwcmlvcml0eSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgcHJpb3JpdHkgPSBcIlwiO1xuICAgIGZ1bmN0aW9uIHN0eWxlVHdlZW4oZCwgaSkge1xuICAgICAgdmFyIGYgPSB0d2Vlbi5jYWxsKHRoaXMsIGQsIGksIGQzX3dpbmRvdyh0aGlzKS5nZXRDb21wdXRlZFN0eWxlKHRoaXMsIG51bGwpLmdldFByb3BlcnR5VmFsdWUobmFtZSkpO1xuICAgICAgcmV0dXJuIGYgJiYgZnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIGYodCksIHByaW9yaXR5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnR3ZWVuKFwic3R5bGUuXCIgKyBuYW1lLCBzdHlsZVR3ZWVuKTtcbiAgfTtcbiAgZDNfdHJhbnNpdGlvblByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZDNfdHJhbnNpdGlvbl90d2Vlbih0aGlzLCBcInRleHRcIiwgdmFsdWUsIGQzX3RyYW5zaXRpb25fdGV4dCk7XG4gIH07XG4gIGZ1bmN0aW9uIGQzX3RyYW5zaXRpb25fdGV4dChiKSB7XG4gICAgaWYgKGIgPT0gbnVsbCkgYiA9IFwiXCI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50ZXh0Q29udGVudCA9IGI7XG4gICAgfTtcbiAgfVxuICBkM190cmFuc2l0aW9uUHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBucyA9IHRoaXMubmFtZXNwYWNlO1xuICAgIHJldHVybiB0aGlzLmVhY2goXCJlbmQudHJhbnNpdGlvblwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwO1xuICAgICAgaWYgKHRoaXNbbnNdLmNvdW50IDwgMiAmJiAocCA9IHRoaXMucGFyZW50Tm9kZSkpIHAucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgfSk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuZWFzZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGlkID0gdGhpcy5pZCwgbnMgPSB0aGlzLm5hbWVzcGFjZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHJldHVybiB0aGlzLm5vZGUoKVtuc11baWRdLmVhc2U7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB2YWx1ZSA9IGQzLmVhc2UuYXBwbHkoZDMsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIG5vZGVbbnNdW2lkXS5lYXNlID0gdmFsdWU7XG4gICAgfSk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBpZCA9IHRoaXMuaWQsIG5zID0gdGhpcy5uYW1lc3BhY2U7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gdGhpcy5ub2RlKClbbnNdW2lkXS5kZWxheTtcbiAgICByZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcywgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBmdW5jdGlvbihub2RlLCBpLCBqKSB7XG4gICAgICBub2RlW25zXVtpZF0uZGVsYXkgPSArdmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKTtcbiAgICB9IDogKHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlW25zXVtpZF0uZGVsYXkgPSB2YWx1ZTtcbiAgICB9KSk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBpZCA9IHRoaXMuaWQsIG5zID0gdGhpcy5uYW1lc3BhY2U7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gdGhpcy5ub2RlKClbbnNdW2lkXS5kdXJhdGlvbjtcbiAgICByZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcywgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBmdW5jdGlvbihub2RlLCBpLCBqKSB7XG4gICAgICBub2RlW25zXVtpZF0uZHVyYXRpb24gPSBNYXRoLm1heCgxLCB2YWx1ZS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGopKTtcbiAgICB9IDogKHZhbHVlID0gTWF0aC5tYXgoMSwgdmFsdWUpLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlW25zXVtpZF0uZHVyYXRpb24gPSB2YWx1ZTtcbiAgICB9KSk7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUuZWFjaCA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGlkID0gdGhpcy5pZCwgbnMgPSB0aGlzLm5hbWVzcGFjZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHZhciBpbmhlcml0ID0gZDNfdHJhbnNpdGlvbkluaGVyaXQsIGluaGVyaXRJZCA9IGQzX3RyYW5zaXRpb25Jbmhlcml0SWQ7XG4gICAgICB0cnkge1xuICAgICAgICBkM190cmFuc2l0aW9uSW5oZXJpdElkID0gaWQ7XG4gICAgICAgIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsIGZ1bmN0aW9uKG5vZGUsIGksIGopIHtcbiAgICAgICAgICBkM190cmFuc2l0aW9uSW5oZXJpdCA9IG5vZGVbbnNdW2lkXTtcbiAgICAgICAgICB0eXBlLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaik7XG4gICAgICAgIH0pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZDNfdHJhbnNpdGlvbkluaGVyaXQgPSBpbmhlcml0O1xuICAgICAgICBkM190cmFuc2l0aW9uSW5oZXJpdElkID0gaW5oZXJpdElkO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gbm9kZVtuc11baWRdO1xuICAgICAgICAodHJhbnNpdGlvbi5ldmVudCB8fCAodHJhbnNpdGlvbi5ldmVudCA9IGQzLmRpc3BhdGNoKFwic3RhcnRcIiwgXCJlbmRcIiwgXCJpbnRlcnJ1cHRcIikpKS5vbih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGQzX3RyYW5zaXRpb25Qcm90b3R5cGUudHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZDAgPSB0aGlzLmlkLCBpZDEgPSArK2QzX3RyYW5zaXRpb25JZCwgbnMgPSB0aGlzLm5hbWVzcGFjZSwgc3ViZ3JvdXBzID0gW10sIHN1Ymdyb3VwLCBncm91cCwgbm9kZSwgdHJhbnNpdGlvbjtcbiAgICBmb3IgKHZhciBqID0gMCwgbSA9IHRoaXMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IFtdKTtcbiAgICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICAgIHRyYW5zaXRpb24gPSBub2RlW25zXVtpZDBdO1xuICAgICAgICAgIGQzX3RyYW5zaXRpb25Ob2RlKG5vZGUsIGksIG5zLCBpZDEsIHtcbiAgICAgICAgICAgIHRpbWU6IHRyYW5zaXRpb24udGltZSxcbiAgICAgICAgICAgIGVhc2U6IHRyYW5zaXRpb24uZWFzZSxcbiAgICAgICAgICAgIGRlbGF5OiB0cmFuc2l0aW9uLmRlbGF5ICsgdHJhbnNpdGlvbi5kdXJhdGlvbixcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0cmFuc2l0aW9uLmR1cmF0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLCBucywgaWQxKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfdHJhbnNpdGlvbk5hbWVzcGFjZShuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUgPT0gbnVsbCA/IFwiX190cmFuc2l0aW9uX19cIiA6IFwiX190cmFuc2l0aW9uX1wiICsgbmFtZSArIFwiX19cIjtcbiAgfVxuICBmdW5jdGlvbiBkM190cmFuc2l0aW9uTm9kZShub2RlLCBpLCBucywgaWQsIGluaGVyaXQpIHtcbiAgICB2YXIgbG9jayA9IG5vZGVbbnNdIHx8IChub2RlW25zXSA9IHtcbiAgICAgIGFjdGl2ZTogMCxcbiAgICAgIGNvdW50OiAwXG4gICAgfSksIHRyYW5zaXRpb24gPSBsb2NrW2lkXSwgdGltZSwgdGltZXIsIGR1cmF0aW9uLCBlYXNlLCB0d2VlbnM7XG4gICAgZnVuY3Rpb24gc2NoZWR1bGUoZWxhcHNlZCkge1xuICAgICAgdmFyIGRlbGF5ID0gdHJhbnNpdGlvbi5kZWxheTtcbiAgICAgIHRpbWVyLnQgPSBkZWxheSArIHRpbWU7XG4gICAgICBpZiAoZGVsYXkgPD0gZWxhcHNlZCkgcmV0dXJuIHN0YXJ0KGVsYXBzZWQgLSBkZWxheSk7XG4gICAgICB0aW1lci5jID0gc3RhcnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0YXJ0KGVsYXBzZWQpIHtcbiAgICAgIHZhciBhY3RpdmVJZCA9IGxvY2suYWN0aXZlLCBhY3RpdmUgPSBsb2NrW2FjdGl2ZUlkXTtcbiAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgYWN0aXZlLnRpbWVyLmMgPSBudWxsO1xuICAgICAgICBhY3RpdmUudGltZXIudCA9IE5hTjtcbiAgICAgICAgLS1sb2NrLmNvdW50O1xuICAgICAgICBkZWxldGUgbG9ja1thY3RpdmVJZF07XG4gICAgICAgIGFjdGl2ZS5ldmVudCAmJiBhY3RpdmUuZXZlbnQuaW50ZXJydXB0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgYWN0aXZlLmluZGV4KTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGNhbmNlbElkIGluIGxvY2spIHtcbiAgICAgICAgaWYgKCtjYW5jZWxJZCA8IGlkKSB7XG4gICAgICAgICAgdmFyIGNhbmNlbCA9IGxvY2tbY2FuY2VsSWRdO1xuICAgICAgICAgIGNhbmNlbC50aW1lci5jID0gbnVsbDtcbiAgICAgICAgICBjYW5jZWwudGltZXIudCA9IE5hTjtcbiAgICAgICAgICAtLWxvY2suY291bnQ7XG4gICAgICAgICAgZGVsZXRlIGxvY2tbY2FuY2VsSWRdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aW1lci5jID0gdGljaztcbiAgICAgIGQzX3RpbWVyKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGltZXIuYyAmJiB0aWNrKGVsYXBzZWQgfHwgMSkpIHtcbiAgICAgICAgICB0aW1lci5jID0gbnVsbDtcbiAgICAgICAgICB0aW1lci50ID0gTmFOO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSwgMCwgdGltZSk7XG4gICAgICBsb2NrLmFjdGl2ZSA9IGlkO1xuICAgICAgdHJhbnNpdGlvbi5ldmVudCAmJiB0cmFuc2l0aW9uLmV2ZW50LnN0YXJ0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSk7XG4gICAgICB0d2VlbnMgPSBbXTtcbiAgICAgIHRyYW5zaXRpb24udHdlZW4uZm9yRWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9IHZhbHVlLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSkpIHtcbiAgICAgICAgICB0d2VlbnMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWFzZSA9IHRyYW5zaXRpb24uZWFzZTtcbiAgICAgIGR1cmF0aW9uID0gdHJhbnNpdGlvbi5kdXJhdGlvbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGljayhlbGFwc2VkKSB7XG4gICAgICB2YXIgdCA9IGVsYXBzZWQgLyBkdXJhdGlvbiwgZSA9IGVhc2UodCksIG4gPSB0d2VlbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKG4gPiAwKSB7XG4gICAgICAgIHR3ZWVuc1stLW5dLmNhbGwobm9kZSwgZSk7XG4gICAgICB9XG4gICAgICBpZiAodCA+PSAxKSB7XG4gICAgICAgIHRyYW5zaXRpb24uZXZlbnQgJiYgdHJhbnNpdGlvbi5ldmVudC5lbmQuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpKTtcbiAgICAgICAgaWYgKC0tbG9jay5jb3VudCkgZGVsZXRlIGxvY2tbaWRdOyBlbHNlIGRlbGV0ZSBub2RlW25zXTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNpdGlvbikge1xuICAgICAgdGltZSA9IGluaGVyaXQudGltZTtcbiAgICAgIHRpbWVyID0gZDNfdGltZXIoc2NoZWR1bGUsIDAsIHRpbWUpO1xuICAgICAgdHJhbnNpdGlvbiA9IGxvY2tbaWRdID0ge1xuICAgICAgICB0d2VlbjogbmV3IGQzX01hcCgpLFxuICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICB0aW1lcjogdGltZXIsXG4gICAgICAgIGRlbGF5OiBpbmhlcml0LmRlbGF5LFxuICAgICAgICBkdXJhdGlvbjogaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgZWFzZTogaW5oZXJpdC5lYXNlLFxuICAgICAgICBpbmRleDogaVxuICAgICAgfTtcbiAgICAgIGluaGVyaXQgPSBudWxsO1xuICAgICAgKytsb2NrLmNvdW50O1xuICAgIH1cbiAgfVxuICBkMy5zdmcuYXhpcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpLCBvcmllbnQgPSBkM19zdmdfYXhpc0RlZmF1bHRPcmllbnQsIGlubmVyVGlja1NpemUgPSA2LCBvdXRlclRpY2tTaXplID0gNiwgdGlja1BhZGRpbmcgPSAzLCB0aWNrQXJndW1lbnRzXyA9IFsgMTAgXSwgdGlja1ZhbHVlcyA9IG51bGwsIHRpY2tGb3JtYXRfO1xuICAgIGZ1bmN0aW9uIGF4aXMoZykge1xuICAgICAgZy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZyA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAgICAgdmFyIHNjYWxlMCA9IHRoaXMuX19jaGFydF9fIHx8IHNjYWxlLCBzY2FsZTEgPSB0aGlzLl9fY2hhcnRfXyA9IHNjYWxlLmNvcHkoKTtcbiAgICAgICAgdmFyIHRpY2tzID0gdGlja1ZhbHVlcyA9PSBudWxsID8gc2NhbGUxLnRpY2tzID8gc2NhbGUxLnRpY2tzLmFwcGx5KHNjYWxlMSwgdGlja0FyZ3VtZW50c18pIDogc2NhbGUxLmRvbWFpbigpIDogdGlja1ZhbHVlcywgdGlja0Zvcm1hdCA9IHRpY2tGb3JtYXRfID09IG51bGwgPyBzY2FsZTEudGlja0Zvcm1hdCA/IHNjYWxlMS50aWNrRm9ybWF0LmFwcGx5KHNjYWxlMSwgdGlja0FyZ3VtZW50c18pIDogZDNfaWRlbnRpdHkgOiB0aWNrRm9ybWF0XywgdGljayA9IGcuc2VsZWN0QWxsKFwiLnRpY2tcIikuZGF0YSh0aWNrcywgc2NhbGUxKSwgdGlja0VudGVyID0gdGljay5lbnRlcigpLmluc2VydChcImdcIiwgXCIuZG9tYWluXCIpLmF0dHIoXCJjbGFzc1wiLCBcInRpY2tcIikuc3R5bGUoXCJvcGFjaXR5XCIsIM61KSwgdGlja0V4aXQgPSBkMy50cmFuc2l0aW9uKHRpY2suZXhpdCgpKS5zdHlsZShcIm9wYWNpdHlcIiwgzrUpLnJlbW92ZSgpLCB0aWNrVXBkYXRlID0gZDMudHJhbnNpdGlvbih0aWNrLm9yZGVyKCkpLnN0eWxlKFwib3BhY2l0eVwiLCAxKSwgdGlja1NwYWNpbmcgPSBNYXRoLm1heChpbm5lclRpY2tTaXplLCAwKSArIHRpY2tQYWRkaW5nLCB0aWNrVHJhbnNmb3JtO1xuICAgICAgICB2YXIgcmFuZ2UgPSBkM19zY2FsZVJhbmdlKHNjYWxlMSksIHBhdGggPSBnLnNlbGVjdEFsbChcIi5kb21haW5cIikuZGF0YShbIDAgXSksIHBhdGhVcGRhdGUgPSAocGF0aC5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwiZG9tYWluXCIpLCBcbiAgICAgICAgZDMudHJhbnNpdGlvbihwYXRoKSk7XG4gICAgICAgIHRpY2tFbnRlci5hcHBlbmQoXCJsaW5lXCIpO1xuICAgICAgICB0aWNrRW50ZXIuYXBwZW5kKFwidGV4dFwiKTtcbiAgICAgICAgdmFyIGxpbmVFbnRlciA9IHRpY2tFbnRlci5zZWxlY3QoXCJsaW5lXCIpLCBsaW5lVXBkYXRlID0gdGlja1VwZGF0ZS5zZWxlY3QoXCJsaW5lXCIpLCB0ZXh0ID0gdGljay5zZWxlY3QoXCJ0ZXh0XCIpLnRleHQodGlja0Zvcm1hdCksIHRleHRFbnRlciA9IHRpY2tFbnRlci5zZWxlY3QoXCJ0ZXh0XCIpLCB0ZXh0VXBkYXRlID0gdGlja1VwZGF0ZS5zZWxlY3QoXCJ0ZXh0XCIpLCBzaWduID0gb3JpZW50ID09PSBcInRvcFwiIHx8IG9yaWVudCA9PT0gXCJsZWZ0XCIgPyAtMSA6IDEsIHgxLCB4MiwgeTEsIHkyO1xuICAgICAgICBpZiAob3JpZW50ID09PSBcImJvdHRvbVwiIHx8IG9yaWVudCA9PT0gXCJ0b3BcIikge1xuICAgICAgICAgIHRpY2tUcmFuc2Zvcm0gPSBkM19zdmdfYXhpc1gsIHgxID0gXCJ4XCIsIHkxID0gXCJ5XCIsIHgyID0gXCJ4MlwiLCB5MiA9IFwieTJcIjtcbiAgICAgICAgICB0ZXh0LmF0dHIoXCJkeVwiLCBzaWduIDwgMCA/IFwiMGVtXCIgOiBcIi43MWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIik7XG4gICAgICAgICAgcGF0aFVwZGF0ZS5hdHRyKFwiZFwiLCBcIk1cIiArIHJhbmdlWzBdICsgXCIsXCIgKyBzaWduICogb3V0ZXJUaWNrU2l6ZSArIFwiVjBIXCIgKyByYW5nZVsxXSArIFwiVlwiICsgc2lnbiAqIG91dGVyVGlja1NpemUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpY2tUcmFuc2Zvcm0gPSBkM19zdmdfYXhpc1ksIHgxID0gXCJ5XCIsIHkxID0gXCJ4XCIsIHgyID0gXCJ5MlwiLCB5MiA9IFwieDJcIjtcbiAgICAgICAgICB0ZXh0LmF0dHIoXCJkeVwiLCBcIi4zMmVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgc2lnbiA8IDAgPyBcImVuZFwiIDogXCJzdGFydFwiKTtcbiAgICAgICAgICBwYXRoVXBkYXRlLmF0dHIoXCJkXCIsIFwiTVwiICsgc2lnbiAqIG91dGVyVGlja1NpemUgKyBcIixcIiArIHJhbmdlWzBdICsgXCJIMFZcIiArIHJhbmdlWzFdICsgXCJIXCIgKyBzaWduICogb3V0ZXJUaWNrU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZUVudGVyLmF0dHIoeTIsIHNpZ24gKiBpbm5lclRpY2tTaXplKTtcbiAgICAgICAgdGV4dEVudGVyLmF0dHIoeTEsIHNpZ24gKiB0aWNrU3BhY2luZyk7XG4gICAgICAgIGxpbmVVcGRhdGUuYXR0cih4MiwgMCkuYXR0cih5Miwgc2lnbiAqIGlubmVyVGlja1NpemUpO1xuICAgICAgICB0ZXh0VXBkYXRlLmF0dHIoeDEsIDApLmF0dHIoeTEsIHNpZ24gKiB0aWNrU3BhY2luZyk7XG4gICAgICAgIGlmIChzY2FsZTEucmFuZ2VCYW5kKSB7XG4gICAgICAgICAgdmFyIHggPSBzY2FsZTEsIGR4ID0geC5yYW5nZUJhbmQoKSAvIDI7XG4gICAgICAgICAgc2NhbGUwID0gc2NhbGUxID0gZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHgoZCkgKyBkeDtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKHNjYWxlMC5yYW5nZUJhbmQpIHtcbiAgICAgICAgICBzY2FsZTAgPSBzY2FsZTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGlja0V4aXQuY2FsbCh0aWNrVHJhbnNmb3JtLCBzY2FsZTEsIHNjYWxlMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGlja0VudGVyLmNhbGwodGlja1RyYW5zZm9ybSwgc2NhbGUwLCBzY2FsZTEpO1xuICAgICAgICB0aWNrVXBkYXRlLmNhbGwodGlja1RyYW5zZm9ybSwgc2NhbGUxLCBzY2FsZTEpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGF4aXMuc2NhbGUgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzY2FsZTtcbiAgICAgIHNjYWxlID0geDtcbiAgICAgIHJldHVybiBheGlzO1xuICAgIH07XG4gICAgYXhpcy5vcmllbnQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBvcmllbnQ7XG4gICAgICBvcmllbnQgPSB4IGluIGQzX3N2Z19heGlzT3JpZW50cyA/IHggKyBcIlwiIDogZDNfc3ZnX2F4aXNEZWZhdWx0T3JpZW50O1xuICAgICAgcmV0dXJuIGF4aXM7XG4gICAgfTtcbiAgICBheGlzLnRpY2tzID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aWNrQXJndW1lbnRzXztcbiAgICAgIHRpY2tBcmd1bWVudHNfID0gZDNfYXJyYXkoYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBheGlzO1xuICAgIH07XG4gICAgYXhpcy50aWNrVmFsdWVzID0gZnVuY3Rpb24oeCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGlja1ZhbHVlcztcbiAgICAgIHRpY2tWYWx1ZXMgPSB4O1xuICAgICAgcmV0dXJuIGF4aXM7XG4gICAgfTtcbiAgICBheGlzLnRpY2tGb3JtYXQgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aWNrRm9ybWF0XztcbiAgICAgIHRpY2tGb3JtYXRfID0geDtcbiAgICAgIHJldHVybiBheGlzO1xuICAgIH07XG4gICAgYXhpcy50aWNrU2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGlmICghbikgcmV0dXJuIGlubmVyVGlja1NpemU7XG4gICAgICBpbm5lclRpY2tTaXplID0gK3g7XG4gICAgICBvdXRlclRpY2tTaXplID0gK2FyZ3VtZW50c1tuIC0gMV07XG4gICAgICByZXR1cm4gYXhpcztcbiAgICB9O1xuICAgIGF4aXMuaW5uZXJUaWNrU2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGlubmVyVGlja1NpemU7XG4gICAgICBpbm5lclRpY2tTaXplID0gK3g7XG4gICAgICByZXR1cm4gYXhpcztcbiAgICB9O1xuICAgIGF4aXMub3V0ZXJUaWNrU2l6ZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG91dGVyVGlja1NpemU7XG4gICAgICBvdXRlclRpY2tTaXplID0gK3g7XG4gICAgICByZXR1cm4gYXhpcztcbiAgICB9O1xuICAgIGF4aXMudGlja1BhZGRpbmcgPSBmdW5jdGlvbih4KSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aWNrUGFkZGluZztcbiAgICAgIHRpY2tQYWRkaW5nID0gK3g7XG4gICAgICByZXR1cm4gYXhpcztcbiAgICB9O1xuICAgIGF4aXMudGlja1N1YmRpdmlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggJiYgYXhpcztcbiAgICB9O1xuICAgIHJldHVybiBheGlzO1xuICB9O1xuICB2YXIgZDNfc3ZnX2F4aXNEZWZhdWx0T3JpZW50ID0gXCJib3R0b21cIiwgZDNfc3ZnX2F4aXNPcmllbnRzID0ge1xuICAgIHRvcDogMSxcbiAgICByaWdodDogMSxcbiAgICBib3R0b206IDEsXG4gICAgbGVmdDogMVxuICB9O1xuICBmdW5jdGlvbiBkM19zdmdfYXhpc1goc2VsZWN0aW9uLCB4MCwgeDEpIHtcbiAgICBzZWxlY3Rpb24uYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgdjAgPSB4MChkKTtcbiAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIChpc0Zpbml0ZSh2MCkgPyB2MCA6IHgxKGQpKSArIFwiLDApXCI7XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gZDNfc3ZnX2F4aXNZKHNlbGVjdGlvbiwgeTAsIHkxKSB7XG4gICAgc2VsZWN0aW9uLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHYwID0geTAoZCk7XG4gICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIChpc0Zpbml0ZSh2MCkgPyB2MCA6IHkxKGQpKSArIFwiKVwiO1xuICAgIH0pO1xuICB9XG4gIGQzLnN2Zy5icnVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBldmVudCA9IGQzX2V2ZW50RGlzcGF0Y2goYnJ1c2gsIFwiYnJ1c2hzdGFydFwiLCBcImJydXNoXCIsIFwiYnJ1c2hlbmRcIiksIHggPSBudWxsLCB5ID0gbnVsbCwgeEV4dGVudCA9IFsgMCwgMCBdLCB5RXh0ZW50ID0gWyAwLCAwIF0sIHhFeHRlbnREb21haW4sIHlFeHRlbnREb21haW4sIHhDbGFtcCA9IHRydWUsIHlDbGFtcCA9IHRydWUsIHJlc2l6ZXMgPSBkM19zdmdfYnJ1c2hSZXNpemVzWzBdO1xuICAgIGZ1bmN0aW9uIGJydXNoKGcpIHtcbiAgICAgIGcuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGcgPSBkMy5zZWxlY3QodGhpcykuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLCBcImFsbFwiKS5zdHlsZShcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiLCBcInJnYmEoMCwwLDAsMClcIikub24oXCJtb3VzZWRvd24uYnJ1c2hcIiwgYnJ1c2hzdGFydCkub24oXCJ0b3VjaHN0YXJ0LmJydXNoXCIsIGJydXNoc3RhcnQpO1xuICAgICAgICB2YXIgYmFja2dyb3VuZCA9IGcuc2VsZWN0QWxsKFwiLmJhY2tncm91bmRcIikuZGF0YShbIDAgXSk7XG4gICAgICAgIGJhY2tncm91bmQuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLCBcImJhY2tncm91bmRcIikuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpLnN0eWxlKFwiY3Vyc29yXCIsIFwiY3Jvc3NoYWlyXCIpO1xuICAgICAgICBnLnNlbGVjdEFsbChcIi5leHRlbnRcIikuZGF0YShbIDAgXSkuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLCBcImV4dGVudFwiKS5zdHlsZShcImN1cnNvclwiLCBcIm1vdmVcIik7XG4gICAgICAgIHZhciByZXNpemUgPSBnLnNlbGVjdEFsbChcIi5yZXNpemVcIikuZGF0YShyZXNpemVzLCBkM19pZGVudGl0eSk7XG4gICAgICAgIHJlc2l6ZS5leGl0KCkucmVtb3ZlKCk7XG4gICAgICAgIHJlc2l6ZS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gXCJyZXNpemUgXCIgKyBkO1xuICAgICAgICB9KS5zdHlsZShcImN1cnNvclwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIGQzX3N2Z19icnVzaEN1cnNvcltkXTtcbiAgICAgICAgfSkuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIC9bZXddJC8udGVzdChkKSA/IC0zIDogbnVsbDtcbiAgICAgICAgfSkuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiAvXltuc10vLnRlc3QoZCkgPyAtMyA6IG51bGw7XG4gICAgICAgIH0pLmF0dHIoXCJ3aWR0aFwiLCA2KS5hdHRyKFwiaGVpZ2h0XCIsIDYpLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgcmVzaXplLnN0eWxlKFwiZGlzcGxheVwiLCBicnVzaC5lbXB0eSgpID8gXCJub25lXCIgOiBudWxsKTtcbiAgICAgICAgdmFyIGdVcGRhdGUgPSBkMy50cmFuc2l0aW9uKGcpLCBiYWNrZ3JvdW5kVXBkYXRlID0gZDMudHJhbnNpdGlvbihiYWNrZ3JvdW5kKSwgcmFuZ2U7XG4gICAgICAgIGlmICh4KSB7XG4gICAgICAgICAgcmFuZ2UgPSBkM19zY2FsZVJhbmdlKHgpO1xuICAgICAgICAgIGJhY2tncm91bmRVcGRhdGUuYXR0cihcInhcIiwgcmFuZ2VbMF0pLmF0dHIoXCJ3aWR0aFwiLCByYW5nZVsxXSAtIHJhbmdlWzBdKTtcbiAgICAgICAgICByZWRyYXdYKGdVcGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5KSB7XG4gICAgICAgICAgcmFuZ2UgPSBkM19zY2FsZVJhbmdlKHkpO1xuICAgICAgICAgIGJhY2tncm91bmRVcGRhdGUuYXR0cihcInlcIiwgcmFuZ2VbMF0pLmF0dHIoXCJoZWlnaHRcIiwgcmFuZ2VbMV0gLSByYW5nZVswXSk7XG4gICAgICAgICAgcmVkcmF3WShnVXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZWRyYXcoZ1VwZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgYnJ1c2guZXZlbnQgPSBmdW5jdGlvbihnKSB7XG4gICAgICBnLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudF8gPSBldmVudC5vZih0aGlzLCBhcmd1bWVudHMpLCBleHRlbnQxID0ge1xuICAgICAgICAgIHg6IHhFeHRlbnQsXG4gICAgICAgICAgeTogeUV4dGVudCxcbiAgICAgICAgICBpOiB4RXh0ZW50RG9tYWluLFxuICAgICAgICAgIGo6IHlFeHRlbnREb21haW5cbiAgICAgICAgfSwgZXh0ZW50MCA9IHRoaXMuX19jaGFydF9fIHx8IGV4dGVudDE7XG4gICAgICAgIHRoaXMuX19jaGFydF9fID0gZXh0ZW50MTtcbiAgICAgICAgaWYgKGQzX3RyYW5zaXRpb25Jbmhlcml0SWQpIHtcbiAgICAgICAgICBkMy5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmVhY2goXCJzdGFydC5icnVzaFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHhFeHRlbnREb21haW4gPSBleHRlbnQwLmk7XG4gICAgICAgICAgICB5RXh0ZW50RG9tYWluID0gZXh0ZW50MC5qO1xuICAgICAgICAgICAgeEV4dGVudCA9IGV4dGVudDAueDtcbiAgICAgICAgICAgIHlFeHRlbnQgPSBleHRlbnQwLnk7XG4gICAgICAgICAgICBldmVudF8oe1xuICAgICAgICAgICAgICB0eXBlOiBcImJydXNoc3RhcnRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkudHdlZW4oXCJicnVzaDpicnVzaFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB4aSA9IGQzX2ludGVycG9sYXRlQXJyYXkoeEV4dGVudCwgZXh0ZW50MS54KSwgeWkgPSBkM19pbnRlcnBvbGF0ZUFycmF5KHlFeHRlbnQsIGV4dGVudDEueSk7XG4gICAgICAgICAgICB4RXh0ZW50RG9tYWluID0geUV4dGVudERvbWFpbiA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICB4RXh0ZW50ID0gZXh0ZW50MS54ID0geGkodCk7XG4gICAgICAgICAgICAgIHlFeHRlbnQgPSBleHRlbnQxLnkgPSB5aSh0KTtcbiAgICAgICAgICAgICAgZXZlbnRfKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJydXNoXCIsXG4gICAgICAgICAgICAgICAgbW9kZTogXCJyZXNpemVcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkuZWFjaChcImVuZC5icnVzaFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHhFeHRlbnREb21haW4gPSBleHRlbnQxLmk7XG4gICAgICAgICAgICB5RXh0ZW50RG9tYWluID0gZXh0ZW50MS5qO1xuICAgICAgICAgICAgZXZlbnRfKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJicnVzaFwiLFxuICAgICAgICAgICAgICBtb2RlOiBcInJlc2l6ZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV2ZW50Xyh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiYnJ1c2hlbmRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnRfKHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnJ1c2hzdGFydFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZXZlbnRfKHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnJ1c2hcIixcbiAgICAgICAgICAgIG1vZGU6IFwicmVzaXplXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBldmVudF8oe1xuICAgICAgICAgICAgdHlwZTogXCJicnVzaGVuZFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcmVkcmF3KGcpIHtcbiAgICAgIGcuc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeEV4dGVudFsrL2UkLy50ZXN0KGQpXSArIFwiLFwiICsgeUV4dGVudFsrL15zLy50ZXN0KGQpXSArIFwiKVwiO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlZHJhd1goZykge1xuICAgICAgZy5zZWxlY3QoXCIuZXh0ZW50XCIpLmF0dHIoXCJ4XCIsIHhFeHRlbnRbMF0pO1xuICAgICAgZy5zZWxlY3RBbGwoXCIuZXh0ZW50LC5uPnJlY3QsLnM+cmVjdFwiKS5hdHRyKFwid2lkdGhcIiwgeEV4dGVudFsxXSAtIHhFeHRlbnRbMF0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWRyYXdZKGcpIHtcbiAgICAgIGcuc2VsZWN0KFwiLmV4dGVudFwiKS5hdHRyKFwieVwiLCB5RXh0ZW50WzBdKTtcbiAgICAgIGcuc2VsZWN0QWxsKFwiLmV4dGVudCwuZT5yZWN0LC53PnJlY3RcIikuYXR0cihcImhlaWdodFwiLCB5RXh0ZW50WzFdIC0geUV4dGVudFswXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJydXNoc3RhcnQoKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gdGhpcywgZXZlbnRUYXJnZXQgPSBkMy5zZWxlY3QoZDMuZXZlbnQudGFyZ2V0KSwgZXZlbnRfID0gZXZlbnQub2YodGFyZ2V0LCBhcmd1bWVudHMpLCBnID0gZDMuc2VsZWN0KHRhcmdldCksIHJlc2l6aW5nID0gZXZlbnRUYXJnZXQuZGF0dW0oKSwgcmVzaXppbmdYID0gIS9eKG58cykkLy50ZXN0KHJlc2l6aW5nKSAmJiB4LCByZXNpemluZ1kgPSAhL14oZXx3KSQvLnRlc3QocmVzaXppbmcpICYmIHksIGRyYWdnaW5nID0gZXZlbnRUYXJnZXQuY2xhc3NlZChcImV4dGVudFwiKSwgZHJhZ1Jlc3RvcmUgPSBkM19ldmVudF9kcmFnU3VwcHJlc3ModGFyZ2V0KSwgY2VudGVyLCBvcmlnaW4gPSBkMy5tb3VzZSh0YXJnZXQpLCBvZmZzZXQ7XG4gICAgICB2YXIgdyA9IGQzLnNlbGVjdChkM193aW5kb3codGFyZ2V0KSkub24oXCJrZXlkb3duLmJydXNoXCIsIGtleWRvd24pLm9uKFwia2V5dXAuYnJ1c2hcIiwga2V5dXApO1xuICAgICAgaWYgKGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICAgIHcub24oXCJ0b3VjaG1vdmUuYnJ1c2hcIiwgYnJ1c2htb3ZlKS5vbihcInRvdWNoZW5kLmJydXNoXCIsIGJydXNoZW5kKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHcub24oXCJtb3VzZW1vdmUuYnJ1c2hcIiwgYnJ1c2htb3ZlKS5vbihcIm1vdXNldXAuYnJ1c2hcIiwgYnJ1c2hlbmQpO1xuICAgICAgfVxuICAgICAgZy5pbnRlcnJ1cHQoKS5zZWxlY3RBbGwoXCIqXCIpLmludGVycnVwdCgpO1xuICAgICAgaWYgKGRyYWdnaW5nKSB7XG4gICAgICAgIG9yaWdpblswXSA9IHhFeHRlbnRbMF0gLSBvcmlnaW5bMF07XG4gICAgICAgIG9yaWdpblsxXSA9IHlFeHRlbnRbMF0gLSBvcmlnaW5bMV07XG4gICAgICB9IGVsc2UgaWYgKHJlc2l6aW5nKSB7XG4gICAgICAgIHZhciBleCA9ICsvdyQvLnRlc3QocmVzaXppbmcpLCBleSA9ICsvXm4vLnRlc3QocmVzaXppbmcpO1xuICAgICAgICBvZmZzZXQgPSBbIHhFeHRlbnRbMSAtIGV4XSAtIG9yaWdpblswXSwgeUV4dGVudFsxIC0gZXldIC0gb3JpZ2luWzFdIF07XG4gICAgICAgIG9yaWdpblswXSA9IHhFeHRlbnRbZXhdO1xuICAgICAgICBvcmlnaW5bMV0gPSB5RXh0ZW50W2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoZDMuZXZlbnQuYWx0S2V5KSBjZW50ZXIgPSBvcmlnaW4uc2xpY2UoKTtcbiAgICAgIGcuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLCBcIm5vbmVcIikuc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5zdHlsZShcImRpc3BsYXlcIiwgbnVsbCk7XG4gICAgICBkMy5zZWxlY3QoXCJib2R5XCIpLnN0eWxlKFwiY3Vyc29yXCIsIGV2ZW50VGFyZ2V0LnN0eWxlKFwiY3Vyc29yXCIpKTtcbiAgICAgIGV2ZW50Xyh7XG4gICAgICAgIHR5cGU6IFwiYnJ1c2hzdGFydFwiXG4gICAgICB9KTtcbiAgICAgIGJydXNobW92ZSgpO1xuICAgICAgZnVuY3Rpb24ga2V5ZG93bigpIHtcbiAgICAgICAgaWYgKGQzLmV2ZW50LmtleUNvZGUgPT0gMzIpIHtcbiAgICAgICAgICBpZiAoIWRyYWdnaW5nKSB7XG4gICAgICAgICAgICBjZW50ZXIgPSBudWxsO1xuICAgICAgICAgICAgb3JpZ2luWzBdIC09IHhFeHRlbnRbMV07XG4gICAgICAgICAgICBvcmlnaW5bMV0gLT0geUV4dGVudFsxXTtcbiAgICAgICAgICAgIGRyYWdnaW5nID0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBrZXl1cCgpIHtcbiAgICAgICAgaWYgKGQzLmV2ZW50LmtleUNvZGUgPT0gMzIgJiYgZHJhZ2dpbmcgPT0gMikge1xuICAgICAgICAgIG9yaWdpblswXSArPSB4RXh0ZW50WzFdO1xuICAgICAgICAgIG9yaWdpblsxXSArPSB5RXh0ZW50WzFdO1xuICAgICAgICAgIGRyYWdnaW5nID0gMDtcbiAgICAgICAgICBkM19ldmVudFByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGJydXNobW92ZSgpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gZDMubW91c2UodGFyZ2V0KSwgbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgIHBvaW50WzBdICs9IG9mZnNldFswXTtcbiAgICAgICAgICBwb2ludFsxXSArPSBvZmZzZXRbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkcmFnZ2luZykge1xuICAgICAgICAgIGlmIChkMy5ldmVudC5hbHRLZXkpIHtcbiAgICAgICAgICAgIGlmICghY2VudGVyKSBjZW50ZXIgPSBbICh4RXh0ZW50WzBdICsgeEV4dGVudFsxXSkgLyAyLCAoeUV4dGVudFswXSArIHlFeHRlbnRbMV0pIC8gMiBdO1xuICAgICAgICAgICAgb3JpZ2luWzBdID0geEV4dGVudFsrKHBvaW50WzBdIDwgY2VudGVyWzBdKV07XG4gICAgICAgICAgICBvcmlnaW5bMV0gPSB5RXh0ZW50WysocG9pbnRbMV0gPCBjZW50ZXJbMV0pXTtcbiAgICAgICAgICB9IGVsc2UgY2VudGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzaXppbmdYICYmIG1vdmUxKHBvaW50LCB4LCAwKSkge1xuICAgICAgICAgIHJlZHJhd1goZyk7XG4gICAgICAgICAgbW92ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNpemluZ1kgJiYgbW92ZTEocG9pbnQsIHksIDEpKSB7XG4gICAgICAgICAgcmVkcmF3WShnKTtcbiAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdmVkKSB7XG4gICAgICAgICAgcmVkcmF3KGcpO1xuICAgICAgICAgIGV2ZW50Xyh7XG4gICAgICAgICAgICB0eXBlOiBcImJydXNoXCIsXG4gICAgICAgICAgICBtb2RlOiBkcmFnZ2luZyA/IFwibW92ZVwiIDogXCJyZXNpemVcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBtb3ZlMShwb2ludCwgc2NhbGUsIGkpIHtcbiAgICAgICAgdmFyIHJhbmdlID0gZDNfc2NhbGVSYW5nZShzY2FsZSksIHIwID0gcmFuZ2VbMF0sIHIxID0gcmFuZ2VbMV0sIHBvc2l0aW9uID0gb3JpZ2luW2ldLCBleHRlbnQgPSBpID8geUV4dGVudCA6IHhFeHRlbnQsIHNpemUgPSBleHRlbnRbMV0gLSBleHRlbnRbMF0sIG1pbiwgbWF4O1xuICAgICAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgICAgICByMCAtPSBwb3NpdGlvbjtcbiAgICAgICAgICByMSAtPSBzaXplICsgcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgbWluID0gKGkgPyB5Q2xhbXAgOiB4Q2xhbXApID8gTWF0aC5tYXgocjAsIE1hdGgubWluKHIxLCBwb2ludFtpXSkpIDogcG9pbnRbaV07XG4gICAgICAgIGlmIChkcmFnZ2luZykge1xuICAgICAgICAgIG1heCA9IChtaW4gKz0gcG9zaXRpb24pICsgc2l6ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2VudGVyKSBwb3NpdGlvbiA9IE1hdGgubWF4KHIwLCBNYXRoLm1pbihyMSwgMiAqIGNlbnRlcltpXSAtIG1pbikpO1xuICAgICAgICAgIGlmIChwb3NpdGlvbiA8IG1pbikge1xuICAgICAgICAgICAgbWF4ID0gbWluO1xuICAgICAgICAgICAgbWluID0gcG9zaXRpb247XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1heCA9IHBvc2l0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50WzBdICE9IG1pbiB8fCBleHRlbnRbMV0gIT0gbWF4KSB7XG4gICAgICAgICAgaWYgKGkpIHlFeHRlbnREb21haW4gPSBudWxsOyBlbHNlIHhFeHRlbnREb21haW4gPSBudWxsO1xuICAgICAgICAgIGV4dGVudFswXSA9IG1pbjtcbiAgICAgICAgICBleHRlbnRbMV0gPSBtYXg7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGJydXNoZW5kKCkge1xuICAgICAgICBicnVzaG1vdmUoKTtcbiAgICAgICAgZy5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsIFwiYWxsXCIpLnNlbGVjdEFsbChcIi5yZXNpemVcIikuc3R5bGUoXCJkaXNwbGF5XCIsIGJydXNoLmVtcHR5KCkgPyBcIm5vbmVcIiA6IG51bGwpO1xuICAgICAgICBkMy5zZWxlY3QoXCJib2R5XCIpLnN0eWxlKFwiY3Vyc29yXCIsIG51bGwpO1xuICAgICAgICB3Lm9uKFwibW91c2Vtb3ZlLmJydXNoXCIsIG51bGwpLm9uKFwibW91c2V1cC5icnVzaFwiLCBudWxsKS5vbihcInRvdWNobW92ZS5icnVzaFwiLCBudWxsKS5vbihcInRvdWNoZW5kLmJydXNoXCIsIG51bGwpLm9uKFwia2V5ZG93bi5icnVzaFwiLCBudWxsKS5vbihcImtleXVwLmJydXNoXCIsIG51bGwpO1xuICAgICAgICBkcmFnUmVzdG9yZSgpO1xuICAgICAgICBldmVudF8oe1xuICAgICAgICAgIHR5cGU6IFwiYnJ1c2hlbmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgYnJ1c2gueCA9IGZ1bmN0aW9uKHopIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHg7XG4gICAgICB4ID0gejtcbiAgICAgIHJlc2l6ZXMgPSBkM19zdmdfYnJ1c2hSZXNpemVzWyF4IDw8IDEgfCAheV07XG4gICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfTtcbiAgICBicnVzaC55ID0gZnVuY3Rpb24oeikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geTtcbiAgICAgIHkgPSB6O1xuICAgICAgcmVzaXplcyA9IGQzX3N2Z19icnVzaFJlc2l6ZXNbIXggPDwgMSB8ICF5XTtcbiAgICAgIHJldHVybiBicnVzaDtcbiAgICB9O1xuICAgIGJydXNoLmNsYW1wID0gZnVuY3Rpb24oeikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4geCAmJiB5ID8gWyB4Q2xhbXAsIHlDbGFtcCBdIDogeCA/IHhDbGFtcCA6IHkgPyB5Q2xhbXAgOiBudWxsO1xuICAgICAgaWYgKHggJiYgeSkgeENsYW1wID0gISF6WzBdLCB5Q2xhbXAgPSAhIXpbMV07IGVsc2UgaWYgKHgpIHhDbGFtcCA9ICEhejsgZWxzZSBpZiAoeSkgeUNsYW1wID0gISF6O1xuICAgICAgcmV0dXJuIGJydXNoO1xuICAgIH07XG4gICAgYnJ1c2guZXh0ZW50ID0gZnVuY3Rpb24oeikge1xuICAgICAgdmFyIHgwLCB4MSwgeTAsIHkxLCB0O1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh4KSB7XG4gICAgICAgICAgaWYgKHhFeHRlbnREb21haW4pIHtcbiAgICAgICAgICAgIHgwID0geEV4dGVudERvbWFpblswXSwgeDEgPSB4RXh0ZW50RG9tYWluWzFdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4MCA9IHhFeHRlbnRbMF0sIHgxID0geEV4dGVudFsxXTtcbiAgICAgICAgICAgIGlmICh4LmludmVydCkgeDAgPSB4LmludmVydCh4MCksIHgxID0geC5pbnZlcnQoeDEpO1xuICAgICAgICAgICAgaWYgKHgxIDwgeDApIHQgPSB4MCwgeDAgPSB4MSwgeDEgPSB0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoeSkge1xuICAgICAgICAgIGlmICh5RXh0ZW50RG9tYWluKSB7XG4gICAgICAgICAgICB5MCA9IHlFeHRlbnREb21haW5bMF0sIHkxID0geUV4dGVudERvbWFpblsxXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeTAgPSB5RXh0ZW50WzBdLCB5MSA9IHlFeHRlbnRbMV07XG4gICAgICAgICAgICBpZiAoeS5pbnZlcnQpIHkwID0geS5pbnZlcnQoeTApLCB5MSA9IHkuaW52ZXJ0KHkxKTtcbiAgICAgICAgICAgIGlmICh5MSA8IHkwKSB0ID0geTAsIHkwID0geTEsIHkxID0gdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggJiYgeSA/IFsgWyB4MCwgeTAgXSwgWyB4MSwgeTEgXSBdIDogeCA/IFsgeDAsIHgxIF0gOiB5ICYmIFsgeTAsIHkxIF07XG4gICAgICB9XG4gICAgICBpZiAoeCkge1xuICAgICAgICB4MCA9IHpbMF0sIHgxID0gelsxXTtcbiAgICAgICAgaWYgKHkpIHgwID0geDBbMF0sIHgxID0geDFbMF07XG4gICAgICAgIHhFeHRlbnREb21haW4gPSBbIHgwLCB4MSBdO1xuICAgICAgICBpZiAoeC5pbnZlcnQpIHgwID0geCh4MCksIHgxID0geCh4MSk7XG4gICAgICAgIGlmICh4MSA8IHgwKSB0ID0geDAsIHgwID0geDEsIHgxID0gdDtcbiAgICAgICAgaWYgKHgwICE9IHhFeHRlbnRbMF0gfHwgeDEgIT0geEV4dGVudFsxXSkgeEV4dGVudCA9IFsgeDAsIHgxIF07XG4gICAgICB9XG4gICAgICBpZiAoeSkge1xuICAgICAgICB5MCA9IHpbMF0sIHkxID0gelsxXTtcbiAgICAgICAgaWYgKHgpIHkwID0geTBbMV0sIHkxID0geTFbMV07XG4gICAgICAgIHlFeHRlbnREb21haW4gPSBbIHkwLCB5MSBdO1xuICAgICAgICBpZiAoeS5pbnZlcnQpIHkwID0geSh5MCksIHkxID0geSh5MSk7XG4gICAgICAgIGlmICh5MSA8IHkwKSB0ID0geTAsIHkwID0geTEsIHkxID0gdDtcbiAgICAgICAgaWYgKHkwICE9IHlFeHRlbnRbMF0gfHwgeTEgIT0geUV4dGVudFsxXSkgeUV4dGVudCA9IFsgeTAsIHkxIF07XG4gICAgICB9XG4gICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfTtcbiAgICBicnVzaC5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFicnVzaC5lbXB0eSgpKSB7XG4gICAgICAgIHhFeHRlbnQgPSBbIDAsIDAgXSwgeUV4dGVudCA9IFsgMCwgMCBdO1xuICAgICAgICB4RXh0ZW50RG9tYWluID0geUV4dGVudERvbWFpbiA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gYnJ1c2g7XG4gICAgfTtcbiAgICBicnVzaC5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEheCAmJiB4RXh0ZW50WzBdID09IHhFeHRlbnRbMV0gfHwgISF5ICYmIHlFeHRlbnRbMF0gPT0geUV4dGVudFsxXTtcbiAgICB9O1xuICAgIHJldHVybiBkMy5yZWJpbmQoYnJ1c2gsIGV2ZW50LCBcIm9uXCIpO1xuICB9O1xuICB2YXIgZDNfc3ZnX2JydXNoQ3Vyc29yID0ge1xuICAgIG46IFwibnMtcmVzaXplXCIsXG4gICAgZTogXCJldy1yZXNpemVcIixcbiAgICBzOiBcIm5zLXJlc2l6ZVwiLFxuICAgIHc6IFwiZXctcmVzaXplXCIsXG4gICAgbnc6IFwibndzZS1yZXNpemVcIixcbiAgICBuZTogXCJuZXN3LXJlc2l6ZVwiLFxuICAgIHNlOiBcIm53c2UtcmVzaXplXCIsXG4gICAgc3c6IFwibmVzdy1yZXNpemVcIlxuICB9O1xuICB2YXIgZDNfc3ZnX2JydXNoUmVzaXplcyA9IFsgWyBcIm5cIiwgXCJlXCIsIFwic1wiLCBcIndcIiwgXCJud1wiLCBcIm5lXCIsIFwic2VcIiwgXCJzd1wiIF0sIFsgXCJlXCIsIFwid1wiIF0sIFsgXCJuXCIsIFwic1wiIF0sIFtdIF07XG4gIHZhciBkM190aW1lX2Zvcm1hdCA9IGQzX3RpbWUuZm9ybWF0ID0gZDNfbG9jYWxlX2VuVVMudGltZUZvcm1hdDtcbiAgdmFyIGQzX3RpbWVfZm9ybWF0VXRjID0gZDNfdGltZV9mb3JtYXQudXRjO1xuICB2YXIgZDNfdGltZV9mb3JtYXRJc28gPSBkM190aW1lX2Zvcm1hdFV0YyhcIiVZLSVtLSVkVCVIOiVNOiVTLiVMWlwiKTtcbiAgZDNfdGltZV9mb3JtYXQuaXNvID0gRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgJiYgK25ldyBEYXRlKFwiMjAwMC0wMS0wMVQwMDowMDowMC4wMDBaXCIpID8gZDNfdGltZV9mb3JtYXRJc29OYXRpdmUgOiBkM190aW1lX2Zvcm1hdElzbztcbiAgZnVuY3Rpb24gZDNfdGltZV9mb3JtYXRJc29OYXRpdmUoZGF0ZSkge1xuICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gIH1cbiAgZDNfdGltZV9mb3JtYXRJc29OYXRpdmUucGFyc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHN0cmluZyk7XG4gICAgcmV0dXJuIGlzTmFOKGRhdGUpID8gbnVsbCA6IGRhdGU7XG4gIH07XG4gIGQzX3RpbWVfZm9ybWF0SXNvTmF0aXZlLnRvU3RyaW5nID0gZDNfdGltZV9mb3JtYXRJc28udG9TdHJpbmc7XG4gIGQzX3RpbWUuc2Vjb25kID0gZDNfdGltZV9pbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgcmV0dXJuIG5ldyBkM19kYXRlKE1hdGguZmxvb3IoZGF0ZSAvIDFlMykgKiAxZTMpO1xuICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBNYXRoLmZsb29yKG9mZnNldCkgKiAxZTMpO1xuICB9LCBmdW5jdGlvbihkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGUuZ2V0U2Vjb25kcygpO1xuICB9KTtcbiAgZDNfdGltZS5zZWNvbmRzID0gZDNfdGltZS5zZWNvbmQucmFuZ2U7XG4gIGQzX3RpbWUuc2Vjb25kcy51dGMgPSBkM190aW1lLnNlY29uZC51dGMucmFuZ2U7XG4gIGQzX3RpbWUubWludXRlID0gZDNfdGltZV9pbnRlcnZhbChmdW5jdGlvbihkYXRlKSB7XG4gICAgcmV0dXJuIG5ldyBkM19kYXRlKE1hdGguZmxvb3IoZGF0ZSAvIDZlNCkgKiA2ZTQpO1xuICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBNYXRoLmZsb29yKG9mZnNldCkgKiA2ZTQpO1xuICB9LCBmdW5jdGlvbihkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGUuZ2V0TWludXRlcygpO1xuICB9KTtcbiAgZDNfdGltZS5taW51dGVzID0gZDNfdGltZS5taW51dGUucmFuZ2U7XG4gIGQzX3RpbWUubWludXRlcy51dGMgPSBkM190aW1lLm1pbnV0ZS51dGMucmFuZ2U7XG4gIGQzX3RpbWUuaG91ciA9IGQzX3RpbWVfaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSkge1xuICAgIHZhciB0aW1lem9uZSA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwO1xuICAgIHJldHVybiBuZXcgZDNfZGF0ZSgoTWF0aC5mbG9vcihkYXRlIC8gMzZlNSAtIHRpbWV6b25lKSArIHRpbWV6b25lKSAqIDM2ZTUpO1xuICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBNYXRoLmZsb29yKG9mZnNldCkgKiAzNmU1KTtcbiAgfSwgZnVuY3Rpb24oZGF0ZSkge1xuICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCk7XG4gIH0pO1xuICBkM190aW1lLmhvdXJzID0gZDNfdGltZS5ob3VyLnJhbmdlO1xuICBkM190aW1lLmhvdXJzLnV0YyA9IGQzX3RpbWUuaG91ci51dGMucmFuZ2U7XG4gIGQzX3RpbWUubW9udGggPSBkM190aW1lX2ludGVydmFsKGZ1bmN0aW9uKGRhdGUpIHtcbiAgICBkYXRlID0gZDNfdGltZS5kYXkoZGF0ZSk7XG4gICAgZGF0ZS5zZXREYXRlKDEpO1xuICAgIHJldHVybiBkYXRlO1xuICB9LCBmdW5jdGlvbihkYXRlLCBvZmZzZXQpIHtcbiAgICBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIG9mZnNldCk7XG4gIH0sIGZ1bmN0aW9uKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZS5nZXRNb250aCgpO1xuICB9KTtcbiAgZDNfdGltZS5tb250aHMgPSBkM190aW1lLm1vbnRoLnJhbmdlO1xuICBkM190aW1lLm1vbnRocy51dGMgPSBkM190aW1lLm1vbnRoLnV0Yy5yYW5nZTtcbiAgZnVuY3Rpb24gZDNfdGltZV9zY2FsZShsaW5lYXIsIG1ldGhvZHMsIGZvcm1hdCkge1xuICAgIGZ1bmN0aW9uIHNjYWxlKHgpIHtcbiAgICAgIHJldHVybiBsaW5lYXIoeCk7XG4gICAgfVxuICAgIHNjYWxlLmludmVydCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBkM190aW1lX3NjYWxlRGF0ZShsaW5lYXIuaW52ZXJ0KHgpKTtcbiAgICB9O1xuICAgIHNjYWxlLmRvbWFpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxpbmVhci5kb21haW4oKS5tYXAoZDNfdGltZV9zY2FsZURhdGUpO1xuICAgICAgbGluZWFyLmRvbWFpbih4KTtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHRpY2tNZXRob2QoZXh0ZW50LCBjb3VudCkge1xuICAgICAgdmFyIHNwYW4gPSBleHRlbnRbMV0gLSBleHRlbnRbMF0sIHRhcmdldCA9IHNwYW4gLyBjb3VudCwgaSA9IGQzLmJpc2VjdChkM190aW1lX3NjYWxlU3RlcHMsIHRhcmdldCk7XG4gICAgICByZXR1cm4gaSA9PSBkM190aW1lX3NjYWxlU3RlcHMubGVuZ3RoID8gWyBtZXRob2RzLnllYXIsIGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShleHRlbnQubWFwKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQgLyAzMTUzNmU2O1xuICAgICAgfSksIGNvdW50KVsyXSBdIDogIWkgPyBbIGQzX3RpbWVfc2NhbGVNaWxsaXNlY29uZHMsIGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShleHRlbnQsIGNvdW50KVsyXSBdIDogbWV0aG9kc1t0YXJnZXQgLyBkM190aW1lX3NjYWxlU3RlcHNbaSAtIDFdIDwgZDNfdGltZV9zY2FsZVN0ZXBzW2ldIC8gdGFyZ2V0ID8gaSAtIDEgOiBpXTtcbiAgICB9XG4gICAgc2NhbGUubmljZSA9IGZ1bmN0aW9uKGludGVydmFsLCBza2lwKSB7XG4gICAgICB2YXIgZG9tYWluID0gc2NhbGUuZG9tYWluKCksIGV4dGVudCA9IGQzX3NjYWxlRXh0ZW50KGRvbWFpbiksIG1ldGhvZCA9IGludGVydmFsID09IG51bGwgPyB0aWNrTWV0aG9kKGV4dGVudCwgMTApIDogdHlwZW9mIGludGVydmFsID09PSBcIm51bWJlclwiICYmIHRpY2tNZXRob2QoZXh0ZW50LCBpbnRlcnZhbCk7XG4gICAgICBpZiAobWV0aG9kKSBpbnRlcnZhbCA9IG1ldGhvZFswXSwgc2tpcCA9IG1ldGhvZFsxXTtcbiAgICAgIGZ1bmN0aW9uIHNraXBwZWQoZGF0ZSkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKGRhdGUpICYmICFpbnRlcnZhbC5yYW5nZShkYXRlLCBkM190aW1lX3NjYWxlRGF0ZSgrZGF0ZSArIDEpLCBza2lwKS5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2NhbGUuZG9tYWluKGQzX3NjYWxlX25pY2UoZG9tYWluLCBza2lwID4gMSA/IHtcbiAgICAgICAgZmxvb3I6IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICAgICAgICB3aGlsZSAoc2tpcHBlZChkYXRlID0gaW50ZXJ2YWwuZmxvb3IoZGF0ZSkpKSBkYXRlID0gZDNfdGltZV9zY2FsZURhdGUoZGF0ZSAtIDEpO1xuICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICB9LFxuICAgICAgICBjZWlsOiBmdW5jdGlvbihkYXRlKSB7XG4gICAgICAgICAgd2hpbGUgKHNraXBwZWQoZGF0ZSA9IGludGVydmFsLmNlaWwoZGF0ZSkpKSBkYXRlID0gZDNfdGltZV9zY2FsZURhdGUoK2RhdGUgKyAxKTtcbiAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSA6IGludGVydmFsKSk7XG4gICAgfTtcbiAgICBzY2FsZS50aWNrcyA9IGZ1bmN0aW9uKGludGVydmFsLCBza2lwKSB7XG4gICAgICB2YXIgZXh0ZW50ID0gZDNfc2NhbGVFeHRlbnQoc2NhbGUuZG9tYWluKCkpLCBtZXRob2QgPSBpbnRlcnZhbCA9PSBudWxsID8gdGlja01ldGhvZChleHRlbnQsIDEwKSA6IHR5cGVvZiBpbnRlcnZhbCA9PT0gXCJudW1iZXJcIiA/IHRpY2tNZXRob2QoZXh0ZW50LCBpbnRlcnZhbCkgOiAhaW50ZXJ2YWwucmFuZ2UgJiYgWyB7XG4gICAgICAgIHJhbmdlOiBpbnRlcnZhbFxuICAgICAgfSwgc2tpcCBdO1xuICAgICAgaWYgKG1ldGhvZCkgaW50ZXJ2YWwgPSBtZXRob2RbMF0sIHNraXAgPSBtZXRob2RbMV07XG4gICAgICByZXR1cm4gaW50ZXJ2YWwucmFuZ2UoZXh0ZW50WzBdLCBkM190aW1lX3NjYWxlRGF0ZSgrZXh0ZW50WzFdICsgMSksIHNraXAgPCAxID8gMSA6IHNraXApO1xuICAgIH07XG4gICAgc2NhbGUudGlja0Zvcm1hdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICB9O1xuICAgIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkM190aW1lX3NjYWxlKGxpbmVhci5jb3B5KCksIG1ldGhvZHMsIGZvcm1hdCk7XG4gICAgfTtcbiAgICByZXR1cm4gZDNfc2NhbGVfbGluZWFyUmViaW5kKHNjYWxlLCBsaW5lYXIpO1xuICB9XG4gIGZ1bmN0aW9uIGQzX3RpbWVfc2NhbGVEYXRlKHQpIHtcbiAgICByZXR1cm4gbmV3IERhdGUodCk7XG4gIH1cbiAgdmFyIGQzX3RpbWVfc2NhbGVTdGVwcyA9IFsgMWUzLCA1ZTMsIDE1ZTMsIDNlNCwgNmU0LCAzZTUsIDllNSwgMThlNSwgMzZlNSwgMTA4ZTUsIDIxNmU1LCA0MzJlNSwgODY0ZTUsIDE3MjhlNSwgNjA0OGU1LCAyNTkyZTYsIDc3NzZlNiwgMzE1MzZlNiBdO1xuICB2YXIgZDNfdGltZV9zY2FsZUxvY2FsTWV0aG9kcyA9IFsgWyBkM190aW1lLnNlY29uZCwgMSBdLCBbIGQzX3RpbWUuc2Vjb25kLCA1IF0sIFsgZDNfdGltZS5zZWNvbmQsIDE1IF0sIFsgZDNfdGltZS5zZWNvbmQsIDMwIF0sIFsgZDNfdGltZS5taW51dGUsIDEgXSwgWyBkM190aW1lLm1pbnV0ZSwgNSBdLCBbIGQzX3RpbWUubWludXRlLCAxNSBdLCBbIGQzX3RpbWUubWludXRlLCAzMCBdLCBbIGQzX3RpbWUuaG91ciwgMSBdLCBbIGQzX3RpbWUuaG91ciwgMyBdLCBbIGQzX3RpbWUuaG91ciwgNiBdLCBbIGQzX3RpbWUuaG91ciwgMTIgXSwgWyBkM190aW1lLmRheSwgMSBdLCBbIGQzX3RpbWUuZGF5LCAyIF0sIFsgZDNfdGltZS53ZWVrLCAxIF0sIFsgZDNfdGltZS5tb250aCwgMSBdLCBbIGQzX3RpbWUubW9udGgsIDMgXSwgWyBkM190aW1lLnllYXIsIDEgXSBdO1xuICB2YXIgZDNfdGltZV9zY2FsZUxvY2FsRm9ybWF0ID0gZDNfdGltZV9mb3JtYXQubXVsdGkoWyBbIFwiLiVMXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRNaWxsaXNlY29uZHMoKTtcbiAgfSBdLCBbIFwiOiVTXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRTZWNvbmRzKCk7XG4gIH0gXSwgWyBcIiVJOiVNXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRNaW51dGVzKCk7XG4gIH0gXSwgWyBcIiVJICVwXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRIb3VycygpO1xuICB9IF0sIFsgXCIlYSAlZFwiLCBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGQuZ2V0RGF5KCkgJiYgZC5nZXREYXRlKCkgIT0gMTtcbiAgfSBdLCBbIFwiJWIgJWRcIiwgZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiBkLmdldERhdGUoKSAhPSAxO1xuICB9IF0sIFsgXCIlQlwiLCBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGQuZ2V0TW9udGgoKTtcbiAgfSBdLCBbIFwiJVlcIiwgZDNfdHJ1ZSBdIF0pO1xuICB2YXIgZDNfdGltZV9zY2FsZU1pbGxpc2Vjb25kcyA9IHtcbiAgICByYW5nZTogZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICAgIHJldHVybiBkMy5yYW5nZShNYXRoLmNlaWwoc3RhcnQgLyBzdGVwKSAqIHN0ZXAsICtzdG9wLCBzdGVwKS5tYXAoZDNfdGltZV9zY2FsZURhdGUpO1xuICAgIH0sXG4gICAgZmxvb3I6IGQzX2lkZW50aXR5LFxuICAgIGNlaWw6IGQzX2lkZW50aXR5XG4gIH07XG4gIGQzX3RpbWVfc2NhbGVMb2NhbE1ldGhvZHMueWVhciA9IGQzX3RpbWUueWVhcjtcbiAgZDNfdGltZS5zY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkM190aW1lX3NjYWxlKGQzLnNjYWxlLmxpbmVhcigpLCBkM190aW1lX3NjYWxlTG9jYWxNZXRob2RzLCBkM190aW1lX3NjYWxlTG9jYWxGb3JtYXQpO1xuICB9O1xuICB2YXIgZDNfdGltZV9zY2FsZVV0Y01ldGhvZHMgPSBkM190aW1lX3NjYWxlTG9jYWxNZXRob2RzLm1hcChmdW5jdGlvbihtKSB7XG4gICAgcmV0dXJuIFsgbVswXS51dGMsIG1bMV0gXTtcbiAgfSk7XG4gIHZhciBkM190aW1lX3NjYWxlVXRjRm9ybWF0ID0gZDNfdGltZV9mb3JtYXRVdGMubXVsdGkoWyBbIFwiLiVMXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRVVENNaWxsaXNlY29uZHMoKTtcbiAgfSBdLCBbIFwiOiVTXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRVVENTZWNvbmRzKCk7XG4gIH0gXSwgWyBcIiVJOiVNXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRVVENNaW51dGVzKCk7XG4gIH0gXSwgWyBcIiVJICVwXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC5nZXRVVENIb3VycygpO1xuICB9IF0sIFsgXCIlYSAlZFwiLCBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGQuZ2V0VVRDRGF5KCkgJiYgZC5nZXRVVENEYXRlKCkgIT0gMTtcbiAgfSBdLCBbIFwiJWIgJWRcIiwgZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiBkLmdldFVUQ0RhdGUoKSAhPSAxO1xuICB9IF0sIFsgXCIlQlwiLCBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGQuZ2V0VVRDTW9udGgoKTtcbiAgfSBdLCBbIFwiJVlcIiwgZDNfdHJ1ZSBdIF0pO1xuICBkM190aW1lX3NjYWxlVXRjTWV0aG9kcy55ZWFyID0gZDNfdGltZS55ZWFyLnV0YztcbiAgZDNfdGltZS5zY2FsZS51dGMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfdGltZV9zY2FsZShkMy5zY2FsZS5saW5lYXIoKSwgZDNfdGltZV9zY2FsZVV0Y01ldGhvZHMsIGQzX3RpbWVfc2NhbGVVdGNGb3JtYXQpO1xuICB9O1xuICBkMy50ZXh0ID0gZDNfeGhyVHlwZShmdW5jdGlvbihyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QucmVzcG9uc2VUZXh0O1xuICB9KTtcbiAgZDMuanNvbiA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZDNfeGhyKHVybCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGQzX2pzb24sIGNhbGxiYWNrKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfanNvbihyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICB9XG4gIGQzLmh0bWwgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGQzX3hocih1cmwsIFwidGV4dC9odG1sXCIsIGQzX2h0bWwsIGNhbGxiYWNrKTtcbiAgfTtcbiAgZnVuY3Rpb24gZDNfaHRtbChyZXF1ZXN0KSB7XG4gICAgdmFyIHJhbmdlID0gZDNfZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByYW5nZS5zZWxlY3ROb2RlKGQzX2RvY3VtZW50LmJvZHkpO1xuICAgIHJldHVybiByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICB9XG4gIGQzLnhtbCA9IGQzX3hoclR5cGUoZnVuY3Rpb24ocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0LnJlc3BvbnNlWE1MO1xuICB9KTtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB0aGlzLmQzID0gZDMsIGRlZmluZShkMyk7IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gZDM7IGVsc2UgdGhpcy5kMyA9IGQzO1xufSgpOyIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgcmUgPSB7XG4gICAgICAgIG5vdF9zdHJpbmc6IC9bXnNdLyxcbiAgICAgICAgbnVtYmVyOiAvW2RpZWZnXS8sXG4gICAgICAgIGpzb246IC9bal0vLFxuICAgICAgICBub3RfanNvbjogL1teal0vLFxuICAgICAgICB0ZXh0OiAvXlteXFx4MjVdKy8sXG4gICAgICAgIG1vZHVsbzogL15cXHgyNXsyfS8sXG4gICAgICAgIHBsYWNlaG9sZGVyOiAvXlxceDI1KD86KFsxLTldXFxkKilcXCR8XFwoKFteXFwpXSspXFwpKT8oXFwrKT8oMHwnW14kXSk/KC0pPyhcXGQrKT8oPzpcXC4oXFxkKykpPyhbYi1naWpvc3V4WF0pLyxcbiAgICAgICAga2V5OiAvXihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBrZXlfYWNjZXNzOiAvXlxcLihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBpbmRleF9hY2Nlc3M6IC9eXFxbKFxcZCspXFxdLyxcbiAgICAgICAgc2lnbjogL15bXFwrXFwtXS9cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmKCkge1xuICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdLCBjYWNoZSA9IHNwcmludGYuY2FjaGVcbiAgICAgICAgaWYgKCEoY2FjaGVba2V5XSAmJiBjYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSkge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHNwcmludGYucGFyc2Uoa2V5KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmZvcm1hdC5jYWxsKG51bGwsIGNhY2hlW2tleV0sIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBzcHJpbnRmLmZvcm1hdCA9IGZ1bmN0aW9uKHBhcnNlX3RyZWUsIGFyZ3YpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IDEsIHRyZWVfbGVuZ3RoID0gcGFyc2VfdHJlZS5sZW5ndGgsIG5vZGVfdHlwZSA9IFwiXCIsIGFyZywgb3V0cHV0ID0gW10sIGksIGssIG1hdGNoLCBwYWQsIHBhZF9jaGFyYWN0ZXIsIHBhZF9sZW5ndGgsIGlzX3Bvc2l0aXZlID0gdHJ1ZSwgc2lnbiA9IFwiXCJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyZWVfbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5vZGVfdHlwZSA9IGdldF90eXBlKHBhcnNlX3RyZWVbaV0pXG4gICAgICAgICAgICBpZiAobm9kZV90eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gcGFyc2VfdHJlZVtpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZV90eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlX3RyZWVbaV0gLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkgeyAvLyBrZXl3b3JkIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yXVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbWF0Y2hbMl0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJnLmhhc093blByb3BlcnR5KG1hdGNoWzJdW2tdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKFwiW3NwcmludGZdIHByb3BlcnR5ICclcycgZG9lcyBub3QgZXhpc3RcIiwgbWF0Y2hbMl1ba10pKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnW21hdGNoWzJdW2tdXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoWzFdKSB7IC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGV4cGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W21hdGNoWzFdXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoaW1wbGljaXQpXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yKytdXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGdldF90eXBlKGFyZykgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm5vdF9zdHJpbmcudGVzdChtYXRjaFs4XSkgJiYgcmUubm90X2pzb24udGVzdChtYXRjaFs4XSkgJiYgKGdldF90eXBlKGFyZykgIT0gXCJudW1iZXJcIiAmJiBpc05hTihhcmcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNwcmludGYoXCJbc3ByaW50Zl0gZXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgJXNcIiwgZ2V0X3R5cGUoYXJnKSkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KG1hdGNoWzhdKSkge1xuICAgICAgICAgICAgICAgICAgICBpc19wb3NpdGl2ZSA9IGFyZyA+PSAwXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFs4XSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDIpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFyZylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlSW50KGFyZywgMTApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIG1hdGNoWzZdID8gcGFyc2VJbnQobWF0Y2hbNl0pIDogMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gYXJnLnRvRXhwb25lbnRpYWwobWF0Y2hbN10pIDogYXJnLnRvRXhwb25lbnRpYWwoKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBwYXJzZUZsb2F0KGFyZykudG9GaXhlZChtYXRjaFs3XSkgOiBwYXJzZUZsb2F0KGFyZylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvUHJlY2lzaW9uKG1hdGNoWzddKSA6IHBhcnNlRmxvYXQoYXJnKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDgpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAoKGFyZyA9IFN0cmluZyhhcmcpKSAmJiBtYXRjaFs3XSA/IGFyZy5zdWJzdHJpbmcoMCwgbWF0Y2hbN10pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnID4+PiAwXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlLmpzb24udGVzdChtYXRjaFs4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gYXJnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pICYmICghaXNfcG9zaXRpdmUgfHwgbWF0Y2hbM10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gaXNfcG9zaXRpdmUgPyBcIitcIiA6IFwiLVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKHJlLnNpZ24sIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gXCJcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhZF9jaGFyYWN0ZXIgPSBtYXRjaFs0XSA/IG1hdGNoWzRdID09PSBcIjBcIiA/IFwiMFwiIDogbWF0Y2hbNF0uY2hhckF0KDEpIDogXCIgXCJcbiAgICAgICAgICAgICAgICAgICAgcGFkX2xlbmd0aCA9IG1hdGNoWzZdIC0gKHNpZ24gKyBhcmcpLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICBwYWQgPSBtYXRjaFs2XSA/IChwYWRfbGVuZ3RoID4gMCA/IHN0cl9yZXBlYXQocGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCkgOiBcIlwiKSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gbWF0Y2hbNV0gPyBzaWduICsgYXJnICsgcGFkIDogKHBhZF9jaGFyYWN0ZXIgPT09IFwiMFwiID8gc2lnbiArIHBhZCArIGFyZyA6IHBhZCArIHNpZ24gKyBhcmcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbihcIlwiKVxuICAgIH1cblxuICAgIHNwcmludGYuY2FjaGUgPSB7fVxuXG4gICAgc3ByaW50Zi5wYXJzZSA9IGZ1bmN0aW9uKGZtdCkge1xuICAgICAgICB2YXIgX2ZtdCA9IGZtdCwgbWF0Y2ggPSBbXSwgcGFyc2VfdHJlZSA9IFtdLCBhcmdfbmFtZXMgPSAwXG4gICAgICAgIHdoaWxlIChfZm10KSB7XG4gICAgICAgICAgICBpZiAoKG1hdGNoID0gcmUudGV4dC5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gbWF0Y2hbMF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLm1vZHVsby5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gXCIlXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLnBsYWNlaG9sZGVyLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAxXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZF9saXN0ID0gW10sIHJlcGxhY2VtZW50X2ZpZWxkID0gbWF0Y2hbMl0sIGZpZWxkX21hdGNoID0gW11cbiAgICAgICAgICAgICAgICAgICAgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmtleS5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgocmVwbGFjZW1lbnRfZmllbGQgPSByZXBsYWNlbWVudF9maWVsZC5zdWJzdHJpbmcoZmllbGRfbWF0Y2hbMF0ubGVuZ3RoKSkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmllbGRfbWF0Y2ggPSByZS5pbmRleF9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXlcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXSA9IGZpZWxkX2xpc3RcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcmdfbmFtZXMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3NwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZFwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gdW5leHBlY3RlZCBwbGFjZWhvbGRlclwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VfdHJlZVxuICAgIH1cblxuICAgIHZhciB2c3ByaW50ZiA9IGZ1bmN0aW9uKGZtdCwgYXJndiwgX2FyZ3YpIHtcbiAgICAgICAgX2FyZ3YgPSAoYXJndiB8fCBbXSkuc2xpY2UoMClcbiAgICAgICAgX2FyZ3Yuc3BsaWNlKDAsIDAsIGZtdClcbiAgICAgICAgcmV0dXJuIHNwcmludGYuYXBwbHkobnVsbCwgX2FyZ3YpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldF90eXBlKHZhcmlhYmxlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFyaWFibGUpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RyX3JlcGVhdChpbnB1dCwgbXVsdGlwbGllcikge1xuICAgICAgICByZXR1cm4gQXJyYXkobXVsdGlwbGllciArIDEpLmpvaW4oaW5wdXQpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZXhwb3J0IHRvIGVpdGhlciBicm93c2VyIG9yIG5vZGUuanNcbiAgICAgKi9cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgZXhwb3J0cy5zcHJpbnRmID0gc3ByaW50ZlxuICAgICAgICBleHBvcnRzLnZzcHJpbnRmID0gdnNwcmludGZcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zcHJpbnRmID0gc3ByaW50ZlxuICAgICAgICB3aW5kb3cudnNwcmludGYgPSB2c3ByaW50ZlxuXG4gICAgICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNwcmludGY6IHNwcmludGYsXG4gICAgICAgICAgICAgICAgICAgIHZzcHJpbnRmOiB2c3ByaW50ZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59KSh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IHdpbmRvdyk7XG4iLCJ2YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xudmFyIGRlY2FwID0gcmVxdWlyZSgnLi9kZWNhcGl0YWxpemUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjYW1lbGl6ZShzdHIsIGRlY2FwaXRhbGl6ZSkge1xuICBzdHIgPSB0cmltKHN0cikucmVwbGFjZSgvWy1fXFxzXSsoLik/L2csIGZ1bmN0aW9uKG1hdGNoLCBjKSB7XG4gICAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgfSk7XG5cbiAgaWYgKGRlY2FwaXRhbGl6ZSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBkZWNhcChzdHIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjYXBpdGFsaXplKHN0ciwgbG93ZXJjYXNlUmVzdCkge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIHZhciByZW1haW5pbmdDaGFycyA9ICFsb3dlcmNhc2VSZXN0ID8gc3RyLnNsaWNlKDEpIDogc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG5cbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlbWFpbmluZ0NoYXJzO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNoYXJzKHN0cikge1xuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnNwbGl0KCcnKTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNob3Aoc3RyLCBzdGVwKSB7XG4gIGlmIChzdHIgPT0gbnVsbCkgcmV0dXJuIFtdO1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgc3RlcCA9IH5+c3RlcDtcbiAgcmV0dXJuIHN0ZXAgPiAwID8gc3RyLm1hdGNoKG5ldyBSZWdFeHAoJy57MSwnICsgc3RlcCArICd9JywgJ2cnKSkgOiBbc3RyXTtcbn07XG4iLCJ2YXIgY2FwaXRhbGl6ZSA9IHJlcXVpcmUoJy4vY2FwaXRhbGl6ZScpO1xudmFyIGNhbWVsaXplID0gcmVxdWlyZSgnLi9jYW1lbGl6ZScpO1xudmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgcmV0dXJuIGNhcGl0YWxpemUoY2FtZWxpemUoc3RyLnJlcGxhY2UoL1tcXFdfXS9nLCAnICcpKS5yZXBsYWNlKC9cXHMvZywgJycpKTtcbn07XG4iLCJ2YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNsZWFuKHN0cikge1xuICByZXR1cm4gdHJpbShzdHIpLnJlcGxhY2UoL1xcc1xccysvZywgJyAnKTtcbn07XG4iLCJcbnZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG52YXIgZnJvbSAgPSAnxIXDoMOhw6TDosOjw6XDpsSDxIfEjcSJxJnDqMOpw6vDqsSdxKXDrMOtw6/DrsS1xYLEvsWExYjDssOzw7bFkcO0w7XDsMO4xZvImcWfxaHFncWlyJvFo8Wtw7nDusO8xbHDu8Oxw7/DvcOnxbzFusW+JyxcbiAgdG8gICAgPSAnYWFhYWFhYWFhY2NjZWVlZWVnaGlpaWlqbGxubm9vb29vb29vc3Nzc3N0dHR1dXV1dXVueXljenp6JztcblxuZnJvbSArPSBmcm9tLnRvVXBwZXJDYXNlKCk7XG50byArPSB0by50b1VwcGVyQ2FzZSgpO1xuXG50byA9IHRvLnNwbGl0KCcnKTtcblxuLy8gZm9yIHRva2VucyByZXF1aXJlaW5nIG11bHRpdG9rZW4gb3V0cHV0XG5mcm9tICs9ICfDnyc7XG50by5wdXNoKCdzcycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY2xlYW5EaWFjcml0aWNzKHN0cikge1xuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnJlcGxhY2UoLy57MX0vZywgZnVuY3Rpb24oYyl7XG4gICAgdmFyIGluZGV4ID0gZnJvbS5pbmRleE9mKGMpO1xuICAgIHJldHVybiBpbmRleCA9PT0gLTEgPyBjIDogdG9baW5kZXhdO1xuICB9KTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzdHIsIHN1YnN0cikge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIHN1YnN0ciA9IG1ha2VTdHJpbmcoc3Vic3RyKTtcblxuICBpZiAoc3RyLmxlbmd0aCA9PT0gMCB8fCBzdWJzdHIubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgXG4gIHJldHVybiBzdHIuc3BsaXQoc3Vic3RyKS5sZW5ndGggLSAxO1xufTtcbiIsInZhciB0cmltID0gcmVxdWlyZSgnLi90cmltJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGFzaGVyaXplKHN0cikge1xuICByZXR1cm4gdHJpbShzdHIpLnJlcGxhY2UoLyhbQS1aXSkvZywgJy0kMScpLnJlcGxhY2UoL1stX1xcc10rL2csICctJykudG9Mb3dlckNhc2UoKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWNhcGl0YWxpemUoc3RyKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxuZnVuY3Rpb24gZ2V0SW5kZW50KHN0cikge1xuICB2YXIgbWF0Y2hlcyA9IHN0ci5tYXRjaCgvXltcXHNcXFxcdF0qL2dtKTtcbiAgdmFyIGluZGVudCA9IG1hdGNoZXNbMF0ubGVuZ3RoO1xuICBcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaW5kZW50ID0gTWF0aC5taW4obWF0Y2hlc1tpXS5sZW5ndGgsIGluZGVudCk7XG4gIH1cblxuICByZXR1cm4gaW5kZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZGVudChzdHIsIHBhdHRlcm4pIHtcbiAgc3RyID0gbWFrZVN0cmluZyhzdHIpO1xuICB2YXIgaW5kZW50ID0gZ2V0SW5kZW50KHN0cik7XG4gIHZhciByZWc7XG5cbiAgaWYgKGluZGVudCA9PT0gMCkgcmV0dXJuIHN0cjtcblxuICBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgcmVnID0gbmV3IFJlZ0V4cCgnXicgKyBwYXR0ZXJuLCAnZ20nKTtcbiAgfSBlbHNlIHtcbiAgICByZWcgPSBuZXcgUmVnRXhwKCdeWyBcXFxcdF17JyArIGluZGVudCArICd9JywgJ2dtJyk7XG4gIH1cblxuICByZXR1cm4gc3RyLnJlcGxhY2UocmVnLCAnJyk7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG52YXIgdG9Qb3NpdGl2ZSA9IHJlcXVpcmUoJy4vaGVscGVyL3RvUG9zaXRpdmUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmRzV2l0aChzdHIsIGVuZHMsIHBvc2l0aW9uKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgZW5kcyA9ICcnICsgZW5kcztcbiAgaWYgKHR5cGVvZiBwb3NpdGlvbiA9PSAndW5kZWZpbmVkJykge1xuICAgIHBvc2l0aW9uID0gc3RyLmxlbmd0aCAtIGVuZHMubGVuZ3RoO1xuICB9IGVsc2Uge1xuICAgIHBvc2l0aW9uID0gTWF0aC5taW4odG9Qb3NpdGl2ZShwb3NpdGlvbiksIHN0ci5sZW5ndGgpIC0gZW5kcy5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9uID49IDAgJiYgc3RyLmluZGV4T2YoZW5kcywgcG9zaXRpb24pID09PSBwb3NpdGlvbjtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcbnZhciBlc2NhcGVDaGFycyA9IHJlcXVpcmUoJy4vaGVscGVyL2VzY2FwZUNoYXJzJyk7XG5cbnZhciByZWdleFN0cmluZyA9ICdbJztcbmZvcih2YXIga2V5IGluIGVzY2FwZUNoYXJzKSB7XG4gIHJlZ2V4U3RyaW5nICs9IGtleTtcbn1cbnJlZ2V4U3RyaW5nICs9ICddJztcblxudmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCggcmVnZXhTdHJpbmcsICdnJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXNjYXBlSFRNTChzdHIpIHtcblxuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnJlcGxhY2UocmVnZXgsIGZ1bmN0aW9uKG0pIHtcbiAgICByZXR1cm4gJyYnICsgZXNjYXBlQ2hhcnNbbV0gKyAnOyc7XG4gIH0pO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBmb3IgKHZhciBwcm9wIGluIHRoaXMpIHtcbiAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgcHJvcC5tYXRjaCgvXig/OmluY2x1ZGV8Y29udGFpbnN8cmV2ZXJzZXxqb2lufG1hcHx3cmFwKSQvKSkgY29udGludWU7XG4gICAgcmVzdWx0W3Byb3BdID0gdGhpc1twcm9wXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhZGphY2VudChzdHIsIGRpcmVjdGlvbikge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgLTEpICsgU3RyaW5nLmZyb21DaGFyQ29kZShzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSkgKyBkaXJlY3Rpb24pO1xufTtcbiIsInZhciBlc2NhcGVSZWdFeHAgPSByZXF1aXJlKCcuL2VzY2FwZVJlZ0V4cCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmF1bHRUb1doaXRlU3BhY2UoY2hhcmFjdGVycykge1xuICBpZiAoY2hhcmFjdGVycyA9PSBudWxsKVxuICAgIHJldHVybiAnXFxcXHMnO1xuICBlbHNlIGlmIChjaGFyYWN0ZXJzLnNvdXJjZSlcbiAgICByZXR1cm4gY2hhcmFjdGVycy5zb3VyY2U7XG4gIGVsc2VcbiAgICByZXR1cm4gJ1snICsgZXNjYXBlUmVnRXhwKGNoYXJhY3RlcnMpICsgJ10nO1xufTtcbiIsIi8qIFdlJ3JlIGV4cGxpY2l0bHkgZGVmaW5pbmcgdGhlIGxpc3Qgb2YgZW50aXRpZXMgd2Ugd2FudCB0byBlc2NhcGUuXG5uYnNwIGlzIGFuIEhUTUwgZW50aXR5LCBidXQgd2UgZG9uJ3Qgd2FudCB0byBlc2NhcGUgYWxsIHNwYWNlIGNoYXJhY3RlcnMgaW4gYSBzdHJpbmcsIGhlbmNlIGl0cyBvbWlzc2lvbiBpbiB0aGlzIG1hcC5cblxuKi9cbnZhciBlc2NhcGVDaGFycyA9IHtcbiAgJ8KiJyA6ICdjZW50JyxcbiAgJ8KjJyA6ICdwb3VuZCcsXG4gICfCpScgOiAneWVuJyxcbiAgJ+KCrCc6ICdldXJvJyxcbiAgJ8KpJyA6J2NvcHknLFxuICAnwq4nIDogJ3JlZycsXG4gICc8JyA6ICdsdCcsXG4gICc+JyA6ICdndCcsXG4gICdcIicgOiAncXVvdCcsXG4gICcmJyA6ICdhbXAnLFxuICAnXFwnJyA6ICcjMzknXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZUNoYXJzO1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyKSB7XG4gIHJldHVybiBtYWtlU3RyaW5nKHN0cikucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXF1cXC9cXFxcXSkvZywgJ1xcXFwkMScpO1xufTtcbiIsIi8qXG5XZSdyZSBleHBsaWNpdGx5IGRlZmluaW5nIHRoZSBsaXN0IG9mIGVudGl0aWVzIHRoYXQgbWlnaHQgc2VlIGluIGVzY2FwZSBIVE1MIHN0cmluZ3NcbiovXG52YXIgaHRtbEVudGl0aWVzID0ge1xuICBuYnNwOiAnICcsXG4gIGNlbnQ6ICfCoicsXG4gIHBvdW5kOiAnwqMnLFxuICB5ZW46ICfCpScsXG4gIGV1cm86ICfigqwnLFxuICBjb3B5OiAnwqknLFxuICByZWc6ICfCricsXG4gIGx0OiAnPCcsXG4gIGd0OiAnPicsXG4gIHF1b3Q6ICdcIicsXG4gIGFtcDogJyYnLFxuICBhcG9zOiAnXFwnJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBodG1sRW50aXRpZXM7XG4iLCIvKipcbiAqIEVuc3VyZSBzb21lIG9iamVjdCBpcyBhIGNvZXJjZWQgdG8gYSBzdHJpbmdcbiAqKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWFrZVN0cmluZyhvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gJyc7XG4gIHJldHVybiAnJyArIG9iamVjdDtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0clJlcGVhdChzdHIsIHF0eSl7XG4gIGlmIChxdHkgPCAxKSByZXR1cm4gJyc7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgd2hpbGUgKHF0eSA+IDApIHtcbiAgICBpZiAocXR5ICYgMSkgcmVzdWx0ICs9IHN0cjtcbiAgICBxdHkgPj49IDEsIHN0ciArPSBzdHI7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRvUG9zaXRpdmUobnVtYmVyKSB7XG4gIHJldHVybiBudW1iZXIgPCAwID8gMCA6ICgrbnVtYmVyIHx8IDApO1xufTtcbiIsInZhciBjYXBpdGFsaXplID0gcmVxdWlyZSgnLi9jYXBpdGFsaXplJyk7XG52YXIgdW5kZXJzY29yZWQgPSByZXF1aXJlKCcuL3VuZGVyc2NvcmVkJyk7XG52YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGh1bWFuaXplKHN0cikge1xuICByZXR1cm4gY2FwaXRhbGl6ZSh0cmltKHVuZGVyc2NvcmVkKHN0cikucmVwbGFjZSgvX2lkJC8sICcnKS5yZXBsYWNlKC9fL2csICcgJykpKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmNsdWRlKHN0ciwgbmVlZGxlKSB7XG4gIGlmIChuZWVkbGUgPT09ICcnKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIG1ha2VTdHJpbmcoc3RyKS5pbmRleE9mKG5lZWRsZSkgIT09IC0xO1xufTtcbiIsIi8qXG4qIFVuZGVyc2NvcmUuc3RyaW5nXG4qIChjKSAyMDEwIEVzYS1NYXR0aSBTdXVyb25lbiA8ZXNhLW1hdHRpIGFldCBzdXVyb25lbiBkb3Qgb3JnPlxuKiBVbmRlcnNjb3JlLnN0cmluZyBpcyBmcmVlbHkgZGlzdHJpYnV0YWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBsaWNlbnNlLlxuKiBEb2N1bWVudGF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vZXBlbGkvdW5kZXJzY29yZS5zdHJpbmdcbiogU29tZSBjb2RlIGlzIGJvcnJvd2VkIGZyb20gTW9vVG9vbHMgYW5kIEFsZXhhbmRydSBNYXJhc3RlYW51LlxuKiBWZXJzaW9uICczLjMuNCdcbiogQHByZXNlcnZlXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHModmFsdWUpIHtcbiAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgcykpIHJldHVybiBuZXcgcyh2YWx1ZSk7XG4gIHRoaXMuX3dyYXBwZWQgPSB2YWx1ZTtcbn1cblxucy5WRVJTSU9OID0gJzMuMy40Jztcblxucy5pc0JsYW5rICAgICAgICAgID0gcmVxdWlyZSgnLi9pc0JsYW5rJyk7XG5zLnN0cmlwVGFncyAgICAgICAgPSByZXF1aXJlKCcuL3N0cmlwVGFncycpO1xucy5jYXBpdGFsaXplICAgICAgID0gcmVxdWlyZSgnLi9jYXBpdGFsaXplJyk7XG5zLmRlY2FwaXRhbGl6ZSAgICAgPSByZXF1aXJlKCcuL2RlY2FwaXRhbGl6ZScpO1xucy5jaG9wICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9jaG9wJyk7XG5zLnRyaW0gICAgICAgICAgICAgPSByZXF1aXJlKCcuL3RyaW0nKTtcbnMuY2xlYW4gICAgICAgICAgICA9IHJlcXVpcmUoJy4vY2xlYW4nKTtcbnMuY2xlYW5EaWFjcml0aWNzICA9IHJlcXVpcmUoJy4vY2xlYW5EaWFjcml0aWNzJyk7XG5zLmNvdW50ICAgICAgICAgICAgPSByZXF1aXJlKCcuL2NvdW50Jyk7XG5zLmNoYXJzICAgICAgICAgICAgPSByZXF1aXJlKCcuL2NoYXJzJyk7XG5zLnN3YXBDYXNlICAgICAgICAgPSByZXF1aXJlKCcuL3N3YXBDYXNlJyk7XG5zLmVzY2FwZUhUTUwgICAgICAgPSByZXF1aXJlKCcuL2VzY2FwZUhUTUwnKTtcbnMudW5lc2NhcGVIVE1MICAgICA9IHJlcXVpcmUoJy4vdW5lc2NhcGVIVE1MJyk7XG5zLnNwbGljZSAgICAgICAgICAgPSByZXF1aXJlKCcuL3NwbGljZScpO1xucy5pbnNlcnQgICAgICAgICAgID0gcmVxdWlyZSgnLi9pbnNlcnQnKTtcbnMucmVwbGFjZUFsbCAgICAgICA9IHJlcXVpcmUoJy4vcmVwbGFjZUFsbCcpO1xucy5pbmNsdWRlICAgICAgICAgID0gcmVxdWlyZSgnLi9pbmNsdWRlJyk7XG5zLmpvaW4gICAgICAgICAgICAgPSByZXF1aXJlKCcuL2pvaW4nKTtcbnMubGluZXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vbGluZXMnKTtcbnMuZGVkZW50ICAgICAgICAgICA9IHJlcXVpcmUoJy4vZGVkZW50Jyk7XG5zLnJldmVyc2UgICAgICAgICAgPSByZXF1aXJlKCcuL3JldmVyc2UnKTtcbnMuc3RhcnRzV2l0aCAgICAgICA9IHJlcXVpcmUoJy4vc3RhcnRzV2l0aCcpO1xucy5lbmRzV2l0aCAgICAgICAgID0gcmVxdWlyZSgnLi9lbmRzV2l0aCcpO1xucy5wcmVkICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9wcmVkJyk7XG5zLnN1Y2MgICAgICAgICAgICAgPSByZXF1aXJlKCcuL3N1Y2MnKTtcbnMudGl0bGVpemUgICAgICAgICA9IHJlcXVpcmUoJy4vdGl0bGVpemUnKTtcbnMuY2FtZWxpemUgICAgICAgICA9IHJlcXVpcmUoJy4vY2FtZWxpemUnKTtcbnMudW5kZXJzY29yZWQgICAgICA9IHJlcXVpcmUoJy4vdW5kZXJzY29yZWQnKTtcbnMuZGFzaGVyaXplICAgICAgICA9IHJlcXVpcmUoJy4vZGFzaGVyaXplJyk7XG5zLmNsYXNzaWZ5ICAgICAgICAgPSByZXF1aXJlKCcuL2NsYXNzaWZ5Jyk7XG5zLmh1bWFuaXplICAgICAgICAgPSByZXF1aXJlKCcuL2h1bWFuaXplJyk7XG5zLmx0cmltICAgICAgICAgICAgPSByZXF1aXJlKCcuL2x0cmltJyk7XG5zLnJ0cmltICAgICAgICAgICAgPSByZXF1aXJlKCcuL3J0cmltJyk7XG5zLnRydW5jYXRlICAgICAgICAgPSByZXF1aXJlKCcuL3RydW5jYXRlJyk7XG5zLnBydW5lICAgICAgICAgICAgPSByZXF1aXJlKCcuL3BydW5lJyk7XG5zLndvcmRzICAgICAgICAgICAgPSByZXF1aXJlKCcuL3dvcmRzJyk7XG5zLnBhZCAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL3BhZCcpO1xucy5scGFkICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9scGFkJyk7XG5zLnJwYWQgICAgICAgICAgICAgPSByZXF1aXJlKCcuL3JwYWQnKTtcbnMubHJwYWQgICAgICAgICAgICA9IHJlcXVpcmUoJy4vbHJwYWQnKTtcbnMuc3ByaW50ZiAgICAgICAgICA9IHJlcXVpcmUoJy4vc3ByaW50ZicpO1xucy52c3ByaW50ZiAgICAgICAgID0gcmVxdWlyZSgnLi92c3ByaW50ZicpO1xucy50b051bWJlciAgICAgICAgID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xucy5udW1iZXJGb3JtYXQgICAgID0gcmVxdWlyZSgnLi9udW1iZXJGb3JtYXQnKTtcbnMuc3RyUmlnaHQgICAgICAgICA9IHJlcXVpcmUoJy4vc3RyUmlnaHQnKTtcbnMuc3RyUmlnaHRCYWNrICAgICA9IHJlcXVpcmUoJy4vc3RyUmlnaHRCYWNrJyk7XG5zLnN0ckxlZnQgICAgICAgICAgPSByZXF1aXJlKCcuL3N0ckxlZnQnKTtcbnMuc3RyTGVmdEJhY2sgICAgICA9IHJlcXVpcmUoJy4vc3RyTGVmdEJhY2snKTtcbnMudG9TZW50ZW5jZSAgICAgICA9IHJlcXVpcmUoJy4vdG9TZW50ZW5jZScpO1xucy50b1NlbnRlbmNlU2VyaWFsID0gcmVxdWlyZSgnLi90b1NlbnRlbmNlU2VyaWFsJyk7XG5zLnNsdWdpZnkgICAgICAgICAgPSByZXF1aXJlKCcuL3NsdWdpZnknKTtcbnMuc3Vycm91bmQgICAgICAgICA9IHJlcXVpcmUoJy4vc3Vycm91bmQnKTtcbnMucXVvdGUgICAgICAgICAgICA9IHJlcXVpcmUoJy4vcXVvdGUnKTtcbnMudW5xdW90ZSAgICAgICAgICA9IHJlcXVpcmUoJy4vdW5xdW90ZScpO1xucy5yZXBlYXQgICAgICAgICAgID0gcmVxdWlyZSgnLi9yZXBlYXQnKTtcbnMubmF0dXJhbENtcCAgICAgICA9IHJlcXVpcmUoJy4vbmF0dXJhbENtcCcpO1xucy5sZXZlbnNodGVpbiAgICAgID0gcmVxdWlyZSgnLi9sZXZlbnNodGVpbicpO1xucy50b0Jvb2xlYW4gICAgICAgID0gcmVxdWlyZSgnLi90b0Jvb2xlYW4nKTtcbnMuZXhwb3J0cyAgICAgICAgICA9IHJlcXVpcmUoJy4vZXhwb3J0cycpO1xucy5lc2NhcGVSZWdFeHAgICAgID0gcmVxdWlyZSgnLi9oZWxwZXIvZXNjYXBlUmVnRXhwJyk7XG5zLndyYXAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL3dyYXAnKTtcbnMubWFwICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vbWFwJyk7XG5cbi8vIEFsaWFzZXNcbnMuc3RyaXAgICAgID0gcy50cmltO1xucy5sc3RyaXAgICAgPSBzLmx0cmltO1xucy5yc3RyaXAgICAgPSBzLnJ0cmltO1xucy5jZW50ZXIgICAgPSBzLmxycGFkO1xucy5yanVzdCAgICAgPSBzLmxwYWQ7XG5zLmxqdXN0ICAgICA9IHMucnBhZDtcbnMuY29udGFpbnMgID0gcy5pbmNsdWRlO1xucy5xICAgICAgICAgPSBzLnF1b3RlO1xucy50b0Jvb2wgICAgPSBzLnRvQm9vbGVhbjtcbnMuY2FtZWxjYXNlID0gcy5jYW1lbGl6ZTtcbnMubWFwQ2hhcnMgID0gcy5tYXA7XG5cblxuLy8gSW1wbGVtZW50IGNoYWluaW5nXG5zLnByb3RvdHlwZSA9IHtcbiAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9XG59O1xuXG5mdW5jdGlvbiBmbjJtZXRob2Qoa2V5LCBmbikge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG4gIHMucHJvdG90eXBlW2tleV0gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IFt0aGlzLl93cmFwcGVkXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgdmFyIHJlcyA9IGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIC8vIGlmIHRoZSByZXN1bHQgaXMgbm9uLXN0cmluZyBzdG9wIHRoZSBjaGFpbiBhbmQgcmV0dXJuIHRoZSB2YWx1ZVxuICAgIHJldHVybiB0eXBlb2YgcmVzID09PSAnc3RyaW5nJyA/IG5ldyBzKHJlcykgOiByZXM7XG4gIH07XG59XG5cbi8vIENvcHkgZnVuY3Rpb25zIHRvIGluc3RhbmNlIG1ldGhvZHMgZm9yIGNoYWluaW5nXG5mb3IgKHZhciBrZXkgaW4gcykgZm4ybWV0aG9kKGtleSwgc1trZXldKTtcblxuZm4ybWV0aG9kKCd0YXAnLCBmdW5jdGlvbiB0YXAoc3RyaW5nLCBmbikge1xuICByZXR1cm4gZm4oc3RyaW5nKTtcbn0pO1xuXG5mdW5jdGlvbiBwcm90b3R5cGUybWV0aG9kKG1ldGhvZE5hbWUpIHtcbiAgZm4ybWV0aG9kKG1ldGhvZE5hbWUsIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGVbbWV0aG9kTmFtZV0uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIH0pO1xufVxuXG52YXIgcHJvdG90eXBlTWV0aG9kcyA9IFtcbiAgJ3RvVXBwZXJDYXNlJyxcbiAgJ3RvTG93ZXJDYXNlJyxcbiAgJ3NwbGl0JyxcbiAgJ3JlcGxhY2UnLFxuICAnc2xpY2UnLFxuICAnc3Vic3RyaW5nJyxcbiAgJ3N1YnN0cicsXG4gICdjb25jYXQnXG5dO1xuXG5mb3IgKHZhciBtZXRob2QgaW4gcHJvdG90eXBlTWV0aG9kcykgcHJvdG90eXBlMm1ldGhvZChwcm90b3R5cGVNZXRob2RzW21ldGhvZF0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcztcbiIsInZhciBzcGxpY2UgPSByZXF1aXJlKCcuL3NwbGljZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc2VydChzdHIsIGksIHN1YnN0cikge1xuICByZXR1cm4gc3BsaWNlKHN0ciwgaSwgMCwgc3Vic3RyKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0JsYW5rKHN0cikge1xuICByZXR1cm4gKC9eXFxzKiQvKS50ZXN0KG1ha2VTdHJpbmcoc3RyKSk7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG52YXIgc2xpY2UgPSBbXS5zbGljZTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBqb2luKCkge1xuICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICBzZXBhcmF0b3IgPSBhcmdzLnNoaWZ0KCk7XG5cbiAgcmV0dXJuIGFyZ3Muam9pbihtYWtlU3RyaW5nKHNlcGFyYXRvcikpO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG4vKipcbiAqIEJhc2VkIG9uIHRoZSBpbXBsZW1lbnRhdGlvbiBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vaGlkZGVudGFvL2Zhc3QtbGV2ZW5zaHRlaW5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsZXZlbnNodGVpbihzdHIxLCBzdHIyKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgc3RyMSA9IG1ha2VTdHJpbmcoc3RyMSk7XG4gIHN0cjIgPSBtYWtlU3RyaW5nKHN0cjIpO1xuXG4gIC8vIFNob3J0IGN1dCBjYXNlcyAgXG4gIGlmIChzdHIxID09PSBzdHIyKSByZXR1cm4gMDtcbiAgaWYgKCFzdHIxIHx8ICFzdHIyKSByZXR1cm4gTWF0aC5tYXgoc3RyMS5sZW5ndGgsIHN0cjIubGVuZ3RoKTtcblxuICAvLyB0d28gcm93c1xuICB2YXIgcHJldlJvdyA9IG5ldyBBcnJheShzdHIyLmxlbmd0aCArIDEpO1xuXG4gIC8vIGluaXRpYWxpc2UgcHJldmlvdXMgcm93XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldlJvdy5sZW5ndGg7ICsraSkge1xuICAgIHByZXZSb3dbaV0gPSBpO1xuICB9XG5cbiAgLy8gY2FsY3VsYXRlIGN1cnJlbnQgcm93IGRpc3RhbmNlIGZyb20gcHJldmlvdXMgcm93XG4gIGZvciAoaSA9IDA7IGkgPCBzdHIxLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIG5leHRDb2wgPSBpICsgMTtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RyMi5sZW5ndGg7ICsraikge1xuICAgICAgdmFyIGN1ckNvbCA9IG5leHRDb2w7XG5cbiAgICAgIC8vIHN1YnN0dXRpb25cbiAgICAgIG5leHRDb2wgPSBwcmV2Um93W2pdICsgKCAoc3RyMS5jaGFyQXQoaSkgPT09IHN0cjIuY2hhckF0KGopKSA/IDAgOiAxICk7XG4gICAgICAvLyBpbnNlcnRpb25cbiAgICAgIHZhciB0bXAgPSBjdXJDb2wgKyAxO1xuICAgICAgaWYgKG5leHRDb2wgPiB0bXApIHtcbiAgICAgICAgbmV4dENvbCA9IHRtcDtcbiAgICAgIH1cbiAgICAgIC8vIGRlbGV0aW9uXG4gICAgICB0bXAgPSBwcmV2Um93W2ogKyAxXSArIDE7XG4gICAgICBpZiAobmV4dENvbCA+IHRtcCkge1xuICAgICAgICBuZXh0Q29sID0gdG1wO1xuICAgICAgfVxuXG4gICAgICAvLyBjb3B5IGN1cnJlbnQgY29sIHZhbHVlIGludG8gcHJldmlvdXMgKGluIHByZXBhcmF0aW9uIGZvciBuZXh0IGl0ZXJhdGlvbilcbiAgICAgIHByZXZSb3dbal0gPSBjdXJDb2w7XG4gICAgfVxuXG4gICAgLy8gY29weSBsYXN0IGNvbCB2YWx1ZSBpbnRvIHByZXZpb3VzIChpbiBwcmVwYXJhdGlvbiBmb3IgbmV4dCBpdGVyYXRpb24pXG4gICAgcHJldlJvd1tqXSA9IG5leHRDb2w7XG4gIH1cblxuICByZXR1cm4gbmV4dENvbDtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxpbmVzKHN0cikge1xuICBpZiAoc3RyID09IG51bGwpIHJldHVybiBbXTtcbiAgcmV0dXJuIFN0cmluZyhzdHIpLnNwbGl0KC9cXHJcXG4/fFxcbi8pO1xufTtcbiIsInZhciBwYWQgPSByZXF1aXJlKCcuL3BhZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxwYWQoc3RyLCBsZW5ndGgsIHBhZFN0cikge1xuICByZXR1cm4gcGFkKHN0ciwgbGVuZ3RoLCBwYWRTdHIpO1xufTtcbiIsInZhciBwYWQgPSByZXF1aXJlKCcuL3BhZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxycGFkKHN0ciwgbGVuZ3RoLCBwYWRTdHIpIHtcbiAgcmV0dXJuIHBhZChzdHIsIGxlbmd0aCwgcGFkU3RyLCAnYm90aCcpO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xudmFyIGRlZmF1bHRUb1doaXRlU3BhY2UgPSByZXF1aXJlKCcuL2hlbHBlci9kZWZhdWx0VG9XaGl0ZVNwYWNlJyk7XG52YXIgbmF0aXZlVHJpbUxlZnQgPSBTdHJpbmcucHJvdG90eXBlLnRyaW1MZWZ0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGx0cmltKHN0ciwgY2hhcmFjdGVycykge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIGlmICghY2hhcmFjdGVycyAmJiBuYXRpdmVUcmltTGVmdCkgcmV0dXJuIG5hdGl2ZVRyaW1MZWZ0LmNhbGwoc3RyKTtcbiAgY2hhcmFjdGVycyA9IGRlZmF1bHRUb1doaXRlU3BhY2UoY2hhcmFjdGVycyk7XG4gIHJldHVybiBzdHIucmVwbGFjZShuZXcgUmVnRXhwKCdeJyArIGNoYXJhY3RlcnMgKyAnKycpLCAnJyk7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3RyLCBjYWxsYmFjaykge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG5cbiAgaWYgKHN0ci5sZW5ndGggPT09IDAgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gc3RyO1xuXG4gIHJldHVybiBzdHIucmVwbGFjZSgvLi9nLCBjYWxsYmFjayk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBuYXR1cmFsQ21wKHN0cjEsIHN0cjIpIHtcbiAgaWYgKHN0cjEgPT0gc3RyMikgcmV0dXJuIDA7XG4gIGlmICghc3RyMSkgcmV0dXJuIC0xO1xuICBpZiAoIXN0cjIpIHJldHVybiAxO1xuXG4gIHZhciBjbXBSZWdleCA9IC8oXFwuXFxkK3xcXGQrfFxcRCspL2csXG4gICAgdG9rZW5zMSA9IFN0cmluZyhzdHIxKS5tYXRjaChjbXBSZWdleCksXG4gICAgdG9rZW5zMiA9IFN0cmluZyhzdHIyKS5tYXRjaChjbXBSZWdleCksXG4gICAgY291bnQgPSBNYXRoLm1pbih0b2tlbnMxLmxlbmd0aCwgdG9rZW5zMi5sZW5ndGgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIHZhciBhID0gdG9rZW5zMVtpXSxcbiAgICAgIGIgPSB0b2tlbnMyW2ldO1xuXG4gICAgaWYgKGEgIT09IGIpIHtcbiAgICAgIHZhciBudW0xID0gK2E7XG4gICAgICB2YXIgbnVtMiA9ICtiO1xuICAgICAgaWYgKG51bTEgPT09IG51bTEgJiYgbnVtMiA9PT0gbnVtMikge1xuICAgICAgICByZXR1cm4gbnVtMSA+IG51bTIgPyAxIDogLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYSA8IGIgPyAtMSA6IDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRva2VuczEubGVuZ3RoICE9IHRva2VuczIubGVuZ3RoKVxuICAgIHJldHVybiB0b2tlbnMxLmxlbmd0aCAtIHRva2VuczIubGVuZ3RoO1xuXG4gIHJldHVybiBzdHIxIDwgc3RyMiA/IC0xIDogMTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG51bWJlckZvcm1hdChudW1iZXIsIGRlYywgZHNlcCwgdHNlcCkge1xuICBpZiAoaXNOYU4obnVtYmVyKSB8fCBudW1iZXIgPT0gbnVsbCkgcmV0dXJuICcnO1xuXG4gIG51bWJlciA9IG51bWJlci50b0ZpeGVkKH5+ZGVjKTtcbiAgdHNlcCA9IHR5cGVvZiB0c2VwID09ICdzdHJpbmcnID8gdHNlcCA6ICcsJztcblxuICB2YXIgcGFydHMgPSBudW1iZXIuc3BsaXQoJy4nKSxcbiAgICBmbnVtcyA9IHBhcnRzWzBdLFxuICAgIGRlY2ltYWxzID0gcGFydHNbMV0gPyAoZHNlcCB8fCAnLicpICsgcGFydHNbMV0gOiAnJztcblxuICByZXR1cm4gZm51bXMucmVwbGFjZSgvKFxcZCkoPz0oPzpcXGR7M30pKyQpL2csICckMScgKyB0c2VwKSArIGRlY2ltYWxzO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xudmFyIHN0clJlcGVhdCA9IHJlcXVpcmUoJy4vaGVscGVyL3N0clJlcGVhdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhZChzdHIsIGxlbmd0aCwgcGFkU3RyLCB0eXBlKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgbGVuZ3RoID0gfn5sZW5ndGg7XG5cbiAgdmFyIHBhZGxlbiA9IDA7XG5cbiAgaWYgKCFwYWRTdHIpXG4gICAgcGFkU3RyID0gJyAnO1xuICBlbHNlIGlmIChwYWRTdHIubGVuZ3RoID4gMSlcbiAgICBwYWRTdHIgPSBwYWRTdHIuY2hhckF0KDApO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICBjYXNlICdyaWdodCc6XG4gICAgcGFkbGVuID0gbGVuZ3RoIC0gc3RyLmxlbmd0aDtcbiAgICByZXR1cm4gc3RyICsgc3RyUmVwZWF0KHBhZFN0ciwgcGFkbGVuKTtcbiAgY2FzZSAnYm90aCc6XG4gICAgcGFkbGVuID0gbGVuZ3RoIC0gc3RyLmxlbmd0aDtcbiAgICByZXR1cm4gc3RyUmVwZWF0KHBhZFN0ciwgTWF0aC5jZWlsKHBhZGxlbiAvIDIpKSArIHN0ciArIHN0clJlcGVhdChwYWRTdHIsIE1hdGguZmxvb3IocGFkbGVuIC8gMikpO1xuICBkZWZhdWx0OiAvLyAnbGVmdCdcbiAgICBwYWRsZW4gPSBsZW5ndGggLSBzdHIubGVuZ3RoO1xuICAgIHJldHVybiBzdHJSZXBlYXQocGFkU3RyLCBwYWRsZW4pICsgc3RyO1xuICB9XG59O1xuIiwidmFyIGFkamFjZW50ID0gcmVxdWlyZSgnLi9oZWxwZXIvYWRqYWNlbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdWNjKHN0cikge1xuICByZXR1cm4gYWRqYWNlbnQoc3RyLCAtMSk7XG59O1xuIiwiLyoqXG4gKiBfcy5wcnVuZTogYSBtb3JlIGVsZWdhbnQgdmVyc2lvbiBvZiB0cnVuY2F0ZVxuICogcHJ1bmUgZXh0cmEgY2hhcnMsIG5ldmVyIGxlYXZpbmcgYSBoYWxmLWNob3BwZWQgd29yZC5cbiAqIEBhdXRob3IgZ2l0aHViLmNvbS9yd3pcbiAqL1xudmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG52YXIgcnRyaW0gPSByZXF1aXJlKCcuL3J0cmltJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHJ1bmUoc3RyLCBsZW5ndGgsIHBydW5lU3RyKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgbGVuZ3RoID0gfn5sZW5ndGg7XG4gIHBydW5lU3RyID0gcHJ1bmVTdHIgIT0gbnVsbCA/IFN0cmluZyhwcnVuZVN0cikgOiAnLi4uJztcblxuICBpZiAoc3RyLmxlbmd0aCA8PSBsZW5ndGgpIHJldHVybiBzdHI7XG5cbiAgdmFyIHRtcGwgPSBmdW5jdGlvbihjKSB7XG4gICAgICByZXR1cm4gYy50b1VwcGVyQ2FzZSgpICE9PSBjLnRvTG93ZXJDYXNlKCkgPyAnQScgOiAnICc7XG4gICAgfSxcbiAgICB0ZW1wbGF0ZSA9IHN0ci5zbGljZSgwLCBsZW5ndGggKyAxKS5yZXBsYWNlKC8uKD89XFxXKlxcdyokKS9nLCB0bXBsKTsgLy8gJ0hlbGxvLCB3b3JsZCcgLT4gJ0hlbGxBQSBBQUFBQSdcblxuICBpZiAodGVtcGxhdGUuc2xpY2UodGVtcGxhdGUubGVuZ3RoIC0gMikubWF0Y2goL1xcd1xcdy8pKVxuICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFxzKlxcUyskLywgJycpO1xuICBlbHNlXG4gICAgdGVtcGxhdGUgPSBydHJpbSh0ZW1wbGF0ZS5zbGljZSgwLCB0ZW1wbGF0ZS5sZW5ndGggLSAxKSk7XG5cbiAgcmV0dXJuICh0ZW1wbGF0ZSArIHBydW5lU3RyKS5sZW5ndGggPiBzdHIubGVuZ3RoID8gc3RyIDogc3RyLnNsaWNlKDAsIHRlbXBsYXRlLmxlbmd0aCkgKyBwcnVuZVN0cjtcbn07XG4iLCJ2YXIgc3Vycm91bmQgPSByZXF1aXJlKCcuL3N1cnJvdW5kJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcXVvdGUoc3RyLCBxdW90ZUNoYXIpIHtcbiAgcmV0dXJuIHN1cnJvdW5kKHN0ciwgcXVvdGVDaGFyIHx8ICdcIicpO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xudmFyIHN0clJlcGVhdCA9IHJlcXVpcmUoJy4vaGVscGVyL3N0clJlcGVhdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcGVhdChzdHIsIHF0eSwgc2VwYXJhdG9yKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcblxuICBxdHkgPSB+fnF0eTtcblxuICAvLyB1c2luZyBmYXN0ZXIgaW1wbGVtZW50YXRpb24gaWYgc2VwYXJhdG9yIGlzIG5vdCBuZWVkZWQ7XG4gIGlmIChzZXBhcmF0b3IgPT0gbnVsbCkgcmV0dXJuIHN0clJlcGVhdChzdHIsIHF0eSk7XG5cbiAgLy8gdGhpcyBvbmUgaXMgYWJvdXQgMzAweCBzbG93ZXIgaW4gR29vZ2xlIENocm9tZVxuICAvKmVzbGludCBuby1lbXB0eTogMCovXG4gIGZvciAodmFyIHJlcGVhdCA9IFtdOyBxdHkgPiAwOyByZXBlYXRbLS1xdHldID0gc3RyKSB7fVxuICByZXR1cm4gcmVwZWF0LmpvaW4oc2VwYXJhdG9yKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXBsYWNlQWxsKHN0ciwgZmluZCwgcmVwbGFjZSwgaWdub3JlY2FzZSkge1xuICB2YXIgZmxhZ3MgPSAoaWdub3JlY2FzZSA9PT0gdHJ1ZSk/J2dpJzonZyc7XG4gIHZhciByZWcgPSBuZXcgUmVnRXhwKGZpbmQsIGZsYWdzKTtcblxuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnJlcGxhY2UocmVnLCByZXBsYWNlKTtcbn07XG4iLCJ2YXIgY2hhcnMgPSByZXF1aXJlKCcuL2NoYXJzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmV2ZXJzZShzdHIpIHtcbiAgcmV0dXJuIGNoYXJzKHN0cikucmV2ZXJzZSgpLmpvaW4oJycpO1xufTtcbiIsInZhciBwYWQgPSByZXF1aXJlKCcuL3BhZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJwYWQoc3RyLCBsZW5ndGgsIHBhZFN0cikge1xuICByZXR1cm4gcGFkKHN0ciwgbGVuZ3RoLCBwYWRTdHIsICdyaWdodCcpO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xudmFyIGRlZmF1bHRUb1doaXRlU3BhY2UgPSByZXF1aXJlKCcuL2hlbHBlci9kZWZhdWx0VG9XaGl0ZVNwYWNlJyk7XG52YXIgbmF0aXZlVHJpbVJpZ2h0ID0gU3RyaW5nLnByb3RvdHlwZS50cmltUmlnaHQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcnRyaW0oc3RyLCBjaGFyYWN0ZXJzKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgaWYgKCFjaGFyYWN0ZXJzICYmIG5hdGl2ZVRyaW1SaWdodCkgcmV0dXJuIG5hdGl2ZVRyaW1SaWdodC5jYWxsKHN0cik7XG4gIGNoYXJhY3RlcnMgPSBkZWZhdWx0VG9XaGl0ZVNwYWNlKGNoYXJhY3RlcnMpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cChjaGFyYWN0ZXJzICsgJyskJyksICcnKTtcbn07XG4iLCJ2YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xudmFyIGRhc2hlcml6ZSA9IHJlcXVpcmUoJy4vZGFzaGVyaXplJyk7XG52YXIgY2xlYW5EaWFjcml0aWNzID0gcmVxdWlyZSgnLi9jbGVhbkRpYWNyaXRpY3MnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzbHVnaWZ5KHN0cikge1xuICByZXR1cm4gdHJpbShkYXNoZXJpemUoY2xlYW5EaWFjcml0aWNzKHN0cikucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnLScpLnRvTG93ZXJDYXNlKCkpLCAnLScpO1xufTtcbiIsInZhciBjaGFycyA9IHJlcXVpcmUoJy4vY2hhcnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcGxpY2Uoc3RyLCBpLCBob3dtYW55LCBzdWJzdHIpIHtcbiAgdmFyIGFyciA9IGNoYXJzKHN0cik7XG4gIGFyci5zcGxpY2Uofn5pLCB+fmhvd21hbnksIHN1YnN0cik7XG4gIHJldHVybiBhcnIuam9pbignJyk7XG59O1xuIiwidmFyIGRlcHJlY2F0ZSA9IHJlcXVpcmUoJ3V0aWwtZGVwcmVjYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlKHJlcXVpcmUoJ3NwcmludGYtanMnKS5zcHJpbnRmLFxuICAnc3ByaW50ZigpIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLCB1c2UgdGhlIHNwcmludGYtanMgcGFja2FnZSBpbnN0ZWFkLicpO1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG52YXIgdG9Qb3NpdGl2ZSA9IHJlcXVpcmUoJy4vaGVscGVyL3RvUG9zaXRpdmUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc3RhcnRzLCBwb3NpdGlvbikge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIHN0YXJ0cyA9ICcnICsgc3RhcnRzO1xuICBwb3NpdGlvbiA9IHBvc2l0aW9uID09IG51bGwgPyAwIDogTWF0aC5taW4odG9Qb3NpdGl2ZShwb3NpdGlvbiksIHN0ci5sZW5ndGgpO1xuICByZXR1cm4gc3RyLmxhc3RJbmRleE9mKHN0YXJ0cywgcG9zaXRpb24pID09PSBwb3NpdGlvbjtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJMZWZ0KHN0ciwgc2VwKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgc2VwID0gbWFrZVN0cmluZyhzZXApO1xuICB2YXIgcG9zID0gIXNlcCA/IC0xIDogc3RyLmluZGV4T2Yoc2VwKTtcbiAgcmV0dXJufiBwb3MgPyBzdHIuc2xpY2UoMCwgcG9zKSA6IHN0cjtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdHJMZWZ0QmFjayhzdHIsIHNlcCkge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIHNlcCA9IG1ha2VTdHJpbmcoc2VwKTtcbiAgdmFyIHBvcyA9IHN0ci5sYXN0SW5kZXhPZihzZXApO1xuICByZXR1cm5+IHBvcyA/IHN0ci5zbGljZSgwLCBwb3MpIDogc3RyO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0clJpZ2h0KHN0ciwgc2VwKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgc2VwID0gbWFrZVN0cmluZyhzZXApO1xuICB2YXIgcG9zID0gIXNlcCA/IC0xIDogc3RyLmluZGV4T2Yoc2VwKTtcbiAgcmV0dXJufiBwb3MgPyBzdHIuc2xpY2UocG9zICsgc2VwLmxlbmd0aCwgc3RyLmxlbmd0aCkgOiBzdHI7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyUmlnaHRCYWNrKHN0ciwgc2VwKSB7XG4gIHN0ciA9IG1ha2VTdHJpbmcoc3RyKTtcbiAgc2VwID0gbWFrZVN0cmluZyhzZXApO1xuICB2YXIgcG9zID0gIXNlcCA/IC0xIDogc3RyLmxhc3RJbmRleE9mKHNlcCk7XG4gIHJldHVybn4gcG9zID8gc3RyLnNsaWNlKHBvcyArIHNlcC5sZW5ndGgsIHN0ci5sZW5ndGgpIDogc3RyO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmlwVGFncyhzdHIpIHtcbiAgcmV0dXJuIG1ha2VTdHJpbmcoc3RyKS5yZXBsYWNlKC88XFwvP1tePl0rPi9nLCAnJyk7XG59O1xuIiwidmFyIGFkamFjZW50ID0gcmVxdWlyZSgnLi9oZWxwZXIvYWRqYWNlbnQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdWNjKHN0cikge1xuICByZXR1cm4gYWRqYWNlbnQoc3RyLCAxKTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN1cnJvdW5kKHN0ciwgd3JhcHBlcikge1xuICByZXR1cm4gW3dyYXBwZXIsIHN0ciwgd3JhcHBlcl0uam9pbignJyk7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3dhcENhc2Uoc3RyKSB7XG4gIHJldHVybiBtYWtlU3RyaW5nKHN0cikucmVwbGFjZSgvXFxTL2csIGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gYy50b1VwcGVyQ2FzZSgpID8gYy50b0xvd2VyQ2FzZSgpIDogYy50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0aXRsZWl6ZShzdHIpIHtcbiAgcmV0dXJuIG1ha2VTdHJpbmcoc3RyKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyg/Ol58XFxzfC0pXFxTL2csIGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gYy50b1VwcGVyQ2FzZSgpO1xuICB9KTtcbn07XG4iLCJ2YXIgdHJpbSA9IHJlcXVpcmUoJy4vdHJpbScpO1xuXG5mdW5jdGlvbiBib29sTWF0Y2gocywgbWF0Y2hlcnMpIHtcbiAgdmFyIGksIG1hdGNoZXIsIGRvd24gPSBzLnRvTG93ZXJDYXNlKCk7XG4gIG1hdGNoZXJzID0gW10uY29uY2F0KG1hdGNoZXJzKTtcbiAgZm9yIChpID0gMDsgaSA8IG1hdGNoZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgbWF0Y2hlciA9IG1hdGNoZXJzW2ldO1xuICAgIGlmICghbWF0Y2hlcikgY29udGludWU7XG4gICAgaWYgKG1hdGNoZXIudGVzdCAmJiBtYXRjaGVyLnRlc3QocykpIHJldHVybiB0cnVlO1xuICAgIGlmIChtYXRjaGVyLnRvTG93ZXJDYXNlKCkgPT09IGRvd24pIHJldHVybiB0cnVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9Cb29sZWFuKHN0ciwgdHJ1ZVZhbHVlcywgZmFsc2VWYWx1ZXMpIHtcbiAgaWYgKHR5cGVvZiBzdHIgPT09ICdudW1iZXInKSBzdHIgPSAnJyArIHN0cjtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSByZXR1cm4gISFzdHI7XG4gIHN0ciA9IHRyaW0oc3RyKTtcbiAgaWYgKGJvb2xNYXRjaChzdHIsIHRydWVWYWx1ZXMgfHwgWyd0cnVlJywgJzEnXSkpIHJldHVybiB0cnVlO1xuICBpZiAoYm9vbE1hdGNoKHN0ciwgZmFsc2VWYWx1ZXMgfHwgWydmYWxzZScsICcwJ10pKSByZXR1cm4gZmFsc2U7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0b051bWJlcihudW0sIHByZWNpc2lvbikge1xuICBpZiAobnVtID09IG51bGwpIHJldHVybiAwO1xuICB2YXIgZmFjdG9yID0gTWF0aC5wb3coMTAsIGlzRmluaXRlKHByZWNpc2lvbikgPyBwcmVjaXNpb24gOiAwKTtcbiAgcmV0dXJuIE1hdGgucm91bmQobnVtICogZmFjdG9yKSAvIGZhY3Rvcjtcbn07XG4iLCJ2YXIgcnRyaW0gPSByZXF1aXJlKCcuL3J0cmltJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9TZW50ZW5jZShhcnJheSwgc2VwYXJhdG9yLCBsYXN0U2VwYXJhdG9yLCBzZXJpYWwpIHtcbiAgc2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8ICcsICc7XG4gIGxhc3RTZXBhcmF0b3IgPSBsYXN0U2VwYXJhdG9yIHx8ICcgYW5kICc7XG4gIHZhciBhID0gYXJyYXkuc2xpY2UoKSxcbiAgICBsYXN0TWVtYmVyID0gYS5wb3AoKTtcblxuICBpZiAoYXJyYXkubGVuZ3RoID4gMiAmJiBzZXJpYWwpIGxhc3RTZXBhcmF0b3IgPSBydHJpbShzZXBhcmF0b3IpICsgbGFzdFNlcGFyYXRvcjtcblxuICByZXR1cm4gYS5sZW5ndGggPyBhLmpvaW4oc2VwYXJhdG9yKSArIGxhc3RTZXBhcmF0b3IgKyBsYXN0TWVtYmVyIDogbGFzdE1lbWJlcjtcbn07XG4iLCJ2YXIgdG9TZW50ZW5jZSA9IHJlcXVpcmUoJy4vdG9TZW50ZW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRvU2VudGVuY2VTZXJpYWwoYXJyYXksIHNlcCwgbGFzdFNlcCkge1xuICByZXR1cm4gdG9TZW50ZW5jZShhcnJheSwgc2VwLCBsYXN0U2VwLCB0cnVlKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcbnZhciBkZWZhdWx0VG9XaGl0ZVNwYWNlID0gcmVxdWlyZSgnLi9oZWxwZXIvZGVmYXVsdFRvV2hpdGVTcGFjZScpO1xudmFyIG5hdGl2ZVRyaW0gPSBTdHJpbmcucHJvdG90eXBlLnRyaW07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJpbShzdHIsIGNoYXJhY3RlcnMpIHtcbiAgc3RyID0gbWFrZVN0cmluZyhzdHIpO1xuICBpZiAoIWNoYXJhY3RlcnMgJiYgbmF0aXZlVHJpbSkgcmV0dXJuIG5hdGl2ZVRyaW0uY2FsbChzdHIpO1xuICBjaGFyYWN0ZXJzID0gZGVmYXVsdFRvV2hpdGVTcGFjZShjaGFyYWN0ZXJzKTtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoJ14nICsgY2hhcmFjdGVycyArICcrfCcgKyBjaGFyYWN0ZXJzICsgJyskJywgJ2cnKSwgJycpO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRydW5jYXRlKHN0ciwgbGVuZ3RoLCB0cnVuY2F0ZVN0cikge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIHRydW5jYXRlU3RyID0gdHJ1bmNhdGVTdHIgfHwgJy4uLic7XG4gIGxlbmd0aCA9IH5+bGVuZ3RoO1xuICByZXR1cm4gc3RyLmxlbmd0aCA+IGxlbmd0aCA/IHN0ci5zbGljZSgwLCBsZW5ndGgpICsgdHJ1bmNhdGVTdHIgOiBzdHI7XG59O1xuIiwidmFyIHRyaW0gPSByZXF1aXJlKCcuL3RyaW0nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB1bmRlcnNjb3JlZChzdHIpIHtcbiAgcmV0dXJuIHRyaW0oc3RyKS5yZXBsYWNlKC8oW2EtelxcZF0pKFtBLVpdKykvZywgJyQxXyQyJykucmVwbGFjZSgvWy1cXHNdKy9nLCAnXycpLnRvTG93ZXJDYXNlKCk7XG59O1xuIiwidmFyIG1ha2VTdHJpbmcgPSByZXF1aXJlKCcuL2hlbHBlci9tYWtlU3RyaW5nJyk7XG52YXIgaHRtbEVudGl0aWVzID0gcmVxdWlyZSgnLi9oZWxwZXIvaHRtbEVudGl0aWVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdW5lc2NhcGVIVE1MKHN0cikge1xuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnJlcGxhY2UoL1xcJihbXjtdKyk7L2csIGZ1bmN0aW9uKGVudGl0eSwgZW50aXR5Q29kZSkge1xuICAgIHZhciBtYXRjaDtcblxuICAgIGlmIChlbnRpdHlDb2RlIGluIGh0bWxFbnRpdGllcykge1xuICAgICAgcmV0dXJuIGh0bWxFbnRpdGllc1tlbnRpdHlDb2RlXTtcbiAgICAvKmVzbGludCBuby1jb25kLWFzc2lnbjogMCovXG4gICAgfSBlbHNlIGlmIChtYXRjaCA9IGVudGl0eUNvZGUubWF0Y2goL14jeChbXFxkYS1mQS1GXSspJC8pKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtYXRjaFsxXSwgMTYpKTtcbiAgICAvKmVzbGludCBuby1jb25kLWFzc2lnbjogMCovXG4gICAgfSBlbHNlIGlmIChtYXRjaCA9IGVudGl0eUNvZGUubWF0Y2goL14jKFxcZCspJC8pKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh+fm1hdGNoWzFdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdW5xdW90ZShzdHIsIHF1b3RlQ2hhcikge1xuICBxdW90ZUNoYXIgPSBxdW90ZUNoYXIgfHwgJ1wiJztcbiAgaWYgKHN0clswXSA9PT0gcXVvdGVDaGFyICYmIHN0cltzdHIubGVuZ3RoIC0gMV0gPT09IHF1b3RlQ2hhcilcbiAgICByZXR1cm4gc3RyLnNsaWNlKDEsIHN0ci5sZW5ndGggLSAxKTtcbiAgZWxzZSByZXR1cm4gc3RyO1xufTtcbiIsInZhciBkZXByZWNhdGUgPSByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZShyZXF1aXJlKCdzcHJpbnRmLWpzJykudnNwcmludGYsXG4gICd2c3ByaW50ZigpIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLCB1c2UgdGhlIHNwcmludGYtanMgcGFja2FnZSBpbnN0ZWFkLicpO1xuIiwidmFyIGlzQmxhbmsgPSByZXF1aXJlKCcuL2lzQmxhbmsnKTtcbnZhciB0cmltID0gcmVxdWlyZSgnLi90cmltJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd29yZHMoc3RyLCBkZWxpbWl0ZXIpIHtcbiAgaWYgKGlzQmxhbmsoc3RyKSkgcmV0dXJuIFtdO1xuICByZXR1cm4gdHJpbShzdHIsIGRlbGltaXRlcikuc3BsaXQoZGVsaW1pdGVyIHx8IC9cXHMrLyk7XG59O1xuIiwiLy8gV3JhcFxuLy8gd3JhcHMgYSBzdHJpbmcgYnkgYSBjZXJ0YWluIHdpZHRoXG5cbnZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHdyYXAoc3RyLCBvcHRpb25zKXtcbiAgc3RyID0gbWFrZVN0cmluZyhzdHIpO1xuICBcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIFxuICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDc1O1xuICB2YXIgc2VwZXJhdG9yID0gb3B0aW9ucy5zZXBlcmF0b3IgfHwgJ1xcbic7XG4gIHZhciBjdXQgPSBvcHRpb25zLmN1dCB8fCBmYWxzZTtcbiAgdmFyIHByZXNlcnZlU3BhY2VzID0gb3B0aW9ucy5wcmVzZXJ2ZVNwYWNlcyB8fCBmYWxzZTtcbiAgdmFyIHRyYWlsaW5nU3BhY2VzID0gb3B0aW9ucy50cmFpbGluZ1NwYWNlcyB8fCBmYWxzZTtcbiAgXG4gIHZhciByZXN1bHQ7XG4gIFxuICBpZih3aWR0aCA8PSAwKXtcbiAgICByZXR1cm4gc3RyO1xuICB9XG4gIFxuICBlbHNlIGlmKCFjdXQpe1xuICBcbiAgICB2YXIgd29yZHMgPSBzdHIuc3BsaXQoJyAnKTtcbiAgICB2YXIgY3VycmVudF9jb2x1bW4gPSAwO1xuICAgIHJlc3VsdCA9ICcnO1xuICBcbiAgICB3aGlsZSh3b3Jkcy5sZW5ndGggPiAwKXtcbiAgICAgIFxuICAgICAgLy8gaWYgYWRkaW5nIGEgc3BhY2UgYW5kIHRoZSBuZXh0IHdvcmQgd291bGQgY2F1c2UgdGhpcyBsaW5lIHRvIGJlIGxvbmdlciB0aGFuIHdpZHRoLi4uXG4gICAgICBpZigxICsgd29yZHNbMF0ubGVuZ3RoICsgY3VycmVudF9jb2x1bW4gPiB3aWR0aCl7XG4gICAgICAgIC8vc3RhcnQgYSBuZXcgbGluZSBpZiB0aGlzIGxpbmUgaXMgbm90IGFscmVhZHkgZW1wdHlcbiAgICAgICAgaWYoY3VycmVudF9jb2x1bW4gPiAwKXtcbiAgICAgICAgICAvLyBhZGQgYSBzcGFjZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIGlzIHByZXNlcnZlU3BhY2VzIGlzIHRydWVcbiAgICAgICAgICBpZiAocHJlc2VydmVTcGFjZXMpe1xuICAgICAgICAgICAgcmVzdWx0ICs9ICcgJztcbiAgICAgICAgICAgIGN1cnJlbnRfY29sdW1uKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZpbGwgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgd2l0aCBzcGFjZXMgaWYgdHJhaWxpbmdTcGFjZXMgb3B0aW9uIGlzIHRydWVcbiAgICAgICAgICBlbHNlIGlmKHRyYWlsaW5nU3BhY2VzKXtcbiAgICAgICAgICAgIHdoaWxlKGN1cnJlbnRfY29sdW1uIDwgd2lkdGgpe1xuICAgICAgICAgICAgICByZXN1bHQgKz0gJyAnO1xuICAgICAgICAgICAgICBjdXJyZW50X2NvbHVtbisrO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgICAvL3N0YXJ0IG5ldyBsaW5lXG4gICAgICAgICAgcmVzdWx0ICs9IHNlcGVyYXRvcjtcbiAgICAgICAgICBjdXJyZW50X2NvbHVtbiA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICAvLyBpZiBub3QgYXQgdGhlIGJlZ2luaW5nIG9mIHRoZSBsaW5lLCBhZGQgYSBzcGFjZSBpbiBmcm9udCBvZiB0aGUgd29yZFxuICAgICAgaWYoY3VycmVudF9jb2x1bW4gPiAwKXtcbiAgICAgICAgcmVzdWx0ICs9ICcgJztcbiAgICAgICAgY3VycmVudF9jb2x1bW4rKztcbiAgICAgIH1cbiAgXG4gICAgICAvLyB0YWNrIG9uIHRoZSBuZXh0IHdvcmQsIHVwZGF0ZSBjdXJyZW50IGNvbHVtbiwgYSBwb3Agd29yZHMgYXJyYXlcbiAgICAgIHJlc3VsdCArPSB3b3Jkc1swXTtcbiAgICAgIGN1cnJlbnRfY29sdW1uICs9IHdvcmRzWzBdLmxlbmd0aDtcbiAgICAgIHdvcmRzLnNoaWZ0KCk7XG4gIFxuICAgIH1cbiAgXG4gICAgLy8gZmlsbCB0aGUgcmVzdCBvZiB0aGUgbGluZSB3aXRoIHNwYWNlcyBpZiB0cmFpbGluZ1NwYWNlcyBvcHRpb24gaXMgdHJ1ZVxuICAgIGlmKHRyYWlsaW5nU3BhY2VzKXtcbiAgICAgIHdoaWxlKGN1cnJlbnRfY29sdW1uIDwgd2lkdGgpe1xuICAgICAgICByZXN1bHQgKz0gJyAnO1xuICAgICAgICBjdXJyZW50X2NvbHVtbisrO1xuICAgICAgfSAgICAgICAgICAgIFxuICAgIH1cbiAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgXG4gIH1cbiAgXG4gIGVsc2Uge1xuICBcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHJlc3VsdCA9ICcnO1xuICBcbiAgICAvLyB3YWxrIHRocm91Z2ggZWFjaCBjaGFyYWN0ZXIgYW5kIGFkZCBzZXBlcmF0b3JzIHdoZXJlIGFwcHJvcHJpYXRlXG4gICAgd2hpbGUoaW5kZXggPCBzdHIubGVuZ3RoKXtcbiAgICAgIGlmKGluZGV4ICUgd2lkdGggPT0gMCAmJiBpbmRleCA+IDApe1xuICAgICAgICByZXN1bHQgKz0gc2VwZXJhdG9yO1xuICAgICAgfVxuICAgICAgcmVzdWx0ICs9IHN0ci5jaGFyQXQoaW5kZXgpO1xuICAgICAgaW5kZXgrKztcbiAgICB9XG4gIFxuICAgIC8vIGZpbGwgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgd2l0aCBzcGFjZXMgaWYgdHJhaWxpbmdTcGFjZXMgb3B0aW9uIGlzIHRydWVcbiAgICBpZih0cmFpbGluZ1NwYWNlcyl7XG4gICAgICB3aGlsZShpbmRleCAlIHdpZHRoID4gMCl7XG4gICAgICAgIHJlc3VsdCArPSAnICc7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9ICAgICAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZSwgRnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXJcbiAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7XG5cbiAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cbiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7XG4gIH07XG5cbiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbiAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOC4zJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIG90aGVyKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuICAvLyB0byBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXJcbiAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIF8uaWRlbnRpdHk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcbiAgICByZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7XG4gIH07XG4gIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBjYih2YWx1ZSwgY29udGV4dCwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sXG4gICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcbiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIGFub3RoZXIuXG4gIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcbiAgICBpZiAobmF0aXZlQ3JlYXRlKSByZXR1cm4gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuICAgIEN0b3IucHJvdG90eXBlID0gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3RcbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7XG4gIH07XG5cbiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC5cbiAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoZGlyKSB7XG4gICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG4gICAgZnVuY3Rpb24gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCk7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbWVtbyA9IG9ialtrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleF07XG4gICAgICAgIGluZGV4ICs9IGRpcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGtleSA9IF8uZmluZEluZGV4KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgaXNGdW5jID0gXy5pc0Z1bmN0aW9uKG1ldGhvZCk7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyBmdW5jIDogZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IEluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG4gIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBzZXQubGVuZ3RoO1xuICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmFuZCA9IF8ucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfTtcblxuICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cbiAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC5cbiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuICAgIH1cbiAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcbiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGVcbiAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG4gIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBfLnZhbHVlcyhvYmopO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9iamVjdC5cbiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcbiAgICByZXR1cm4gaXNBcnJheUxpa2Uob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gdHdvIGFycmF5czogb25lIHdob3NlIGVsZW1lbnRzIGFsbCBzYXRpc2Z5IHRoZSBnaXZlblxuICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICAgIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqKSA/IHBhc3MgOiBmYWlsKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgbiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pO1xuICB9O1xuXG4gIC8vIFRyaW0gb3V0IGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBhbiBhcnJheS5cbiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cbiAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG4gICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpO1xuICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG4gICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XG4gICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkge1xuICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuXG4gIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkge1xuICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2ZcbiAgLy8gdGhlIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8udW5pb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuICAgICAgaWYgKF8uY29udGFpbnMocmVzdWx0LCBpdGVtKSkgY29udGludWU7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuemlwKGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3Vwc1xuICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gc3RlcCB8fCAxO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZlxuICAvLyBhdmFpbGFibGUuXG4gIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcbiAgICBpZiAobmF0aXZlQmluZCAmJiBmdW5jLmJpbmQgPT09IG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0c1xuICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG4gIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cbiAgXy5wYXJ0aWFsID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBfID8gYXJndW1lbnRzW3Bvc2l0aW9uKytdIDogYm91bmRBcmdzW2ldO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCB0aGlzLCB0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcbiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzXG4gIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cbiAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTtcbiAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gYXJndW1lbnRzW2ldO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICAvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG4gIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vdyA9IF8ubm93KCk7XG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblxuICAgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gS2V5cyBpbiBJRSA8IDkgdGhhdCB3b24ndCBiZSBpdGVyYXRlZCBieSBgZm9yIGtleSBpbiAuLi5gIGFuZCB0aHVzIG1pc3NlZC5cbiAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnaGFzT3duUHJvcGVydHknLCAndG9Mb2NhbGVTdHJpbmcnXTtcblxuICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDtcbiAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoXy5oYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0ge30sXG4gICAgICAgICAgY3VycmVudEtleTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpO1xuXG4gIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIG9iaiA9IG9iamVjdCwgaXRlcmF0ZWUsIGtleXM7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcbiAgICAgIGl0ZXJhdGVlID0gXy5uZWdhdGUoaXRlcmF0ZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblxuICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG4gIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gIC8vIGNyZWF0ZWQgb2JqZWN0LlxuICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG4gIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuICB9O1xuXG4gIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cbiAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG4gIC8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcbiAgICBpbnRlcmNlcHRvcihvYmopO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7XG4gICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBfKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAvLyBTdHJpbmdzLCBudW1iZXJzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBkYXRlcywgYW5kIGJvb2xlYW5zIGFyZSBjb21wYXJlZCBieSB2YWx1ZS5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgXCJBcmd1bWVudHNcIiB0eXBlLlxuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG4gIGlmICh0eXBlb2YgLy4vICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIEludDhBcnJheSAhPSAnb2JqZWN0Jykge1xuICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICB9O1xuICB9XG5cbiAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyP1xuICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD9cbiAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBudWxsO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuICBfLmlzVW5kZWZpbmVkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcbiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZFxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgYHByb3BlcnR5YCBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0IHdpdGggdGhlXG4gIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG4gIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuICAgICdcXFxcJzogICAgICdcXFxcJyxcbiAgICAnXFxyJzogICAgICdyJyxcbiAgICAnXFxuJzogICAgICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcbiAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGUgKyBcIlxcbl9fcCs9J1wiO1xuICAgICAgfVxuXG4gICAgICAvLyBBZG9iZSBWTXMgbmVlZCB0aGUgbWF0Y2ggcmV0dXJuZWQgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBvZmZlc3QuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG4gICAgaWYgKCFzZXR0aW5ncy52YXJpYWJsZSkgc291cmNlID0gJ3dpdGgob2JqfHx7fSl7XFxuJyArIHNvdXJjZSArICd9XFxuJztcblxuICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcbiAgICAgIFwicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gX1tuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9uc1xuICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cbiAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcbiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsXG4gIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcbiAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcbiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mXG4gIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cbiAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcblxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTtcblxuLyoqXG4gKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9uc1xuICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3IFwiZGVwcmVjYXRlZFwiIHZlcnNpb24gb2YgYGZuYFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHtcbiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkge1xuICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lc1xuICB0cnkge1xuICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdO1xuICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCJ2YXIgSnNvblZpZXdlcixcbiAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbkpzb25WaWV3ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoSnNvblZpZXdlciwgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gSnNvblZpZXdlcigpIHtcbiAgICByZXR1cm4gSnNvblZpZXdlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIEpzb25WaWV3ZXIucHJvdG90eXBlLmNsYXNzTmFtZSA9ICdqc29uLXZpZXdlcic7XG5cbiAgSnNvblZpZXdlci5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9qc29uX3ZpZXdlcicpO1xuXG4gIEpzb25WaWV3ZXIucHJvdG90eXBlLnNlcmlhbGl6ZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAganNvbjogSlNPTi5zdHJpbmdpZnkodGhpcy5tb2RlbC50b0pTT04oKSwgbnVsbCwgMikuc3BsaXQoXCJcXG5cIilcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBKc29uVmlld2VyO1xuXG59KShNYXJpb25ldHRlLkxheW91dFZpZXcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpzb25WaWV3ZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWVhCd0wyTnZabVpsWlM5dGIyUjFiR1Z6TDJ4cFlpOTJhV1YzY3k5cWMyOXVYM1pwWlhkbGNpOXBibVJsZUM1amIyWm1aV1VpTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKaGNIQXZZMjltWm1WbEwyMXZaSFZzWlhNdmJHbGlMM1pwWlhkekwycHpiMjVmZG1sbGQyVnlMMmx1WkdWNExtTnZabVpsWlNKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGRFFTeEpRVUZCTEZWQlFVRTdSVUZCUVRzN08wRkJRVTA3T3pzN096czdkVUpCUTBvc1UwRkJRU3hIUVVGWE96dDFRa0ZEV0N4UlFVRkJMRWRCUVZVc1QwRkJRU3hEUVVGUkxIbENRVUZTT3p0MVFrRkZWaXhoUVVGQkxFZEJRV1VzVTBGQlFUdEJRVU5pTEZkQlFVODdUVUZCUlN4SlFVRkJMRVZCUVUwc1NVRkJTU3hEUVVGRExGTkJRVXdzUTBGQlpTeEpRVUZETEVOQlFVRXNTMEZCU3l4RFFVRkRMRTFCUVZBc1EwRkJRU3hEUVVGbUxFVkJRV2RETEVsQlFXaERMRVZCUVhORExFTkJRWFJETEVOQlFYZERMRU5CUVVNc1MwRkJla01zUTBGQkswTXNTVUZCTDBNc1EwRkJVanM3UlVGRVRUczdPenRIUVVwUkxGVkJRVlVzUTBGQlF6czdRVUZUY0VNc1RVRkJUU3hEUVVGRExFOUJRVkFzUjBGQmFVSWlmUT09XG4iLCJ2YXIgTmF2Q2hpbGQsIE5hdkxpc3QsIE5hdlZpZXcsXG4gIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfTtcblxuTmF2Q2hpbGQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTmF2Q2hpbGQsIHN1cGVyQ2xhc3MpO1xuXG4gIGZ1bmN0aW9uIE5hdkNoaWxkKCkge1xuICAgIHJldHVybiBOYXZDaGlsZC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIE5hdkNoaWxkLnByb3RvdHlwZS50YWdOYW1lID0gJ2xpJztcblxuICBOYXZDaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ25hdi1pdGVtJztcblxuICBOYXZDaGlsZC5wcm90b3R5cGUudGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9uYXZfY2hpbGQnKTtcblxuICBOYXZDaGlsZC5wcm90b3R5cGUuYmVoYXZpb3JzID0ge1xuICAgIFNlbGVjdGFibGVDaGlsZDoge31cbiAgfTtcblxuICBOYXZDaGlsZC5wcm90b3R5cGUuY2xhc3NOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNzcztcbiAgICBjc3MgPSAnbmF2LWl0ZW0nO1xuICAgIGlmICh0aGlzLm1vZGVsLmdldCgnYWN0aXZlJykpIHtcbiAgICAgIGNzcyArPSAnIGFjdGl2ZSc7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGVsLmdldCgnZHJvcGRvd24nKSkge1xuICAgICAgY3NzICs9ICcgZHJvcGRvd24nO1xuICAgIH1cbiAgICByZXR1cm4gY3NzO1xuICB9O1xuXG4gIE5hdkNoaWxkLnByb3RvdHlwZS5vblJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm1vZGVsLmdldCgnYWN0aXZlJykpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJNZXRob2QoJ3NlbGVjdGVkJyk7XG4gICAgfVxuICB9O1xuXG4gIE5hdkNoaWxkLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGlmICh0aGlzLm1vZGVsLmdldCgnaHJlZicpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGVsLmdldCgnZHJvcGRvd24nKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy4kZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlICE9IG51bGwpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdzZWxlY3RlZCcpO1xuICAgIHJldHVybiB0aGlzLiRlbC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gIH07XG5cbiAgcmV0dXJuIE5hdkNoaWxkO1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxuTmF2TGlzdCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gIGV4dGVuZChOYXZMaXN0LCBzdXBlckNsYXNzKTtcblxuICBmdW5jdGlvbiBOYXZMaXN0KCkge1xuICAgIHJldHVybiBOYXZMaXN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgTmF2TGlzdC5wcm90b3R5cGUudGFnTmFtZSA9ICd1bCc7XG5cbiAgTmF2TGlzdC5wcm90b3R5cGUuY2hpbGRWaWV3ID0gTmF2Q2hpbGQ7XG5cbiAgTmF2TGlzdC5wcm90b3R5cGUuY2xhc3NOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNzcztcbiAgICBjc3MgPSAnbmF2JztcbiAgICBpZiAodGhpcy5vcHRpb25zLnN0YWNrZWQpIHtcbiAgICAgIHJldHVybiBjc3MgKz0gJyBuYXYtcGlsbHMgbmF2LXN0YWNrZWQnO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLnBpbGxzKSB7XG4gICAgICByZXR1cm4gY3NzICs9ICcgbmF2LXBpbGxzJztcbiAgICB9XG4gICAgcmV0dXJuIGNzcyArPSAnIG5hdi10YWJzJztcbiAgfTtcblxuICBOYXZMaXN0LnByb3RvdHlwZS5jaGlsZEV2ZW50cyA9IHtcbiAgICAnc2VsZWN0ZWQnOiAnb25DaGlsZFNlbGVjdGVkJ1xuICB9O1xuXG4gIE5hdkxpc3QucHJvdG90eXBlLm9uQ2hpbGRTZWxlY3RlZCA9IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICB0aGlzLnRyaWdnZXIoJ25hdjpjaGFuZ2UnLCB2aWV3KTtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyKHZpZXcubW9kZWwuZ2V0KCd0cmlnZ2VyJykpO1xuICB9O1xuXG4gIHJldHVybiBOYXZMaXN0O1xuXG59KShNbi5Db2xsZWN0aW9uVmlldyk7XG5cbk5hdlZpZXcgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICBleHRlbmQoTmF2Vmlldywgc3VwZXJDbGFzcyk7XG5cbiAgZnVuY3Rpb24gTmF2VmlldygpIHtcbiAgICB0aGlzLl9nZXRBY3RpdmVOYXYgPSBiaW5kKHRoaXMuX2dldEFjdGl2ZU5hdiwgdGhpcyk7XG4gICAgcmV0dXJuIE5hdlZpZXcuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBOYXZWaWV3LnByb3RvdHlwZS50ZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL25hdicpO1xuXG4gIE5hdlZpZXcucHJvdG90eXBlLnJlZ2lvbnMgPSB7XG4gICAgbmF2UmVnaW9uOiAnW2RhdGEtcmVnaW9uPW5hdl0nLFxuICAgIGNvbnRlbnRSZWdpb246ICdbZGF0YS1yZWdpb249Y29udGVudF0nXG4gIH07XG5cbiAgTmF2Vmlldy5wcm90b3R5cGUuYmVoYXZpb3JzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubmF2T3B0aW9ucy5zdGF0ZWZ1bCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgVmlld1N0YXRlOiB7XG4gICAgICAgICAga2V5OiB0aGlzLm5hdk9wdGlvbnMuc3RhdGVmdWxcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHt9O1xuICB9O1xuXG4gIE5hdlZpZXcucHJvdG90eXBlLm5hdkl0ZW1zID0gW1xuICAgIHtcbiAgICAgIGljb246ICdmYS10aW1lcycsXG4gICAgICB0ZXh0OiAnRGVmYXVsdCBOYXYnLFxuICAgICAgdHJpZ2dlcjogJ2RlZmF1bHQnXG4gICAgfVxuICBdO1xuXG4gIE5hdlZpZXcucHJvdG90eXBlLm5hdk9wdGlvbnMgPSB7fTtcblxuICBOYXZWaWV3LnByb3RvdHlwZS5uYXZFdmVudHMgPSB7fTtcblxuICBOYXZWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRyaWdnZXI7XG4gICAgdGhpcy5uYXZPcHRpb25zID0gXy5yZXN1bHQodGhpcywgJ25hdk9wdGlvbnMnKSB8fCB7fTtcbiAgICB0aGlzLm5hdkl0ZW1zID0gXy5yZXN1bHQodGhpcywgJ25hdkl0ZW1zJyk7XG4gICAgdHJpZ2dlciA9IHRoaXMuX2dldEFjdGl2ZU5hdigpO1xuICAgIGlmICghdHJpZ2dlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gXy5tYXAodGhpcy5uYXZJdGVtcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0udHJpZ2dlciA9PT0gdHJpZ2dlcikge1xuICAgICAgICByZXR1cm4gaXRlbS5hY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZW0uYWN0aXZlID0gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgTmF2Vmlldy5wcm90b3R5cGUudGVtcGxhdGVIZWxwZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YWNrZWQ6IHRoaXMubmF2T3B0aW9ucy5zdGFja2VkIHx8IG51bGxcbiAgICB9O1xuICB9O1xuXG4gIE5hdlZpZXcucHJvdG90eXBlLl9nZXRBY3RpdmVOYXYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVmLCBzdGF0ZTtcbiAgICBpZiAodGhpcy5uYXZPcHRpb25zLnN0YXRlZnVsKSB7XG4gICAgICBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTtcbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoKHJlZiA9IF8uZmluZFdoZXJlKHRoaXMubmF2SXRlbXMsIHtcbiAgICAgIFwiZGVmYXVsdFwiOiB0cnVlXG4gICAgfSkpICE9IG51bGwgPyByZWYudHJpZ2dlciA6IHZvaWQgMCkgfHwgbnVsbDtcbiAgfTtcblxuICBOYXZWaWV3LnByb3RvdHlwZS5fc2V0QWN0aXZlTmF2ID0gZnVuY3Rpb24obmF2Q2hpbGRWaWV3KSB7XG4gICAgdGhpcy5hY3RpdmVOYXYgPSBuYXZDaGlsZFZpZXc7XG4gICAgaWYgKCF0aGlzLm5hdk9wdGlvbnMuc3RhdGVmdWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUobmF2Q2hpbGRWaWV3Lm1vZGVsLmdldCgndHJpZ2dlcicpKTtcbiAgfTtcblxuICBOYXZWaWV3LnByb3RvdHlwZS50cmlnZ2VyQWN0aXZlTmF2ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlZjtcbiAgICByZXR1cm4gKHJlZiA9IHRoaXMuYWN0aXZlTmF2KSAhPSBudWxsID8gcmVmLnRyaWdnZXIoJ3NlbGVjdGVkJykgOiB2b2lkIDA7XG4gIH07XG5cbiAgTmF2Vmlldy5wcm90b3R5cGUuc2hvd05hdlZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm5hdkNvbGxlY3Rpb24gPSBuZXcgQmFja2JvbmUuQ29sbGVjdGlvbih0aGlzLm5hdkl0ZW1zKTtcbiAgICB0aGlzLm5hdkxpc3QgPSBuZXcgTmF2TGlzdChfLmV4dGVuZCh0aGlzLm5hdk9wdGlvbnMsIHtcbiAgICAgIGNvbGxlY3Rpb246IHRoaXMubmF2Q29sbGVjdGlvblxuICAgIH0pKTtcbiAgICB0aGlzLm5hdkxpc3Qub24oJ25hdjpjaGFuZ2UnLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihuYXZDaGlsZFZpZXcpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLl9zZXRBY3RpdmVOYXYobmF2Q2hpbGRWaWV3KTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICAgIE1uLmJpbmRFbnRpdHlFdmVudHModGhpcywgdGhpcy5uYXZMaXN0LCBfLnJlc3VsdCh0aGlzLCAnbmF2RXZlbnRzJykpO1xuICAgIHJldHVybiB0aGlzLm5hdlJlZ2lvbi5zaG93KHRoaXMubmF2TGlzdCk7XG4gIH07XG5cbiAgTmF2Vmlldy5wcm90b3R5cGUub25SZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zaG93TmF2VmlldygpO1xuICB9O1xuXG4gIHJldHVybiBOYXZWaWV3O1xuXG59KShNbi5MYXlvdXRWaWV3KTtcblxubW9kdWxlLmV4cG9ydHMgPSBOYXZWaWV3O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVlYQndMMk52Wm1abFpTOXRiMlIxYkdWekwyeHBZaTkyYVdWM2N5OXVZWFl2YVc1a1pYZ3VZMjltWm1WbElpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lZWEJ3TDJOdlptWmxaUzl0YjJSMWJHVnpMMnhwWWk5MmFXVjNjeTl1WVhZdmFXNWtaWGd1WTI5bVptVmxJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVU5CTEVsQlFVRXNNRUpCUVVFN1JVRkJRVHM3T3p0QlFVRk5PenM3T3pzN08zRkNRVU5LTEU5QlFVRXNSMEZCVXpzN2NVSkJRMVFzVTBGQlFTeEhRVUZYT3p0eFFrRkRXQ3hSUVVGQkxFZEJRVlVzVDBGQlFTeERRVUZSTEhWQ1FVRlNPenR4UWtGRlZpeFRRVUZCTEVkQlEwVTdTVUZCUVN4bFFVRkJMRVZCUVdsQ0xFVkJRV3BDT3pzN2NVSkJSVVlzVTBGQlFTeEhRVUZYTEZOQlFVRTdRVUZEVkN4UlFVRkJPMGxCUVVFc1IwRkJRU3hIUVVGTk8wbEJRMDRzU1VGQmIwSXNTVUZCUXl4RFFVRkJMRXRCUVVzc1EwRkJReXhIUVVGUUxFTkJRVmNzVVVGQldDeERRVUZ3UWp0TlFVRkJMRWRCUVVFc1NVRkJUeXhWUVVGUU96dEpRVU5CTEVsQlFYTkNMRWxCUVVNc1EwRkJRU3hMUVVGTExFTkJRVU1zUjBGQlVDeERRVUZYTEZWQlFWZ3NRMEZCZEVJN1RVRkJRU3hIUVVGQkxFbEJRVThzV1VGQlVEczdRVUZEUVN4WFFVRlBPMFZCU2tVN08zRkNRVTFZTEZGQlFVRXNSMEZCVlN4VFFVRkJPMGxCUTFJc1NVRkJPRUlzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1VVRkJXQ3hEUVVFNVFqdGhRVUZCTEVsQlFVTXNRMEZCUVN4aFFVRkVMRU5CUVdVc1ZVRkJaaXhGUVVGQk96dEZRVVJST3p0eFFrRkhWaXhQUVVGQkxFZEJRVk1zVTBGQlF5eERRVUZFTzBsQlExQXNTVUZCVlN4SlFVRkRMRU5CUVVFc1MwRkJTeXhEUVVGRExFZEJRVkFzUTBGQlZ5eE5RVUZZTEVOQlFWWTdRVUZCUVN4aFFVRkJPenRKUVVOQkxFbEJRVlVzU1VGQlF5eERRVUZCTEV0QlFVc3NRMEZCUXl4SFFVRlFMRU5CUVZjc1ZVRkJXQ3hEUVVGV08wRkJRVUVzWVVGQlFUczdTVUZEUVN4SlFVRlZMRWxCUVVNc1EwRkJRU3hIUVVGSExFTkJRVU1zVVVGQlRDeERRVUZqTEZGQlFXUXNRMEZCVmp0QlFVRkJMR0ZCUVVFN096dE5RVU5CTEVOQlFVTXNRMEZCUlN4alFVRklMRU5CUVVFN08wbEJRMEVzU1VGQlF5eERRVUZCTEdGQlFVUXNRMEZCWlN4VlFVRm1PMWRCUTBFc1NVRkJReXhEUVVGQkxFZEJRVWNzUTBGQlF5eFJRVUZNTEVOQlFXTXNVVUZCWkN4RFFVRjFRaXhEUVVGRExGRkJRWGhDTEVOQlFVRXNRMEZCYTBNc1EwRkJReXhYUVVGdVF5eERRVUVyUXl4UlFVRXZRenRGUVU1UE96czdPMGRCYWtKWkxFVkJRVVVzUTBGQlF6czdRVUV5UW5CQ096czdPenM3TzI5Q1FVTktMRTlCUVVFc1IwRkJVenM3YjBKQlExUXNVMEZCUVN4SFFVRlhPenR2UWtGRldDeFRRVUZCTEVkQlFWY3NVMEZCUVR0QlFVTlVMRkZCUVVFN1NVRkJRU3hIUVVGQkxFZEJRVTA3U1VGRFRpeEpRVUV5UXl4SlFVRkRMRU5CUVVFc1QwRkJUeXhEUVVGRExFOUJRWEJFTzBGQlFVRXNZVUZCVHl4SFFVRkJMRWxCUVU4c2VVSkJRV1E3TzBsQlEwRXNTVUZCTWtNc1NVRkJReXhEUVVGQkxFOUJRVThzUTBGQlF5eExRVUZ3UkR0QlFVRkJMR0ZCUVU4c1IwRkJRU3hKUVVGUExHRkJRV1E3TzBGQlEwRXNWMEZCVHl4SFFVRkJMRWxCUVU4N1JVRktURHM3YjBKQlRWZ3NWMEZCUVN4SFFVTkZPMGxCUVVFc1ZVRkJRU3hGUVVGWkxHbENRVUZhT3pzN2IwSkJSVVlzWlVGQlFTeEhRVUZwUWl4VFFVRkRMRWxCUVVRN1NVRkRaaXhKUVVGRExFTkJRVUVzVDBGQlJDeERRVUZUTEZsQlFWUXNSVUZCZFVJc1NVRkJka0k3UVVGRFFTeFhRVUZQTEVsQlFVTXNRMEZCUVN4UFFVRkVMRU5CUVZNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEhRVUZZTEVOQlFXVXNVMEZCWml4RFFVRlVPMFZCUmxFN096czdSMEZpUnl4RlFVRkZMRU5CUVVNN08wRkJiVUp1UWpzN096czdPenM3YjBKQlEwb3NVVUZCUVN4SFFVRlZMRTlCUVVFc1EwRkJVU3hwUWtGQlVqczdiMEpCUlZZc1QwRkJRU3hIUVVORk8wbEJRVUVzVTBGQlFTeEZRVUZuUWl4dFFrRkJhRUk3U1VGRFFTeGhRVUZCTEVWQlFXZENMSFZDUVVSb1FqczdPMjlDUVVsR0xGTkJRVUVzUjBGQlZ5eFRRVUZCTzBsQlExUXNTVUZCZFVRc1NVRkJReXhEUVVGQkxGVkJRVlVzUTBGQlF5eFJRVUZ1UlR0QlFVRkJMR0ZCUVU4N1VVRkJSU3hUUVVGQkxFVkJRVmM3VlVGQlJTeEhRVUZCTEVWQlFVc3NTVUZCUXl4RFFVRkJMRlZCUVZVc1EwRkJReXhSUVVGdVFqdFRRVUZpTzFGQlFWQTdPMEZCUTBFc1YwRkJUenRGUVVaRk96dHZRa0ZMV0N4UlFVRkJMRWRCUVZVN1NVRkJRenROUVVGRkxFbEJRVUVzUlVGQlRTeFZRVUZTTzAxQlFXOUNMRWxCUVVFc1JVRkJUU3hoUVVFeFFqdE5RVUY1UXl4UFFVRkJMRVZCUVZNc1UwRkJiRVE3UzBGQlJEczdPMjlDUVVsV0xGVkJRVUVzUjBGQldUczdiMEpCUjFvc1UwRkJRU3hIUVVGWE96dHZRa0ZGV0N4VlFVRkJMRWRCUVZrc1UwRkJRVHRCUVVOV0xGRkJRVUU3U1VGQlFTeEpRVUZETEVOQlFVRXNWVUZCUkN4SFFVRmpMRU5CUVVNc1EwRkJReXhOUVVGR0xFTkJRVk1zU1VGQlZDeEZRVUZaTEZsQlFWb3NRMEZCUVN4SlFVRTJRanRKUVVNelF5eEpRVUZETEVOQlFVRXNVVUZCUkN4SFFVRmpMRU5CUVVNc1EwRkJReXhOUVVGR0xFTkJRVk1zU1VGQlZDeEZRVUZaTEZWQlFWbzdTVUZIWkN4UFFVRkJMRWRCUVZVc1NVRkJReXhEUVVGQkxHRkJRVVFzUTBGQlFUdEpRVU5XTEVsQlFVRXNRMEZCWXl4UFFVRmtPMEZCUVVFc1lVRkJRVHM3VjBGRFFTeERRVUZETEVOQlFVTXNSMEZCUml4RFFVRk5MRWxCUVVNc1EwRkJRU3hSUVVGUUxFVkJRV2xDTEZOQlFVTXNTVUZCUkR0TlFVTmlMRWxCUVRaQ0xFbEJRVWtzUTBGQlF5eFBRVUZNTEV0QlFXZENMRTlCUVRkRE8wRkJRVUVzWlVGQlR5eEpRVUZKTEVOQlFVTXNUVUZCVEN4SFFVRmpMRXRCUVhKQ096dEJRVU5CTEdGQlFVOHNTVUZCU1N4RFFVRkRMRTFCUVV3c1IwRkJZenRKUVVaU0xFTkJRV3BDTzBWQlVGVTdPMjlDUVZsYUxHVkJRVUVzUjBGQmFVSXNVMEZCUVR0QlFVTm1MRmRCUVU4N1RVRkJSU3hQUVVGQkxFVkJRVk1zU1VGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4UFFVRmFMRWxCUVhWQ0xFbEJRV3hET3p0RlFVUlJPenR2UWtGSmFrSXNZVUZCUVN4SFFVRmxMRk5CUVVFN1FVRkRZaXhSUVVGQk8wbEJRVUVzU1VGQlJ5eEpRVUZETEVOQlFVRXNWVUZCVlN4RFFVRkRMRkZCUVdZN1RVRkRSU3hMUVVGQkxFZEJRVkVzU1VGQlF5eERRVUZCTEZGQlFVUXNRMEZCUVR0TlFVTlNMRWxCUVdkQ0xFdEJRV2hDTzBGQlFVRXNaVUZCVHl4TlFVRlFPMDlCUmtZN08wRkJTVUU3TzNGQ1FVRm5SQ3hEUVVGRkxHbENRVUV6UXl4SlFVRnpSRHRGUVV4b1JEczdiMEpCVVdZc1lVRkJRU3hIUVVGbExGTkJRVU1zV1VGQlJEdEpRVU5pTEVsQlFVTXNRMEZCUVN4VFFVRkVMRWRCUVdFN1NVRkRZaXhKUVVGQkxFTkJRV01zU1VGQlF5eERRVUZCTEZWQlFWVXNRMEZCUXl4UlFVRXhRanRCUVVGQkxHRkJRVUU3TzBGQlEwRXNWMEZCVHl4SlFVRkRMRU5CUVVFc1VVRkJSQ3hEUVVGVkxGbEJRVmtzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCYmtJc1EwRkJkVUlzVTBGQmRrSXNRMEZCVmp0RlFVaE5PenR2UWtGTFppeG5Ra0ZCUVN4SFFVRnJRaXhUUVVGQk8wRkJRMmhDTEZGQlFVRTdLME5CUVZVc1EwRkJSU3hQUVVGYUxFTkJRVzlDTEZWQlFYQkNPMFZCUkdkQ096dHZRa0ZIYkVJc1YwRkJRU3hIUVVGaExGTkJRVUU3U1VGRldDeEpRVUZETEVOQlFVRXNZVUZCUkN4SFFVRnBRaXhKUVVGSkxGRkJRVkVzUTBGQlF5eFZRVUZpTEVOQlFYZENMRWxCUVVNc1EwRkJRU3hSUVVGNlFqdEpRVWRxUWl4SlFVRkRMRU5CUVVFc1QwRkJSQ3hIUVVGWExFbEJRVWtzVDBGQlNpeERRVUZoTEVOQlFVTXNRMEZCUXl4TlFVRkdMRU5CUVZNc1NVRkJReXhEUVVGQkxGVkJRVllzUlVGQmMwSTdUVUZCUlN4VlFVRkJMRVZCUVZrc1NVRkJReXhEUVVGQkxHRkJRV1k3UzBGQmRFSXNRMEZCWWp0SlFVTllMRWxCUVVNc1EwRkJRU3hQUVVGUExFTkJRVU1zUlVGQlZDeERRVUZaTEZsQlFWb3NSVUZCTUVJc1EwRkJRU3hUUVVGQkxFdEJRVUU3WVVGQlFTeFRRVUZETEZsQlFVUTdaVUZCYTBJc1MwRkJReXhEUVVGQkxHRkJRVVFzUTBGQlpTeFpRVUZtTzAxQlFXeENPMGxCUVVFc1EwRkJRU3hEUVVGQkxFTkJRVUVzU1VGQlFTeERRVUV4UWp0SlFVTkJMRVZCUVVVc1EwRkJReXhuUWtGQlNDeERRVUZ4UWl4SlFVRnlRaXhGUVVGM1FpeEpRVUZETEVOQlFVRXNUMEZCZWtJc1JVRkJhME1zUTBGQlF5eERRVUZETEUxQlFVWXNRMEZCVXl4SlFVRlVMRVZCUVZrc1YwRkJXaXhEUVVGc1F6dFhRVU5CTEVsQlFVTXNRMEZCUVN4VFFVRlRMRU5CUVVNc1NVRkJXQ3hEUVVGblFpeEpRVUZETEVOQlFVRXNUMEZCYWtJN1JVRlNWenM3YjBKQlZXSXNVVUZCUVN4SFFVRlZMRk5CUVVFN1YwRkRVaXhKUVVGRExFTkJRVUVzVjBGQlJDeERRVUZCTzBWQlJGRTdPenM3UjBGb1JWVXNSVUZCUlN4RFFVRkRPenRCUVhGRmVrSXNUVUZCVFN4RFFVRkRMRTlCUVZBc1IwRkJhVUlpZlE9PVxuIl19
